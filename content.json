[{"title":"é€šå…³Jetpackä¹‹ Data Bindingï¼šç¬¬2è¯¾ æ¥å£çºµè§ˆ","date":"2020-03-16T15:18:48.000Z","path":"2020/03/16/Go-through-jetpack-data-binding-L2/","text":"è¿™æ˜¯ã€Šé€šå…³Jetpackã€‹ç³»åˆ—çš„ç¬¬2ç¯‡æ–‡ç«  æˆ‘æ²¡ä»€ä¹ˆèƒ½è€ï¼Œä¸èƒ½ç»™ä½ ä»¬æ›´å¥½çš„ç”Ÿæ´»ï¼Œå”¯ä¸€èƒ½åšçš„ï¼Œæ˜¯æŒ¡åœ¨ä½ ä»¬å‰è¾¹ã€‚â€”â€”ã€Šè¯¯æ€ã€‹ åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œé€šè¿‡å®ä¾‹ä»‹ç»äº†Data Bindingçš„æ¦‚å¿µå’Œç”¨æ³•ï¼Œæœ¬ç¯‡æ–‡ç« åˆ™ä»æ›´ä¸°å¯Œçš„ç»†èŠ‚ä¸Šä»‹ç»Data Bindingçš„ç§ç§ç”¨æ³•ã€‚ ##åˆ›å»ºData Bindingçš„ä¸¤ç§æ–¹å¼ åœ¨ä»£ç é‡Œï¼Œå¦‚æœè¦è·å–åˆ°Data Bindingå¯¹è±¡ï¼Œæœ‰2ç§æ–¹å¼ æ–¹å¼ä¸€ï¼šä¸€æ­¥åˆ°ä½çš„DataBindingUtilã€‚åœ¨onCreateä¸­ï¼Œå¯ä»¥åŒæ—¶å®Œæˆè®¾ç½®å¸ƒå±€æ–‡ä»¶+åˆ›å»ºBindingå¯¹è±¡ä¸¤ä¸ªåŠ¨ä½œã€‚ 123456override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) val binding: ActivityMainBinding = DataBindingUtil.setContentView( this, R.layout.activity_main) binding.user = User(\"Test\", \"User\")&#125; æˆ–è€…åœ¨Fragmentã€ListViewæˆ–è€…RecyclerViewçš„åˆå§‹æ–¹æ³•ä¸­ã€‚ 1val listItemBinding = DataBindingUtil.inflate(layoutInflater, R.layout.list_item, viewGroup, false) æ–¹å¼äºŒï¼šå•ç‹¬ä½¿ç”¨LayoutInflaterå¦‚æœå·²ç»è°ƒç”¨äº†setContentView()ï¼Œåˆ™å¯ä»¥åœ¨ä¹‹åå•ç‹¬ä½¿ç”¨inflateæ–¹æ³•æ¥è·å–Bindingå¯¹è±¡ã€‚ 1val binding: ActivityMainBinding = ActivityMainBinding.inflate(getLayoutInflater()) å¯¹äºFragmentã€ListViewæˆ–è€…RecyclerViewä¹ŸåŒç†ã€‚ 1val listItemBinding = ListItemBinding.inflate(layoutInflater, viewGroup, false) è¡¨è¾¾å¼ç”¨æ³•å¯ä»¥åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨çš„è¡¨è¾¾å¼å¯ä»¥åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨ä¸°å¯Œçš„è¡¨è¾¾å¼ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼Œæš‚ä¸ä¸¾ä¾‹ã€‚ æ•°å­¦è¿ç®—ç¬¦ + - / * % å­—ç¬¦ä¸²æ‹¼æ¥ + é€»è¾‘ç®—å¼ &amp;&amp; || äºŒå…ƒè¿ç®—ç¬¦ &amp; | ^ ä¸€å…ƒè¿ç®—ç¬¦ + - ! ~ ä¸‰ç›®è¿ç®—ç¬¦ ?: ç§»ä½è¿ç®— &gt;&gt; &gt;&gt;&gt; &lt;&lt; æ¯”è¾ƒè¿ç®— == &gt; &lt; &gt;= &lt;=ï¼ˆæ³¨æ„åœ¨xmlä¸­éœ€è¦å°†&lt;è½¬ä¹‰å†™ä¸º&amp;lt;ï¼‰ instanceof å°æ‹¬å· () å­—é¢é‡ å­—ç¬¦ã€å­—ç¬¦ä¸²ã€æ•°å­—ä»¥åŠnull ç±»å‹è½¬æ¢ æ–¹æ³•è°ƒç”¨ å±æ€§è¯»å– æ•°ç»„è¯»å– [] NULLåˆ™æ›¿æ¢NULLåˆ™æ›¿æ¢è¡¨è¾¾å¼ï¼ˆ??ï¼‰å¾ˆå¥½ç”¨ï¼Œå¯ä»¥é¿å…å¾ˆå¤šNPEçš„åœºæ™¯ã€‚ 1234// NULLåˆ™æ›¿æ¢android:text=\"@&#123;user.displayName ?? user.lastName&#125;\"// ç­‰ä»·äºandroid:text=\"@&#123;user.displayName != null ? user.displayName : user.lastName&#125;\" è¯»å–å±æ€§å€¼å…¶å®å¯¹äº a. publicå±æ€§ b. å¸¦æœ‰getterçš„å±æ€§ c. å¯è§‚æµ‹çš„å±æ€§ObservableFieldï¼Œå®ƒä»¬åœ¨xmlé‡Œçš„è¯»å–å†™æ³•éƒ½æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯å¯¹è±¡.å±æ€§ã€‚ 1android:text=\"@&#123;user.name&#125;\" è¯»å–åŒä¸€å¸ƒå±€æ–‡ä»¶é‡Œå…¶å®ƒçš„View å°½ç®¡å¾ˆå°‘ç”¨åˆ°ï¼Œä½†è¿˜æ˜¯ä»‹ç»ä¸€ä¸‹ã€‚ æ¯”å¦‚æˆ‘æœ‰ä¸¤ä¸ªTextViewï¼Œidæ— åˆ†åˆ«æ˜¯text_view_nameå’Œtext_view_nicknameï¼Œåœ¨ç¬¬äºŒä¸ªTextViewé‡Œå¯ä»¥è®¿é—®ç¬¬ä¸€ä¸ªTextViewçš„æ–‡æœ¬ï¼Œåˆ™å¯ä»¥è¿™ä¹ˆå†™ï¼Œéœ€è¦ç•™æ„çš„å°±æ˜¯ä¼šè‡ªåŠ¨å°†idè½¬ä¸ºé©¼å³°å‘½åã€‚ 12345&lt;TextView ... android:text=\"@&#123;textViewName.text&#125;\" ... /&gt; é›†åˆçš„å†™æ³•åœ¨xmlé‡ŒåŒæ ·å¯ä»¥ä½¿ç”¨é›†åˆDataï¼Œå¹¶é€šè¿‡[]æ¥è·å–é›†åˆä¸­ç‰¹å®šçš„å…ƒç´ ã€‚ 12345678910111213141516&lt;data&gt; &lt;import type=\"android.util.SparseArray\"/&gt; &lt;import type=\"java.util.Map\"/&gt; &lt;import type=\"java.util.List\"/&gt; &lt;variable name=\"list\" type=\"List&amp;lt;String&gt;\"/&gt; &lt;variable name=\"sparse\" type=\"SparseArray&amp;lt;String&gt;\"/&gt; &lt;variable name=\"map\" type=\"Map&amp;lt;String, String&gt;\"/&gt; &lt;variable name=\"index\" type=\"int\"/&gt; &lt;variable name=\"key\" type=\"String\"/&gt;&lt;/data&gt;â€¦android:text=\"@&#123;list[index]&#125;\"â€¦android:text=\"@&#123;sparse[index]&#125;\"â€¦android:text=\"@&#123;map[key]&#125;\" Stringå­—é¢é‡åœ¨xmlæ–‡ä»¶ä¸­ï¼Œå¦‚æœè¦ä½¿ç”¨åŒå¼•å·&quot;ï¼Œåˆ™å¯ä»¥å°†å¤–éƒ¨çš„åŒå¼•å·æ›¿æ¢ä¸ºå•å¼•å·&#39;ã€‚æˆ–è€…åœ¨åº”å½“ä½¿ç”¨åŒå¼•å·çš„åœ°æ–¹ä½¿ç”¨åå¼•å·ã€‚ 1234&lt;!-- å•å¼•å·æ›¿ä»£åŒå¼•å· --&gt;android:text='@&#123;map[\"firstName\"]&#125;'&lt;!-- åå¼•å·æ›¿ä»£åŒå¼•å· --&gt;android:text=\"@&#123;map[`firstName`]&#125;\" å¼•ç”¨é™æ€èµ„æºå¼•ç”¨å¤šä¸ªé™æ€èµ„æºçš„è¯­æ³•å¦‚ä¸‹ã€‚ 123android:padding=\"@&#123;larege ? @dimen/largePadding : @dimen/smallPadding&#125;\"android:text=\"@&#123;@string/nameFormat(firstName, lastName)&#125;\"android:text=\"@&#123;@plurals/banana(bananaCount)&#125;\" äº‹ä»¶å¤„ç†Data bindingå…è®¸ä½ ä¸ºViewç»‘å®šå„ç§å„æ ·çš„äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œä½œä¸ºå¸ƒå±€æ–‡ä»¶é‡Œçš„ä¸€é¡¹å±æ€§ï¼Œå¤§éƒ¨åˆ†å‘½åæ ¼å¼ä¸ºandroid:onXXXXï¼Œå¯¹åº”çš„Viewæ¥å£ä¸ºView.OnXXXXListenerã€‚æœ‰ä¸¤ç§æ–¹å¼å¤„ç†äº‹ä»¶ã€‚ æ–¹æ³•å¼•ç”¨ï¼šåœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ–¹æ³•ç­¾åã€‚Data Bindingä¼šå°†æ–¹æ³•ä¸å¯¹è±¡åŒ…è£…æˆä¸€ä¸ªListenerå¹¶è®¾ç½®ç»™Viewã€‚ ç›‘å¬ç»‘å®šï¼šLambdaè¡¨è¾¾å¼ï¼ŒData Bindingå¯¹æ­¤åŒæ ·ç”Ÿæˆä¸€ä¸ªListenerï¼Œä¾›äº‹ä»¶è§¦å‘æ—¶è°ƒç”¨ã€‚ æ–¹æ³•å¼•ç”¨å°±åƒä½ å¯ä»¥ä¸ºonClickæŒ‡æ˜ç»‘å®šçš„æ–¹æ³•ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä¸ºViewçš„å„ç§äº‹ä»¶ç»‘å®šViewModelä¸­çš„æ–¹æ³•ã€‚åœ¨ç¼–è¯‘æ—¶ä¼šå¯¹æ­¤è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœæ–¹æ³•ä¸å­˜åœ¨ï¼Œæˆ–æ˜¯ç­¾åé”™è¯¯ï¼Œåˆ™ç›´æ¥æŠ¥é”™ã€‚â€œæ–¹æ³•å¼•ç”¨â€ä¼šåœ¨ç¼–è¯‘æ—¶åˆ›å»ºä¸€ä¸ªListenerï¼Œç›¸åº”çš„ï¼Œâ€œç›‘å¬ç»‘å®šâ€åˆ™åœ¨äº‹ä»¶è§¦å‘æ—¶æ‰åˆ›å»ºListenerã€‚ä¸€ä¸ªæ–¹æ³•å¼•ç”¨ç»‘å®šçš„ä¾‹å­å¦‚ä¸‹ã€‚ 123class MyHandlers &#123; fun onClickFriend(view: View)&#125; æˆ‘ä»¬å¸Œæœ›åœ¨onClickæ—¶è§¦å‘onClickFriendæ–¹æ³•ï¼Œåˆ™å†™æ³•å¦‚ä¸‹ã€‚æ³¨æ„ï¼šè¡¨è¾¾å¼ä¸­çš„ç­¾åä¸ç±»æ–‡ä»¶é‡Œé¢æ–¹æ³•ç­¾åå¿…é¡»å®Œå…¨ä¸€è‡´ã€‚ 12345678910111213141516&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;data&gt; &lt;variable name=\"handlers\" type=\"com.example.MyHandlers\"/&gt; &lt;variable name=\"user\" type=\"com.example.User\"/&gt; &lt;/data&gt; &lt;LinearLayout android:orientation=\"vertical\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;TextView android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:text=\"@&#123;user.firstName&#125;\" android:onClick=\"@&#123;handlers::onClickFriend&#125;\"/&gt; &lt;/LinearLayout&gt;&lt;/layout&gt; ç›‘å¬ç»‘å®šç›‘å¬ç»‘å®šçš„è‡ªç”±åº¦æ›´å¤§ï¼Œå®ƒå…è®¸ä½ è¿è¡Œä»»æ„çš„ä»£ç ã€‚é™åˆ¶ä¹‹å¤„åˆ™åœ¨äºï¼Œæ–¹æ³•çš„è¿”å›å€¼å¿…é¡»ä¸è¡¨è¾¾å¼æœŸæœ›çš„å€¼ç›¸åŒ¹é…ã€‚ 123class Presneter &#123; fun onSaveClick(task: Task) &#123;&#125;&#125; æˆ‘ä»¬å¯ä»¥å°†ä»¥ä¸Šæ–¹æ³•ç»‘å®šåœ¨Viewçš„onClickä¸Šé¢ã€‚å› ä¸ºè¿™é‡Œå¤šäº†taskå‚æ•°ï¼Œæ•…æ— æ³•ä½¿ç”¨æ–¹æ³•å¼•ç”¨æ¥å†™ã€‚ 123456789101112131415&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\"&gt; &lt;data&gt; &lt;variable name=\"task\" type=\"com.android.example.Task\" /&gt; &lt;variable name=\"presenter\" type=\"com.android.example.Presenter\" /&gt; &lt;/data&gt; &lt;LinearLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;Button android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:onClick=\"@&#123;() -&gt; presenter.onSaveClick(task)&#125;\" /&gt; &lt;/LinearLayout&gt;&lt;/layout&gt; å¦‚æœéœ€è¦ç”¨åˆ°Viewæœ¬èº«ï¼Œåˆ™å¯ä»¥ä½¿ç”¨android:onClick=&quot;@{(view) -&gt; presenter.onSaveClick(task)}&quot;ã€‚å¦‚æœå¤„ç†å‡½æ•°é‡Œä¹Ÿè¦ç”¨åˆ°Viewï¼Œåˆ™å‡½æ•°ç­¾åå†™ä½œã€‚ 123class Presenter &#123; fun onSaveClick(view: View, task: Task)&#125; è¿˜å¯ä»¥ä¸ºæ–¹æ³•å¢åŠ æ›´å¤šçš„å‚æ•°ï¼Œæ¯”å¦‚å¯¹äºCheckBoxçš„isCheckedå±æ€§ã€‚ 123class Presenter &#123; fun onCompletedChanged(task: Task, completed: Boolean)&#123;&#125;&#125; 12&lt;CheckBox android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:onCheckedChanged=\"@&#123;(cb, isChecked) -&gt; presenter.completeChanged(task, isChecked)&#125;\" /&gt; å¯¹äºè¿”å›å€¼évoidçš„æƒ…å†µï¼Œå‡½æ•°ç­¾åå¿…é¡»åŒ¹é…ã€‚æ¯”å¦‚onLongClickæ–¹æ³•ï¼Œè¦è¿”å›booleanç±»å‹çš„å€¼ï¼Œè¡¨ç¤ºäº‹ä»¶æ˜¯å¦è¢«æ¶ˆè´¹ã€‚ 123class Presenter &#123; fun onLongClick(view: View, task: Task): Boolean &#123; &#125;&#125; 1android:onLongClick=\"@&#123;(theView) -&gt; presenter.onLongClick(theView, task)&#125;\" ä¹Ÿå¯ä»¥åœ¨è¡¨è¾¾å¼é‡Œä½¿ç”¨ä¸‰ç›®è¿ç®—ç¬¦ï¼Œç”¨voidè¡¨ç¤ºä¸å“åº”äº‹ä»¶ã€‚ 1android:onClick=\"@&#123;(v) -&gt; v.isVisible() ? doSomething() : void&#125;\" å¿ å‘Šï¼šæŠŠå¤æ‚çš„ä¸šåŠ¡é€»è¾‘æ”¾åœ¨Kotlin/Javaä»£ç ä¸­å¤„ç†ï¼Œè€Œéxmlè¡¨è¾¾å¼ã€‚ å¯¼å…¥ã€å˜é‡ä¸å¼•å…¥ å¯¼å…¥ï¼ˆImportsï¼‰ï¼šåœ¨xmlä¸­å¼•å…¥å¤–éƒ¨ç±» å˜é‡ï¼ˆVariablesï¼‰ï¼šå£°æ˜åœ¨xmlä¸­ä½¿ç”¨çš„å˜é‡ å¼•å…¥ï¼ˆInclucesï¼‰ï¼šå¸®åŠ©æˆ‘ä»¬æ„å»ºæ›´åŠ å¤æ‚çš„UI å¯¼å…¥åœ¨&lt;data&gt;å—è¿›è¡Œå¯¼å…¥ï¼Œå¯¼å…¥åå°±å¯ä»¥åœ¨xmlè¡¨è¾¾å¼é‡Œä½¿ç”¨ç›¸åº”çš„ç±»ã€‚å¦‚ä¸‹ä¾‹çš„Viewç±»ã€‚ 123456789&lt;data&gt; &lt;import type=\"android.view.View\"/&gt;&lt;/data&gt;&lt;TextView android:text=\"@&#123;user.lastName&#125;\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\" android:visibility=\"@&#123;user.isAdult ? View.VISIBLE : View.GONE&#125;\"/&gt; å¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå¦‚æŠŠuser.connectionå¼ºè½¬ä¸ºUserã€‚ 1234&lt;TextView android:text=\"@&#123;((User)(user.connection)).lastName&#125;\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\"/&gt; åœ¨importåï¼Œå¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨é™æ€æ–¹æ³•ã€‚ 123456789&lt;data&gt; &lt;import type=\"com.example.MyStringUtils\"/&gt; &lt;variable name=\"user\" type=\"com.example.User\"/&gt;&lt;/data&gt;&lt;TextView android:text=\"@&#123;MyStringUtils.capitalize(user.lastName)&#125;\" android:layout_width=\"wrap_content\" android:layout_height=\"wrap_content\"/&gt; ä½œä¸ºData Bindingç±»åº“çš„é»˜è®¤è¡Œä¸ºï¼Œjava.lang.*å·²ç»è‡ªåŠ¨å¼•å…¥ã€‚ å˜é‡å£°æ˜å˜é‡ï¼Œä»è€Œåœ¨è¡¨è¾¾å¼ä¸­å¼•ç”¨è¿™äº›å˜é‡ï¼Œå˜é‡çš„èµ‹å€¼æ¥è‡ªäºBindingå¯¹è±¡ã€‚å¯¹äºåŒåçš„portraitå’Œlandscapeå¸ƒå±€æ–‡ä»¶ï¼Œå®ƒä»¬çš„å˜é‡å£°æ˜ä¼šè¿›è¡Œåˆå¹¶ï¼Œå› æ­¤æ³¨æ„åœ¨å¤„ç†è¿™ç§åœºæ™¯æ—¶ï¼Œä¸è¦å‘ç”Ÿå‘½åå†²çªã€‚å¯¹äºæœªèµ‹å€¼çš„å˜é‡ï¼Œåœ¨è¿è¡Œæ—¶ä¼šå–å®ƒä»¬çš„é»˜è®¤å€¼ï¼š0ã€falseã€nullç­‰ç­‰ã€‚ Data Bindingç±»åº“åŒæ ·å†…ç½®äº†contextå˜é‡ï¼Œä¾›è°ƒç”¨è€…åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œå®ƒç­‰ä»·äºView.getContext()ã€‚ å¼•å…¥åœ¨è¿›è¡Œå¤æ‚UIæ„ä»¶æ—¶ï¼Œå¦‚æœç”¨åˆ°äº†includeæ ‡ç­¾ï¼Œå¯ä»¥å°†å˜é‡ä»çˆ¶å¸ƒå±€ä¼ é€’ç»™å­å¸ƒå±€ã€‚å¦‚ä¸‹ä¾‹ï¼Œuserå¯¹è±¡è¢«ä¼ é€’ç»™äº†å­å¸ƒå±€ã€‚ 12345678910111213141516&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:bind=\"http://schemas.android.com/apk/res-auto\"&gt; &lt;data&gt; &lt;variable name=\"user\" type=\"com.example.User\"/&gt; &lt;/data&gt; &lt;LinearLayout android:orientation=\"vertical\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;include layout=\"@layout/name\" bind:user=\"@&#123;user&#125;\"/&gt; &lt;include layout=\"@layout/contact\" bind:user=\"@&#123;user&#125;\"/&gt; &lt;/LinearLayout&gt;&lt;/layout&gt; ä½†æ˜¯ï¼ŒData Bindingå¹¶ä¸æ”¯æŒmergeæ ‡ç­¾ï¼Œè¯•å›¾åœ¨mergeè¿‡ç¨‹ä¸­ä¼ é€’å˜é‡æ˜¯æ— æ•ˆçš„ã€‚ ã€æœªå®Œå¾…ç»­ã€‘","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"},{"name":"Jetpack","slug":"Jetpack","permalink":"https://lilei.pro/tags/Jetpack/"}]},{"title":"Kotlin åç¨‹åŸºç¡€è¯¾ 04.åç¨‹åŸç†å°æ¢â€”â€”ä»åŒ…è£…å¼‚æ­¥è¯·æ±‚ä¸ºåŒæ­¥è¯´èµ·","date":"2020-03-16T15:14:41.000Z","path":"2020/03/16/kotlin-coroutines-04/","text":"è¿™æ˜¯ã€ŠKotlin åç¨‹åŸºç¡€è¯¾ã€‹çš„ç¬¬4ç¯‡ï¼Œä¹Ÿæ˜¯æœ€åä¸€ç¯‡æ–‡ç« ã€‚ æˆ‘ä¸åœ¨æ„åå¹´åçš„è‡ªå·±æ˜¯ä»€ä¹ˆæ ·å­ï¼Œæˆ‘åœ¨æ„çš„æ˜¯ï¼Œåå¹´åçš„æˆ‘æ€ä¹ˆçœ‹ç°åœ¨çš„è‡ªå·±ã€‚ åç¨‹æ˜¯å¼ºå¤§çš„å·¥å…·ï¼Œé€šè¿‡å‰é¢ä¸‰ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†ä»€ä¹ˆæ˜¯åç¨‹ã€å¦‚ä½•ä½¿ç”¨åç¨‹ã€åç¨‹é‡Œçš„CoroutineContextåˆ°åº•æ˜¯ä¸ªä»€ä¹ˆç©æ„å„¿ã€‚æœ¬æ–‡æ˜¯ã€ŠKotlinåç¨‹åŸºç¡€è¯¾ã€‹ç³»åˆ—çš„æœ€åä¸€ç¯‡æ–‡ç« ï¼Œå°†ä»åŸç†ä¸Šè¿›è¡Œç®€è¦çš„ä»‹ç»ã€‚ ä»æ··åˆå¼€å‘è¯´èµ·å¯¹Javaå¼€å‘è€…è€Œè¨€ï¼Œâ€œå›è°ƒâ€æ˜¯å†å¸¸è§ä¸è¿‡çš„æ¦‚å¿µäº†ã€‚ä»å„ç§SDKåˆ°æˆ‘ä»¬è‡ªå·±å¼€å‘çš„ä»£ç ï¼Œå¤„å¤„å……æ»¡äº†å›è°ƒã€‚æŸä¸ªä»»åŠ¡éœ€è¦é•¿æ—¶é—´æ‰§è¡Œï¼ŒåŒæ—¶æˆ‘ä»¬å¸Œæœ›èƒ½åœ¨ä»»åŠ¡å®Œæˆæ—¶å¾—åˆ°é€šçŸ¥ï¼Œåœ¨å‡½æ•°å‚æ•°é‡ŒåŠ ä¸Šä¸€ä¸ªå›è°ƒå¯¹è±¡ï¼Œç”¨ä»¥æ”¶å–ç»“æœï¼Œæ˜¯ååˆ†å¸¸è§çš„è§£å†³æ–¹æ¡ˆã€‚ ä¸€ä¸ªå›è°ƒDemoæˆ‘ä»¬å‡è®¾æœ‰ä¸ªè€—æ—¶è®¡ç®—ä»»åŠ¡ï¼ŒsleepæŒ‡å®šæ—¶é—´ç„¶åè¿”å›æ•°å€¼ï¼Œä»£ç å¦‚ä¸‹ã€‚ 12345678910111213// è€—æ—¶å‡½æ•°ï¼Œå°†è¿ç®—ç»“æœåœ¨å›è°ƒä¸­è¿”å›// åªèƒ½åœ¨å·¥ä½œçº¿ç¨‹é‡Œè°ƒç”¨fun calcSlowly(inp: Int, callback: CalcTaskCallback&lt;Int&gt;) &#123; try &#123; println(\"calcSlowly inp=$inp in thread: $&#123;Thread.currentThread().name&#125;\") val result = inp * 1000L Thread.sleep(result) callback.onSuccess(result.toInt()) &#125; catch (e: Exception) &#123; println(\"Fail to calc\") callback.onFailure(-1, \"Fail\") &#125;&#125; ä¸ºäº†è·å–è®¡ç®—çš„ç»“æœï¼Œæˆ‘ä»¬ä¼ å…¥äº†callbackå‚æ•°ï¼Œç”¨ä»¥æ¥æ”¶è®¡ç®—ç»“æœï¼Œæˆ–è€…å¼‚å¸¸ä¿¡æ¯ã€‚ è°ƒç”¨å®ƒçš„ä»£ç æ ·ä¾‹å¦‚ä¸‹ï¼Œç”¨ä¸€ä¸ªåŒ¿åå†…éƒ¨å¯¹è±¡æ¥æ”¶å›è°ƒï¼š 12345678910111213fun execCalcTaskAsync() &#123; Thread(Runnable &#123; calcSlowly(3, object : CalcTaskCallback&lt;Int&gt; &#123; override fun onSuccess(result: Int) &#123; println(\"onSuccess, result=$result, in thread: $&#123;Thread.currentThread().name&#125;\") &#125; override fun onFailure(code: Int, msg: String) &#123; println(\"onFailure, code=$code, msg=$msg, in thread: $&#123;Thread.currentThread().name&#125;\") &#125; &#125;) &#125;).start()&#125; è¿™ç§å›è°ƒå†™æ³•åœ¨Javaä¸­å†å¸¸è§ä¸è¿‡äº†ã€‚ä½†æ˜¯å®ƒå´æœ‰ç€ä¸å°çš„éšæ‚£ï¼š åµŒå¥—å¤ªå¤šï¼Œæˆä¸ºâ€œå›è°ƒåœ°ç‹±â€ï¼› ä¼ å…¥çš„callbackå¦‚æœæ˜¯Activityä¼šå¼•èµ·æ³„éœ²ï¼› ä»£ç é˜…è¯»èµ·æ¥ä¸ç›´è§‚ã€‚ è¿™å‡ ä¸ªéšæ‚£ä¸è¯¦è¿°äº†ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹åœ¨Kotlinä¸­å¦‚ä½•å°†å¼‚æ­¥å›è°ƒè½¬æ¢ä¸ºåŒæ­¥è¯·æ±‚ã€‚ å°†å¼‚æ­¥è½¬åŒ–ä¸ºåŒæ­¥é€šè¿‡åç¨‹çš„suspendCoroutineå…³é”®å­—ï¼Œå¯ä»¥å°†å¼‚æ­¥å›è°ƒè½¬æ¢ä¸ºåŒæ­¥è°ƒç”¨ï¼Œä¸Šä¾‹æ”¹å†™æ–¹æ³•å¦‚ä¸‹ï¼Œ 12345678910111213// åŒ…è£…å¼‚æ­¥ä¸ºåŒæ­¥suspend fun calcSlowlySync(inp: Int): Int = suspendCoroutine &#123; cont -&gt; calcSlowly(inp, object: CalcTaskCallback&lt;Int&gt; &#123; override fun onSuccess(result: Int) &#123; cont.resume(result) &#125; override fun onFailure(code: Int, msg: String) &#123; cont.resumeWithException(Exception(\"code=$code, msg=$msg\")) &#125; &#125;) &#125; æ”¹å†™ä¹‹åï¼Œå°±å¯ä»¥åœ¨åç¨‹å†…éƒ¨æ„‰å¿«åœ°ä½¿ç”¨è¿™ä¸ªåŒæ­¥æ–¹æ³•è¿›è¡Œè€—æ—¶è®¡ç®—äº†ã€‚ 1234launch(Dispatchers.DEFAULT) &#123; val result = calcSlowlySync(100) println(\"result=$result\")&#125; suspendCoroutineæ˜¯å¦‚ä½•å·¥ä½œçš„todo åŸå§‹ä»£ç MainCoroutine.kt 12345678910111213141516fun main(args: Array&lt;String&gt;) &#123; runBlocking &#123; val job = GlobalScope.launch &#123; val result = calcSlowly(123) println(\"result = $result\") &#125; job.join() &#125; print(\"FINISH\")&#125;// å»¶æ—¶è®¡ç®—private suspend fun calcSlowly(inp: Int): Int = withContext(Dispatchers.Default) &#123; delay(1000L) inp * 10&#125; åç¼–è¯‘åç”Ÿæˆ4ä¸ªæ–‡ä»¶ MainCoroutineKt.classï¼Œ MainCoroutineKt$main$1.class MainCoroutineKt$main$1$job$1.class MainCoroutineKt$calcSlowly$2.class å¤§çº²æ··åˆå¼€å‘ï¼Œä»æŠŠå¼‚æ­¥è¯·æ±‚è½¬æ¢ä¸ºåŒæ­¥è¯´èµ·å¼‚æ­¥æ¥å£è½¬æ¢åŒæ­¥åç¨‹å†…éƒ¨å¦‚ä½•å°†å¼‚æ­¥è½¬æ¢ä¸ºåŒæ­¥suspendCoroutinetodo","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"}]},{"title":"é€šå…³Jetpackä¹‹ Data Bindingï¼šç¬¬1è¯¾ éœ€æ±‚å®æˆ˜","date":"2020-03-16T15:08:48.000Z","path":"2020/03/16/Go-through-jetpack-data-binding-L1/","text":"è¿™æ˜¯ã€Šé€šå…³Jetpackã€‹ç³»åˆ—çš„ç¬¬1ç¯‡æ–‡ç«  æœ‰äº›äººæ²¦ä¸ºå¹³åº¸ï¼Œæœ‰çš„äººé‡‘ç‰å…¶å¤–ã€è´¥çµ®å…¶ä¸­ã€‚å¯æœªæ¥æŸä¸€å¤©ï¼Œä¸ç»æ„é—´ä½ ä¼šé‡åˆ°ä¸€ä¸ªå½©è™¹èˆ¬ç»šä¸½çš„äººï¼Œä»æ­¤ä»¥åï¼Œå…¶ä»–äººå°±ä¸è¿‡æ˜¯åŒ†åŒ†æµ®äº‘ã€‚ Data Bindingæ˜¯ä»€ä¹ˆåœ¨å­¦ä¹ ä¸€é¡¹æ–°çŸ¥è¯†ã€æ–°æŠ€èƒ½ä¹‹å‰ï¼Œå¿…é¡»é—®çš„é—®é¢˜æ˜¯è¿™é—¨æŠ€æœ¯æ˜¯ä»€ä¹ˆã€å°†ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆæœ‰ç›Šçš„æ”¹å˜ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Data Bindingã€‚ Data Bindingæ˜¯ä»€ä¹ˆData Bindingæ˜¯ç”±Googleæ¨å‡ºçš„ä¸€ä¸ªåº“ï¼ˆLibraryï¼‰ï¼Œç”¨æ¥è§£å†³æ•°æ®å˜åŒ–ä¸UIæ˜¾ç¤ºåŒæ­¥çš„é—®é¢˜ã€‚ Data Bindingå¸¸å¸¸ä¸MVVMä¸€åŒå‡ºç°ï¼Œè¿™å¹¶ä¸æ„å‘³ç€å®ƒä»¬æ˜¯åŒä¸€ç±»ä¸œè¥¿ã€‚MVVMæ˜¯è®¾è®¡æ¨¡å¼/ç¼–ç¨‹æ€æƒ³ï¼ŒViewModelæ˜¯å…¶ä¸­ä¸€ä¸ªç»„æˆéƒ¨åˆ†ã€‚è€ŒData Bindingåˆ™æ˜¯å®ç°è¿™é—¨æ€æƒ³çš„ä¸€ç§å·¥å…·ã€‚ Data Bindingå°†ä¸ºæˆ‘ä»¬å¸¦æ¥æ€æ ·çš„æ”¹å˜åšåº”ç”¨å¼€å‘ï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†ç²¾åŠ›éƒ½ç”¨äºå¤„ç†UIå’Œæ•°æ®çš„åŒæ­¥é—®é¢˜ã€‚åœ¨ä¼ ç»Ÿå®ç°æ–¹å¼é‡Œï¼Œæ•°æ®ä»æœåŠ¡å™¨è¿”å›äº†ï¼Œæ­¤æ—¶è¦æ‰‹åŠ¨è°ƒç”¨updateViewä¸€ç±»çš„æ–¹æ³•æ›´æ–°UIï¼›åŒæ ·ï¼Œå½“ç”¨æˆ·æ“ä½œUIä¸Šçš„å…ƒç´ æ—¶ï¼Œä¼šé€šè¿‡Listenerç­‰ç›‘å¬ï¼Œæ›´æ–°åˆ°å†…å­˜çš„æ•°æ®ä¸­â€”â€”è¿™æ˜¯é€»è¾‘å¼å†™æ³•ï¼Œè€ŒData Bindingåˆ™æ˜¯é€šè¿‡å£°æ˜å¼çš„å†™æ³•ï¼Œå°†æ•°æ®-UIè§£è€¦ï¼Œä»è€Œå¯ä»¥ç®€åŒ–æ§åˆ¶æµï¼Œè®©æˆ‘ä»¬æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œè€ŒéUIåŒæ­¥ã€‚ æˆ‘ä»¬é¦–å…ˆä»codelabçš„å®ä¾‹å…¥æ‰‹ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨Data Bindingã€‚ç„¶åä¼šæ·±å…¥ä»‹ç»Data Bindingçš„APIï¼Œæœ€ååˆ™æ˜¯ä»åŸç†è§’åº¦é˜è¿°å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚é¢„è®¡åˆ†æˆ3ç¯‡æ–‡ç« ã€‚ å‡æƒ³ä¸€ç§éœ€æ±‚åœºæ™¯ä»¥è¿™æ ·ä¸€ä¸ªAppä¸ºä¾‹ï¼Œå®ƒéœ€è¦æ˜¾ç¤ºä¸€æ®µé™æ€çš„æ–‡æœ¬ï¼ˆå·¦ä¾§ï¼‰ï¼Œä»¥åŠå¯ç‚¹å‡»çš„LIKEæŒ‰é’®ï¼ˆå³ä¾§ï¼‰ï¼Œç‚¹å‡»è¯¥æŒ‰é’®æ—¶ä¼šæå‡æ¬¢è¿åº¦æ•°å€¼å¹¶å®æ—¶æ˜¾ç¤ºåœ¨UIä¸Šï¼Œæœ€åï¼Œæ¬¢è¿åº¦æ•°å€¼æ¯è¾¾åˆ°ä¸€ä¸ªé˜¶æ®µï¼Œä¼šåœ¨å±å¹•å³ä¾§æ˜¾ç¤ºä¸åŒé˜¶æ®µçš„å›¾ç‰‡ã€‚ sample app æ²¡æœ‰Data Bindingæ—¶çš„å†™æ³•é¦–å…ˆæ˜¯æ²¡æœ‰ä½¿ç”¨Data Bindingæ—¶ï¼Œä¼ ç»Ÿçš„MVVMå†™æ³•ï¼Œå·²çœç•¥æ— å…³ä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475// SimpleViewModel.kt// ViewModelï¼Œå¯¹åº”é¡µé¢ä¸Šçš„é™æ€éƒ¨åˆ†ã€åŠ¨æ€éƒ¨åˆ†ä»¥åŠç‚¹å‡»ç›‘å¬å‡½æ•°class SimpleViewModel : ViewModel() &#123; val name = \"Grace\" val lastName = \"Hopper\" var likes = 0 // ç‚¹å‡»ç›‘å¬å‡½æ•° fun onLike() &#123; likes++ &#125; // ä¸åŒé˜¶æ®µçš„æ¬¢è¿åº¦ï¼ŒåŸºäºlikeæ•°è®¡ç®— val popularity: Popularity get() &#123; return when &#123; likes &gt; 9 -&gt; Popularity.STAR likes &gt; 4 -&gt; Popularity.POPULAR else -&gt; Popularity.NORMAL &#125; &#125;&#125;// PlainOldActivity.ktï¼ŒUIå±‚class PlainOldActivity : AppCompatActivity() &#123; // Activityå½“ä¸­ç»´æŠ¤ä¸€ä¸ªæˆå‘˜å˜é‡ private val viewModel by lazy &#123; ViewModelProviders.of(this).get(SimpleViewModel::class.java) &#125; override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.plain_activity) // ç¼ºç‚¹1ï¼šå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ–°UI updateName() updateLikes() &#125; // ç¼ºç‚¹2ï¼šåœ¨UIç±»ä¸­åŒ…å«ä¸šåŠ¡é€»è¾‘ fun onLike(view: View) &#123; viewModel.onLike() updateLikes() &#125; // ç¼ºç‚¹3ï¼šå¤ªå¤šçš„findViewById private fun updateName() &#123; findViewById&lt;TextView&gt;(R.id.plain_name).text = viewModel.name findViewById&lt;TextView&gt;(R.id.plain_lastname).text = viewModel.lastName &#125; // ç¼ºç‚¹4ï¼šå¤šæ¬¡è°ƒç”¨findViewById // ç¼ºç‚¹5ï¼šåŒ…å«æœªç»æµ‹è¯•çš„é€»è¾‘ // ç¼ºç‚¹6ï¼šå³ä½¿æ•°æ®æœªå‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šæ›´æ–°View private fun updateLikes() &#123; findViewById&lt;TextView&gt;(R.id.likes).text = viewModel.likes.toString() findViewById&lt;ProgressBar&gt;(R.id.progressBar).progress = (viewModel.likes * 100 / 5).coerceAtMost(100) val image = findViewById&lt;ImageView&gt;(R.id.imageView) val color = getAssociatedColor(viewModel.popularity, this) ImageViewCompat.setImageTintList(image, ColorStateList.valueOf(color)) image.setImageDrawable(getDrawablePopularity(viewModel.popularity, this)) &#125; private fun getAssociatedColor(popularity: Popularity, context: Context): Int &#123; // ... &#125; private fun getDrawablePopularity(popularity: Popularity, context: Context): Drawable? &#123; // ... &#125;&#125; è¿™ä¹ˆç®€å•ä¸€ä¸ªé¡µé¢ï¼Œå…‰æ˜¯åˆ—å‡ºæ¥çš„ç¼ºç‚¹å°±æœ‰6æ¡ä¹‹å¤šï¼Œæ— æ³•æƒ³è±¡å½“ä¸šåŠ¡é€»è¾‘å¤æ‚èµ·æ¥åï¼Œä»£ç å°†ä¼šå¢é•¿åˆ°ä½•ç§ç¨‹åº¦ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹Data Bindingå¦‚ä½•è§£å†³ä¸Šè¿°é—®é¢˜çš„ã€‚ é™æ€æ•°æ®ç»‘å®šUIgradleä»1.5.0ç‰ˆæœ¬å¼€å§‹æ”¯æŒdata bindingé¦–å…ˆéœ€è¦åœ¨projectçš„build.gradleæ–‡ä»¶é‡Œæ‰“å¼€å¼€å…³ï¼Œ 123456android &#123;... dataBinding &#123; enabled true &#125;&#125; ç›¸æ¯”äºæ™®é€šå¸ƒå±€ï¼Œdata bindingå¸ƒå±€æ–‡ä»¶åœ¨æœ€å¤–å±‚å¢åŠ äº†&lt;layout&gt;æ ‡ç­¾ï¼Œ&lt;layout&gt;æ ‡ç­¾å†…éƒ¨åˆ™ç”±&lt;data&gt;æ ‡ç­¾å’ŒåŸå¸ƒå±€ç»„æˆã€‚å¯¹äºéœ€è¦é‡æ„æˆdata bindingçš„å¸ƒå±€æ–‡ä»¶ï¼Œå°†é¼ æ ‡é€‰ä¸­æœ€å¤–å±‚å¸ƒå±€ï¼Œä¼šè‡ªåŠ¨æç¤º Convert to data binding layoutã€‚ä¸€ä¸ªdata bindingå¸ƒå±€å¦‚ä¸‹æ‰€ç¤ºï¼š 123456789101112&lt;layout xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:app=\"http://schemas.android.com/apk/res-auto\" xmlns:tools=\"http://schemas.android.com/tools\"&gt; &lt;data&gt; &lt;/data&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"&gt; &lt;TextView... &lt;data&gt;æ ‡ç­¾ä¸­çš„å˜é‡ï¼Œå¯ä»¥åœ¨å¸ƒå±€æ–‡ä»¶é‡Œè¿›è¡Œè°ƒç”¨ï¼Œä¹Ÿæ”¯æŒç®€å•çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚if...else...ã€ç±»å‹è½¬æ¢ã€å­—ç¬¦ä¸²æ‹¼æ¥ã€‚è¡¨è¾¾å¼çš„æ ¼å¼ä¸º@{...}ã€‚è™½ç„¶è¡¨è¾¾å¼å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¸è¦æ»¥ç”¨ï¼Œå¦åˆ™ä¼šä½¿å¸ƒå±€æ–‡ä»¶è¿‡äºå¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚ 123android:text=\"@&#123;String.valueOf(index + 1)&#125;\"android:visibility=\"@&#123;age &lt; 13 ? View.GONE : View.VISIBLE&#125;\"android:transitionName='@&#123;\"image_\" + id&#125;' åŸºäºä¸Šè¿°çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¸ºå±æ€§nameå’Œlast nameå£°æ˜å˜é‡ã€‚ 1234&lt;data&gt; &lt;variable name=\"name\" type=\"String\"/&gt; &lt;variable name=\"lastName\" type=\"String\"/&gt;&lt;/data&gt; ä»è€Œå¯ä»¥åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚ 123&lt;TextView android:id=\"@+id/plain_name\" android:text=\"@&#123;name&#125;\" /&gt; ç›®å‰ä¸ºæ­¢å·²ç»å®Œæˆäº†å¸ƒå±€æ–‡ä»¶çš„ç¼–å†™ï¼Œéœ€è¦ä¸€ä¸ªæ—¶æœºï¼Œå°†æ•°æ®å¡ç»™å¸ƒå±€æ–‡ä»¶ï¼Œå¯ä»¥åœ¨onCreateé‡Œåšè¿™ä»¶äº‹ã€‚ 12345// onCreatesetConetntView(R.layout.plain_activity)val binding: PlainActivityBinding = DataBindingUtil.setContgentView(this, R.layout.plain_activity)binding.name = \"Lei\"binding.lastName = \"Li\" å¦‚æ­¤å³å¯ï¼Œä¸éœ€è¦findViewByIdã€setTextï¼Œç”šè‡³ä¸å…³å¿ƒUIé‡Œåˆ°åº•æ˜¯TextViewè¿˜æ˜¯EditTextç”šè‡³è‡ªå®šä¹‰æ§ä»¶ï¼Œè¦åšçš„äº‹æƒ…åªæ˜¯ç»™æˆå‘˜å˜é‡èµ‹å€¼ã€‚å¤„ç†å®Œäº†é™æ€æ–‡æœ¬ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•å“åº”UIçš„ç‚¹å‡»LIKEäº‹ä»¶ã€‚è¦çŸ¥é“ï¼Œè¿™é‡Œæˆ‘ä»¬åŒæ ·ä¹Ÿä¸ç”¨findViewByIdä»¥åŠsetOnClickListenerçš„ã€‚ é¦–å…ˆå›å¿†ä¸€ä¸‹æœ€æ—©çš„ç‚¹å‡»äº‹ä»¶å¤„ç†æ–¹å¼â€”â€”åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼ŒonClick=onLikeï¼Œè¿™æ ·è‡ªåŠ¨å…³è”èµ·æ¥Activityä¸­çš„onLikeæ–¹æ³•ï¼Œè™½ç„¶ç›´è§‚ï¼Œä½†å¸¦æ¥çš„åæœå°±æ˜¯ç»‘æ­»äº†å¸ƒå±€æ–‡ä»¶ä¸Activityï¼Œæ ¹æœ¬æ— æ³•å¤ç”¨ã€‚å…¶å®Data Bindingçš„å¤„ç†æ–¹å¼ä¸æ­¤ç±»ä¼¼ï¼Œåªä¸è¿‡å®ƒå¢åŠ äº†ä¸€ä¸ªViewModelå±‚ã€‚ åœ¨è®¡ç®—æœºè½¯ä»¶é¢†åŸŸï¼Œæ²¡æœ‰ä»€ä¹ˆé—®é¢˜æ˜¯å¢åŠ ä¸€ä¸ªä¸­é—´å±‚ä¸èƒ½è§£å†³çš„ï¼Œå¦‚æœå°±ï¼Œé‚£å°±åŠ ä¸¤å±‚ã€‚ 12345&lt;data&gt; &lt;variable name=\"viewmodel\" type=\"com.example.android.databinding.basicsample.data.SimpleViewModel\"/&gt;&lt;/data&gt; &lt;data&gt;ä¸­ä¸å†æ˜¯ç®€å•çš„Stringï¼Œè€Œæ˜¯ä¸€ä¸ªSimpleViewModelç±»å‹å¯¹è±¡ï¼Œè¯¥ç±»åœ¨ä¸Šæ–‡ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå®ƒåŒ…å«nameã€lastNameå­—æ®µï¼Œä»¥åŠä¸€ä¸ªå¤„ç†LIKE++äº‹ä»¶çš„onLikeæ–¹æ³•ã€‚æœ‰äº†è¿™ä¸ªviewmodelå¯¹è±¡ï¼Œå°±å¯ä»¥åœ¨æ¥ä¸‹æ¥çš„å¸ƒå±€é‡Œé¢è¿™æ ·ä½¿ç”¨äº†ã€‚ä¸”æ¯”ä¸Šç§å†™æ³•æ›´å¥½çš„åœ°æ–¹åœ¨äºï¼Œç¼–è¯‘å™¨ä¼šæ£€æŸ¥onLikeæ–¹æ³•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç¼–è¯‘æ—¶å°±ä¼šå¼‚å¸¸ã€‚ 1234567891011&lt;TextView android:id=\"@+id/plain_name\" android:text=\"@&#123;viewmodel.name&#125;\"... /&gt;&lt;TextView android:id=\"@+id/plain_lastname\" android:text=\"@&#123;viewmodel.lastName&#125;\"... /&gt;&lt;Button android:onClick=\"@&#123;() -&gt; viewmodel.onLike()&#125;\"... /&gt; å¯¹äºviewmodelçš„èµ‹å€¼ï¼Œåˆ™åœ¨onCreateé‡Œé¢ç›´æ¥binding.viewmodel = viewModelå°±å¯ä»¥ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠlikeså±æ€§ç»‘å®šåˆ°å¸ƒå±€æ–‡ä»¶çš„æŸä¸ªTextViewä¸Šï¼ˆæ³¨æ„è¿™é‡Œä¸è¦ç›´æ¥è®©android:text=&quot;@{viewmodel.lines}&quot;ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´è¿è¡Œæ—¶è¯»å–id=0çš„å­—ç¬¦ä¸²èµ„æºï¼Œä»è€Œå¼‚å¸¸ï¼‰ï¼Œä¼šå‘ç°å³ä½¿é€šè¿‡onLike()å¢é•¿äº†LIKEï¼Œä½†åœ¨UIä¸Šå¹¶æ²¡æœ‰ä½“ç°ï¼ŒLIKEæ•°å§‹ç»ˆæ˜¾ç¤ºä¸º0ã€‚è¿™æ˜¯å› ä¸ºç›®å‰ä¸ºæ­¢æˆ‘ä»¬è¿›è¡Œçš„ç»‘å®šéƒ½æ˜¯é™æ€ä¸”å•å‘ç»‘å®šï¼Œä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†å­¦ä¹ åŒå‘ç»‘å®šï¼Œä»è€Œè®©LIKESçš„æ•°ç›®å®æ—¶æ˜¾ç¤ºåœ¨UIä¸Šã€‚ åŒå‘Data Bindingçš„å†™æ³•æ‰€è°“â€œåŒå‘â€Data Bindingï¼Œæ˜¯æŒ‡å¯¹äºViewè€Œè¨€ï¼Œåœ¨åˆå§‹åŒ–æ—¶å¯ä»¥è‡ªåŠ¨ä»dataé‡Œè·å–æ•°æ®ï¼Œå¯¹äºdataè€Œè¨€ï¼Œå½“å®ƒä»¬çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œèƒ½è‡ªåŠ¨é€šçŸ¥UIæ˜¾ç¤ºç›¸åº”æ•°å€¼ã€‚å¯¹äºè¿™ç§å‘ç”Ÿå˜åŒ–æ—¶èƒ½é€šçŸ¥UIçš„æ•°æ®ï¼Œç§°ä¹‹ä¸ºå…·æœ‰â€œå¯è§‚å¯Ÿæ€§â€ï¼Œå³observableã€‚æœ‰å¤šé‡é€”å¾„ç”Ÿæˆä¸€ä¸ªå¯è§‚å¯Ÿçš„å¯¹è±¡ï¼Œæ¯”å¦‚observable classesã€observable fieldsï¼Œä»¥åŠæœ€é€šç”¨ä¹Ÿæœ€å¥½ç”¨çš„LiveDataã€‚å£°æ˜å¯è§‚å¯Ÿå¯¹è±¡çš„æ–¹å¼å¦‚ä¸‹ã€‚å¸¦æœ‰å‰ç½®ä¸‹åˆ’çº¿_çš„å˜é‡ä¸ºç§æœ‰å˜é‡ï¼Œæ˜¯å¯å˜çš„ï¼Œä¸å¯¹å¤–è¿›è¡Œæš´éœ²ã€‚æ¯ä¸ªç§æœ‰å˜é‡éƒ½æ‹¥æœ‰ä¸€ä¸ªLiveData&lt;T&gt;ç±»å‹çš„æ¥å£å˜é‡ï¼Œç”¨äºæä¾›ç»™å¸ƒå±€æ–‡ä»¶è¯»å–ã€‚ 1234567private val _name = MutableLiveData(\"Ada\")private val _lastName = MutableLiveData(\"Lovelace\")private val _likes = MutableLiveData(0)val name: LiveData&lt;String&gt; = _nameval lastName: LiveData&lt;String&gt; = _lastNameval likes: LiveData&lt;Int&gt; = _likes åŒæ—¶éœ€è¦åœ¨Activityçš„onCreate()æ–¹æ³•ä¸­ï¼Œä¸ºbindingå¯¹è±¡çš„lifecycleOwnerèµ‹å€¼ï¼ˆä¸ºActivityï¼‰ã€‚å¦‚æœä¸åšè¿™ä¸€æ­¥ï¼Œæ•°æ®çš„å˜åŒ–å°±æ— æ³•è¢«è§‚æµ‹åˆ°ã€‚ 12345override fun onCreate(SavedInstanceState: Bundle?) &#123; ... binding.lifecycleOwner = this ...&#125; å¯¹äºpopularityï¼ŒåŒæ ·å°†å…¶å£°æ˜ä¸ºLiveDataç±»å‹ã€‚è¿™é‡Œæ³¨æ„ï¼Œå¹¶æ²¡æœ‰ç§æœ‰çš„_popularityï¼Œå› ä¸ºå®ƒçš„å€¼å®é™…ä¸Šæ˜¯æ ¹æ®likesè®¡ç®—å¾—åˆ°çš„ã€‚å› æ­¤é€šè¿‡Transformations.map()æ“ä½œï¼Œä»ä¸€ä¸ªMutableLiveDataç±»å‹çš„_likeså¯¹è±¡è®¡ç®—å‡ºLiveDataç±»å‹çš„popularityã€‚å…³äºTransformationçš„ä½¿ç”¨ï¼Œå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚ 12345678// popularity is exposed as LiveData using a Transformation instead of a @Bindable property.val popularity: LiveData&lt;Popularity&gt; = Transformations.map(_likes) &#123; when &#123; it &gt; 9 -&gt; Popularity.STAR it &gt; 4 -&gt; Popularity.POPULAR else -&gt; Popularity.NORMAL &#125;&#125; æ­¤æ—¶ï¼Œåœ¨onLike()ä¸­æˆ‘ä»¬ç›´æ¥ä¿®æ”¹_likesçš„å€¼ï¼Œå°±ä¼š é€šçŸ¥åˆ°UIè‡ªåŠ¨å‘ç”Ÿè°ƒæ•´äº†ã€‚ 123fun onLike() &#123; _likes.value = (_likes.value ?: 0) + 1&#125; æ­¤å¤„ç®€å•ä»‹ç»ä¸‹å…¶å®ç°åŸç†ï¼ŒData Bindingåº“é‡Œé¢åŒ…å«ä¼—å¤šAdaptersï¼ˆé€‚é…å™¨ï¼‰ï¼Œè§æºç ã€‚å¯¹äºxmlå¸ƒå±€æ–‡ä»¶é‡Œçš„UIç»„ä»¶ï¼Œéœ€è¦è®¾ç½®çš„å±æ€§å‡å£°æ˜äº†ç›¸åº”çš„é™æ€è®¾å€¼æ–¹æ³•ï¼Œæ¯”å¦‚å¯¹äºTextViewçš„android:textå±æ€§ï¼Œå°±æœ‰å¦‚ä¸‹setText(TextView, CharSequence)æ–¹æ³•ã€‚å½“textå€¼å‘ç”Ÿå˜æ›´æ—¶ï¼Œå°±ä¼šè°ƒç”¨åˆ°è¿™ä¸ªæ–¹æ³•ã€‚ 12345@BindingAdapter(\"android:text\")public static void setText(TextView view, CharSequence text) &#123; // Some checks removed for clarity view.setText(text);&#125; æ­¤æ—¶è¿˜å‰©ä¸‹ä¸¤ç‚¹åŠŸèƒ½æ²¡æœ‰å®Œæˆï¼Œåˆ†åˆ«æ˜¯LIKEæŒ‰é’®ä¸‹æ–¹çš„è¿›åº¦æ¡æ²¡æœ‰å®æ—¶å¢åŠ ï¼Œä»¥åŠLIKEå›¾ç‰‡æ²¡æœ‰æ›´æ–°ã€‚å…ˆçœ‹è¿›åº¦æ¡ç›¸å…³çš„äº‹é¡¹ã€‚å¯¹äºè¿›åº¦æ¡æœ‰3ç‚¹éœ€æ±‚ï¼Œåˆ†åˆ«æ˜¯ï¼š å½“LIKES=0æ—¶ï¼Œè¿›åº¦æ¡éšè— å½“LIKESå¢åŠ æ—¶ï¼Œè¿›åº¦æ¡å®æ—¶å¢é•¿ï¼Œä¸”æ¯5ä¸ªLIKEä¸€ä¸ªå¾ªç¯ï¼Œè¿›åº¦æ¡å½’é›¶ å½“è¿›åº¦æ¡æ‹‰æ»¡æ—¶ï¼Œé¢œè‰²å˜æ·± è¿™äº›éœ€æ±‚éƒ½å¯ä»¥é€šè¿‡è‡ªå®šä¹‰BindingAdapteræ¥å®ç°ï¼Œå®ƒå¯ä»¥ä¸ºxmlå…ƒç´ åˆ›å»ºä»»æ„çš„è‡ªå®šä¹‰å±æ€§ï¼Œå¹¶é€šè¿‡ä»£ç è¯»å–è¯¥å±æ€§ï¼Œè¿›è€Œå¯¹xmlå…ƒç´ åŸç”Ÿçš„å±æ€§è¿›è¡Œä¿®æ”¹ã€‚åœ¨ä»»æ„åŒ…ä¸‹åˆ›å»ºä¸€ä¸ªBindingAdapters.ktæ–‡ä»¶ï¼ˆä¸è¦æ‹…å¿ƒè·¯å¾„ï¼Œå› ä¸ºç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨è¯†åˆ«æ³¨è§£ï¼‰ï¼Œå€ŸåŠ©äºKotlinçš„é¡¶å±‚å‡½æ•°ï¼Œå¯ä»¥ä¸å£°æ˜BindingAdapterç±»è€Œç›´æ¥å†™å‡½æ•°ã€‚æˆ‘ä»¬ä¸ºæ‰€æœ‰çš„Viewåˆ›å»ºä¸€ä¸ªapp:hideIfZeroå±æ€§ï¼Œæ§åˆ¶å½“è¯¥å±æ€§ä¸º0æ—¶éšè—UIå…ƒç´ ã€‚ å½“LIKES=0æ—¶ï¼Œè¿›åº¦æ¡éšè— 1234@BindingAdapter(\"app:hideIfZero\")fun hideIfZero(view: View, number: Int) &#123; view.visibility = if (number == 0) View.GONE else View.VISIBLE&#125; éšååœ¨xmlå¸ƒå±€æ–‡ä»¶ä¸­å°†è¯¥å±æ€§ä¸viewmodel.likesè¿›è¡Œç»‘å®šï¼Œè¿™æ ·å½“likes=0æ—¶ï¼Œè¿›åº¦æ¡å°±ä¼šè‡ªåŠ¨éšè—ã€‚ 1234&lt;ProgressBar android:id=\"@+id/progressBar\" app:hideIfZero=\"@&#123;viewmodel.likes&#125;\"... å½“LIKESå¢åŠ æ—¶ï¼Œè¿›åº¦æ¡å®æ—¶å¢é•¿ï¼Œä¸”æ¯5ä¸ªLIKEä¸€ä¸ªå¾ªç¯ï¼Œè¿›åº¦æ¡å½’é›¶ å‚è€ƒä¸Šé¢çš„hideIfZeroå±æ€§ï¼Œæˆ‘ä»¬è¿™æ¬¡åŒæ ·ç”¨è‡ªå®šä¹‰BindingAdapteræ¥å®ç°ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œè¿™æ¬¡æˆ‘ä»¬éœ€è¦åŒæ—¶è¯»å–ä¸¤ä¸ªå±æ€§ï¼Œåœ¨@BindingAdapteræ³¨è§£é‡Œé¢ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ•°ç»„[&quot;app:progressScaled&quot;, &quot;android:max&quot;]æ¥å£°æ˜ï¼ŒåŒæ—¶requireAll = trueè¡¨ç¤ºå¿…é¡»ä¸¤ä¸ªå±æ€§éƒ½åœ¨xmlå¾—åˆ°å£°æ˜æ—¶ï¼Œæ‰ä¼šè°ƒç”¨è¯¥æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚å¦‚æœæœ‰ä»»ä¸€ä¸ªæ²¡æœ‰èµ‹å€¼ï¼Œåˆ™ä¸è¿›è¡Œæ–¹æ³•ã€‚ä¸ä¹‹ç›¸å¯¹åº”çš„requiredAll = falseåˆ™å¯¹è‡³å°‘ä¸€ä¸ªå±æ€§è¿›è¡Œç›¸åº”ï¼Œå¯¹äºæ²¡æœ‰å£°æ˜çš„å±æ€§ä¼šä½¿ç”¨å…¶é»˜è®¤å€¼ã€‚ coerceAtMostæ˜¯Kotlinæä¾›çš„æ‰©å±•å‡½æ•°ï¼Œè¡¨ç¤ºâ€œæœ€å¤§ä¸è¶…è¿‡maxâ€ã€‚ 1234@BindingAdapter(value = [\"app:progressScaled\", \"android:max\"], requireAll = true)fun setProgress(progressBar: ProgressBar, likes: Int, max: Int) &#123; progressBar.progress = (likes * max / 5).coerceAtMost(max)&#125; ç›¸åº”åœ°ï¼Œåœ¨å¸ƒå±€æ–‡ä»¶ä¸­å£°æ˜app:progressScaledå’Œandroid:maxä¸¤ä¸ªå±æ€§ã€‚ 123456&lt;ProgressBar android:id=\"@+id/progressBar\" android:hideIfZero=\"@&#123;viewmodel.likes&#125;\" android:progressScaled=\"@&#123;viewmodel.likes&#125;\" android:max=\"@&#123;100&#125;\" /&gt; å½“è¿›åº¦æ¡æ‹‰æ»¡æ—¶ï¼Œé¢œè‰²å˜æ·± å¦‚æœå‰é¢çš„çŸ¥è¯†éƒ½å·²ç»æŒæ¡ï¼Œè¿™é‡Œä¹Ÿå°±ä¸éš¾äº†ã€‚æˆ‘ä»¬å£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§app:progressTintï¼Œè¡¨ç¤ºä¼šå½±å“åˆ°progressBarçš„å¤–æ˜¾é¢œè‰²ï¼Œè¾“å…¥ä¸ºpopularityï¼Œæ–¹æ³•å†…éƒ¨å…ˆæ ¹æ®popularityè®¡ç®—å‡ºcolorï¼ˆæ³¨æ„è¿™é‡Œä½¿ç”¨åˆ°çš„Contextä¸ºViewçš„Contextï¼‰ï¼Œç„¶åå†å°†å…¶è®¾ç½®åˆ°progressBarçš„progressTintListå±æ€§ä¸Šã€‚ 1234567@BindingAdapter(\"app:progressTint\")fun tintPopularity(view: ProgressBar, popularity: Popularity) &#123; val color = getAssociatedColor(popularity, view.context) if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; view.progressTintList = ColorStateList.valueOf(color) &#125;&#125; éšåè¿˜æœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œæ˜¯æ ¹æ®ä¸åŒçš„popularityæ˜¾ç¤ºä¸åŒçš„å›¾ç‰‡ï¼Œå¯ä»¥æŠŠå®ƒå½“åšè¯¾åä½œä¸šï¼Œå‚è€ƒç­”æ¡ˆåœ¨è¿™é‡Œã€‚ å‚è€ƒèµ„æ–™ https://codelabs.developers.google.com/codelabs/android-databinding","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"},{"name":"Jetpack","slug":"Jetpack","permalink":"https://lilei.pro/tags/Jetpack/"}]},{"title":"ä¸€æ–‡å¸¦ä½ è¯»æ‡‚compileSdkVersionã€minSdkVersionä¸targetSdkVersion","date":"2020-03-16T14:42:30.000Z","path":"2020/03/16/Android-SDK-versions/","text":"Thanks for saving me. - Donâ€™t waster it. Donâ€™t waste your life. å…¨æ–‡æ€ç»´å¯¼å›¾ ç»“æ„è„‰ç»œ é—®é¢˜äº§ç”Ÿçš„èƒŒæ™¯Android æ˜¯ä¸€ä¸ªä¸æ–­æ›´æ–°æ¼”è¿›çš„ç³»ç»Ÿï¼ŒçŠ¹è®°å¾—è‡ªå·±æœ€åˆä¸€éƒ¨æ‰‹æœºæ˜¯åœ¨ç™¾è„‘æ±‡è´­ä¹°çš„Samsung I9001ï¼ŒAndroid2.3ç³»ç»Ÿ â€”â€” GINGERBREADï¼Œç°åœ¨å‡ ä¹å¬ä¸åˆ°è¿™ä¸ªè¯äº†ã€‚ åœ¨ç‰ˆæœ¬è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼ŒGoogleä¼šä¸æ–­å¼•å…¥æ–°çš„æ¥å£ã€å¹¶ä¸”ä¸ºAppå¢åŠ æ–°çš„é™åˆ¶ã€‚ä¸€æ–¹é¢æ˜¯ç”±äºç¡¬ä»¶å’Œè½¯ä»¶æŠ€æœ¯æ›´æ–°ï¼Œä¸ºç”¨æˆ·&amp;å¼€å‘è€…æä¾›äº†æ›´å¼ºå¤§çš„èƒ½åŠ›ï¼Œæ¯”å¦‚é™€èºä»ªã€äººè„¸è¯†åˆ«ç­‰ï¼›å¦ä¸€æ–¹é¢æ˜¯ä¸æ–­æ¼”è¿›å’Œå¼ºåŒ–çš„å®‰å…¨éšç§éœ€æ±‚ã€‚ å¯¹äºå¼€å‘è€…è€Œè¨€ï¼Œè‡ªç„¶å¸Œæœ›è‡ªå·±çš„Appçš„å—ä¼—èŒƒå›´è¶Šå¤§è¶Šå¥½ï¼Œä¸ä»…æ˜¯å½“å‰å¸‚é¢ä¸Šå·²æœ‰çš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œç”šè‡³å¯¹äºæœªæ¥å°†è¦æ¨å‡ºçš„ç‰ˆæœ¬ä¹Ÿä¸€å¹¶å¯ä»¥å…¼å®¹ã€‚ç”±æ­¤ä¾¿å¼•å‡ºäº†ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼Œè¿™ä¸‰ä¸ªé—®é¢˜æ˜¯å¼€å‘è€…å¿…é¡»è§£å†³çš„ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿå€ŸåŠ©Googleæä¾›çš„èƒ½åŠ›æ¥å®Œæˆã€‚ å¼€å‘è€…å†™çš„ä»£ç æ˜¯åŸºäºå“ªä¸ªç‰ˆæœ¬çš„API â€”â€” å¯¹åº”çš„æ˜¯compileSdkVersion å¼€å‘è€…æä¾›çš„apkæœ€ä½å¯ä»¥è¿è¡Œåœ¨ä»€ä¹ˆç‰ˆæœ¬çš„ç³»ç»Ÿ â€”â€” å¯¹åº”çš„æ˜¯minSdkVersion å¼€å‘è€…æä¾›çš„apkæ˜¯ä»¥å“ªä¸ªç³»ç»Ÿç‰ˆæœ¬ä½œä¸ºç›®æ ‡æ¥å¼€å‘çš„ â€”â€” å¯¹åº”çš„æ˜¯targetSdkVersion è§£å†³ç³»ç»Ÿç‰ˆæœ¬é€‚é…å’Œé™åˆ¶çš„é—®é¢˜æ¥ä¸‹æ¥æˆ‘ä»¬é€ä¸ªåˆ†æä»¥ä¸Šä¸‰ä¸ªéœ€æ±‚ã€‚ å¼€å‘è€…å†™çš„ä»£ç æ˜¯åŸºäºå“ªä¸ªç‰ˆæœ¬çš„APIï¼šcompileSdkVersioné¦–å…ˆä½œä¸ºå¼€å‘è€…ï¼Œåœ¨ç¼–å†™ä»£ç æ—¶ä¸€å®šä¼šè°ƒç”¨ç³»ç»ŸAPIï¼Œè€Œä¸åŒç³»ç»Ÿç‰ˆæœ¬æä¾›çš„APIæ˜¯æœ‰åŒºåˆ«çš„ï¼Œæ¯”å¦‚æœ‰çš„æ¥å£åœ¨æŸä¸€ç‰ˆæœ¬ä¹‹å‰ä¸€ç›´æ˜¯privateçš„ï¼Œç›´åˆ°æŸä¸€ç‰ˆæœ¬æ—¶è¢«å¼€å‘æˆpublicã€‚å¼€å‘è€…å¦‚ä½•å‘Šè¯‰ç¼–è¯‘å™¨è‡ªå·±å†™çš„ä»£ç æ˜¯åŸºäºå“ªä¸ªç‰ˆæœ¬å‘¢ï¼Ÿè¿™æ—¶å°±è¦ç”¨åˆ°compileSdkVersionäº†ã€‚ ä½¿ç”¨compileSdkVersionï¼Œæœ€ç›´æ¥çš„ç›®çš„æ˜¯åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„SDKè¿›è¡Œç¼–è¯‘ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œåœ¨ç¼–å†™ä»£ç çš„æ—¶å€™ï¼Œå¦‚æœè°ƒç”¨äº†é«˜äºcompileSdkVersionçš„APIï¼Œç¼–è¯‘å™¨ä¼šç»™å‡ºå‡ºé”™æç¤ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯compileSdkVersionåªå­˜åœ¨äºç¼–è¯‘å‰çš„é˜¶æ®µï¼Œåœ¨ç¼–è¯‘çš„ç”Ÿæˆç‰©apké‡Œæ˜¯çœ‹ä¸åˆ°ä»»ä½•ä¸å…¶ç›¸å…³ä¿¡æ¯çš„ã€‚ å¦ä¸€ä¸ªé™åˆ¶æ˜¯ï¼ŒcompileSdkVersionéœ€è¦ä¸Support Library Versioné¦–ä½åŒ¹é…ã€‚æ¯”å¦‚ä½ ç”¨çš„Support Libraryæ˜¯23.1.1ç‰ˆæœ¬çš„ï¼Œé‚£ä¹ˆcompileSdkVersionä¸€å®šè¦æ˜¯23ã€‚ å¯¹compileSdkVersionçš„ä½¿ç”¨å»ºè®®æ˜¯ï¼Œæ€»ä½¿ç”¨å½“å‰æœ€æ–°çš„compileSdkVersionï¼Œä¸€æ–¹é¢å¯ä»¥è°ƒç”¨æœ€æ–°çš„ç³»ç»Ÿæ¥å£ï¼Œé˜²æ­¢æœªæ¥æŸä¸€æ—¶åˆ»è€æ¥å£è¢«åºŸå¼ƒåä¸å¾—ä¸ä¿®æ”¹ä»£ç ï¼Œå˜è¢«åŠ¨ä¸ºä¸»åŠ¨ã€‚å¦ä¸€æ–¹é¢èƒ½å¤Ÿäº«å—åˆ°æœ€æ–°SDKå¸¦æ¥çš„ç¼–è¯‘é€Ÿåº¦æå‡ã€‚ å¼€å‘è€…æä¾›çš„apkæœ€ä½å¯ä»¥è¿è¡Œåœ¨ä»€ä¹ˆç‰ˆæœ¬çš„ç³»ç»Ÿï¼šminSdkVersionâ€œèƒ½å¤Ÿè¿è¡Œåœ¨å¸‚é¢ä¸Šæ‰€æœ‰çš„ç³»ç»Ÿç‰ˆæœ¬ä¸Šâ€æ˜¯å¼€å‘è€…ä¸€ä¸ªç¾å¥½çš„æ„¿æœ›ï¼Œä½†å®é™…ä¸Šï¼Œéšç€Googleä¸æ–­æ¨é™ˆå‡ºæ–°ï¼Œè€ç‰ˆæœ¬åœ¨å¸‚åœºä¸Šçš„å æœ‰é‡è¶Šæ¥è¶Šå°ã€‚å¯ä»¥å‚è€ƒGoogleçš„Dashboardï¼Œå®ƒç»Ÿè®¡çš„è§„åˆ™æ˜¯ä¸€å‘¨å†…è®¿é—®Google Playçš„ç³»ç»Ÿç‰ˆæœ¬åˆ†å¸ƒï¼Œå¯ä»¥çœ‹åˆ°4.4åŠæ›´æ—©ç‰ˆæœ¬åŠ èµ·æ¥å·²ç»ä¸åˆ°10%ã€‚ å½“å¸‚é¢ä¸Šè€ç‰ˆæœ¬å æœ‰é‡è¶‹è¿‘äºæ— çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¸å¿…ä¸ºé€‚é…è€ç‰ˆæœ¬å†™ä¸“é—¨çš„ä»£ç äº†ï¼Œè¿™æ ·èƒ½å¤Ÿå‡å°‘é€‚é…å·¥ä½œï¼Œä»è€ŒæŠŠå¼€å‘è€…å®è´µçš„ç²¾åŠ›æŠ•å…¥åˆ°æ›´æœ‰ä»·å€¼çš„æ–°åŠŸèƒ½å®ç°ä¸Šã€‚ åœ¨é¡¹ç›®ä¸­æˆ‘ä»¬ç”¨minSdkVersionæ¥è¯´æ˜è‡ªå·±çš„appæœ€ä½å¯ä»¥è¿è¡Œåœ¨ä»€ä¹ˆç‰ˆæœ¬çš„ç³»ç»Ÿä¸Šã€‚åœ¨Google Playã€vivoåº”ç”¨å•†åº—ã€æ¸¸æˆä¸­å¿ƒç­‰åº”ç”¨åˆ†å‘ç³»ç»Ÿä¸­ä¼šæ£€æµ‹æœ¬æœºç‰ˆæœ¬ï¼Œè‹¥ä½äºåº”ç”¨å£°æ˜çš„minSdkVersionå°±ä¼šæç¤ºç”¨æˆ·ï¼Œç”šè‡³ç›´æ¥æ‹’ç»å®‰è£…ï¼Œå› ä¸ºå³ä½¿è£…ä¸Šä¹Ÿæ— æ³•ä½¿ç”¨ã€‚ åœ¨è¾¹å†™ä»£ç è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä¸ä½äºcompileSdkVersionçš„APIï¼Œä½†æ˜¯å½“ä½ ä½¿ç”¨çš„APIé«˜äºminSdkVersionæ—¶ï¼Œå°±å¿…é¡»åœ¨ä»£ç é‡Œæ˜¾ç¤ºåœ°è¿›è¡Œç‰ˆæœ¬åˆ¤æ–­ï¼Œå¦åˆ™ç¼–è¯‘å™¨/Lintå·¥å…·ä¼šæç¤ºä½ ã€‚ å¦ä¸€ä¸ªé™åˆ¶æ˜¯ï¼Œä¸»å·¥ç¨‹çš„minSdkVerisonä¸ä½äºå…¶æ‰€æœ‰ä¾èµ–åº“çš„ç‰ˆæœ¬ã€‚ä¸¾ä¾‹è¯´æ˜ï¼šå¦‚æœé¡¹ç›®é‡ŒåŒæ—¶ä½¿ç”¨äº†å¦‚ä¸‹ä¾èµ– support(min=4) glide(min=7) google play(min=9) é‚£ä¹ˆä¸»å·¥ç¨‹çš„minSdkVersionå°±åº”å½“ä¸º9ã€‚è¯¥é™åˆ¶å¯ä»¥è¿èƒŒï¼Œéœ€è¦äººä¸ºä¿è¯å®‰å…¨ï¼Œè®¾ç½®æ–¹æ³•ä¸ºåœ¨AndroidManifesté‡Œå£°æ˜tools:overrideLibraryã€‚è¿™æ ·åšæ˜¯æœ‰é£é™©çš„ï¼Œè¿˜æ˜¯ä»¥ä¸Šä¾‹è¯´æ˜ï¼Œä½ ä¸èƒ½åœ¨4çš„ç³»ç»Ÿç‰ˆæœ¬ä¸Šè°ƒç”¨glideæ¥å£ï¼Œå¦åˆ™ä¸€å®šä¼šæŠ¥é”™ã€‚å¿…é¡»åœ¨ä»£ç é€»è¾‘é‡Œé¢ä¿è¯è¿™ä¸€ç‚¹ã€‚ å¯¹minSdkVersionçš„ä½¿ç”¨å»ºè®®æ˜¯ï¼Œå¼€å‘è¿‡ç¨‹ä¸­è‹¥ä½¿ç”¨åˆ°äº†é«˜äºminSdkVersionçš„APIï¼Œä¸€å®šè¦è¿›è®¾å¤‡ç‰ˆæœ¬åˆ¤æ–­ï¼›å…¶æ¬¡åœ¨å£°æ˜è¿™ä¸ªå±æ€§æ—¶ï¼Œå‚è€ƒä½ åº”ç”¨çš„ç›®æ ‡ç”¨æˆ·ç¾¤ä½“ç³»ç»Ÿç‰ˆæœ¬åˆ†å¸ƒï¼Œè¿™æ˜¯ä¸€ä¸ªæƒè¡¡çš„è¿‡ç¨‹ï¼Œä½ å¸Œæœ›åº”ç”¨çš„è¦†ç›–é¢æ›´å¹¿ï¼Œè¿˜æ˜¯åº”ç”¨çš„ç‰¹æ€§æ›´æ–°ã€‚ å¼€å‘è€…æä¾›çš„apkæ˜¯ä»¥å“ªä¸ªç³»ç»Ÿç‰ˆæœ¬ä½œä¸ºç›®æ ‡æ¥å¼€å‘çš„ï¼štargetSdkVersionåˆ°äº†æœ¬æ–‡è¦ä»‹ç»çš„ä¸‰ä¸ªSdkVersionä¸­æœ€æœ‰è¶£çš„éƒ¨åˆ†â€”â€”targetSdkVersionã€‚è€ƒè™‘è¿™æ ·ä¸€ç§éœ€æ±‚ï¼Œå¼€å‘è€…åŸºäº5.0çš„APIå¼€å‘ï¼ˆå³compileSdkVersion=5.0ï¼‰ï¼Œå½“appå‘å¸ƒæ—¶å€™ï¼ŒGoogleå·²ç»å‘å¸ƒäº†Android 6.0ï¼Œæ­¤æ—¶å½“ç„¶å¸Œæœ›åŸAppä¸éœ€è¦ä»»ä½•æ”¹åŠ¨å°±å¯ä»¥è¿è¡Œåœ¨6.0ç³»ç»Ÿçš„æ‰‹æœºä¸Šï¼Œé€šå¸¸æ˜¯Googleåœ¨6.0çš„SDKé‡Œåšäº†è¿™ä¸ªå…¼å®¹ã€‚ æ‹¿6.0ï¼ˆAPI=23ï¼‰çš„æƒé™é™åˆ¶ä¸¾ä¾‹ï¼ŒGoogleå¸Œæœ›åœ¨6.0å¼€å§‹æ§åˆ¶Appæ»¥ç”¨æƒé™çš„æƒ…å†µï¼Œåˆ—å‡ºäº†ä¸€äº›å¿…é¡»åŠ¨æ€ç”³è¯·çš„æ•æ„Ÿæƒé™ã€‚è¿™å¯¹æ‰‹æœºç”¨æˆ·è€Œè¨€æ˜¯ç™¾åˆ©è€Œæ— ä¸€å®³çš„äº‹ï¼Œè€Œå¯¹å¼€å‘è€…è€Œè¨€ï¼Œå¦‚æœä¸èƒ½åŠæ—¶ä¿®æ”¹ä»£ç ï¼Œå°±ä¼šé¢ä¸´Appä¸å¯ç”¨ç”šè‡³æ— æ³•ä¸Šæ¶Google Playçš„æƒ…å†µä¸‹ã€‚å‡å¦‚ä½ ä½œä¸ºä¸€ååº”ç”¨å¼€å‘è€…ï¼Œæ—¥å¸¸æœ‰1000wçš„æ´»è·ƒç”¨æˆ·ï¼Œè€Œç”±äºæ‰‹æœºç³»ç»Ÿå‡çº§ï¼Œè¿™1000wç”¨æˆ·æ— æ³•ä½¿ç”¨ä¹‹å‰çš„Appäº†ï¼›è€Œä½ åˆæ°å¥½åœ¨åº¦å‡ä¸­ï¼Œæ— æ³•åŠæ—¶ä¿®æ”¹æ›´æ–°ï¼Œè¿™å°†æ˜¯ä¸€ä¸ªç¾éš¾ã€‚ é’ˆå¯¹ä¸Šé¢çš„å…·ä½“ä¾‹å­ï¼Œå¯ä»¥é€šè¿‡åœ¨gradleæ–‡ä»¶é‡Œå£°æ˜targetSdkVersion=21æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿï¼ŒAppçš„ä»£ç æ˜¯é¢å‘Android 5.0ç³»ç»Ÿç¼–å†™çš„ï¼Œæ²¡æœ‰è€ƒè™‘åŠ¨æ€æƒé™çš„é—®é¢˜ã€‚è¿™æ ·çš„APKå³ä½¿è¢«å®‰è£…åœ¨ç³»ç»Ÿç‰ˆæœ¬ä¸º6.0çš„æ‰‹æœºä¸Šï¼Œä¹Ÿä¼šä¾ç…§ä¹‹å‰çš„è¡Œä¸ºæ¥è¿è¡Œï¼Œå³åœ¨å®‰è£…æ—¶ç”³è¯·æ‰€æœ‰å¿…é¡»æƒé™ï¼Œè€Œéè¿è¡Œæ—¶åŠ¨æ€ç”³è¯·ã€‚ AOSPé‡Œæœ‰å¾ˆå¤šgetApplicationInfo().targetSdkVersion &lt; Buid.XXXXæ ·å¼çš„ä»£ç ï¼Œå°±æ˜¯ç”¨æ¥åˆ¤æ–­targetSdkVersionçš„ ä½¿ç”¨targetSdkVersionè¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œä½ å¯ä»¥ä½¿ç”¨æ›´é«˜ç‰ˆæœ¬çš„APIï¼Œä¸”ä¸éœ€è¦å…³æ³¨è¡Œä¸ºå˜æ›´ã€‚ ä¹Ÿè®¸ä½ ä¼šè§‰å¾—ï¼Œä½œä¸ºä¸€åé¡½å›ºæ‹æ—§çš„å¼€å‘è€…ï¼Œæˆ‘å°±ä¸è¦å‡çº§targetSdkVersionï¼ŒGoogleå¥½åƒä¹Ÿæ‹¿æˆ‘æ²¡æœ‰åŠæ³•ã€‚äº‹å®ä¸Šå¹¶éå¦‚æ­¤ï¼Œå¦‚æœtargetSdkVersionè¿‡ä½çš„è¯ï¼ŒGoogleã€æ‰‹æœºå‚å•†éƒ½æœ‰æƒåˆ©æ‹’ç»ä¸Šæ¶ä½ çš„Appã€‚ å¯¹å¼€å‘è€…é€‰æ‹©targetSdkVersionçš„å»ºè®®æ˜¯ï¼Œå°½é‡ä¿æŒæœ€æ–°çš„ç‰ˆæœ¬ï¼Œä»¥é˜²åº”ç”¨å¸‚åœºæŠŠä½ çš„åº”ç”¨ä¸‹æ¶ã€‚å‡çº§targetSdkVersionåä¸€å®šè¦è¿›è¡Œé’ˆå¯¹æ€§çš„æµ‹è¯•ã€‚ å­¦ä»¥è‡´ç”¨äº†è§£è¿™å‡ ä¸ªç‰ˆæœ¬çš„å«ä¹‰ä¹‹åï¼Œå°±è¦çœ‹çœ‹å¦‚ä½•åº”ç”¨äº†ã€‚é€šå¸¸æˆ‘ä»¬çš„é¡¹ç›®æ˜¯ç”¨gradleç®¡ç†ä¾èµ–çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ ¹projectä¸­å£°æ˜è¿™å‡ ä¸ªç‰ˆæœ¬ã€‚ Gradleé…ç½®12345678910android &#123; compileSdkVersion 23 buildToolsVersion 23.1.1 // ... other config defaultConfig &#123; minSdkVersion 20 targetSdkVersion 28 // ... other config &#125;&#125; androidæ ‡ç­¾ä¸‹çš„é…ç½®åªä¼šåœ¨ç¼–è¯‘æœŸé—´ç”Ÿæ•ˆï¼ŒdefaultConfigæ ‡ç­¾ä¸‹çš„è®¾ç½®ä¼šæ‰“å…¥æœ€ç»ˆçš„Apkä¸­ã€‚ ç‰ˆæœ¬é«˜ä½å…³ç³»é€šå¸¸çš„ç‰ˆæœ¬å…³ç³»æ˜¯min&lt;=target&lt;=compileï¼Œæœ€ç†æƒ³çš„çŠ¶æ€åˆ™æ˜¯min&lt;=target==compileï¼Œå…¶ä¸­compileæ—¶åˆ»ä¿æŒæœ€æ–°ã€‚ targetSdkVersioné€‚é…æŒ‡å—ä»Android 6.0å¼€å§‹ï¼Œæ¯ä¸€ä¸ªç‰ˆæœ¬å‡çº§ï¼ŒGoogleéƒ½ä¼šå‘å¸ƒé€‚é…æŒ‡å—ï¼Œå°†å…¶æ•´ç†æˆæ€ç»´å¯¼å›¾ã€‚ é€‚é…æ€ç»´å¯¼å›¾å¤§çº² targetSdkVersioné€‚é… å‚è€ƒèµ„æ–™ Picking your compileSdkVersion, minSdkVersion, targetSdkVersion targetSdkVersionåŸç† APIä¸è‹±æ–‡åã€ç³»ç»Ÿç‰ˆæœ¬å¯¹ç…§è¡¨ dashboards Google target API ç‰ˆæœ¬å‡çº§è¯´æ˜","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"}]},{"title":"Kotlinè®©æ¥å£å†™æ³•å¦‚æ­¤ç®€å•","date":"2020-03-16T14:38:49.000Z","path":"2020/03/16/Kotlin-made-Interface-so-much-better/","text":"è¿™æ˜¯å¯¹Mediumä¸ŠKotlin made Interface so much betterä¸€æ–‡çš„ç¿»è¯‘ï¼Œå†…å®¹ååŸºç¡€ã€‚ åœ¨Javaä¸­ï¼Œâ€œæ¥å£â€ä¸€å¼€å§‹æ˜¯ä½œä¸ºä¸€é¡¹æ–°çš„ç¼–ç¨‹ç‰¹æ€§è¢«æå‡ºçš„ã€‚å®ƒæè¿°äº†ä¸€ç§â€œå¯ä»¥æ˜¯â€å…³ç³»ï¼Œè€Œéâ€œä¸€å®šæ˜¯â€ã€‚è¿™ä¹Ÿä½¿å¾—å®ƒå¯ä»¥ç”¨äºå¤šé‡ç»§æ‰¿ï¼ˆä¾‹å¦‚ï¼ŒæŸç‰©å¯ä»¥æ˜¯è®¸å¤šç‰¹æ€§çš„é›†åˆï¼Œä½†åªèƒ½æ˜¯æŸä¸ªäº‹ç‰©ã€‚è¯‘è€…æ³¨ï¼šçŒ«å¯ä»¥åŒæ—¶å…·æœ‰å–µå–µå«å’Œä¼šçˆ¬æ ‘ä¸¤ç§å±æ€§ï¼Œä½†çŒ«åªèƒ½æ˜¯çŒ«ï¼Œä¸å¯èƒ½æ˜¯ç‹—ï¼‰ã€‚ ç„¶è€Œï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€è§åˆ°çš„ï¼Œç›´åˆ°Java7ï¼ˆJava7æ˜¯Androidå·¥ç¨‹å¸ˆä¸»è¦çš„å¼€å‘è¯­è¨€ã€‚è¯‘è€…æ³¨ï¼šåŸæ–‡å†™äº2018å¹´10æœˆï¼‰ï¼Œæ¥å£ä»ç„¶æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œè¿™äº›ç¼ºç‚¹ä½¿å¾—æ¥å£å˜å¾—å¾ˆéš¾ç”¨ï¼Œä»¥è‡³äºä¸€äº›äººå®æ„¿ç”¨å›æŠ½è±¡ç±»ã€‚ æ¥ç€æˆ‘ä»¬è¿æ¥äº†Kotlinï¼Œæˆ‘å°†åœ¨æœ¬æ–‡ä¸ºå¤§å®¶å±•ç¤ºKotlinåœ¨ç»§æ‰¿å…³ç³»ä¸­çš„å¼ºå¤§èƒ½åŠ›ã€‚ Kotlinæ‰©å±•æ¥å£èƒ½åŠ›åœ¨Javaä¸­åœ¨Java7ä¸­ï¼Œæ¥å£è‡ªå·±ä¸èƒ½åŒ…å«æ–¹æ³•å®ç°ï¼Œå› æ­¤å¯¹äºæ¥å£å®ç°ç±»è€Œè¨€ï¼Œå¿…é¡»å®ç°æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ã€‚ è¿™æ˜¯ä¸€ä¸ªéº»çƒ¦ï¼Œå®ƒå‰Šå¼±äº†æ¥å£çš„å¯æ‰©å±•èƒ½åŠ›ã€‚ å‡è®¾æˆ‘ä»¬æœ‰å¦‚ä¸‹çš„Movableæ¥å£ã€‚ 12345678910interface Movable &#123; int legsCount();&#125;class Horse implements Movable &#123; @Override public int legsCount() &#123; return 4; &#125;&#125; çªç„¶æˆ‘ä»¬å‘ç°é™¤äº†ç»Ÿè®¡è…¿çš„æ•°é‡ï¼Œè¿˜éœ€è¦ç»Ÿè®¡ç¿…è†€çš„æ•°é‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¢åŠ äº†wingsCount()æ–¹æ³•ã€‚ å¯¹äºæ‰€æœ‰å®ç°äº†Movableæ¥å£çš„ç±»ï¼Œè¿™æ˜¯ä¸€ä¸ªåæ¶ˆæ¯ï¼Œå› ä¸ºå®ƒä»¬å¿…é¡»ä¿®æ”¹ä»£ç ä»¥é€‚é…æ¥å£å˜æ›´ã€‚ä¾‹å¦‚ï¼ŒHorseå¿…é¡»ä¿®æ”¹å¦‚ä¸‹ã€‚ 1234567891011121314interface Movable &#123; int legsCount(); int wingsCount();&#125;class Horse implements Movable &#123; @Override public int legsCount() &#123; return 4; &#125; @Override public int wingsCount() &#123; return 0; &#125;&#125; åœ¨Kotlinä¸­ä¸€å¼€å§‹æˆ‘ä»¬æœ‰ 1234567interface Movable &#123; fun legsCount() : Int&#125;class Horse : Movable &#123; override fun legsCount() = 4&#125; éšåæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ‰©å±•å®ƒ 12345678interface Movable &#123; fun legsCount() : Int fun wingsCount() : Int &#123; return 0 &#125; // æ³¨æ„è¿™é‡Œå¯ä»¥ä¸ºæ–¹æ³•æä¾›é»˜è®¤å®ç°&#125;class Horse : Movable &#123; override fun legsCount() = 4 // å®ç°ç±»ä¸éœ€è¿›è¡Œä»»ä½•å˜åŠ¨&#125; ç”šè‡³å¯ä»¥åšçš„æ›´åŠ å¤æ‚ï¼Œè€ŒHorseç±»ä¸éœ€è¦å› æ­¤è¿›è¡Œä»»ä½•æ”¹åŠ¨ï¼ 123456789interface Movable &#123; fun legsCount(): Int &#123; return 0 &#125; fun wingsCount(): Int &#123; return 0 &#125; fun canFly(): Boolean &#123; return wingsCount() &gt; 1 &#125; fun canWalk(): Boolean &#123; return legsCount() &gt; 1 &#125;&#125;class Horse : Movable &#123; override fun legsCount() = 4&#125; Kotlinä½¿æ¥å£çœŸæ­£åœ°â€œå¯è¦†å†™â€å‰‘æ¡¥å¤§è¾å…¸é‡Œå¯¹äºâ€œoverrideâ€çš„å®šä¹‰æ˜¯ to decide against or refuse to accept a previous decision, an order, a person, etc. åœ¨Javaä¸–ç•Œä¸­ï¼Œæ¥å£æ²¡æœ‰è¦†å†™ä»»ä½•ä¸œè¥¿ã€‚ ä½†æ˜¯åœ¨Kotlinä¸–ç•Œé‡Œï¼Œè§å¦‚ä¸‹ä¾‹å­ 1234567891011121314151617interface Movable &#123; fun legsCount() : Int &#123; return 0 &#125; fun wingsCount() : Int &#123; return 0 &#125; fun canFly() : Boolean &#123; return wingsCount() &gt; 1 &#125; fun canWalk() : Boolean &#123; return legsCount() &gt; 1 &#125;&#125;class Horse : Movable &#123; var isSick = false override fun legsCount() = 4 override fun canWalk() : Boolean &#123; if (isSick) &#123; return false &#125; return super.canWalk() &#125;&#125; å¦‚æœæˆ‘ä»¬è®©isSick = trueï¼Œé‚£ä¹ˆæ— è®ºè¿™ä¸ªç”Ÿç‰©æœ‰å¤šå°‘æ¡è…¿ï¼ŒcanWalk()æ–¹æ³•éƒ½ä¼šè¿”å›falseã€‚å—¯ï¼ŒçœŸæ­£æ„ä¹‰ä¸Šçš„â€œè¦†å†™â€ã€‚ Kotlinä½¿æ¥å£æ›´åƒä¸€ä¸ªå¯¹è±¡åœ¨Javaä¸–ç•Œï¼ˆæˆ‘è®¤ä¸ºåŒ…æ‹¬Java8å’Œ9ï¼‰ï¼Œæ¥å£å¹¶ä¸å…è®¸åŒ…å«å¸¸é‡ä¹‹å¤–çš„ä»»ä½•å±æ€§ã€‚ å……å…¶é‡æˆ‘ä»¬å¯ä»¥å£°æ˜ä¸€ä¸ªå˜é‡çš„å­˜å–æ–¹æ³•ï¼Œä¾‹å¦‚legsCount()ã€‚ åœ¨Kotlinä¸­Kotlinå…è®¸æ¥å£ä¸­åŒ…å«å±æ€§ã€‚ æ¯”èµ·è¿™ç§å†™æ³• 1234567interface Movable &#123; fun legsCount(): Int fun canWalk() = legsCount() &gt; 1&#125;class Horse : Movable &#123; override fun legsCount() = 4&#125; ä½ å¯ä»¥å°†å…¶ç®€åŒ–æˆ 1234567interface Movable &#123; val legsCount : Int fun canWalk(): Boolean = legsCount &gt; 1&#125;class Horse : Movable &#123; override val legsCount = 4&#125; åœ¨æ¥å£ä¸­ä½¿ç”¨å±æ€§æœ‰ä¸€äº›å±€é™ï¼Œå®ƒä¸å¯ä»¥æœ‰backfieldå±æ€§ï¼Œæ„å‘³ç€å®ƒä¸å¯å˜ã€‚æ‰€ä»¥å®ƒä»ç„¶æ˜¯æ— çŠ¶æ€çš„ã€‚ æ­¤å¤–ï¼Œä¸å…è®¸åœ¨æ¥å£ä¸­ä¸ºå±æ€§èµ‹åˆå€¼ã€‚ Kotlinä½¿æ¥å£æ›´å¥½åœ°ä¸ºç»„åˆæœåŠ¡ä½ ä¹Ÿè®¸å¬è¯´è¿‡â€œç»„åˆèƒœè¿‡ç»§æ‰¿â€åŸåˆ™ã€‚Kotlinè®©å®ƒå˜å¾—æ›´åŠ ç®€å•ã€‚ å‡è®¾ä½ æœ‰Horseå’ŒDogã€‚å®ƒä»¬éƒ½æ˜¯æœ‰4æ¡è…¿çš„åŠ¨ç‰©ã€‚ ä¸€ç§å†™æ³•å¦‚ä¸‹ 12345678910interface Movable &#123; val legsCount : Int fun canWalk() = legsCount &gt; 1&#125;class Horse : Movable &#123; override val legsCount = 4&#125;class Dog : Movable &#123; override val legsCount = 4&#125; è¿™ç§å†™æ³•å¤ªç¹çï¼Œå…·ä½“è¡¨ç°åœ¨å¦‚ä¸‹åœ°æ–¹ åœ¨æ¯ä¸€ä¸ªå®ç°ç±»é‡Œéƒ½é‡å¤override val legsCount = 4çš„ä»£ç æ®µ å¦‚æœæˆ‘ä»¬æœ‰æ›´å¤šè¦è¦†å†™çš„æ–¹æ³•ï¼Œæˆ–è€…æ›´å¤š4æ¡è…¿çš„ç±»ï¼Œæˆ‘ä»¬å¿…é¡»é‡å¤åšä¸€æ ·çš„äº‹ æœªæ¥æŸä¸€å¤©ï¼Œå¦‚æœæˆ‘ä»¬å¿…é¡»æŠŠ4æ”¹æˆfourï¼Œæˆ–è€…å¢åŠ æ›´å¤šåŠŸèƒ½â€¦â€¦ è¿™å°†æ˜¯ä¸€ä¸ªç¾éš¾ã€‚å¤ªéš¾æ‰©å±•äº†ã€‚ ä¹Ÿè®¸æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç±»çš„ç»§æ‰¿å…³ç³»ï¼Ÿ1234567891011interface Movable &#123; val legsCount: Int fun canWalk() = legsCount &gt; 1&#125;open class FourLegged : Movable &#123; override val legsCount = 4&#125;class Horse : FourLegged()class Dog : FourLegged() ä½†æ˜¯è¿™ç§å†™æ³•è¿èƒŒäº†â€œç»„åˆèƒœäºç»§æ‰¿â€åŸåˆ™ã€‚Horseå’ŒDogä¸ä»…ä»…æ˜¯FourLeggedï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä»€ä¹ˆä¸œè¥¿ï¼Œè¿™ç§å†™æ³•è®©ä»–ä»¬ä¸å¯æ‰©å±•æˆä¸ºå…¶ä»–ç±»å‹ï¼ˆä¾‹å¦‚ï¼šPetï¼‰ã€‚ è¿™æ˜¯ä¸å¯æ‰©å±•çš„â˜¹ï¸ è®©æˆ‘ä»¬ç”¨ç»„åˆä»£æ›¿ç»§æ‰¿ï¼ˆä¼ ç»Ÿå†™æ³•ï¼‰1234567891011121314151617interface Movable &#123; val legsCount: Int fun canWalk() = legsCount &gt; 1&#125;object FourLegged : Movable &#123; override val legsCount = 4&#125;class Horse : Movable &#123; private val movable = FourLegged override val legsCount get() = movable.legsCount&#125;class Dog : Movable &#123; private val movable = FourLegged override val legsCount get() = movable.legsCount&#125; ä¸çŸ¥é“ä½ æ€ä¹ˆæƒ³ï¼Œæˆ‘å¹¶ä¸å–œæ¬¢è¿™ç§å†™æ³•ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç¨äº‹æ”¹åŠ¨â€¦ 12345678910111213interface Movable &#123; val legsCount: Int fun canWalk() = legsCount &gt; 1&#125;object FourLegged : Movable &#123; override val legsCount = 4&#125;open class MovableImpl(private val movable: Movable) : Movable &#123; override val legsCount get() = movable.legsCount&#125;class Horse : MovableImpl(FourLegged)class Dog : MovableImpl(FourLegged) ç°åœ¨è¿™ç§å†™æ³•è¦å¥½ä¸€äº›ï¼Œå› ä¸ºå®ƒçš„æ‰©å±•æ€§æ›´å¥½ï¼Œå‡è®¾æœªæ¥æˆ‘ä»¬åŒæ—¶æœ‰FourLeggedå’ŒTwoLeggedï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢å®ƒä»¬ã€‚ ä½†æ˜¯æˆ‘ä»ç„¶ä¸å–œæ¬¢è¿™ç§å†™æ³•ï¼Œå› ä¸ºæˆ‘ä¸å¾—ä¸ç»§æ‰¿è‡ªç±»MovableImplã€‚æ‰€å¹¸æˆ‘ä»¬æœ‰Kotlinï¼Œæˆ‘ä»¬çœ‹ä¸‹Kotlinå¦‚ä½•å¤„ç†æ­¤ç±»é—®é¢˜â€¦ Kotlinçš„æ–¹å¼ï¼šä½¿ç”¨Byä»£ç†ç®€åŒ–ç»„åˆå†™æ³•åœ¨Kotlinçš„æ¥å£å†™æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Byå…³é”®å­—è½»æ¾å®ç°ä»£ç†æ¨¡å¼ã€‚æ¥çœ‹çœ‹ 1234567891011interface Movable &#123; val legsCount: Int fun canWalk() = legsCount &gt; 1&#125;object FourLegged : Movable &#123; override val legsCount = 4&#125;class Horse : Movable by FourLeggedclass Dog : Movable by FourLegged å¤ªæ£’äº†ï¼ğŸ¤©ã€‚ç›¸ä¿¡ä½ ä¹Ÿçœ‹å¾—å‡ºè¿™ç§å†™æ³•çš„å¥½å¤„ã€‚ å¦‚æœä½ æƒ³å¯¹â€œç»„åˆèƒœäºç»§æ‰¿â€æœ‰æ›´æ·±å…¥çš„äº†è§£ï¼Œå¯ä»¥é˜…è¯»ä»¥ä¸‹è¿™ç¯‡æ–‡ç« ï¼š Composition over inheritance in Kotlin way Kotlinä½¿æ¥å£æ›´å¥½åœ°å®ç°å¤šé‡ç»§æ‰¿åœ¨Java7ä¸­ä½¿ç”¨å¤šé‡ç»§æ‰¿æ˜¯ä¸€ä»¶ç—›è‹¦çš„äº‹ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¾—ä¸å®ç°æ‰€æœ‰çš„æ¥å£ï¼Œå¹¶è¦†å†™å…¶ä¸­å…¨éƒ¨æ–¹æ³•ã€‚ è¯‘è€…æ³¨ï¼šåŸæ–‡è¿™é‡Œç”¨çš„æ˜¯inherit from all interfacesï¼Œå¯è§åŸä½œè€…å¯¹â€œç»§æ‰¿â€å’Œâ€œå®ç°â€å¹¶ä¸æ˜¯ä¸¥æ ¼åŒºåˆ†ã€‚å®é™…ä¸Šåœ¨Javaä¸­ä¸å¯ä»¥â€œå¤šé‡ç»§æ‰¿â€ï¼ˆå¯¹æŠ½è±¡ç±»è€Œè¨€ï¼‰ï¼Œè€Œåº”å½“æ˜¯â€œå¤šé‡å®ç°â€ï¼ˆå¯¹æ¥å£è€Œè¨€ï¼‰ã€‚ å³ä½¿è¿™æ ·åšï¼Œä¹Ÿæ— æ³•ä»çˆ¶ç±»ä¸­ç»§æ‰¿ä»»ä½•å±æ€§ã€‚ï¼ˆå½“ç„¶äº†ï¼ŒJavaçš„æ¥å£é‡Œæ˜¯ä¸å…è®¸æœ‰éå¸¸é‡å±æ€§çš„ï¼‰ åœ¨Kotlinä¸­å€ŸåŠ©äºByä»£ç†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ å‡è®¾æˆ‘ä»¬çš„åŠ¨ç‰©æ¥å£æœ‰ä¸¤ä¸ªå±æ€§ 123456789interface Movable &#123; val legsCount: Int fun canWalk() = legsCount &gt; 1&#125;interface Pet &#123; val name: String fun liveInhouse() = false&#125; è®©æˆ‘ä»¬æä¾›ä¸€äº›æ›´å…·ä½“çš„å†…å®¹ï¼ˆä¹Ÿå°±æ˜¯æ¥å£å®ç°ï¼‰ï¼Œä»¥ä¾¿äºæˆ‘ä»¬å¯ä»¥ä½¿æ–°åˆ›å»ºçš„ç±»ä½¿ç”¨è¿™äº›å…·ä½“å†…å®¹ï¼ˆä»£ç†ï¼‰ã€‚ 1234567object FourLegged : Movable &#123; override val legsCount = 4&#125;class InHousePet(override val name: String) : Pet &#123; override fun liveInHouse() = true&#125; ç„¶åæˆ‘ä»¬å¯ä»¥åˆ›å»ºCatç±»äº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªFourLeggedåŠ¨ç‰©ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯InHousePetã€‚æ‰€ä»¥ä¸ºäº†åŒæ—¶ç»§æ‰¿è¿™ä¸¤ç‚¹ï¼Œæˆ‘ä»¬é‡‡ç”¨å¦‚ä¸‹å†™æ³• 12class CatBy(name: String) : Pet by InHousePet(name), Movable by FourLegged åªè¦ä½ æ„¿æ„ï¼Œå¯ä»¥å¢åŠ æ›´å¤šçš„å±æ€§ 1234classCatBy(name: String, trainer: Trainer): Pet by InHousePet(name), Movable by FourLegged, Trainable by Professional(trainer) æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥è¦†å†™å…¶ä¸­çš„å€¼ï¼Œåªè¦ä½ æ„¿æ„ï¼ 12345678910classCatBy(name: String, trainer: Trainer): Pet by InHousePet(name), Movable by FourLegged, Trainable by Professional(trainer) &#123; override val legsCount: Int get() = 100 override fun liveInHouse() = true&#125; æ„Ÿè§‰è‡ªå·±åƒæ˜¯åœ¨å†™C++ğŸ¤ª è¯‘åæ„Ÿåœ¨Kotlinçš„æ¥å£ä¸­å¯ä»¥å£°æ˜åªè¯»å±æ€§ï¼Œå…¶å®å°±ç›¸å½“äºJavaçš„getXXXæ–¹æ³•ï¼Œåªä¸è¿‡é€šè¿‡Kotlinä¸€è´¯çš„get/setçœç•¥å†™æ³•è¿›è¡Œäº†ç®€åŒ–ã€‚ byå…³é”®å­—ç”¨äºä»£ç†ï¼Œæ˜¯Kotliné‡Œé¢ä¸­é˜¶çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸€ä¸ªæ¥å£å£°æ˜ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œä»è€Œåˆ†æ•£ç›®æ ‡ç±»çš„èŒè´£ã€‚ åœ¨å…¶å®ƒæ–¹é¢ï¼ŒKotlinä¸­çš„æ¥å£å†™æ³•ç›¸æ¯”äºJavaå¹¶æ²¡æœ‰æœ¬è´¨ä¸Šçš„æ”¹åŠ¨ã€‚","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"}]},{"title":"æœ¬å‘¨çŸ¥è¯†ç§¯ç´¯[2020/03] ViewPagerä½¿ç”¨æŒ‡å—ï¼›Kotlinå•ä¾‹å†™æ³•ï¼›MediaPlayerçŠ¶æ€æœº","date":"2020-03-03T05:08:02.000Z","path":"2020/03/03/weekly-2020-03-01/","text":"æˆ‘ä»¬ä¸€è·¯å¥‹æ–—ï¼Œä¸æ˜¯ä¸ºäº†æ”¹å˜ä¸–ç•Œï¼Œè€Œæ˜¯ä¸ºäº†ä¸è¢«ä¸–ç•Œæ”¹å˜ã€‚ ViewPagerä½¿ç”¨æŒ‡å—ViewPager æ˜¯Android SDKæä¾›çš„ç”¨äºå®ç°å·¦å³æ»‘åŠ¨åˆ‡æ¢é¡µé¢æ•ˆæœçš„æ§ä»¶ï¼Œæ¥å…¥éå¸¸ç®€å•ï¼Œå¯ä»¥å®ç°å¦‚ä¸‹å›¾çš„æ•ˆæœã€‚ ViewPager è‡ªé¡¶å‘ä¸‹åœ°çœ‹ï¼Œä¸€ä¸ªå®Œæ•´çš„åŒ…å«ViewPagerçš„é¡µé¢ç”±ä»¥ä¸‹å‡ ä¸ªå¯¹è±¡æ„æˆã€‚ Hostï¼šå®¹å™¨é¡µé¢ï¼Œå¯ä»¥æ˜¯Activityï¼Œæˆ–è€…Fragment ViewPagerï¼šå…³è”åˆ°é¡µé¢ä¸Šçš„ä¸€ä¸ªViewï¼Œå¯ä»¥å·¦å³æ»‘åŠ¨åˆ‡æ¢å­é¡µé¢ Adapterï¼šViewPagerå†…éƒ¨ç”¨ä»¥è·å–æ¯ä¸ªå­é¡µé¢çš„é€‚é…å™¨ï¼Œå‚è€ƒRecyclerView/ListViewçš„Adapter SubFragmentï¼šViewPagerå†…åµŒçš„å­é¡µé¢ è®©æˆ‘ä»¬é€ä¸ªåˆ†æï¼ˆHostå°±æ˜¯ä¸€ä¸ªæ™®é€šé¡µé¢ï¼Œç•¥è¿‡ä¸æï¼ŒSubFragmentä¹Ÿä¸€æ ·ï¼Œä¸å¸¸è§å†™æ³•æ²¡æœ‰åŒºåˆ«ï¼ŒåŒæ ·ç•¥è¿‡ï¼‰ ViewPagerç›¸å½“äºä¸€ä¸ªViewGroupå®¹å™¨ï¼Œä½¿ç”¨çš„æ—¶å€™ï¼Œé¦–å…ˆåœ¨xmlå¸ƒå±€é‡Œå£°æ˜android.support.v4.view.ViewPagerï¼Œæ¥ç€åœ¨ä»£ç é‡Œé€šè¿‡findViewByIdè·å–åˆ°è¿™ä¸ªViewPagerï¼Œå¹¶ä¸ºå…¶è®¾ç½®Adapterã€‚ 123mViewPager = findViewById(R.id.view_pager)// è¿™é‡Œéœ€è¦ä¼ å…¥ä¸€ä¸ªFragmentManagerï¼Œå¯è§ViewPagerå†…éƒ¨æ˜¯ä»¥Fragmentä½œä¸ºæ¯ä¸ªå­é¡µé¢å‘ˆç°æ–¹å¼çš„mViewPager.adapter = YourAdapterClass(supportFragmentManager) åœ¨ä½¿ç”¨ViewPageræ—¶ï¼Œå¾€å¾€éœ€è¦å¯¹å½“å‰é€‰ä¸­é¡µé¢çš„è¡Œä¸ºè¿›è¡Œç›‘å¬ï¼Œæ¯”å¦‚å½“ç”¨æˆ·å·¦å³æ»‘åŠ¨åˆ‡æ¢é¡µé¢æ—¶ï¼Œå¯¹åº”åœ°æ”¹å˜æ ‡é¢˜æ çš„æ–‡å­—ï¼Œå¯¹åº”çš„æ˜¯addOnPageChangeListeneræ¥å£ï¼Œæ³¨æ„è¿™é‡Œæ˜¯addå¹¶ésetï¼Œæ„å‘³ç€ä¸è¦å¯¹åŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨ï¼Œå¦åˆ™ä¼šå¤šæ¬¡è§¦å‘ã€‚ 12345678910111213141516171819// ViewPager.javapublic void addOnPageChangeListener(@NonNull OnPageChangeListener listener) &#123; if (mOnPageChangeListeners == null) &#123; mOnPageChangeListeners = new ArrayList&lt;&gt;(); &#125; mOnPageChangeListeners.add(listener);&#125;public interface OnPageChangeListener &#123; // é¡µé¢å‘ç”Ÿä½ç§»æ—¶è°ƒç”¨ï¼Œæ—¢åŒ…å«ç”¨æˆ·æ‰‹æŒ‡æ‹–åŠ¨ï¼Œä¹ŸåŒ…å«é¡µé¢è‡ªèº«çš„åŠ¨ç”»ç§»åŠ¨ã€‚å‚æ•°æ˜¯ä½ç§»çš„ç™¾åˆ†æ¯”å’Œåƒç´ å€¼ï¼Œå¯ä»¥ç”¨æ¥è¿›è¡Œä¸€äº›è®¡ç®— void onPageScrolled(int position, float positionOffset, int positionOffsetPixels); // é¡µé¢è¢«é€‰ä¸­æ—¶è°ƒç”¨ï¼ŒåŠ¨ç”»ä¹Ÿè®¸å¹¶æ²¡æœ‰ç»“æŸï¼Œå‚æ•°æ˜¯è¢«é€‰ä¸­é¡µé¢çš„index void onPageSelected(int position); // é¡µé¢çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨ï¼Œä¸ç‰¹æŒ‡å“ªä¸€ä¸ªé¡µé¢ï¼Œè€Œæ˜¯æ‰€æœ‰é¡µé¢ã€‚ // æœ‰ä¸‰ç§çŠ¶æ€ï¼šIDLEï¼ˆé¡µé¢é™æ­¢ï¼Œæ— åŠ¨ä½œï¼‰ã€DRAGGINGï¼ˆç”¨æˆ·æ‹–åŠ¨ä¸­ï¼‰ã€SETTINGï¼ˆç”¨æˆ·å·²æ”¾æ‰‹ï¼Œé¡µé¢å½’ä½ä¸­ï¼‰ void onPageScrollStateChanged(int state);&#125; æ¥å£è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼ŒåŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬åªå…³æ³¨ä¸‰ä¸ªå›è°ƒä¸­çš„ä¸€ä¸ªï¼ˆå¾€å¾€æ˜¯onPageSelectedï¼‰ï¼Œå¯ä»¥ç”¨å¦ä¸€ä¸ªå†…éƒ¨ç±»æ¥åˆ›å»ºç›‘å¬å¯¹è±¡ï¼Œä»¥å‡å°‘æ ·æ¿ä»£ç ï¼ŒSimpleOnPageChangeListeneråŒæ ·ä½äºViewPager.javaä¸­ã€‚ è¿™æ˜¯å¾ˆå¥½çš„ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå¯¹äºåŒ…å«å¤šä¸ªå›è°ƒå‡½æ•°çš„ç›‘å¬æ¥å£ï¼Œå¢åŠ ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œä¸ºæ¯ä¸ªå›è°ƒå‡½æ•°åˆ›å»ºä¸€ä¸ªç©ºå‡½æ•°ï¼Œåœ¨ä½¿ç”¨æ—¶åªè¦†å†™ä¸šåŠ¡éœ€è¦çš„æ¥å£ã€‚ 12345678910111213141516public static class SimpleOnPageChangeListener implements OnPageChangeListener &#123; @Override public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) &#123; // This space for rent &#125; @Override public void onPageSelected(int position) &#123; // This space for rent &#125; @Override public void onPageScrollStateChanged(int state) &#123; // This space for rent &#125;&#125; Hintï¼šå¦‚æœè¦åœ¨onPageSelectedå›è°ƒé‡Œè·å–ç›¸åº”çš„SubFragmentï¼Œä¸è¦ä½¿ç”¨Adapter.getItemï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°åˆ›å»ºçš„Fragmentã€‚åº”å½“è°ƒç”¨çš„æ–¹æ³•æ˜¯Adapter.instantiateItemï¼Œè¿™ä¼šè¿”å›å·²åˆ›å»ºçš„Fragmentï¼Œå‚è€ƒStack Overflowä¸Šé¢çš„è¿™ä¸ªé—®é¢˜ã€‚ Adapteræœ‰ä¸¤ç§Adapterï¼ŒFragmentPagerAdapterå’ŒFragmentStatePagerAdapterï¼Œç®€å•åœ°è¯´ï¼Œå¦‚æœä½ çš„ViewPageråªåŒ…å«3åˆ°4ä¸ªå›ºå®šçš„é¡µé¢ï¼Œåˆ™ä½¿ç”¨FragmentPagerAdapterï¼›å¦‚æœæœ‰å¾ˆå¤šä¸ªé¡µé¢ï¼Œåˆ™ä½¿ç”¨FragmentStatePagerAdapterã€‚ è¿™é‡Œä»¥FragmentStatePagerAdapterä¸ºä¾‹ï¼Œä»‹ç»Adapterçš„å†™æ³•ã€‚ 123456789101112131415// FragmentStatePagerAdapter.javapublic abstract class FragmentStatePagerAdapter extends PagerAdapter &#123; // ...some code... // è¿™é‡Œåˆ›å»ºFragmentå¹¶è¿”å› public abstract Fragment getItem(int position); // ...some code...&#125;// PagerAdapter.javapublic abstract class PagerAdapter &#123; // ...some code... // è¿”å›Fragmentæ€»ä¸ªæ•° public abstract int getCount(); // ...some code...&#125; å¯è§æœ€ç®€å•çš„FragmentStatePagerAdapteråªéœ€è¦å®ç°getItemå’ŒgetCountä¸¤ä¸ªæ–¹æ³•ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¦‚æœéœ€è¦åœ¨åˆ›å»ºSubFragmentæ—¶ä¼ é€’ä¸€äº›å‚æ•°ï¼Œç”¨ä»¥ä¸‹å†™æ³•ã€‚ 12345678910111213141516// åˆ›å»ºFragmentæ—¶ä¼ å…¥Arg_0override fun getItem(position: Int): Fragment &#123; val frag = YourFragmentClass() frag.arguments = Bundle().apply &#123; putString(ARG_0, some_value) &#125; // ... some code ...&#125;// åœ¨Fragmentçš„onViewCreatedé‡Œè¯»å–å‚æ•°override fun onViewCreated(view: View, savedInstanceState: Bundle?) &#123; arguments?.takeIf &#123; it.containsKey(ARG_0) &#125;?.apply &#123; val someValue = getString(ARG_0) // ... some code ... &#125;&#125; - Activity ä¼ é€’å¤§æ•°æ®åœ¨ä½¿ç”¨Intentè¿›è¡ŒActivityä¹‹é—´çš„è·³è½¬æ—¶ï¼Œç³»ç»Ÿæä¾›äº†putExtraç”¨äºå‚æ•°ä¼ é€’ï¼Œå¦‚ä¸‹ä¾‹ã€‚ 123456// caller activityval intent = Intent(this, TheNextActivity::class.java)i.putExtra(ARG_0, 100)// called activityval param = intent.extras?.getInt(ARG_0) å¦‚æœä¼ é€’çš„å‚æ•°ä¸æ˜¯åŸºç¡€ç±»å‹ï¼Œè€Œæ˜¯åˆ—è¡¨ï¼Œåˆ™ä½¿ç”¨putExtra(String, Parcelable)å’ŒgetParcelableExtra(String)åšç›¸åº”çš„å­˜å–ã€‚ ç„¶è€Œï¼Œå®é™…ä¸Šå¾ˆå¤šäººå¹¶ä¸çŸ¥é“ï¼Œé€šè¿‡Intentä¼ é€’çš„å‚æ•°ï¼Œæ˜¯æœ‰å¤§å°é™åˆ¶çš„ã€‚å½“æˆ‘ä»¬ä¼ é€’å å†…å­˜éå¸¸å¤§çš„æ•°æ®ï¼Œå¦‚1000ä¸ªå…ƒç´ çš„åˆ—è¡¨ã€Bitmapç­‰ç­‰æ—¶ï¼Œç¨ä¸æ³¨æ„ï¼Œå°±ä¼šå‡ºç°TransactionTooLargeExceptionï¼Œä»å¼‚å¸¸åå°±å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ç”±äºå‚æ•°è¿‡å¤§å¼•èµ·çš„ã€‚ç©¶å…¶åŸå› ï¼Œæ˜¯å› ä¸ºActivityManagerServiceå†…éƒ¨ä½¿ç”¨äº†Binderé€šä¿¡æœºåˆ¶ï¼Œå…¶äº‹åŠ¡ç¼“å†²åŒºé™åˆ¶äº†ä¼ è¾“æ•°æ®çš„å¤§å°ã€‚Binderäº‹åŠ¡ç¼“å†²åŒºçš„å¤§å°ä¸º1MBï¼Œè€Œä¸”ï¼Œè¿™1MBè¿˜ä¸æ˜¯ç‹¬äº«çš„ï¼Œæ„å‘³ç€æœ‰æ—¶å°½ç®¡ä¼ é€’çš„æ•°æ®æ²¡æœ‰è¶…å‡º1MBï¼Œä¹Ÿä¼šè§¦å‘å¼‚å¸¸ã€‚ é‚£ä¹ˆï¼Œå¯¹äºéœ€è¦ä¼ é€’å¤§é‡æ•°æ®çš„åœºæ™¯ï¼Œæœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿ å•ä¾‹1234object Singleton &#123; var items: List&lt;Foo&gt;? = null var largeImg: Bitmap? = null&#125; ä¸éœ€è¦è¿‡å¤šè§£é‡Šï¼Œæ³¨æ„ä¸è¦å‡ºç°å†…å­˜æ³„æ¼ï¼Œä»¥åŠå•ä¾‹æ— æ³•åœ¨è¿›ç¨‹ä¹‹é—´å…±äº«ã€‚ æŒä¹…åŒ–åˆ©ç”¨ç½‘ç»œã€æ•°æ®åº“ã€æ–‡ä»¶ã€SharedPreferenceç­‰æ–¹å¼ï¼Œå°†æ•°æ®æŒä¹…åŒ–ä¿å­˜ï¼Œéšååœ¨æ–°é¡µé¢è¯»å–ã€‚ä¼˜ç‚¹æ˜¯ä¿å­˜åå¯ä»¥è·¨è¿›ç¨‹ç”šè‡³è·¨åº”ç”¨ã€è·¨å¹³å°ä½¿ç”¨ï¼Œç¼ºç‚¹åˆ™æ˜¯æ•ˆç‡ä½ä¸‹ï¼Œè¯»å†™æ—¶æ²¡æœ‰æ§åˆ¶å¥½äº‹åŠ¡ä¼šå‘ç”Ÿå¼‚å¸¸ã€‚ ä½¿ç”¨EventBusåœ¨ã€Šé˜¿é‡Œå·´å·´Androidå¼€å‘æ‰‹å†Œã€‹ä¸­å†™åˆ°ï¼šâ€œActivity é—´çš„æ•°æ®é€šä¿¡ï¼Œå¯¹äºæ•°æ®é‡æ¯”è¾ƒå¤§çš„ï¼Œé¿å…ä½¿ç”¨ Intent + Parcelable çš„æ–¹å¼ï¼Œå¯ä»¥è€ƒè™‘ EventBus ç­‰æ›¿ä»£æ–¹æ¡ˆï¼Œä»¥å…é€ æˆ TransactionTooLargeExceptionã€‚â€ ç”±äºEventBusæ»¥ç”¨ä¼šå¯¼è‡´ä»£ç ç»“æ„æ··ä¹±ï¼Œå› æ­¤ä¸ªäººä¸æ¨èã€‚ å‚è€ƒèµ„æ–™ï¼šhttps://juejin.im/post/5d8de547e51d45781f73bacc - Kotlinå•ä¾‹å†™æ³•å•ä¾‹æ¨¡å¼æ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸ä½¿ç”¨åˆ°çš„è®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ªè‰¯å¥½çš„å•ä¾‹æ¨¡å¼å®ç°åº”å½“å…¼é¡¾ä»£ç æ€§èƒ½ä¸è°ƒç”¨ç®€ä¾¿ä¸¤ä¸ªæ–¹é¢ã€‚åœ¨Javaä¸­æˆ‘ä»¬é€šè¿‡â€œåŒé”â€æˆ–è€…â€œé™æ€å†…éƒ¨ç±»â€æ¥å®ç°å•ä¾‹æ¨¡å¼ï¼Œç›¸æ¯”ä¹‹ä¸‹æˆ‘æ›´å–œæ¬¢é™æ€å†…éƒ¨ç±»çš„å†™æ³•ï¼Œã€ŠEffective Javaã€‹ä¸€ä¹¦çš„ä½œè€…ä¹Ÿæ˜¯è¿™æ ·è®¤ä¸ºçš„ã€‚ 123456789101112// æ ·ä¾‹ä»£ç ï¼Œæ¥è‡ª wikiï¼šhttps://en.wikipedia.org/wiki/Initialization-on-demand_holder_idiompublic class Something &#123; private Something() &#123;&#125; private static class LazyHolder &#123; static final Something INSTANCE = new Something(); &#125; public static Something getInstance() &#123; return LazyHolder.INSTANCE; &#125;&#125; æ— å‚æ•°å†™æ³•ä»Šå¤©ä¸»è¦è®¨è®ºKotlinçš„å•ä¾‹å†™æ³•ï¼Œåœ¨Kotlinä¸­ï¼Œå•ä¾‹è¢«ä¸Šå‡åˆ°äº†è¯­è¨€å±‚é¢ï¼Œå…³é”®å­—objectå¯ä»¥ç”¨æ¥å£°æ˜ä¸€ä¸ªä¸éœ€è¦å‚æ•°çš„å•ä¾‹å¯¹è±¡ã€‚ 12345object SomeSingleton &#123; init &#123; // åœ¨è¿™é‡Œæ·»åŠ åˆå§‹åŒ–ä»£ç  &#125;&#125; å€ŸåŠ©äºJVMåŠ è½½ç±»çš„è¿‡ç¨‹ï¼Œå®ƒç¼–è¯‘åçš„ç­‰æ•ˆJavaä»£ç ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ 12345678910111213// ä¸Šè¿°Kotlinä»£ç çš„Javaç­‰ä»·ç‰ˆæœ¬public final class SomeSingleton &#123; public static final SomeSingleton INSTANCE; private SomeSingleton() &#123; INSTANCE = (SomeSingleton)this; System.out.println(\"init complete\"); &#125; static &#123; new SomeSingleton(); &#125;&#125; æœ‰å‚æ•°å†™æ³•æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å•ä¾‹åˆå§‹åŒ–æ—¶ä¼ å…¥ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚Glide.with(Context)ï¼Œæ­¤æ—¶objectå…³é”®å­—å°±æ‰è¥Ÿè§è‚˜äº†ã€‚åœ¨Stack Overflowè¿™ä¸ªé—®é¢˜ä¸‹é¢å¯ä»¥å­¦ä¹ åˆ°ï¼Œå€ŸåŠ©ä¼´ç”Ÿå¯¹è±¡çš„â€œä¼ªé™æ€æ–¹æ³•â€ï¼Œèƒ½è¾¾åˆ°ä¼ å…¥åˆå§‹åŒ–å‚æ•°çš„ç›®çš„ã€‚ 1234567891011121314151617class UsersDatabase : RoomDatabase() &#123; companion object &#123; @Volatile private var INSTANCE: UsersDatabase? = null fun getInstance(context: Context): UsersDatabase = INSTANCE ?: synchronized(this) &#123; INSTANCE ?: buildDatabase(context).also &#123; INSTANCE = it &#125; &#125; private fun buildDatabase(context: Context) = Room.databaseBuilder(context.applicationContext, UsersDatabase::class.java, \"Sample.db\") .build() &#125;&#125; ä»¥ä¸Šè¿™ç§å†™æ³•ï¼Œéœ€è¦å…³æ³¨ä»¥ä¸‹å‡ ç‚¹ã€‚ å•ä¾‹æˆå‘˜INSTANCEéœ€è¦æœ‰@Volatileå£°æ˜ï¼Œä»¥ä¿è¯å¯¹è±¡å”¯ä¸€ synchronizedåŠ é”é˜²æ­¢é‡å¤åˆå§‹åŒ– å€ŸåŠ©alsoè¿”å›åŸå¯¹è±¡ å¦‚æœä»£ç é‡Œåªæœ‰ä¸€ä¸ªå•ä¾‹ç±»è¦å®ç°ï¼Œä¸Šé¢è¿™ç§å†™æ³•å°±è¶³å¤Ÿäº†ã€‚ä½†æ˜¯ï¼Œè‹¥æœ‰å¾ˆå¤šä¸ªå•ä¾‹ç±»ï¼Œè¿™ç§å†™æ³•äº§ç”Ÿçš„æ ·æ¿ä»£ç å¯ä¸å°‘ã€‚æ˜¯ä¸æ˜¯å¯ä»¥æŠŠæ ·æ¿ä»£ç é€»è¾‘æŠ½å‡ºï¼Œä¸€æ¬¡ä¹¦å†™ï¼Œå¤šå¤„è°ƒç”¨ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚ æœ‰å‚æ•°å†™æ³•ï¼ŒWrite Onceï¼ŒUse Manyé¦–å…ˆåŒºåˆ†ä¸Šè¿°å®ç°æ–¹å¼é‡Œï¼Œå¯å˜çš„éƒ¨åˆ†ä¸ä¸å˜çš„éƒ¨åˆ†ï¼Œæ€è·¯æ˜¯æŠŠä¸å˜çš„éƒ¨åˆ†æŠ½è±¡æˆæµç¨‹ï¼ŒæŠŠå¯å˜çš„éƒ¨åˆ†æå–ä½œä¸ºå‚æ•°ã€‚ ä¸å˜çš„éƒ¨åˆ†æ˜¯æ£€æŸ¥ã€ç»´æŠ¤ã€è°ƒç”¨æ„å»ºå‡½æ•°ï¼Œå°†å…¶æŠ½å‡ºä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»ä¸€å®šæ˜¯ç”¨äºè¢«ç»§æ‰¿ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å£°æ˜ä¸ºopenï¼Œé€šè¿‡lambdaè¡¨è¾¾å¼å‚æ•°constructorï¼Œå¼€æ”¾å‡ºæ„å»ºå¯¹è±¡çš„èƒ½åŠ› 12345678910111213141516// SingletonHolder.ktopen class SingletonHolder&lt;out T, in A&gt;(private val constructor: (A) -&gt; T) &#123; @Volatile private var instance: T? = null fun getInstance(arg: A): T &#123; return when &#123; instance != null -&gt; instance!! else -&gt; synchronized(this) &#123; if (instance == null) instance = constructor(arg) instance!! &#125; &#125; &#125;&#125; æ­¤æ—¶ï¼Œæœ‰ä¸€ä¸ªç±»éœ€è¦å¢åŠ å•ä¾‹å®ç°ï¼Œå¹¶ä¸”å…¶æ„é€ å‡½æ•°éœ€è¦ä¸€ä¸ªContextç±»å‹çš„å‚æ•°ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å…¶å†…éƒ¨å£°æ˜ä¸€ä¸ªä¼´ç”Ÿå¯¹è±¡ï¼Œç»§æ‰¿è‡ªSingletonHolder&lt;MyManager, Context&gt; 123456789// MyManager.ktclass MyManager private constructor(context: Context) &#123; fun doSomething() &#123; // ... &#125; companion object : SingletonHolder&lt;MyManager, Context&gt;(::MyManager)&#125; å¯¹å•ä¾‹çš„è°ƒç”¨è€…è€Œè¨€ï¼Œå†™æ³•ä¸Javaæ— å¼‚ã€‚ 1MyManager.getInstance(context).doSomething() æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ä¸Glideçš„Glide.with(context).load(img_url)å®Œå…¨ä¸€è‡´ï¼ŸBravoï¼ å‚è€ƒèµ„æ–™ https://medium.com/@BladeCoder/kotlin-singletons-with-argument-194ef06edd9e https://stackoverflow.com/questions/40398072/singleton-with-parameter-in-kotlin Vimiumçš„é¡µé¢æ£€ç´¢æŠ€å·§åœ¨ä½¿ç”¨æµè§ˆå™¨æ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¼šæ‰“å¼€å¾ˆå¤šä¸ªé¡µé¢ï¼Œæ­¤æ—¶å¦‚æœæƒ³è¦åœ¨æ‰“å¼€çš„é¡µé¢é‡Œæ‰¾åˆ°ç‰¹å®šé¡µé¢ï¼Œå¾€å¾€éœ€è¦ä»å¤´ç¿»åˆ°å°¾ï¼Œååˆ†ä¹‹éº»çƒ¦ã€‚Vimiumè€ƒè™‘åˆ°äº†è¿™ä¸€ç‚¹ï¼Œå¹¶ä¸ºæˆ‘ä»¬æä¾›å¿«æ·é”®Tè§£å†³ã€‚è¿™ä¸ªåŠŸèƒ½å±äºVomnibaråŠŸèƒ½é›†ï¼Œæ˜¯Vimiumæä¾›çš„ä¸€ç»„é¡µé¢æ–°å»ºã€æœç´¢å¿«æ·é”®ï¼Œä¸€å…±æœ‰5ä¸ªã€‚ oï¼Œåœ¨å½“å‰Tabæ‰“å¼€URLã€ä¹¦ç­¾æˆ–æµè§ˆå†å² Oï¼Œæ–°å»ºTabæ‰“å¼€URLã€ä¹¦ç­¾æˆ–æµè§ˆå†å² bï¼Œåœ¨å½“å‰Tabæ‰“å¼€ä¹¦ç­¾ Bï¼Œæ–°å»ºTabæ‰“å¼€ä¹¦ç­¾ Tï¼Œä¹Ÿå°±æ˜¯åˆšåˆšä»‹ç»è¿‡çš„ï¼Œåœ¨å·²æ‰“å¼€çš„Tabä¸­è¿›è¡Œæœç´¢ ï¼ˆé¡ºå¸¦æä¸€ä¸‹ï¼ŒSublimeçš„copy lineå¿«æ·é”®æ˜¯Ctrl+Shift+Dï¼Œåœ¨å†™ç€ä¸€æ®µæ—¶ç”¨åˆ°çš„ã€‚ï¼‰ ä½¿ç”¨é»˜è®¤å‚æ•°ç®€åŒ–è‡ªå®šä¹‰Viewçš„æ„é€ å‡½æ•°åœ¨ç¼–å†™è‡ªå®šä¹‰Viewçš„ç±»æ—¶ï¼Œå¦‚æœè‡ªå®šä¹‰Viewç»§æ‰¿è‡ªandroid.view.Viewï¼Œé€šå¸¸éœ€è¦è¦†å†™å¤šä¸ªæ„é€ å‡½æ•°ï¼Œä»¥æ”¯æŒViewçš„å¤šç§æ„å»ºæ–¹å¼ã€‚è¿™ç§å¤„ç†ä¸ä»…éº»çƒ¦ï¼Œè¿˜å¸¦æ¥å¤§é‡æ ·æ¿ä»£ç ï¼Œç¨€é‡Šäº†æˆ‘ä»¬çš„ä»£ç è´¨é‡ã€‚ 12345678910111213141516// View.javapublic View(Context context) &#123; // ...&#125;public View(Context context, @Nullable AttributeSet attrs) &#123; this(context, attrs, 0);&#125;public View(Context context, @Nullable AttributeSet attrs, int defStyleAttr) &#123; this(context, attrs, defStyleAttr, 0);&#125;public View(Context context, @Nullable AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; // ...&#125; è”æƒ³åˆ°Kotlinå‡½æ•°çš„é»˜è®¤å‚æ•°åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¯ä»¥å°†å…¶åº”ç”¨åœ¨è¿™ç§åœºæ™¯ä¸­å‘¢ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¯ä»¥ã€‚ç»“åˆ@JvmOverloadsæ³¨è§£å’Œé»˜è®¤å‚æ•°ï¼Œå†™æ³•å¦‚ä¸‹ã€‚ 12345678class CustomView @JvmOverloads constructor( context: Context, attrs: AttributSet? = null, defStyle: Int = 0, defStyleRes: Int = 0 ) : View(context, attrs, defStyle, defStyleRes) &#123; // class body &#125; åœ¨æ­¤åŸºç¡€ä¸Šï¼Œå€ŸåŠ©init{ ... }ä»£ç å—ï¼Œå¯ä»¥æ‰§è¡Œè‡ªå®šä¹‰çš„åˆå§‹åŒ–ä»£ç ã€‚ å‚è€ƒï¼šhttps://stackoverflow.com/questions/20670828/how-to-create-constructor-of-custom-view-with-kotlin MediaPlayerçŠ¶æ€æœºMediaPlayeræ˜¯Android SDKæä¾›çš„éŸ³è§†é¢‘æ’­æ”¾ç»„ä»¶ï¼Œå°½ç®¡ç›®å‰æœ‰æ›´ä¼˜ç§€çš„IJKPlayerã€EXOPlayerç­‰å¼€æºé¡¹ç›®ï¼ŒMediaPlayerä½œä¸ºåŠŸèƒ½å•ä¸€ã€æ¥å£æ¸…æ™°çš„æ’­æ”¾å™¨ï¼Œæœ‰å…¶å€¼å¾—å­¦ä¹ çš„æ„ä¹‰ã€‚ä¸€åˆ‡æ•…äº‹ï¼Œä»ä¸€å¼ çŠ¶æ€æœºå›¾ç‰‡å¼€å§‹ã€‚ çŠ¶æ€æœº å›¾ä¾‹è¯´æ˜ï¼šå•ç®­å¤´è¡¨ç¤ºåŒæ­¥è°ƒç”¨ï¼ŒåŒç®­å¤´è¡¨ç¤ºå¼‚æ­¥è°ƒç”¨ï¼ŒåŒå±‚æ¤­åœ†ï¼ˆä»…Endï¼‰è¡¨ç¤ºç»ˆç»“æ€ã€‚ è¿™å¼ å›¾ä¹ä¸€çœ‹åƒæ˜¯ä¸€å›¢ä¹±éº»ï¼Œå…¶å®å¯ä»¥æŒ‰ç…§æ’­æ”¾å‰ã€æ’­æ”¾ä¸­ã€æ’­æ”¾åçš„é˜¶æ®µè¿›è¡ŒåŒºåˆ†ã€‚ æ’­æ”¾å‰ ä»¥Preparedä¸ºç•Œï¼Œä¹‹å‰çš„çŠ¶æ€éƒ½å¯ä»¥è®¤ä¸ºæ˜¯â€œæ’­æ”¾å‰â€ é€šè¿‡newåˆ›å»ºä¸€ä¸ªæ’­æ”¾å™¨ï¼Œæˆ–è€…å¯¹å·²æœ‰æ’­æ”¾å™¨è°ƒç”¨resetï¼Œå‡å¯ä»¥å¾—åˆ°ä¸€ä¸ªå¤„äºIdleçŠ¶æ€çš„æ’­æ”¾å™¨ã€‚ä¸è¿‡è¿™ä¸¤ç§æ–¹å¼æœ‰ä¸€ä¸ªæ˜¾è‘—åŒºåˆ«ï¼Œå³å¯¹Idleæ€æ’­æ”¾å™¨è°ƒç”¨getCurrentPosition(), getDuration(), getVideoHeight(), getVideoWidth(), setAudioAttributes(), setLooping(), setVolume(), pause(), start(), stop(), seekTo(), prepare(), prepareAsync()æ–¹æ³•æ—¶ï¼Œå¦‚æœæ˜¯æ–°æ„å»ºçš„æ’­æ”¾å™¨ï¼Œä¸ä¼šæŠ›å‡ºä»»ä½•ä¸€åœºï¼Œè€Œå¦‚æœæ˜¯é€šè¿‡resetå¾—åˆ°çš„Idleæ’­æ”¾å™¨ï¼Œåˆ™ä¼šè¿›å…¥OnErrorListener.onError()å›è°ƒ æ’­æ”¾å™¨åœ¨å¼€å§‹æ’­æ”¾å‰ï¼Œå¿…é¡»è¿›å…¥Preparedæ€ã€‚æœ‰ä¸¤ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯åŒæ­¥çš„prepare()å’Œå¼‚æ­¥çš„prepareAsync()ã€‚åŒæ­¥æ–¹æ³•çš„è¿”å›æ˜¯å¾ˆå¿«çš„ï¼Œå‡ ä¹æ˜¯ç¬é—´ã€‚å¯¹äºå¼‚æ­¥è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡setOnPreparedListener()è®¾ç½®ç›‘å¬ å½“æ’­æ”¾å™¨å¤„äºPreparedæ€æ—¶ï¼Œå¯ä»¥è®¾ç½®éŸ³é‡ã€å±å¹•å¸¸äº®ã€å¾ªç¯æ’­æ”¾ç­‰å±æ€§ æ’­æ”¾ä¸­ æ’­æ”¾è¿‡ç¨‹å¯èƒ½å› ä¸ºå„ç§åŸå› å‘ç”Ÿå¼‚å¸¸ï¼Œè¯¸å¦‚ä¸æ”¯æŒçš„éŸ³è§†é¢‘æ ¼å¼ã€å—æŸçš„æ–‡ä»¶ã€åˆ†è¾¨ç‡è¿‡é«˜ã€è§£ç è¶…å¸‚ç­‰ç­‰åŸå› ï¼Œæˆ–è€…æ˜¯å¯¹äºæ’­æ”¾å™¨è°ƒç”¨äº†ä¸å±äºå…¶çŠ¶æ€çš„æ–¹æ³•ã€‚åœ¨è¿™äº›é”™è¯¯å‘ç”Ÿæ—¶ï¼Œä¼šèµ°åˆ°OnErrorListener.onError()å›è°ƒä¸­ï¼Œå› æ­¤åœ¨æ’­æ”¾å‰è®¾ç½®ç›‘å¬setOnErrorListener()æ˜¯éå¸¸é‡è¦çš„ è®¾ç½®onErrorç›‘å¬å¹¶ä¸èƒ½é¿å…æ’­æ”¾å™¨è¿›å…¥Erroræ€ï¼Œåªæ˜¯åœ¨è¿›å…¥æ—¶å‘å‡ºç¨‹åºå¯ä»¥è§‚æµ‹åˆ°çš„ç›‘å¬äº‹ä»¶ å¦‚æœåœ¨é”™è¯¯çš„çŠ¶æ€è°ƒç”¨prepare(), prepareAsync(), setDatasource()ï¼Œä¼šå¯¼è‡´IllegalStateException åŸºäºä¸Šä¸€æ¡ï¼Œåœ¨è°ƒç”¨setDatasourceä»¥åŠå®ƒçš„ä¼—å¤šé‡è½½æ–¹æ³•æ—¶ï¼Œå¿…é¡»æ•è·IllegalArgumentExceptionå’ŒIOException é€šè¿‡start()å¯åŠ¨æ’­æ”¾ï¼Œé€šè¿‡isPlaying()åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºæ’­æ”¾ä¸­ï¼Œå¯ä»¥åœ¨start()åç»§ç»­è°ƒç”¨start()ï¼Œä½†è¿™ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ åœ¨å¼€å§‹æ’­æ”¾åï¼Œå¯ä»¥é€šè¿‡setOnBufferingUpdateListener()ç›‘å¬è§†é¢‘ç¼“å†²è¿›åº¦ å¯¹äºæ’­æ”¾ä¸­çš„è§†é¢‘ï¼Œè°ƒç”¨pause()è¿›å…¥Pausedæ€ï¼Œè¿™æ˜¯ä¸€ä¸ªç•¥å¾®æœ‰å»¶è¿Ÿï¼ˆsecondsï¼‰çš„è°ƒç”¨ï¼Œæ„å‘³ç€isPlaying()å¯èƒ½ä¸ä¼šç«‹å³åæ˜ å½“å‰çŠ¶æ€ï¼Œåä¹‹äº¦ç„¶ å¯¹äºStarted, Paused, Prepared, PlaybackCompletedæ€çš„æ’­æ”¾å™¨è°ƒç”¨stop()ï¼Œä½¿å…¶è¿›å…¥Stoppedæ€ï¼›å¯¹äºStoppedæ€çš„æ’­æ”¾å™¨ï¼Œå¿…é¡»ä½¿å…¶å†æ¬¡è¿›å…¥Preparedæ€åï¼Œæ–¹å¯ç”¨äºæ’­æ”¾ ä¸start()ä¸€æ ·ï¼Œå¤šæ¬¡è°ƒç”¨stop()ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ ç”¨seekTo()è®¾ç½®æ’­æ”¾è¿›åº¦ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼ŒOnSeekComplete.onSeekComplete()ç”¨äºç›‘å¬ï¼›å¯ä»¥åœ¨Prepared, Paused, PlaybackCompletedå¤šä¸ªæ€è°ƒç”¨ï¼Œä¸”è°ƒç”¨seekTo()åæ’­æ”¾å™¨ä»ä¿æŒåŸçŠ¶æ€ï¼ŒåŒæ—¶æ”¹å˜å½“å‰å¸§ï¼›ç›¸åº”çš„ï¼ŒgetCurrentPosition()å¯ä»¥è¿”å›å½“å‰çš„æ’­æ”¾è¿›åº¦ æ’­æ”¾å ä¸€æ—¦æ’­æ”¾å™¨ä¸å†ä½¿ç”¨ï¼Œå»ºè®®ç«‹å³è°ƒç”¨release()é‡Šæ”¾èµ„æºï¼Œæ­¤åæ’­æ”¾å™¨è¿›å…¥Endæ€ï¼Œä¸”å†ä¹Ÿæ— æ³•é€šè¿‡ä»»ä½•æ–¹æ³•ä½¿å…¶æ¢å¤ å¦‚æœè®¾ç½®äº†Loopingï¼Œæ’­æ”¾å®Œæˆåä¼šä¿æŒStartedæ€ï¼Œå¦åˆ™ä¼šè¿›å…¥OnCompletionListenerå›è°ƒï¼Œå¹¶è¿›å…¥PlaybackCompletedæ€ æ’­æ”¾å™¨çš„æƒé™è¦æ±‚è§†éœ€æ±‚è€Œå®šï¼Œå¯èƒ½éœ€è¦WAKE_LOCKä»¥åŠInternetæƒé™ã€‚ çº¿ç¨‹é™åˆ¶å¿…é¡»åœ¨UIçº¿ç¨‹åˆ›å»ºæ’­æ”¾å™¨ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½æ­£å¸¸æ”¶åˆ°ä¸ºæ’­æ”¾å™¨è®¾ç½®çš„å„ç§å›è°ƒã€‚ å‚è€ƒï¼šhttps://developer.android.com/reference/android/media/MediaPlayer","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"æ¯å‘¨ç§¯ç´¯","slug":"æ¯å‘¨ç§¯ç´¯","permalink":"https://lilei.pro/tags/æ¯å‘¨ç§¯ç´¯/"}]},{"title":"æœ¬å‘¨çŸ¥è¯†ç§¯ç´¯[2020/02] RecyclerViewå¸ƒå±€é¢„è§ˆï¼›Uriå¯¹è±¡å¸¸ç”¨æ“ä½œï¼›è½»æ¾åˆ›å»ºMainDispatcherä¸Deferred","date":"2020-02-28T01:00:37.000Z","path":"2020/02/28/weekly-2020-02-01/","text":"In case of I donâ€™t see you. Good afternoon, good evening and good night. åœ¨xmlé¢„è§ˆä¸­æŸ¥çœ‹RecyclerViewå¸ƒå±€åœ¨åŠŸèƒ½å¼€å‘çš„å‰æœŸï¼Œæˆ‘ä»¬åšå¥½å¸ƒå±€åï¼Œå¸Œæœ›å¯ä»¥åœ¨IDEçš„xmlé¢„è§ˆé‡ŒæŸ¥çœ‹æ•ˆæœã€‚åœ¨ä½¿ç”¨åˆ°RecyclerViewæ—¶ï¼Œçœ‹åˆ°çš„å¾€å¾€æ˜¯item 0ã€item 1ã€item 2è¿™æ ·çš„å ä½æ–‡å­—ï¼Œå¦‚ä¸‹å·¦å›¾æ‰€ç¤ºã€‚å¦‚æœæˆ‘ä»¬æƒ³æŸ¥çœ‹è®¾è®¡å¥½çš„itemå¸ƒå±€ï¼ˆå¦‚ä¸‹å³ï¼‰ï¼Œåº”å½“å¦‚ä½•åšå‘¢ï¼Ÿ å¯ä»¥ä½¿ç”¨toolsçš„å‘½åç©ºé—´ã€‚ tools namespace enables design-time features (such as which layout to show in a fragment) or compile-time behaviors (such as which shrinking mode to apply to your XML resources) It is really powerful feature that is developing and allows you not compile code every time to see changes. 12345678910111213141516171819&lt;!-- æ ·ä¾‹ä»£ç  --&gt;&lt;!-- AndroidX --&gt;&lt;androidx.recyclerview.widget.RecyclerView tools:layoutManager=\"androidx.recyclerview.widget.GridLayoutManager\"&lt;!-- support --&gt;&lt;android.support.v7.widget.RecyclerView tools:layoutManager=\"android.support.v7.widget.GridLayoutManager\" &lt;!-- common --&gt; xmlns:android=\"http://schemas.android.com/apk/res/android\" xmlns:tools=\"http://schemas.android.com/tools\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\" tools:itemCount=\"5\" tools:listitem=\"@layout/item_video\" tools:orientation=\"horizontal\" tools:scrollbars=\"horizontal\" tools:spanCount=\"2\" /&gt; å‚è€ƒ https://stackoverflow.com/questions/29929963/is-there-a-way-to-show-a-preview-of-a-recyclerviews-contents-in-the-android-stu Uriå¯¹è±¡çš„åŸºæœ¬æ“ä½œä¸å±äºæ–°çŸ¥è¯†ï¼Œåšç½‘ç»œè¯·æ±‚å¼€å‘æ—¶ç»å¸¸ä¼šé‡åˆ°ï¼Œä»¥å‰æ¯æ¬¡ç¢°åˆ°æ—¶éƒ½æ˜¯ç°æŸ¥çš„ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å¹´çºªå¤§äº†è®°å¿†åŠ›ä¸‹é™çš„ç¼˜æ•… :-( è¿™é‡Œæ•´ç†ä½œä¸ºå¤‡å¿˜ã€‚ Uriæ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ„å»ºå‡ºæ¥åå³ä¸å¯ä¿®æ”¹ã€‚ Urié‡‡ç”¨æ„å»ºå™¨æ¨¡å¼è¿›è¡Œæ„å»ºã€‚ åˆå§‹åŒ–ä¸€ä¸ªUri.Builderå¯¹è±¡ï¼šUri.parse(SAMPLE_URL).buildUpon()ï¼Œå¦‚ä¸‹ä¾‹ 1val uriBuilder = Uri.parse(\"https://www.google.com\").buildUpon() è¿›è¡ŒUTF8ç¼–ç ï¼šencode(String s) å¢åŠ å‚æ•°ï¼šappendQueryParameter(&quot;key&quot;, &quot;value&quot;) åˆ†å¼€è®¾ç½®åè®®å’Œä¸»æœºï¼šscheme(&quot;https&quot;)ï¼Œauthority(&quot;www.google.com&quot;) ä¸¾ä¾‹è¯´æ˜ï¼Œå¦‚æœæƒ³è¦æ„å»ºå¦‚ä¸‹çš„URLåœ°å€ 1https://www.myawesomesite.com/turtles/types?type=1&amp;sort=relevance#section-name åˆ™ä½¿ç”¨ä»¥ä¸‹ä»£ç å®ç° 123456789Uri.Builder builder = new Uri.Builder();builder.scheme(\"https\") .authority(\"www.myawesomesite.com\") .appendPath(\"turtles\") .appendPath(\"types\") .appendQueryParameter(\"type\", \"1\") .appendQueryParameter(\"sort\", \"relevance\") .fragment(\"section-name\");String myUrl = builder.build().toString(); å‚è€ƒ https://developer.android.com/reference/android/net/Uri https://developer.android.com/reference/android/net/Uri.Builder è½»æ¾åˆ›å»ºMainDispatcherä¸Deferredæ„å»ºä¸»çº¿ç¨‹è°ƒåº¦å™¨Dispatcher/è°ƒåº¦å™¨æ˜¯åç¨‹ä¸Šä¸‹æ–‡é‡Œå¾ˆé‡è¦çš„ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå†³å®šäº†ä»£ç è¿è¡Œåœ¨å“ªä¸ªçº¿ç¨‹ä¸­ã€‚å°¤å…¶æ˜¯åšAndroidå¼€å‘æ—¶ï¼Œç»å¸¸éœ€è¦æŠŠUIæ“ä½œå‘é€ç»™ä¸»çº¿ç¨‹è¿›è¡Œï¼ŒåƒViewModelå°±ä¸ºæˆ‘ä»¬æä¾›äº†MainDispatcherã€‚ å¦‚æœå½“å‰æ²¡æœ‰MainDispatcherï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºæ—¶ï¼Œè¦æ€ä¹ˆæ–¹ä¾¿åœ°è¿›è¡Œæ„å»ºå‘¢ï¼ŸKotlinåœ¨Handlerç±»ä¸Šæ–°å¢äº†ä¸€ä¸ªæ‰©å±•å‡½æ•°asCoroutineDispatcher()ï¼Œç”¨æ³•å¦‚ä¸‹ 1val mainDispatcher = Handler(Looper.getMainLooper()).asCoroutineDispatcher() åªè¦é€šè¿‡MainLooperå°±å¯ä»¥æ„å»ºå‡ºä¸»çº¿ç¨‹è°ƒåº¦å™¨äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ã€‚ æ„å»ºå³æ—¶Deferredå¯¹è±¡Deferredæ˜¯ä¸€ç§æ³›å‹ï¼Œåœ¨åç¨‹ä¸­ç”¨äºè¡¨ç¤ºè€—æ—¶æ“ä½œç»“æœï¼Œå½“æˆ‘ä»¬éœ€è¦å–å€¼æ—¶ï¼Œé€šè¿‡Deferred.await()å³å¯ã€‚å®ƒæœ‰ç‚¹ç±»ä¼¼Javaä¸­çš„Futureï¼Œè¡¨ç¤ºä¸€ç§â€œè¿›è¡Œä¸­çš„æ“ä½œï¼Œå³å°†è¿”å›ç»“æœâ€ã€‚ æ„å»ºDeferredå¯¹è±¡æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯é€šè¿‡asyncçš„æºç¨‹æ„å»ºå™¨ï¼Œå¦ä¸€ç§æ˜¯ä»Šå¤©è¦ä»‹ç»çš„æ–¹æ³•ï¼Œå¯¹äºå·²çŸ¥çš„å€¼ï¼ˆæ¯”å¦‚ 10ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç”¨CompletableDeferred(10)æ¥åˆ›å»ºä¸€ä¸ªDeferredå¯¹è±¡ï¼Œä½ å¯ä»¥ç›´æ¥æŠŠå®ƒç”¨åœ¨ä»»ä½•éœ€è¦Deferredå¯¹è±¡çš„åœ°æ–¹ï¼Œå–å€¼æ—¶åˆ™ä¼šç›´æ¥è¿”å›10ã€‚ å‚è€ƒ https://stackoverflow.com/questions/53273361/how-to-return-deferred-with-the-instant-results","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"æ¯å‘¨ç§¯ç´¯","slug":"æ¯å‘¨ç§¯ç´¯","permalink":"https://lilei.pro/tags/æ¯å‘¨ç§¯ç´¯/"}]},{"title":"Kotlin åç¨‹åŸºç¡€è¯¾ 03.æ­å¼€åç¨‹ä¸Šä¸‹æ–‡CoroutineContextçš„ç¥ç§˜é¢çº±","date":"2019-12-13T14:40:28.000Z","path":"2019/12/13/kotlin-coroutines-03/","text":"é™å®šç›®çš„ï¼Œèƒ½ä½¿äººç”Ÿå˜å¾—ç®€æ´ã€‚ åç¨‹ä¸Šä¸‹æ–‡æ˜¯ä¸ªå•¥ï¼ŸCoroutineContextï¼Œè¯‘ä½œâ€œåç¨‹ä¸Šä¸‹æ–‡â€ï¼Œåœ¨åç¨‹ä¸­æ˜¯éå¸¸é‡è¦çš„æ¦‚å¿µã€‚ä½ å¯èƒ½ä¼šæ¯”è¾ƒå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆä¹‹å‰éƒ½æ²¡æœ‰æ³¨æ„åˆ°å®ƒçš„å­˜åœ¨å‘¢ï¼Ÿå› ä¸ºåç¨‹æ¡†æ¶å·²ç»ä¸ºæˆ‘ä»¬åŒ…è£…å¾—éå¸¸å¥½äº†ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹launchå’Œasyncä¸¤ä¸ªå‡½æ•°çš„ç­¾åï¼š launch123456fun CoroutineScope.launch( context: CoroutineContext = EmptyCoroutineContext, start: CoroutineStart = CoroutineStart.DEFAULT, onCompletion: CompletionHandler? = null, block: suspend CoroutineScope.() -&gt; Unit): Job async123456fun &lt;T&gt; CoroutineScope.async( context: CoroutineContext = EmptyCoroutineContext, start: CoroutineStart = CoroutineStart.DEFAULT, onCompletion: CompletionHandler? = null, block: suspend CoroutineScope.() -&gt; T): Deferred&lt;T&gt; å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯CoroutineContextç±»å‹çš„ã€‚æ‰€æœ‰åç¨‹æ„å»ºå‡½æ•°ï¼ˆå¦‚launchå’Œasyncï¼‰éƒ½æ˜¯ä»¥CoroutineScopeçš„æ‰©å±•å‡½æ•°çš„å½¢å¼è¢«å®šä¹‰çš„ï¼Œè€ŒCoroutineScopeæ¥å£å”¯ä¸€çš„æˆå‘˜å°±æ˜¯CoroutineContextç±»å‹ã€‚ 12345678910public interface CoroutineScope &#123; /** * The context of this scope. * Context is encapsulated by the scope and used for implementation of coroutine builders that are extensions on the scope. * Accessing this property in general code is not recommended for any purposes except accessing the [Job] instance for advanced usages. * * By convention, should contain an instance of a [job][Job] to enforce structured concurrency. */ public val coroutineContext: CoroutineContext&#125; åç¨‹ä¸Šä¸‹æ–‡æ˜¯åç¨‹å¿…å¤‡çš„ç»„æˆéƒ¨åˆ†ï¼Œå®ƒç®¡ç†äº†åç¨‹çš„çº¿ç¨‹ç»‘å®šã€ç”Ÿå‘½å‘¨æœŸã€å¼‚å¸¸å¤„ç†å’Œè°ƒè¯•åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸Šä¸‹æ–‡å…·ä½“çš„ç»“æ„ç»„æˆã€‚ åç¨‹ä¸Šä¸‹æ–‡çš„ç»“æ„ It is an indexed set of Element instances. An indexed set is a mix between a set and a map. Every element in this set has a unique Key. Keys are compared by reference. CoroutineContextæ¥å£è·ŸMapå¾ˆç±»ä¼¼ï¼Œå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š æœ‰åºMap Keyå”¯ä¸€ ç±»å‹å®‰å…¨ ##è·ŸMapç±»ä¼¼ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨Map é‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨Mapæ¥å®ç°å‘¢ï¼Ÿå‚è€ƒä¸‹é¢ä¸€æ®µä»£ç ï¼Œå®ƒç”¨Mapå®ç°äº†ç±»ä¼¼CoroutineContextçš„åŠŸèƒ½ 123typealias CoroutineContext = Map&lt;CoroutineContext.Key&lt;*&gt;, CoroutineContext.Element&gt;fun get(key: CoroutineContext.Key&lt;*&gt;): CoroutineContext.Element? å¦‚æœä½¿ç”¨è¿™ç§å®ç°ï¼Œæˆ‘ä»¬æ¯æ¬¡è°ƒç”¨getä¹‹åï¼Œå¿…é¡»ç”¨æ˜¾å¼çš„ç±»å‹è½¬æ¢ï¼Œæ‰èƒ½å¾—åˆ°æƒ³è¦çš„Elementç±»å‹ã€‚è€ŒCoroutineContextåˆ™é€šè¿‡æ³›å‹ï¼ˆCoroutineContextçš„Keyå³å¸¦æœ‰ç±»å‹ä¿¡æ¯ï¼‰ä¸ºæˆ‘ä»¬è§£å†³äº†ç±»å‹è½¬æ¢çš„ç—›ç‚¹ï¼š 1fun &lt;E : Element&gt; get(key: Key&lt;E&gt;): E? åœ¨CoroutineContextä¸Šå¯è¿›è¡Œçš„æ“ä½œCoroutineContextå¹¶æœªå®ç°æ ‡å‡†çš„é›†åˆæ¥å£ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨iterator()ç­‰é›†åˆæ ‡å‡†æ“ä½œã€‚å®ƒæœ‰ç‹¬ç‰¹çš„ä¸€å¥—æ“ä½œã€‚ â€œæ‹¼è£…â€ä¸Šä¸‹æ–‡å¯¹è±¡å¯¹CoroutineContextæ¥è¯´ï¼Œæœ€é‡è¦çš„æ“ä½œæ˜¯plusï¼Œplusæ“ä½œç”¨äºæŠŠä¸¤ä¸ªCoroutineContextå¯¹è±¡åˆå¹¶æˆä¸€ä¸ªã€‚åˆå¹¶æ—¶æœ‰ä¸€ä¸ªä¼˜å…ˆçº§è§„åˆ™ï¼špluså³ä¾§å¯¹è±¡çš„å±æ€§ä¼šè¦†ç›–å·¦ä¾§å¯¹è±¡ä¸­çš„åŒåå±æ€§ã€‚ [The plus operator] returns a context containing elements from this context and elements from other context. The elements from this context with the same key as in the other one are dropped. Elementå³æ˜¯CoroutineContextæˆ‘ä»¬çŸ¥é“CoroutineContextä¸­çš„Valueæ˜¯Elementï¼Œå…¶å®Elementæœ¬èº«ä¹Ÿæ˜¯ç»§æ‰¿äºCoroutineContextã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå½“æˆ‘ä»¬åªæœ‰ä¸€ä¸ªCoroutineContext.Elementå¯¹è±¡æ—¶ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒä½œä¸ºä¸€ä¸ªCoroutineContextæ¥ä½¿ç”¨ï¼Œè¿™ç§ä¸€èˆ¬ç§°ä¹‹ä¸ºsingleton contextã€‚ ç©ºå¯¹è±¡é™¤äº†singleton contextï¼Œè¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒEmptyCoroutineContextã€‚å®ƒä¸å«æœ‰ä»»ä½•Elementï¼Œå› æ­¤ï¼Œå½“ä½¿ç”¨plusè¿æ¥ç¬¦è¿æ¥ä¸€ä¸ªEmptyCoroutineContextå’Œå¦ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡æ—¶ï¼Œæ€»æ˜¯å¾—åˆ°ä¸å¦ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ç›¸åŒçš„å¯¹è±¡ã€‚ è®¤è¯†ä¸€ä¸‹é‚£äº›Elementså¦‚æœæˆ‘ä»¬æƒ³è¦æŸ¥çœ‹CoroutineContexté‡Œéƒ½å¯ä»¥åŒ…å«å“ªäº›Elementsï¼Œå¯ä»¥æœç´¢CoroutineContext.Keyæ¥å£çš„å®ç°ï¼Œå› ä¸ºCoroutineContextæ˜¯ä¸€ä¸ªä¿å­˜ç±»å‹ç¡®å®šå…ƒç´ çš„Mapã€‚ç»è¿‡æœç´¢åï¼Œæˆ‘ä»¬å‘ç°ä»¥ä¸‹å‡ ä¸ªå…¸å‹Elementï¼š æŒ‡å®šæ‰§è¡Œçº¿ç¨‹ï¼šContinuationInterceptorç”¨äºå¤„ç†åç¨‹æŒ‚è½½åœ¨çº¿ç¨‹ä¸Šçš„é€»è¾‘ï¼ŒæŠ½è±¡ç±»CoroutineDispatcherå®ç°äº†è¯¥æ¥å£ï¼Œä¸€èˆ¬å¸¸ç”¨çš„Dispatcheréƒ½ä¼šç»§æ‰¿äºCoroutineDispatcherã€‚ å±‚çº§å…³ç³»ç®¡ç†ï¼šJobç”¨äºç®¡ç†ä»»åŠ¡å±‚çº§ï¼Œå¤„ç†ä»»åŠ¡çˆ¶å­å…³ç³»ã€‚ æ‰‹åŠ¨ç»ˆæ­¢çˆ¶Jobæ—¶ï¼Œå…¶ä¸­çš„å­Jobä¹Ÿè¢«ç»ˆæ­¢ å½“æ‰€æœ‰å­Jobè¿è¡Œç»“æŸæ—¶ï¼Œçˆ¶Jobæ‰å¯ä»¥è¿è¡Œç»“æŸ å¤„ç†å¼‚å¸¸ï¼šCoroutineExceptionHandlerå¦‚æœä½ åœ¨æ„å»ºåç¨‹æ—¶ä½¿ç”¨äº†æ— æ³•ä¼ é€’å¼‚å¸¸çš„æ„å»ºå™¨ï¼Œå¦‚launchå’Œactorï¼Œå½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œéœ€è¦æœ‰ä¸€ä¸ªå¼‚å¸¸å¤„ç†å™¨æ¥å¤„ç†å®ƒã€‚CoroutineExceptionHandlerå°±æ˜¯å……å½“è¿™æ ·çš„å¼‚å¸¸å¤„ç†å™¨ã€‚ åå­—ï¼šCoroutineNameåç¨‹çš„åˆ«åï¼Œä¸€èˆ¬æ˜¯ç”¨äºè°ƒè¯•ï¼Œä»¥åŒºåˆ†å¤šä¸ªåç¨‹ã€‚ ä¸Šè¿°Elementå†…éƒ¨éƒ½ä»¥ä¼´ç”Ÿå¯¹è±¡çš„å½¢å¼å®šä¹‰äº†ç›¸åº”çš„Keyï¼Œå¯ä»¥é€šè¿‡coroutineContext[element type name]çš„å½¢å¼æ–¹ä¾¿åœ°è·å–åˆ°Elementå¯¹è±¡ã€‚æ¯”å¦‚coroutineContext[Job]ä¼šè¿”å›Jobæˆ–è€…nullï¼ˆå¦‚æœæ²¡æœ‰Jobï¼‰ã€‚ åç¨‹æ„å»ºè¿‡ç¨‹ä¸­çš„CoroutineContextå‰é¢è®²è¿‡CoroutineScopeå®é™…ä¸Šæ˜¯ä¸€ä¸ªCoroutineContextçš„å°è£…ï¼Œå½“æˆ‘ä»¬éœ€è¦å¯åŠ¨ä¸€ä¸ªåç¨‹æ—¶ï¼Œä¼šåœ¨CoroutineScopeçš„å®ä¾‹ä¸Šè°ƒç”¨æ„å»ºå‡½æ•°ï¼Œå¦‚asyncå’Œlaunchã€‚åœ¨æ„å»ºå‡½æ•°ä¸­ï¼Œä¸€å…±å‡ºç°äº†3ä¸ªCoroutineContextï¼š inherited contextï¼šä»CoroutineScopeä¸­ç»§æ‰¿å¾—åˆ°çš„ä¸Šä¸‹æ–‡å¯¹è±¡ context argumentï¼šæ„å»ºå‡½æ•°ä¸­ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé»˜è®¤ä¸ºEmptyCoroutineContext coroutine contextï¼šæŒ‚èµ·ä»£ç å—ï¼ˆlambdaå‡½æ•°ï¼‰è¿è¡Œæ—¶çš„ä¸Šä¸‹æ–‡å¯¹è±¡ å¦‚æœæˆ‘ä»¬æŸ¥çœ‹åç¨‹æ„å»ºå‡½æ•°asyncå’Œlaunchçš„æºç ï¼Œä¼šå‘ç°å®ƒä»¬ç¬¬ä¸€è¡Œéƒ½æ˜¯å¦‚ä¸‹ä»£ç ï¼š 1val newContext = newCoroutineContext(context) å†è¿›ä¸€æ­¥æŸ¥çœ‹ï¼š 12345678// CoroutineContext.kt@ExperimentalCoroutinesApipublic actual fun CoroutineScope.newCoroutineContext(context: CoroutineContext): CoroutineContext &#123; val combined = coroutineContext + context val debug = if (DEBUG) combined + CoroutineId(COROUTINE_ID.incrementAndGet()) else combined return if (combined !== Dispatchers.Default &amp;&amp; combined[ContinuationInterceptor] == null) debug + Dispatchers.Default else debug&#125; è¿™é‡Œå°±æ¯”è¾ƒæ¸…æ™°äº†ï¼šæ„å»ºå™¨å‡½æ•°å†…éƒ¨è¿›è¡Œäº†ä¸€ä¸ªCoroutineContextæ‹¼æ¥æ“ä½œï¼Œplusçš„å·¦å€¼æ˜¯CoroutineScopeå†…éƒ¨çš„CoroutineContextï¼Œå³å€¼æ˜¯ä½œä¸ºæ„å»ºå‡½æ•°å‚æ•°çš„CoroutineContextã€‚æ ¹æ®æˆ‘ä»¬å‰é¢è®²åˆ°çš„æ‹¼æ¥æ“ä½œï¼Œå·¦å€¼å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ æ­¤å¤–ï¼ŒæŠ½è±¡ç±»AbstractCoroutineScopeå®ç°äº†CoroutineScopeå’ŒJobæ¥å£ï¼Œå¤§éƒ¨åˆ†CoroutineScopeçš„å®ç°éƒ½ç»§æ‰¿è‡ªAbstractCoroutineScopeï¼Œæ„å‘³ç€ä»–ä»¬åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªJobã€‚å¯ä»¥å¾—åˆ°ï¼šcoroutine context = parent context + coroutine jobã€‚ Elementsé»˜è®¤å€¼å¯¹äºä¸Šè¿°4ä¸ªElementsï¼Œå¦‚æœæ—¢æ²¡æœ‰æ˜¾ç¤ºæŒ‡æ˜ï¼Œåˆ™ä¼šå–ç›¸åº”çš„é»˜è®¤å€¼ï¼š ContinuationInterceptorï¼šé»˜è®¤å€¼ä¸ºDispatchers.Defaultï¼ŒåŸºäºçº¿ç¨‹æ± å®ç°ï¼Œçº¿ç¨‹æ•°ç›®=CPUæ•°ç›®ï¼Œä¸”æœ€å°‘ä¸º2æ”¯ Jobï¼šé»˜è®¤å€¼ä¸ºnullï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåç¨‹æ˜¯å­¤å„¿ï¼ˆæ²¡æœ‰çˆ¶åç¨‹ï¼Œæ— æ³•è¢«çˆ¶åç¨‹å–æ¶ˆï¼Œä¾‹å¦‚GlobalScopeï¼‰ CoroutineExceptionHandlerï¼šå®ƒçš„æƒ…å†µæ¯”è¾ƒå¤æ‚ï¼Œå½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œè‹¥æ²¡æœ‰æŒ‡å®šCoroutineExceptionHandlerï¼Œä¼šä½¿ç”¨å…¨å±€çš„å¼‚å¸¸å¤„ç†å™¨ï¼Œåœ¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ä¸­è°ƒç”¨å½“å‰çº¿ç¨‹çš„uncaughtExceptionHandlerã€‚ä»£ç å¦‚ä¸‹ï¼š 12345678910// CoroutineExceptionHandlerImpl.ktinternal actual fun handleCoroutineExceptionImpl(context: CoroutineContext, exception: Throwable) &#123; // use additional extension handlers for (handler in handlers) &#123; handler.handleException(context, exception) &#125; // use thread's handler val currentThread = Thread.currentThread() currentThread.uncaughtExceptionHandler.uncaughtException(currentThread, exception)&#125; Nameï¼šé»˜è®¤ä¸ºâ€œcoroutineâ€ å¯¹äºä¸Šè¿°é»˜è®¤å€¼ï¼Œç”¨ä»£ç å®ç°èµ·æ¥ä¹Ÿå¹¶ä¸å¤æ‚ï¼š 123456789101112131415161718192021val defaultExceptionHandler = CoroutineExceptionHandler &#123; ctx, t -&gt; ServiceLoader.load( serviceClass, serviceClass.classLoader ).forEach&#123; it.handleException(ctx, t) &#125; Thread.currentThread().let &#123; it.uncaughtExceptionHandler.uncaughtException(it, exception) &#125;&#125;class CoroutineContext( val continuationInterceptor: ContinuationInterceptor = Dispatchers.Default, val parentJob: Job? = null, val coroutineExceptionHandler: CoroutineExceptionHandler = defaultExceptionHandler, val name: CoroutineName = CoroutineName(\"coroutine\")) ç”¨ä¾‹æµ…æä¸Šè¿°4ä¸ªElementsä¸­ï¼Œæœ€é‡è¦çš„æ˜¯Dispatcherå’ŒJobä¸¤ä¸ªï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€äº›ä¾‹å­ã€‚ Global Scope Context123GlobalScope.launch &#123; /* ... */&#125; å…¨å±€Scopeä½¿ç”¨å…¨é»˜è®¤çš„4ä¸ªElementsï¼Œæ„å‘³ç€å®ƒä½¿ç”¨Dispatchers.Defaultå’Œä¸ºç©ºçš„Jobï¼ˆæ— æ³•é€šè¿‡çˆ¶Jobå–æ¶ˆï¼‰ã€‚ Fully Qualified Context12345678launch( Dispatchers.Main + Job() + CoroutineName(\"HelloCoroutine\") + CoroutineExceptionHandler &#123; _, _ -&gt; /* ... */ &#125;) &#123; /* ... */&#125; å…¨é™å®šContextï¼Œå³å…¨éƒ¨æ˜¾å¼æŒ‡å®šå…·ä½“å€¼çš„Elementsã€‚ä¸è®ºä½ ç”¨å“ªä¸€ä¸ªCoroutineScopeæ„å»ºè¯¥åç¨‹ï¼Œå®ƒéƒ½å…·æœ‰ä¸€è‡´çš„è¡¨ç°ï¼Œä¸ä¼šå—åˆ°CoroutineScoipeä»»ä½•å½±å“ã€‚ CoroutineScope Contextè¿™é‡Œæˆ‘ä»¬åŸºäºActivityç”Ÿå‘½å‘¨æœŸå®ç°ä¸€ä¸ªCoroutineScopeï¼š 123456789101112131415161718abstract class ScopedAppActivity: AppCompatActivity(), CoroutineScope&#123; protected lateinit var job: Job override val coroutineContext: CoroutineContext get() = job + Dispatchers.Main // æ³¨æ„è¿™é‡Œä½¿ç”¨+æ‹¼æ¥CoroutineContext override fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) job = Job() &#125; override fun onDestroy() &#123; super.onDestroy() job.cancel() &#125;&#125; Dispatcherï¼šä½¿ç”¨Dispatcher.Mainï¼Œä»¥åœ¨UIçº¿ç¨‹è¿›è¡Œç»˜åˆ¶ Jobï¼šåœ¨onCreateæ—¶æ„å»ºï¼Œåœ¨onDestroyæ—¶é”€æ¯ï¼Œæ‰€æœ‰åŸºäºè¯¥CoroutineContextåˆ›å»ºçš„åç¨‹ï¼Œéƒ½ä¼šåœ¨Activityé”€æ¯æ—¶å–æ¶ˆï¼Œä»è€Œé¿å…Activityæ³„éœ²çš„é—®é¢˜ ä¸´æ—¶æŒ‡å®šå‚æ•°å‰é¢æ•°æ¬¡æåˆ°è¿‡ï¼ŒCoroutineContextçš„å‚æ•°ä¸»è¦æœ‰ä¸¤ä¸ªæ¥æºï¼šä»scopeä¸­ç»§æ‰¿+å‚æ•°æŒ‡å®šã€‚æˆ‘ä»¬å¯ä»¥ç”¨withContextä¾¿æ·åœ°æŒ‡å®šæŸä¸ªå‚æ•°å¯åŠ¨å­åç¨‹ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³è¦åœ¨åç¨‹å†…éƒ¨æ‰§è¡Œä¸€ä¸ªæ— æ³•è¢«å–æ¶ˆçš„å­åç¨‹ï¼š 123withContext(NonCancellable) &#123; /* ... */&#125; è¯»å–åç¨‹ä¸Šä¸‹æ–‡å‚æ•°å¯ä»¥é€šè¿‡é¡¶çº§æŒ‚èµ·åªè¯»å±æ€§coroutineContextè·å–åç¨‹ä¸Šä¸‹æ–‡å‚æ•°ï¼Œå®ƒä½äº kotlin-stdlib / kotlin.coroutines / coroutineContextï¼š 1println(\"Running in $&#123;coroutineContext[CoroutineName]&#125;\") Nested Contextå†…åµŒä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯æŒ‡ï¼šåœ¨åç¨‹Aå†…éƒ¨æ„å»ºåç¨‹Bæ—¶ï¼ŒBä¼šè‡ªåŠ¨ç»§æ‰¿Açš„Dispatcherï¼Œå¦‚æœæ²¡æœ‰æ³¨æ„è¿™ä¸€ç‚¹ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿè¯¸å¦‚â€œä¸»çº¿ç¨‹æ‰§è¡Œè€—æ—¶æ“ä½œâ€çš„é”™è¯¯ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨asyncæ—¶åŠ å…¥Dispatcherå‚æ•°ï¼Œä»¥åˆ‡æ¢åˆ°å·¥ä½œçº¿ç¨‹ã€‚ 123456789101112131415// é”™è¯¯çš„åšæ³•ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­ç›´æ¥è°ƒç”¨asyncï¼Œè‹¥è€—æ—¶è¿‡é•¿åˆ™é˜»å¡UIGlobalScope.launch(Dispatchers.Main) &#123; val deferred = async &#123; /* ... */ &#125; /* ... */&#125;// æ­£ç¡®çš„åšæ³•ï¼Œåœ¨å·¥ä½œçº¿ç¨‹æ‰§è¡Œåç¨‹ä»»åŠ¡GlobalScope.launch(Dispatchers.Main) &#123; val deferred = async(Dispatchers.Default) &#123; /* ... */ &#125; /* ... */&#125; å°ç»“ åç¨‹ä¸Šä¸‹æ–‡ç¯å¢ƒå‚æ•°å¯ä»¥ç”¨åŠ å·+æ‹¼æ¥ï¼Œå·¦å€¼ä¼˜å…ˆ ä¸Šä¸‹æ–‡ç¯å¢ƒå¯ä»¥ç»§æ‰¿ ä¸Šä¸‹æ–‡ç¯å¢ƒå¯ä»¥å•ç‹¬åˆ¶å®šå‚æ•° å‚è€ƒæœ¬æ–‡çš„70%éƒ½ç¿»è¯‘æ€»ç»“è‡ªMediumä¸Šçš„è¿™ç¯‡æ–‡ç« ï¼Œå†™çš„éå¸¸æ£’ï¼Œå»ºè®®æœ‰è‹±æ–‡é˜…è¯»èƒ½åŠ›çš„åŒå­¦ç›´æ¥é˜…è¯»åŸæ–‡ Demystifying CoroutineContext","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"}]},{"title":"Kotlin åç¨‹åŸºç¡€è¯¾ 02.suspendå‡½æ•°","date":"2019-12-10T14:41:39.000Z","path":"2019/12/10/kotlin-coroutines-02/","text":"è¿™æ˜¯ã€ŠKotlin åç¨‹åŸºç¡€è¯¾ã€‹çš„ç¬¬2ç¯‡æ–‡ç« ã€‚ Everyone must choose one of two pains: The pain of discipline or the pain of regret. Choose WISELY. åœ¨ä¸Šç¯‡æ–‡ç« é‡Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•é€šè¿‡åç¨‹ç®€åŒ–è€—æ—¶æ“ä½œçš„å†™æ³•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå…³é”®å­—suspendï¼Œç”¨äºåœ¨å®šä¹‰å‡½æ•°æ—¶è¿›è¡Œå£°æ˜ã€‚æœ¬ç¯‡æ–‡ç« å°†å¯¹suspendè¿›è¡Œè¿›ä¸€æ­¥ä»‹ç»ï¼Œæ—¨åœ¨å­¦ä¼šå®ƒçš„å«ä¹‰å’Œç”¨æ³•ã€‚ suspendé™å®šè¯çš„å«ä¹‰suspendï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯ä¸­æ–­ï¼ŒæŒ‚èµ·ï¼Œè·Ÿpublicã€staticç­‰å…³é”®å­—ç›¸åŒï¼Œç”¨åœ¨å‡½æ•°å£°æ˜å‰ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªâ€œæŒ‚èµ·å‡½æ•°â€ã€‚ æŒ‚èµ·å‡½æ•°åªèƒ½åœ¨åç¨‹æˆ–å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ä¸­è¢«è°ƒç”¨ï¼Œå¦‚æœä½ åœ¨éåç¨‹ä¸­ä½¿ç”¨åˆ°äº†æŒ‚èµ·å‡½æ•°ï¼Œä¼šçœ‹åˆ°ç¼–è¯‘å™¨æœ‰å¦‚ä¸‹æŠ¥é”™ï¼š 1Error: Kotlin: Suspend functions are only allowed to be called from a coroutine or another suspend function å‰é¢ç”¨åˆ°çš„delayå°±æ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ã€‚suspendå…³é”®å­—è¡¨æ˜å‡½æ•°å†…éƒ¨è¿›è¡Œäº†è€—æ—¶æ“ä½œï¼Œå¯ä»¥æ˜¯è®¡ç®—å¯†é›†å‹çš„CPUä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œã€ç£ç›˜æ“ä½œå¯†é›†å‹çš„IOä»»åŠ¡ã€‚åŸºæœ¬ä¸Šå¯ä»¥çœ‹åšâ€œä½†å‡¡ç”¨callbackå®ç°çš„å›è°ƒå‡½æ•°ï¼Œéƒ½èƒ½ç”¨ä¸€ä¸ªç›¸å¯¹åº”çš„æŒ‚èµ·å‡½æ•°å®ç°â€ã€‚ æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨suspendå…³é”®å­—çš„æ—¶æœºå°±éå¸¸æ˜ç¡®äº†ï¼šå½“å‡½æ•°è¦è¿›è¡Œè€—æ—¶æ“ä½œæ—¶ï¼Œå°±æŠŠå®ƒå£°æ˜ä¸ºsuspendã€‚ suspendåšäº†ä»€ä¹ˆäº‹æ–¹ä¾¿èµ·è§ï¼Œåç»­ç”¨â€œæŒ‚èµ·â€æŒ‡ä»£â€œsuspendâ€ã€‚ ä½œä¸ºåŠç‰©åŠ¨è¯ï¼Œâ€œæŒ‚èµ·â€åº”å½“æœ‰ä¸€ä¸ªå®¾è¯­ï¼Œè¿™é‡Œâ€œæŒ‚èµ·â€çš„å¯¹è±¡æ˜¯åç¨‹ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹æŒ‚èµ·çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆä¸€æ¢ç©¶ç«Ÿï¼Œè®°ä½ä¸‹é¢è¿™å¥è¯ï¼š â€œæŒ‚èµ·â€æ˜¯æŒ‡åç¨‹ä»å®ƒå½“å‰çº¿ç¨‹è„±ç¦»ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è¿è¡Œã€‚å½“çº¿ç¨‹è¿è¡Œåˆ°suspendå‡½æ•°æ—¶ï¼Œä¼šæš‚æ—¶æŒ‚èµ·è¿™ä¸ªå‡½æ•°åŠåç»­ä»£ç çš„æ‰§è¡Œã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªè§’è‰²ï¼šçº¿ç¨‹å’Œåç¨‹ã€‚ çº¿ç¨‹çš„è¡Œä¸ºå½“çº¿ç¨‹è¿è¡Œåˆ°â€œæŒ‚èµ·â€ä»£ç å—æ—¶ï¼Œä¼šè·³å‡ºå½“å‰çš„ä»£ç å—ï¼Œä¸å†æ‰§è¡Œåç»­ä»£ç ã€‚æ¥ä¸‹æ¥çº¿ç¨‹ä¼šåšä»€ä¹ˆå‘¢ï¼Ÿ å¦‚æœå®ƒæ˜¯ä¸€ä¸ªåå°çº¿ç¨‹ï¼š è¦ä¹ˆæ— äº‹å¯åšï¼Œè¢«ç³»ç»Ÿå›æ”¶ è¦ä¹ˆè¢«è°ƒåº¦æ‰§è¡Œåˆ«çš„åå°ä»»åŠ¡ è·ŸJavaçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹åœ¨å·¥ä½œç»“æŸä¹‹åçš„è¡¨ç°å®Œå…¨ä¸€æ ·ï¼šå›æ”¶æˆ–è€…å†åˆ©ç”¨ã€‚ å¦‚æœå®ƒæ˜¯Androidä¸»çº¿ç¨‹ï¼š ç»§ç»­UIåˆ·æ–°å·¥ä½œ åç¨‹çš„è¡Œä¸ºä¸Šé¢è®²åˆ°çº¿ç¨‹è¿è¡Œåˆ°æŒ‚èµ·ä»£ç å—æ—¶ï¼Œä¼šæš‚æ—¶é€€å‡ºå½“å‰ä»£ç å—çš„æ‰§è¡Œã€‚é‚£ä¹ˆï¼Œå‰©ä½™çš„åç¨‹ä»£ç åœ¨å“ªé‡Œå¾—åˆ°æ‰§è¡Œå‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨æŒ‚èµ·å‡½æ•°çš„å®ç°ä¸­â€”â€”å³æˆ‘ä»¬ä¸ºæŒ‚èµ·å‡½æ•°æŒ‡å®šçš„çº¿ç¨‹ã€‚ withContextå‡½æ•°å¯ä»¥æŒ‡å®šåç¨‹ä»£ç çš„è¿è¡Œçº¿ç¨‹ï¼Œå¸¸è§çš„Dispatcheræœ‰Mainã€IOã€Defaultã€‚åç¨‹ä»æŒ‚èµ·çš„åœ°æ–¹å¼€å§‹ï¼Œåˆ‡æ¢åˆ°è¿™äº›çº¿ç¨‹ä¹‹ä¸­çš„ä¸€ä¸ªç»§ç»­è¿è¡Œï¼Œå½“è¿è¡Œå®Œæ¯•æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢å›åŸçº¿ç¨‹æ‰§è¡Œã€‚ åœ¨åç¨‹çš„æºç é‡Œï¼Œâ€œè‡ªåŠ¨åˆ‡æ¢å›æ¥â€æ˜¯é€šè¿‡resumeå®ç°çš„ã€‚æŒ‚èµ·å‡½æ•°ä¹‹æ‰€ä»¥å¿…é¡»åœ¨åç¨‹ä¸­è°ƒç”¨ï¼Œå°±æ˜¯å› ä¸ºåç¨‹æ¡†æ¶ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†è¿™ä¸ªè‡ªåŠ¨åˆ‡æ¢çš„è¿‡ç¨‹ã€‚ suspend ä¸ä¼šçœŸæ­£æ“ä½œæŒ‚èµ·å¹¶ä¸æ˜¯å£°æ˜äº†suspendåï¼Œçº¿ç¨‹è¿è¡Œåˆ°è¯¥ä½ç½®ï¼Œå°±è‡ªåŠ¨è¿›è¡ŒæŒ‚èµ·åˆ‡æ¢çš„ï¼Œå‚ç…§ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼ŒæŒ‚èµ·å‡½æ•°ä»ç„¶è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰åˆ‡æ¢çº¿ç¨‹ï¼Ÿå› ä¸ºç¼–è¯‘å™¨æ ¹æœ¬ä¸çŸ¥é“è¦å¾€å“ªé‡Œåˆ‡ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ç¼–ç æ—¶æ˜ç¡®å‘Šè¯‰å®ƒï¼Œè¿™ä¸ªæŒ‚èµ·å‡½æ•°è¦åˆ‡æ¢åˆ°å“ªä¸€ä¸ªçº¿ç¨‹ç»§ç»­è¿è¡Œã€‚æˆ‘ä»¬å¯ä»¥ç”¨withContextæŒ‡æ˜å¾…åˆ‡æ¢çš„çº¿ç¨‹ã€‚åœ¨å®ç°ä¸€ä¸ªæŒ‚èµ·å‡½æ•°æ—¶ï¼Œä»…ä»…åŠ ä¸Šsuspendå…³é”®å­—æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»åœ¨å‡½æ•°å†…éƒ¨ç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨åç¨‹æ¡†æ¶è‡ªå¸¦çš„suspendå‡½æ•°ã€‚ suspendåªæ˜¯ä¸€ä¸ªæé†’ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæ•ˆæœï¼Œå°±æ˜¯é™åˆ¶å‡½æ•°åªèƒ½åœ¨åç¨‹é‡Œè°ƒç”¨ï¼Œå¦‚æœåœ¨éåç¨‹é‡Œä½¿ç”¨äº†suspendå‡½æ•°ï¼Œåˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚ 1234567891011// ä»ç„¶è¿è¡Œåœ¨Mainsuspend fun suspendingPrint() &#123; println(\"Thread: $&#123;Thread.currentThread().name&#125;\")&#125;I/System.out: Thread: main// è¿è¡Œåœ¨IOsuspend fun suspendingPrint() = withContext(Dispatchers.IO) &#123; println(\"Thread: $&#123;Thread.currentThread().name&#125;\")&#125; å¦‚ä½•å†™ä¸€ä¸ªsuspendå‡½æ•°æœ€ç®€å•çš„æ–¹å¼æ˜¯ï¼š å£°æ˜å‡½æ•°ä¸ºsuspend ä½¿ç”¨withContextæŒ‡å®šç›®æ ‡çº¿ç¨‹ï¼Œæˆ–è€…åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨å¦ä¸€ä¸ªsuspendå‡½æ•° å°ç»“æœ¬æ–‡ä»‹ç»äº†åç¨‹ä¸­æœ€å¸¸è§çš„å…³é”®å­—suspendçš„å«ä¹‰å’Œç”¨æ³•ï¼Œé˜…è¯»å®Œæœ¬æ–‡åä½ åº”å½“æŒæ¡ï¼š æŒ‚èµ·å‡½æ•°è¿è¡Œæ—¶çš„è¡¨ç° ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨æŒ‚èµ·å‡½æ•° å¦‚ä½•å†™ä¸€ä¸ªç®€å•çš„æŒ‚èµ·å‡½æ•° å‚è€ƒ æ˜é‡‘-æ‰”ç‰©çº¿","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"}]},{"title":"Kotlin åç¨‹åŸºç¡€è¯¾ 01.åç¨‹çš„åŸºæœ¬æ¦‚å¿µä¸ç”¨æ³•","date":"2019-11-17T00:57:40.000Z","path":"2019/11/17/kotlin-coroutines-01/","text":"è¿™æ˜¯ã€ŠKotlin åç¨‹åŸºç¡€è¯¾ã€‹çš„ç¬¬1ç¯‡æ–‡ç« ã€‚ æ­£å› ä¸ºå¥¹è§‰å¾—ä¸€åˆ‡éƒ½æ— æ‰€è°“ï¼Œæ‰€ä»¥ç”Ÿæ´»ç»™å¥¹ä»€ä¹ˆï¼Œå¥¹ä¾¿æ¥å—ä»€ä¹ˆã€‚å°‘å¹´æ—¶ä»£ï¼Œå¥¹è§‰å¾—é€‰æ‹©ä¸ºæ—¶è¿‡æ—©ï¼Œè€Œç°åœ¨å·²æ˜¯é’å¹´ï¼Œå¥¹åˆè§‰å¾—æ”¹å˜ä¸ºæ—¶è¿‡æ™šã€‚ ç³»åˆ—åŸºç¡€è¯¾å‰è¨€å¯¹äºKotlinå­¦ä¹ è€Œè¨€ï¼Œè¦æƒ³ä»â€œå…¥é—¨â€èµ°åˆ°â€œç²¾é€šâ€ï¼Œåç¨‹ï¼ˆCoroutinesï¼‰æ˜¯å¿…é¡»è¿ˆè¿‡å»çš„ä¸€é“åã€‚æ¥ä¸‹æ¥ä¸€å‘¨æ—¶é—´ï¼Œæˆ‘ä¼šåœ¨ä¹‹å‰é›¶æ•£å­¦ä¹ çš„åŸºç¡€ä¸Šï¼Œæ€»ç»“æˆä¸€ç³»åˆ—åŸºç¡€è¯¾æ–‡ç« ï¼Œä½œä¸ºå¯¹åç¨‹çš„é˜¶æ®µæ€§å­¦ä¹ å°ç»“ã€‚æ–‡ç« ç›®å½•å¦‚ä¸‹ï¼š 01.åç¨‹çš„åŸºæœ¬æ¦‚å¿µä¸ç”¨æ³• 02.éé˜»å¡å¼æŒ‚èµ·ï¼ˆsuspendï¼‰å‡½æ•° 03.ç†è§£åç¨‹çš„åŸŸï¼ˆScopeï¼‰å’Œè°ƒåº¦å™¨ï¼ˆDispatcherï¼‰ 04.ç”¨AAC&amp;åç¨‹ä¼˜åŒ–Androidæ¶æ„è®¾è®¡ ä»€ä¹ˆæ˜¯åç¨‹ä½†å‡¡å­¦ä¸€é—¨æ–°çŸ¥è¯†ï¼Œæ€»æ˜¯ç¦»ä¸å¼€5w1hã€‚è¯´èµ·â€œåç¨‹â€ï¼Œå¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯2å·çº¿åŒ—æ–°æ³¾é‚£å®¶åšæ—…æ¸¸çš„äº’è”ç½‘å…¬å¸ï¼Œä¸è¿‡ï¼Œæ­¤â€œåç¨‹â€éå½¼â€œæºç¨‹â€ï¼Œåç¨‹ï¼ˆCoroutinesï¼‰å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œå®ƒçš„å¹´çºªè¦æ¯”Kotlinè¯­è¨€å¤§å¾—å¤šã€‚â€œåç¨‹ Coroutinesâ€æºè‡ª Simula å’Œ Modula-2 è¯­è¨€ï¼Œè¿™ä¸ªæœ¯è¯­æ—©åœ¨ 1958 å¹´å°±è¢« Melvin Edward Conway å‘æ˜å¹¶ç”¨äºæ„å»ºæ±‡ç¼–ç¨‹åºï¼Œè¯´æ˜åç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå¹¶ä¸å±€é™äºç‰¹å®šçš„è¯­è¨€ã€‚ç›®å‰å¾ˆå¤šç°ä»£è¯­è¨€éƒ½æœ‰åç¨‹çš„å®ç°ï¼Œæ¯”å¦‚Goã€JavaScriptã€C#ç­‰ã€‚ åç¨‹ä½œä¸ºä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç›®çš„æ˜¯ç®€åŒ–å¹¶è¡Œä»£ç ç¼–å†™ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä»¥åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥é€»è¾‘ã€‚å¯¹äºKotlinè€Œè¨€ï¼Œâ€œåç¨‹â€ä¸€è¯æ˜¯æŒ‡å®ç°äº†åç¨‹æ€æƒ³çš„ä¸€ç³»åˆ—APIçš„æ€»ç§°ã€‚Kotlinåç¨‹çš„åº•å±‚å®ç°æ˜¯çº¿ç¨‹ã€‚ æ²¡æœ‰åç¨‹çš„æ—¥å­é‡Œç”±äºAndroidæ˜¯å•ä¸€UIçº¿ç¨‹çš„æ¡†æ¶ï¼ŒåŠ¿å¿…è¦è¿›è¡Œå¾ˆå¤šUIçº¿ç¨‹ä»¥å¤–çš„è€—æ—¶æ“ä½œï¼Œåœ¨åç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨è¿™äº›æŠ€æœ¯æ¥å®ç°è¯¸å¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“è¯»å†™ç­‰åŠŸèƒ½ï¼š AsyncTaskï¼šæ˜¯AndroidåŸç”Ÿçš„å¼‚æ­¥ä»»åŠ¡å†™æ³•ï¼Œå†™è¿‡çš„äººå°±çŸ¥é“å®ƒæœ‰å¤šéš¾ç”¨ï¼Œä¸šåŠ¡é€»è¾‘è¢«åˆ†æ•£åœ¨å‰ä¸­åä¸‰ä¸ªæ–¹æ³•é‡Œï¼Œå†—é•¿çš„boilerplateä»£ç ã€‚æ›´æœ‰ç”šè€…ï¼Œä¸€æ—¦å‘ç”ŸåµŒå¥—ï¼Œå…‰æ˜¯ä¸€å±‚å±‚å›è°ƒå°±èƒ½æŠŠäººæç–¯æ‰ã€‚ Threadï¼šç›´æ¥å¼€çº¿ç¨‹å¹¶ä¸æ˜¯ä¸€ç§å¥½çš„è®¾è®¡ï¼Œåªæœ‰æ–°æ‰‹æ‰è¿™ä¹ˆå¹²ã€‚ ThreadPool or ExecutorServiceï¼šè¿™æ¯”new Threadå¥½ä¸€äº›ï¼Œä½†åŒæ ·è¦å¤„ç†UIã€å·¥ä½œçº¿ç¨‹åˆ‡æ¢çš„é—®é¢˜ï¼Œä»¥åŠæ— æ³•é¿å…çš„å›è°ƒã€‚ Handlerï¼šä¸€ä¸ªå·¥ä½œçº¿ç¨‹çš„Handlerç”¨æ¥å¤„ç†è€—æ—¶ä»»åŠ¡ï¼Œå¤„ç†å®Œæˆåä¸¢ç»™ä¸»çº¿ç¨‹Handlerï¼Œç®€å•ã€ç›´æ¥ã€æœ´å®æ— åã€‚ è¿™æ—¶åç¨‹ï¼ˆCoroutinesï¼‰æ¥äº†ï¼Œä¸ºæˆ‘ä»¬æ¨ç¿»å›è°ƒåœ°ç‹±ã€æ ·æ¿ä»£ç ã€å†…å­˜æ³„æ¼ã€çº¿ç¨‹åˆ‡æ¢å‡ åº§å¤§å±±ï¼ŒAndroidå¼€å‘è€…ç»ˆäºç¿»èº«å†œå¥´æŠŠæ­Œå”±ï¼Œæ•¢å«æ—¥æœˆæ¢æ–°å¤©ã€‚ ç¬¬ä¸€ä¸ªåç¨‹Demoç”¨Thread.sleepæ¨¡æ‹Ÿè€—æ—¶æ“ä½œåœ¨æœ¬æ–‡æˆ‘ä»¬æš‚ä¸”ä¸è°ˆAndroidç¯å¢ƒï¼Œåœ¨æ›´é€šç”¨çš„ç¯å¢ƒä¸‹å±•ç°åç¨‹çš„ç”¨æ³•ã€‚é¦–å…ˆæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶æ“ä½œä¸éè€—æ—¶æ“ä½œæ··åˆçš„åœºæ™¯ï¼Œçœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼Œå®ƒåœ¨mainå‡½æ•°é‡Œä¾æ¬¡æ‰“å°one two threeã€‚ 12345fun main(args: Array&lt;String&gt;) &#123; println(\"one\") println(\"two\") println(\"three\")&#125; åŒæ—¶æœ‰å¦ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šè€—æ—¶3såï¼Œæ‰“å°å‡ºå‚æ•°åœ¨æ§åˆ¶å°ã€‚æˆ‘ä»¬ç”¨ç›´ç™½çš„Thread.sleepæ¥è¿›è¡Œå»¶æ—¶æ¨¡æ‹Ÿã€‚ 1234fun printDelayed(msg: String) &#123; Thread.sleep(3000) println(msg)&#125; ç„¶åå°†ä¸»ç¨‹åºçš„print(two)æ”¹ä¸ºè€—æ—¶ä»»åŠ¡ã€‚ 12345fun main(args: Array&lt;String&gt;) &#123; println(\"one\") printDelayed(\"two\") println(\"three\")&#125; è¿è¡Œåï¼Œè¾“å‡ºå¦‚ä¸‹ï¼Œéå¸¸ç¬¦åˆé¢„æœŸã€‚ 1234onethree// è¿™é‡Œç­‰å¾…3stwo ç”¨delayæ¨¡æ‹Ÿè€—æ—¶æ“ä½œKotlinçš„åç¨‹åº“æä¾›äº†å¦ä¸€ç§å»¶æ—¶çš„APIï¼Œdelayï¼Œæˆ‘ä»¬æŠŠåŸæ¥çš„Thread.sleepæ›¿æ¢ä¸ºdelayï¼š 1234fun printDelayed(msg: String) &#123; delay(3000L) println(msg)&#125; æ­¤æ—¶Android Studioä¼šåœ¨delayå¤„æç¤ºé”™è¯¯ï¼šsuspend function delay should be called only from a coroutine or another suspend functionã€‚ç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œdelayæ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œå®ƒåªèƒ½åœ¨åç¨‹ä¸­ã€æˆ–è€…å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°é‡Œé¢è¢«è°ƒç”¨â€ã€‚æˆ‘ä»¬æŠŠç¨‹åºæ•´ä½“æ”¹å†™ä¸€ä¸‹ã€‚ 1234567891011121314suspend fun printDelayed(msg: String) &#123; delay(3000L) println(msg)&#125;fun print123Blocking() = runBlocking &#123; println(\"one\") printDelayed(\"two\") println(\"three\")&#125;fun main(args: Array&lt;String&gt;) &#123; print123Blocking()&#125; è¿è¡Œåå‘ç°ç¨‹åºçš„è¾“å‡ºä¸ºï¼š 1234one// ç­‰å¾…3stwothree ä¸ºä»€ä¹ˆä¸æ˜¯132è€Œæ˜¯123å‘¢ï¼Œè¦ä»runBlockingçš„å®šä¹‰è¯´èµ·ã€‚å®ƒä¼šâ€œæ–°èµ·ä¸€ä¸ªåç¨‹è¿è¡Œåç»­ä»£ç ï¼Œå¹¶ä¸”åœ¨è¯¥åç¨‹çš„è¿è¡Œè¿‡ç¨‹ä¸­é˜»å¡åŸçº¿ç¨‹ï¼ˆåœ¨demoä¸­æ˜¯ä¸»çº¿ç¨‹ï¼‰ï¼Œç›´è‡³åç¨‹è¿è¡Œç»“æŸâ€ã€‚è€Œåœ¨åç¨‹è¿è¡Œæ—¶æ˜¯æŒ‰ç…§ä»£ç é¡ºåºé€è¡Œè¿è¡Œçš„ã€‚æ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯123è€Œé132ã€‚ ä¸ºrunBlockingæŒ‡å®šè¿è¡Œçº¿ç¨‹æˆ‘ä»¬åœ¨print123blockingæ–¹æ³•é‡Œæ‰“å°å‡ºå½“å‰çº¿ç¨‹åã€‚ 12345fun print123Blocking() = runBlocking &#123; println(\"one - in thread: $&#123;Thread.currentThread().name&#125;\") printDelayed(\"two - in thread: $&#123;Thread.currentThread().name&#125;\") println(\"three - in thread: $&#123;Thread.currentThread().name&#125;\")&#125; æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š 123one - in thread: main @coroutine#1two - in thread: main @coroutine#1three - in thread: main @coroutine#1 å¯è§è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨å½“å‰ï¼ˆmainï¼‰çº¿ç¨‹é‡Œè¿è¡Œçš„ï¼Œå¹¶ä¸”åŒå±äº@coroutine#1ã€‚ æˆ‘ä»¬å¯ä»¥ä¸ºrunBlockingæŒ‡å®šè¿è¡Œçš„çº¿ç¨‹ï¼Œåœ¨åç¨‹çš„è¯­è¨€é‡Œï¼Œä½¿ç”¨Dispatcheræ¥è¡¨æ˜è¿™ä¸€æ¦‚å¿µã€‚æˆ‘ä»¬æ”¹å†™ä¸€ä¸‹print123Blockingæ–¹æ³•ï¼Œä½¿ç”¨Dispatcher.Defaultæ‰“å°1å’Œ2ã€‚æ ·ä¾‹ä»£ç ä¸ç³»ç»Ÿè¾“å‡ºå¦‚ä¸‹ï¼Œå¯è§æˆ‘ä»¬ä¸ºå…¶æŒ‡å®šäº†Dispatcherçš„ä»£ç æ®µè¿è¡Œåœ¨å¦ä¸€ä¸ªçº¿ç¨‹é‡Œï¼Œä¸”æ‰“å°é¡ºåºä»ç„¶ä¸º123ï¼Œè¿™å°±æ˜¯Blockingçš„å‰å®³ä¹‹å¤„ã€‚ 1234567fun print123Blocking() &#123; runBlocking(Dispatchers.Default) &#123; println(\"one - in thread: $&#123;Thread.currentThread().name&#125;\") printDelayed(\"two - in thread: $&#123;Thread.currentThread().name&#125;\") &#125; println(\"three - in thread: $&#123;Thread.currentThread().name&#125;\")&#125; æ§åˆ¶å°è¾“å‡ºï¼š 1234one - in thread: DefaultDispatcher-worker-1 @coroutine#1two - in thread: DefaultDispatcher-worker-1 @coroutine#1// æ­¤å¤„ç­‰å¾…3sthree - in thread: main å¦‚ä½•åˆ©ç”¨åç¨‹æ‰“å°å‡º132å…¨å±€åå°çº¿ç¨‹ï¼šGlobalScope.launchå¯ä»¥åœ¨blockingåŸŸä¸­ä½¿ç”¨GlobalScope.launch{ ... }æ¥æŒ‡å®šåå°çº¿ç¨‹è¿è¡Œä»»åŠ¡ï¼Œæˆ‘ä»¬åŸºäºæ­¤å°†åŸæœ‰ä»£ç æ”¹é€ ä¸€ä¸‹ã€‚ 1234567fun print123Blocking() = runBlocking &#123; GlobalScope.launch &#123; println(\"one - in thread: $&#123;Thread.currentThread().name&#125;\") printDelayed(\"two - in thread: $&#123;Thread.currentThread().name&#125;\") &#125; println(\"three - in thread: $&#123;Thread.currentThread().name&#125;\")&#125; è¿™æ®µä»£ç çš„è¾“å‡ºæ˜¯ä¸å¯çŸ¥çš„ï¼Œæœ‰å¯èƒ½æ˜¯ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼Œåªæ‰“å°3æˆ–è€…æ‰“å°31ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨åå°å…¨å±€çº¿ç¨‹ä¸­å¯åŠ¨çš„â€œæ‰“å°12ä»»åŠ¡â€ï¼Œåå°çº¿ç¨‹æ˜¯ä¸ä¼šé˜»æ­¢ä¸»çº¿ç¨‹è¿è¡Œç»“æŸçš„ï¼Œæ‰€ä»¥2æ˜¯è‚¯å®šæ‰“ä¸å‡ºæ¥ï¼Œè€Œ1èƒ½å¦æ‰“å°å‡ºæ¥å°±çœ‹è¿è¡Œæ—¶çº¿ç¨‹è°ƒåº¦æƒ…å†µäº†ã€‚ 12345// case 1three - in thread: main @coroutine#1one - in thread: DefaultDispatcher-worker-1 @coroutine#2// case 2three - in thread: main @coroutine#1 ç­‰å¾…ä»»åŠ¡å®Œæˆæˆ‘ä»¬å¯ä»¥ç®€å•ç²—æš´åœ°ä½¿ç”¨delayæ¥ç­‰å¾…åå°ä»»åŠ¡å®Œæˆã€‚ 12345678fun print123Blocking() = runBlocking &#123; GlobalScope.launch &#123; println(\"one - in thread: $&#123;Thread.currentThread().name&#125;\") printDelayed(\"two - in thread: $&#123;Thread.currentThread().name&#125;\") &#125; println(\"three - in thread: $&#123;Thread.currentThread().name&#125;\") delay(4000L) // å› ä¸ºæˆ‘ä»¬çŸ¥é“printDelayedä¼šå»¶è¿Ÿ3ç§’ï¼Œæ•…è¿™é‡Œç­‰å¾…4ç§’&#125; æ§åˆ¶å°è¾“å‡ºä¸ºï¼š 123three - in thread: main @coroutine#1one - in thread: DefaultDispatcher-worker-1 @coroutine#2two - in thread: DefaultDispatcher-worker-1 @coroutine#2 ä½†æ˜¯è¿™ç§å¤„ç†æ–¹æ³•éå¸¸ä¸‘é™‹ï¼Œè€Œä¸”è¿™ä¸ªdelayçš„æ—¶é•¿å¾ˆéš¾è®¾ç½®ï¼Œè®¾ç½®é•¿äº†å§ï¼Œä¼šå¯¼è‡´æ— ç”¨çš„ç­‰å¾…æµªè´¹æ—¶é—´ï¼›è®¾ç½®çŸ­äº†å§ï¼Œæœ‰å¯èƒ½åœ¨åå°çº¿ç¨‹è¾“å‡ºä¹‹å‰å°±ç»“æŸä»»åŠ¡ï¼Œæœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„å†™æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œjob.join()ä¸ºæˆ‘ä»¬æä¾›äº†ç­‰å¾…ä»»åŠ¡å®Œæˆçš„åŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ 12345678fun print123Blocking() = runBlocking &#123; val job = GlobalScope.launch &#123; println(\"one - in thread: $&#123;Thread.currentThread().name&#125;\") printDelayed(\"two - in thread: $&#123;Thread.currentThread().name&#125;\") &#125; println(\"three - in thread: $&#123;Thread.currentThread().name&#125;\") job.join()&#125; è‡ªå®šä¹‰DispatcherDispatcherä¸ºåç¨‹çš„è¿è¡ŒæŒ‡å®šäº†çº¿ç¨‹ï¼Œå¸¸è§Dispatcherså¦‚ä¸‹ï¼š Dispatcher.IOï¼šè¿›è¡ŒIOå¯†é›†å‹æ“ä½œï¼Œå¦‚æ•°æ®åº“è¯»å†™ã€æ–‡ä»¶è¯»å†™ã€ç½‘ç»œäº¤äº’ Dispatcher.Defaultï¼šè¿›è¡ŒCPUå¯†é›†å‹æ“ä½œï¼Œå¦‚åˆ—è¡¨æ’åºã€JSONè§£æã€DiffUtils Dispatcher.Mainï¼šä»…å­˜åœ¨äºAndroidæ¡†æ¶ï¼Œè°ƒç”¨suspendæ–¹æ³•ã€è¿›è¡ŒUIæ“ä½œã€æ›´æ–°LiveData çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½å·²ç»ç†è§£äº†ï¼ŒDispatcherå…¶å®å°±æ˜¯çº¿ç¨‹çš„å¦ä¸€ç§è¡¨ç°å½¢å¼ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªDispatcherï¼š 123456789fun print123Blocking() = runBlocking &#123; println(\"one - in thread: $&#123;Thread.currentThread().name&#125;\") val customDispatcher = Executors.newFixedThreadPool(2).asCoroutineDispatcher() launch(customDispatcher) &#123; printDelayed(\"two - in thread: $&#123;Thread.currentThread().name&#125;\") &#125; println(\"three - in thread: $&#123;Thread.currentThread().name&#125;\") (customDispatcher.executor as ExecutorService).shutdown() // ï¼ä¸»åŠ¨åœæ­¢ï¼Œå¦åˆ™çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œä¸‹å»&#125; è¿è¡Œç»“æœå¦‚ä¸‹ï¼ˆåœ¨play.kotlinä¸Šé¢æ€»æ˜¯è¶…æ—¶ä¸çŸ¥é“ä¸ºå•¥ï¼‰ï¼Œæ„å‘³ç€æˆ‘ä»¬å®Œå…¨å¯ä»¥é«˜åº¦å®šåˆ¶Dispatcherçš„å®ç°ï¼Œè™½ç„¶å¤§éƒ¨åˆ†æ—¶é—´ä½¿ç”¨é»˜è®¤çš„Dispatcherå°±å·²è¶³å¤Ÿã€‚ 123one - from thread mainthree - from thread maintwo - from thread pool-1-thread-1 æœ‰è¿”å›å€¼çš„suspendå‡½æ•°æœ€åä¸€éƒ¨åˆ†å†…å®¹æ˜¯è·ŸAndroidå¼€å‘å¯†åˆ‡ç›¸å…³çš„ï¼Œå¤§éƒ¨åˆ†æ—¶é—´æˆ‘ä»¬éœ€è¦é€šè¿‡ç½‘ç»œã€æ•°æ®åº“è¿›è¡Œä¸€äº›è¯»å–æ•°æ®è€—æ—¶æ“ä½œï¼Œå‡½æ•°ä¼šæœ‰è¿”å›å€¼ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç½‘ç»œæ“ä½œï¼Œå®ƒè¯»å–ä¸€ä¸ªstartNumå‚æ•°ï¼Œç­‰å¾…1så»¶æ—¶åï¼Œè¿”å›startNum * 10ã€‚é€šè¿‡ async { ... }.await() å¯ä»¥è·å–è€—æ—¶å‡½æ•°çš„è¿”å›å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617// æ¨¡æ‹Ÿ1så»¶æ—¶ç½‘ç»œæ“ä½œsuspend fun calculateHardThings(startNum: Int): Int &#123; delay(1000) println(\"result: $&#123;result&#125;, in thread: $&#123;Thread.currentThread().name&#125;\") return startNum * 10&#125;// è°ƒç”¨å»¶æ—¶æ“ä½œï¼Œåˆ†åˆ«awaitï¼Œè€—æ—¶å…±3sfun exampleAsyncAwait() = runBlocking &#123; val startTime = System.currentTimeMillis() val deferred1 = async &#123; calculateHardThings(10) &#125;.await() val deferred2 = async &#123; calculateHardThings(20) &#125;.await() val deferred3 = async &#123; calculateHardThings(30) &#125;.await() val sum = deferred1 + deferred2 + deferred3 val endTime = System.currentTimeMillis() println(\"sum = $sum, time = $&#123;endTime - startTime&#125;\") // sum = 600, time = 3030&#125; å¹¶å‘è¿›è¡Œè€—æ—¶æ“ä½œå› ä¸ºæ˜¯3ä¸ªè€—æ—¶1sæ“ä½œå¹¶å‘ï¼Œæˆ‘ä»¬è‡ªç„¶è€Œç„¶å¸Œæœ›å®ƒä»¬åŒæ—¶è¿è¡Œï¼Œæ€»è€—æ—¶1sè€Œä¸æ˜¯3sï¼Œè¦å¦‚ä½•å®ç°å‘¢ï¼ŸæŠŠæ‰€æœ‰çš„await()è°ƒç”¨å†™å…¥åŒä¸€ä¸ªè¯­å¥ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–å®ƒä»¬ï¼Œä½¿å…¶åŒæ—¶è¿è¡Œã€‚ 12345678910// è°ƒç”¨å»¶æ—¶æ“ä½œï¼ŒåŒæ—¶awaitï¼Œè€—æ—¶å…±1sfun exampleAsyncAwait() = runBlocking &#123; val startTime = System.currentTimeMillis() val deferred1 = async &#123; calculateHardThings(10) &#125; val deferred2 = async &#123; calculateHardThings(20) &#125; val deferred3 = async &#123; calculateHardThings(30) &#125; val sum = deferred1.await() + deferred2.await() + deferred3.await() val endTime = System.currentTimeMillis() println(\"sum = $sum, time = $&#123;endTime - startTime&#125;\") // sum = 600, time = 1065&#125; ä½¿ç”¨withContextçš„ç®€åŒ–å†™æ³•async/await ä¼šè¿è¡Œåœ¨å½“å‰çº¿ç¨‹ä¸­ï¼Œå¯¹äºç½‘ç»œæ“ä½œä¸€èˆ¬çš„åšé¥­æ˜¯è®©å…¶åœ¨IOçº¿ç¨‹è¿è¡Œï¼Œå¯¹äºè®¡ç®—å¯†é›†å‹æ“ä½œåˆ™æ˜¯åœ¨CPUï¼ˆDefaultï¼‰çº¿ç¨‹è¿è¡Œï¼Œä½¿ç”¨withContextå¯ä»¥åŒæ—¶å®Œæˆasync/awaitçš„æ“ä½œï¼Œä½†ç¼ºç‚¹æ˜¯è¿™ä¸‰ä¸ªæ“ä½œåªèƒ½ç›¸ç»§è¿è¡Œï¼Œæ— æ³•åŒæ—¶è¿è¡Œã€‚ 12345678910// è°ƒç”¨å»¶æ—¶æ“ä½œfun exampleWithContext() = runBlocking &#123; val startTime = System.currentTimeMillis() val deferred1 = withContext(Dispatchers.Default) &#123; calculateHardThings(10) &#125; val deferred2 = withContext(Dispatchers.Default) &#123; calculateHardThings(20) &#125; val deferred3 = withContext(Dispatchers.Default) &#123; calculateHardThings(30) &#125; val sum = deferred1 + deferred2 + deferred3 val endTime = System.currentTimeMillis() println(\"sum = $sum, time = $&#123;endTime - startTime&#125;\") // sum = 600, time = 3029&#125; å°ç»“æœ¬æ–‡ä»‹ç»äº†åç¨‹çš„åŸºæœ¬ç”¨æ³•ï¼Œåœ¨é˜…è¯»å®Œæœ¬æ–‡åï¼Œä½ åº”å½“æŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š å£°æ˜è€—æ—¶å‡½æ•°ï¼Œä»¥åŠåœ¨åç¨‹ä»£ç å—é‡Œè°ƒç”¨è€—æ—¶å‡½æ•° åˆ‡æ¢è¿è¡Œç¯å¢ƒ ç­‰å¾…ä»»åŠ¡å®Œæˆ å¹¶è¡Œè¿›è¡Œè€—æ—¶æ“ä½œï¼Œè·å–æ“ä½œç»“æœ å‚è€ƒèµ„æ–™ https://www.youtube.com/watch?v=jYuK1qzFrJg","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"}]},{"title":"ã€è½¬ã€‘Android Studio Debug çš„ 9 ä¸ªå°æŠ€å·§","date":"2019-11-11T15:46:08.000Z","path":"2019/11/11/android-studio-debug-skills/","text":"Pain is inevitable. Suffering is optional. ç—›æ¥šéš¾ä»¥é¿å…ï¼Œè€Œç£¨éš¾å¯ä»¥é€‰æ‹©ã€‚ è¿™æ˜¯ä¸€ç¯‡è½¬è½½çš„æ–‡ç« ã€‚ ä½œè€…ï¼šwanbo é“¾æ¥ï¼šhttps://juejin.im/post/5dbf8036f265da4d4b5fe7c2 æ¥æºï¼šæ˜é‡‘ å‘¨æœ«çœ‹ Android Dev Summit â€˜19 çš„è§†é¢‘çš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€ç« å…³äº Android Studio Debug çš„ä»‹ç»ï¼Œæœ‰å¾ˆå¤šæ—¥å¸¸éå¸¸æœ‰ç”¨çš„å°æŠ€å·§ï¼Œå­¦ä¹ äº†è¿™äº›å°æŠ€å·§èƒ½å¾ˆå¤§ç¨‹åº¦çš„é™ä½æˆ‘ä»¬ Debug çš„æˆæœ¬ï¼Œå¿«é€Ÿå®šä½é—®é¢˜çš„æœ¬è´¨ï¼Œä»Šå¤©å°±å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹ Android Studio Debug çš„ 9 ä¸ªå°æŠ€å·§ã€‚ æ²¡å…³æ³¨çš„å°ä¼™ä¼´è®°å¾—å…³æ³¨è®¢é˜…ğŸ˜ï¼Œå¦‚æœè§‰å¾—è¿™äº›æ–‡ç« æœ‰ç‚¹æ„æ€ï¼Œè®°å¾—åˆ†äº«è½¬å‘è¯„è®ºç‚¹èµğŸ˜ï¼ Log è¿‡æ»¤å’ŒæŠ˜å æœ‰æ—¶å€™ Logcat ä¸­ log çš„ä¿¡æ¯å¾ˆé•¿ï¼ŒåŒæ—¶è¿˜æœ‰äº›æˆ‘ä»¬ä¸éœ€è¦çš„ä¿¡æ¯ä¹Ÿæ‰“å°å‡ºæ¥ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­çš„ã€æ—¶é—´+çº¿ç¨‹ IDã€‘ã€‚ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç‚¹å‡» Logcat çª—å£ä¸Šçš„ã€è®¾ç½®ã€‘æŒ‰é’®ï¼Œè®¾ç½®ä¸€æ¡ Log éœ€è¦æ˜¾ç¤ºå“ªäº›å…³é”®ä¿¡æ¯ï¼Œå¯è®¾ç½®çš„é¡¹æœ‰ï¼šæ—¶é—´ã€çº¿ç¨‹IDã€åŒ…åã€Tag nameã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ§åˆ¶æ˜¾ç¤ºï¼Œå¹¶ä¸”ä¸‹é¢è¿˜ä¼šæœ‰ä¸€æ¡ Sample Log æä¾›è®¾ç½®åçš„é¢„è§ˆæ•ˆæœï¼Œå°±åƒä¸‹å›¾ä¸­è¿™æ ·ã€‚ æ—¥å¸¸å¼€å‘çš„æ—¶å€™æˆ‘ä»¬è¿˜ä¼šé‡åˆ°å¦ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚æ ¹æ®å½“å‰ UI çš„æ¸²æŸ“æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦æ—¶åˆ»æ‰“å° UI çš„æŸä¸ªå€¼ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è§‚å¯Ÿ UIï¼ŒåŒæ—¶å½“åˆ°è¾¾æŸç§æ¡ä»¶çš„æ—¶å€™ï¼Œè¾“å…¥ä¸€æ¡æˆ‘ä»¬å¾—åˆ°çš„ã€ç»“æœ logã€‘ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è·å¾—æˆ‘ä»¬çš„ã€ç»“æœ logã€‘ä¹‹å‰ä¼šæœ‰å¾ˆå¤šæ²¡ç”¨ä½†æ˜¯åˆå¿…é¡»æ‰“å°çš„ logï¼Œè¿™æ ·å½“æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ã€ç»“æœ logã€‘çš„æ—¶å€™å°±ä¼šéå¸¸éº»çƒ¦ã€‚ å°±åƒä¸Šå›¾ä¸­è¿™æ ·ï¼Œæˆ‘ä»¬çš„ã€ç»“æœ logã€‘è¢«ä¸Šä¸‹ã€å¾ªç¯æ‰“å° logã€‘åŒ…å›´äº†ï¼Œå¾ˆéš¾ä¸€ä¸‹å­æ‰¾å‡ºæ¥ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰å…³é”®å­—ã€å³é”®ã€‘ï¼Œé€‰æ‹©ã€Fold Lines Like Thisã€‘ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ è¿™æ ·æˆ‘ä»¬ç›¸åŒå…³é”®å­—çš„ log å°±ä¼šè¢«æŠ˜å ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å±•å¼€æŸ¥çœ‹è¯¦ç»† logã€‚ è‡ªå®šä¹‰æ–­ç‚¹æ‰§è¡Œæ¡ä»¶ æˆ‘ä»¬æ¥çœ‹ä¸Šé¢è¿™æ®µä»£ç ï¼Œé€šè¿‡å­—é¢æ„æ€æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼šè¿™æ˜¯ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æ‰§è¡Œçš„æ–¹æ³•ï¼Œç‚¹å‡»å‘ç”Ÿåé€šè¿‡ NavController ä»å½“å‰ HomeFragment è·³è½¬åˆ° EmailFragmentã€‚ç„¶åæˆ‘ä»¬åœ¨ç¬¬ä¸€è¡Œæ‰“äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œæˆ‘ä»¬å·²ç»å¾—çŸ¥å½“ email çš„ subject åŒ…å« ã€Bonjourã€‘å…³é”®å­—çš„æ—¶å€™ï¼Œè¿™æ®µä»£ç ä¼šå‘ç”Ÿå´©æºƒï¼Œåä¹‹ä¸åŒ…å«åˆ™ä¸ä¼šå‘ç”Ÿå´©æºƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æ¯æ¬¡æ–­ç‚¹éƒ½ç”Ÿæ•ˆã€‚ è¿™é‡Œæˆ‘ä»¬å¯ä»¥å³é”®æ–­ç‚¹ï¼Œåœ¨ Condition é‡Œè¾“å…¥æˆ‘ä»¬çš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œå½“æ¡ä»¶å…è®¸çš„æ—¶å€™ï¼Œæ–­ç‚¹æ‰ç”Ÿæ•ˆã€‚æ¡ä»¶è¯­å¥çš„ä»£ç æ”¯æŒ Kotlin å’Œ Java ä¸¤ç§è¯­è¨€çš„å†™æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç„¶åå¦‚æœæˆ‘ä»¬æƒ³åœ¨è·³è½¬åˆ° EmailFragment ä¹‹åè¿›ä¸€æ­¥å»è¿½è¸ªé—®é¢˜ï¼Œäºæ˜¯æˆ‘åœ¨ EmailFragment çš„ onCreate æ–¹æ³•æ‰“äº†ä¸€ä¸ªæ–­ç‚¹ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œç„¶åè¿™é‡Œè¿˜ä¼šé‡åˆ°æˆ‘ä»¬ä¹‹å‰è¯´çš„é—®é¢˜ï¼šä¸ç¬¦åˆæ¡ä»¶çš„æ—¶å€™æ–­ç‚¹ä¹Ÿä¼šç”Ÿæ•ˆï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–­ç‚¹ä¸Šé¢ï¼Œå³é”®ã€ç‚¹å‡»æ›´å¤šã€‚ å·¦è¾¹é€‰æ‹©å½“å‰æ–­ç‚¹ä¹‹åï¼Œåœ¨å³è¾¹ç‚¹å‡»ã€Disable until breakpoint hitã€‘ï¼Œé€‰æ‹©æˆ‘ä»¬ä¹‹å‰æœ‰æ¡ä»¶åˆ¤æ–­çš„æ–­ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°çš„æ–­ç‚¹ä¼šåœ¨å®ƒæ‰€è·Ÿéšçš„æ–­ç‚¹ç”Ÿæ•ˆä¹‹åæ‰ä¼šç”Ÿæ•ˆã€‚ æŒ‚èµ·çº¿ç¨‹ å½“æˆ‘ä»¬å³é”®ä»»æ„ä¸€ä¸ªæ–­ç‚¹çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ª Suspend é€‰é¡¹ã€Allã€Threadã€‘ï¼ŒAll ä¹Ÿå°±æ„å‘³ç€å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªå¤šçº¿ç¨‹çš„åº”ç”¨ä¸­ debug é—®é¢˜çš„æ—¶å€™ï¼Œä¸€æ—¦è¿™ä¸ªæ–­ç‚¹ç”Ÿæ•ˆï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½ä¼šè¢«æŒ‚èµ·ï¼ŒThread è¡¨ç¤ºåªæŒ‚èµ·å½“å‰çº¿ç¨‹ã€‚æ‰€ä»¥å½“æˆ‘ä»¬åœ¨æŸä¸ªåå°çº¿ç¨‹ä¸­ debug é—®é¢˜çš„æ—¶å€™å°±å¯ä»¥é€‰æ‹© Threadï¼Œè¿™æ ·å°±ä¸ä¼šåœ¨ debug çš„æ—¶å€™é˜»å¡ä¸»çº¿ç¨‹çš„æ­£å¸¸åŠŸèƒ½ã€‚ è¿˜æœ‰ä¸€ä¸ªæ‰“å¼€å…³é—­æ–­ç‚¹çš„å¿«æ·é”®ä¹Ÿåˆ†äº«ä¸€ä¸‹ï¼šWindows ç”¨æˆ· Alt + Click ï¼ŒMac Option + Click ã€‚ åŠ¨æ€æ‰“å°è¯¦ç»†å¾ˆå¤šäººåŒ…æ‹¬æˆ‘ä¹‹å‰åœ¨ debug çš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨éœ€è¦ debug çš„åœ°æ–¹å¢åŠ  print è¾“å‡ºä¸€ä¸‹ä¿¡æ¯ä¾›è‡ªå·±æ’æŸ¥é”™è¯¯ï¼Œè¿™é‡Œæä¾›ä¸€ç§å¿«æ·æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥æ—¢ä¸æ±¡æŸ“æˆ‘ä»¬çš„ä»£ç ï¼Œåˆå¯ä»¥éšæ—¶è¾“å‡ºä»»æ„ä¿¡æ¯ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨éœ€è¦æ‰“å°çš„åœ°æ–¹å¢åŠ æ–­ç‚¹ï¼Œç„¶åå–æ¶ˆæ‰€æœ‰çº¿ç¨‹çš„æŒ‚èµ·ï¼Œé€‰æ‹©ã€Evaluate and logã€‘ï¼Œå±äºæˆ‘ä»¬éœ€è¦æ‰“å°çš„è¯­å¥ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°æ–­ç‚¹çš„æ—¶å€™ï¼Œä¸ä¼šæš‚åœï¼Œè€Œä¼šæ ¹æ®æˆ‘ä»¬è®¾ç½®çš„æ‰“å°ä¿¡æ¯è¾“å‡º logï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Ÿ æ–­ç‚¹åˆ†ç»„ é€šå¸¸é‡åˆ°ä¸€ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ å¾ˆå¤šæ–­ç‚¹å»è¿½è¸ªé—®é¢˜çš„åŸå› ï¼Œå½“é—®é¢˜è§£å†³ä¹‹åï¼Œå¾€å¾€ä¼šå¿˜è®°å–æ¶ˆè¿™äº›æ–­ç‚¹ï¼Œå¯¼è‡´åœ¨æŸæ¬¡è°ƒè¯•çš„æ—¶å€™ï¼Œè®¾å¤‡ä¼šè¢«ä¹‹å‰çš„æ–­ç‚¹æ‰€æš‚åœï¼Œä¼šè®©æˆ‘ä»¬å¾ˆæ— è¯­ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ debug çš„æ—¶å€™åœ¨æŸä¸ªæ–­ç‚¹ä¸Šï¼šå³é”®ã€æ›´å¤šï¼Œç„¶åé€‰æ‹©è¿™ä¸ªé—®é¢˜æ‰€æœ‰ç›¸å…³çš„æ–­ç‚¹ï¼Œå°†å®ƒä»¬åˆ†åˆ°åŒä¸€ä¸ª Group é‡Œé¢ï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªç»„çš„æ–­ç‚¹å°±å¯ä»¥ç»Ÿä¸€å¼€å…³ã€ç»Ÿä¸€åˆ é™¤ã€‚ æ–­ç‚¹ä¸Šä¸€æ­¥è¯´åˆ°è¿™ä¸ªçœŸçš„å¾ˆç—›å¿ƒï¼Œå¸¸å¸¸å› ä¸ºè‡ªå·±åœ¨ debug çš„æ—¶å€™ï¼Œç”±äºä¸‹ä¸€æ­¥ç‚¹å‡»çš„å¤ªå¿«äº†è€Œé”™è¿‡äº†é—®é¢˜å…³é”®è¡Œï¼Œåªèƒ½é‡æ–°è¿è¡Œä¸€æ¬¡ä»£ç ï¼Œé‡æ–° debug ç„¶åè‡ªå·±ä¸€æ¬¡æ¬¡ç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚ åœ¨è¿è¡Œ Android 10 çš„è®¾å¤‡ä¸Šï¼Œdebug ç•Œé¢ä¸­æä¾›äº†ä¸€ä¸ªå«ã€Drop frameã€‘çš„æŒ‰é’®ï¼Œå¯ä»¥ä¾›æˆ‘ä»¬è·³å‡ºå½“å‰æ–¹æ³•æ ˆï¼Œè¿”å›ä¸Šä¸€æ­¥ï¼Œè¿™æ ·å°±ä¼šé¿å…æˆ‘ä»¬å› ä¸ºé”™è¿‡æ–­ç‚¹è€Œä¸å¾—ä¸é‡æ–°è¿è¡Œä»£ç ã€‚ è§‚å¯Ÿå¯¹è±¡ å½“æˆ‘ä»¬ debug çš„æ—¶å€™ï¼Œå¯ä»¥ä» debug çª—å£ä¸­è§‚å¯Ÿå½“å‰ä½œç”¨åŸŸä¸­çš„å¯¹è±¡ä»¥åŠå¯¹è±¡çš„å±æ€§ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šè§‚å¯Ÿåœ¨ä¸åŒé¡µé¢æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¹‹å‰æˆ‘çš„åšæ³•å¾ˆç²—æš´â€¦å°±æ˜¯æ‰¾å¼ çº¸ï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡çš„ ID è®°ä¸‹æ¥ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªé¡µé¢ debug çœ‹ ID æ˜¯å¦ä¸€è‡´ğŸ˜‚ è¿™é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹è±¡ä¸Šå³é”®ã€é€‰æ‹©ã€Mark Objectã€‘ä¹‹åä¼šè®©ä½ è‡ªå®šä¹‰ä¸€ä¸ª Labelï¼Œç„¶ååœ¨æ•´ä¸ª debug æœŸé—´ï¼Œç›¸åŒçš„å¯¹è±¡ä¼šä»¥ä½ è®¾ç½®çš„ Label ä¸º name å‡ºç°ï¼Œå¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿çš„åˆ†ææ˜¯å¦æ˜¯ç»Ÿä¸€å¯¹è±¡ã€‚ é¡ºä¾¿æä¸€ä¸‹ï¼Œåœ¨ä»»æ„ä¸€æ®µä»£ç ä¸Šï¼Œç‚¹å‡»è¡Œå·ï¼Œå¯ä»¥ä»å½“å‰æ–­ç‚¹å¿«é€Ÿæ‰§è¡Œåˆ°ç›®æ ‡è¡Œå¹¶æš‚åœï¼Œè¿™ä¸ªæˆ‘çœŸæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ„Ÿè§‰ä¹‹å‰ Android Studio éƒ½ç™½ç”¨äº†ğŸ˜­ è€Œä¸”åœ¨ debug çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰æ‹© debug çª—å£ä¸­çš„ã€Evaluate expressionã€‘æŒ‰é’®æ¥åŠ¨æ€è§‚å¯Ÿå¯¹è±¡ï¼Œç‚¹å‡»ä¹‹åä¼šå¼¹å‡ºä¸€ä¸ªè®¡ç®—æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ä»»æ„å½“å‰ä½œç”¨åŸŸä¸­çš„å¯¹è±¡ä»¥åŠå±æ€§è§‚å¯Ÿã€‚ ä¸å¾—ä¸è¯´è¿™ä¸ªçœŸçš„å¾ˆæ–¹ä¾¿ï¼Œä»¥å‰é‡åˆ°è¿™ç§æƒ…å†µæˆ‘åªæœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯ï¼šprint ğŸ˜‚ï¼Œå½“ç„¶è¿™é‡Œä¸ä»…ä»…æ˜¯è§‚å¯Ÿå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä»»æ„ä»£ç è§‚å¯Ÿæˆ‘ä»¬æƒ³è¦çš„å€¼ï¼Œå°±åƒä¸‹å›¾è¿™æ ·ã€‚ å¢é‡æ›´æ–° æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œè¿™ä¸¤ä¸ªæŒ‰é’®æ˜¯çœŸçš„å¾ˆå¥½ç”¨å•Šï¼Œæ¯”é‡æ–°å…¨é‡è¿è¡Œåº”ç”¨çœŸæ˜¯å¿«äº†ä¸å°‘ï¼Œéå¸¸æ–¹ä¾¿ã€‚ é”™è¯¯æ ˆåˆ†æé€šå¸¸æˆ‘ä»¬ App ä¸­ä¼šç»§æ‰¿ä¸€ä¸‹çº¿ä¸Š bug åé¦ˆçš„ SDK æ¯”å¦‚ buglyï¼Œåœ¨ bugly æˆ‘ä»¬ä¼šå¾—åˆ°å´©æºƒçš„å¼‚å¸¸æ ˆä¿¡æ¯ï¼Œç±»ä¼¼ä¸‹å›¾è¿™æ ·ã€‚ æˆ‘ä»¬å¯ä»¥å…¨é€‰å¤åˆ¶ï¼Œæ‰“å¼€æˆ‘ä»¬çš„ Android Studioï¼Œé€‰æ‹© Analyze â†’ Analyze Stack Trace or Thread Dumpï¼Œç„¶åæŠŠå¼‚å¸¸æ ˆä¿¡æ¯ç²˜è´´è¿›å»ï¼Œç‚¹å‡»ç¡®å®šã€‚ Android Studio ä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºè¿™æ®µå¼‚å¸¸æ ˆä¿¡æ¯ï¼Œå¹¶ä¸”ä¸ç°æœ‰ä»£ç  Link åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»è·³è½¬åˆ°é—®é¢˜æ‰€åœ¨è¡Œã€‚ å¥½äº†è¿™å°±æ˜¯ä»Šå¤©è¦åˆ†äº«çš„å…¨éƒ¨å†…å®¹ï¼Œå…³äºæ›´å¤šè¯¦ç»†çš„å†…å®¹ï¼Œå¤§å®¶å¯ä»¥ç‚¹å‡»ã€é˜…è¯»åŸæ–‡ã€‘åœ¨æ²¹ç®¡ä¸ŠæŸ¥çœ‹ï¼ŒçœŸå¸Œæœ›æœ‰å¤§ä½¬å¯ä»¥å‡ºä¸€ä¸ªã€Android Studio ä½¿ç”¨å…¨æ”»ç•¥ã€‘ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ AS çœŸçš„åªæ˜¯ä¼šç”¨ï¼Œä½†è¿˜æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å»å­¦ä¹ å’Œæ¢ç´¢ã€‚ğŸ˜‚ æˆ‘æ˜¯ wanbo å¤§å®¶åŠ æ²¹ï¼","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"Android Studio","slug":"Android-Studio","permalink":"https://lilei.pro/tags/Android-Studio/"}]},{"title":"KotlinåŸŸå‡½æ•°å°ç»“","date":"2019-10-28T15:37:31.000Z","path":"2019/10/28/kotlin-scope-functions/","text":"å¹¶éæ„å¿—åšå¼ºå°±å¯ä»¥æ— æ‰€ä¸èƒ½ï¼Œäººä¸–ä¸æ˜¯é‚£ä¹ˆå•çº¯çš„ã€‚è€å®è¯´ï¼Œæˆ‘ç”šè‡³è§‰å¾—æ¯å¤©åšæŒè·‘æ­¥åŒæ„å¿—å¼ºå¼±å¹¶æ²¡æœ‰å¤ªå¤§å…³è”ã€‚æˆ‘èƒ½å¤ŸåšæŒè·‘äºŒåå¹´ï¼Œææ€•è¿˜æ˜¯å› ä¸ºåˆä¹æˆ‘çš„æ€§æƒ…ï¼Œè‡³å°‘â€œä¸è§‰å¾—é‚£ä¹ˆç—›è‹¦â€ã€‚äººç”Ÿæ¥å¦‚æ­¤ï¼Œå–œæ¬¢çš„äº‹è‡ªç„¶å¯ä»¥åšæŒä¸‹å»ï¼Œä¸å–œæ¬¢çš„äº‹æ€ä¹ˆä¹ŸåšæŒä¸äº†ã€‚ â€”â€”å½“æˆ‘è°ˆè·‘æ­¥æ—¶æˆ‘è°ˆäº›ä»€ä¹ˆ æƒ³è¦æŒæ¡Kotlinï¼ŒåŸŸå‡½æ•°æ˜¯ä¸å¾—ä¸è¿ˆè¿‡çš„ä¸€é“åã€‚ æ‰€è°“â€œåŸŸå‡½æ•°â€ä¸€å¥è¯ï¼ŒåŸŸå‡½æ•°ï¼ˆscope functionsï¼‰æ˜¯ä¸ºç»™å®šçš„å¯¹è±¡åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„åŸŸï¼Œåœ¨è¿™ä¸ªåŸŸä¸­æ‰§è¡Œä¸€äº›æ“ä½œã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„å¯¹è±¡-å‡½æ•°è°ƒç”¨å†™æ³•ï¼ŒåŸŸå‡½æ•°åœ¨å‡å°‘ä»£ç é‡çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥è®©ç¼–ç åœ¨é€»è¾‘ä¸Šçœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤ã€‚ å¯¹æ¯”ä¸€ä¸‹åŸŸå‡½æ•°å†™æ³•ä¸æ™®é€šå†™æ³•ã€‚ 1234567891011121314// åŸŸå‡½æ•°å†™æ³•Person(\"Alice\", 20, \"Amsterdam\").let &#123; println(it) it.moveTo(\"London\") it.incrementAge() println(it)&#125;// æ™®é€šå†™æ³•val alice = Person(\"Alice\", 20, \"Amsterdam\")println(alice)alice.moveTo(\"London\")alice.incrementAge()println(alice) åŸŸå‡½æ•°è¦ç»“åˆlambdaè¡¨è¾¾å¼ä½¿ç”¨ã€‚Kotlinä¸­ä¸€å…±æœ‰äº”ä¸ªåŸŸå‡½æ•°ï¼šlet, run, with, apply, alsoã€‚è¿™äº›åŸŸå‡½æ•°æœ‰ä¸¤ä¸ªåŒºåˆ«ç‚¹ã€‚ åŸŸå‡½æ•°ä¸­å¦‚ä½•å¼•ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡ åŸŸå‡½æ•°è¿”å›å€¼ åŒºåˆ«ç‚¹ï¼šä¸Šä¸‹æ–‡å¯¹è±¡åŸŸå‡½æ•°ä¸­ç”¨thisæˆ–è€…itæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ thisrun, withå’Œapplyåœ¨lambdaè¡¨è¾¾å¼ä¸­ç”¨thisæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå°±å¥½åƒlambdaè¡¨è¾¾å¼æ˜¯åœ¨å¯¹è±¡å†…éƒ¨è°ƒç”¨çš„ä¸€æ ·ï¼Œthisæ˜¯å¯ä»¥çœç•¥çš„ã€‚å¯¹äºè°ƒç”¨å¯¹è±¡å†…éƒ¨æ–¹æ³•ã€å±æ€§çš„ä»£ç ï¼Œåº”å½“é€‰æ‹©ä½¿ç”¨thisæŒ‡ä»£çš„åŸŸå‡½æ•°ã€‚å¦‚æœåœ¨åŸŸå†…è¦è°ƒç”¨å…¶ä»–å¯¹è±¡çš„å‡½æ•°ï¼Œä¸è¦é€‰æ‹©thisæŒ‡ä»£ï¼Œå› ä¸ºå®¹æ˜“å¼„æ··ã€‚ 1234val adam = Person(\"Adam\").apply &#123; age = 20 // same as this.age = 20 city = \"Hangzhou\"&#125; itlet, alsoåœ¨lambdaè¡¨è¾¾å¼ä¸­ç”¨itæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¸thisä¸åŒï¼Œåœ¨è®¿é—®æ–¹æ³•å’Œå¯¹è±¡æ—¶itæ˜¯ä¸èƒ½çœç•¥çš„ã€‚å½“ä¸Šä¸‹æ–‡å¯¹è±¡éœ€è¦åœ¨åŸŸå†…å……å½“å‡½æ•°å‚æ•°æ—¶ï¼Œå°±é€‰ç”¨itç±»å‹çš„åŸŸå‡½æ•°ã€‚å¦ä¸€ä¸ªä¾¿æ·ä¹‹å¤„åœ¨äºï¼Œå¯ä»¥ä¸ºitæŒ‡ä»£åˆ«åã€‚ 1234567891011121314fun getRandomInt(): Int &#123; return Random.nextInt(100).also &#123; writeToLog(\"getRandomInt() generated value $it\") &#125;&#125;val i = getRandomInt()// ä¸ºitæŒ‡ä»£åˆ«åfun getRandomInt(): Int &#123; value -&gt; return Random.nextInt(100).also &#123; writeToLog(\"getRandomInt() generated value $value\") &#125;&#125; åŒºåˆ«ç‚¹ï¼šè¿”å›å€¼Lambdaè¡¨è¾¾å¼ç»“æœlet, runå’Œwithè¿”å›lambdaè¡¨è¾¾å¼çš„ç»“æœï¼ˆæœ€åä¸€è¡Œï¼‰ï¼Œå¯ä»¥ç”¨è¿™äº›åŸŸå‡½æ•°æ¥è¿›è¡Œèµ‹å€¼ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚ 12345678910111213141516// èµ‹å€¼val numbers = mutableListOf(\"one\", \"two\", \"three\")val countEndsWithE = numbers.run &#123; add(\"four\") add(\"five\") count &#123; it.endsWith(\"e\") &#125; // è¿”å›countæ•°&#125;println(\"There are $countEndsWithE elements that end with e.\")// æ— è§†è¿”å›å€¼ï¼Œåªæ˜¯æ‰§è¡ŒåŸŸå‡½æ•°å†…éƒ¨æ“ä½œval numbers = mutableListOf(\"one\", \"two\", \"three\")with(numbers) &#123; // withæ˜¯thisæŒ‡ä»£ï¼Œå¯çœç•¥ val firstItem = first() val lastItem = last() println(\"First item: $firstItem, last item: $lastItem\")&#125; ä¸Šä¸‹æ–‡å¯¹è±¡also, applyè¿”å›ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¯ä»¥ç»§ç»­å¯¹æ­¤è¿›è¡Œé“¾å¼è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿”å›ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ 12345678910111213141516171819// é“¾å¼è°ƒç”¨val numberList = mutableListOf&lt;Double&gt;()numberList.also &#123; println(\"Populating the list\") &#125; .apply &#123; // æ³¨æ„applyä½¿ç”¨thisæŒ‡ä»£ï¼ˆçœç•¥æ‰ï¼‰ add(2.71) add(3.14) add(1.0) &#125; .also &#123; println(\"Sorting the list\") &#125; .sort()// ä½œä¸ºè¿”å›å€¼fun getRandomInt(): Int &#123; return Random.nextInt(100).also &#123; writeToLog(\"getRandomInt() generated value $it\") // itæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ &#125;&#125;val i = getRandomInt() é€ä¸ªå‡½æ•°è®²è§£letä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯itï¼Œè¿”å›å€¼æ˜¯lambdaè¡¨è¾¾å¼è®¡ç®—ç»“æœï¼ˆæœ€åä¸€è¡Œï¼‰ã€‚ letå¯ä»¥ä½œä¸ºé“¾å¼è°ƒç”¨ä¸­çš„ä¸€ç¯æ¥ä½¿ç”¨ã€‚ 123456789// é“¾å¼è°ƒç”¨val numbers = mutableListOf(\"one\", \"two\", \"three\", \"four\", \"five\")numbers.map &#123; it.length &#125;.filter &#123; it &gt; 3 &#125;.let &#123; println(it) // and more function calls if needed&#125;// æ›´åŠ ç²¾ç®€numbers.map &#123; it.length &#125;.filter &#123; it &gt; 3 &#125;.let(::println) letç»å¸¸ç”¨æ¥åœ¨éç©ºå¯¹è±¡ä¸Šæ‰§è¡Œä¸€ç³»åˆ—æ“ä½œã€‚ 1234567val str: String? = \"Hello\" //processNonNullString(str) // compilation error: str can be nullval length = str?.let &#123; println(\"let() called on $it\") processNonNullString(it) // OK: 'it' is not null inside '?.let &#123; &#125;' it.length&#125; letå¦ä¸€ä¸ªç”¨æ³•æ˜¯ä¸ºå˜é‡itåˆ›å»ºåˆ«åï¼Œä»¥å¢å¼ºä»£ç å¯é˜…è¯»æ€§ã€‚å€ŸåŠ©äºIDEï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥çœ‹åˆ°itæŒ‡ä»£çš„æ˜¯ä»€ä¹ˆå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªç”¨æ³•çš„éœ€æ±‚å¹¶éååˆ†å¼ºçƒˆã€‚ 123456val numbers = listOf(\"one\", \"two\", \"three\", \"four\")val modifiedFirstItem = numbers.first().let &#123; firstItem -&gt; println(\"The first item of the list is '$firstItem'\") if (firstItem.length &gt;= 5) firstItem else \"!\" + firstItem + \"!\"&#125;.toUpperCase()println(\"First item after modifications: '$modifiedFirstItem'\") withwithä¸æ˜¯æ‰©å±•å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸Šä¸‹æ–‡å¯¹è±¡ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œåœ¨lambdaè¡¨è¾¾å¼ä¸­ç”¨thisæŒ‡ä»£ï¼Œè¿”å›ç»“æœæ˜¯lambdaè¡¨è¾¾å¼çš„å€¼ã€‚ å»ºè®®åœ¨ä½¿ç”¨withæ—¶ä¸è¦å¤„ç†å®ƒçš„è¿”å›ç»“æœï¼Œè¿™æ ·withå°±å¯ä»¥æ ¹æ®å­—é¢å«ä¹‰ç®€å•çš„ç†è§£æˆâ€œåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè¿›è¡Œå¦‚ä¸‹æ“ä½œâ€ã€‚ 12345val numbers = mutableListOf(\"one\", \"two\", \"three\")with(numbers) &#123; println(\"'with' is called with argument $this\") println(\"It contains $size elements\")&#125; å¦ä¸€ç§ç”¨æ³•æ˜¯åˆ›å»ºä¸€ä¸ªè¾…åŠ©å¯¹è±¡ï¼Œå®ƒçš„å±æ€§æˆ–è€…æ–¹æ³•å¯ä»¥ç”¨æ¥è®¡ç®—å‡ºæŸä¸ªå€¼ã€‚ 123456val numbers = mutableListOf(\"one\", \"two\", \"three\")val firstAndLast = with(numbers) &#123; // ç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å‡½æ•° \"The first element is $&#123;first()&#125;,\" + \" the last element is $&#123;last()&#125;\"&#125;println(firstAndLast) runä½¿ç”¨thisæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›ç»“æœæ˜¯lambdaè¡¨è¾¾å¼å€¼ã€‚ runåœ¨å«ä¹‰ä¸Šä¸withä¸€è‡´ï¼Œåœ¨è°ƒç”¨æ–¹å¼ä¸Šä¸letä¸€è‡´ã€‚å½“éœ€è¦è¿›è¡Œå¯¹è±¡åˆå§‹åŒ–ã€å¹¶åŒæ—¶è¦è¿”å›ä¸€ä¸ªè®¡ç®—ç»“æœæ—¶ï¼Œåº”å½“ä½¿ç”¨runã€‚ 123456789101112val service = MultiportService(\"https://example.kotlinlang.org\", 80)val result = service.run &#123; port = 8080 query(prepareRequest() + \" to port $port\")&#125;// the same code written with let() function:val letResult = service.let &#123; it.port = 8080 it.query(it.prepareRequest() + \" to port $&#123;it.port&#125;\")&#125; é™¤äº†åœ¨æ¥æ”¶è€…å¯¹è±¡ä¸Šè°ƒç”¨ä»¥å¤–ï¼Œrunè¿˜å¯ä»¥è®©æˆ‘ä»¬åœ¨éœ€è¦ä¸€ä¸ªè¡¨è¾¾å¼çš„åœ°æ–¹ä¼ å…¥ä¸€ä¸ªä»£ç å—ï¼ˆè¿™ç§ç”¨æ³•ç•¥å¤æ‚ï¼‰ã€‚ 12345678910111213141516171819val hexNumberRegex = run &#123; val digits = \"0-9\" val hexDigits = \"A-Fa-f\" val sign = \"+-\" Regex(\"[$sign]?[$digits$hexDigits]+\")&#125;for (match in hexNumberRegex.findAll(\"+1234 -FFFF not-a-number\")) &#123; // findAllæ­£åˆ™åŒ¹é… println(match.value)&#125;/** * output: * +1234 * -FFFF * -a * be */ applyä½¿ç”¨thisæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡æœ¬èº«ã€‚ applyé€‚ç”¨çš„åœºæ™¯æ˜¯ä¸éœ€è¦è¿”å›å€¼ï¼Œä¸”ä¸»è¦æ˜¯æ“ä½œå¯¹è±¡æˆå‘˜çš„è¿‡ç¨‹ã€‚å¸¸è§çš„å°±æ˜¯å¯¹è±¡é…ç½®ï¼Œâ€œåœ¨å¯¹è±¡ä¸Šè¿›è¡Œå¦‚ä¸‹æ“ä½œâ€ã€‚ applyå¯ä»¥å¾ˆå®¹æ˜“åœ°å˜æˆé“¾å¼æ“ä½œã€‚ 1234val adam = Person(\"Adam\").apply &#123; age = 32 city = \"London\" &#125; alsoä½¿ç”¨itæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡æœ¬èº«ã€‚ alsoçš„ä½¿ç”¨åœºæ™¯æ˜¯å°†å¯¹è±¡ä½œä¸ºä¸€ç³»åˆ—æ“ä½œçš„å‚æ•°ï¼Œåœ¨è¿™äº›æ“ä½œä¸­ä¸åº”è¯¥å¯¹å‚æ•°äº§ç”Ÿå‰¯ä½œç”¨ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨ä¸€ä¸ªé“¾å¼è°ƒç”¨ä¸­å¾ˆæ–¹ä¾¿åœ°åŠ ä¸Šalsoï¼Œæˆ–è€…ä»é“¾å¼è°ƒç”¨ä¸­æŠŠalsoæ‘˜æ‰ï¼Œä¸”ä¸å½±å“åŸæœ‰é€»è¾‘ã€‚ å½“ä½ åœ¨ä»£ç ä¸­çœ‹åˆ°alsoæ—¶ï¼Œå¯ä»¥å°†å…¶ç†è§£ä¸ºâ€œè¿˜éœ€è¦åšè¿™äº›äº‹æƒ…â€ã€‚ 1234val numbers = mutableListOf(\"one\", \"two\", \"three\")numbers .also &#123; println(\"The list elements before adding new one: $it\") &#125; .add(\"four\") æ€»ç»“ç”¨ä¸€å¼ è¡¨æ ¼åˆ—å‡ºå‡½æ•°çš„å¯¹è±¡å¼•ç”¨ä¸è¿”å›å€¼ã€‚ Function Object reference Return value Is extension function let it Lambda result Yes run it Lambda result Yes run - Lambda result No: called without the context object with this Lambda result No: takes the context object as an argument apply this Context object Yes also it Context object Yes ä¸€ä¸ªç®€å•çš„å‡½æ•°é€‰ç”¨æŒ‡å—å¦‚ä¸‹ï¼Œå®ƒä»¬çš„åº”ç”¨åœºæ™¯æœ‰é‡å çš„éƒ¨åˆ†ï¼Œä½¿ç”¨æ—¶åº”å½“å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚ åœ¨éç©ºå¯¹è±¡ä¸Šè°ƒç”¨lambdaè¡¨è¾¾å¼ï¼šlet åœ¨åŸŸå†…å°†è¡¨è¾¾å¼æŠ½è±¡æˆä¸€ä¸ªå˜é‡ï¼šlet å¯¹è±¡é…ç½®ï¼šapply å¯¹è±¡é…ç½®å¹¶è®¡ç®—ç»“æœï¼šrun æ‰§è¡Œä¸€ç³»åˆ—è¡¨è¾¾å¼ï¼Œéæ‰©å±•å‡½æ•°ï¼šrun é™„åŠ æ•ˆæœï¼šalso å°†å¯¹äºæŸä¸ªå¯¹è±¡çš„å‡½æ•°è°ƒç”¨ç»„åˆï¼šwith å°½ç®¡ä½œç”¨åŸŸå‡½æ•°åŠŸèƒ½å¼ºå¤§ï¼Œåœ¨ä½¿ç”¨æ—¶åº”å½“è°¨æ…ï¼Œé¿å…å‡ºé”™ï¼Œå°¤å…¶æ˜¯åµŒå¥—çš„æƒ…å†µåº”å½“è¶Šå°‘è¶Šå¥½ï¼›å½“ä½ åœ¨å†™é“¾å¼è°ƒç”¨æ—¶ï¼Œä¸€å®šè¦å°å¿ƒåˆ†è¾¨å½“å‰çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚ å‚è€ƒ å®˜æ–¹æ–‡æ¡£","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"Kotlin","slug":"Kotlin","permalink":"https://lilei.pro/tags/Kotlin/"}]},{"title":"ç§»åŠ¨è®¾å¤‡IDé‚£äº›äº‹","date":"2019-10-11T16:09:06.000Z","path":"2019/10/12/unique-device-id/","text":"ä¸ºä»€ä¹ˆéœ€è¦è®¾å¤‡IDâ€œè®¾å¤‡IDâ€å³ç”¨äºæ ‡è¯†è®¾å¤‡å”¯ä¸€èº«ä»½çš„IDï¼Œå³ Unique Device Identifierã€‚åŸºäºä»¥ä¸‹åŸå› ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†è®¾å¤‡IDç›¸å…³åŠŸèƒ½ï¼š ç»Ÿè®¡éœ€æ±‚ã€‚DAUï¼ŒMAUï¼Œè½¬åŒ–ç‡ï¼Œç”¨æˆ·è¡Œä¸ºç­‰ç»Ÿè®¡ã€‚ ä¸šåŠ¡éœ€æ±‚ã€‚ä¸ªæ€§åŒ–æ¨èï¼Œæ—¥å¿—æ”¶é›†ï¼Œç°åº¦å‘å¸ƒï¼ŒAB Testç­‰ä¸šåŠ¡ä¾§éœ€æ±‚ã€‚ é£æ§éœ€æ±‚ã€‚é˜²åˆ·å•ï¼Œåä½œå¼Šç­‰ã€‚ è®¾å¤‡IDçš„ç‰¹å¾ä¸ºäº†æ»¡è¶³ä»¥ä¸Šéœ€æ±‚ï¼Œä¸€ä¸ªè‰¯å¥½çš„è®¾å¤‡IDæ–¹æ¡ˆåº”å½“å…·æœ‰â€œå”¯ä¸€æ€§â€å’Œâ€œç¨³å®šæ€§â€ä¸¤ä¸ªç‰¹å¾ã€‚ å”¯ä¸€æ€§ï¼šç³»ç»Ÿä¸­çš„ä»»æ„ä¸¤å°è®¾å¤‡ï¼Œå®ƒä»¬çš„è®¾å¤‡IDåº”å½“ä¸åŒã€‚ ç¨³å®šæ€§ï¼šåŒä¸€å°è®¾å¤‡åœ¨é‡å¯ã€æ¸…ç©ºåº”ç”¨æ•°æ®ã€å¸è½½åº”ç”¨é‡è£…ã€ç³»ç»Ÿå‡çº§ã€Android ç‰ˆæœ¬å‡çº§ã€åˆ·æœºç­‰æƒ…å†µä¸‹ï¼Œè®¾å¤‡IDåº”å½“ä¿æŒä¸å˜ã€‚ é—æ†¾çš„æ˜¯ï¼ŒAndroid å¹³å°å¹¶æ²¡æœ‰ç¨³å®šçš„APIå¯ä»¥æä¾›å…·æœ‰ä¸Šé¢ä¸¤ç‚¹ç‰¹å¾çš„IDã€‚ å¯é€‰æ–¹æ¡ˆåŠé™åˆ¶å…³äºAndroidè®¾å¤‡IDï¼Œå¸¸è§çš„æ–¹æ¡ˆæœ‰IMEIã€MACåœ°å€ã€Serialã€AndroidIDç­‰ï¼Œä¸‹é¢é€ä¸€ä»‹ç»å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œä»¥åŠä¸ºä½•æ— æ³•æ‰¿æ‹…å”¯ä¸€IDçš„èŒè´£ã€‚ IMEIæ˜¯ å›½é™…è®¾å¤‡è¯†åˆ«ç ï¼ˆImternational Mobile Equipment Identityï¼‰ çš„ç¼©å†™ï¼Œå³é€šå¸¸æ‰€è¯´çš„æ‰‹æœºä¸²å·ï¼Œç”¨äºåœ¨ç§»åŠ¨ç”µè¯ç½‘ç»œä¸­è¯†åˆ«æ¯ä¸€éƒ¨ç‹¬ç«‹çš„æ‰‹æœºç­‰ç§»åŠ¨é€šä¿¡è®¾å¤‡ï¼Œå…±15~17ä½æ•°å­—ã€‚åœ¨æ‹¨å·é”®ç›˜è¾“å…¥*#06#å³å¯æŸ¥çœ‹ã€‚ 12345// è¯»å–IMEIçš„æ ·ä¾‹ä»£ç ï¼Œéœ€è¦ READ_PHONE_STATE æƒé™fun getIMEI(): String &#123; val tm = getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager return tm.deviceId&#125; åœ¨æ—©äº›æ—¶å€™ï¼ŒIMEIæ˜¯å¾ˆå¤šåº”ç”¨é‡‡å–çš„è®¾å¤‡IDæ–¹æ¡ˆï¼Œå› ä¸ºå®ƒè¯»å–æ–¹ä¾¿ï¼Œä¸”åŒæ—¶å…·å¤‡å”¯ä¸€æ€§å’Œç¨³å®šæ€§çš„ç‰¹å¾ã€‚ç„¶è€Œè‡ªä»Android 6å¼€å§‹ï¼ŒREAD_PHONE_STATEè¢«åˆ—å…¥dangerousçš„ä¿æŠ¤çº§åˆ«ï¼Œæ„å‘³ç€æˆ‘ä»¬ä¸ä»…è¦åœ¨AndroidManifest.xmlæ–‡ä»¶é‡Œç”³è¯·ï¼Œè¿˜åº”å½“åœ¨åº”ç”¨åˆ°è¿™ä¸ªæƒé™ä¹‹å‰åŠ¨æ€ç”³è¯·ã€‚å°¤å…¶åœ¨ä¸­æ–‡çš„å®‰å“ç³»ç»Ÿä¸Šï¼Œå¼¹çª—é‡Œçš„æ–‡å­—æç¤ºæ˜¯â€œç”³è¯·ç”µè¯è®¾å¤‡ä¿¡æ¯â€ï¼Œå¾ˆå®¹æ˜“è®©äººè¯¯ä»¥ä¸ºè¿™æ˜¯è¦è·å–ç”µè¯å·ç ã€çŸ­ä¿¡å†…å®¹ç­‰æ•æ„Ÿä¿¡æ¯ã€‚ å¦‚æœè¯´Android 6åªæ˜¯æé«˜äº†ä½¿ç”¨IMEIä½œä¸ºè®¾å¤‡IDçš„é—¨æ§›ï¼ŒAndroid 10åˆ™æ˜¯å®Œå…¨å µæ­»äº†è¿™æ¡è·¯ã€‚åœ¨Android 10çš„ç³»ç»Ÿé‡Œï¼Œå³ä½¿ç”³è¯·äº†READ_PHONE_STATEæƒé™ï¼Œä¹Ÿæ— æ³•è·å–IMEIï¼Œä¼šæŠ›å‡ºSecurityExceptionå¼‚å¸¸æˆ–è€…è¿”å›nullã€‚ MACåœ°å€MACåœ°å€ï¼ˆMedia Access Control Addressï¼‰ï¼Œç”¨äºæ ‡è¯†å¯ä¸Šç½‘è®¾å¤‡çš„å”¯ä¸€åœ°å€ï¼Œè®¾å¤‡æœ‰å‡ å¼ ç½‘å¡ï¼Œå°±ä¼šæœ‰å‡ ä¸ªMACåœ°å€ã€‚åœ¨OSIä¸ƒå±‚æ¨¡å‹ä¸­ï¼ŒMACåœ°å€ä½äºç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚ã€‚çœ‹åˆ°è¿™é‡Œä½ ä¹Ÿè®¸ä»¥ä¸ºMACåœ°å€æ˜¯ä½œä¸ºè®¾å¤‡IDè§£å†³æ–¹æ¡ˆçš„æœ€ä½³é€‰æ‹©ï¼Œå®åˆ™ä¸ç„¶ï¼Œé¦–å…ˆï¼ŒMACåœ°å€çš„è·å–æ–¹æ³•å†ç»å¤šæ¬¡ä¿®æ”¹ï¼Œè¶³è§Googleæ­£æ¬²æ”¶ç´§MACåœ°å€æƒé™ï¼Œä»¥åå®Œå…¨å µæ­»ä¹Ÿå¹¶éä¸å¯èƒ½ã€‚ åœ¨ (?, 6.0)ï¼Œ[6.0, 7.0)ï¼Œ[7.0, ?) ä¸‰ç§ä¸åŒçš„Androidç‰ˆæœ¬ä¸‹ï¼Œæœ‰ç€ä¸åŒçš„è·å–MACåœ°å€æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒç®€ä¹¦è¿™ç¯‡æ–‡ç«  ã€ŠAndroid ç‰ˆæœ¬å…¼å®¹ â€” Android 6.0 å’Œ 7.0åè·å–Macåœ°å€ã€‹ã€‚ 12345678910111213141516171819202122232425// è·å–MACåœ°å€ï¼Œé€‚ç”¨äºç›®å‰Androidå…¨ç‰ˆæœ¬ï¼Œä¸ä¿è¯ä»¥åç»§ç»­é€‚ç”¨ï¼ˆå¾ˆå¤§å¯èƒ½ä¸å†é€‚ç”¨ï¼‰// éœ€è¦ android.permission.INTERNET æƒé™ï¼Œä¸ºédangerousæƒé™ï¼Œå¯ä»¥åœ¨AndroidManifst.xmlä¸­ç›´æ¥ç”³è¯·fun getMAC(): String &#123; try &#123; val enumeration = getNetworkInterfaces() ?: return \"\" while (enumeration.hasMoreElements()) &#123; val netInterface = enumeration.nextElement() if (netInterface.name == \"wlan0\") &#123; val addr = netInterface.hardwareAddress val result = StringBuilder() for (b in addr) &#123; result.append(String.format(\"%02X:\", b)) &#125; if (result.isNotEmpty()) &#123; result.deleteCharAt(result.length - 1) &#125; return result.toString() &#125; &#125; &#125; catch (e: Exception) &#123; Log.e(\"tag\", e.message, e) &#125; return \"\"&#125; Serialä½•ä¸ºSerialï¼ŸSerialå³â€œè®¾å¤‡åºåˆ—å·â€ï¼Œæ˜¯è®¾å¤‡å‚å•†æä¾›çš„è®¾å¤‡å”¯ä¸€ä¸²å·ï¼Œå”¯ä¸€æ€§ç”±å„å‚å•†ä¿è¯ã€‚æ‹¿vivoä¸¾ä¾‹ï¼Œå®ƒä¼šä¿è¯è‡ªå·±ç”Ÿäº§çš„æ¯ä¸€å°è®¾å¤‡åºåˆ—å·éƒ½æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ä¸æ˜¯ä¸OPPOçš„ä¹Ÿä¸ä¸€æ ·å‘¢ï¼Ÿè¿™å°±æ— æ³•ä¿è¯äº†ã€‚ä¸€ä¸ªæ–¹æ¡ˆæ˜¯ç”¨å‚å•†ID_è®¾å¤‡å‹å·_åºåˆ—å·æ‹¼æ¥èµ·æ¥ï¼Œä½œä¸ºè®¾å¤‡IDï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸åŒå‚å•†è®¾å¤‡å…·æœ‰ç›¸åŒSerialçš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰å‚å•†éƒ½ä¼šä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªè§„å®šæ¥åšã€‚æˆ‘æ›¾ç»åœ¨RK3399çš„å¼€å‘æ¿ä¸Šåšè¿‡å¼€å‘ï¼Œè¯•è¿‡å¾ˆå¤šå¼ æ¿å­ï¼Œå®ƒä»¬çš„Serialéƒ½æ˜¯0123456789ï¼Œè®©äººå“­ç¬‘ä¸å¾—ã€‚ æ›´ç³Ÿç³•çš„æ˜¯ï¼ŒAndroid 10åˆå µæ­»äº†è·å–Serialçš„è·¯ï¼Œä¼šç›´æ¥æŠ›å‡ºSecurityExceptionï¼Œé™¤éåº”ç”¨æ˜¯ç³»ç»Ÿç­¾åä¸”å…·å¤‡android.Manifest.permission.READ_PRIVILEGED_PHONE_STATEæƒé™ã€‚ 1234// è¯»å–Serialï¼Œéœ€è¦ READ_PHONE_STATE æƒé™// Android 10 å¼‚å¸¸ // java.lang.SecurityException: getSerial: The user 10236 does not meet the requirements to access device identifiers.fun getSerial() = android.os.Build.getSerial() AndroidIDAndroidIDæ˜¯SDKæä¾›çš„è·å–IDæ–¹æ³•ï¼Œå®ƒä¸éœ€è¦ç”³æ˜ä»»ä½•æƒé™ï¼Œå…·æœ‰64bitçš„å–å€¼èŒƒå›´ï¼Œä¸”å”¯ä¸€æ€§ä¹Ÿè¿˜ä¸é”™ã€‚ä½†æ˜¯ï¼Œå®ƒæœ€å¤§çš„ç¡¬ä¼¤åœ¨äºæ— æ³•æ»¡è¶³ç¨³å®šæ€§ï¼š åˆ·æœºã€rootã€æ¢å¤å‡ºå‚è®¾ç½®åéƒ½ä¼šå˜åŒ– å¯¹å®‰è£…åœ¨8.0ç³»ç»Ÿçš„åº”ç”¨æ¥è¯´ï¼ŒAndroidIDå–å†³äºåº”ç”¨ç­¾å+è®¾å¤‡ä¸¤è€…çš„ç»„åˆ åœ¨8.0ä¹‹å‰å®‰è£…çš„åº”ç”¨ï¼Œå¦‚æœåœ¨ç³»ç»Ÿå‡çº§åˆ°8.0åï¼Œå¸è½½é‡è£…è¯¥åº”ç”¨ï¼Œè¯»å–åˆ°çš„AndroidIDä¼šå˜åŒ– ç”±äºä»¥ä¸ŠåŸå› ï¼Œåœ¨ä¸€äº›è¦æ±‚ä¸ä¸¥æ ¼çš„åœºæ™¯ä¸­ï¼Œå¯ä»¥é‡‡ç”¨AndroidIDä½œä¸ºè®¾å¤‡IDï¼Œæ¯”å¦‚è®°å½•æ¿€æ´»æ•°ã€æ›å…‰æ•°æ®ç­‰ã€‚ä½†æ˜¯åœ¨ä¸¥æ ¼çš„åœºæ™¯ä¸­å°±ä¸èƒ½ç”¨AndroidIDäº†ï¼Œå¦‚ä»¥è®¾å¤‡IDæ ‡è¯†ç”¨æˆ·èº«ä»½ï¼Œæä¾›ç›¸åº”æœåŠ¡çš„åœºæ™¯ã€‚ è¯»å–AndroidIDçš„æ ·ä¾‹ä»£ç å¦‚ä¸‹ï¼š 12// è¯»å–AndroidIDï¼Œä¸éœ€è¦é¢å¤–ç”³è¯·ä»»ä½•æƒé™fun getAndroidID() = Settings.Secure.getString(contentResolver, Settings.Secure.ANDROID_ID) å¯é€‰æ–¹æ¡ˆæ€»ç»“ç”¨ä¸€å¼ è¡¨æ ¼æ€»ç»“ä¸Šè¿°æ–¹æ¡ˆï¼š æ–¹æ¡ˆ æ¦‚è¿° é™åˆ¶ IMEI å…·å¤‡å”¯ä¸€æ€§å’Œç¨³å®šæ€§ï¼Œè¿‡å»çš„æœ€ä½³é€‰æ‹© Android10å µæ­»ï¼Œæ— æ³•è·å– MAC ç½‘å¡åœ°å€ï¼Œå”¯ä¸€ä¸”ç¨³å®š æƒé™é€æ¸æ”¶ç´§ï¼Œæœªæ¥ææœ‰å¯èƒ½å…³é—­ Serial æ‰‹æœºå‚å•†æä¾›çš„è®¾å¤‡åºåˆ—å· ä¸ä¿è¯å”¯ä¸€æ€§ï¼ŒAndroid10å µæ­» AndroidID Android SDK æä¾›ï¼Œä¸éœ€è¦ç”³è¯·æƒé™ï¼Œå”¯ä¸€æ€§è¾ƒå¥½ ä¸å…·å¤‡ç¨³å®šæ€§ è®¾è®¡ä¸€ä¸ªæ–°æ–¹æ¡ˆä¸Šè¿°å››ä¸ªæ–¹æ¡ˆé‡Œï¼Œæ²¡æœ‰å“ªä¸€ä¸ªæ˜¯è§£å†³è®¾å¤‡IDé—®é¢˜çš„ç»ˆææ­¦å™¨ï¼ˆé“¶å¼¹ï¼‰ï¼Œåªæœ‰å„ç§æ–¹æ³•ç»¼åˆè¿ç”¨ï¼Œæ‰æ˜¯è§£å†³ä¹‹é“ã€‚ä¸‹é¢æå‡ºä¸€ç§è®¾å¤‡IDæ–¹æ¡ˆï¼Œç»¼åˆä½¿ç”¨å¤šä¸ªç¡¬ä»¶IDï¼Œå€ŸåŠ©æœåŠ¡å™¨ç”Ÿæˆå”¯ä¸€è™šæ‹Ÿè®¾å¤‡IDï¼ˆVDIDï¼‰ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°ä¿è¯å”¯ä¸€æ€§å’Œç¨³å®šæ€§ã€‚ ç¨³å®šæ€§ï¼šæ‹œå åº­å®¹é”™ç¨³å®šæ€§è¦æ±‚å½“è·å–ä¸åˆ°æŸç§IDï¼Œæˆ–è€…æŸç§IDå‘ç”Ÿå˜åŒ–æ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè¾¨è¯†å‡ºè¿™ä¸ªè®¾å¤‡ã€‚å€ŸåŠ©â€œæ‹œå åº­å®¹é”™â€å¯ä»¥è§£å†³ç¨³å®šæ€§çš„é—®é¢˜ã€‚ æ‹œå åº­å®¹é”™æœºåˆ¶æºäºå¤è€ æ‹œå åº­å°†å†›ï¼ˆByzantine failuresï¼‰ é—®é¢˜ã€‚ç”¨ç®€å•çš„è¯­è¨€è§£é‡Šï¼š å¦‚æœç³»ç»Ÿä¸­æœ‰nä¸ªæ•…éšœèŠ‚ç‚¹ï¼Œç³»ç»Ÿè¦æƒ³æ­£ç¡®è¿è¡Œï¼Œå¿…é¡»è‡³å°‘è¦æœ‰2n+1ä¸ªæ­£å¸¸èŠ‚ç‚¹ã€‚ ã€‚ä½†å¯¹äºAndroidè®¾å¤‡IDï¼Œæˆ‘ä»¬é‡‡ç”¨å¼±åŒ–çš„æ‹œå åº­å®¹é”™æœºåˆ¶ï¼Œå³å®¢æˆ·ç«¯æ¯æ¬¡ä¸Šä¼ 4ä¸ªIDï¼ˆIMEIã€MACã€Serialã€AndroidIDï¼‰ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™4ä¸ªIDç”Ÿæˆä¸€ä¸ªéšæœºçš„å”¯ä¸€IDå³VDIDã€‚åç»­å®¢æˆ·ç«¯å†è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨VDIDï¼Œæˆ–è€…å†æ¬¡ä½¿ç”¨4ä¸ªIDï¼Œç”±æœåŠ¡å™¨æ‹¿è¿™4ä¸ªIDåœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥æ‰¾VDIDï¼Œè‹¥æ‰¾åˆ°åˆ™è¿”å›ï¼Œè‹¥æœªæ‰¾åˆ°ï¼Œå†ä½¿ç”¨4ä¸ªIDä¸­çš„3ä¸ªè¿›è¡ŒæŸ¥æ‰¾ï¼Œ3ä¸ªä¸è¡Œåˆ™ç”¨2ä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚ è·å–VDIDçš„æ—¶åºå›¾ vdid_sequence å”¯ä¸€æ€§ï¼šVDIDçš„ç”Ÿæˆæ–¹å¼ä¸å–å€¼èŒƒå›´è¦å®ç°VDIDçš„å”¯ä¸€æ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥è€ƒè™‘ï¼š æ–¹æ¡ˆä¸€ï¼šè‡ªå¢ä¸»é”®IDè‡ªå¢ã€åˆ†æ­¥è‡ªå¢ã€åˆ†æ®µæ„é€ ã€Redisåˆ†å¸ƒå¼IDç­‰æ–¹æ³•ï¼Œå¯ä»¥ä¿è¯å”¯ä¸€æ€§ã€‚ä½†æ˜¯åœ¨ä¼ è¾“æ­¤ç±»IDæ—¶ï¼Œåº”å½“è¿›è¡Œhashæ“ä½œï¼Œä¸”ä¿è¯hashåçš„IDä¸å¯ç¢°æ’ã€‚ è‡ªå¢IDçš„ä¼˜ç‚¹æ˜¯å¯ä½œä¸ºç´¢å¼•ï¼Œæ£€ç´¢é€Ÿåº¦å¿«ï¼›ç¼ºç‚¹æ˜¯ç”Ÿæˆè§„åˆ™å­˜åœ¨è¢«ç ´è§£çš„é£é™©ã€‚ æ–¹æ¡ˆäºŒï¼šéšæœºç”ŸæˆIDè¿™æ˜¯å¦ä¸€ç§ç”Ÿæˆå”¯ä¸€IDçš„æ–¹æ³•ï¼Œå½“ä½æ•°è¶³å¤Ÿå¤šæ—¶ï¼Œå¯ä»¥è®¤ä¸ºç¢°æ’æ¦‚ç‡è¶‹è¿‘äº0ã€‚é¦–å…ˆçœ‹ä¸€ä¸‹è¿™å¼ è¡¨ï¼Œå®ƒæè¿°äº†éšæœºæ•°ä½æ•°ä¸å‘ç”Ÿç¢°æ’çš„æ¦‚ç‡ã€‚ random_collision å‡è®¾æˆ‘ä»¬åº”ç”¨çš„æ´»è·ƒç”¨æˆ·æ•°ä¸º20,000,000ï¼Œå³ä¸¤åƒä¸‡ã€‚å¯ä»¥çœ‹åˆ°è‡³å°‘è¦æœ‰128Bitsï¼Œæ‰èƒ½åœ¨2*10^7ï¼ˆä¸¤åƒä¸‡ï¼‰çš„æ•°é‡çº§æœ‰æå°çš„ç¢°æ’æ¦‚ç‡ï¼Œç¬¦åˆæˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ã€‚ éšæœºIDçš„ä¼˜ç‚¹æ˜¯å…·æœ‰éšè”½æ€§ï¼Œç¼ºç‚¹æ˜¯æ£€ç´¢æ•ˆç‡ä¸€èˆ¬ã€‚ å°ç»“æœ¬æ–‡æ˜¯ç¬”è€…é˜…è¯»éƒ­éœ–å…¬ä¼—å·æ¨æ–‡ã€Šæ¼«è°ˆè®¾å¤‡å”¯ä¸€IDçš„é‚£äº›ç§˜å¯†ã€‹åçš„æ€»ç»“å½’çº³ï¼Œæ­¤å¤„å‘åŸä½œè€…@å‘¼å•¸é•¿é£è‡´è°¢ã€‚ç„¶è€Œä½œè€…åŸæ–‡ä¸­æœ‰ä¸€å¤„çº°æ¼ï¼Œè®¾å¤‡åºåˆ—å·ï¼ˆSERIALï¼‰åœ¨Android 10ä¸ŠåŸºæœ¬æ˜¯æ— æ³•è·å–çš„ï¼Œè¿™ä¹Ÿä¼šå½±å“åŸä½œè€…æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚ç¬”è€…å·²ç»åœ¨Githubä¸Šå¯¹æ­¤æäº†issueã€‚ å‡ºäºå¯¹ç”¨æˆ·éšç§çš„ä¿æŠ¤ï¼ŒGoogleä¸€ç›´è¯•å›¾æ”¶ç´§çš„è®¾å¤‡IDçš„è·å–æƒé™ã€‚è€Œç”±äºâ€œè´¦æˆ·â€çš„æ¦‚å¿µåœ¨å›½å†…å¸‚åœºå¹¶ä¸æ™®éï¼Œå†åŠ ä¸Šå„å¤§OEMç¢ç‰‡åŒ–ä¸¥é‡ï¼Œå›½å†…çš„å„ç§ä¸šåŠ¡ä¸å¾—ä¸ä¾èµ–äºè®¾å¤‡IDè¿›è¡Œå±•å¼€ã€‚è¿™ä¹Ÿæ˜¯å¼€å‘è€…è¿‘å¹´æ¥ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œå¸Œæœ›æœªæ¥å›½å†…çš„Androidç”Ÿæ€å¯ä»¥æ›´åŠ ç»Ÿä¸€ï¼Œä¹Ÿå¸Œæœ›Googleä¹Ÿå¯¹æ­¤ç±»éœ€æ±‚æä¾›æ›´å¥½çš„æƒé™æ–¹æ¡ˆï¼Œèƒ½è®©å¼€å‘è€…å¯ä»¥ä¸å¿…ä¸ºæ­¤å¤´ç—›ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"}]},{"title":"Flash Boys è¯»ä¹¦ç¬”è®°","date":"2019-10-11T15:55:18.000Z","path":"2019/10/11/flash-boys/","text":"å‰è¨€-èƒŒæ™¯ä¸åŠ¨æœº cover Flash Boysï¼Œä¸­è¯‘ã€Šé«˜é¢‘äº¤æ˜“å‘˜ã€‹ï¼Œæ˜¯é‡‘èç•…é”€ä¹¦ä½œå®¶è¿ˆå…‹å°”åˆ˜æ˜“æ–¯ 2015 å¹´çš„ä½œå“ï¼Œä½œè€…ä¹‹å‰å‡ºç‰ˆè¿‡ã€Šå¤§ç©ºå¤´ã€‹ã€ã€Šè¯´è°è€…çš„æ‰‘å…‹ç‰Œã€‹ç­‰åå°”è¡—é¢†åŸŸçš„æµè¡Œä½œå“ã€‚åœ¨è¿™æœ¬ä¹¦ä¸­ï¼Œåˆ˜æ˜“æ–¯å€ŸåŠ©â€œèƒœå±±â€çš„è§’è‰²ï¼Œè®²è§£äº†ä¸€äº› HFT çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥ç»™æˆ‘ç­‰å°ç™½ç”¨æ¥å…¥é—¨ HFTã€‚ ä¹¦çš„å‰ 2/3 å€¼å¾—ç»†è¯»ï¼Œå 1/3 åŸºæœ¬ä¸Šéƒ½æ˜¯ç»™ IEX åšå¹¿å‘Šï¼Œä¸€æ‰«è€Œè¿‡å³å¯ã€‚ å®šä¹‰ï¼šä½•ä¸º HFTï¼ˆé«˜é¢‘äº¤æ˜“ï¼‰çŸ­çº¿äº¤æ˜“æ˜¯ç»å…¸åŠ›å­¦ï¼Œç ”ç©¶å¯¹è±¡ä¸ºæ¯ä¸ªå‘¨æœŸçš„æˆäº¤ä»·æ ¼ï¼Œæœ€çŸ­ 6 ç§’ã€‚ é«˜é¢‘äº¤æ˜“æ˜¯é‡å­åŠ›å­¦ï¼Œ6ç§’å†…å¯ä»¥å‘ç”Ÿä¸Šç™¾æ¬¡äº¤æ˜“ï¼Œæœ€ç»ˆæˆäº¤ä»·åªæ˜¯æœ€åä¸€ç¬”è®¢å•çš„ä»·æ ¼ã€‚ äº¤æ˜“æ‰€ä¿ç•™æ•°æ®çš„é¢‘åº¦æ˜¯ç§’ï¼ŒäºŒå¸‚åœºä¸­é«˜é¢‘äº¤æ˜“ä¸»ä½“çš„æ•°æ®é¢‘åº¦æ˜¯çº³ç§’çº§ï¼Œ1ç§’=10äº¿çº³ç§’ã€‚ é«˜é¢‘äº¤æ˜“ï¼ˆHigh-Frequency Tradingï¼‰æ˜¯æŠ•èµ„é“¶è¡Œã€å¯¹å†²åŸºé‡‘å’Œä¸“ä¸šäº¤æ˜“å…¬å¸ç­‰åˆ©ç”¨é«˜é€Ÿè®¡ç®—æœºè¿›è¡Œç¨‹åºåŒ–è¯åˆ¸äº¤æ˜“çš„æŠ•èµ„ç­–ç•¥çš„æ€»ç§°ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ç­–ç•¥ï¼š æµåŠ¨æ€§å›æ‰£äº¤æ˜“ï¼ˆLiquidity Rebate Tradingï¼‰ çŒç‰©ç®—æ³•äº¤æ˜“ï¼ˆPredatory Algorithmic Tradingï¼‰ è‡ªåŠ¨åšå¸‚å•†äº¤æ˜“ï¼ˆAutomated Market Maker Trading, AMMsï¼‰ é—ªç”µè®¢å•ï¼ˆFlash Orderï¼‰ æš—æ± ï¼ˆDark Poolï¼‰ ç†è§£ï¼šé«˜é¢‘äº¤æ˜“ä½•ä»¥èµšé’±å‡è®¾æŸæ”¯è‚¡ç¥¨ä»·æ ¼åœ¨400~500å…ƒä¹‹é—´æ³¢åŠ¨ï¼Œè‚¡æ°‘è€ç‹ä¸‹äº†ä¸€ä¸ªå•ï¼šå½“è‚¡ç¥¨ä»·æ ¼ä½äº450å…ƒæ—¶ï¼Œä¹°å…¥100è‚¡ã€‚å½“è¿™ä¸ªè®¢å•åœ¨äº¤æ˜“æ‰€ä¹‹é—´ä¼ é€’æ—¶ï¼ˆç¾å›½æœ‰åå‡ å®¶äº¤æ˜“æ‰€ï¼Œçº½äº¤æ‰€ã€çº³æ–¯è¾¾å…‹æ˜¯å…¶ä¸­æœ€è€³ç†Ÿèƒ½è¯¦çš„ï¼‰ï¼Œéœ€è¦å‡ åæ¯«ç§’çš„å»¶è¿Ÿæ—¶é—´ï¼Œé«˜é¢‘äº¤æ˜“å‘˜å°±æ˜¯åœ¨è¿™å‡ åæ¯«ç§’é‡Œåšæ–‡ç« ã€‚ å½“è‚¡æ°‘è€ç‹çš„è®¢å•ä»äº¤æ˜“æ‰€Aä¼ é€’ç»™äº¤æ˜“æ‰€Bæ—¶ï¼Œå€ŸåŠ©äºé«˜é€Ÿç½‘ç»œï¼Œé«˜é¢‘äº¤æ˜“å‘˜å…ˆäºäº¤æ˜“æ‰€Bå¾—åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œå³â€œæœ‰ä¸€ä¸ªè®¢å•æ˜¯å½“è‚¡ç¥¨ä»·æ ¼ä½äº450å…ƒæ—¶ä¹°100è‚¡â€ï¼Œæ­¤æ—¶å¦‚æœäº¤æ˜“æ‰€Bçš„è‚¡ç¥¨ä»·æ ¼ä½äº450ï¼Œæ¯”å¦‚è¯´æ˜¯440ï¼Œäº¤æ˜“å‘˜å°±ä¼šä¹°å…¥å®ƒï¼Œå†è½¬æ‰‹ä»¥450å…ƒçš„ä»·æ ¼å±¥è¡Œåˆšæ‰å¾—åˆ°çš„è®¢å•ã€‚åœ¨è¿™ç¬”äº¤æ˜“ä¸­ï¼Œé«˜é¢‘äº¤æ˜“å‘˜è·åˆ©1000å…ƒï¼Œè‚¡æ°‘è€ç‹ä¹Ÿä»¥é¢„æœŸçš„450å…ƒä»·æ ¼è´­å…¥äº†ç›®æ ‡è‚¡ç¥¨ã€‚ 2013å¹´å¹´åˆï¼Œæœ€å¤§çš„é«˜é¢‘äº¤æ˜“å…¬å¸ä¹‹ä¸€Virtu Financialå…¬å¼€ç§°ï¼Œåœ¨å…¶5å¹´åŠçš„äº¤æ˜“ä¸­å¿ƒä»…æœ‰ä¸€å¤©æ²¡æœ‰èµšåˆ°é’±ï¼Œé‚£ä¸€å¤©è¿˜æ˜¯å› ä¸ºå‡ºç°äº†â€œäººä¸ºè¯¯å·®â€ã€‚ ä¸€ä¸ªé«˜é¢‘äº¤æ˜“å…¬å¸å¯ä»¥åœ¨å¸‚åœºä¸Šç–¯ç‹‚äº¤æ˜“è€Œä¸å¸¦æ¥ä»»ä½•é™„åŠ ä»·å€¼ï¼Œè€Œä¸”å¯ä»¥ä¸æ‰¿æ‹…ä»»ä½•é£é™©ï¼Œå½“å®ƒä¹°å…¥æ—¶ï¼Œå®ƒçŸ¥é“æœ‰ç¡®åˆ‡çš„å–å®¶ï¼Œå½“å®ƒå–å‡ºæ—¶ï¼Œå®ƒçŸ¥é“è‚¯å®šæœ‰äººä¹°ã€‚åœ¨æ¯ä¸ªäº¤æ˜“æ—¥ç»“æŸæ—¶ï¼Œå®ƒåœ¨ä»»ä½•å¸‚åœºéƒ½å®Œå…¨ä¸æŒæœ‰å¤´å¯¸ã€‚ é«˜é¢‘äº¤æ˜“å…¬å¸æ¯å¤©é—­å¸‚æ—¶éƒ½æ˜¯å¹³ä»“çš„ï¼Œä»–ä»¬ä½œä¸ºä¹°å–åŒæ–¹æ¡¥æ¢çš„æ—¶é—´æçŸ­ï¼Œä»¥è‡³äºæ ¹æœ¬æ²¡æœ‰äººçŸ¥é“å…¶å­˜åœ¨ã€‚ é«˜é¢‘äº¤æ˜“çš„åˆ†ç±»ç”µå­æŠ¢å…ˆäº¤æ˜“ï¼ˆelectronic frontrunningï¼‰åœ¨ä¸€ä¸ªåœ°æ–¹æ¢çŸ¥æŠ•èµ„è€…çš„äº¤æ˜“ä¿¡æ¯åï¼Œåœ¨å¦ä¸€ä¸ªåœ°æ–¹æŠ¢åœ¨æŠ•èµ„è€…ä¹‹å‰é€šè¿‡ä¸€ç³»åˆ—è®¢å•æ¨é«˜æˆ–æ‹‰ä½ä»·æ ¼ï¼Œå¹¶ä»ä¸­è·åˆ© å›æ‰£å¥—åˆ©ï¼ˆrebate arbitrageï¼‰äº¤æ˜“æ‰€é€šå¸¸ä¼šä¸ºåˆ›é€ æµåŠ¨æ€§çš„åˆ¸å•†æä¾›ä¸€å®šçš„äº¤æ˜“è´¹ç”¨å›æ‰£ï¼Œé«˜é¢‘äº¤æ˜“è€…åˆ©ç”¨é€Ÿåº¦ä¼˜åŠ¿åˆ›é€ è™šå‡æµåŠ¨æ€§ï¼Œéª—å–äº¤æ˜“æ‰€çš„å›æ‰£ æ…¢å¸‚åœºå¥—åˆ©ï¼ˆslow market arbitrageï¼‰é«˜é¢‘äº¤æ˜“è€…åœ¨ä¸€ä¸ªäº¤æ˜“æ‰€æ¢çŸ¥åˆ°è‚¡ç¥¨ä»·æ ¼å˜åŠ¨ä¹‹åï¼Œå†åˆ©ç”¨é€Ÿåº¦ä¼˜åŠ¿åœ¨å¦ä¸€ä¸ªäº¤æ˜“æ‰€ååº”è¿‡æ¥ä¹‹å‰è¿›è¡Œä¹°å–æ“ä½œã€‚è¿™å¯èƒ½æ˜¯ä½¿ç”¨æœ€å¹¿çš„ ç–‘é—®ï¼šèµ¢å®¶æ‹¿èµ°ä¸€åˆ‡åœ¨é«˜é¢‘äº¤æ˜“çš„æˆ˜åœºä¸Šï¼Œæ˜¯å¦æ„å‘³ç€â€œèµ¢å®¶æ‹¿èµ°ä¸€åˆ‡â€ï¼Ÿå¦‚æœç”²çš„ç®—æ³•/çº¿è·¯æ¯”ä¹™å¿«10%ï¼Œæœ€ç»ˆç”²ä¼šè·å–æ‰€æœ‰çš„è®¢å•å¹¶å®Œæˆäº¤æ˜“ï¼Œä¹™ä¸€åˆ†é’±éƒ½æ‹¿ä¸åˆ°ï¼Ÿ","tags":[{"name":"é«˜é¢‘äº¤æ˜“","slug":"é«˜é¢‘äº¤æ˜“","permalink":"https://lilei.pro/tags/é«˜é¢‘äº¤æ˜“/"}]},{"title":"æ¶æ„å­¦ä¹ ä¹‹ master-v2","date":"2019-10-11T15:50:24.000Z","path":"2019/10/11/architecture-master-v2/","text":"Move stones, not mountains. Google å®˜æ–¹çš„ Android Architecture Blueprints æ¨å‡ºäº† v2 ç‰ˆæœ¬ï¼Œç›¸æ¯”äºä¹‹å‰çš„ v1 ç‰ˆæœ¬ï¼Œv2 é‡‡å–äº†æ›´å…ˆè¿›çš„è®¾è®¡æ€æƒ³ä¸ç»„ä»¶ï¼š é‡‡ç”¨ Kotlin Coroutines å¤„ç†åå°æ“ä½œ å•ä¸€ Activity ç»“æ„ï¼Œç”¨ Navigation component å¤„ç†Fragment ä¹‹é—´è·³è½¬ ç”± Fragment(View) å’Œ ViewModel ç»„æˆçš„ Presentation å±‚ï¼Œå³ MVVM æ¨¡å¼ åŸºäº LiveData å’Œ DataBinding çš„å“åº”å¼ï¼ˆReactiveï¼‰UI data å±‚ä½¿ç”¨ä¸€ä¸ª Repository å’Œä¸¤ä¸ª Datasourceï¼ˆæœ¬åœ°æ•°æ®ã€è¿œç«¯æ•°æ®ï¼‰ï¼Œé‡‡ç”¨ç›´è§‚çš„è°ƒç”¨æ–¹å¼ï¼ˆéå›è°ƒã€é data streamï¼‰ ä¸¤ä¸ª product flavorï¼Œåˆ†åˆ«æ˜¯mockå’Œprodï¼Œå¯¹åº”ç€æµ‹è¯•ä¸å¼€å‘ç¯å¢ƒ ä¸€ç³»åˆ—å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ä»¥åŠç«¯åˆ°ç«¯æµ‹è¯• æ¥ä¸‹æ¥ä»æºç è§’åº¦è§£æ master åˆ†æ”¯å·¥ç¨‹ï¼Œçœ‹çœ‹ v2 ç©¶ç«Ÿå¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆä¾¿åˆ©ã€‚ ç¨‹åºå…¥å£å…¥å£åœ¨TasksActivity.javaï¼Œæ³¨æ„åˆ°è¿™æ˜¯ä¸€ä¸ªâ€œSPAâ€ï¼Œå³ Single Page Applicationï¼Œåœ¨AndroidManifest.xmlä¸­åªå£°æ˜äº†è¿™ä¸€ä¸ª Activityã€‚TasksActivityå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªå£³é¡µé¢ï¼Œåªå¤„ç†äº† Navigationã€ActionBarã€NavigationDrawer ç­‰åŸºç¡€åŠŸèƒ½ã€‚å®ƒåœ¨onCreateé‡Œè¿›è¡Œè¿™äº›åˆå§‹åŒ–ï¼š 123456789101112131415161718private lateinit var drawerLayout: DrawerLayoutprivate lateinit var appBarConfiguration: AppBarConfigurationoverride fun onCreate(savedInstanceState: Bundle?) &#123; super.onCreate(savedInstanceState) setContentView(R.layout.tasks_act) setupNavigationDrawer() setSupportActionBar(findViewById(R.id.toolbar)) val navController: NavController = findNavController(R.id.nav_host_fragment) appBarConfiguration = AppBarConfiguration.Builder(R.id.tasks_fragment_dest, R.id.statistics_fragment_dest) .setDrawerLayout(drawerLayout) .build() setupActionBarWithNavController(navController, appBarConfiguration) findViewById&lt;NavigationView&gt;(R.id.nav_view) .setupWithNavController(navController)&#125; è¯¥åº”ç”¨é‡‡ç”¨ Navigation component ç®¡ç†é¡µé¢è·³è½¬ï¼Œè·³è½¬å…³ç³»åœ¨nav_graph.xmlæ–‡ä»¶ä¸­ä»¥å¯è§†åŒ–çš„æ–¹å¼å‘ˆç°ã€‚æˆ‘ä»¬è¿™é‡Œä¸éœ€è¦å…³å¿ƒè·³è½¬ç»„ä»¶çš„å…·ä½“ç”¨æ³•ï¼Œ åªè¦çŸ¥é“å®ƒå¯ä»¥å¯åŠ¨æˆ‘ä»¬è¦åˆ†æçš„TasksFragmentå°±å¯ä»¥äº†ã€‚ æ•°æ®æˆ‘ä¹ æƒ¯ä»æ•°æ®å¼€å§‹åˆ†æä»£ç èµ°å‘ï¼Œçœ‹ä¸€ä¸‹dataç›®å½•çš„ç»“æ„ï¼š 123456789101112Î» tree datadata|-- Result.kt|-- Task.kt`-- source |-- DefaultTasksRepository.kt |-- TasksDataSource.kt |-- TasksRepository.kt `-- local |-- TasksDao.kt |-- TasksLocalDataSource.kt `-- ToDoDatabase.kt Result.kt ä¸ Task.ktResult.ktæ˜¯ä¸€ä¸ªæ•°æ®è¯·æ±‚çš„ç»“æœå°è£…ç±»ï¼Œä¸šåŠ¡å±‚å¯¹æ•°æ®çš„è¯·æ±‚å‡æ˜¯é€šè¿‡ Result å¯¹è±¡è¿›è¡Œå°è£…ã€‚è¿™ä¸ªç±»ä½¿ç”¨åˆ°äº†å¤šä¸ª Kotlin ç‰¹æ€§ï¼Œå®¹æˆ‘åœ¨æ³¨é‡Šé‡Œä¸€ä¸€è¯´æ˜ã€‚ 12345678910111213141516171819sealed class Result&lt;out R&gt; &#123; // å¯†å°ç±»ï¼Œå°†ç»§æ‰¿é™åˆ¶åœ¨ç±»å†…éƒ¨ï¼›out ç±»å‹ï¼Œåå˜ï¼Œä¿ç•™å­ç±»å‹åŒ–å…³ç³» data class Success&lt;out T&gt;(val data: T) : Result&lt;T&gt;() // data ç±»ï¼Œåå˜ç±»å‹Tå¯ä»¥ç”¨ä½œæ„é€ å‚æ•° data class Error(val exception: Exception) : Result&lt;Nothing&gt;() // Nothingç±»å‹ï¼Œæ°¸ä¸è¿”å› object Loading : Result&lt;Nothing&gt;() // objectç›´æ¥åˆ›å»ºå¯¹è±¡ override fun toString(): String &#123; return when (this) &#123; is Success&lt;*&gt; -&gt; \"Success[data=$data]\" // *è¡¨ç¤ºä¸å…³å¿ƒå…·ä½“ç±»å‹ is Error -&gt; \"Error[exception=$exception]\" Loading -&gt; \"Loading\" &#125; &#125;&#125;/** * `true` if [Result] is of type [Success] &amp; holds non-null [Success.data]. */val Result&lt;*&gt;.succeeded // æ‰©å±•å±æ€§ï¼Œæ³¨æ„å‘½åä¸æ˜¯isSuccessï¼ˆChinglishï¼‰ get() = this is Success &amp;&amp; data != null Task.ktæè¿°äº†ä»»åŠ¡å¯¹è±¡ï¼Œç”±titleã€descriptionã€completedå’Œidå››ä¸ªå­—æ®µæ„æˆï¼ŒåŒæ—¶å€ŸåŠ© Room ç»„ä»¶è‡ªåŠ¨å…³è”åˆ°åä¸ºtasksçš„æ•°æ®è¡¨ã€‚ æ•°æ®æ¥å£ï¼šTasksDataSource.kt ä¸ TasksRepository.ktTasksDataSource.ktå’ŒTasksRepository.ktæ˜¯ä¸¤ä¸ªæ¥å£ç±»ï¼Œå†…å®¹ååˆ†ç›¸ä¼¼ï¼š 1234567891011121314151617181920212223242526272829// TasksDataSource.kt// Main entry point for accessing tasks data.interface TasksDataSource &#123; suspend fun getTasks(): Result&lt;List&lt;Task&gt;&gt; suspend fun getTask(taskId: String): Result&lt;Task&gt; suspend fun saveTask(task: Task) suspend fun completeTask(task: Task) suspend fun completeTask(taskId: String) suspend fun activateTask(task: Task) suspend fun activateTask(taskId: String) suspend fun clearCompletedTasks() suspend fun deleteAllTasks() suspend fun deleteTask(taskId: String)&#125;// TasksRepository.kt// Interface to the data layer.interface TasksRepository &#123; suspend fun getTasks(forceUpdate: Boolean = false): Result&lt;List&lt;Task&gt;&gt; suspend fun getTask(taskId: String, forceUpdate: Boolean = false): Result&lt;Task&gt; suspend fun saveTask(task: Task) suspend fun completeTask(task: Task) suspend fun completeTask(taskId: String) suspend fun activateTask(task: Task) suspend fun activateTask(taskId: String) suspend fun clearCompletedTasks() suspend fun deleteAllTasks() suspend fun deleteTask(taskId: String)&#125; å¯ä»¥çœ‹åˆ°ä¸¤è€…çš„æ–¹æ³•å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼šåå­—å’Œæ•°é‡ç›¸åŒï¼ŒåŒºåˆ«ä»…ä»…åœ¨äºTasksRepositoryä¸­çš„ä¸ªåˆ«æ–¹æ³•å¤šäº†forceUpdateå‚æ•°ã€‚ä¸è¿‡ï¼Œè¿™ä¸¤ä¸ªæ¥å£åœ¨è¯­ä¹‰ä¸Šæ˜¯ä¸åŒçš„ã€‚ TasksDatasourceæ˜¯åº•å±‚æ•°æ®å°è£…ï¼Œæ•°æ®å¯èƒ½æ¥è‡ªç½‘ç»œï¼Œä¹Ÿå¯èƒ½æ¥è‡ªäºæ–‡ä»¶ã€æ•°æ®åº“ã€‚ TasksRepositoryæ˜¯æ•°æ®å±‚å¯¹å¤–çš„æ¥å£ï¼Œä¸šåŠ¡ä»£ç é€šè¿‡è¯¥æ¥å£å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚forceUpdateå‚æ•°ä½œç”¨äºæ¥å£å®ç°ç±»å†…éƒ¨çš„ç¼“å­˜ã€‚ suspendå…³é”®å­—è¯´æ˜å®ƒä»¬å‡ä¸º Coroutines æ¥å£ã€‚ ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹å¯¹å¤–çš„æ¥å£æ˜¯å¦‚ä½•ç»™åˆ°ä½¿ç”¨è€…çš„ã€‚TodoApplicationç±»ç»§æ‰¿è‡ªApplicationï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡taskRepositoryã€‚ 12345678910111213141516171819// TodoApplication.ktval taskRepository: TasksRepository get() = ServiceLocator.provideTasksRepository(this) // ServiceLocator.ktfun provideTasksRepository(context: Context): TasksRepository &#123; synchronized(this) &#123; return tasksRepository ?: tasksRepository ?: createTasksRepository(context) &#125;&#125;private fun createTasksRepository(context: Context): TasksRepository &#123; return DefaultTasksRepository(FakeTasksRemoteDataSource, createTaskLocalDataSource(context))&#125;// TodoApplication.taskRepository é€šè¿‡ Fragment çš„æ‰©å±•æ–¹æ³•ç»™åˆ°å„ä¸ª Fragment// FragmentExt.ktfun Fragment.getViewModelFactory(): ViewModelFactory &#123; val repository = (requireContext().applicationContext as TodoApplication).taskRepository return ViewModelFactory(repository)&#125; local ç›®å½•ï¼šæœ¬åœ°æ•°æ®å®ç°local ç›®å½•ä¸‹æ˜¯TasksDatasourceçš„æœ¬åœ°å®ç°ï¼Œä¸æ­¤ç›¸å¯¹çš„ï¼Œè‹¥æ•°æ®æ¥æºäºç½‘ç»œï¼Œåˆ™è¿˜åº”å½“æœ‰ä¸€ä¸ª remote ç›®å½•ã€‚ ToDoDatabase æ˜¯æ•°æ®åº“å£°æ˜ TasksDao å£°æ˜ tasks è¡¨çš„ CRUD æ“ä½œ TasksLocalDataSource æ˜¯TasksDataSourceçš„æœ¬åœ°å®ç°ï¼Œä½¿ç”¨Dispatchers.IOä½œä¸ºåç¨‹ä¸Šä¸‹æ–‡ï¼Œè°ƒç”¨TasksDaoå®Œæˆæ•°æ®æ“ä½œ æ•°æ®å±‚æ€»ç»“ç›¸æ¯”äºæ›¾ç»åˆ†æè¿‡çš„todo-mvpå’Œtodo-mvp-cleanï¼Œæœ€ç›´è§‚çš„æ„Ÿå—æ˜¯ï¼Œv2åœ¨ä¿è¯æ•°æ®æ¥å£è¯­ä¹‰ä¸å˜çš„å‰æä¸‹ï¼Œå€ŸåŠ© Coroutines ç®€åŒ–äº†åŸæœ‰çš„å›è°ƒå†™æ³•ï¼Œç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥çš„ä»£ç ã€‚æ­¤å¤–ï¼Œåƒä½¿ç”¨ Room åš ORMã€local/remote ä¸¤å¥—æ•°æ®å®ç°ç­‰ï¼Œä¸ä¹‹å‰çš„é¡¹ç›®å¹¶æ— ä¸åŒã€‚ ViewModelèƒŒæ™¯çŸ¥è¯†ï¼šViewModel ä¸ LiveDataViewModel ä¸ LiveData éƒ½æ˜¯ Android Jetpack ä¸­çš„æ¶æ„ç»„ä»¶ï¼Œå®ƒä»¬é€šå¸¸ç»„åˆä½¿ç”¨ï¼Œè¾¾åˆ°å°†æ•°æ®å’Œè§†å›¾è§£è€¦çš„ç›®çš„ã€‚ jetpack ViewModel é¿å…å±å¹•æ—‹è½¬ç­‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¿å­˜åœ¨ Activity ä¸­çš„æ•°æ®è¢«é”€æ¯å¹¶é‡å»º å¼‚æ­¥å›è°ƒæ—¶é˜²æ­¢å†…å­˜æ³„æ¼ã€Context ä¸º Null å°†æ•°æ®å’Œè§†å›¾è§£è€¦ï¼Œé˜²æ­¢å‡ºç° God Activities å’Œ God Fragments viewmodel LiveData DataBinding æ€æƒ³çš„ä¸€ç§å®ç°ï¼Œæ•°æ®/è§†å›¾åŒå‘ç»‘å®š ä¸ç”Ÿå‘½å‘¨æœŸå…³è”ï¼Œé¡µé¢é”€æ¯åè‡ªåŠ¨å°†å…¶ä»è®¢é˜…è€…åˆ—è¡¨å»é™¤ ViewModelFactoryViewModel çš„åˆ›å»ºé‡‡ç”¨å·¥å‚æ¨¡å¼è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚ 12345678910111213141516171819202122// ViewModelFactory.kt@Suppress(\"UNCHECKED_CAST\")class ViewModelFactory constructor( private val tasksRepository: TasksRepository) : ViewModelProvider.NewInstanceFactory() &#123; override fun &lt;T : ViewModel&gt; create(modelClass: Class&lt;T&gt;) = with(modelClass) &#123; when &#123; isAssignableFrom(StatisticsViewModel::class.java) -&gt; StatisticsViewModel(tasksRepository) isAssignableFrom(TaskDetailViewModel::class.java) -&gt; TaskDetailViewModel(tasksRepository) isAssignableFrom(AddEditTaskViewModel::class.java) -&gt; AddEditTaskViewModel(tasksRepository) isAssignableFrom(TasksViewModel::class.java) -&gt; TasksViewModel(tasksRepository) else -&gt; throw IllegalArgumentException(\"Unknown ViewModel class: $&#123;modelClass.name&#125;\") &#125; &#125; as T&#125; è¿˜è®°å¾—ä¸Šæ–‡æåˆ°è¿‡ä¸º Fragment å¢åŠ çš„æ‰©å±•å‡½æ•°å—ï¼Ÿåœ¨æ¯ä¸€ä¸ªé¡µé¢ï¼ˆFragmentï¼‰é‡Œé€šè¿‡è¿™ä¸ªæ‰©å±•å‡½æ•°è·å–åˆ°å·¥å‚ç±»ï¼Œè¿›è€Œè·å¾—å¯¹åº” ViewModel ç±»çš„å®ä¾‹ã€‚ 1234567891011// FragmentExt.ktfun Fragment.getViewModelFactory(): ViewModelFactory &#123; val repository = (requireContext().applicationContext as TodoApplication).taskRepository return ViewModelFactory(repository)&#125;// TasksFragment.ktclass TasksFragment : Fragment() &#123; private val viewModel by viewModels&lt;TasksViewModel&gt; &#123; getViewModelFactory() &#125; // ...&#125; æ¥ä¸‹æ¥æ˜¯ ViewModel ç±»ï¼Œå®ƒæ‰¿æ‹…äº†ä¸ Presenter ç±»ä¼¼çš„èŒè´£ï¼Œæ˜¯å¤„ç†ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ã€‚å¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ª Domain å±‚ï¼Œè´Ÿè´£æå–å‡ºæ¥çš„ä¸šåŠ¡é€»è¾‘ï¼ˆUse casesï¼‰ï¼Œæä¾›å¤ç”¨ï¼Œè¿™æ ·å°±å˜æˆäº† MVVM-Clean æ¨¡å¼ã€‚åœ¨ master åˆ†æ”¯ä¸Šè¿˜æ²¡æœ‰ domain å±‚ã€‚ TasksViewModelViewModel æ¥å—ä¸€ä¸ª TasksRepository å‚æ•°ï¼Œç”¨ä½œæ•°æ®å±‚æ¥å£ã€‚ï¼ˆåœ¨cleanæ¶æ„é‡Œï¼Œè¿™é‡Œä¼ å…¥çš„ä¸æ˜¯Repositoryï¼Œè€Œæ˜¯UseCasesï¼‰ã€‚ 12345class TasksViewModel( private val tasksRepository: TasksRepository) : ViewModel() &#123; // ...&#125; éšåå£°æ˜äº†ä¸€ç³»åˆ—å˜é‡ä½œä¸ºé¡µé¢æ•°æ®&amp;çŠ¶æ€ï¼Œè¿™é‡Œé‡‡ç”¨â€œä¸€ä¸ªå¯¹è±¡ï¼Œä¸¤ä¸ªå˜é‡â€çš„æˆå¯¹å†™æ³•ï¼Œç•¥æ˜¾ç¹çï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰æ›´ä¼˜ç¾çš„å¤„ç†æ–¹æ³•ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æŠŠå¯¹å˜é‡çš„ä¿®æ”¹å…³é—­ï¼Œå¯¹å¤–ï¼ˆå³LiveDataï¼‰ä»…æä¾›è¯»å–å˜é‡çš„æ¥å£ï¼Œåªå¯ä»¥åœ¨ ViewModel å†…éƒ¨ä¿®æ”¹å˜é‡ã€‚ 123456789101112131415161718192021222324252627282930313233private val _items = MutableLiveData&lt;List&lt;Task&gt;&gt;().apply &#123; value = emptyList() &#125; // ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„ä¸ºç§æœ‰å˜é‡ï¼Œapply å’Œ with çš„ç”¨æ³•è¦åˆ†æ¸…ï¼Œç›¸å½“äºè°ƒç”¨ _items.setValue(emptyList()); return _items;val items: LiveData&lt;List&lt;Task&gt;&gt; = _itemsprivate val _dataLoading = MutableLiveData&lt;Boolean&gt;()val dataLoading: LiveData&lt;Boolean&gt; = _dataLoadingprivate val _currentFilteringLabel = MutableLiveData&lt;Int&gt;()val currentFilteringLabel: LiveData&lt;Int&gt; = _currentFilteringLabelprivate val _noTasksLabel = MutableLiveData&lt;Int&gt;()val noTasksLabel: LiveData&lt;Int&gt; = _noTasksLabelprivate val _noTaskIconRes = MutableLiveData&lt;Int&gt;()val noTaskIconRes: LiveData&lt;Int&gt; = _noTaskIconResprivate val _tasksAddViewVisible = MutableLiveData&lt;Boolean&gt;()val tasksAddViewVisible: LiveData&lt;Boolean&gt; = _tasksAddViewVisibleprivate val _snackbarText = MutableLiveData&lt;Event&lt;Int&gt;&gt;()val snackbarText: LiveData&lt;Event&lt;Int&gt;&gt; = _snackbarTextprivate var _currentFiltering = TasksFilterType.ALL_TASKS // Not used at the moment private val isDataLoadingError = MutableLiveData&lt;Boolean&gt;()private val _openTaskEvent = MutableLiveData&lt;Event&lt;String&gt;&gt;()val openTaskEvent: LiveData&lt;Event&lt;String&gt;&gt; = _openTaskEventprivate val _newTaskEvent = MutableLiveData&lt;Event&lt;Unit&gt;&gt;()val newTaskEvent: LiveData&lt;Event&lt;Unit&gt;&gt; = _newTaskEvent// This LiveData depends on another so we can use a transformation.val empty: LiveData&lt;Boolean&gt; = Transformations.map(_items) &#123; it.isEmpty()&#125; å¯ä»¥è¯´ç®¡ç†ä¸Šé¢è¿™äº›æ•°æ®æ˜¯ ViewModel æœ€ä¸»è¦çš„èŒè´£äº†ï¼Œä»åŠŸèƒ½ä¸ŠåŒºåˆ†ï¼Œè¿™äº›æ•°æ®å¯ä»¥åˆ†æˆ3ç§ã€‚ ä¸šåŠ¡å®ä½“å¦‚ itemsï¼ˆä»»åŠ¡å¯¹è±¡åˆ—è¡¨ï¼‰ï¼ŒViewModel é€šè¿‡ä¿®æ”¹è¿™ç±»å¯¹è±¡ï¼Œå€ŸåŠ©äº DataBinding æ›´æ–° UI æ•°æ®çŠ¶æ€å¯¹è±¡å¦‚ dataLoadingï¼ˆæ˜¯å¦æ­£åœ¨åŠ è½½æ•°æ®ï¼‰ã€currentFilteringLabelï¼ˆå½“å‰çš„è¿‡æ»¤å™¨æ–‡å­—ï¼‰ã€noTasksLabelï¼ˆæ²¡æœ‰ä»»åŠ¡çš„æ–‡å­—ï¼‰ã€snackbarTextï¼ˆæç¤ºæ æ–‡å­—ï¼‰ï¼Œè¿™ä¸€ç±»å¯¹è±¡ä¸è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ï¼Œä½†æ˜¯ä¹Ÿä¼šå½±å“åˆ° UI æ˜¾ç¤º äº‹ä»¶åŒ…è£…å¯¹è±¡å¦‚ openTaskEventï¼ˆæ‰“å¼€æŸä¸ªä»»åŠ¡ï¼Œåœ¨ç‚¹å‡»åˆ—è¡¨ä¸­çš„ä»»åŠ¡æ—¶è§¦å‘ï¼‰ã€newTaskEventï¼ˆåˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œåœ¨ç‚¹å‡»+æ—¶è§¦å‘ï¼‰ï¼Œå®ƒä»¬è´Ÿè´£é€šçŸ¥é¡µé¢è¿›è¡Œè·³è½¬â€”â€”è¿™éƒ¨åˆ†è®¾è®¡å¾—ä¸ä½³ï¼Œä¸ºäº† DataBinding è€Œå¼ºè¡Œ DataBinding æ€»ä¹‹è´¯å½»çš„æ€æƒ³æ˜¯ï¼šä¸€åˆ‡å˜åŠ¨éƒ½æ˜¯æ•°æ®å˜åŠ¨ï¼Œæ•°æ®å˜åŠ¨é€šè¿‡ DataBinding è‡ªåŠ¨æŠ•å°„åˆ° UIã€‚ è§†å›¾è§†å›¾ä¹Ÿå°±æ˜¯TasksFragment.ktç±»ï¼Œè´Ÿè´£åˆå§‹åŒ–å¸ƒå±€ï¼Œè§¦å‘ ViewModel è¿›è¡Œé¦–æ¬¡åŠ è½½ã€‚è¿™é‡Œçš„ Fragment ç»§æ‰¿è‡ª androidx ä¸­çš„ Fragmentã€‚ åœ¨onCreateViewé‡Œåˆå§‹åŒ– DataBindingï¼ˆæ•°æ®ï¼‰ã€‚ 12345678910override fun onCreateView( inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? &#123; viewDataBinding = TasksFragBinding.inflate(inflater, container, false).apply &#123; viewmodel = viewModel &#125; setHasOptionsMenu(true) return viewDataBinding.root&#125; åœ¨onActivityCreatedé‡Œåˆå§‹åŒ– UIï¼ˆè§†å›¾ï¼‰ï¼Œåˆå§‹åŒ–å®Œæˆåå¯åŠ¨åŠ è½½ï¼ˆä»£ç æœ€åä¸€è¡Œï¼‰ã€‚ 123456789101112131415override fun onActivityCreated(savedInstanceState: Bundle?) &#123; super.onActivityCreated(savedInstanceState) // Set the lifecycle owner to the lifecycle of the view viewDataBinding.lifecycleOwner = this.viewLifecycleOwner setupSnackbar() setupListAdapter() setupRefreshLayout(viewDataBinding.refreshLayout, viewDataBinding.tasksList) setupNavigation() setupFab() // Always reloading data for simplicity. Real apps should only do this on first load and // when navigating back to this destination. TODO: https://issuetracker.google.com/79672220 viewModel.loadTasks(true)&#125; æ­¤å¤–ï¼ŒFragment ä¸­è¿˜ä¼šè¿›è¡Œè®¾ç½® OnClickListenerã€Adapter ç­‰æ“ä½œï¼Œæ¯”è¾ƒç®€å•ï¼Œä¸èµ˜è¿°ã€‚ æ€»ç»“v2 çš„é¡¹ç›®è®¾è®¡æ—¶é‡‡å–äº† MVVM æ€æƒ³ï¼Œæ—¨åœ¨è§£å†³ MVP æ¨¡å¼ä¸‹Presenter å±‚è¿‡äºåºå¤§çš„é—®é¢˜ã€‚å…¶å® MVP-Clean æ¨¡å¼å·²ç»å¯¹æ­¤æœ‰ä¸€äº›ç¼“è§£ã€‚è€Œ MVVM åšçš„æ›´å½»åº•ï¼Œå¹²è„†æŠŠæ•°æ®å¯¹ UI çš„æ§åˆ¶å®Œå…¨äº¤ç»™æ¡†æ¶è‡ªåŠ¨è¿›è¡Œã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹ï¼Œæ¯”å¦‚ä¸€æ—¦å‡ºäº†é—®é¢˜ï¼Œå¦‚æœæ²¡æœ‰æŒæ¡ä¸ªä¸­åŸç†ï¼Œè°ƒè¯•æ—¶å¿…å®šæ‘¸ä¸æ¸…å¤´ç»ªã€‚æ€»è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ ä¸å°è¯•çš„æ¶æ„è®¾è®¡ã€‚ Bonusï¼šusecasesusecases æ˜¯ v2 ä¸­çš„ä¸€ä¸ª Stable åˆ†æ”¯ï¼ˆå¦ä¸€ä¸ªæ˜¯dagger-android)ã€‚usecases ä»¥è§£è€¦ã€æŠ½è±¡ã€å•å‘ä¾èµ–ä¸ºæ ¸å¿ƒè®¾è®¡ç†å¿µï¼Œè¿™ä¹Ÿæ˜¯ Clean æ¶æ„çš„æ ¸å¿ƒæ€æƒ³ã€‚ è¡¨ç°å±‚åªèƒ½è®¿é—®åˆ°é¢†åŸŸå±‚/ç”¨ä¾‹å±‚ï¼Œä¸çŸ¥é“æ•°æ®å±‚çš„å­˜åœ¨ é¢†åŸŸå±‚/ç”¨ä¾‹å±‚åªèƒ½è®¿é—®åˆ°æ•°æ®å±‚ï¼Œæ— æ³•è®¿é—®è¡¨ç°å±‚ æ•°æ®å±‚æ— æ³•è®¿é—®è¡¨ç°å±‚å’Œé¢†åŸŸå±‚ é¢†åŸŸå±‚ï¼ˆæˆ–è€…å«ç”¨ä¾‹å±‚ï¼‰ï¼Œå³ Domain Layerï¼Œæ˜¯ç”±å¤šä¸ª UseCase ç»„æˆçš„ï¼Œæ¯ä¸€ä¸ª UseCase å¯¹åº”ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ã€‚ä»¥â€œåŠ è½½å•ä¸ªTaskâ€ä¸ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ° UseCase é‡Œç›´æ¥å°†è¯·æ±‚è½¬å‘ç»™ TasksRepository æ¥å¤„ç†ï¼Œé€»è¾‘ååˆ†ç®€å•ã€‚ åœ¨åˆ†æå…·ä½“å·®åˆ«ä¹‹å‰ï¼Œå¯ä»¥å…ˆçœ‹ä¸€é usecase åˆ†æ”¯ä¸ master åˆ†æ”¯çš„ diffï¼šhttps://github.com/googlesamples/android-architecture/compare/usecases#files_bucket GetTaskUseCase.kt 123456789class GetTaskUseCase private val tasksRepository: TasksRepository ) &#123; suspend operator fun invoke(taskId: String, forceUpdate: Boolean = false): Result&lt;Task&gt; &#123; wrapEspressoIdlingResource &#123; return tasksRepository.getTask(taskId, forceUpdate) &#125; &#125; &#125; è€Œè·å– Tasks åˆ—è¡¨çš„ Usecase ç›¸å¯¹å¤æ‚ä¸€äº›ï¼ŒåŒ…æ‹¬äº†åŸæœ¬åœ¨ TasksViewModel ä¸­å¤„ç†çš„è¿‡æ»¤é€»è¾‘ï¼Œä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œè¿™ç›¸å½“äºå‡è½»äº† ViewModel çš„è´Ÿæ‹…ã€‚ 123456789101112131415161718192021222324252627282930313233343536class GetTasksUseCase( private val tasksRepository: TasksRepository) &#123; suspend operator fun invoke( forceUpdate: Boolean = false, currentFiltering: TasksFilterType = ALL_TASKS ): Result&lt;List&lt;Task&gt;&gt; &#123; wrapEspressoIdlingResource &#123; val tasksResult = tasksRepository.getTasks(forceUpdate) // Filter tasks if (tasksResult is Success &amp;&amp; currentFiltering != ALL_TASKS) &#123; val tasks = tasksResult.data val tasksToShow = mutableListOf&lt;Task&gt;() // We filter the tasks based on the requestType for (task in tasks) &#123; when (currentFiltering) &#123; ACTIVE_TASKS -&gt; if (task.isActive) &#123; tasksToShow.add(task) &#125; COMPLETED_TASKS -&gt; if (task.isCompleted) &#123; tasksToShow.add(task) &#125; else -&gt; NotImplementedError() &#125; &#125; return Success(tasksToShow) &#125; return tasksResult &#125; &#125;&#125; è‡³äº ViewModel é‡Œï¼Œå°†åŸæ¥çš„ Repository å‚æ•°æ”¹ä¸ºå½“å‰ ViewModel ç”¨åˆ°çš„ UseCase å‚æ•°å³å¯ï¼Œæ‰€æœ‰å¤„ç†æ•°æ®çš„è¯·æ±‚éƒ½æœ‰ UseCase æ¥æ¥ç®¡ã€‚ TasksViewModel.kt 12345678class TasksViewModel( private val getTasksUseCase: GetTasksUseCase, private val clearCompletedTasksUseCase: ClearCompletedTasksUseCase, private val completeTaskUseCase: CompleteTaskUseCase, private val activateTaskUseCase: ActivateTaskUseCase) : ViewModel() &#123;// ...&#125; Over~","tags":[{"name":"æ¶æ„","slug":"æ¶æ„","permalink":"https://lilei.pro/tags/æ¶æ„/"}]},{"title":"ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹å‹˜è¯¯è¡¨ 2019-08-27","date":"2019-08-27T15:53:23.000Z","path":"2019/08/27/jcip-errata/","text":"Java Concurrency in Practice æ˜¯ä¸€æœ¬è®²è§£ JVM ä¸‹å¹¶å‘ç¼–ç¨‹çŸ¥è¯†çš„ç»å…¸ä½œå“ï¼Œå»ºè®®æœ‰å¿—äºèµ„æ·±çš„ Java å·¥ç¨‹å¸ˆå°†å…¶çº³å…¥è‡ªå·±çš„è¯»ä¹¦è®¡åˆ’ä¸­ï¼Œç›¸ä¿¡ä¸€å®šä¼šå¤§æœ‰è£¨ç›Šã€‚ åœ¨é˜…è¯»è¿™æœ¬ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä¸­æ–‡ç‰ˆæœ¬æœ‰å¾ˆå¤šæ˜¾è€Œæ˜“è§çš„é”™è¯¯ï¼Œå°¤å…¶æ˜¯ä»£ç é‡Œæ¡ä»¶åˆ¤æ–­æœ‰æ—¶æ ¹æœ¬æ˜¯åç€æ¥çš„ï¼ˆæœ¬åº”æ˜¯&gt;=çš„æ¡ä»¶ï¼Œä¹¦é‡Œé¢å´æ˜¯&lt;ï¼‰ã€‚Google æœç´¢ä¹‹åå‘ç°åœ¨ http://jcip.net/errata.html æœ‰è‹±æ–‡åŸç‰ˆçš„å‹˜è¯¯è¡¨ï¼Œç”±äºä¸­æ–‡ç‰ˆæœ¬æ²¡æœ‰å‹˜è¯¯è¡¨ï¼Œæ•…ç¿»è¯‘åœ¨æ­¤ï¼Œå¸Œæœ›å¯ä»¥æœ‰æ‰€å¸®åŠ©ã€‚ ä½¿ç”¨ä¹‹å‰è¯·ç¡®è®¤è‡ªå·±æ‰‹ä¸­çš„ä¹¦ç±ç‰ˆæœ¬æ˜¯å¦ç›¸ç¬¦ã€‚ æœ¬æ–‡é€‚ç”¨çš„ä¸­æ–‡ç‰ˆæœ¬ ä¹¦åï¼šã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ï¼ŒJava Concurrency in Practice ä½œè€…ï¼šBrain Goetz, Tim Peierls ç­‰ è¯‘è€…ï¼šç«¥äº‘å…° ç­‰ ISBNï¼š978-7-111-37004-8 å‡ºç‰ˆç¤¾ï¼šæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾ å‡ºç‰ˆæ—¶é—´ï¼š2012.2 ç¬¬ä¸€ç‰ˆï¼Œ2018.9 é‡å° å®šä»·ï¼š69 å…ƒ è±†ç“£é“¾æ¥ï¼šhttps://book.douban.com/subject/10484692/ å‹˜è¯¯æ•°æ®æ¥æºå®˜æ–¹å‹˜è¯¯è¡¨ ä¸­æ–‡ç‰ˆå‹˜è¯¯è¡¨ é¡µç  å‹˜è¯¯ p.5 ç¨‹åºæ¸…å• 1-1 ä¸‹é¢çš„ç¬¬ä¸€æ®µï¼ŒsomeVariable++åº”ä¸ºvalue++ p.6 ç¨‹åºæ¸…å• 1-2ï¼ŒValueåº”ä¸ºvalue p.53 4.3 èŠ‚ä¸Šé¢çš„æœ€åä¸€æ®µï¼ŒgetLocationåº”ä¸ºgetLocations p.58 ç¨‹åºæ¸…å• 4-11ï¼ŒSafePoint(int x, int y)æ„é€ å‡½æ•°çš„å‡½æ•°ä½“å¯ä»¥ç²¾ç®€ä¸ºset(x, y) p.62 ç¨‹åºæ¸…å• 4-16ï¼Œif(contains)åº”ä¸ºif(!contains) p.75 5.3.1 ç¬¬ä¸€æ®µï¼ŒDiskCrawleråº”ä¸ºFileCrawler p.100 ç¨‹åºæ¸…å• 6-7 ä¸‹é¢ç¬¬äºŒæ®µï¼Œåœ¨ ExcutorService å…³é—­åæäº¤çš„ä»»åŠ¡å°†ç”±â€œæ‹’ç»æ‰§è¡Œå¤„ç†å™¨ï¼ˆRejected Execution Handlerï¼‰æ¥å¤„ç†è¡¨è¿°æœ‰è¯¯ï¼ŒRejected Execution Handleræ˜¯ä»…åœ¨ThreadPoolExecutorå®ç°ä¸­æä¾›çš„ï¼Œå¹¶éæ‰€æœ‰çš„ExecutorServiceå®ç°éƒ½å…·å¤‡æ­¤åŠŸèƒ½ p.122 ç¬¬äºŒè¡Œï¼Œé‚£ä¹ˆè°ƒç”¨ close æˆ– wakeup æ–¹æ³•ä¼šä½¿çº¿ç¨‹æŠ›å‡º ClosedSelectorExceptionï¼Œåªæœ‰closeæ–¹æ³•ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œwakeupæ–¹æ³•ä¸ä¼š p.163 ç¨‹åºæ¸…å• 9-6ï¼Œç¬¬ä¸€ä¸ªif(runningTask != null)åˆ¤æ–­æ¡ä»¶åº”ä¸º(runningTask == null) p.214 ç¨‹åºæ¸…å• 12-9ï¼ŒExecutors.newFixedThreadPool(MAX_SIZE)æ–¹æ³•è°ƒç”¨åº”è¯¥å¢åŠ ç¬¬äºŒä¸ªå‚æ•°threadFactory p.229 ç¨‹åºæ¸…å• 13-3ï¼Œä»£ç å€’æ•°ç¬¬ä¸‰è¡Œif (System.nanoTime() &lt; stopTime)åˆ¤æ–­æ¡ä»¶é‡Œçš„&lt;åº”ä¸º&gt;= ä»¥ä¸Šå°±æ˜¯ä¸­æ–‡ç‰ˆã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹çš„å‹˜è¯¯è¡¨ï¼Œå¦‚æœ‰é—æ¼ï¼Œæ¬¢è¿é€šè¿‡æ–‡æœ«ç•™è¨€è”ç³»æˆ‘è¿›è¡Œè¡¥å……ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://lilei.pro/tags/Java/"}]},{"title":"æ¶æ„å­¦ä¹ ä¹‹ mvp-clean","date":"2019-08-20T16:11:55.000Z","path":"2019/08/21/architecture-todo-mvp-clean/","text":"I am the STORM!!! ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº† MVP æ¨¡å¼ï¼Œä½œä¸º Android æœ€æœ´å®çš„æ¶æ„ï¼ŒMVP è¶³ä»¥åº”å¯¹å¤æ‚åº¦è¾ƒä½çš„ä¸šåŠ¡åœºæ™¯ï¼Œå›æƒ³ 2014~2015 å¹´åœ¨ DP åšé¢„è®¢é—ªæƒ çš„æ—¥å­ï¼Œç”¨çš„ä¾¿æ˜¯ MVPã€‚ ç„¶è€Œéšç€ä¸šåŠ¡å¤æ‚åº¦å¢åŠ ï¼ŒPresenter å±‚çš„é€»è¾‘ä¼šéšä¹‹å˜é‡ï¼Œå¯¼è‡´çš„ç»“æœä¾¿æ˜¯ Presenter ç±»è¿‡å¤§ï¼ŒåŠ¨è¾„ä¸€ä¸¤åƒè¡Œä»£ç ï¼Œå®åœ¨æ˜¯ä¸‘é™‹ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒClean æ¶æ„æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ å…³äº Cleanä»€ä¹ˆæ˜¯ Clean CleanArchitecture Clean æ¶æ„æœ€åˆå¹¶ä¸æ˜¯ä¸ºäº†é’ˆå¯¹ Android å¹³å°çš„é—®é¢˜è€Œæå‡ºï¼Œè€Œæ˜¯ä½œä¸ºè½¯ä»¶ç³»ç»Ÿçš„é€šç”¨æ¶æ„è¢«è®¾è®¡å‡ºæ¥ï¼Œå¦‚ä¸Šé¢çš„åŒå¿ƒåœ†æ‰€ç¤ºï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯The Dependency Ruleï¼ˆå•å‘ä¾èµ–åŸåˆ™ï¼‰ï¼Œå³åªèƒ½ä»å¤–å±‚å‘å†…å±‚ä¾èµ–ï¼Œå†…å±‚å¯¹å¤–å±‚ä¸€æ— æ‰€çŸ¥ï¼Œå¤–å±‚çš„å˜åŠ¨ä¸åº”å½“å½±å“åˆ°å†…å±‚ã€‚ å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µæ˜¯Use Caseï¼ˆç”¨ä¾‹ï¼‰ï¼Œç”¨ä¾‹æ˜¯ä¸šåŠ¡é€»è¾‘çš„æœ€å°æŠ½è±¡å•å…ƒï¼Œå®ƒè°ƒç”¨æ•°æ®æ¨¡å—çš„æ¥å£ï¼Œå‘ä¸Šï¼ˆPresenterï¼‰æä¾›ä¸šåŠ¡é€»è¾‘æ“ä½œå…¥å£ã€‚ Android Clean mvp-clean Android å¹³å°åœ¨ Presenter å’Œ Model ä¹‹é—´å®šä¹‰äº†Domain Layerï¼ˆåŸŸå±‚ï¼‰ï¼Œç”¨äºæ‰¿è½½Use Caseï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒUse Case çš„èƒŒåæ˜¯ä¸šåŠ¡é€»è¾‘ã€‚Domain Layer è„±èƒäº MVP çš„ Presenterï¼Œè¿™æ ·å¯ä»¥é¿å…ç›¸åŒçš„ä¸šåŠ¡é€»è¾‘ä»£ç å‡ºç°åœ¨ä¸¤ä¸ª Presenter ä¸­çš„é—®é¢˜ã€‚ Use Cases å¼‚æ­¥æ€§é‰´äº Domain Layer æ˜¯ UI æ— å…³çš„ï¼Œè¿™é‡Œå¯ä»¥ç»Ÿä¸€å°† Use Case æ”¾å…¥å·¥ä½œçº¿ç¨‹è¿è¡Œï¼Œé€šè¿‡å¼‚æ­¥å›è°ƒè¿›è¡Œé€šä¿¡ã€‚è‡³äºæ›´åº•å±‚çš„æ•°æ®åº“/ç½‘ç»œæ“ä½œï¼Œå‡ºäºç®€åŒ–çš„ç›®çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åŒæ­¥æ¥å£ã€‚ ä¸åŒ Layer æ˜¯å¦éœ€è¦å®šä¹‰å„è‡ªçš„ Modelæ ‡å‡†çš„åšæ³•æ˜¯åœ¨è§†å›¾å±‚ï¼ˆView Layerï¼‰ã€åŸŸå±‚ï¼ˆDomain Layerï¼‰å’Œæ•°æ®å±‚ï¼ˆData/Model Layerï¼‰åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å¯¹è±¡ï¼Œå¦‚ VOã€BOã€DO ç­‰ã€‚è¿™æ ·å¸¦æ¥çš„é—®é¢˜æ˜¯é‡å¤æ€§å¢åŠ ã€‚å¦‚æœå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œåœ¨å„å±‚ä¹‹é—´å…·æœ‰ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•ï¼Œåˆ™å¯ä»¥åªå®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå…±é€šä½¿ç”¨ã€‚ å¦‚æœè§†å›¾å±‚å¯¹è±¡åŒ…å« Android ç›¸å…³çš„æ–¹æ³•æˆ–å±æ€§ï¼Œåˆ™åº”å½“ä¸ºå…¶å•ç‹¬å®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åä½¿ç”¨Mapperåœ¨ä¸åŒå±‚ä¹‹é—´è¿›è¡Œå¯¹è±¡è½¬æ¢ã€‚ å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯è¿™é‡Œæˆ‘ä»¬å°† Clean æ¨¡å¼åº”ç”¨åœ¨ todo-app ä¸Šï¼Œæƒ³æƒ³è¿˜æœ‰ç‚¹å°æ¿€åŠ¨ã€‚ Use Cases &amp; Domain LayeræŠŠ Use Case çš„å£°æ˜å’Œè¿è¡Œæœºåˆ¶æ‹†å¼€ï¼Œæ˜¯ä¸æ˜¯è·Ÿ Runnable + Executor çš„æœºåˆ¶å¾ˆåƒï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„å‘½ä»¤æ¨¡å¼ã€‚è®¾è®¡æ¨¡å¼ä¸æ˜¯å½¼æ­¤å­¤ç«‹çš„ï¼Œä¸€ä¸ªé¡¹ç›®é‡Œå¯ä»¥æ•´ä½“é‡‡ç”¨ Clean æ¶æ„ï¼Œä¸åŒçš„å­æ¨¡å—ï¼Œåº”ç”¨ä¸åŒçš„è®¾è®¡æ¨¡å¼ã€‚è®¾è®¡æ¨¡å¼æ˜¯æ­»çš„ï¼Œäººæ˜¯æ´»çš„ã€‚ æŠ½è±¡ç±»UseCaseå³æ˜¯å‘½ä»¤ï¼ŒåŒ…å«å…¥å‚ã€å‡ºå‚ã€å›è°ƒé€šçŸ¥å¯¹è±¡ã€è¿è¡Œçš„æŠ½è±¡è¿‡ç¨‹ï¼ˆè¿™é‡Œåˆå‡ºç°äº†æ¨¡ç‰ˆæ¨¡å¼ï¼‰ã€‚ 12345678910111213141516171819public abstract class UseCase&lt;Q extends UseCase.RequestValues, P extends UseCase.ResponseValue&gt; &#123; private Q mRequestValues; private UseCaseCallback&lt;P&gt; mUseCaseCallback; // ä»»åŠ¡å®Œæˆåï¼ˆæˆåŠŸorå¤±è´¥ï¼‰çš„å›è°ƒ // ... // set and get //.. void run() &#123; // Executor è¿è¡Œå…¥å£ executeUseCase(mRequestValues); &#125; protected abstract voi8d executeUseCase(Q requestValues); // å­ç±»å¿…éœ€å®ä½“åŒ–è¿™ä¸ªæ–¹æ³• public interface RequestValues &#123;&#125; public interface ResponseValues &#123;&#125; // æ¥å£çº¦æŸ public interface UseCaseCallback&lt;R&gt; &#123; // ä»»åŠ¡å®Œæˆåçš„å›è°ƒ void onSuccess(R response); void onError(); &#125;&#125; ç„¶åé€‰å–ä¸€ä¸ªâ€œåŠ è½½å…¨éƒ¨ä»»åŠ¡â€çš„åœºæ™¯ä¸ºä¾‹ï¼Œçœ‹å®ƒæ˜¯å¦‚ä½•å®ç°æŠ½è±¡ç±»çš„ï¼Œä»¥ä¸‹æ˜¯GetTask.javaçš„éƒ¨åˆ†ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class GetTasks extends UseCase&lt;GetTasks.RequestValues, GetTasks.ResponseValues&gt; &#123; private final TasksRepository mTasksRepository; // æ›´åº•å±‚çš„æ•°æ®æºå¯¹è±¡ private final FilterFactory mFilterFactory; // è¿‡æ»¤å™¨å·¥å‚ç±» public GetTasks(@NonNull TaskRepository tasksRepository, @NonNull FilterFactory filterFactory) &#123; // æ„é€ æ—¶ä¼ å…¥æ•°æ®æºå¯¹è±¡å’Œè¿‡æ»¤å™¨å·¥å‚ mTasksRepository = checkNotNull(tasksRepository, \"tasksRepository cannot be null!\"); mFilterFactory = checkNotNull(filterFactory, \"filterFactory cannot be null!\"); &#125; @Override protected void executeUseCase(final RequestValues values) &#123; // åˆ©ç”¨æ³›å‹çº¦æŸï¼Œåœ¨ä¸åŒUseCaseå®ç°ç±»é‡Œä½¿ç”¨ä¸åŒå‚æ•° if (values.isForceUpdate()) &#123; mTasksRepository.refreshTasks(); &#125; mTasksRepository.getTasks(new TasksDataSource.LoadTasksCallback() &#123; // è°ƒç”¨æ•°æ®æºå¼‚æ­¥æ–¹æ³• @Override public void onTasksLoaded(List&lt;Task&gt; tasks) &#123; TasksFilterType currentFiltering = values.getCurrentFiltering(); TaskFilter taskfilter = mFilterFactory.create(currentFiltering); List&lt;Task&gt; tasksFiltered = taskFilter.filter(tasks); ResponseValue responseValue = new ResponseValue(tasksFiltered); getUseCaseCallback().onSuccess(responseValue); &#125; @Override public void onDataNotAvailable() &#123; getUseCallback().onError(); &#125; &#125;); &#125; public static final class RequestValues implements UseCase.RequestValues &#123; private final TasksFilterType mCurrentFiltering; private final boolean mForceUpdate; // ... // constructor, get and set // ... &#125; public static final class ResponseValues implements UseCase.ResponseValues &#123; private final List&lt;Task&gt; mTasks; // ... &#125;&#125; æˆ‘åœ¨ä¸Šè¿°ä»£ç çš„æ³¨é‡Šé‡Œå¢åŠ äº†ä¸€äº›è¯´æ˜ï¼Œæ­¤å¤–ï¼Œæœ‰å‡ å¤„éœ€è¦é¢å¤–çš„æ³¨æ„ï¼š Use Case æ„é€ å‡½æ•°é‡Œéœ€è¦ä¼ å…¥åº•å±‚æ•°æ®æºå¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä¸å¯ä»¥åœ¨ Presenter å±‚ç›´æ¥æ„é€  Use Caseï¼Œå› ä¸º Presenter ä¸åº”å½“è·¨è¿‡ Domain Layer ç›´æ¥è®¿é—®æ•°æ®æºã€‚â€”â€” æƒ³æƒ³å¦‚ä½•å®ç°ï¼ŸIOCï¼ŒDIï¼ŒBingoï¼ åœ¨ Use Case çš„ç±»å†…éƒ¨ï¼Œä»¥é™æ€ç±»çš„æ–¹å¼å£°æ˜RequestValueså’ŒResponseValuesï¼Œä»£ç é›†ä¸­ï¼Œæ˜“äºç®¡ç†ã€‚UseCase.javaåŸºç±»ä¸­æä¾›çš„ç©ºæ¥å£ä¹Ÿåˆ©äºä¸åŒçš„å­ç±»å£°æ˜å„è‡ªä¸åŒçš„å‚æ•°ç±»å‹ã€‚åœ¨æ¨¡ç‰ˆæ–¹æ³•executeUseCaseé‡Œåˆ†åˆ«è¿›è¡Œè°ƒç”¨ï¼ŒåŒ–å…ƒå½’ä¸€ã€‚ Executorï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶å‘½ä»¤æ¨¡å¼ç”±å‘½ä»¤ä¸æ‰§è¡Œæœºåˆ¶ä¸¤éƒ¨åˆ†ç»„æˆï¼ŒJava ä¸­çš„Executoræ¡†æ¶å°±æ˜¯ä¸€ç§å…¸å‹åº”ç”¨ã€‚è™½ç„¶Executoråªæ˜¯ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œä½†å®ƒå´ä¸ºçµæ´»è€Œå¼ºå¤§çš„å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ¡†æ¶æä¾›äº†åŸºç¡€ï¼Œè¯¥æ¡†æ¶èƒ½æ”¯æŒå¤šç§ä¸åŒç±»å‹çš„ä»»åŠ¡æ‰§è¡Œç­–ç•¥ã€‚å®ƒæä¾›äº†ä¸€ç§æ ‡å‡†çš„æ–¹æ³•å°†ä»»åŠ¡çš„æäº¤è¿‡ç¨‹å’Œæ‰§è¡Œè¿‡ç¨‹è§£è€¦å¼€æ¥ã€‚ 1234// Java ä¸­çš„ Executorï¼Œä¸è´Ÿè´£è¿è¡Œç»“æœé€šçŸ¥public interface Executor &#123; void execute(Runnable command);&#125; é¡¹ç›®é‡Œä½¿ç”¨åŒæ ·çš„æœºåˆ¶ä½œä¸ºUseCaseçš„è¿è¡Œæ¡†æ¶ã€‚ UseCaseScheduler.java 1234567public interface UseCaseScheduler &#123; // todo-mvp-clean ä¸­çš„ Executor void execute(Runnable runnable); // å¢åŠ ç»“æœé€šçŸ¥å›è°ƒ &lt;V extends UseCase.ResponseValue&gt; void notifyResponse(final V response, final UseCase.UseCaseCallback&lt;V&gt; useCaseCallback); &lt;V extends UseCase.ResponseValue&gt; void onError(final UseCase.UseCaseCallback&lt;V&gt; useCaseCallback);&#125; å®ƒçš„å®ç°ç±»é‡‡ç”¨çº¿ç¨‹æ± æ–¹å¼å®ç°ï¼š UseCaseThreadPoolScheduler.java 1234567891011121314151617181920212223242526272829303132333435public class UseCaseThreadPoolScheduler implements UseCaseScheduler &#123; private final Handler mHandler = new Handler(); // å°†è¿ç®—ç»“æœé€šçŸ¥ä¸»çº¿ç¨‹ public static final int POOL_SIZE = 2; public static final int MAX_POOL_SIZE = 4; public static final int TIMEOUT = 30; ThreadPoolExecutor mThreadPoolExecutor; // ä½¿ç”¨çº¿ç¨‹æ± æä¾›å¤ç”¨ public UseCaseThreadPoolScheduler() &#123; mThreadPoolExecutor = new ThreadPoolExecutor(POOL_SIZE, MAX_POOL_SIZE, TIMEOUT, TimeUnit.SECONDS, new ArrayBlockingQueue&lt;Runnable&gt;(POOL_SIZE)); &#125; @Override public void execute(Runnable runnable) &#123; mThreadPoolExecutor.execute(runnable); // ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± å¤„ç† &#125; @Override public &lt;V extends UseCase.ResponseValue&gt; void notifyResponse(final V response, final UseCase.UseCaseCallback&lt;V&gt; useCaseCallback) &#123; mHandler.post(new Runnable() &#123; @Override public void run() &#123; useCaseCallback.onSuccess(response); // ä¸»çº¿ç¨‹å¤„ç†ç»“æœ &#125; &#125;); &#125; @Override public &lt;V extends UseCase.ResponseValue&gt; void onError(final UseCase.UseCaseCallback&lt;V&gt; useCaseCallback) &#123; mHandler.post(new Runnable() &#123; @Override public void run() &#123; useCaseCallback.onError(); // ä¸»çº¿ç¨‹å¤„ç†ç»“æœ &#125; &#125;); &#125;&#125; UseCaseHandlerï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶åŒ…è£…ä¸Šæ–‡ä»‹ç»äº†é¡¹ç›®é‡Œé‡‡ç”¨Executorä½œä¸ºå‘½ä»¤çš„è¿è¡Œæ¡†æ¶ï¼ŒExecutoræ¥æ”¶çš„æ˜¯Runnableç±»å‹çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€å±‚UseCaseå¤„ç†å™¨ï¼Œç”¨äºå°†UseCaseå°è£…æˆRunnableï¼Œå¹¶ä¸”å¤„ç†ä»»åŠ¡çš„è¿”å›å€¼ã€‚UseCaseHandlerå°±æ˜¯è´Ÿè´£å¤„ç†UseCaseçš„ç»„ä»¶ã€‚ UseCaseHandler.javaï¼Œçœç•¥éƒ¨åˆ†ä»£ç ã€‚ 12345678910111213141516171819202122232425262728293031public class UseCaseHandler &#123; private static UseCaseHandler INSTANCE; // å•ä¾‹æ¨¡å¼ï¼Œé¥¿æ±‰ public &lt;T extends UseCase.RequestValues, R extends UseCase.ResponseValue&gt; void execute(final UseCase&lt;T, R&gt; useCase, T values, UseCase.UseCaseCallback&lt;R&gt; callback) &#123; useCase.setRequestValues(values); useCase.setUseCaseCallback(new UiCallbackWrapper(callback, this)); mUseCaseScheduler.execute(new Runnable() &#123; @Override public void run() &#123; useCase.run(); &#125;); &#125; // UIå›è°ƒåŒ…è£…å™¨ç±»ï¼Œå°†æˆåŠŸ/å¤±è´¥äº‹ä»¶äº¤ç»™UIçº¿ç¨‹å¤„ç† private static final class UiCallbackWrapper&lt;V extends UseCase.ResponseValue&gt; implements UseCase.UseCaseCallback&lt;V&gt; &#123; private final UseCase.UseCaseCallback&lt;V&gt; mCallback; private final UseCaseHandler mUseCaseHandler; public UiCallbackWrapper(UseCase.UseCaseCallback&lt;V&gt; callback, UseCaseHandler useCaseHandler) &#123; mCallback = callback; mUseCaseHandler = useCaseHandler; &#125; @Override public void onSuccess(V response) &#123; mUseCaseHandler.notifyResponse(response, mCallback); &#125; @Override public void onError() &#123; mUseCaseHandler.notifyError(mCallback); &#125; &#125; UseCaseHandleréšè—äº†ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ï¼Œå¯¹å¤–æš´éœ²å‡ºé€šè¿‡UseCaseæäº¤å‘½ä»¤çš„æ¥å£ï¼Œæ­¤æ—¶ Presenter å°±å¯ä»¥å€ŸåŠ©UseCaseHandleræ¥æäº¤å„é¡¹å¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶ä¸”è·å–å›è°ƒã€‚æ³¨æ„åˆ°å›è°ƒæ˜¯åœ¨ UI çº¿ç¨‹å‘ç”Ÿçš„ï¼Œæ„å‘³ç€ Presenter å¯ä»¥åœ¨å›è°ƒä¸­ç›´æ¥æ“ä½œ UI å…ƒç´ ã€‚ Activityï¼šç©¿é’ˆå¼•çº¿çš„ç»„ç»‡è€…ä¸ MVP æ¶æ„ä¸€æ ·ï¼Œåœ¨ MVP clean æ¶æ„ä¸­ï¼ŒActivity åŒæ ·æ‹…ä»»åˆå§‹åŒ– Fragmentã€Presenter çš„èŒè´£ã€‚Activity ç±»æ˜¯ååˆ†ç®€å•çš„ï¼Œ80% çš„é€»è¾‘éƒ½å†™åœ¨onCreateå½“ä¸­ã€‚ TaskActivity.java 12345678910111213141516171819202122232425262728293031@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.tasks_act); // Set up the toolbar. // åˆå§‹åŒ– ActionBar // ... // åˆå§‹åŒ– DrawerLayout // ... // FragmentManagerä¸Activityæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ‰€ä»¥è¿™é‡Œé€šè¿‡R.id.contentFrameè·å–Fragmentï¼Œåœ¨Activity Bä¸­ä¹Ÿå¯ä»¥ç”¨R.id.contentFrameè·å–Bå½“ä¸­çš„Fragmentï¼Œä¸ç”¨æ‹…å¿ƒé‡å¤ TasksFragment tasksFragment = (TasksFragment) getSupportFragmentManager().findFragmentById(R.id.contentFrame); if (tasksFragment == null) &#123; // Create the fragment tasksFragment = TasksFragment.newInstance(); ActivityUtils.addFragmentToActivity(getSupportFragmentManager(), tasksFragment, R.id.contentFrame); &#125; // å°†ä½¿ç”¨åˆ°çš„Taskç”¨ä½œæ„é€ å‚æ•°ï¼Œåˆ›å»ºPresenter mTasksPresenter = new TasksPresenter( Injection.provideUseCaseHandler(), tasksFragment, Injection.provideGetTasks(getApplicationContext()), Injection.provideCompleteTasks(getApplicationContext()), Injection.provideActivateTask(getApplicationContext()), Injection.provideClearCompleteTasks(getApplicationContext()) ); // Load previously saved state, if available. if (savedInstanceState != null) &#123; TasksFilterType currentFiltering = (TasksFilterType) savedInstanceState.getSerializable(CURRENT_FILTERING_KEY); mTasksPresenter.setFiltering(currentFiltering); &#125;&#125; éšååœ¨View.onResumeä¸­ä¼šè°ƒç”¨Presenter.startæ¥é¦–æ¬¡åŠ è½½æ•°æ®ã€‚ 12345@Overridepublic void onResume() &#123; super.onResume(); mPresenter.start();&#125; è‡³æ­¤ï¼ŒMVP-clean æ¶æ„çš„è®¾è®¡æ€è·¯å°±è¢«æˆ‘ä»¬åˆ†æé€å½»äº†ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç›¸æ¯”äº MVPï¼Œclean æ¶æ„æŠ½è±¡å‡ºæ¥ Domain å±‚ï¼Œä½¿å…·ä½“çš„ä¸šåŠ¡æ“ä½œç‹¬ç«‹å¯å¤ç”¨ï¼Œä¸”å‡è½»äº† Presenter ç±»çš„è´Ÿæ‹…ã€‚ è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯æ¯ä¸€ä¸ª Use Case éƒ½æ˜¯å¯æµ‹è¯•çš„ï¼Œå•å…ƒæµ‹è¯•ç²’åº¦è¢«ç»†åŒ–ï¼Œæ›´å®¹æ˜“å®šä½é—®é¢˜ï¼Œä»è€Œé’ˆå¯¹æ€§è§£å†³ã€‚å…³äºæµ‹è¯•æˆ‘è®²çš„ä¸å¤šï¼Œå¯ä»¥ç›´æ¥å‚è€ƒæºç è¿›è¡Œç†è§£ã€‚ ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç±»å›¾æœ€åï¼Œæˆ‘ä»¬å°† todo app çš„ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç»˜åˆ¶æˆç±»å›¾ï¼ŒåŠ æ·±ç†è§£ã€‚ mvp-clean-ç±»å›¾","tags":[{"name":"æ¶æ„","slug":"æ¶æ„","permalink":"https://lilei.pro/tags/æ¶æ„/"}]},{"title":"æ¶æ„å­¦ä¹ ä¹‹ mvp","date":"2019-08-20T16:04:52.000Z","path":"2019/08/21/architecture-todo-mvp/","text":"Life doesnâ€™t give you what your want, it gives you what you DESERVE! 0x00 åºè¨€ Android Architecture Blueprints Google å®˜æ–¹åœ¨ GitHub æ¨å‡ºçš„Android æ¶æ„ Demoé¡¹ç›®éå¸¸å€¼å¾—å­¦ä¹ ï¼Œé€šè¿‡ TODO app çš„ä¾‹å­ï¼Œè®²è§£å„ç§åº”ç”¨æ¶æ„æ¨¡å¼å¦‚ä½•åœ¨å®ç°éœ€æ±‚çš„åŸºç¡€ä¸Šï¼Œè¾¾åˆ°å¯ç»´æŠ¤æ€§ã€æ‰©å±•æ€§ã€å¯æµ‹è¯•æ€§çš„ä¼˜ç§€è®¾è®¡ã€‚ æœ¬ç³»åˆ—åšå®¢æ–‡ç« èšç„¦äºä»¥ä¸‹å‡ ç‚¹ï¼š ç®€æ˜æ‰¼è¦ä»‹ç»å„ä¸ªæ¶æ„çš„æ€æƒ³ä¸åŸºç¡€æ¨¡å‹ åœ¨è¯¥æ¶æ„æ¨¡å¼ä¸‹å¦‚ä½•å¯¹ TODO App çš„å„ä¸ªæ¨¡å—è¿›è¡Œåˆ’åˆ†ï¼Œä»¥åŠåˆ’åˆ†çš„ä¾æ® å–ä¸€ä¸ªé¡µé¢ä¸ºä¾‹ï¼Œä½œå‡ºç±»å›¾ï¼Œè§£æä»£ç  Talk is cheap, show me the code. 0x01 ä¸šåŠ¡é€»è¾‘å»ºè®® clone ä»£ç åçœŸæœºè¿è¡Œä½“éªŒï¼Œç”¨ä¸€å¼ å›¾æ¦‚æ‹¬å¦‚ä¸‹ã€‚ é¡µé¢æµç¨‹å›¾ Google ä¹Ÿç»™å‡ºäº†ä¸€ä¸ªwiki é¡µé¢è¯´æ˜ TODO app çš„ç‰¹æ€§ã€‚è‡³äºä¸ºä»€ä¹ˆé€‰æ‹©è¿™æ ·ä¸€ä¸ªåº”ç”¨ä½œä¸º demoï¼Œå®˜æ–¹ç»™å‡ºçš„è§£é‡Šå¦‚ä¸‹ï¼š å®ƒå¿…é¡»è¶³å¤Ÿç®€å•ï¼Œä¾¿äºä½ å¾ˆå¿«åœ°ç†è§£å…¶åŠŸèƒ½ï¼›åŒæ—¶ä¹Ÿè¦è¶³å¤Ÿå¤æ‚ï¼Œè¿™æ ·æ‰èƒ½å±•ç°ä¸åŒè®¾è®¡çš„å†³ç­–ä»¥åŠæä¾›æµ‹è¯•åœºæ™¯ã€‚ 0x02 todo-mvpå…³äº MVPMVP è„±èƒäºå¤§åé¼é¼çš„ MVCï¼ˆModel-View-Controllerï¼‰ã€‚ mvc ä½†å‡¡åšè½¯ä»¶å¼€å‘çš„äººåº”è¯¥å¯¹ MVC éƒ½ä¸æ„Ÿåˆ°é™Œç”Ÿï¼Œå®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†æ•°æ®ã€è§†å›¾ã€æ§åˆ¶é€»è¾‘æ‹†åˆ†ã€‚è¿™ä¸‰éƒ¨åˆ†å¯ä»¥è‡ªç”±è¿›è¡Œæ›¿æ¢ï¼Œæ¯”å¦‚åœ¨ä¸æ”¹å˜æ•°æ®æ¥å£çš„æƒ…å†µä¸‹ï¼Œæ›¿æ¢æ•°æ®æ¥æºï¼›æˆ–è€…æ˜¯è°ƒæ•´ UI æ˜¾ç¤ºï¼Œè€Œæ— éœ€æ”¹åŠ¨ä¸šåŠ¡é€»è¾‘ã€‚ MVC æ˜¯ä¸€ä¸ªå…·æœ‰å†å²æ„ä¹‰çš„æ¶æ„æ¨¡å¼ï¼Œå®ƒå¯¹å¤©é©¬è¡Œç©ºã€ä¸€å›¢ä¹±éº»çš„è½¯ä»¶è®¾è®¡è¿›è¡Œè§„çº¦ï¼Œä½¿åç»­å¯¹ç¨‹åºçš„ä¿®æ”¹å’Œæ‰©å±•ç®€åŒ–ï¼Œå¹¶ä¸”ä½¿é‡ç”¨æˆä¸ºå¯èƒ½ã€‚ä½†æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯æœ€é€‚åˆ Android å¼€å‘çš„æ¶æ„æ¨¡å¼ã€‚ MVC ä¸ºä»€ä¹ˆä¸é€‚åˆ Android å¼€å‘MVC çš„æ ¸å¿ƒæ€æƒ³æ˜¯è§£è€¦ï¼Œå•ä¸€èŒè´£ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œä¸ä½¿ç”¨ MVC çš„ä¸»è¦åŸå› æ˜¯ Activity çš„èŒè´£å¤ªé‡ï¼Œå¾€å¾€è¦åŒæ—¶æ‰¿æ‹… View å’Œ Controller çš„å·¥ä½œï¼Œè¿™ä¼šé€ æˆ Activity ç±»éå¸¸åºå¤§ï¼ŒUI ä»£ç å’Œé€»è¾‘ä»£ç äº¤ç»‡ï¼Œè€¦åˆä¸¥é‡ã€‚ MVP ä¸ºä»€ä¹ˆé€‚åˆ Android å¼€å‘MVP çš„æ¶æ„å¦‚ä¸‹å›¾ã€‚ MVP å®ƒå•ç‹¬æŠ½å‡ºäº† Presenter å¯¹è±¡ï¼Œå®ç°äº†ä¸šåŠ¡é€»è¾‘ï¼Œç”¨äºæ§åˆ¶ View çš„æ˜¾ç¤ºå˜åŒ–ï¼Œä»¥åŠä¸ Model è¿›è¡Œæ•°æ®äº¤äº’ã€‚Presenter å’Œ View äº’ç›¸æŒæœ‰ï¼ŒModel ä»…è¢« Presenter æŒæœ‰ã€‚ åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼ŒPresenter å’Œ Model ä»…åŒ…å« Java ä»£ç ï¼Œä¸å« Android SDK å†…å®¹ã€‚MVP æ¶æ„è§£å†³äº† MVC ä¸­ Activity èŒè´£è¿‡å¤šçš„é—®é¢˜ï¼Œå°† UI åŠŸèƒ½åˆ†é…ç»™ View å•ç‹¬ç®¡ç†ï¼ŒView çš„æ¥å£ä»…å‘ Presenter å¼€æ”¾ï¼Œç›¸æ¯” MVCï¼Œæ›´å¥½åœ°å®ç°äº†èŒè´£å•ä¸€ã€è§£è€¦çš„éœ€æ±‚ã€‚ å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯Modelè®¾è®¡ä»æ•°æ®å±‚å¼€å§‹ï¼Œæ•°æ®å±‚è¦æ‰¿æ‹…ä»€ä¹ˆèŒè´£å‘¢ï¼Ÿå…¶å®å°±æ˜¯CRUDï¼š ä¿å­˜æ–°å»ºçš„ä»»åŠ¡ æŸ¥è¯¢å·²åˆ›å»ºä»»åŠ¡ æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼ˆæœªå®Œæˆ -&gt; å·²å®Œæˆï¼‰ åˆ é™¤ä»»åŠ¡ æ•°æ®çš„æŒä¹…åŒ–æ–¹å¼ï¼Œæ•°æ®æ“ä½œç»“æœé‡‡ç”¨åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Œè¿™äº›é—®é¢˜ä¹Ÿæ˜¯è®¾è®¡è¿‡ç¨‹ä¸­è¦è€ƒè™‘çš„ã€‚ åŸºæœ¬çš„ä»»åŠ¡å¯¹è±¡ï¼šTaské¦–å…ˆè®¾è®¡ä¸€ä¸ªTask.javaç±»ï¼Œè¡¨ç¤ºä»»åŠ¡å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…¸å‹çš„ Java Beanã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å°† Task è®¾è®¡æˆä¸€ä¸ªä¸å¯å˜çš„å¯¹è±¡ã€‚åœ¨ä¸€ä¸ªä»»åŠ¡ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå®Œæˆâ€çŠ¶æ€æ—¶ï¼Œå¹¶ä¸æ˜¯ä¿®æ”¹åŸå¯¹è±¡ï¼Œè€Œæ˜¯ä¸¢å¼ƒæ‰åŸå¯¹è±¡ï¼Œå†ä»¥ç›¸åŒidé‡æ–°åˆ›å»ºä¸€ä¸ªå®ŒæˆçŠ¶æ€çš„å¯¹è±¡ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯é€»è¾‘ç®€å•ï¼Œä¸å¯å˜å¯¹è±¡çº¿ç¨‹ç»å¯¹å®‰å…¨ã€‚ç¼ºç‚¹æ˜¯å½“å¯¹è±¡åˆ›å»ºã€é”€æ¯æˆæœ¬é«˜çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿæ€§èƒ½æŸå¤±ã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­åº”å½“é…Œæƒ…é€‰æ‹©é‡ç”¨æˆ–è€…èˆå¼ƒã€‚ 1234567public final class Task &#123; private final String mId; private final String mTitle; private final String mDescription; private final boolean mCompleted; ...&#125; Model å±‚å¯¹å¤–æš´éœ²çš„æ¥å£ï¼šTasksDataSourceæœ¬ç€é¢å‘æ¥å£ç¼–ç¨‹çš„åŸåˆ™ï¼Œéšè—æ•°æ®æ“ä½œå…·ä½“å®ç°ä»£ç ï¼Œæš´éœ²å‡ºç®¡ç†ä»»åŠ¡çš„æ¥å£ï¼ˆåŒ…å«å›è°ƒï¼‰ã€‚ 123456789101112131415161718192021public interface TasksDataSource &#123; interface LoadTasksCallback &#123; // åŠ è½½å¤æ•°ä»»åŠ¡å›è°ƒ void onTasksLoaded(List&lt;Task&gt; tasks); void onDataNotAvailable(); &#125; interface GetTaskCallback &#123; // åŠ è½½å•æ¡ä»»åŠ¡å›è°ƒ void onTaskLoaded(Task task); void onDataNotAvailable(); &#125; void getTasks(@NonNull LoadTasksCallback callback); void getTask(@NonNull String taskId, @NonNull GetTaskCallback callback); void saveTask(@NonNull Task task); void completeTask(@NonNull Task task); void completeTask(@NonNull String taskId); void activateTask(@NonNull Task task); void activateTask(@NonNull String taskId); void clearCompletedTasks(); void refreshTasks(); void deleteAllTasks(); void deleteTask(@NonNull String taskId);&#125; è¿™ä¸ªæ¥å£é‡Œæœ‰ä¸¤å¤„ä¸æˆ‘çš„ç¼–ç¨‹æ€è·¯æœ‰å‡ºå…¥ã€‚é¦–å…ˆæ˜¯åŠ è½½ä»»åŠ¡å›è°ƒï¼Œæˆ‘è®¤ä¸ºå¯ä»¥ä»…ä¿ç•™å¤æ•°ä»»åŠ¡çš„æ¥å£ï¼Œå¯¹äºåŠ è½½å•æ¡ä»»åŠ¡çš„éœ€æ±‚ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º 1 çš„åˆ—è¡¨å°±å¯ä»¥äº†ã€‚å…¶æ¬¡ï¼Œåœ¨å‘½åä¸Šï¼Œæˆ‘ä¹ æƒ¯äºå°†åŒæ­¥æ¥å£ä»¥getXXXï¼Œå¼‚æ­¥æ¥å£ä»¥loadXXXæ¥å£°æ˜ã€‚ æœ‰äº†è¿™ä¸ªæ¥å£ï¼Œå°±å¯ä»¥æä¾›ç»™ä»»åŠ¡è¯¦æƒ…ã€ä»»åŠ¡åˆ—è¡¨ç­‰é¡µé¢ä½¿ç”¨ã€‚æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªæ¥å£å®ç°ç±»ï¼Œè¿™ä¸ªç±»å¯¹å¤–çš„èŒè´£æ˜¯å®ç°æ•°æ®æ“ä½œæ¥å£ï¼Œå¯¹å†…çš„èŒè´£æ˜¯éšè—ä¸¤ç§å…·ä½“çš„æ•°æ®æ“ä½œå®ç°ï¼ˆå†…å­˜ç¼“å­˜ã€æ•°æ®åº“ã€ç½‘ç»œï¼‰ã€‚ æ•°æ®æºå…±æœ‰ä¸‰çº§ç¼“å­˜ï¼š In-memory cache - Fast Disk (SQLiteDb) - Slow Network - Very slow 12345public class TasksRepository implements TasksDataSource &#123; private final TasksDatasource mTasksRemoteDataSource; // ç½‘ç»œæ•°æ®æº private final TasksDatasource mTasksLocalDataSource; // æœ¬åœ°æ•°æ®æº ...&#125; è¯»å†™æ•°æ®ç­–ç•¥å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œä¾æ¬¡è¯»ï¼Œå…¨éƒ¨å†™â€ï¼Œæ‹¬å·é‡Œæ˜¯æˆ‘è¡¥å……çš„å†…å®¹ï¼š In every getoperation: Return cache if available, or return local copy if it exists (and update cache) , or return remote copy ( and update local copy &amp; cache) Every write/deleteoperation will simply: Update cache Update local Update remote å…·ä½“çš„ç½‘ç»œæ•°æ®æºã€æœ¬åœ°æ•°æ®åº“è®¾è®¡ä¸ºå¸¸è§å†™æ³•ï¼Œä¸èµ˜è¿°ã€‚ Fragment å³æ˜¯ Viewå¤„ç†æ‰€æœ‰ UI å˜åŒ–äº‹ä»¶ï¼Œæ¯”å¦‚æ˜¾ç¤º loadingã€æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨ã€æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…ã€æ˜¾ç¤ºä»»åŠ¡çŠ¶æ€å˜æ›´ SnackBar ç­‰ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯é¡µé¢è·³è½¬æ“ä½œä¹Ÿå±äº UI å˜åŒ–ï¼Œæ˜¯åœ¨ Fragment é‡Œé¢å®ç°çš„ã€‚ä¸å¦¨æ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆâ€œè·³è½¬â€ä¸æ”¾åœ¨ Presenter ä¸­è¿›è¡Œï¼Ÿä¸€ä¸ªåŸå› æ˜¯ Presenter ä¸ Android SDK æ— å…³ï¼Œè€Œè·³è½¬éœ€è¦ Context å¯¹è±¡ï¼Œè¿èƒŒäº†è¿™ä¸€åŸåˆ™ã€‚æ¯”å¦‚ä»â€œä»»åŠ¡åˆ—è¡¨â€è·³è½¬åˆ°â€œä»»åŠ¡è¯¦æƒ…â€æ—¶ï¼š 123456// TasksFragment.java@Overridepublic void showAddTask() &#123; Intent intent = new Intent(getContext(), AddEditTaskActivity.class); startActivityForResult(intent, AddEditTaskActivity.REQUEST_ADD_TASK);&#125; View é‡Œé¢æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œä¸»è¦å¤„ç†ä»¥ä¸‹äº‹ä»¶ï¼š åŠ è½½ä¸­ã€åŠ è½½æˆåŠŸã€å¤±è´¥é¡µé¢å±•ç¤º å±•ç° Toastã€SnackBar ç­‰æç¤º å¤„ç†æŒ‰é’®ã€èœå•ç‚¹å‡»äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯å°†å…¶ç”©ç»™ Presenter å¤„ç†ï¼‰ å¤„ç†é¡µé¢è·³è½¬ å£°æ˜ Adapter åœ¨onResumeæ—¶è°ƒç”¨ Presenter çš„startæ–¹æ³•ï¼Œå¯åŠ¨é¡µé¢ æä¾›isActiveæ–¹æ³•ï¼Œä¾› Presenter åœ¨å¼‚æ­¥å›è°ƒè¿”å›æ—¶åˆ¤æ–­é¡µé¢æ˜¯å¦å­˜æ´» æœ€åä¸€ç‚¹æ˜¯å®¹æ˜“æ¼æ‰çš„ï¼Œå¦‚æœå¼‚æ­¥è¯·æ±‚å›è°ƒæ—¶é¡µé¢è¢«é”€æ¯ï¼Œä¼šå¯¼è‡´å„ç§éš¾ä»¥é¢„æ–™çš„é—®é¢˜ã€‚ 123@Override public boolean isActive() &#123; return isAdded();&#125; Presenter - ä¸šåŠ¡é€»è¾‘è½½ä½“æ‰¿æ‹…äº†ä¸šåŠ¡é€»è¾‘å®ç°çš„èŒè´£ï¼Œæœ‰æ—¶ä¸šåŠ¡é€»è¾‘è¿‡äºå¤æ‚ä¼šå¯¼è‡´ Presenter ç±»å¤ªå¤§ï¼Œæ­¤æ—¶è¦è€ƒè™‘æ‹†åˆ†ä¸šåŠ¡é€»è¾‘åˆ°å•ç‹¬çš„ç±»ä¸­ï¼Œå°±å˜æˆäº†mvp-cleanæ¶æ„ï¼Œclean æ¶æ„ä¸­ä½¿ç”¨Use Caseï¼ˆç”¨ä¾‹ï¼‰å¤„ç†ç»†åˆ†çš„ä¸šåŠ¡é€»è¾‘ã€‚ Presenter ç”± Activity æ„é€ ï¼Œå¹¶ä¸”æä¾›æ–¹æ³•ç»™ Activity ä»¥åŠ Viewï¼ˆFragmentï¼‰ä½¿ç”¨ã€‚ Activity - å°†ä¸€åˆ‡ç²˜åˆåˆ°ä¸€èµ·ç°åœ¨æˆ‘ä»¬æœ‰äº† Modelã€Viewã€Presenter å„ä¸ªéƒ¨åˆ†ï¼Œè€Œ Android åº”ç”¨çš„é¡µé¢å…¥å£æ˜¯ Activity ç±»ï¼Œæˆ‘ä»¬åœ¨ Activity ä¸­åˆ›å»º Fragmentï¼ˆViewï¼‰åŠ Presenterï¼Œåœ¨è¿™ä¸¤è€…ä¹‹é—´å»ºç«‹å…³è”ã€‚åŒæ—¶è¿˜è¦å¤„ç†ä¸€äº›å¿…é¡»æ”¾åœ¨ Activity ä¸­è¿›è¡Œçš„æ“ä½œï¼Œæ¯”å¦‚onSaveInstanceStateã€onOptionsItemSelected ç­‰ç­‰ã€‚ ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½å®ç°ç”¨ç±»å›¾æ¥è¡¨ç¤º MVP æ¨¡å¼ä¸‹çš„ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç›¸å…³ç±»ï¼š mvp","tags":[{"name":"æ¶æ„","slug":"æ¶æ„","permalink":"https://lilei.pro/tags/æ¶æ„/"}]},{"title":"ACE-PTM ç¬¬ II éƒ¨åˆ† é¢†å¯¼å’Œå®æ–½","date":"2019-07-14T10:16:42.000Z","path":"2019/07/14/ace-cpt-part-2/","text":"ç¬¬ 2 ç«  - æ¿€åŠ±å’ŒåšæŒåŸåˆ™åªæœ‰çº¦20%çš„ç¾å›½æˆäººåŒæ—¶ç¬¦åˆæœ‰æ°§æ´»åŠ¨å’Œè‚Œè‚‰å¼ºåŒ–æŒ‡å—è¦æ±‚ã€‚å¥èº«ä¸“ä¸šäººå‘˜é¢ä¸´ç€ä¸¤å¤§æŒ‘æˆ˜ï¼šè®©äººä»¬ç§¯æå¼€å§‹ä»¥åŠä¹‹ååšæŒè¿åŠ¨è®¡åˆ’ã€‚æœ¬ç« é‡ç‚¹æ˜¯æé«˜äººä»¬åœ¨å¼€å§‹ä¹‹ååšæŒè®¡åˆ’çš„å¯èƒ½æ€§ã€‚ æ¿€åŠ±äººå¼€å§‹é”»ç‚¼çš„å› ç´ ä¸ä¸€å®šæ˜¯ä½¿ä»–ä»¬é•¿æœŸå‚ä¸è¿åŠ¨è®¡åˆ’çš„å› ç´ ã€‚å¥åº·å’Œå¥èº«è¡Œä¸šçš„çœŸæ­£æŒ‘æˆ˜æ˜¯åˆ›é€ å‡ºé€‚å®œçš„è®¡åˆ’å’Œè¿åŠ¨ç¯å¢ƒï¼Œä½¿äººä»¬å°½å¯èƒ½æé«˜åšæŒè®¡åˆ’å¹¶é€‰æ‹©ç§¯æç”Ÿæ´»æ–¹å¼çš„å¯èƒ½æ€§ã€‚ äº†è§£æ¿€åŠ±ç”¨äºè¯„ä¼°æ¿€åŠ±çš„ä¸¤ç§æœ€å¸¸è®¨è®ºæ–¹æ³•æ˜¯å†…åœ¨ä¸å¤–åœ¨æ¿€åŠ±å’Œè‡ªæˆ‘æ•ˆèƒ½ã€‚ å†…åœ¨å’Œå¤–åœ¨æ¿€åŠ±åœ¨è¿åŠ¨èƒŒæ™¯ä¸‹ï¼Œè¦å®ç°å†…åœ¨æ¿€åŠ±ï¼Œæ„å‘³ç€ä¸€ä¸ªäººæ˜¯å› ä¸ºå‚ä¸æœ¬èº«æ‰€å¸¦æ¥çš„å†…åœ¨æ„‰æ‚¦å’Œä½“éªŒè€Œä»äº‹è¿åŠ¨æ´»åŠ¨ã€‚ ä¸å…¶è®¤ä¸ºéœ€è¦è®©è‡ªå·±çš„å®¢æˆ·å—åˆ°æ›´å¤šçš„å†…åœ¨æ¿€åŠ±ï¼Œç§äººæ•™ç»ƒåº”æ›´åŠªåŠ›å¢åŠ å‚ä¸è®¡åˆ’æ‰€å¸¦æ¥çš„æ„‰æ‚¦æ„Ÿå’Œæˆå°±æ„Ÿã€‚ç§äººæ•™ç»ƒé€šè¿‡é¼“åŠ±å®¢æˆ·æ‹¥æœ‰å¹¶å‚ä¸è®¡åˆ’ä»¥åŠæ•™æˆè‡ªè¶³æ€§å’Œè‡ªä¸»æ€§ï¼Œå¯ä»¥å¸®åŠ©ä¿ƒè¿›å†…åœ¨æ¿€åŠ±çš„å½¢æˆã€‚ è‡ªæˆ‘æ•ˆèƒ½åœ¨è¿åŠ¨èƒŒæ™¯ä¸‹ï¼Œè‡ªæˆ‘æ•ˆèƒ½å®šä¹‰ä¸ºä¸ªä½“å¯¹è‡ªèº«æˆåŠŸå‚ä¸ä½“åŠ›æ´»åŠ¨è®¡åˆ’çš„èƒ½åŠ›å’Œä¿¡å¿µã€‚è‡ªæˆ‘æ•ˆèƒ½ä¸æ¿€åŠ±å‘ˆæ­£ç›¸å…³ã€‚ è®¸å¤šå¥èº«ä¸“ä¸šäººå‘˜æ‰€çŠ¯çš„ä¸€ä¸ªé‡å¤§é”™è¯¯æ˜¯å®‰æ’æ•´å ‚è¯¾è¿›è¡Œè¯„ä¼°ï¼Œä¸è¦è®©å®¢æˆ·æ„Ÿè§‰åƒåœ¨åšæµ‹è¯•ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”šè‡³ä¸è¦è®©å®¢æˆ·çŸ¥é“ä½ åœ¨æ”¶é›†è¯„ä¼°ä¿¡æ¯ã€‚ ç”¨äºä¿æŒå®¢æˆ·æ¿€åŠ±çš„ç­–ç•¥ç§äººæ•™ç»ƒåº”å½“å‘ŠçŸ¥å®¢æˆ·å¯èƒ½ä¼šå‡ºç°å›å¤åŸæ€å¹¶ä½¿å…¶æå‰åšå¥½å‡†å¤‡ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿåœ¨å›å¤åŸæ€åç«‹å³é‡æ–°åšæŒæ´»åŠ¨è®¡åˆ’ã€‚ç¬¬ä¸€æ­¥æ˜¯å®£æ•™ï¼Œç¬¬äºŒæ­¥æ˜¯æ”¯æŒã€‚ ç¤¾ä¼šæ”¯æŒå¼€å‘å’Œç»´æŠ¤è¿åŠ¨çš„ç¤¾ä¼šæ”¯æŒç½‘ç»œã€‚æ•™ç»ƒåº”å½“å°½é‡å¤šåˆ©ç”¨å›¢ä½“å‚ä¸å’Œç¤¾äº¤äº’åŠ¨çš„æœºä¼šï¼Œè®©å®¢æˆ·æ„Ÿè§‰è‡ªå·±å±äºè¯¥è®¡åˆ’ï¼Œå¹¶ä¸”æ˜¯å…·æœ‰å…±åŒå…´è¶£å’Œç›®æ ‡çš„æˆå‘˜æ‰€ç»„æˆå›¢é˜Ÿçš„ä¸€éƒ¨åˆ†ã€‚ è‡ªæˆ‘è‚¯å®šæ•™å¯¼å®¢æˆ·è¿›è¡Œè‡ªæˆ‘è‚¯å®šã€‚ è‡ªæˆ‘è°ƒèŠ‚æ•™å¯¼å®¢æˆ·æˆä¸ºæœ‰æ•ˆçš„è‡ªå¾‹è€…ï¼Œè‡ªæˆ‘ç›‘ç£è¡Œä¸ºã€æ—¥ç¨‹ã€æ—¶é—´å’Œä¼˜å…ˆäº‹é¡¹ã€‚ é«˜é£é™©æƒ…å†µæ—¶é—´ç®¡ç†æŠ€èƒ½ä¸ä½³ã€ç¼ºä¹ç¤¾ä¼šæ”¯æŒæˆ–æ—¥ç¨‹ç¹å¿™çš„ä¸ªäººæœ€æœ‰å¯èƒ½å›å¤åœ†å°ã€‚ç§äººæ•™ç»ƒå¿…é¡»ä¸æ–­äº†è§£å¹¶è§‚å¯Ÿå®¢æˆ·æ˜¯å¦å‡ºç°å—æ‰“å‡»ã€æ²®ä¸§æˆ–ç–²æƒ«çš„è¿¹è±¡ã€‚ å½±å“è¿åŠ¨å‚ä¸å’ŒåšæŒåº¦çš„å› ç´ ä½“åŠ›æ´»åŠ¨çš„æ½œåœ¨å†³å®šå› ç´ å¯åˆ†ä¸ºä¸‰ç±»ï¼š ä¸ªäººç‰¹è´¨ ç¯å¢ƒå› ç´  ä½“åŠ›æ´»åŠ¨å› ç´  ä¸ªäººç‰¹è´¨äººå£ç»Ÿè®¡å˜é‡å¥åº·çŠ¶å†µè¿‡å¾€çš„è¿åŠ¨ç»éªŒå¿ƒç†ç‰¹è´¨è®¤è¯†ã€æ€åº¦å’Œä¿¡å¿µç¯å¢ƒå› ç´ è®¾æ–½ä¾¿åˆ©æ€§æ—¶é—´ç¤¾ä¼šæ”¯æŒä½“åŠ›æ´»åŠ¨å› ç´ å¼ºåº¦æŸä¼¤åé¦ˆ å¤–éƒ¨åé¦ˆï¼šç§äººæ•™ç»ƒä¸ºå®¢æˆ·æä¾›çš„å¼ºåŒ–ã€çº é”™å’Œé¼“åŠ±ã€‚ å†…éƒ¨åé¦ˆï¼šå®¢æˆ·æ ¹æ®è‡ªå·±çš„æ„Ÿè§‰ç³»ç»Ÿï¼ˆæ„Ÿå—åˆ°ã€çœ‹åˆ°æˆ–å¬åˆ°çš„å†…å®¹ï¼‰ä¸ºè‡ªå·±æä¾›çš„ç›¸åº”ä¿¡æ¯ã€‚é•¿æœŸè®¡åˆ’åšæŒåº¦å–å†³äºå®¢æˆ·æä¾›è‡ªæˆ‘åé¦ˆçš„èƒ½åŠ›ã€‚ é¢†å¯¼ç‰¹è´¨å¯¹å®¢æˆ·çš„è¿›å±•è¡¨ç°å‡ºæŒç»­ä¸æ–­åœ°å…³å¿ƒå’Œå…´è¶£æ˜¯è´¯ç©¿ç§æ•™èŒä¸šç”Ÿæ¶¯çš„ä¸€éƒ¨åˆ†ã€‚ç§äººæ•™ç»ƒä½¿ç”¨ç³»ç»Ÿæ€§ç›®æ ‡è®¾å®šä»¥åŠæ•™æˆå›å¤åŸæ€é¢„é˜²æŠ€å·§çš„ç›®çš„æ˜¯ï¼Œå‘Šè¯‰å®¢æˆ·ä»–ä»¬å¯¹å®¢æˆ·çš„å…³å¿ƒè¿œè¿œè¶…å‡ºè¿™ä¸€å°æ—¶è¯¾ç¨‹çš„èŒƒå›´ã€‚ ç§äººæ•™ç»ƒçˆ±å»ºç«‹åšæŒåº¦ä¸­çš„ä½œç”¨è®¡åˆ’è®¾è®¡ç§äººæ•™ç»ƒå¿…é¡»èƒ½å¤Ÿé’ˆå¯¹æ¯ä¸ªå®¢æˆ·çš„åå¥½ã€æ—¶é—´è¡¨ã€ç»éªŒã€é¡¾è™‘å’Œçº¦æŸæ¡ä»¶ï¼ˆä¾‹å¦‚ï¼Œé’±ã€ä¾¿åˆ©æ€§å’Œæ—¶é—´ï¼‰è®¾è®¡è®¡åˆ’ã€‚ è§’è‰²æ¸…æ™°åº¦åœ¨ä¸€æ®µå…³ç³»ä¸­åˆ†æ­§å’Œå†²çªäº§ç”Ÿçš„å¸¸è§åŸå› æ˜¯è§’è‰²æ¨¡ç³Šã€‚ ç›®æ ‡è®¾å®šç›®æ ‡è®¾å®šåº”å½“éµå¾ªSMARTåŸåˆ™ã€‚ é¿å…è®¾å®šè¿‡å¤šç›®æ ‡ é¿å…è®¾å®šè´Ÿå‘ç›®æ ‡ è®¾å®šçŸ­æœŸå’Œé•¿æœŸç›®æ ‡ä»¥åŠè¿‡ç¨‹ç›®æ ‡å’Œæˆç»©ç›®æ ‡ å®šæœŸé‡å®¡ç›®æ ‡ åˆåŒ/åè®®ä½¿ç”¨è¡Œä¸ºåˆçº¦å’Œä¹¦é¢åè®®ã€‚ ç¬¬ 2 ç«  - ä¹ é¢˜é›†1. å¯¹äºåˆšå¼€å§‹å‚åŠ è¿åŠ¨æ–¹æ¡ˆçš„ä¸ªä½“è€Œè¨€ï¼Œæœ€é‡è¦çš„å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ å®¶åº­å’Œæœ‹å‹çš„å¤§åŠ›æ”¯æŒ è¿åŠ¨è®¾æ–½çš„ä¾¿åˆ©æ€§ ä¸è¿åŠ¨æœ‰å…³çš„è¡Œä¸ºæ”¹å˜æ„æ„¿åº¦ ä¸ç§äººæ•™ç»ƒè”ç»œ é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ3ï¼‰ã€‚çœŸæ­£çš„åŠ¨æœºéƒ½æ¥æºäºå†…å¿ƒã€‚ 4. ä¸ºäº†ç¡®ä¿å®¢æˆ·åšæŒå‚åŠ è®­ç»ƒï¼Œç§äººæ•™ç»ƒæœ€å¥½é‡‡ç”¨ä¸‹åˆ—å“ªç§ç­–ç•¥ï¼Ÿ ä¸ºå®¢æˆ·è®¾è®¡è¿åŠ¨æ–¹æ¡ˆï¼Œè¿™æ ·å®¢æˆ·å°±åªè®­ç»ƒï¼Œè€Œä¸ä¼šå¯¹è¿åŠ¨æœ¬èº«æƒ³å¤ªå¤š é€šè¿‡å†…åœ¨åŠ¨æœºå› ç´ å¯¹å®¢æˆ·è¿›è¡Œæ¿€åŠ±ï¼Œä»¥æå‡å…¶è‡ªæˆ‘æ•ˆèƒ½ é¼“åŠ±å®¢æˆ·ç‹¬ç«‹å®‰æ’è¿åŠ¨æ–¹æ¡ˆï¼Œä»è€Œä¿ƒè¿›å®¢æˆ·æå‡å†…åœ¨åŠ¨æœº ä¸»è¦é€šè¿‡æŒ‡å¼•ï¼ˆè€Œéæ•™è‚²ï¼‰å»ºç«‹è‡ªå·±çš„è¿åŠ¨æ•™å­¦é£æ ¼ é”™è¯¯é€‰é¡¹ï¼ˆ2ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ3ï¼‰ã€‚æ•™ç»ƒä¸æ˜¯é€šè¿‡â€œå†…åœ¨åŠ¨æœºâ€å¯¹å®¢æˆ·è¿›è¡Œæ¿€åŠ±çš„ã€‚æ•™ç»ƒçš„ç›®çš„æ˜¯æå‡å†…åœ¨åŠ¨æœºã€‚ 9. åœ¨ç›‘ç£å¼ç¯å¢ƒä¸­è¿åŠ¨ï¼Œæœ€å¯èƒ½ä¸è¿åŠ¨åšæŒæ°´å¹³æ— å…³çš„å› ç´ æ˜¯ï¼Ÿ æ•™è‚² å¹´é¾„ æ”¶å…¥ æ€§åˆ« é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚å…¶ä½™å‡ ä¸ªé€‰é¡¹éƒ½æœ‰ç›¸å…³ã€‚ 11. åšæŒçš„å®šä¹‰ä¸ºï¼šä¸€ç§å°†è¡Œä¸ºèµ‹äºˆæ–¹å‘å’Œç›®çš„çš„å¿ƒç†é©±åŠ¨åŠ›ã€‚ æ­£ç¡® é”™è¯¯ é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚åšæŒæ˜¯ç§¯æä¸»åŠ¨åœ°å‚åŠ è¿åŠ¨æ–¹æ¡ˆï¼›æ¿€åŠ±åˆ™æ˜¯å¿ƒç†é©±åŠ¨åŠ›ã€‚ 13. èº«ä½“æ´»åŠ¨çš„ä¸‰ç§ä¸»è¦æ½œåœ¨å†³å®šå› ç´ ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ ä¸ªäººç‰¹è´¨ èº«ä½“ç‰¹è´¨ ç¯å¢ƒå› ç´  ä½“è‚²æ´»åŠ¨å› ç´  é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚å…¶ä¸­1ã€3ã€4æ˜¯ä½“è‚²æ´»åŠ¨çš„æ½œåœ¨å†³å®šå› ç´ ã€‚ 18. ä¸‹åˆ—æœ¯è¯­ç§ï¼Œå“ªä¸€é¡¹çš„å®šä¹‰ä¸ºï¼šç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›æˆåŠŸå¼€å§‹å¹¶åšæŒæŸç§è¡Œä¸ºï¼Ÿ å†…åœ¨æ¿€åŠ± è‡ªæˆ‘æ•ˆèƒ½ å¤–åœ¨æ¿€åŠ± å¿ƒé‡Œæ§åˆ¶æº é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚æ³¨æ„è¿™æ˜¯â€œæ•ˆèƒ½â€çš„å®šä¹‰ã€‚ ç¬¬ 3 ç«  - æ²Ÿé€šå’Œæ•™å­¦æŠ€å·§ç¬¬ 4 ç«  - è¡Œä¸ºæ”¹å˜ä¸å¥åº·å¿ƒç†å­¦åŸºç¡€","tags":[{"name":"å¥èº«","slug":"å¥èº«","permalink":"https://lilei.pro/tags/å¥èº«/"},{"name":"ACE-CPT","slug":"ACE-CPT","permalink":"https://lilei.pro/tags/ACE-CPT/"}]},{"title":"ACE-PTM ç¬¬ I éƒ¨åˆ† ç®€ä»‹","date":"2019-07-14T09:32:41.000Z","path":"2019/07/14/ace-cpt-part-1/","text":"ç¬”è®°å‰è¨€ ä½œä¸ºå­¦ä¹  ACE-CPT çš„è¯»ä¹¦ç¬”è®°ï¼Œè¿™ä¸€ç³»åˆ—å°†æŒ‰ç« èŠ‚åˆ†ä¸ºä¸ƒä¸ªéƒ¨åˆ†ã€‚ ç¬¬ I éƒ¨åˆ† - ç®€ä»‹ä»‹ç»ç§äººæ•™ç»ƒçš„è§’è‰²å®šä½ä¸æ‰§ä¸šèŒƒå›´ï¼Œå“ªäº›äº‹æƒ…åº”è¯¥åšï¼Œå“ªäº›äº‹æƒ…å¯ä»¥åšï¼Œå“ªäº›äº‹æƒ…ä¸èƒ½åšã€‚ ç¬¬ II éƒ¨åˆ† - é¢†å¯¼å’Œå®æ–½ä»æ²Ÿé€šã€æ¿€åŠ±ä¼šå‘˜è§’åº¦ç»™å‡ºæŒ‡å¯¼æ„è§ï¼Œæ˜¯è´¯å½»æ‰§æ•™è¿‡ç¨‹å§‹ç»ˆçš„ä¸­å¿ƒæ€æƒ³ï¼Œå¸®åŠ©æ•™ç»ƒä¸ä¼šå‘˜å»ºç«‹ç›¸äº’ä¿¡èµ–çš„å…³ç³»ã€‚ ç¬¬ III éƒ¨åˆ† - ACE æ•´åˆå¼å¥èº«è®­ç»ƒæ¨¡å¼å³ ACE-IFT è®­ç»ƒæ¨¡å¼ï¼Œæ˜¯ ACE ç‹¬å®¶çš„è®­ç»ƒè®¡åˆ’ä¸æ¨¡å¼ï¼Œå…ˆè¯„ä¼°ï¼Œç„¶ååœ¨ç¨³å®šæ€§ã€æŠ—é˜»ã€å¿ƒè‚ºç­‰å¤šæ–¹é¢åˆ†åˆ«ç»™å‡ºæŒ‡å¯¼ã€‚ ç¬¬ IV éƒ¨åˆ† - ç‰¹æ®Šè¿åŠ¨è®¡åˆ’åˆ¶å®šä¸»é¢˜è®²è§£èº«å¿ƒè¿åŠ¨ä»¥åŠç‰¹æ®Šäººç¾¤çš„è¿åŠ¨æ–¹æ³•ã€‚ ç¬¬ V éƒ¨åˆ† - æŸä¼¤é¢„é˜²å’Œæ€¥æ•‘å¸¸è§æŸä¼¤å¯¹è¿åŠ¨è¿‡ç¨‹çš„å½±å“ï¼Œä»¥åŠé­é‡æŸä¼¤æ—¶å€™çš„ç´§æ€¥ç¨‹åºã€‚ ç¬¬ VI éƒ¨åˆ† - èŒä¸šå’Œæ³•å¾‹è´£ä»»ä»¥åŠä¸šåŠ¡ç­–ç•¥ç§äººæ•™ç»ƒèŒä¸šçš„æ³•å¾‹æŒ‡å—ã€‚ ç¬¬ VII éƒ¨åˆ† - è¡¥å……æ¶µç›–ä¸å±äºä¸Šè¿°ç« èŠ‚çš„å†…å®¹ã€‚ ç¬¬ 1 ç«  - ç§äººæ•™ç»ƒçš„è§’è‰²å’Œæ‰§ä¸šèŒƒå›´å¥åº·ç…§æŠ¤è”ç›Ÿå¥åº·ç…§æŠ¤è”ç›Ÿç”±åŒ»ç–—ä¿å¥ä¸“ä¸šäººå‘˜ç»„æˆï¼Œä»–ä»¬é€šè¿‡æ‰§ç…§ã€æ³¨å†Œå’Œ/æˆ–è®¸å¯è¯è·å¾—è®¤å¯ï¼Œå¹¶æä¾›ç›¸å…³æœåŠ¡ä»¥è¯†åˆ«ã€é¢„é˜²å’Œæ²»ç–—ç–¾ç—…å’Œç—…ç—‡ã€‚ å›¢é˜Ÿæˆå‘˜æ„æˆå¦‚ä¸‹ï¼š é’ˆç¸å¸ˆ è„Šæ¤æŒ‰æ‘©å¸ˆ è¥å…»å¸ˆ è‡ªç„¶ç–—æ³•åŒ»ç”Ÿ æŠ¤å£« åŒ»ç”Ÿ è¡Œä¸ºåŒ»å¸ˆ ç‰©ç†æ²»ç–—å¸ˆ èŒä¸šç‰©ç†æ²»ç–—å¸ˆ è¿åŠ¨æ•™ç»ƒ ACE ç§äººæ•™ç»ƒè®¤è¯ä¸“ä¸šèƒ½åŠ›é—¨æ§›è¢«ç§°ä¸ºä»äº‹æŸç§è¡Œä¸šæ‰€éœ€çš„â€œæœ€ä½èƒ½åŠ›â€ã€‚å¯¹äºä¸“ä¸šäººå‘˜è€Œè¨€ï¼Œæ‰§ç…§å¯ä»¥å°†å…¶ä¸æœªè¯æ˜è‡ªå·±å¤„äºåŒä¸€èƒ½åŠ›æ°´å¹³çš„äººåŒºåˆ†å¼€ã€‚é€šè¿‡è·å¾— ACE ç§äººæ•™ç»ƒè®¤è¯ï¼Œä¸“ä¸šäººå‘˜è¯æ˜äº†å…¶åœ¨ä»¥ä¸‹æ–¹é¢çš„èƒ½åŠ›ï¼šåº”ç”¨ç›¸å…³çŸ¥è¯†åœ¨å„ç§å®é™…æƒ…å†µä¸‹åšå‡ºå®‰å…¨æœ‰æ•ˆçš„è¿åŠ¨è®¡åˆ’å†³ç­–ï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘å®¢æˆ·é£é™©å’Œä¼¤å®³ã€‚ â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰ACE è®¤è¯çš„ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´æ ¹æ® IDEA ç§äººå¥èº«æ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´ è¡¨æ ¼ï¼Œç§äººæ•™ç»ƒä¸å¯ä»¥åšä»¥ä¸‹äº‹æƒ…ï¼š è¿›è¡Œè¯Šæ–­ å¼€å¤„æ–¹ ä¸ºå®¢æˆ·è§„å®šé¥®é£Ÿæˆ–æ¨èå…·ä½“çš„è¡¥å……å‰‚ æ²»ç–—ä¼¤å®³æˆ–ç–¾ç—… ç›‘ç£åŒ»ç–—è½¬ä»‹ç»å®¢æˆ·çš„è¿›å±• æä¾›åº·å¤æœåŠ¡ æä¾›å’¨è¯¢ ä¸æ‚£è€…åˆä½œ ACE è®¤è¯çš„ç§äººæ•™ç»ƒçš„çŸ¥è¯†ã€æŠ€èƒ½å’Œèƒ½åŠ›ACE ç§äººæ•™ç»ƒè€ƒè¯•åŒ…æ‹¬ä»¥ä¸‹é¢†åŸŸ å®¢æˆ·é¢è°ˆå’Œè¯„ä¼° - 31% è®¡åˆ’è®¾è®¡å’Œæ‰§è¡Œ - 33% è¿›é˜¶å’Œè°ƒæ•´ - 19% ä¸“ä¸šè¡Œä¸ºã€å®‰å…¨æ€§å’Œé£é™©ç®¡ç† - 17% æ•™è‚²å’Œç»éªŒå»ºè®®åº”è¯•è€…æµå‡ºå¹³å‡ä¸‰è‡³å››ä¸ªæœˆçš„å­¦ä¹ æ—¶é—´æ¥å……åˆ†å‡†å¤‡ç§äººæ•™ç»ƒè®¤è¯è€ƒè¯•ã€‚ æ‰§ä¸šè´£ä»»å’Œé“å¾·è§„èŒƒACE åˆ¶å®šäº†ACE é“å¾·å‡†åˆ™ï¼Œæ‰€æœ‰ ACE è®¤è¯çš„ä¸“ä¸šäººå‘˜å’Œåº”è¯•è€…éƒ½å¿…é¡»ç†Ÿæ‚‰å¹¶éµå®ˆé“å¾·å‡†åˆ™å’Œä¸“ä¸šæ—¶é—´å’Œçºªå¾‹ç¨‹åºã€‚ ACE ä¸“ä¸šå®è·µå’Œçºªå¾‹ç¨‹åºæ‰§ç…§æœŸå’Œç»­æœŸACE è®¤è¯æœ‰æ•ˆæœŸä¸ºä¸¤å¹´ï¼Œä»è·å¾—è®¤è¯ä¹‹æ—¥èµ·å¼€å§‹è®¡ç®—ï¼Œäºå½“æœˆæœ€åä¸€å¤©åˆ°æœŸã€‚ç»­æœŸåˆ™éœ€è¦å®Œæˆè‡³å°‘ 20 å°æ—¶çš„æŒç»­æ•™è‚²å­¦åˆ†ï¼ˆ2.0 CECï¼‰ï¼Œå¹¶æŒæœ‰å½“å‰çš„å¿ƒè‚ºå¤è‹ï¼ˆCPRï¼‰è¯ä¹¦ã€‚å¦‚æœæŒè¯äººç”Ÿæ´»åœ¨åŒ—ç¾ï¼Œåˆ™å¿…é¡»èƒ½å¤Ÿæ­£ç¡®ä½¿ç”¨è‡ªåŠ¨å¤–éƒ¨é™¤é¢¤å™¨ï¼ˆAEDï¼‰ã€‚ ACE ä¸ºè¶…è¿‡æˆªæ­¢æœŸé™çš„ä¸“ä¸šäººå‘˜çš„ç»­æœŸç•™å‡ºå…­ä¸ªæœˆçš„å»¶é•¿æœŸé™ã€‚ å®¢æˆ·éšç§è½¬ä»‹ç»è¡¥å……å‰‚å’Œå…¶ä»–è¥å…»ç›¸å…³é—®é¢˜è¡¥å……å‰‚ä¸å—ç¾å›½é£Ÿå“å’Œè¯ç‰©ç®¡ç†å±€ï¼ˆFDAï¼‰ç®¡åˆ¶ï¼Œå› æ­¤æ— æ³•ä¿è¯èµ·å¼ºåº¦ã€çº¯åº¦ã€å®‰å…¨æ€§å’Œæ•ˆæœã€‚ç§äººæ•™ç»ƒä»…ä»…æœ‰èµ„æ ¼å‘å®¢æˆ·æ¨èè¡¥å……å‰‚ï¼Œè€Œæ²¡æœ‰èµ„æ ¼æ¨èè¯ç‰©æˆ–å¼€å…·è¯ç‰©ã€‚ æ‰€æä¾›æœåŠ¡è¶…å‡ºæ‰§ä¸šèŒƒå›´çš„åæœç”± NCCA è¿›è¡Œçš„å¥åº·ç…§æŠ¤è”ç›Ÿèµ„æ ¼è¯ä¹¦è®¤è¯å¥èº«ä¸å¥åº·è¡Œä¸šçš„è®¤å¯æ•™è‚²ç•Œçš„è®¤å¯ACE æ•™è‚²ä¼™ä¼´è®¡åˆ’æä¾›å››é—¨ç‹¬ç«‹çš„å¤§å­¦è¯¾ç¨‹ï¼š ç§æ•™ å›¢ä½“è¿åŠ¨ å¥åº·æ•™ç»ƒ ç‰¹æ®Šäººç¾¤è¿åŠ¨è¯¾ç¨‹ åŠ³å·¥éƒ¨çš„è®¤å¯èŒä¸šå‘å±•æŒç»­æ•™è‚²é«˜çº§çŸ¥è¯†ä¸“ä¸šåŒ–å­¦ä½é¢å¤–çš„å¥èº«æ‰§ç…§å¥åº·ç…§æŠ¤è”ç›Ÿçš„æ–°ä¸“ä¸šé¢†åŸŸ ç¬¬ 1 ç«  - ä¹ é¢˜é›†6. ä¸‹åˆ—å“ªä¸€é¡¹å±äº ACE è®¤è¯ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´ï¼Ÿ å¸®åŠ©å®¢æˆ·æ›´å¥½åœ°äº†è§£é£Ÿç‰©åˆ†é‡ä¸å¥åº·é£Ÿå“ï¼Œä»è€Œå¸®åŠ©ä»–ä»¬åšå‡ºæ›´æ˜æ™ºçš„é€‰æ‹© ä¸ºå®¢æˆ·æä¾› 4 å‘¨é£Ÿè°±ä¸è´­ç‰©æ¸…å•ï¼Œå¸®åŠ©ä»–ä»¬èµ°ä¸Šå¥åº·é¥®é£Ÿçš„æ­£è½¨ å›é¡¾è¿‡å» 24 å°æ—¶çš„é¥®é£Ÿæƒ…å†µï¼Œå¸®åŠ©å®¢æˆ·äº†è§£è‡ªå·±ç¼ºå°‘å“ªäº›å¾®é‡å…ƒç´  å°±æƒŠå–œä»£è°¢ç‡ï¼ˆRMRï¼‰ä»¥åŠçƒ­é‡æ‘„å…¥è¦å°äº RMR ç­‰çŸ¥è¯†å¯¹å®¢æˆ·è¿›è¡Œæ•™è‚²ï¼Œå¸®åŠ©å®¢æˆ·å‡è½»ä½“é‡ é”™è¯¯é€‰é¡¹ï¼ˆ4ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ1ï¼‰ã€‚å…³é”®ç‚¹åœ¨äºé€‰æ‹©æƒç”±å®¢æˆ·æŒæœ‰ï¼Œè€Œéç§äººæ•™ç»ƒåšå‡ºé€‰æ‹© or å†³å®šã€‚ 9. å…³äºç§äººæ•™ç»ƒå‘å®¢æˆ·æ¨èè¥å…»è¡¥å……å‰‚ï¼Œä¸‹åˆ—å™è¿°æœ€æ°å½“çš„ä¸€é¡¹æ˜¯ åªèƒ½å‘å®¢æˆ·æ¨èè‡ªå·±å·²æŠ•èŒä¸šè´£ä»»é™©çš„è¡¥å……å‰‚ å¦‚æœç§äººæ•™ç»ƒæœªæŒæœ‰æ³¨å†Œè¥å…»å¸ˆæˆ–åŒ»å­¦åšå£«å­¦ä½ç­‰å…¶ä»–å¸§æ•°ï¼Œåˆ™ä¸å…·æœ‰å‘ä»–äººæ¨èè¡¥å……å‰‚çš„åˆæ³•èµ„è´¨ ç§äººæ•™ç»ƒåº”æ¥å—ä¸“é—¨çš„çŸ¥è¯†åŸ¹è®­åæ‰èƒ½å‘å®¢æˆ·æ¨èè¥å…»è¡¥å……å‰‚ ç”±äºæœç”¨è¡¥å……å‰‚ä¸å…¶ä»–è¯ç‰©å¯èƒ½ä¼šå¼•èµ·å¹¶å‘ç—‡ï¼Œç§äººæ•™ç»ƒåªèƒ½å‘å®¢æˆ·æ¨èæ¤ç‰©æ€§è¡¥å……å‰‚ é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚â€œä¸“é—¨çš„çŸ¥è¯†åŸ¹è®­â€ä¸å¤Ÿç²¾ç¡®ã€‚ 15. â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ ä¸“ä¸šå¥èº«äººå‘˜åœ¨ç‰¹å®šé¢†åŸŸå¯æä¾›çš„åˆæ³•æœåŠ¡èŒƒå›´ åœ¨å·¥ä½œåœºæ‰€å¿…é¡»éµå®ˆçš„èŒä¸šé“å¾·å‡†åˆ™ å¯ä»¥ä¾›ç§æ•™æœåŠ¡çš„åœºæ‰€ å¿…é¡»éµå®ˆçš„æŒ‡å—æˆ–å‚æ•°æ ‡å‡† é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚é“å¾·æ˜¯é“å¾·ï¼Œä¸šåŠ¡æ˜¯ä¸šåŠ¡ã€‚ 20. å¦‚æœå®¢æˆ·æåˆ°è‡ªå·±å‚åŠ å‘¨æœ«ç½‘çƒæ¯”èµ›åè‚Œè‚‰é…¸ç—›ï¼Œæ•™ç»ƒç»™äºˆçš„æœ€æ°å½“çš„å›åº”æ˜¯ï¼Ÿ æ¨èå®¢æˆ·æœç”¨æŠ—ç‚ç±»éå¤„æ–¹è¯ å»ºè®®å®¢æˆ·åœ¨ä¸‹æ¬¡æ¯”èµ›å‰æœç”¨è‚Œé…¸è¡¥å……å‰‚ å¯¹æ·±å±‚ç»„ç»‡è¿›è¡ŒæŒ‰æ‘©å¤„ç†ï¼Œå¸®åŠ©ç¼“è§£è‚Œè‚‰é…¸ç—› ä¸å®¢æˆ·æ¢è®¨å¯¹æ‚£å¤„è¿›è¡Œå†·æ•·çš„æ­£ç¡®æ–¹æ³• é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ4ï¼‰ã€‚å…¶ä½™é€‰é¡¹è¶…å‡ºæ‰§ä¸šèŒƒå›´ã€‚","tags":[{"name":"å¥èº«","slug":"å¥èº«","permalink":"https://lilei.pro/tags/å¥èº«/"},{"name":"ACE-CPT","slug":"ACE-CPT","permalink":"https://lilei.pro/tags/ACE-CPT/"}]},{"title":"ACE-CPT è€ƒè¯•ä¿¡æ¯æ±‡æ€»","date":"2019-07-14T09:27:29.000Z","path":"2019/07/14/ace-cpt-qualification/","text":"å›½å†…è‡ªè€ƒACE-CPTå¿ƒå¾—ï¼ˆä¸€ï¼‰è€ƒè¯•æµç¨‹ å›½å†…è‡ªè€ƒACE-CPTå¿ƒå¾—ï¼ˆäºŒï¼‰è¯»è€…é—®ç­” æ•™æå“ªé‡Œä¹° å››å¤§è®¤è¯ ACSM NSCA ACE NASM æ•™æ1000é¡µæ•™æï¼Œéœ€è¦100hå­¦ä¹ æ—¶é—´ã€‚ å®˜ç½‘è‹±æ–‡ç‰ˆ å®˜ç½‘ç¿»è¯‘ç‰ˆ åŸ¹è®­æœºæ„ç¿»è¯‘ç‰ˆ æ•™æ Personal Trainer Manual â€”â€” ä¸»è¦æ•™æï¼Œ80%è€ƒé¢˜æ¥æºäºæ­¤ Essential of Exercise Science â€”â€” è¾…åŠ©ææ–™ï¼Œè§£å‰–ã€è¥å…»ã€ç”Ÿç†ç­‰ Study Companion â€”â€” è¯¾åä¹ é¢˜ å®£ä¼ æ‰‹å†Œ â€”â€” æ²¡ç”¨ å®˜ç½‘æœ‰åœ¨çº¿æ¨¡æ‹Ÿé¢˜ã€‚ è€ƒé¢˜åˆ†å¸ƒã€‚ è€ƒé¢˜åˆ†å¸ƒ è€ƒè¯•æºå¸¦èº«ä»½è¯ã€é©¾ç…§ã€æŠ¤ç…§ã€CPRè¯ã€‚ 3å°æ—¶ï¼Œ150é“å•é€‰é¢˜ï¼Œ125é¢˜è®¡å…¥æ€»åˆ†ã€‚æ¯é“é¢˜éƒ½æœ‰è‹±æ–‡åŸæ–‡å’Œä¸­æ–‡ç¿»è¯‘ã€‚å¼€è€ƒå‰ä¼šæä¾›çº¸ç¬”ã€‚ ç”µè„‘ä¸Šæœ‰å·¥å…·ï¼š é¢˜ç›®æ ‡è®° æœªç­”é¢˜æ•°é‡ è®¡ç®—å™¨ è€ƒè¯•æäº¤åç«‹é©¬å‡ºåˆ†æ•°ã€‚æ€»åˆ†800åˆ†ï¼Œè¶…è¿‡500åˆ†åŠæ ¼ã€‚ æŠ¥åå®˜ç½‘æŠ¥åã€‚399åˆ€ã€‚ æå‰ä¸€ä¸ªæœˆç”³è¯·è€ƒåœºã€‚ æ€¥æ•‘åŸ¹è®­ï¼šCPR or AEDï¼Œåœ¨å½“åœ°çº¢åå­—ä¼šæŠ¥åï¼Œä¸€å‘¨æœ«æ‹¿è¯ã€‚ ç»§ç»­æ•™è‚²ä¸¤å¹´å†… 2.0 å­¦åˆ† + CPR","tags":[{"name":"å¥èº«","slug":"å¥èº«","permalink":"https://lilei.pro/tags/å¥èº«/"},{"name":"ACE-CPT","slug":"ACE-CPT","permalink":"https://lilei.pro/tags/ACE-CPT/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬å››éƒ¨åˆ† è‡ªæˆ‘æå‡å’Œå®Œå–„","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-9/","text":"ä¹ æƒ¯ä¸ƒï¼šä¸æ–­æ›´æ–°","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸‰éƒ¨åˆ† ä¹ æƒ¯å›› åŒèµ¢æ€ç»´â€”â€”äººé™…é¢†å¯¼çš„åŸåˆ™","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-6/","text":"äººé™…äº¤å¾€çš„å…­ä¸ªæ¨¡å¼ åˆ©äººåˆ©å·±ï¼ˆåŒèµ¢ï¼‰ æŸäººåˆ©å·±ï¼ˆèµ¢/è¾“ï¼‰ èˆå·±ä¸ºäººï¼ˆè¾“/èµ¢ï¼‰ ä¸¤è´¥ä¿±ä¼¤ï¼ˆè¾“/è¾“ï¼‰ ç‹¬å–„å…¶èº«ï¼ˆèµ¢ï¼‰ å¥½èšå¥½æ•£ï¼ˆæ— äº¤æ˜“ï¼‰ åˆ©äººåˆ©å·±ï¼ˆåŒèµ¢ï¼‰åŒèµ¢è€…æŠŠç”Ÿæ´»çœ‹ä½œåˆä½œçš„èˆå°ï¼Œè€Œä¸æ˜¯ç«æŠ€åœºã€‚ä½†æ˜¯å¤§å¤šæ•°äººéƒ½ç”¨ä¸¤åˆ†æ³•çœ‹é—®é¢˜ï¼Œéå¼ºå³å¼±ï¼Œä¸èƒœåˆ™è´¥ã€‚å®é™…ä¸Šè¿™ç§æƒ³æ³•æ˜¯ç«™ä¸ä½è„šçš„ï¼Œå®ƒä»¥åŠ›é‡å’Œåœ°ä½ï¼Œè€ŒéåŸåˆ™ä¸ºå‡†ç»³ã€‚ æŸäººåˆ©å·±ï¼ˆèµ¢/è¾“ï¼‰å¤§å¤šæ•°äººä»å°å°±è¢«è¿™ç§æ¨¡å¼æµ¸æŸ“ã€‚å­¦æ ¡ã€èµ›åœºã€æ³•å¾‹æŠŠäººåˆ†ä¸ºæ•Œå¯¹åŒæ–¹ï¼Œä¸æ˜¯ä½ æ­»ï¼Œå°±æ˜¯æˆ‘æ´»ã€‚è¯šç„¶ï¼Œåœ¨ç«äº‰æ¿€çƒˆå’Œä¿¡ä»»è–„å¼±çš„ç¯å¢ƒé‡Œï¼Œæˆ‘ä»¬éœ€è¦èµ¢/è¾“æ¨¡å¼ã€‚ä½†æ˜¯ç«äº‰åœ¨ç”Ÿæ´»ä¸­åªå±…å°‘æ•°ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ¯å¤©éƒ½å’Œé…å¶ã€å­©å­ã€åŒäº‹ã€é‚»å±…ã€æœ‹å‹ç«äº‰ã€‚ç°å®ç”Ÿæ´»éœ€è¦äº’ç›¸ä¾èµ–ï¼Œè€Œä¸æ˜¯å•æªåŒ¹é©¬ï¼Œä½ çš„å¾ˆå¤šæ¢¦æƒ³éƒ½éœ€è¦é€šè¿‡ä¸å…¶ä»–äººåˆä½œæ‰èƒ½å®ç°ï¼Œè€Œèµ¢/è¾“æ¨¡å¼æ˜¯è¿™ç§åˆä½œæœ€å¤§çš„éšœç¢ã€‚ èˆå·±ä¸ºäººï¼ˆè¾“/èµ¢ï¼‰æœ‰äº›äººåˆ™æ­£å¥½ç›¸åï¼Œä»–ä»¬ä¿¡å¥‰è¾“/èµ¢æ¨¡å¼ã€‚ â€œæˆ‘è®¤è¾“ï¼Œä½ èµ¢äº†ã€‚â€ â€œå°±è¿™æ ·å§ï¼Œæˆ‘å¬ä½ çš„ã€‚â€ â€œæˆ‘æ˜¯ä¸ªå’Œäº‹ä½¬ï¼Œåªè¦èƒ½æ¯äº‹å®äººï¼Œæˆ‘åšä»€ä¹ˆéƒ½è¡Œã€‚â€ è¿™ç§äººæ²¡æœ‰æ ‡å‡†ï¼Œæ²¡æœ‰è¦æ±‚ï¼Œæ²¡æœ‰æœŸæœ›ï¼Œä¹Ÿæ²¡æœ‰å°†æ¥ã€‚ä»–ä»¬é€šå¸¸å–œæ¬¢å–æ‚¦ä»–äººï¼Œå–œæ¬¢æ»¡è¶³ä»–äººçš„å¸Œæœ›ã€‚åˆ«äººçš„è®¤åŒå’Œæ¥å—èƒ½å¤Ÿç»™ä»–ä»¬åŠ›é‡ï¼Œä»–ä»¬æ²¡æœ‰å‹‡æ°”è¡¨è¾¾è‡ªå·±çš„æ„Ÿå—å’Œä¿¡å¿µï¼Œæ€»æ˜¯æœä»åˆ«äººçš„æ„å¿—ã€‚ åœ¨è°ˆåˆ¤æ—¶ï¼Œä»–ä»¬å¸¸å¸¸ä¸æ˜¯æ”¾å¼ƒå°±æ˜¯é€€è®©ï¼Œå¦‚æœæˆä¸ºé¢†å¯¼ï¼Œä¹Ÿå¯¹ä¸‹å±å«‰å¦’çºµå®¹ã€‚èµ¢/è¾“æ¨¡å¼æ„å‘³ç€åšå¥½äººï¼Œç„¶è€Œå¥½äººä¸é•¿å‘½ã€‚ å¯æ˜¯è¢«å‹æŠ‘çš„æƒ…æ„Ÿå¹¶ä¸ä¼šæ¶ˆå¤±ï¼Œç´¯ç§¯åˆ°ä¸€å®šç¨‹åº¦åï¼Œåè€Œä»¥æ›´ä¸‘æ¶çš„æ–¹å¼çˆ†å‘å‡ºæ¥ï¼Œæœ‰äº›ç²¾ç¥ç–¾ç—…å°±æ˜¯è¿™æ ·å½¢æˆçš„ã€‚ èµ¢/è¾“æ¨¡å¼å’Œè¾“/èµ¢æ¨¡å¼éƒ½å­˜åœ¨äººæ ¼ç¼ºé™·ã€‚çŸ­æœŸæ¥çœ‹ï¼Œèµ¢/è¾“æ¨¡å¼çš„äººè¾ƒæœ‰æ•ˆç‡ï¼Œå› ä¸ºä»–ä»¬é€šå¸¸åœ¨èƒ½åŠ›å’Œæ™ºåŠ›æ–¹é¢é«˜äººä¸€ç­¹ï¼Œè€Œè¾“/èµ¢æ¨¡å¼è‡ªå§‹è‡³ç»ˆéƒ½å±…äºåŠ£åŠ¿ã€‚ ä¸¤è´¥ä¿±ä¼¤ï¼ˆè¾“/è¾“ï¼‰ä¸ºäº†æŠ¥å¤ï¼Œä¸æƒœç‰ºç‰²è‡ªèº«çš„åˆ©ç›Šï¼Œå´ä¸é—®æ˜¯å¦å€¼å¾—ï¼›åªæœ‰ä¸å¤Ÿæˆç†Ÿã€æŒæ¡ä¸äº†äººç”Ÿæ–¹å‘çš„äººï¼Œæ‰ä¼šè¿™æ ·ã€‚ ç‹¬å–„å…¶èº«ï¼ˆèµ¢ï¼‰å½“ç«äº‰å’Œå¯¹æŠ—æ„ä¹‰ä¸å¤§çš„æ—¶å€™ï¼Œç‹¬å–„å…¶èº«çš„æ¨¡å¼æ˜¯å¤šæ•°äººçš„å¤„äº‹æ–¹æ³•ï¼Œä»–ä»¬åªåœ¨æ„è‡ªå·±çš„åˆ©ç›Šæ— æŸï¼Œåˆ«äººçš„å°±ç•™ç»™ä»–ä»¬è‡ªå·±å»ä¿æŠ¤å§ã€‚ å“ªä¸€ç§æœ€å¥½é•¿è¿œæ¥çœ‹ï¼Œä¸æ˜¯åŒèµ¢ï¼Œå°±ä¸€å®šæ˜¯ä¸¤è´¥ä¿±ä¼¤ã€‚ å¦‚æœçœŸçš„æŠ±ç€åŒèµ¢çš„æ€åº¦ï¼Œå°±ä¼šå¤šä¸ä¸šä¸»äº¤æµï¼Œå¬å–æ„è§ï¼Œå¹¶æœ‰å‹‡æ°”è¡¨è¾¾è‡ªå·±çš„è§‚ç‚¹ï¼Œç›´åˆ°ç»“æœè®©åŒæ–¹éƒ½æ»¡æ„ã€‚ ä¸èƒ½åŒèµ¢å°±å¥½èšå¥½æ•£å¦‚æœå®åœ¨æ— æ³•è¾¾æˆå…±è¯†ï¼Œå®ç°åŒèµ¢ï¼Œå°±ä¸å¦‚å¥½èšå¥½æ•£ï¼ˆæ”¾å¼ƒäº¤æ˜“ï¼‰ã€‚ åœ¨ç›¸äº’ä¾èµ–çš„ç¯å¢ƒé‡Œï¼Œä»»ä½•éåŒèµ¢çš„è§£å†³æ–¹æ¡ˆéƒ½ä¸æ˜¯æœ€å¥½çš„ï¼Œå› ä¸ºä»–ä»¬ç»ˆå°†å¯¹é•¿è¿œå…³ç³»äº§ç”Ÿè¿™æ ·é‚£æ ·çš„ä¸åˆ©å½±å“ï¼Œä½ å¿…é¡»æ…é‡å¯¹å¾…è¿™äº›å½±å“çš„ä»£ä»·ã€‚å¦‚æœä½ æ— æ³•åŒå¯¹æ–¹è¾¾æˆåŒèµ¢çš„åè®®ï¼Œé‚£ä¹ˆæœ€å¥½é€‰æ‹©æ”¾å¼ƒã€‚ åŒèµ¢æ€ç»´çš„äº”ä¸ªè¦é¢†åŒèµ¢çš„åŸåˆ™æ˜¯æ‰€æœ‰äººé™…äº¤å¾€çš„åŸºç¡€ï¼ŒåŒ…æ‹¬äº”ä¸ªç‹¬ç«‹çš„æ–¹é¢ï¼šåŒèµ¢å“å¾·æ˜¯åŸºç¡€ï¼Œæ¥ç€å»ºç«‹èµ·åŒèµ¢å…³ç³»ï¼Œç”±æ­¤è¡ç”Ÿå‡ºåŒèµ¢åè®®ï¼Œéœ€è¦åŒèµ¢ä½“ç³»ï¼ˆç»“æ„ï¼‰ä½œä¸ºåŸ¹è‚²ç¯å¢ƒï¼Œé€šè¿‡åŒèµ¢çš„åŒèµ¢è¿‡ç¨‹æ¥å®Œæˆã€‚ åŒèµ¢å“å¾·åŒèµ¢å“å¾·æœ‰ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚ è¯šä¿¡ã€‚æœ‰æ˜ç¡®çš„ä»·å€¼è§‚ï¼Œä¿¡å®ˆæ‰¿è¯ºã€‚ æˆç†Ÿã€‚æˆç†Ÿå°±æ˜¯åœ¨è¡¨è¾¾è‡ªå·±çš„æƒ…æ„Ÿå’Œä¿¡å¿µçš„åŒæ—¶åˆèƒ½ä½“è°…ä»–äººçš„æƒ³æ³•å’Œæ„Ÿå—çš„èƒ½åŠ›ã€‚ çŸ¥è¶³ã€‚å³ç›¸ä¿¡èµ„æºå……è¶³ï¼Œäººäººæœ‰ä»½ã€‚å…¬ä¼—é¢†åŸŸçš„æˆåŠŸçš„æ„æ€ä¸æ˜¯å‹å€’æ—äººï¼Œè€Œæ˜¯é€šè¿‡æˆåŠŸçš„æœ‰æ•ˆäº¤å¾€è®©æ‰€æœ‰çš„å‚ä¸è€…è·åˆ©ï¼Œå¤§å®¶ä¸€èµ·å·¥ä½œï¼Œä¸€èµ·æ¢è®¨ï¼Œä¸€èµ·å®ç°å•æªåŒ¹é©¬æ— æ³•å®Œæˆçš„ç†æƒ³ï¼Œè¿™ç§æˆåŠŸè¦ä»¥çŸ¥è¶³å¿ƒæ€ä¸ºåŸºç¡€ã€‚ åŒèµ¢å…³ç³»åŒèµ¢çš„ç²¾é«“å°±æ˜¯ä¿¡ç”¨ï¼Œå³æƒ…æ„Ÿè´¦æˆ·ã€‚å¦‚æœæƒ…æ„Ÿè´¦æˆ·å‚¨è“„å……è¶³ï¼Œä¿¡ç”¨å°±ä¸å†æ˜¯é—®é¢˜ï¼Œå·²æœ‰çš„æŠ•å…¥è®©æˆ‘ä»¬ç›¸çŸ¥ç›¸æ•¬ï¼Œæˆ‘ä»¬å¯ä»¥å…¨ç¥è´¯æ³¨äºé—®é¢˜æœ¬èº«ï¼Œè€Œä¸æ˜¯æ€§æ ¼æˆ–è€…ç«‹åœºã€‚ ä½ å¯¹åŒèµ¢çš„æ€åº¦è¶ŠåšæŒï¼Œè¶ŠçœŸè¯šï¼Œè¶Šç§¯æï¼Œè¶ŠæŠ•å…¥ï¼Œä½ å¯¹ä»–äººçš„å½±å“åŠ›å°±è¶Šå¤§ã€‚ åŒèµ¢åè®®å…³ç³»ç¡®ç«‹ä¹‹åï¼Œå°±éœ€è¦æœ‰åè®®æ¥è¯´æ˜åŒèµ¢çš„å®šä¹‰å’Œæ–¹å‘ï¼Œè¿™ç§åè®®æœ‰æ—¶è¢«ç§°ä¸ºâ€œç»©æ•ˆåè®®â€æˆ–â€œåˆä½œåè®®â€ï¼Œå®ƒè®©çºµå‘äº¤å¾€è½¬ä¸ºæ°´å¹³äº¤å¾€ï¼Œä»å±å…³ç³»è½¬ä¸ºåˆä½œå…³ç³»ï¼Œä¸Šçº§ç›‘ç£è½¬ä¸ºè‡ªæˆ‘ç›‘ç£ã€‚ åœ¨åŒèµ¢åè®®ä¸­ï¼Œå¯¹ä»¥ä¸‹äº”ä¸ªè¦ç´ åº”è¯¥æœ‰æ˜ç¡®çš„è§„å®šï¼š é¢„æœŸç»“æœï¼šç¡®è®¤ç›®æ ‡å’Œæ—¶é™ï¼Œæ–¹æ³•ä¸è®¡ã€‚ æŒ‡å¯¼æ–¹é’ˆï¼šç¡®è®¤å®ç°ç›®æ ‡çš„åŸåˆ™ã€æ–¹é’ˆå’Œè¡Œä¸ºé™åº¦ã€‚ å¯ç”¨èµ„æºï¼šåŒ…æ‹¬äººåŠ›ã€è´¢åŠ›ã€æŠ€æœ¯æˆ–è€…ç»„ç»‡èµ„æºã€‚ ä»»åŠ¡è€ƒæ ¸ï¼šå»ºç«‹ä¸šç»©è¯„ä¼°æ ‡å‡†å’Œæ—¶é—´ã€‚ å¥–æƒ©åˆ¶åº¦ï¼šæ ¹æ®ä»»åŠ¡è€ƒæ ¸ç¡®å®šå¥–æƒ©çš„æ„ä¹‰ã€‚ åŒèµ¢çš„ç®¡ç†åŸ¹è®­â€¦â€¦åŸ¹è®­ä¹‹å‰ï¼Œå‘å—è®­è€…è¯­è¨€è¿™æ¬¡åŸ¹è®­ä¸ä¼šä¸€å¸†é£é¡ºï¼Œé˜»åŠ›ä¸€å®šä¼šå­˜åœ¨ã€‚ åŒèµ¢ç»©æ•ˆåè®®ç®¡ç†å“²å­¦å®¶å…¼é¡¾é—®å½¼å¾—Â·å¾·é²å…‹ï¼ˆPeter Druckerï¼‰å»ºè®®ï¼Œç»ç†å’Œå‘˜å·¥ä¹‹é—´å¯ä»¥ç”¨â€œç»™ç»ç†çš„ä¿¡â€è¿™ç§å½¢å¼æ¥è¡¨è¿°ç»©æ•ˆåè®®çš„è¦ç‚¹ã€‚é¦–å…ˆå°±é¢„æœŸç»“æœã€æŒ‡å¯¼æ–¹é’ˆå’Œå¯ç”¨èµ„æºæ·±å…¥æ¢è®¨ï¼Œä¿è¯å…¶ä¸ç»„ç»‡çš„æ€»ç›®æ ‡ä¸€è‡´ï¼Œç„¶åå†™åœ¨â€œç»™ç»ç†çš„ä¿¡â€ä¸­ï¼Œå¹¶æè®®ä¸‹ä¸€æ¬¡ç»©æ•ˆè®¡åˆ’å’Œè®¨è®ºçš„æ—¶é—´ã€‚ æœ‰å››ç§ç®¡ç†è€…æˆ–å®¶é•¿éƒ½å¯ä»¥æŒæ§çš„å¥–æƒ©æ–¹æ³•ï¼šé‡‘é’±ã€ç²¾ç¥ã€æœºä¼šä»¥åŠè´£ä»»ã€‚ åŒèµ¢ä½“ç³»åŒèµ¢å¿…é¡»æœ‰ç›¸åº”ä½“ç³»æ”¯æ’‘ï¼ŒåŒ…æ‹¬åŸ¹è®­ã€è§„åˆ’ã€äº¤æµã€é¢„ç®—ã€ä¿¡æ¯ã€è–ªé…¬ç­‰ï¼Œè€Œä¸”æ‰€æœ‰ä½“ç³»éƒ½è¦å»ºç«‹åœ¨åŒèµ¢åŸåˆ™çš„åŸºç¡€ä¸Šã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œé—®é¢˜éƒ½æºäºä½“ç³»ï¼Œè€Œä¸æ˜¯äººã€‚å†å¥½çš„äººç½®èº«äºä¸€ä¸ªç³Ÿç³•çš„ä½“ç³»ä¸­ï¼Œä¹Ÿä¸ä¼šæœ‰å¥½ç»“æœã€‚ åŒèµ¢è¿‡ç¨‹æˆ‘å»ºè®®ä¸åŒçš„äººå’Œæœºæ„é‡‡ç”¨ä»¥ä¸‹å››ä¸ªæ­¥éª¤å®ŒæˆåŒèµ¢è¿‡ç¨‹ï¼š é¦–å…ˆï¼Œä»å¯¹æ–¹çš„è§’åº¦çœ‹é—®é¢˜ã€‚çœŸæ­£ç†è§£å¯¹æ–¹çš„æƒ³æ³•ã€éœ€è¦å’Œé¡¾è™‘ï¼Œæœ‰æ—¶ç”šè‡³æ¯”å¯¹æ–¹ç†è§£çš„æ›´ä¸ºé€å½»ã€‚ å…¶æ¬¡ï¼Œè®¤æ¸…ä¸»è¦é—®é¢˜å’Œé¡¾è™‘ï¼ˆè€Œéç«‹åœºï¼‰ã€‚ ç¬¬ä¸‰ï¼Œç¡®å®šå¤§å®¶éƒ½èƒ½æ¥å—çš„ç»“æœã€‚ ç¬¬å››ï¼Œå®ç°è¿™ç§ç»“æœçš„å„ç§å¯èƒ½é€”å¾„ã€‚ ä»˜è¯¸è¡ŒåŠ¨ è®¤çœŸæƒ³ä¸€ä¸‹ä½ æœ€è¿‘éœ€è¦æ‰“äº¤é“çš„äººæˆ–è€…æƒ³è¦è§£å†³çš„é—®é¢˜ï¼Œåœ¨æ•¢ä½œæ•¢ä¸ºå’Œå–„è§£äººæ„é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚ åˆ—å‡ºæœ€èƒ½å¦¨ç¢åŒèµ¢æ¨¡å¼çš„å› ç´ ï¼Œè®¾æ³•æ¸…é™¤åœ¨ä¸ªäººå½±å“åœˆå†…çš„é‚£ä¸€éƒ¨åˆ†ã€‚ é€‰æ‹©ä¸€ä¸ªä½ æƒ³ç­¾è®¢åŒèµ¢åè®®çš„äººé™…å…³ç³»ï¼›å°½é‡è®¾èº«å¤„åœ°ä¸ºå¯¹æ–¹ç€æƒ³ï¼Œè®°ä¸‹ä½ è®¤ä¸ºå¯¹æ–¹ä¼šæ¥å—çš„ç»“æœï¼›ä»è‡ªå·±çš„è§’åº¦å‡ºå‘ï¼Œåˆ—å‡ºå¯¹è‡ªå·±æœ‰åˆ©çš„ç»“æœï¼›è¯¢é—®å¯¹æ–¹æ˜¯å¦æ„¿æ„å°±è¿™ä¸ªé—®é¢˜è¿›è¡Œäº¤æµï¼›ä¸€èµ·å•†è®¨ä¸¤å…¨å…¶ç¾çš„å¯¹ç­–ã€‚ åˆ—å‡ºä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„ä¸‰ä¸ªäººé™…å…³ç³»ï¼Œä¼°ç®—ä¸€ä¸‹ä¸è¿™äº›äººçš„æƒ…æ„Ÿè´¦æˆ·ä½™é¢ï¼Œè®°ä¸‹æœ‰åŠ©äºå¢åŠ å­˜æ¬¾çš„æ„Ÿæƒ…æŠ•èµ„ã€‚ åçœè‡ªå·±çš„äº¤å¾€æ¨¡å¼ï¼Œæ˜¯èµ¢/è¾“å¼çš„å—ï¼Ÿè¿™ç§æ¨¡å¼å¯¹ä½ äºä»–äººçš„äº¤å¾€æœ‰ä»€ä¹ˆå½±å“ï¼Ÿå½¢æˆè¿™ç§æ¨¡å¼çš„ä¸»è¦åŸå› æ˜¯ä»€ä¹ˆï¼Ÿè¿™ç§æ¨¡å¼å¯¹ä½ æœ‰ä½•åŠ©ç›Šï¼Ÿ æ‰¾åˆ°ä¸€ä¸ªåŒèµ¢æ¨¡å¼çš„æ¦œæ ·ï¼Œä¹Ÿå°±æ˜¯å³ä½¿èº«å¤„å›°å¢ƒä¹Ÿä¸å¿˜åŒèµ¢çš„äººï¼Œä»”ç»†è§‚å¯Ÿå¹¶å‘ä»–å­¦ä¹ ã€‚","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸‰éƒ¨åˆ† ä¹ æƒ¯å…­ ç»Ÿåˆç»¼æ•ˆâ€”â€”åˆ›é€ æ€§åˆä½œçš„åŸåˆ™","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-8/","text":"ç»Ÿåˆç»¼æ•ˆçš„åŸºæœ¬æ€åº¦æ˜¯å¦‚æœä»¥ä¸ºå…·æœ‰ç›¸å½“èªæ˜æ‰æ™ºçš„äººè·Ÿæˆ‘æ„è§ä¸åŒï¼Œé‚£ä¹ˆå¯¹æ–¹çš„ä¸»å¼ å¿…å®šæœ‰æˆ‘å°šæœªä½“ä¼šçš„å¥¥å¦™ï¼Œå€¼å¾—åŠ ä»¥äº†è§£ã€‚ ä¸äººåˆä½œæœ€é‡è¦çš„æ˜¯ï¼Œé‡è§†ä¸åŒä¸ªä½“çš„ä¸åŒå¿ƒç†ã€æƒ…ç»ªä¸æ™ºèƒ½ï¼Œä»¥åŠä¸ªäººçœ¼ä¸­æ‰€è§åˆ°çš„ä¸åŒä¸–ç•Œã€‚å‡å¦‚ä¸¤äººæ„è§ç›¸åŒï¼Œå…¶ä¸­ä¸€äººå¿…å±å¤šä½™ã€‚ä¸æ‰€è§ç•¥åŒçš„äººæ²Ÿé€šï¼Œæ¯«æ— ç›Šå¤„ï¼Œè¦æœ‰åˆ†æ­§æ‰æœ‰æ”¶è·ã€‚ ç»Ÿåˆç»¼æ•ˆçš„ç²¾é«“æ˜¯åˆ¤æ–­å’Œå°Šé‡å·®å¼‚ï¼Œå–é•¿è¡¥çŸ­ã€‚ æ•å¼€èƒ¸æ€€ï¼Œåšé‡‡ä¼—è®®æ‰€è°“ç»Ÿåˆç»¼æ•ˆçš„æ²Ÿé€šï¼Œæ˜¯æŒ‡æ•å¼€èƒ¸æ€€ã€æ¥çº³ä¸€åˆ‡å¥‡æ€ªçš„æƒ³æ³•ï¼ŒåŒæ—¶ä¹Ÿè´¡çŒ®è‡ªå·±çš„æµ…è§ã€‚ å‡¡æ˜¯åˆ›æ–°å°±å¾—æ‰¿æ‹…ï¼Œä¸æ€•å¤±è´¥ï¼Œä¸æ–­å°è¯•é”™è¯¯ã€‚åªæ„¿ç¨³æ‰ç¨³æ‰“çš„äººï¼Œç»ä¸èµ·æ­¤ç§ç…ç†¬ã€‚ æ²Ÿé€šä¸‰å±‚æ¬¡ä½å±‚æ¬¡çš„æ²Ÿé€šæºè‡ªä½åº¦ä¿¡ä»»ï¼Œå…¶ç‰¹ç‚¹æ˜¯äººä¸äººä¹‹é—´äº’ç›¸æé˜²ï¼Œæ­¥æ­¥ä¸ºè¥ï¼Œç»å¸¸å€ŸåŠ©æ³•å¾‹è¯´è¯ï¼Œä¸ºæƒ…å†µæ¶åŒ–ä½œæ‰“ç®—ï¼Œå…¶ç»“æœåªèƒ½æ˜¯èµ¢/è¾“æˆ–è€…è¾“/èµ¢ï¼Œè€Œä¸”æ¯«æ— æ•ˆç‡å¯è¨€ï¼Œå³äº§å‡º/äº§èƒ½ä¸å¹³è¡¡ï¼Œç»“æœåªèƒ½æ˜¯è®©äººä»¬æ›´æœ‰ç†ç”±è¿›è¡Œè‡ªæˆ‘é˜²å¾¡å’Œä¿æŠ¤ã€‚ ä¸­é—´ä¸€å±‚æ˜¯å½¼æ­¤å°Šé‡çš„äº¤æµæ–¹å¼ï¼Œå”¯æœ‰ç›¸å½“æˆç†Ÿçš„äººæ‰åŠå¾—åˆ°ã€‚ä½†æ˜¯ä¸ºäº†é¿å…å†²çªï¼ŒåŒæ–¹éƒ½ä¿æŒç¤¼è²Œï¼Œå´ä¸ä¸€å®šä¸ºå¯¹æ–¹è®¾æƒ³ã€‚åœ¨ç›¸äº’ä¾èµ–çš„ç¯å¢ƒä¸­ï¼Œæœ€å¸¸ç”¨çš„æ€åº¦æ˜¯å¦¥åã€‚ ç»Ÿåˆç»¼æ•ˆæ„å‘³ç€1+1ç­‰äº8æˆ–è€…16ï¼Œç”šè‡³1600ã€‚æºè‡ªé«˜åº¦ä¿¡ä»»æ²Ÿé€šçš„å±‚æ¬¡ã€‚ å¯»æ±‚ç¬¬ä¸‰æ¡é“è·¯é«˜ä½™é¢çš„æƒ…æ„Ÿè´¦æˆ·ã€åŒèµ¢æ¨¡å¼ã€å…ˆç†è§£åˆ«äººçš„åŸåˆ™ï¼Œæ‰€æœ‰è¿™äº›åŠ åœ¨ä¸€èµ·ï¼Œå°±æ˜¯å®ç°åˆ›é€ æ€§ç»Ÿåˆç»¼æ•ˆçš„ç†æƒ³ç¯å¢ƒã€‚ æ¶ˆæåä½œå‡æ•ˆäººé™…å…³ç³»æœ€å¯è´µçš„åœ°æ–¹å°±æ˜¯èƒ½æ¥è§¦åˆ°ä¸åŒçš„æ¨¡å¼ã€‚ç›¸åŒä¸æ˜¯ç»Ÿä¸€ï¼Œä¸€è‡´ä¹Ÿä¸ç­‰äºå›¢ç»“ï¼Œç»Ÿä¸€å’Œå›¢ç»“æ„å‘³ç€äº’è¡¥ï¼Œè€Œä¸æ˜¯ç›¸åŒã€‚ç›¸åŒæ¯«æ— åˆ›é€ æ€§å¯è¨€ï¼Œè€Œä¸”æ²‰é—·ä¹å‘³ã€‚ç»Ÿåˆç»¼æ•ˆçš„ç²¾é«“å°±æ˜¯å°Šé‡å·®å¼‚ã€‚ å°Šé‡å·®å¼‚è‡ªä»¥ä¸ºæ˜¯çš„äººæ€»ä»¥ä¸ºè‡ªå·±æœ€å¯è§‚ï¼Œåˆ«äººéƒ½æœ‰æ‰€åé¢‡ï¼Œå…¶å®è¿™æ‰æ˜¯ç”»åœ°ä¸ºç‰¢ã€‚åä¹‹ï¼Œè™šæ€€è‹¥è°·çš„äººæ‰¿è®¤è‡ªå·±æœ‰ä¸è¶³ä¹‹å¤„ï¼Œè€Œä¹äºåœ¨ä¸äººäº¤å¾€ä¹‹ä¸­æ±²å–ä¸°å¯Œçš„çŸ¥è¯†è§è§£ï¼Œé‡è§†ä¸åŒçš„æ„è§ï¼Œå› è€Œå¢å¹¿è§é—»ã€‚ åŒ–é˜»åŠ›ä¸ºåŠ¨åŠ›åœ¨äº’èµ–å…³ç³»ä¸­ï¼Œç»Ÿåˆç»¼æ•ˆæ˜¯å¯¹ä»˜é˜»æŒ æˆé•¿ä¸æ”¹å˜çš„æœ€æœ‰åŠ›é€”å¾„ã€‚ åŠ¨åŠ›é€šå¸¸æ˜¯ç§¯æã€åˆç†ã€è‡ªè§‰ã€ç¬¦åˆç»æµæ•ˆç›Šçš„åŠ›é‡ï¼›ç›¸ååœ°ï¼Œé˜»åŠ›å¤šåŠæ¶ˆæã€è´Ÿé¢ã€ä¸åˆé€»è¾‘ã€æƒ…ç»ªåŒ–ã€ä¸è‡ªè§‰ï¼Œå…·ç¤¾ä¼šæ€§ä¸å¿ƒç†æ€§å› ç´ ã€‚è¿™ä¸¤ç»„ä½œç”¨åŠ›éƒ½æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œåœ¨åº”å˜æ—¶éƒ½è¦è€ƒè™‘å‘¨å…¨ã€‚ ä¸æ¶‰æ³•å‰Šå‡é˜»åŠ›ï¼Œåªä¸€å‘³å¢åŠ æ¨åŠ›ï¼Œå°±ä»¿ä½›æ–½åŠ›äºå¼¹ç°§ä¸Šï¼Œç»ˆæœ‰ä¸€å¤©å¼•èµ·åå¼¹ã€‚ è¿™å¹¶ä¸æ„å‘³ç€æ‹’ç»é‡‡å–æ³•å¾‹æ‰‹æ®µï¼Œæœ‰äº›æ—¶å€™æ³•å¾‹æ‰‹æ®µæ—¶ç»å¯¹å¿…è¦çš„ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºå®ƒåªåº”è¯¥åœ¨æœ€åå…³å¤´å‘æŒ¥ä½œç”¨ï¼Œè€Œä¸æ˜¯é—®é¢˜åˆšä¸€å‡ºç°çš„æ—¶å€™ï¼Œè¿‡æ—©ä½¿ç”¨åªä¼šè®©ææƒ§å¿ƒç†å’Œæ³•å¾‹æ¨¡å¼åˆ¶çº¦äº†ç»Ÿåˆç»¼æ•ˆçš„å¯èƒ½æ€§ã€‚ è‡ªç„¶ç•Œæ˜¯ç»Ÿåˆç»¼æ•ˆçš„æœ€ä½³å…¸èŒƒä½ åº”è¯¥å°Šé‡è‡ªå·±å–„äºåˆ†æçš„ä¸€é¢å’Œå¯Œæœ‰åˆ›é€ åŠ›çš„ä¸€é¢ï¼Œå°Šé‡å®ƒä»¬çš„å·®å¼‚ä¼šå‚¬ç”Ÿä½ çš„åˆ›é€ åŠ›ã€‚ å³ä½¿å¤„äºä¸åˆ©å¢ƒåœ°ï¼Œä¹Ÿä¸åº”è¯¥æ”¾å¼ƒè¿½æ±‚ç»Ÿåˆç»¼æ•ˆã€‚ä¸è¦åœ¨æ„åˆ«äººçš„æ— ç¤¼è¡Œå¾„ï¼Œé¿å¼€é‚£äº›æ¶ˆæåŠ›é‡ï¼Œå‘ç°å¹¶åˆ©ç”¨åˆ«äººçš„ä¼˜åŠ¿ï¼Œæé«˜è‡ªå·±çš„è®¤è¯†ï¼Œæ‰©å±•è‡ªå·±çš„è§†é‡ã€‚ä½ åº”è¯¥åœ¨ç›¸äº’ä¾èµ–çš„ç¯å¢ƒä¸­å‹‡æ•¢è€Œå¦ç‡åœ°è¡¨è¾¾è‡ªå·±çš„è§‚ç‚¹ã€æƒ…æ„Ÿå’Œç»å†ï¼Œå€Ÿæ­¤é¼“åŠ±ä»–äººåŒæ ·åœ°å¦è¯šç›¸å¾…ã€‚ å°Šé‡äººä¸äººä¹‹é—´çš„å·®å¼‚ï¼Œå½“æœ‰äººä¸åŒæ„ä½ çš„è§‚ç‚¹çš„æ—¶å€™ï¼Œä½ åº”è¯¥è¯´ï¼šâ€œä½ è·Ÿæˆ‘æœ‰ä¸ä¸€æ ·çš„çœ‹æ³•ï¼Œè¿™å¾ˆå¥½ã€‚â€ ä»˜è¯¸è¡ŒåŠ¨ æƒ³ä¸€æƒ³è°æ€»æ˜¯è·Ÿä½ çš„çœ‹æ³•ä¸ä¸€æ ·ï¼Œç”¨ä»€ä¹ˆæ–¹æ³•å¯ä»¥æŠŠè¿™äº›å·®å¼‚å˜æˆé€šå¾€ç¬¬ä¸‰æ¡é“è·¯çš„é˜¶æ¢¯ã€‚å¯ä»¥å°±å½“å‰çš„æŸä¸ªé¡¹ç›®æˆ–è€…æŸä¸ªé—®é¢˜è¯·æ•™è¿™ä¸ªäººçš„æ„è§ï¼Œçæƒœè¿™äº›ä¸åŒçš„è§è§£ã€‚ åˆ—ä¸€å¼ åå•ï¼Œå†™ä¸Šè®©ä½ è§‰å¾—ä¸å¿«çš„äººçš„åå­—ã€‚å¦‚æœä½ å†…å¿ƒæœ‰æ›´å……è¶³çš„å®‰å…¨æ„Ÿï¼Œèƒ½å¤Ÿåšåˆ°å°Šé‡å·®å¼‚ï¼Œä½ æ˜¯å¦ä¼šè§‰å¾—è¿™äº›äººä»£è¡¨äº†ä¸åŒæ„è§ï¼Œè€Œä½ å¯å€Ÿæ­¤å®ç°ä¸ä»–ä»¬çš„ç»Ÿåˆç»¼æ•ˆï¼Ÿ æƒ³ä¸€æƒ³åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½ æ›´éœ€è¦ç»Ÿåˆç»¼æ•ˆï¼Ÿç»Ÿåˆç»¼æ•ˆéœ€è¦å“ªäº›æ¡ä»¶æ¥æ”¯æŒï¼Ÿæ€æ ·æ‰èƒ½åˆ›é€ å‡ºè¿™äº›æ¡ä»¶ï¼Ÿ ä¸‹ä¸€æ¬¡å½“ä½ åŒæŸäººæ„è§ç›¸å·¦æˆ–è€…å‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œå°½é‡ç†è§£ä»–çš„ç«‹åœºå’Œé¡¾è™‘ï¼Œä»¥åˆ›é€ æ€§çš„ã€äº’æƒ äº’åˆ©çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸‰éƒ¨åˆ† å…¬ä¼—é¢†åŸŸçš„æˆåŠŸ","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-5/","text":"ä¹ æƒ¯ä¸€ï¼šç§¯æä¸»åŠ¨ ä¹ æƒ¯äºŒï¼šä»¥ç»ˆä¸ºå§‹ ä¹ æƒ¯ä¸‰ï¼šè¦äº‹ç¬¬ä¸€","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ ç¬¬ä¸‰éƒ¨åˆ† ä¹ æƒ¯äº” çŸ¥å½¼è§£å·±â€”â€”ç§»æƒ…æ²Ÿé€šçš„åŸåˆ™","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-7/","text":"ä½ çœŸçš„å¬æ‡‚äº†å—å¦‚æœä½ è¦å’Œæˆ‘äº¤å¾€ï¼Œæƒ³å¯¹æˆ‘æœ‰å½±å“åŠ›ï¼Œä½ é¦–å…ˆè¦äº†è§£æˆ‘ï¼Œè€Œåšåˆ°è¿™ä¸€ç‚¹ä¸èƒ½åªé æŠ€å·§ã€‚å¦‚æœæˆ‘è§‰å¯Ÿåˆ°ä½ åœ¨ä½¿ç”¨æŸç§æŠ€å·§ï¼Œå°±ä¼šæœ‰å—éª—å’Œè¢«æ“çºµçš„æ„Ÿè§‰ã€‚æˆ‘ä¸çŸ¥é“ä½ ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œæœ‰ä»€ä¹ˆåŠ¨æœºã€‚ ä½ çš„å½±å“åŠ›åœ¨äºä½ çš„æ¦œæ ·ä½œç”¨å’Œå¼•å¯¼èƒ½åŠ›ï¼Œå‰è€…æºäºä½ çš„å“å¾·ï¼Œæ˜¯ä½ çš„çœŸæˆ‘ï¼Œåˆ«äººçš„è¯„è®ºæˆ–è€…ä½ å¸Œæœ›åˆ«äººå¦‚ä½•çœ‹ä½ éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œæˆ‘åœ¨åŒä½ çš„äº¤å¾€ä¸­å·²ç»æ¸…æ¥šäº†è§£äº†ä½ ã€‚ ä½ çš„å“å¾·æ—¶åˆ»å‘æŒ¥ç€å½±å“åŠ›ï¼Œå¹¶èµ·ç€æ²Ÿé€šçš„ä½œç”¨ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œæˆ‘å°±ä¼šæœ¬èƒ½åœ°ä¿¡ä»»æˆ–è€…ä¸ä¿¡ä»»ä½ è¿™ä¸ªäººä»¥åŠä½ å¯¹æˆ‘æ‰€åšçš„äº‹æƒ…ã€‚ ç§»æƒ…è†å¬â€œçŸ¥å½¼â€æ˜¯äº¤å¾€æ¨¡å¼çš„ä¸€å¤§è½¬å˜ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸æŠŠè®©åˆ«äººç†è§£è‡ªå·±æ”¾åœ¨é¦–ä½ã€‚å¤§éƒ¨åˆ†äººåœ¨è†å¬æ—¶å¹¶ä¸æ˜¯æƒ³ç†è§£å¯¹æ–¹ï¼Œè€Œæ˜¯ä¸ºäº†åšå‡ºå›åº”ã€‚è¿™ç§äººè¦ä¹ˆè¯´è¯ï¼Œè¦ä¹ˆå‡†å¤‡è¯´è¯ï¼Œä¸æ–­åœ°ç”¨è‡ªå·±çš„æ¨¡å¼è¿‡æ»¤ä¸€åˆ‡ï¼Œç”¨è‡ªå·±çš„ç»å†ç†è§£åˆ«äººçš„ç”Ÿæ´»ã€‚ äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯è¿™ä¹ˆè‡ªä»¥ä¸ºæ˜¯ã€‚æˆ‘ä»¬çš„è†å¬é€šå¸¸æœ‰å±‚æ¬¡ä¹‹åˆ†ã€‚ä¸€æ˜¯å……è€³ä¸é—»ï¼Œå‹æ ¹å°±ä¸å¬åˆ«äººè¯´è¯ï¼›äºŒæ˜¯è£…æ¨¡ä½œæ ·ï¼Œâ€œæ˜¯çš„ï¼å—¯ï¼æ²¡é”™ï¼â€ä¸‰æ˜¯é€‰æ‹©æ¥å—ï¼Œåªå¬ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸å­¦é¾„å‰å„¿ç«¥å–‹å–‹ä¸ä¼‘ä¼šè®©æˆ‘ä»¬é‡‡å–è¿™ç§æ–¹å¼ï¼›å››æ˜¯èšç²¾ä¼šç¥ï¼ŒåŠªåŠ›å¬åˆ°æ¯ä¸€ä¸ªå­—ï¼Œä½†æ˜¯ï¼Œå¾ˆå°‘æœ‰äººä¼šè¾¾åˆ°ç¬¬äº”ä¸ªå±‚æ¬¡ï¼Œå³æœ€é«˜å±‚æ¬¡â€”â€”ç§»æƒ…è†å¬ã€‚ ç§»æƒ…è†å¬æ˜¯æŒ‡ä»¥ç†è§£ä¸ºç›®çš„çš„è†å¬ï¼Œè¦æ±‚å¬è€…ç«™åœ¨è¯´è¯è€…çš„è§’åº¦ç†è§£ä»–ä»¬çš„æ€ç»´æ¨¡å¼å’Œæ„Ÿå—ã€‚ ç§»æƒ…ï¼ˆEmpathyï¼‰ä¸æ˜¯åŒæƒ…ï¼ˆSympathyï¼‰ã€‚åè€…æ˜¯ä¸€ç§è®¤åŒå’Œåˆ¤æ–­å½¢å¼ï¼Œæ›´é€‚åˆç”¨æ¥è¡¨è¾¾æ„Ÿæƒ…å’Œåšå‡ºå›åº”ï¼Œå´å®¹æ˜“å…»æˆå¯¹æ–¹çš„ä¾èµ–æ€§ã€‚ç§»æƒ…è†å¬çš„æœ¬è´¨ä¸æ˜¯ä½ è¦èµåŒå¯¹æ–¹ï¼Œè€Œæ˜¯è¦åœ¨æƒ…æ„Ÿå’Œç†æ™ºä¸Šå……åˆ†è€Œæ·±å…¥åœ°ç†è§£å¯¹æ–¹ã€‚ æ®ä¸“å®¶ä¼°è®¡ï¼Œäººé™…æ²Ÿé€šä»…æœ‰10%é€šè¿‡è¯­è¨€æ¥è¿›è¡Œï¼Œ30%å–å†³äºè¯­è°ƒä¸å£°éŸ³ï¼Œå…¶ä½™60%åˆ™å¾—é è‚¢ä½“è¯­è¨€ã€‚æ‰€ä»¥åœ¨ç§»æƒ…è†å¬çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä»…è¦è€³åˆ°ï¼Œè¿˜è¦çœ¼åˆ°ã€å¿ƒåˆ°ï¼›ç”¨çœ¼ç›å»è§‚å¯Ÿï¼Œç”¨å¿ƒçµå»ä½“ä¼šã€‚ å¿ƒç†ç©ºæ°”é™¤äº†ç‰©è´¨ï¼Œäººç±»æœ€å¤§çš„ç”Ÿå­˜éœ€æ±‚æºè‡ªå¿ƒç†ï¼Œå³è¢«äººç†è§£ã€è‚¯å®šã€è®¤å¯å’Œæ¬£èµã€‚ ç§»æƒ…è†å¬æ˜¯æœ‰é£é™©çš„ã€‚åªæœ‰å½“ä½ åšå¥½äº†è¢«å¯¹æ–¹å½±å“çš„å‡†å¤‡ï¼Œæ‰èƒ½æ·±å…¥åˆ°ç§»æƒ…è†å¬çš„é˜¶æ®µï¼Œè€Œè¿™æ˜¯éœ€è¦è¶³å¤Ÿçš„å®‰å…¨æ„Ÿçš„ï¼Œå› ä¸ºè¿™æ—¶å€™çš„ä½ ä¼šå˜å¾—å¾ˆè„†å¼±ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œè¿™å¾ˆçŸ›ç›¾ï¼Œå› ä¸ºåœ¨å½±å“å¯¹æ–¹ä¹‹å‰ï¼Œä½ å¿…é¡»å…ˆè¢«å½±å“ï¼Œå³çœŸæ­£ç†è§£å¯¹æ–¹ã€‚ å…ˆè¯Šæ–­åå¼€æ–¹å¹³åº¸çš„ä¸šåŠ¡å‘˜æ¨é”€äº§å“ï¼Œæ°å‡ºçš„ä¸šåŠ¡å‘˜é”€å”®è§£å†³é—®é¢˜ã€æ»¡è¶³éœ€æ±‚ä¹‹é“ã€‚ä¸‡ä¸€äº§å“ä¸ç¬¦åˆå®¢æˆ·éœ€è¦ï¼Œä¹Ÿè¦å‹‡äºæ‰¿è®¤ã€‚ å››ç§è‡ªä¼ å¼å›åº”æˆ‘ä»¬åœ¨å¬åˆ«äººè®²è¯æ—¶æ€»æ˜¯ä¼šè”ç³»æˆ‘ä»¬è‡ªå·±çš„ç»ç†ï¼Œå› æ­¤è‡ªä»¥ä¸ºæ˜¯çš„äººå¾€å¾€ä¼šæœ‰å››ç§â€œè‡ªä¼ å¼å›åº”â€ï¼ˆAutobiographical Responseï¼‰çš„å€¾å‘ï¼š ä»·å€¼åˆ¤æ–­â€”â€”å¯¹æ—äººçš„æ„è§åªæœ‰æ¥å—æˆ–ä¸æ¥å—ã€‚ è¿½æ ¹ç©¶åº•â€”â€”ä¾è‡ªå·±çš„ä»·å€¼è§‚æ¢æŸ¥åˆ«äººçš„éšç§ã€‚ å¥½ä¸ºäººå¸ˆâ€”â€”ä»¥è‡ªå·±çš„ç»éªŒæä¾›å¿ å‘Šã€‚ è‡ªä»¥ä¸ºæ˜¯â€”â€”æ ¹æ®è‡ªå·±çš„è¡Œä¸ºä¸åŠ¨æœºè¡¡é‡åˆ«äººçš„è¡Œä¸ºä¸åŠ¨æœºã€‚ è¡¨è¾¾ä¹Ÿè¦è®²æŠ€å·§å¤å¸Œè…Šäººæœ‰ä¸€ç§å¾ˆç»å…¸çš„å“²å­¦è§‚ç‚¹ï¼Œå³å“å¾·ç¬¬ä¸€ï¼Œæ„Ÿæƒ…ç¬¬äºŒï¼Œç†æ€§ç¬¬ä¸‰ã€‚æˆ‘è®¤ä¸ºè¿™ä¸‰ä¸ªè¯é›†ä¸­ä½“ç°äº†è®©ä»–äººç†è§£è‡ªå·±ä»¥åŠæœ‰æ•ˆè¡¨è¾¾è‡ªå·±çš„ç²¾é«“ã€‚ å“å¾·æŒ‡çš„æ˜¯ä½ ä¸ªäººçš„å¯ä¿¡åº¦ï¼Œæ˜¯äººä»¬å¯¹ä½ çš„è¯šä¿¡å’Œèƒ½åŠ›çš„è®¤å¯ï¼Œæ˜¯äººä»¬å¯¹ä½ çš„ä¿¡ä»»ï¼Œæ˜¯ä½ çš„æƒ…æ„Ÿè´¦æˆ·ã€‚æ„Ÿæƒ…æŒ‡çš„æ˜¯ä½ çš„ç§»æƒ…èƒ½åŠ›ï¼Œæ˜¯æ„Ÿæ€§çš„ï¼Œè¯´æ˜ä½ èƒ½é€šè¿‡äº¤æµè¿…é€Ÿç†è§£ä»–äººçš„æƒ…æ„Ÿã€‚ç†æ€§æ˜¯ä½ çš„é€»è¾‘èƒ½åŠ›ï¼Œå³åˆç†è¡¨è¾¾è‡ªå·±çš„èƒ½åŠ›ã€‚ ä¸€å¯¹ä¸€æ²Ÿé€šä½ ç°åœ¨å°±å¯ä»¥ç»ƒä¹ ä¹ æƒ¯äº”ã€‚ä¸‹æ¬¡åŒåˆ«äººäº¤æµçš„æ—¶å€™ï¼Œä½ å¯ä»¥è¯•ç€æŠ›å¼€è‡ªå·±çš„ç»éªŒï¼Œå°½åŠ›çœŸæ­£äº†è§£å¯¹æ–¹ã€‚ä½ åº”è¯¥ç¿æ™ºã€æ•æ„Ÿè€Œåˆå¤´è„‘æ¸…æ¥šã€‚ä¸è®ºåœ¨åŠå…¬å®¤æˆ–è€…å®¶ä¸­ï¼Œæ•å¼€èƒ¸æ€€ï¼Œå‡ç¥å€¾å¬ã€‚ä¸è¦æ€¥åŠŸè¿‘åˆ©ï¼Œå³ä½¿çŸ­æœŸå†…æœªè·å›é¦ˆä¹Ÿç»ä¸æ°”é¦ã€‚ å¦‚æœä½ çœŸæ­£çˆ±ä¸€ä¸ªäººï¼Œé‚£ä¹ˆèŠ±æ—¶é—´äº†è§£å¯¹æ–¹å°†æœ‰ç›Šäºä»Šåçš„å¦è¯šç›¸å¾…ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¾ˆå¤šå›°æ‰°å®¶åº­å’Œå©šå§»çš„é—®é¢˜éƒ½å°†è¢«æ‰¼æ€åœ¨èŒèŠ½çŠ¶æ€ï¼Œæ²¡æœ‰å‘å±•å£®å¤§çš„æœºä¼šï¼Œå³ä¾¿æœ‰è¿™æ ·çš„æœºä¼šï¼Œå……è¶³çš„æƒ…æ„Ÿè´¦æˆ·å‚¨è“„ä¹Ÿä¼šè®©é—®é¢˜è¿åˆƒè€Œè§£ã€‚ å…ˆç†è§£åˆ«äººã€‚åœ¨é—®é¢˜å‡ºç°ä¹‹å‰ï¼Œåœ¨è¯„ä¼°å’Œåˆ¤æ–­ä¹‹å‰ï¼Œåœ¨ä½ è¡¨è¾¾ä¸ªäººè§‚ç‚¹ä¹‹å‰ï¼Œå…ˆç†è§£åˆ«äººï¼Œè¿™æ˜¯æœ‰æ•ˆçš„ç›¸äº’ä¾èµ–å…³ç³»ä¸­æœ€æœ‰ç”¨çš„ä¹ æƒ¯ã€‚ ä»˜è¯¸è¡ŒåŠ¨ é€‰æ‹©ä¸€ä¸ªæƒ…æ„Ÿè´¦æˆ·å‡ºç°èµ¤å­—çš„äººé™…å…³ç³»ï¼Œè¯•ç€ä»å¯¹æ–¹çš„è§’åº¦ç†è§£å¹¶è®°ä¸‹ä»–çš„å¤„å¢ƒã€‚ä¸‹ä¸€æ¬¡è§é¢æ—¶ï¼Œé€šè¿‡è†å¬æ¥ç†è§£å¯¹æ–¹ï¼Œå°†ç°åœ¨å¬åˆ°çš„å’Œä»¥å‰è®°ä¸‹çš„åšä¸€ä¸ªæ¯”è¾ƒã€‚çœ‹çœ‹ä½ çš„æƒ³æ³•æ˜¯å¦å‡†ç¡®ï¼Ÿâ€”â€”ä½ çœŸçš„ç†è§£å¯¹æ–¹çš„ç«‹åœºå’Œè§‚ç‚¹ä¹ˆï¼Ÿ ä¸ä¸€ä¸ªäº²è¿‘çš„äººåˆ†äº«ç§»æƒ…è¿™ä¸ªæ¦‚å¿µï¼Œå‘Šè¯‰ä»–ä½ æƒ³è¦åšåˆ°çœŸæ­£çš„ç§»æƒ…è†å¬ï¼Œå¹¶è®©ä»–åœ¨ä¸€ä¸ªæ˜ŸæœŸä¹‹åæä¾›åé¦ˆæ„è§ã€‚â€”â€”ä½ åšçš„æ€ä¹ˆæ ·ï¼Ÿé‚£ä¸ªäººæœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Ÿ ä¸‹æ¬¡æœ‰æœºä¼šæ—è§‚ä»–äººäº¤æµçš„æ—¶å€™ï¼Œæ‚ä½è‡ªå·±çš„è€³æœµï¼Œåªç”¨çœ¼ç›è§‚å¯Ÿã€‚å“ªäº›æƒ…æ„Ÿä¸æ˜¯ç”¨è¯­è¨€è¡¨è¾¾å‡ºæ¥çš„ï¼Ÿ ä¸‹æ¬¡å‘ç°ä½ è¡¨ç°å‡ºä¸æ°å½“çš„è‡ªä¼ å¼å›åº”çš„æ—¶å€™ï¼Œç«‹å³æ‰¿è®¤é”™è¯¯ï¼Œå°½åŠ›æ‰­è½¬å±€é¢ï¼Œå°†æƒ…æ„Ÿè´¦æˆ·çš„æ”¯å‡ºå˜æˆå­˜å…¥ã€‚ï¼ˆâ€œå¯¹ä¸èµ·ï¼Œæˆ‘åˆšæ‰å¹¶ä¸æ˜¯çœŸçš„åŠªåŠ›å»ç†è§£ä½ ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¥ä¸€æ¬¡å—ï¼Ÿâ€ï¼‰ ä¸‹æ¬¡è¡¨è¾¾è‡ªå·±è§‚ç‚¹çš„æ—¶å€™ï¼Œé¦–å…ˆåšåˆ°ç§»æƒ…ã€‚è¦èƒ½å¤Ÿå’Œå¯¹æ–¹çš„åŒä¼´ä¸€æ ·ï¼ˆç”šè‡³æ›´å¥½åœ°ï¼‰æè¿°å¯¹æ–¹çš„è§‚ç‚¹ï¼Œç„¶åç«™åœ¨å¯¹æ–¹çš„ç«‹åœºä¸Šï¼Œäº‰å–è®©è‡ªå·±çš„è§‚ç‚¹å¾—åˆ°ç†è§£ã€‚","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬äºŒéƒ¨åˆ† ä¹ æƒ¯ä¸‰ è¦äº‹ç¬¬ä¸€","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-4/","text":"å›ç­”ä¸¤ä¸ªé—®é¢˜ åœ¨ä½ ç›®å‰çš„ç”Ÿæ´»ä¸­ï¼Œæœ‰å“ªäº›äº‹æƒ…èƒ½å¤Ÿå½»åº•æ”¹è§‚ä½ çš„ä¸ªäººç”Ÿæ´»ï¼Œä½†æ˜¯ä½ ä¸€ç›´æ²¡æœ‰å»åšï¼Ÿ åœ¨ä½ ç›®å‰çš„ç”Ÿæ´»ä¸­ï¼Œæœ‰å“ªäº›äº‹æƒ…èƒ½å¤Ÿå½»åº•æ”¹è§‚ä½ çš„å·¥ä½œå±€é¢ï¼Œä½†æ˜¯ä½ ä¸€ç›´æ²¡æœ‰å»åšï¼Ÿ ä¹ æƒ¯ä¸‰æ˜¯ä¹ æƒ¯ä¸€ã€äºŒçš„å…·ä½“å®è·µã€‚ä¹ æƒ¯ä¸€å‘Šè¯‰ä½ ï¼Œä½ æ˜¯åˆ›é€ è€…ï¼Œä½ æŒæ§è‡ªå·±çš„äººç”Ÿï¼Œå…¶åŸºç¡€æ˜¯äººç±»ç‰¹æœ‰çš„å››å¤§å¤©èµ‹ï¼šæƒ³è±¡åŠ›ã€è‰¯çŸ¥ã€ç‹¬ç«‹æ„å¿—ã€è‡ªæˆ‘æ„è¯†ã€‚ ä¹ æƒ¯äºŒæ˜¯å…³äºç¬¬ä¸€æ¬¡çš„åˆ›é€ æˆ–è€…æ™ºåŠ›ä¸Šçš„åˆ›é€ çš„ä¹ æƒ¯ï¼Œå…¶åŸåˆ™åŸºç¡€æ˜¯æƒ³è±¡åŠ›å’Œè‰¯çŸ¥è¿™ä¸¤å¤§å¤©èµ‹ã€‚ ä¹ æƒ¯ä¸‰æ˜¯å…³äºç¬¬äºŒæ¬¡çš„åˆ›é€ æˆ–è€…ä½“åŠ›ä¸Šçš„åˆ›é€ çš„ä¹ æƒ¯ï¼Œæ˜¯å¯¹å‰é¢ä¸¤ä¸ªä¹ æƒ¯çš„å®æ–½ã€æ‰§è¡Œå’Œè‡ªç„¶è¡¨ç°ã€‚ å·¦è„‘è¿›è¡Œç®¡ç†ï¼Œå³è„‘è¿›è¡Œé¢†å¯¼ã€‚ æœ‰æ•ˆçš„ç®¡ç†æŒ‡çš„å°±æ˜¯è¦äº‹ç¬¬ä¸€ï¼Œå…ˆåšæœ€é‡è¦çš„äº‹æƒ…ã€‚é¢†å¯¼è€…é¦–å…ˆè¦å†³å®šçš„ï¼Œå°±æ˜¯å“ªäº›äº‹æƒ…æ˜¯é‡è¦çš„ï¼›è€Œä½œä¸ºç®¡ç†è€…ï¼Œå°±æ˜¯è¦å°†è¿™äº›é‡è¦çš„äº‹åŠ¡ä¼˜å…ˆå®‰æ’ã€‚è‡ªæˆ‘ç®¡ç†çš„å®è´¨å°±æ˜¯è‡ªå¾‹å’Œæ¡ç†ï¼Œæ˜¯å¯¹è®¡åˆ’çš„å®æ–½ã€‚ ã€ŠæˆåŠŸçš„æ™®éå…±æ€§ã€‹ä¸€æ–‡çš„ä½œè€…æ ¼é›·ï¼ˆE.M.Grayï¼‰è¯´ï¼šâ€œæˆåŠŸè€…èƒ½ä¸ºå¤±è´¥è€…æ‰€ä¸èƒ½ä¸ºï¼Œçºµä½¿å¹¶éå¿ƒç”˜æƒ…æ„¿ï¼Œä½†ä¸ºäº†ç†æƒ³ä¸ç›®æ ‡ï¼Œä»å¯ä»¥å‡­æ¯…åŠ›å…‹æœå¿ƒç†éšœç¢ã€‚â€ å››ä»£æ—¶é—´ç®¡ç†ç†è®ºçš„æ¼”è¿›å¦‚ä½•åˆ†è¾¨è½»é‡ç¼“æ€¥ä¸åŸ¹å…»ç»„ç»‡èƒ½åŠ›ï¼Œæ˜¯æ—¶é—´ç®¡ç†çš„ç²¾é«“ã€‚ ç¬¬ä¸€ä»£ç†è®ºç€é‡åˆ©ç”¨ä¾¿æ¡ä¸å¤‡å¿˜å½•ï¼Œåœ¨å¿™ç¢Œä¸­è°ƒé…æ—¶é—´ä¸ç²¾åŠ› ç¬¬äºŒä»£ç†è®ºå¼ºè°ƒè¡Œäº‹å†ä¸æ—¥ç¨‹è¡¨ï¼Œåæ˜ å‡ºæ—¶é—´ç®¡ç†å·²ç»æ³¨æ„åˆ°è§„åˆ’æœªæ¥çš„é‡è¦ã€‚ ç¬¬ä¸‰ä»£æ˜¯è®²æ±‚ä¼˜å…ˆé¡ºåºçš„æ¦‚å¿µï¼Œä¾æ®è½»é‡ç¼“æ€¥è®¾å®šçŸ­ä¸­é•¿æœŸç›®æ ‡ã€‚ ç¬¬å››ä»£ç†è®ºä»æ ¹æœ¬å¦å®šâ€œæ—¶é—´ç®¡ç†â€ï¼Œä¸»å¼ å…³é”®åœ¨äºâ€œä¸ªäººç®¡ç†â€ï¼Œé‡å¿ƒåº”å½“æ”¾åœ¨ç»´æŒäº§å‡ºä¸äº§èƒ½å¹³è¡¡ä¸Šã€‚ åˆ«è®©çåŠ¡ç‰µç€é¼»å­èµ°ç¬¬å››ä»£æ—¶é—´ç®¡ç†ç†è®ºä»é‡è¦æ€§å’Œç´§æ€¥ç¨‹åº¦ä¸¤ä¸ªç»´åº¦å¯¹äº‹åŠ¡è¿›è¡Œåˆ’åˆ†ã€‚é‡è¦æ€§ä¸ç›®æ ‡æœ‰å…³ï¼Œå‡¡æœ‰ä»·å€¼ã€æœ‰åˆ©äºå®ç°ä¸ªäººç›®æ ‡çš„å°±æ˜¯è¦äº‹ã€‚ç´§æ€¥ç¨‹åº¦ä¸æ—¶é—´ç´§è¿«æ€§æœ‰å…³ï¼Œç´§è¿«ä¹‹äº‹é€šå¸¸éƒ½æ˜¾è€Œæ˜“è§ï¼Œæ¨è¯¿ä¸å¾—ã€‚ ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œé‡è¦ä¸”ç´§æ€¥åœ¨çŸ©é˜µä¸­ï¼Œç¬¬ä¸€ç±»äº‹åŠ¡é€šå¸¸æ—¢ç´§è¿«åˆé‡è¦ï¼Œéœ€è¦ç«‹å³å¤„ç†ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œå±æœºâ€æˆ–è€…â€œé—®é¢˜â€ã€‚å¦‚æœä½ è¿‡åˆ†æ³¨é‡ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œå®ƒä»¬çš„èŒƒå›´ä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œæœ€ç»ˆå æ®ä½ å…¨éƒ¨çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ å¤§éƒ¨åˆ†æ—¶é—´ç²¾åŠ›éƒ½ç”¨äºå¤„ç†å±æœºçš„äººï¼ˆç¬¬ä¸€ç±»äº‹åŠ¡ï¼‰ å‹åŠ›å¤§ ç²¾ç–²åŠ›å°½ è¢«å±æœºç‰µç€é¼»å­èµ° å¿™äºæ”¶æ‹¾æ®‹å±€ ç¬¬ä¸‰ç±»äº‹åŠ¡ï¼Œç´§æ€¥ä¸é‡è¦è¿™äº›äººå°†æ—¶é—´è‡´åŠ›äºç´§æ€¥ä¸é‡è¦çš„ç¬¬ä¸‰ç±»äº‹åŠ¡ï¼Œå´è‡ªä»¥ä¸ºåœ¨å¤„ç†ç¬¬ä¸€ç±»äº‹åŠ¡ã€‚æ®Šä¸çŸ¥ç´§è¿«ä¹‹äº‹å¾€å¾€æ˜¯åˆ«äººçš„ä¼˜å…ˆï¼Œå¯¹åˆ«äººå¾ˆé‡è¦ï¼Œå¯¹è‡ªå·±å´ä¸ç„¶ã€‚ æ€¥åŠŸè¿‘åˆ© è¢«å±æœºç‰µç€é¼»å­èµ° è¢«è§†ä¸ºå·§è¨€ä»¤è‰² è½»è§†ç›®æ ‡å’Œè®¡åˆ’ è®¤ä¸ºè‡ªå·±æ˜¯å—å®³è€…ï¼Œç¼ºä¹è‡ªåˆ¶åŠ› äººé™…å…³ç³»è‚¤æµ…ï¼Œç”šè‡³ç ´è£‚ ç¬¬å››ç±»äº‹åŠ¡ï¼Œæ—¢ä¸é‡è¦ä¹Ÿä¸ç´§æ€¥æœ‰äº›ä¸è´Ÿè´£ä»»çš„äººï¼Œå°†æ—¶é—´éƒ½èŠ±åœ¨ç¬¬ä¸‰å’Œç¬¬å››ç±»äº‹åŠ¡ä¸Š å®Œå…¨ä¸è´Ÿè´£ä»» è¢«ç‚’é±¿é±¼ åŸºæœ¬ç”Ÿæ´»éƒ½éœ€è¦ä¾èµ–ä»–äººæˆ–ç¤¾ä¼šæœºæ„ ç¬¬äºŒç±»äº‹åŠ¡ï¼Œé‡è¦ä¸ç´§æ€¥åŒ…æ‹¬å»ºç«‹äººé™…å…³ç³»ã€æ’°å†™ä½¿å‘½å®£è¨€ã€è§„åˆ’é•¿æœŸç›®æ ‡ã€é˜²æ‚£äºæœªç„¶ç­‰ç­‰ã€‚é«˜æ•ˆèƒ½äººå£«é¿å…é™·å…¥ç¬¬ä¸‰å’Œç¬¬å››ç±»äº‹åŠ¡ï¼Œé€šè¿‡èŠ±è´¹æ›´å¤šæ—¶é—´åœ¨ç¬¬äºŒç±»äº‹åŠ¡æ¥å‡å°‘ç¬¬ä¸€ç±»äº‹åŠ¡çš„æ•°é‡ã€‚ æ„¿æ™¯ï¼Œè¿œè§ å¹³è¡¡ è‡ªå¾‹ è‡ªåˆ¶ å¾ˆå°‘å‘ç”Ÿå±æœº å‹‡æ•¢è¯´â€œä¸â€è‹¥è¦é›†ä¸­ç²¾åŠ›äºå½“æ€¥çš„è¦åŠ¡ï¼Œå°±å¾—æ’é™¤æ¬¡è¦äº‹åŠ¡çš„ç‰µç»Šï¼Œæ­¤æ—¶éœ€è¦æœ‰è¯´â€œä¸â€çš„å‹‡æ°”ã€‚ æˆ‘æ›¾è˜ç”¨ä¸€ä½ææœ‰æ‰ååˆç‹¬ç«‹è‡ªä¸»çš„ä¸“å‘˜ï¼Œæœ‰ä¸€å¤©æœ‰ä»¶æ€¥äº‹æƒ³æ‹œæ‰˜ä»–ã€‚ä»–è¯´ï¼šâ€œä½ è¦æˆ‘åšä»€ä¹ˆéƒ½å¯ä»¥ï¼Œä¸è¿‡è¯·å…ˆäº†è§£ç›®å‰çš„çŠ¶å†µã€‚â€ä»–æŒ‡ç€å¢™å£ä¸Šçš„å·¥ä½œè®¡åˆ’è¡¨ï¼Œæ˜¾ç¤ºè¶…è¿‡ 20 ä¸ªè®¡åˆ’æ­£åœ¨è¿›è¡Œï¼Œè¿™æ˜¯æˆ‘ä¿©æ—©å·²è°ˆå¦¥çš„ã€‚ç„¶åä»–è¯´ï¼šâ€œè¿™ä»¶æ€¥äº‹è‡³å°‘å å»å‡ å¤©æ—¶é—´ï¼Œä½ å¸Œæœ›æˆ‘æ”¾ä¸‹æˆ–å–æ¶ˆå“ªä¸ªè®¡åˆ’æ¥ç©ºå‡ºæ—¶é—´ï¼Ÿâ€ å¾ˆå¤šäººå¦é™ˆè‡ªå·±â€œç¼ºä¹è‡ªåˆ¶åŠ›â€ï¼Œå®é™…ä¸Šï¼Œè¿™æ˜¯â€œç¡®è®¤ç›®æ ‡â€çš„åŠŸå¤«è¿˜ä¸åˆ°å®¶ï¼Œè€Œä¸”ä¸èƒ½ç”±è¡·æ¥æ”¶â€œäº‹æœ‰è½»é‡ç¼“æ€¥â€çš„è§‚å¿µï¼Œè‡ªç„¶å®¹æ˜“åŠé€”è€ŒåºŸã€‚ é›†å¤§æˆçš„æ—¶é—´ç®¡ç†ç†è®ºç¬¬ä¸€ä»£çš„æ—¶é—´ç®¡ç†ç†è®ºä¸æ¯«æ²¡æœ‰â€œä¼˜å…ˆâ€çš„æ¦‚å¿µã€‚å›ºç„¶åšå®Œå¤‡å¿˜å½•ä¸Šçš„ä¸€ä»¶äº‹ï¼Œä¼šå¸¦ç»™äººæˆå°±æ„Ÿï¼Œå¯æ˜¯è¿™ç§æˆå°±ä¸ä¸€å®šç¬¦åˆäººç”Ÿå¤§ç›®æ ‡ã€‚å› æ­¤ï¼Œæ‰€å®Œæˆçš„åªæ˜¯å¿…è¦è€Œéé‡è¦çš„äº‹ã€‚ ç„¶è€Œå¥½æ­¤é“è€…ä¸åœ¨å°‘æ•°ï¼Œå› ä¸ºé˜»åŠ›æœ€å°ï¼Œç—›è‹¦ä¸å‹åŠ›ä¹Ÿæœ€å°‘ã€‚ æ›´ä½•å†µï¼Œæ ¹æ®å¤–åœ¨è¦æ±‚ä¸è§„å¾‹è¡Œäº‹ï¼Œå®¹æ˜“æ¨å¸è´£ä»»ã€‚è¿™ç±»äººç¼ºä¹æ•ˆç‡ï¼Œç¼ºä¹è‡ªåˆ¶åŠ›ä¸è‡ªå°Šã€‚ ç¬¬å››ä»£ç†è®ºå¼ºè°ƒä»¥åŸåˆ™ä¸ºé‡å¿ƒï¼Œé…åˆä¸ªäººå¯¹ä½¿å‘½çš„è®¤çŸ¥ï¼Œå…¼é¡¾é‡è¦æ€§ä¸æ€¥è¿«æ€§ï¼›å¼ºè°ƒäº§å‡ºä¸äº§èƒ½é½å¤´å¹¶è¿›ï¼Œç€é‡ç¬¬äºŒç±»äº‹åŠ¡çš„å®Œæˆã€‚ ç®¡ç†æ–¹æ³•å…­æ ‡å‡† å’Œè°ä¸€è‡´ã€‚ å¹³è¡¡åŠŸèƒ½ã€‚ å›´ç»•ä¸­å¿ƒç†æƒ³çš„ç®¡ç†æ–¹æ³•ã€‚ ä»¥äººä¸ºæœ¬ã€‚ çµæ´»å˜é€šã€‚ ä¾¿äºæºå¸¦çš„ç®¡ç†å·¥å…·ã€‚ ä¸ªäººç®¡ç†å››æ­¥éª¤ç¬¬ä¸€æ­¥ ç¡®è®¤è§’è‰²å†™å‡ºä½ è‡ªå·±çš„å…³é”®è§’è‰²ï¼Œåœ¨å®¶åº­ä¸­ã€å·¥ä½œä¸­ä¹ƒè‡³æ•™ä¼šå’Œç¤¾åŒºäº‹åŠ¡ä¸­çš„è§’è‰²ã€‚åˆ—ä¸¾è‡ªå·±æƒ³è¦æŒç»­æŠ•å…¥æ—¶é—´å’Œç²¾åŠ›å»åšçš„ä¸€äº›äº‹æƒ…ã€‚ ç¬¬äºŒæ­¥ é€‰å®šå‘¨ç›®æ ‡æ€è€ƒä¸‹ä¸€ä¸ªå‘¨è®¡åˆ’ä¸­æ¯ä¸€ä¸ªä»»åŠ¡æ ä¸‹ä½ æœ€æƒ³åšçš„ä¸€ä¸¤ä»¶è¦äº‹ï¼Œä½œä¸ºä½ é€‰å®šçš„ç›®æ ‡ã€‚è¿™äº›ç›®æ ‡ä¸­ä¸€å®šè¦æœ‰å‡ ä¸ªç¬¬äºŒç±»äº‹åŠ¡ï¼Œæ ¹æ®è‡ªå·±çš„æ„Ÿè§‰åˆ¤æ–­æ¯ä¸ªè§’è‰²ä¸­å“ªäº›äº‹æƒ…æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œå¹¶ä¸ºæ¯ä¸ªè§’è‰²ç¡®ç«‹ä¸€ä¸ªæˆ–ä¸¤ä¸ªç›®æ ‡ã€‚ ç¬¬ä¸‰æ­¥ å®‰æ’è¿›åº¦ä¸ºæ¯ä¸€é¡¹ç›®æ ‡å®‰æ’å…·ä½“çš„å®æ–½æ—¶é—´ã€‚æœ‰äº›ç›®æ ‡éœ€è¦åœ¨å·¥ä½œæ—¥å®Œæˆï¼Œæœ‰äº›ç›®æ ‡éœ€è¦åœ¨å‘¨æœ«å®Œæˆã€‚ç¡®ä¿è‡ªå·±æœ‰å……åˆ†çš„è‡ªç”±å’Œçµæ´»æ€§ä»¥åº”ä»˜çªå‘äº‹ä»¶ï¼Œè®©ä½ äº«å—åˆ°è‡ªå‘çš„ä¹è¶£ã€‚ä½ ä¼šæ„Ÿè§‰å¾ˆè¸å®ï¼Œå› ä¸ºä½ çŸ¥é“è‡ªå·±å·²ç»å®‰æ’å¥½äº†ä¸€å‘¨çš„è¦åŠ¡ï¼Œç…§é¡¾åˆ°äº†å·¥ä½œç”Ÿæ´»ä¸­çš„æ¯ä¸€ä¸ªé‡è¦é¢†åŸŸã€‚ ç¬¬å››éƒ¨ æ¯æ—¥è°ƒæ•´æ ¹æ®çªå‘äº‹ä»¶ã€äººé™…å…³ç³»çš„æ„å¤–å‘å±•åŠå´­æ–°æœºä¼šå¯¹æ¯å¤©çš„è¦åŠ¡å®‰æ’è¿›è¡Œé€‚å½“è°ƒæ•´ã€‚ åœ¨æ¯å¤©æ—©æ™¨å®¡è§†è‡ªå·±ä¸€å¤©çš„æ—¥ç¨‹å®‰æ’ã€‚ ä»˜è¯¸å®è·µè¯šå¿ƒæ­£æ„ï¼Œå¯¹äººä¸å¯è®²æ•ˆç‡ï¼Œæ•ˆç‡æ˜¯å¯¹äº‹è€Œè¨€çš„ï¼Œå¯¹äººåº”å½“è®²æ•ˆç”¨ã€‚ç¬¬å››ä»£ä¸ªäººç®¡ç†ç†è®ºçš„ç‰¹ç‚¹åœ¨äºæ‰¿è®¤äººæ¯”äº‹æ›´é‡è¦ã€‚ ç¬¬å››ä»£æ—¶é—´ç®¡ç†æ–¹æ³•çš„ä¼˜ç‚¹ç¬¬å››ä»£æ—¶é—´ç®¡ç†æ–¹æ³•æ¯”å‰ä¸‰ä»£æ›´åŠ å…ˆè¿›ï¼Œè¿™ç§å…ˆè¿›ä½“ç°åœ¨äº”ä¸ªæ–¹é¢ ä»¥åŸåˆ™ä¸ºåŸºç¡€ï¼Œåˆ‡å®åœ°åˆ›é€ å‡ºä¸€ä¸ªæ ¸å¿ƒæ¨¡å¼ï¼Œè®©ä½ èƒ½å¤Ÿåœ¨ä¸€ä¸ªæ›´å¤§çš„èŒƒå›´å†…åˆ†é…è‡ªå·±çš„æ—¶é—´ï¼Œçœ‹æ¸…æ¥šä»€ä¹ˆæ˜¯çœŸæ­£é‡è¦å’Œæœ‰æ•ˆçš„ã€‚ æ¥å—ä½ å†…å¿ƒè‰¯çŸ¥çš„æŒ‡å¯¼ï¼Œè®©ä½ æœ‰æœºä¼šæ›´å¥½åœ°å®‰æ’è‡ªå·±çš„ç”Ÿæ´»ï¼Œå¹¶ä¸”æœ€å¤§é™åº¦åœ°åŒä½ çš„ä»·å€¼è§‚ä¿æŒä¸€è‡´ã€‚åŒæ—¶ç»™ä½ è‡ªç”±å’Œå˜é€šï¼Œè®©ä½ åœ¨ç‰ºç‰²æ—¢å®šæ—¥ç¨‹å®‰æ’ï¼Œæœä»æ›´é‡è¦çš„ä»·å€¼è§‚çš„æ—¶å€™å¿ƒå¹³æ°”å’Œï¼Œæ¯«ä¸å†…ç–šã€‚ è¿™ç§æ–¹æ³•ç¡®è®¤äº†ä½ çš„ä¸ªäººä½¿å‘½ï¼ŒåŒ…æ‹¬ä»·å€¼è§‚å’Œé•¿æœŸç›®æ ‡ã€‚ è¿™ç§æ–¹æ³•å¸®åŠ©ä½ æ˜ç¡®è‡ªå·±çš„è§’è‰²ï¼Œå¹³è¡¡è‡ªå·±ç”Ÿæ´»ä¸­çš„å„ä¸ªæ–¹é¢ã€‚æ¯ä¸ªæ˜ŸæœŸä¸ºæ¯ä¸ªå…³é”®è§’è‰²ç¡®ç«‹è¦è¾¾åˆ°çš„ç›®æ ‡ï¼Œå¹¶ä½œå‡ºå…·ä½“çš„æ—¥ç¨‹å®‰æ’ã€‚ ä»¥ä¸€ä¸ªæ˜ŸæœŸä¸ºå•ä½è®¡åˆ’ç”Ÿæ´»ï¼Œä¸å¿…å±€é™äºçŸ­æš‚çš„ä¸€å¤©æ—¶é—´ã€‚é€šè¿‡å®¡è§†è‡ªå·±çš„ä¸»è¦è§’è‰²è€Œè®©è‡ªå·±ä¿æŒæ¸…é†’ï¼Œç»å¸¸æƒ³åˆ°è‡ªå·±å†…å¿ƒæ·±å¤„çš„ä»·å€¼è§‚ã€‚ æœ‰ä¸€æ¡ä¸»çº¿è´¯ç©¿è¿™äº”ä¸ªæ–¹é¢ï¼Œé‚£å°±æ˜¯å°†äººé™…å…³ç³»å’Œæ•ˆæœæ”¾åœ¨ç¬¬ä¸€ä½ï¼Œå°†æ—¶é—´æ”¾åœ¨ç¬¬äºŒä½ã€‚ é«˜æ•ˆèƒ½çš„ç§˜è¯€â€”â€”æˆæƒæŠŠè´£ä»»åˆ†é…ç»™å…¶ä»–æˆç†Ÿè€ç»ƒçš„å‘˜å·¥ï¼Œæ‰æœ‰ä½™åŠ›ä»äº‹æ›´é«˜å±‚æ¬¡çš„æ´»åŠ¨ã€‚æˆæƒæ˜¯äº‹å¿…èº¬äº²ä¸ç®¡ç†ä¹‹é—´çš„æœ€å¤§åˆ†é‡ï¼Œäº‹å¿…èº¬äº²è€…å‡¡äº‹ä¸å‡å¤–æ±‚ã€‚åä¹‹ï¼Œç®¡ç†è€…æ³¨é‡å»ºç«‹åˆ¶åº¦ï¼Œç„¶åæ±‡é›†ç¾¤åŠ›å…±åŒå®Œæˆå·¥ä½œã€‚ æˆæƒå¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šæŒ‡ä»¤å‹æˆæƒå’Œè´£ä»»å‹æˆæƒã€‚ æŒ‡ä»¤å‹æˆæƒæŒ‡ä»¤å‹æˆæƒå…³æ³¨é‡ç‚¹æ˜¯æ–¹æ³•ï¼Œç®¡ç†è€…è‡ªå·±ä¸ºæœ€åçš„ç»“æœè´Ÿè´£ã€‚ è´£ä»»å‹æˆæƒè´£ä»»å‹æˆæƒçš„å…³æ³¨é‡ç‚¹æ˜¯æœ€ç»ˆç»“æœï¼Œå®ƒç»™äººä»¬è‡ªç”±ï¼Œå…è®¸è‡ªè¡Œé€‰æ‹©åšäº‹çš„å…·ä½“æ–¹æ³•ï¼Œå¹¶ä¸ºæœ€ç»ˆçš„ç»“æœè´Ÿè´£ã€‚èµ·åˆï¼Œè¿™ç§æˆæƒæ–¹å¼è´¹æ—¶è´¹åŠ›ï¼Œä½†å´ååˆ†å€¼å¾—ã€‚é€šè¿‡è´£ä»»å‹æˆæƒï¼Œå¯ä»¥å°†æ æ†çš„æ”¯ç‚¹å‘å³ç§»åŠ¨ï¼Œæé«˜æ æ†çš„ä½œç”¨ã€‚ è´£ä»»å‹æˆæƒè¦æ±‚åŒæ–¹å°±ä»¥ä¸‹äº”ä¸ªæ–¹é¢è¾¾æˆæ¸…æ™°ã€å¦è¯šçš„å…±è¯†ï¼Œå¹¶ä½œå‡ºæ‰¿è¯ºã€‚ é¢„æœŸç»“æœã€‚åŒæ–¹éƒ½è¦æ˜ç¡®å¹¶ä¸”å®Œå…¨ç†è§£æœ€ç»ˆæƒ³è¦çš„ç»“æœã€‚è¦ä»¥â€œç»“æœâ€è€Œä¸æ˜¯ä»¥â€œæ–¹æ³•â€ä¸ºä¸­å¿ƒã€‚è¦æœ‰å…·ä½“çš„æ—¥ç¨‹ï¼Œæ˜ç¡®æˆªæ­¢æœŸé™ã€‚ æŒ‡å¯¼æ–¹é’ˆã€‚ç¡®è®¤é€‚ç”¨çš„è¯„ä¼°æ ‡å‡†ï¼Œé¿å…æˆä¸ºæŒ‡ä»¤å‹æˆæƒã€‚ä½†æ˜¯ä¸€å®šè¦æœ‰æ˜ç¡®çš„é™åˆ¶æ€§è§„å®šã€‚ å¯ç”¨èµ„æºã€‚å‘Šè¯‰ä»–ä»¬å¯ä»¥ä½¿ç”¨å“ªäº›äººåŠ›ã€è´¢åŠ¡ã€æŠ€æœ¯æˆ–è€…ç»„ç»‡èµ„æºæ¥å–å¾—ç¼©é¢„æœŸçš„æˆæœã€‚ è´£ä»»å½’å±ã€‚åˆ¶å®šä¸šç»©æ ‡å‡†ï¼Œå¹¶ç”¨è¿™äº›æ ‡å‡†æ¥è¯„ä¼°ä»–ä»¬çš„æˆæœã€‚åˆ¶å®šå…·ä½“çš„æ—¶é—´è¡¨ï¼Œè¯´æ˜ä½•æ—¶æäº¤ä¸šç»©æŠ¥å‘Šï¼Œä½•æ—¶è¿›è¡Œè¯„ä¼°ã€‚ æ˜ç¡®å¥–æƒ©ã€‚æ˜ç¡®åœ°å‘Šè¯‰ä»–ä»¬è¯„ä¼°å¯èƒ½å¯¼è‡´çš„ç»“æœï¼Œå¥½çš„å’Œä¸å¥½çš„åæœéƒ½è¦å‘Šè¯‰ä»–ä»¬ã€‚ ä¿¡ä»»æ˜¯ä¿ƒä½¿äººè¿›æ­¥çš„æœ€å¤§åŠ¨åŠ›ï¼Œå› ä¸ºä¿¡ä»»èƒ½å¤Ÿè®©äººè¡¨ç°å‡ºè‡ªå·±æœ€å¥½çš„ä¸€é¢ã€‚ æˆæƒçš„å¤§åŸåˆ™ä¸å˜ï¼Œæƒé™å´å› äººè€Œå¼‚ã€‚å¯¹ä¸å¤Ÿæˆç†Ÿçš„äººï¼Œç›®æ ‡ä¸å¿…è®¢å¾—å¤ªé«˜ï¼ŒæŒ‡ç¤ºè¦è¯¦å°½ï¼Œå¹¶ä¸”å……åˆ†æä¾›èµ„æºï¼›ç›‘ç£è€ƒæ ¸åˆ™è¾ƒé¢‘ç¹ï¼Œå¥–æƒ©ä¹Ÿæ›´ç›´æ¥ã€‚å¯¹æˆç†Ÿçš„äººï¼Œå¯åˆ†é…æŒ‘æˆ˜æ€§é«˜çš„ä»»åŠ¡ï¼Œç²¾ç®€æŒ‡ç¤ºï¼Œå‡å°‘ç›‘ç£è€ƒæ ¸çš„æ¬¡æ•°ï¼Œè€ƒè¯„æ ‡å‡†åˆ™è¾ƒä¸ºæŠ½è±¡ã€‚ ä»˜è¯¸è¡ŒåŠ¨ æ‰¾å‡ºä¸€é¡¹å¹³æ—¶è¢«ä½ å¿½ç•¥çš„ç¬¬äºŒç±»äº‹åŠ¡ã€‚ ç”»å‡ºä¸€ä¸ªæ—¶é—´ç®¡ç†çŸ©é˜µï¼ŒæŒ‰ç…§ç™¾åˆ†æ¯”å°†ä½ çš„æ—¶é—´åˆ†é…ç»™æ¯ä¸€ç±»äº‹åŠ¡ã€‚ç„¶åä»¥åäº”åˆ†é’Ÿä¸ºè®¡æ—¶å•ä½è¿ç»­è®°å½•è‡ªå·±ä¸‰å¤©çš„æ´»åŠ¨çŠ¶å†µã€‚å¯¹ç…§ä¸€ä¸‹è‡ªå·±çš„è®¡åˆ’ï¼Œçœ‹æ˜¯å¦æœ‰å¾ˆå¤§çš„å‡ºå…¥ã€‚ å°†ä½ è®¤ä¸ºå¯ä»¥æˆæƒç»™ä»–äººä½œçš„äº‹æƒ…åˆ—åœ¨ä¸€å¼ çº¸ä¸Šï¼Œç„¶ååˆ—å‡ºä½ è®¤ä¸ºå¯ä»¥åšè¿™äº›å·¥ä½œçš„äººé€‰æˆ–è€…é€šè¿‡åŸ¹è®­å¯ä»¥èƒœä»»çš„å·¥ä½œäººé€‰ã€‚æ€è€ƒä¸€ä¸‹åº”è¯¥å¦‚ä½•å¼€å§‹æˆæƒç¨‹åºæˆ–è€…å¼€å±•åŸ¹è®­å·¥ä½œã€‚ è®¡åˆ’ä½ çš„ä¸‹å‘¨æ´»åŠ¨ï¼Œä½ çš„è®¡åˆ’åº”å½“èƒ½å¤Ÿä½“ç°ä½ çš„äººç”Ÿç›®æ ‡å’Œä¸»å¯¼ä»·å€¼è§‚ã€‚å¹¶åœ¨æ˜ŸæœŸç»“æŸçš„æ—¶å€™è¿›è¡Œæ€»ç»“ã€‚ æ‰¿è¯ºä»¥åæ¯å‘¨éƒ½åˆ¶å®šä¸€ä¸ªå‘¨è®¡åˆ’ï¼Œå¹¶è§„å®šä¸€ä¸ªå…·ä½“çš„æ—¶é—´ä¸“é—¨åšè¿™ä»¶äº‹æƒ…ã€‚ å°†ç›®å‰ä½¿ç”¨çš„æ—¶é—´ç®¡ç†å·¥å…·å‡çº§ä¸ºç¬¬å››ä»£æ—¶é—´ç®¡ç†å·¥å…·ã€‚ é˜…è¯»é™„å½•äºŒâ€”â€”é«˜æ•ˆèƒ½äººå£«çš„ä¸€å¤©ã€‚","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬å››éƒ¨åˆ† ä¹ æƒ¯ä¸ƒ ä¸æ–­æ›´æ–°â€”â€”å¹³è¡¡çš„è‡ªæˆ‘æ›´æ–°çš„åŸåˆ™","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-10/","text":"äººç”Ÿæœ€å€¼å¾—çš„æŠ•èµ„å°±æ˜¯é”»ç‚¼è‡ªå·±ï¼Œå› ä¸ºç”Ÿæ´»ä¸æœåŠ¡äººç¾¤éƒ½å¾—é è‡ªå·±ï¼Œè¿™æ˜¯æœ€çœŸè´µçš„å·¥å…·ã€‚ å·¥ä½œæœ¬èº«å¹¶ä¸èƒ½å¸¦æ¥ç»æµä¸Šçš„å®‰å…¨æ„Ÿï¼Œå…·å¤‡è‰¯å¥½çš„æ€è€ƒã€å­¦ä¹ ã€åˆ›é€ ä¸é€‚åº”èƒ½åŠ›ï¼Œæ‰èƒ½ç«‹äºä¸è´¥ä¹‹åœ°ã€‚æ‹¥æœ‰è´¢å¯Œï¼Œå¹¶ä¸ä»£è¡¨ç»æµç‹¬ç«‹ï¼Œæ‹¥æœ‰åˆ›é€ è´¢å¯Œçš„èƒ½åŠ›æ‰çœŸæ­£å¯é ã€‚ è‡ªæˆ‘æå‡å’Œå®Œå–„çš„å››ä¸ªå±‚é¢ä¹ æƒ¯ä¸ƒå°±æ˜¯ä¸ªäººäº§èƒ½ã€‚å®ƒä¿æŠ¤å¹¶ä¼˜åŒ–ä½ æ‰€æ‹¥æœ‰çš„æœ€é‡è¦çš„èµ„äº§â€”â€”ä½ è‡ªå·±ã€‚å®ƒä»å››ä¸ªå±‚é¢æ›´æ–°ä½ çš„å¤©æ€§ï¼Œé‚£å°±æ˜¯ï¼šèº«ä½“ã€ç²¾ç¥ã€æ™ºåŠ›ã€ç¤¾ä¼š/æƒ…æ„Ÿã€‚ èº«ä½“å±‚é¢èº«ä½“å±‚é¢æŒ‡æœ‰æ•ˆå‘µæŠ¤æˆ‘ä»¬çš„èº«ä½“â€”â€”å¥åº·é¥®é£Ÿï¼Œå……è¶³ä¼‘æ¯ä»¥åŠå®šæœŸé”»ç‚¼ã€‚ é”»ç‚¼å±äºç¬¬äºŒç±»äº‹åŠ¡ï¼Œä½†æ˜¯ç”±äºä¸å…·ç´§è¿«æ€§ï¼Œæ‰€ä»¥å¾ˆå°‘äººèƒ½åšæŒä¸æ‡ˆï¼Œç»“æœç»ˆæœ‰ä¸€å¤©æˆ‘ä»¬ä¼šå‘ç°è‡ªå·±é™·å…¥äº†ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œä¸å¾—ä¸é¢å¯¹å¥åº·é—®é¢˜å’Œå±æœºï¼Œè€ŒåŸå› æ­£æ˜¯ä¹‹å‰å¯¹é”»ç‚¼çš„å¿½è§†ã€‚ é”»ç‚¼çš„æ‰€æœ‰å¥½å¤„å‡ ä¹éƒ½äº§ç”Ÿäºæœ€åé˜¶æ®µã€‚æˆ‘æƒ³å¢å¼ºåŠ›é‡ï¼Œå°±å¿…é¡»ç­‰åˆ°è‚Œè‚‰çº¤ç»´æ’•è£‚ï¼Œç¥ç»çº¤ç»´æ„Ÿåˆ°ç–¼ç—›æ‰è¡Œï¼Œå› ä¸ºè¿™æ—¶å€™è‡ªç„¶æœºåˆ¶æ‰ä¼šäºˆä»¥è¿‡åº¦è¡¥å¿ï¼Œçº¤ç»´åœ¨ 48 å°æ—¶åä¼šå˜å¾—æ›´åŠ åšéŸ§ã€‚ æƒ…æ„Ÿâ€œè‚Œè‚‰â€ï¼ˆæ¯”å¦‚è€å¿ƒï¼‰ä¹Ÿæ˜¯ä¸€æ ·ã€‚å½“å¯¹è€å¿ƒçš„ç£¨ç»ƒè¶…è¶Šè¿‡å»çš„è®°å½•æ—¶ï¼Œæƒ…æ„Ÿçº¤ç»´å°±ä¼šæ–­è£‚ï¼Œè‡ªç„¶æœºåˆ¶å°±ä¼šäºˆä»¥è¿‡åº¦è¡¥å¿ï¼Œä¸‹ä¸€æ¬¡çº¤ç»´å°±ä¼šæ›´åŠ åšéŸ§ã€‚ åˆšå¼€å§‹æ—¶ä¹Ÿè®¸ä½ å¹¶ä¸å–œæ¬¢é”»ç‚¼ï¼Œç”šè‡³è¿˜å¾ˆåŒæ¶ï¼Œä½†æ˜¯ä¸€å®šè¦ç§¯æä¸€ç‚¹ï¼ŒåšæŒä¸‹å»ã€‚åœ¨ä½ æ‰§è¡Œæ…¢è·‘è®¡åˆ’æœŸé—´ï¼Œå³ä½¿æ¸…æ™¨æœ‰é›¨ï¼Œä¹Ÿä¸èƒ½æ”¾å¼ƒã€‚è€Œæ˜¯è¦æƒ³å¤ªå¥½äº†ï¼ä¸‹é›¨äº†ï¼æˆ‘å¯ä»¥åœ¨é”»ç‚¼èº«ä½“çš„åŒæ—¶ç£¨ç»ƒæ„å¿—ã€‚ ç²¾ç¥å±‚é¢ç²¾ç¥å±‚é¢çš„æ›´æ–°ä¸ºä½ æŒ‡å¼•äººç”Ÿçš„æ–¹å‘ï¼Œä¸ä¹ æƒ¯äºŒå¯†åˆ‡ç›¸å…³ã€‚ æœ‰äº›äººæ˜¯é€šè¿‡æ¬£èµä¼˜ç§€çš„æ–‡å­¦æˆ–éŸ³ä¹ä½œå“æ¥å®ç°ç²¾ç¥å±‚é¢çš„æ›´æ–°ï¼Œè¿˜æœ‰äº›äººæ˜¯é€šè¿‡ä¸è‡ªç„¶äº¤æµæ¥è¾¾åˆ°åŒæ ·ç›®çš„ã€‚æˆ‘çš„åšæ³•æ˜¯æ¯å¤©è®¤çœŸé˜…è¯»å’Œæ€è€ƒã€Šåœ£ç»ã€‹ã€‚ å¤§è‡ªç„¶ä¼šèµç¦ç»™å“ªäº›æ²‰æµ¸åœ¨è‡ªç„¶ä¸­çš„äººã€‚å½“ä½ è¿œç¦»åŸå¸‚çš„å–§åš£ä¸æ··ä¹±ï¼Œå°½æƒ…äº«å—è¿‡å¤§è‡ªç„¶çš„å’Œè°ä¸éŸµå¾‹ï¼Œå†å›åˆ°åŸå¸‚æ—¶ä¼šæ„Ÿåˆ°è€³ç›®ä¸€æ–°ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæ²¡æœ‰ä»€ä¹ˆèƒ½å¤Ÿå¹²æ‰°ä½ æˆ–è®©ä½ æƒŠæ…Œå¤±æªï¼Œç›´åˆ°å¤–ç•Œçš„å–§åš£æ··ä¹±å†æ¬¡ä¾µèš€åˆ°ä½ å†…å¿ƒçš„é™è°§å’Œå®‰è¯¦ã€‚ ä¸ªäººçš„ä½¿å‘½å®£è¨€è‡³å…³é‡è¦ã€‚ä¸€æ—¦æ·±åˆ»ç†è§£äº†ç”Ÿæ´»çš„ä¸­å¿ƒå’Œç›®æ ‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸æ–­åæ€ï¼ŒæŒä¹‹ä»¥æ’ï¼Œåœ¨æ›´æ–°ç²¾ç¥å±‚é¢çš„è¿‡ç¨‹ä¸­ï¼Œå°±å¯ä»¥æŠ±ç€åšå®šçš„ä¿¡å¿µï¼Œæ„æƒ³å¹¶å®è·µæ¯ä¸€å¤©çš„æ´»åŠ¨ã€‚ ä»”ç»†è†å¬ï¼Œè®¾æ³•å›å¤´ï¼Œæ£€è®¨åŠ¨æœºï¼ŒæŠŠå¿§æ„åŸ‹è¿›æ²™å­é‡Œã€‚ æ™ºåŠ›å±‚é¢æˆ‘ä»¬å¤§å¤šæ•°äººçš„æ™ºåŠ›å‘è‚²å’Œå­¦ä¹ ä¹ æƒ¯éƒ½æºè‡ªæ­£è§„æ•™è‚²ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦è„±ç¦»äº†å­¦æ ¡çš„è®­å¯¼ï¼Œè®¸å¤šäººçš„å¤´è„‘å°±ä¼šé€€åŒ–ï¼šä¸å†è®¤çœŸè¯»ä¹¦ï¼Œä¸å†æ¢ç´¢èº«å¤–çš„æ–°ä¸–ç•Œï¼Œä¸å†ç”¨å¿ƒæ€è€ƒï¼Œä¹Ÿä¸å†å†™ä½œï¼Œè‡³å°‘æ˜¯ä¸å†é‡è§†å†™ä½œï¼Œä¸å†æŠŠå®ƒå½“ä½œè€ƒéªŒæˆ‘ä»¬å‡†ç¡®ã€æ‰¼è¦è¡¨è¾¾è‡ªå·±çš„èƒ½åŠ›çš„æ–¹å¼ã€‚ç›¸åï¼Œæˆ‘ä»¬æŠŠæ—¶é—´èŠ±åœ¨äº†çœ‹ç”µè§†ï¼ˆæˆ–è€…æ˜¯ç½‘ä¸Šå†²æµªï¼‰ä¸­ã€‚ ç”µè§†çš„ç¡®è®©ç”Ÿæ´»å˜å¾—ä¸°å¯Œå¤šå½©ï¼Œä½†æ˜¯ï¼Œè¿˜æœ‰å¾ˆå¤šç”µè§†èŠ‚ç›®å®Œå…¨æ˜¯åœ¨æµªè´¹æˆ‘ä»¬çš„æ—¶é—´å’Œå¤´è„‘ã€‚ å…»æˆå®šæœŸé˜…è¯»ä¼˜ç§€æ–‡å­¦ä½œå“çš„ä¹ æƒ¯æ˜¯æ‹“å±•æ€ç»´çš„æœ€ä½³æ–¹å¼ã€‚å¯ä»¥ä»æ¯ä¸ªæœˆè¯»ä¸€æœ¬ä¹¦å¼€å§‹ï¼Œç„¶åæ¯ä¸¤å‘¨è¯»ä¸€æœ¬ä¹¦ï¼Œæ¥ç€æ˜¯æ¯å‘¨è¯»ä¸€æœ¬ä¹¦ã€‚ ç£¨ç ºå¿ƒå¿—çš„å¦ä¸€ç§æœ‰æ•ˆæ–¹å¼æ˜¯å†™ä½œã€‚å¦‚æœèƒ½å¤Ÿåœ¨å†™ä¿¡çš„æ—¶å€™ä¸ä»–äººæ·±å…¥äº¤æµæ€æƒ³ã€æ„Ÿå—å’Œç†å¿µï¼Œè€Œä¸æ˜¯è‚¤æµ…åœ°åœç•™åœ¨äº‹ç‰©è¡¨é¢ï¼Œä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬æé«˜æ€è€ƒã€æ¨ç†å’Œè·å–ä»–äººç†è§£çš„èƒ½åŠ›ã€‚ ç¤¾ä¼š/æƒ…æ„Ÿå±‚é¢ç¤¾ä¼š/æƒ…æ„Ÿå±‚é¢çš„æ›´æ–°å¹¶ä¸åƒå…¶å®ƒå±‚é¢çš„æ›´æ–°é‚£æ ·éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ä»–äººçš„æ—¥å¸¸äº¤å¾€ä¸­å®Œæˆè¿™é¡¹å·¥ä½œï¼Œä½†ç»ƒä¹ è¿˜æ˜¯å¿…è¦çš„ã€‚ä¹ æƒ¯å››ã€äº”ã€å…­æ˜¯ä½ åœ¨ç»ƒä¹ å½“ä¸­éœ€è¦æ—¶æ—¶å…³æ³¨çš„åœ°æ–¹ï¼Œè¿™äº›ä¹ æƒ¯æˆåŠŸçš„å…³é”®ä¸æ˜¯æ™ºåŠ›é—®é¢˜ï¼Œè€Œæ˜¯æƒ…æ„Ÿé—®é¢˜ï¼Œä¸æˆ‘ä»¬ä¸ªäººçš„å®‰å…¨æ„Ÿå¯†åˆ‡ç›¸å…³ã€‚ æ”¹å˜ä»–äººåæ¥ï¼Œå½“å¥¹åˆè¦æ¢å¤åˆ°æ—§æœ‰çš„è¡Œä¸ºæ¨¡å¼æ—¶ï¼Œç”Ÿå‘½å‚å±çš„éª‘å£«æŠŠå¥¹å«åˆ°ç—…åºŠå‰ï¼Œå”±èµ·äº†é‚£æ›²åŠ¨äººçš„ã€Šæ— æ³•å®ç°çš„æ¢¦ã€‹ï¼ˆThe Impossible Dreamï¼‰ã€‚ä»–å‡è§†å¥¹çš„åŒçœ¼ï¼Œè½»å£°è¯´ï¼šâ€œæ°¸è¿œä¸è¦å¿˜è®°ï¼Œä½ æ˜¯æœå°”è¥¿å†…å¨…â€ã€‚ æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ¸…æ™°è€ŒçœŸå®åœ°åæ˜ å‡ºä»–äººçš„å½¢è±¡ï¼Œè‚¯å®šä»–ä»¬çš„ç§¯ææ€§å’Œè´£ä»»å¿ƒï¼Œå¸®åŠ©ä»–ä»¬æ”¹å˜è¡Œä¸ºæ¨¡å¼ï¼Œæˆä¸ºè®²åŸåˆ™ï¼Œæ‡‚åˆ¤æ–­ï¼Œç‹¬ç«‹è‡ªä¸»ï¼Œæœ‰ä»·å€¼çš„ä¸ªä½“ã€‚çŸ¥è¶³å¿ƒæ€è®©æˆ‘ä»¬æ„è¯†åˆ°ï¼Œåæ˜ ä»–äººçš„æ­£é¢å½¢è±¡å¹¶ä¸ä¼šè´¬ä½æˆ‘ä»¬è‡ªå·±ï¼Œè€Œä¼šä½¿æˆ‘ä»¬æ›´å¼ºå¤§ï¼Œå› ä¸ºå®ƒå¢åŠ äº†æˆ‘ä»¬ä¸å…¶ä»–ç§¯æä¸»åŠ¨è€…æœ‰æ•ˆäº¤å¾€çš„æœºä¼šã€‚ æ­Œå¾·ï¼ˆGoetheï¼‰è¯´ï¼šâ€œä»¥ä¸€ä¸ªäººçš„ç°æœ‰è¡¨ç°æœŸè®¸ä¹‹ï¼Œä»–ä¸ä¼šæœ‰æ‰€é•¿è¿›ã€‚ä»¥ä»–çš„æ½œèƒ½å’Œåº”æœ‰æˆå°±æœŸè®¸ä¹‹ï¼Œä»–å®šèƒ½ä¸è´Ÿæ‰€æœ›ã€‚â€ å¹³è¡¡æ›´æ–°è‡ªæˆ‘æå‡å’Œå®Œå–„çš„è¿‡ç¨‹å¿…é¡»åŒ…æ‹¬å¤©æ€§ä¸­çš„æ‰€æœ‰å››ä¸ªå±‚é¢ï¼šèº«ä½“ã€ç²¾ç¥ã€æ™ºåŠ›ã€ç¤¾ä¼š/æƒ…æ„Ÿã€‚ ä¼ä¸šåŠ›äº‰ä¸Šæ¸¸çš„é“ç†ä¹Ÿæ˜¯è¿™æ ·ã€‚è°‹åˆ©å›ºç„¶æ˜¯ä¼ä¸šç»è¥çš„åŸºæœ¬ç›®çš„ï¼Œä½†å¹¶éä¼ä¸šå­˜åœ¨çš„å”¯ä¸€ç›®çš„ã€‚çŠ¹å¦‚ç”Ÿå‘½å°‘ä¸äº†é£Ÿç‰©ï¼Œä½†äººç»éä¸ºåƒè€Œæ´»ã€‚ æ›´æ–°ä¸­çš„ç»Ÿåˆç»¼æ•ˆäººç”Ÿçš„å››ä¸ªå±‚é¢ä¼‘æˆšç›¸å…³ï¼šèº«ä½“å¥å…¨æœ‰åŠ©äºå¿ƒæ™ºå‘å±•ï¼Œç²¾ç¥æå‡æœ‰ç›Šäºäººé™…å…³ç³»çš„åœ†æ»¡ã€‚å› æ­¤ï¼Œå¹³è¡¡æ‰èƒ½äº§ç”Ÿæœ€ä½³çš„æ•´ä½“æ•ˆæœã€‚ èº«ä½“å±‚é¢çš„è‡ªæˆ‘æ›´æ–°ç­‰åŒäºå¼ºåŒ–ä¸ªäººæ„¿æ™¯ï¼ˆä¹ æƒ¯ä¸€ï¼‰ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬å¢å¼ºç§¯ææ€§ã€è‡ªæˆ‘æ„è¯†å’Œç‹¬ç«‹æ„å¿—ï¼Œè®©æˆ‘ä»¬çŸ¥é“è‡ªå·±æ˜¯è‡ªç”±çš„ï¼Œä¸éœ€è¦è¢«åŠ¨åœ°æ‰¿å—ä»–äººçš„è¡Œä¸ºåæœï¼Œè¿™ä¹Ÿè®¸æ˜¯é”»ç‚¼èº«ä½“çš„æœ€å¤§å¥½å¤„ã€‚ ç²¾ç¥å±‚é¢çš„æ›´æ–°ç­‰åŒäºå¼ºåŒ–è‡ªæˆ‘é¢†å¯¼ï¼ˆä¹ æƒ¯äºŒï¼‰ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æŒ‰ç…§æƒ³è±¡å’Œè‰¯çŸ¥ï¼ˆè€Œä¸åªæ˜¯å›å¿†ï¼‰è¡Œäº‹ï¼Œæ·±å…¥ç†è§£ä¸ªäººæ€ç»´å’Œä»·å€¼è§‚ï¼Œç¡®å®šæ ¸å¿ƒçš„æ­£ç¡®åŸåˆ™ï¼Œæ˜ç¡®è‡ªå·±åœ¨ç”Ÿæ´»ä¸­çš„ç‹¬ç‰¹ä½¿å‘½ï¼Œæ”¹å˜æ€ç»´å’Œè¡Œä¸ºæ¨¡å¼ï¼Œä»¥åŠåšæŒæ­£ç¡®åŸåˆ™å¹¶åˆ©ç”¨ä¸ªäººçš„èµ„æºä¼˜åŠ¿ã€‚ ç²¾ç¥å±‚é¢çš„æ›´æ–°è®©ä¸ªäººçš„ç”Ÿæ´»å˜å¾—æ›´åŠ ä¸°å¯Œã€‚ æ™ºåŠ›å±‚é¢çš„æ›´æ–°ç­‰åŒäºå¼ºåŒ–è‡ªæˆ‘ç®¡ç†ï¼ˆä¹ æƒ¯ä¸‰ï¼‰ã€‚å®ƒå¸®åŠ©ä½ åœ¨åšè®¡åˆ’çš„æ—¶å€™ç¡®å®šç¬¬äºŒç±»äº‹åŠ¡çš„é‡è¦æ´»åŠ¨ï¼Œä¼˜å…ˆèƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨æ—¶é—´å’Œç²¾åŠ›çš„ç›®æ ‡ä¸æ´»åŠ¨ï¼Œç„¶åå›´ç»•è¿™äº›ç»„ç»‡å¹¶å±•å¼€æ´»åŠ¨ã€‚ä¸æ–­æ¥å—æ•™è‚²å¸®åŠ©ä½ å·©å›ºçŸ¥è¯†åŸºç¡€ï¼Œå¢åŠ é€‰æ‹©èŒƒå›´ã€‚ç¨³å®šçš„ç»æµåŸºç¡€å¹¶éæ¥è‡ªäºå·¥ä½œï¼Œè€Œæ˜¯æ¥è‡ªäºä¸ªäººçš„äº§èƒ½ï¼ˆæ€è€ƒã€å­¦ä¹ ã€åˆ›é€ ã€è°ƒæ•´ï¼‰ã€‚çœŸæ­£çš„ç»æµç‹¬ç«‹æŒ‡çš„ä¸æ˜¯å®¶è´¢ä¸‡è´¯ï¼Œè€Œæ˜¯æ‹¥æœ‰åˆ›é€ è´¢å¯Œçš„èƒ½åŠ›ï¼Œè¿™æ˜¯å†…åœ¨çš„ã€‚ â€œæ¯å¤©çš„ä¸ªäººé¢†åŸŸçš„æˆåŠŸâ€ï¼ˆæ¯å¤©è‡³å°‘ç”¨ä¸€ä¸ªå°æ—¶å®ç°èº«ä½“ã€ç²¾ç¥å’Œæ™ºåŠ›å±‚é¢çš„æ›´æ–°ï¼‰æ˜¯åŸ¹å…»ä¸ƒä¸ªä¹ æƒ¯çš„å…³é”®ï¼Œå®Œå…¨åœ¨ä¸ªäººçš„å½±å“åœˆèŒƒå›´å†…ã€‚ èºæ—‹å¼ä¸Šå‡è‰¯çŸ¥æ˜¯äººç±»ç‹¬ç‰¹çš„å¤©èµ‹ï¼Œå¸®åŠ©æˆ‘ä»¬åˆ¤æ–­è‡ªå·±æ˜¯å¦èƒŒç¦»äº†æ­£ç¡®çš„åŸåˆ™ï¼Œç„¶åå¼•å¯¼æˆ‘ä»¬å‘è¿™äº›åŸåˆ™é æ‹¢ã€‚ åƒåœ¾é£Ÿå“å’Œç¼ºä¹é”»ç‚¼ä¼šæ¯æ‰è¿åŠ¨å‘˜çš„å¥åº·ã€‚åŒæ ·ï¼Œæ·«ç§½ã€ç²—ä¿—æˆ–è‰²æƒ…çš„ä¸œè¥¿ä¼šä½¿æˆ‘ä»¬çš„çµé­‚é™·å…¥é»‘æš—ä¹‹ä¸­ï¼Œå‰Šå¼±æˆ‘ä»¬çš„åˆ¤æ–­èƒ½åŠ›ï¼Œä¸å†å…³å¿ƒæ˜¯éå¯¹é”™ï¼ˆè‡ªç„¶è€Œç¥åœ£çš„è‰¯çŸ¥ï¼‰ï¼Œåªåœ¨ä¹è‡ªå·±æ˜¯å¦ä¼šè¢«æ­å‘â€œç¤¾ä¼šè‰¯çŸ¥â€ã€‚ å“ˆé©¬èˆå°”å¾·ï¼ˆDag Hammarskjoldï¼Œå‰è”åˆå›½ç§˜ä¹¦é•¿ï¼‰è¯´è¿‡ï¼šæŠŠç©å†…å¿ƒå…½æ€§çš„äººï¼Œæ—©æ™šä¼šå˜æˆçœŸæ­£çš„é‡å…½ï¼›æ•´å¤©å¼„è™šä½œå‡çš„äººï¼Œç»ˆå°†å¤±å»è·å¾—çœŸç†çš„æƒåˆ©ï¼›æš´è™æˆæ€§çš„äººï¼Œå¤´è„‘çš„åˆ¤æ–­åŠ›ä¼šæ—¥ç›Šå‡é€€ã€‚å¦‚æœçœŸçš„è¦ä¿æŒèŠ±å›­æ•´æ´ï¼Œå°±ä¸èƒ½è®©æ‚è‰æœ‰ç«‹è¶³ä¹‹åœ°ã€‚ è¦å®ç°è¿™ä¸ªè‰¯æ€§å¾ªç¯ï¼Œå°±å¿…é¡»å­¦ä¹ ã€åšæŒã€å®è·µï¼Œå¹¶æ²¿ç€èºæ—‹å¼ä¸Šå‡çš„è·¯çº¿ä¸æ–­æé«˜å®è·µçš„å±‚æ¬¡ã€‚å¦‚æœä»¥ä¸ºåšåˆ°ä¸€é¡¹å°±å·²è¶³å¤Ÿï¼Œå®Œå…¨æ˜¯åœ¨è‡ªæ¬ºæ¬ºäººã€‚ ä»˜è¯¸è¡ŒåŠ¨ å†™å‡ºæœ‰åŠ©äºä¿æŒè‰¯å¥½çš„èº«ä½“çŠ¶æ€ï¼Œç¬¦åˆä½ çš„ç”Ÿæ´»æ–¹å¼ï¼Œèƒ½è®©ä½ ä»ä¸­å¾—åˆ°ä¹è¶£çš„æ´»åŠ¨æ¸…å•ã€‚ æŒ‘é€‰å…¶ä¸­ä¸€é¡¹æ´»åŠ¨ï¼ŒæŠŠå®ƒåˆ—ä¸ºä½ ä¸‹å‘¨çš„ä¸ªäººæ´»åŠ¨çš„ç›®æ ‡ã€‚ åˆ°ä¸€å‘¨ç»“æŸæ—¶ï¼Œè¯„ä¼°è‡ªå·±çš„è¡¨ç°ï¼Œå¦‚æœæ²¡æœ‰å®ç°ç›®æ ‡ï¼Œå°±æ€è€ƒä¸€ä¸‹åŸå› ï¼Œæ˜¯å› ä¸ºä½ æ›´çœ‹é‡ä¸€ç§æ›´é«˜å°šçš„ä»·å€¼è§‚ï¼Œè¿˜æ˜¯å› ä¸ºä½ æœªèƒ½éµå¾ªè‡ªå·±çš„ä»·å€¼è§‚è¡Œäº‹ã€‚ åˆ—å‡ºåœ¨ç²¾ç¥å’Œæ™ºåŠ›å±‚é¢è‡ªæˆ‘æå‡å’Œå®Œå–„çš„æ´»åŠ¨æ¸…å•ï¼Œåœ¨ç¤¾ä¼šã€æƒ…æ„Ÿå±‚é¢å¸Œæœ›æ”¹å–„çš„äººé™…å…³ç³»ä»¥åŠèƒ½ä¾é å…¬ä¼—æˆåŠŸæ¥æé«˜æ•ˆèƒ½çš„å…·ä½“é¢†åŸŸã€‚åœ¨æ¯ä¸ªå±‚é¢ä¸­æŒ‘é€‰ä¸€é¡¹æ´»åŠ¨ï¼Œåˆ—ä¸ºæœ¬å‘¨ç›®æ ‡ï¼Œä»˜è¯¸å®æ–½å¹¶åŠ ä»¥è¯„ä¼°ã€‚ åšæŒæ¯å‘¨å†™ä¸‹æ‰€æœ‰å››ä¸ªå±‚é¢çš„å…·ä½“â€œç£¨åˆ€â€è¡ŒåŠ¨ï¼Œä»˜è¯¸å®æ–½å¹¶è¯„ä¼°è‡ªå·±çš„è¡¨ç°å’Œæ•ˆæœã€‚","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬å››éƒ¨åˆ† å†è®ºç”±å†…è€Œå¤–é€ å°±è‡ªå·±","date":"2019-04-07T03:00:29.000Z","path":"2019/04/07/Seven-Habbits-11/","text":"åˆ©ç”¨åˆºæ¿€ä¸å›åº”ä¹‹é—´çš„è·ç¦»ä¸Šå¸è¡Œäº‹ç”±å†…è€Œå¤–ï¼Œå°˜ä¸–è¡Œäº‹ç”±å¤–è€Œå†…ï¼›å°˜ä¸–è®©ä¸–äººæ‘†è„±è´«ç©·ï¼Œè€¶ç¨£åˆ™å…ˆè®©ä¸–äººæ‘†è„±å†…å¿ƒçš„è´«ç©·ï¼Œç„¶åç”±ä»–ä»¬è‡ªå·±æ‘†è„±è´«ç©·ï¼›å°˜ä¸–é€šè¿‡æ”¹å˜ç¯å¢ƒæ¥é€ å°±äººï¼Œè€¶ç¨£åˆ™é€šè¿‡æ”¹å˜äººæ¥é€ å°±ç¯å¢ƒï¼šå°˜ä¸–å¡‘é€ äººçš„è¡Œä¸ºï¼Œè€Œè€¶ç¨£æ”¹å˜äººçš„æœ¬è´¨ã€‚ åˆºæ¿€ä¸å›åº”ä¹‹é—´å­˜åœ¨ä¸€æ®µè·ç¦»ï¼Œæˆé•¿å’Œå¹¸ç¦çš„å…³é”®å°±åœ¨äºæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨è¿™æ®µè·ç¦»ã€‚ æˆ‘ä»¬ç”¨æ–°é¢–è€Œæœ‰è¶£çš„æ–¹å¼åˆ©ç”¨åˆºæ¿€ä¸å›åº”ä¹‹é—´çš„é‚£æ®µè·ç¦»ï¼Œæ€è€ƒè‡ªå·±å¦‚ä½•å˜æˆäº†ä»Šå¤©çš„è‡ªå·±ä»¥åŠè¿™äº›è¿‡ç¨‹å¦‚ä½•å†³å®šäº†æˆ‘ä»¬çš„ä¸–ç•Œè§‚ã€‚ ä»ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±æåŠ›äº’ç›¸æ”¯æŒã€é¼“åŠ±å’Œä½“è°…ï¼Œè¿™è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´è¿›ä¸€æ­¥åœ°æ¢ç´¢å½¼æ­¤çš„å†…å¿ƒä¸–ç•Œï¼Œè€Œæˆ‘ä»¬ä¹‹é—´çš„å…³ç³»ä¹Ÿå¾—åˆ°æ»‹å…»ã€‚ æˆ‘ä»¬é€æ¸æœ‰äº†ä¸¤é¡¹å¿ƒç…§ä¸å®£çš„åŸºæœ¬è§„åˆ™ã€‚ä¸€æ˜¯â€œä¸è¦åˆ¨æ ¹é—®åº•â€ï¼šæ— è®ºå“ªä¸ªäººéœ²å‡ºäº†å†…å¿ƒæœ€è„†å¼±çš„ä¸€é¢ï¼Œå¦ä¸€äººéƒ½ä¸å¾—è¿½æ ¹ç©¶åº•ï¼Œè€Œæ˜¯è¦å°½åŠ›ä½“è°…å¯¹æ–¹ï¼Œå¦åˆ™å°±æ˜¾å¾—å¤ªè¿‡å’„å’„é€¼äººã€éœ¸é“å’Œåˆ»æ¿ã€‚äºŒæ˜¯åœ¨è¯é¢˜è¿‡äºå°–é”æˆ–ç—›è‹¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦åŠæ—¶æ‰“ä½ï¼Œæ™šäº›æ—¶å€™æˆ–è€…ç­‰åˆ°ç¬¬äºŒå¤©å†è¯´ï¼Œç›´åˆ°å½“äº‹äººæ„¿æ„å†æ¬¡å¼€å£ã€‚ æˆ‘ä»¬å‘ç°ï¼Œçœ‹ä¼¼çç¢çš„å°äº‹ï¼Œå¾€å¾€ä¹Ÿæºè‡ªé“­å¿ƒåˆ»éª¨çš„æƒ…æ„Ÿç»å†ï¼Œå¦‚æœåªçœ‹è¡¨é¢ï¼Œè€Œæ²¡æœ‰æŒ–æ˜æ·±å±‚çš„æ•æ„Ÿé—®é¢˜ï¼Œæ— å¼‚äºåœ¨è·µè¸å¯¹æ–¹å¿ƒä¸­çš„åœ£åœŸã€‚ çˆ±æƒ…ä¿é²œçš„ç§˜è¯€å°±æ˜¯äº¤è°ˆï¼Œç‰¹åˆ«æ˜¯è®¨è®ºå½¼æ­¤çš„æ„Ÿå—ã€‚ ä»£é™…ä¼ æ‰¿æˆ‘ä»¬çš„è¡Œä¸ºæ¨¡å¼ä¼šå¯¹å­å¥³çš„ç”Ÿæ´»äº§ç”Ÿéš¾ä»¥ç½®ä¿¡çš„å½±å“ï¼Œå°±å¥½åƒæˆ‘ä»¬çš„çˆ¶æ¯å½±å“äº†æˆ‘ä»¬ä¸€æ ·ã€‚ä»–ä»¬ä¸ä»…è®©æˆ‘ä»¬äº†è§£äº†è‡ªå·±æ˜¯ä»€ä¹ˆæ ·å­çš„äººï¼Œè€Œä¸”è®©æˆ‘ä»¬çŸ¥é“è‡ªå·±é€šè¿‡åŠªåŠ›å¯ä»¥æˆä¸ºä»€ä¹ˆæ ·çš„äººã€‚ ä¸€ä¸ªå…³ç³»ç´§å¯†ã€å‡ ä»£åŒå ‚çš„å¤§å®¶åº­å¾€å¾€æœ‰ä¸€ç§è¶…å¸¸çš„åŠ›é‡ï¼Œèƒ½å¸®äººä»¬ç¡®è®¤è‡ªæˆ‘ã€‚è®©å­©å­ä»¬åœ¨è¿™æ ·çš„â€œéƒ¨è½â€ä¸­æ‰¾åˆ°è‡ªå·±çš„ä½ç½®ï¼Œæ—¶æ—¶æ„Ÿåˆ°è¢«å…³æ€€ã€‚å‡ ä»£åŒå ‚çš„å’Œç¦å®¶åº­å¯èƒ½è•´å«ç€æœ€å¯Œæœ‰æˆæ•ˆï¼Œå›æŠ¥æœ€é«˜ï¼Œæœ€ä»¤äººæ»¡æ„çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œè®¸å¤šäººéƒ½èƒ½æ„Ÿè§‰åˆ°è¿™ç§å…³ç³»çš„é‡è¦æ€§ã€‚ æˆä¸ºè½¬å‹è€…åœ¨ä½ çš„å®¶æ—ä¸­å·²ç»å»¶ç»­æ•°ä»£çš„è¶‹åŠ¿å¯ä»¥åœ¨ä½ è¿™é‡Œç”»ä¸€ä¸ªå¥å·ã€‚ä½ æ˜¯ä¸€ä¸ªè½¬å‹è€…ï¼Œè¿æ¥ç€è¿‡å»å’Œæœªæ¥ï¼Œä½ è‡ªèº«çš„å˜åŒ–å¯ä»¥å½±å“åˆ°åä¸–çš„è®¸å¤šäººã€‚ çœŸæ­£çš„å˜é©æ˜¯ç”±å†…å‘å¤–å®ç°çš„ï¼Œåªæ˜¯åˆ©ç”¨æ€§æ ¼é­…åŠ›çš„æŠ€å·§ï¼Œåœ¨æ€åº¦å’Œè¡Œä¸ºæ–¹é¢åšäº›è¡¨é¢åŠŸå¤«æ ¹æœ¬ä¸è¡Œï¼Œä¸€å®šè¦ä»æ ¹æœ¬ä¸Šæ”¹å˜é‚£äº›å†³å®šäº†æˆ‘ä»¬çš„äººæ ¼å’Œä¸–ç•Œè§‚çš„æ€æƒ³æ„é€ å’Œè¡Œä¸ºæ¨¡å¼æ‰è¡Œã€‚ å†æ¬¡å¼•ç”¨è‰¾é»˜ç”Ÿï¼ˆEmersonï¼‰çš„åè¨€ï¼šâ€œåœ¨æˆ‘ä»¬çš„ä¸æ‡ˆåŠªåŠ›ä¸‹ï¼Œäº‹æƒ…å˜å¾—å¯ä»¥è¿åˆƒè€Œè§£ï¼Œè¿™å¹¶ä¸æ˜¯å› ä¸ºä»»åŠ¡çš„æ€§è´¨å‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„èƒ½åŠ›å¢å¼ºäº†ã€‚â€","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬äºŒéƒ¨åˆ† ä¹ æƒ¯äºŒ ä»¥ç»ˆä¸ºå§‹","date":"2019-04-07T02:58:21.000Z","path":"2019/04/07/Seven-Habbits-3/","text":"ç¬¬å››ç«  ä¹ æƒ¯äºŒ ä»¥ç»ˆä¸ºå§‹â€”â€”è‡ªæˆ‘é¢†å¯¼çš„åŸåˆ™è®¾æƒ³ä¸€æ®µæ‚¼è¯è¯·æ‰¾ä¸ªåƒ»é™çš„è§’è½ï¼ŒæŠ›å¼€ä¸€åˆ‡æ‚å¿µï¼Œæ•å¼€å¿ƒæ‰‰ï¼Œè·Ÿç€æˆ‘èµ°è¿‡è¿™æ®µå¿ƒçµä¹‹æ—…ã€‚ å‡è®¾ä½ æ­£åœ¨å‰å¾€æ®¡ä»ªé¦†çš„è·¯ä¸Šï¼Œè¦å»å‚åŠ ä¸€ä½è‡³äº²çš„è‘¬ç¤¼ã€‚æŠµè¾¾ä¹‹åï¼Œå±…ç„¶å‘ç°äº²æœ‹å¥½å‹é½èšä¸€å ‚ï¼Œæ˜¯ä¸ºäº†å‘ä½ å‘Šåˆ«ã€‚å§‘ä¸”å‡å®šè¿™æ—¶äº²æ—ä»£è¡¨ã€å‹äººã€åŒäº‹æˆ–ç¤¾å›¢ä¼™ä¼´ï¼Œå³å°†ä¸Šå°è¿½è¿°ä½ çš„ç”Ÿå¹³ã€‚è¯·ä½ è®¤çœŸæƒ³ä¸€æƒ³ ä½ å¸Œæœ›äººä»¬å¯¹ä½ ä»¥åŠä½ çš„ç”Ÿæ´»æœ‰ä»€ä¹ˆæ ·çš„è¯„ä»·ï¼Ÿ ä½ å¸Œæœ›ä»–ä»¬æ€æ ·è¯„ä»·ä½ çš„äººæ ¼ï¼Ÿ ä½ å¸Œæœ›ä»–ä»¬å›å¿†èµ·ä½ çš„å“ªäº›æˆå°±å’Œè´¡çŒ®ï¼Ÿ ä½ å¸Œæœ›å¯¹å‘¨å›´äººçš„ç”Ÿæ´»æ–½åŠ è¿‡ä»€ä¹ˆæ ·çš„å½±å“ï¼Ÿ ä»¥ç»ˆä¸ºå§‹çš„å®šä¹‰ä»¥ä½ çš„äººç”Ÿç›®æ ‡ä½œä¸ºè¡¡é‡ä¸€åˆ‡çš„æ ‡å‡†ï¼Œä½ çš„ä¸€è¨€ä¸€è¡Œã€ä¸€ä¸¾ä¸€åŠ¨ï¼Œæ— è®ºå‘ç”Ÿåœ¨ä½•æ—¶ï¼Œéƒ½å¿…é¡»éµå¾ªè¿™ä¸€åŸåˆ™ï¼Œå³ç”±ä¸ªäººæœ€å¿ å®çš„æœŸè®¸æˆ–ä»·å€¼è§‚æ¥å†³å®šä¸€åˆ‡ã€‚ ä½ å¸Œæœ›åœ¨ç›–æ£ºå®šè®ºæ—¶è·å¾—çš„è¯„ä»·ï¼Œæ‰æ˜¯ä½ å¿ƒç›®ä¸­çœŸæ­£æ¸´æœ›çš„æˆåŠŸã€‚ ä»»ä½•äº‹ç‰©éƒ½éœ€è¦ä¸¤æ¬¡åˆ›é€ ç¬¬ä¸€æ¬¡åˆ›é€ åœ¨å¤´è„‘ä¸­æ„æ€ï¼Œå³æ™ºåŠ›ä¸Šçš„ç¬¬ä¸€æ¬¡åˆ›é€ ï¼ˆMental/First Creationï¼‰ ç¬¬äºŒæ¬¡åˆ›é€ ä»˜è¯¸å®è·µï¼Œä½“åŠ›ä¸Šçš„ç¬¬äºŒæ¬¡åˆ›é€ ï¼ˆPhysical/Second Creationï¼‰ ä¸»åŠ¨è®¾è®¡è¿˜æ˜¯è¢«åŠ¨æ¥å—â€œä»»ä½•äº‹ç‰©éƒ½æ˜¯ä¸¤æ¬¡åˆ›é€ è€Œæˆâ€æ˜¯ä¸ªå®¢è§‚åŸåˆ™ï¼Œä½†â€œç¬¬ä¸€æ¬¡çš„åˆ›é€ â€æœªå¿…éƒ½æ˜¯æœ‰æ„çš„è®¾è®¡ã€‚æœ‰äº›äººè‡ªæˆ‘æ„è¯†è–„å¼±ï¼Œä¸æ„¿ä¸»åŠ¨è®¾è®¡è‡ªå·±çš„ç”Ÿæ´»ï¼Œç»“æœå°±è®©å½±å“åœˆå¤–çš„äººæˆ–äº‹æ§åˆ¶äº†è‡ªå·±ã€‚è¿™ç§äººçš„äººç”Ÿæ–¹å‘å¤§å¤šæºè‡ªä¸ªäººå–œå¥½ï¼Œä¸ç¬¦åˆå®¢è§‚åŸåˆ™ï¼Œä¹‹æ‰€ä»¥ä¼šè¢«æ¥æ”¶ï¼Œæ˜¯å› ä¸ºæŸäº›äººå†…å¿ƒè„†å¼±ï¼Œä¾èµ–å¿ƒç†è¿‡é‡ï¼Œæ¸´æœ›è¢«æ¥çº³å’Œè·å¾—å½’å±æ„Ÿï¼Œå‘å¾€ä»–äººçš„å…³æ€€å’Œçˆ±æŠ¤ï¼Œè€Œä¸”ä¸€å®šè¦åˆ«äººæ¥è‚¯å®šè‡ªå·±ä»·å€¼å’Œé‡è¦æ€§ã€‚ é¢†å¯¼ä¸ç®¡ç†ï¼šä¸¤æ¬¡åˆ›é€ â€œä»¥ç»ˆä¸ºå§‹â€çš„å¦ä¸€ä¸ªåŸåˆ™åŸºç¡€æ˜¯è‡ªæˆ‘é¢†å¯¼ï¼Œä½†é¢†å¯¼ï¼ˆLeadershiï¼‰ä¸åŒäºç®¡ç†ï¼ˆManagementï¼‰ã€‚é¢†å¯¼æ˜¯ç¬¬ä¸€æ¬¡çš„åˆ›é€ ï¼Œå¿…éœ€å…ˆäºç®¡ç†ï¼›ç®¡ç†æ˜¯ç¬¬äºŒæ¬¡çš„åˆ›é€ ã€‚ é¢†å¯¼ä¸ç®¡ç†å°±å¥½æ¯”æ€æƒ³ä¸è¡Œä¸ºã€‚ç®¡ç†å…³æ³¨åŸºå±‚ï¼Œæ€è€ƒçš„æ˜¯â€œæ€æ ·æ‰èƒ½æœ‰æ•ˆåœ°æŠŠäº‹æƒ…åšå¥½â€ï¼›é¢†å¯¼å…³æ³¨é«˜å±‚ï¼Œæ€è€ƒçš„æ˜¯â€œæˆ‘æƒ³æˆå°±çš„æ˜¯ä»€ä¹ˆäº‹ä¸šâ€ã€‚é¢†å¯¼æ˜¯â€œåšæ­£ç¡®çš„äº‹â€ï¼Œç®¡ç†æ˜¯â€œæ­£ç¡®åœ°åšäº‹â€ã€‚ç®¡ç†æ˜¯æœ‰æ•ˆåœ°é¡ºç€æˆåŠŸçš„æ¢¯å­å¾€ä¸Šçˆ¬ï¼Œé¢†å¯¼åˆ™åˆ¤æ–­è¿™ä¸ªæ¢¯å­æ˜¯å¦æ­åœ¨æ­£ç¡®çš„å¢™ä¸Šã€‚ ä¸ªäººç”Ÿæ´»ä¸­çš„é¢†å¯¼æ„è¯†æ›´ä¸ºåŒ®ä¹ï¼Œå¾ˆå¤šäººè¿è‡ªå·±çš„ä»·å€¼è§‚éƒ½æ²¡æœ‰ææ¸…æ¥šï¼Œå°±å¿™äºæé«˜æ•ˆç‡ï¼Œåˆ¶å®šç›®æ ‡æˆ–å®Œæˆä»»åŠ¡ã€‚ æ”¹å†™äººç”Ÿå‰§æœ¬ï¼šæˆä¸ºè‡ªå·±çš„ç¬¬ä¸€æ¬¡åˆ›é€ è€… è‡ªæˆ‘æ„è¯† æƒ³è±¡åŠ›ï¼šåœ¨å¿ƒé‡Œæ¼”ç»ƒå“ªäº›å°šæœªé‡Šæ”¾çš„æ½œèƒ½ è‰¯çŸ¥ï¼šéµå¾ªè‡ªç„¶æ³•åˆ™æˆ–åŸåˆ™ ä¸ªäººä½¿å‘½å®£è¨€ä»¥ç»ˆä¸ºå§‹çš„æœ€æœ‰æ•ˆæ–¹æ³•ï¼Œå°±æ˜¯æ’°å†™ä¸€ä»½ä¸ªäººä½¿å‘½å®£è¨€ï¼Œå³äººç”Ÿå“²å­¦æˆ–åŸºæœ¬ä¿¡å¿µã€‚ æƒ³æˆä¸ºæ€æ ·çš„äººï¼ˆå“å¾·ï¼‰ æƒ³æˆå°±ä»€ä¹ˆæ ·çš„äº‹ä¸šï¼ˆè´¡çŒ®å’Œæˆå°±ï¼‰ ä¸ºæ­¤å¥ åŸºçš„ä»·å€¼è§‚å’ŒåŸåˆ™ å¯¹äºä¸ªäººæ¥è¯´ï¼ŒåŸºäºæ­£ç¡®åŸåˆ™çš„ä¸ªäººä½¿å‘½å®£è¨€ä¹ŸåŒæ ·æ˜¯è¯„ä»·ä¸€åˆ‡çš„æ ‡å‡†ï¼Œæˆä¸ºæˆ‘ä»¬ä»¥ä¸å˜åº”ä¸‡å˜çš„åŠ›é‡æºæ³‰ã€‚ æ ¸å¿ƒåŒºåˆ¶å®šä¸ªäººä½¿å‘½å®£è¨€å¿…é¡»ä»å½±å“åœˆçš„æ ¸å¿ƒå¼€å§‹ï¼ŒåŸºæœ¬çš„æ€ç»´å®šå¼å°±åœ¨è¿™é‡Œï¼Œå³æˆ‘ä»¬ç”¨æ¥è§‚å¯Ÿä¸–ç•Œçš„â€œé€é•œâ€ã€‚å½“æˆ‘ä»¬ä¸“æ³¨äºè¿™ä¸ªæ ¸å¿ƒå¹¶å–å¾—ä¸°ç¡•æˆæœæ—¶ï¼Œå½±å“åœˆå°±ä¼šè¢«æ‰©å¤§ï¼Œè¿™æ˜¯æœ€é«˜æ°´å¹³çš„äº§èƒ½ï¼Œä¼šæå‡æˆ‘ä»¬åœ¨å„ç”Ÿæ´»é¢†åŸŸçš„æ•ˆèƒ½ã€‚ å®‰å…¨æ„Ÿï¼šä»£è¡¨ä»·å€¼è§‚ã€è®¤åŒã€æƒ…æ„Ÿçš„å½’å±ã€è‡ªå°Šè‡ªé‡ä¸æ˜¯å¦æ‹¥æœ‰ä¸ªäººçš„åŸºæœ¬èƒ½åŠ›ã€‚ äººç”Ÿæ–¹å‘ï¼šæ—¶â€œåœ°å›¾â€çš„å’Œå†…å¿ƒçš„å‡†ç»³ï¼Œäººç±»ä¸€æ¬¡ä¸ºè§£é‡Šå¤–ç•Œäº‹ç‰©çš„ç†æ®ä»¥åŠå†³ç­–ä¸è¡Œä¸ºçš„åŸåˆ™å’Œå†…åœ¨æ ‡å‡†ã€‚ æ™ºæ…§ï¼šæ˜¯äººç±»å¯¹ç”Ÿå‘½çš„è®¤çŸ¥ã€å¯¹å¹³è¡¡çš„æ„ŸçŸ¥å’Œå¯¹äº‹ç‰©é—´è”ç³»çš„ç†è§£ï¼ŒåŒ…æ‹¬åˆ¤æ–­åŠ›ã€æ´å¯ŸåŠ›å’Œç†è§£åŠ›ï¼Œæ˜¯è¿™äº›èƒ½åŠ›çš„ç»Ÿä¸€ä½“ã€‚ åŠ›é‡ï¼šé‡‡å–è¡ŒåŠ¨ã€è¾¾æˆç›®æ ‡çš„èƒ½åŠ›ï¼Œæ˜¯åšå‡ºé€‰æ‹©çš„å…³é”®æ€§åŠ›é‡ï¼Œä¹ŸåŒ…æ‹¬åŸ¹è‚²å‡ºæ›´æœ‰æ•ˆçš„ä¹ æƒ¯ä»¥æ›¿ä»£æ—§ä¹ æƒ¯çš„èƒ½åŠ›ã€‚ ä»¥åŸåˆ™ä¸ºä¸­å¿ƒä»¥åŸåˆ™ä¸ºä¸­å¿ƒçš„äººä¼šä¿æŒå†·é™å’Œå®¢è§‚ï¼Œä¸å—æƒ…ç»ªæˆ–å…¶å®ƒå› ç´ çš„å¹²æ‰°ï¼Œçºµè§‚å…¨å±€â€”â€”å·¥ä½œéœ€è¦ã€å®¶åº­éœ€è¦ã€å…¶ä»–ç›¸å…³å› ç´ ä»¥åŠä¸åŒå†³å®šçš„å¯èƒ½åæœï¼Œæ·±æ€ç†Ÿè™‘åæ‰åšå‡ºæ­£ç¡®é€‰æ‹©ã€‚ å–„ç”¨æ•´ä¸ªå¤§è„‘å·¦è„‘è´Ÿè´£é€»è¾‘æ€è€ƒä¸è¯­è¨€èƒ½åŠ›ï¼Œå³è„‘æ‰§æŒåˆ›é€ åŠ›ä¸ç›´è§‰ã€‚å·¦è„‘å¤„ç†æ–‡å­—ï¼Œå³è„‘æ“…é•¿å›¾åƒï¼›å·¦è„‘é‡å±€éƒ¨ä¸åˆ†æï¼Œå³è„‘é‡æ•´ä½“ä¸æ•´åˆã€‚ æ‹“å®½æ€è·¯å’Œå¿ƒçµæ¼”ç»ƒæ˜¯å¼€å‘å³è„‘çš„ä¸¤ä¸ªé€”å¾„ã€‚ æ‹“å®½æ€è·¯æœ‰æ—¶ï¼Œäººä¼šå› ä¸ºæ„å¤–æ‰“å‡»è€Œåœ¨ç¬é—´ä»å·¦è„‘æ€ç»´å˜æˆå³è„‘æ€ç»´ï¼Œæ¯”å¦‚äº²äººç¦»ä¸–ã€ç½¹æ‚£é‡ç—…ã€ç»æµå±æœºæˆ–é™·å…¥å›°å¢ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ‰ªå¿ƒè‡ªé—®ï¼šä»€ä¹ˆæ‰æ˜¯æœ€é‡è¦çš„ï¼Ÿæˆ‘ä»¬ç©¶ç«Ÿåœ¨è¿½æ±‚ä»€ä¹ˆï¼Ÿ ç§¯æä¸»åŠ¨è€…ä¸éœ€è¦è¿™ç§åˆºæ¿€ï¼Œå°±èƒ½æ‹“å®½æ€è·¯ã€è‡ªè§‰è½¬æ¢æ€ç»´å®šå¼ã€‚æ¯”å¦‚è®¾æƒ³è‡ªå·±çš„è‘¬ç¤¼ï¼Œæˆ–è€…é“¶å©šåŠé‡‘å©šçºªå¿µæ—¥çš„æƒ…æ™¯ï¼Œé‚€è¯·ä½ çš„é…å¶ä¸ä½ ä¸€èµ·æ¥ç•…æƒ³ï¼Œä¸¤äººå…±åŒçš„ç†æƒ³å©šå§»å…³ç³»åº”å½“æ€æ ·ï¼Œæ€æ ·é€šè¿‡æ—¥å¸¸æ´»åŠ¨æ¥ä»˜è¯¸å®æ–½ï¼Ÿ ä½ ä¹Ÿå¯ä»¥è®¾æƒ³è‡ªå·±é€€ä¼‘åçš„æƒ…å½¢ï¼Œé‚£æ—¶è‡ªå·±æœ‰æ€æ ·çš„è´¡çŒ®å’Œæˆå°±ï¼Œé€€ä¼‘ååˆæœ‰ä»€ä¹ˆè®¡åˆ’ï¼Œæ˜¯å¦æƒ³äºŒæ¬¡åˆ›ä¸šï¼Ÿ å¿ƒçµæ¼”ç»ƒå¿ƒçµæ¼”ç»ƒä¸ç¡®è®¤æ–½è¡Œè‡ªæˆ‘é¢†å¯¼ä¸æ˜¯åªè¦æ’°å†™ä¸€ä¸ªä½¿å‘½å®£è¨€å°±å®Œæˆäº†ï¼Œä»–æ˜¯ä¸€ä¸ªç¡®ç«‹æ„¿æ™¯å’Œä»·å€¼è§‚ï¼Œå¹¶è®©è‡ªå·±çš„ç”Ÿæ´»éµä»è¿™äº›é‡è¦åŸåˆ™çš„è¿‡ç¨‹ã€‚å³è„‘ä¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¸®åŠ©ä½ è¿›è¡Œå¿ƒçµæ¼”ç»ƒï¼ˆVisualizationï¼‰ï¼Œå¹¶å¯¹æ­£ç¡®è¡Œä¸ºåŠ ä»¥ç¡®è®¤ï¼ˆAffirmationï¼‰ã€‚è¿™ä¼šè®©ä½ çš„ç”Ÿæ´»æ›´ç¬¦åˆä½¿å‘½å®£è¨€ã€‚ ç¡®è®¤åº”è¯¥åŒ…æ‹¬äº”ä¸ªåŸºæœ¬è¦ç´ ï¼šä¸ªäººã€ç§¯æã€æœæ–­ã€å¯è§†ã€æƒ…æ„Ÿã€‚ä¾‹å¦‚â€œå‘ç°å­å¥³è¡Œä¸ºä¸å½“æ—¶ï¼Œæˆ‘ï¼ˆä¸ªäººï¼‰èƒ½ä»¥æ™ºæ…§ã€çˆ±å¿ƒã€åšå®šçš„ç«‹åœºä¸è‡ªåˆ¶åŠ›ï¼ˆç§¯æï¼‰åŠæ—¶åº”å¯¹ï¼ˆæœæ–­ï¼‰ï¼Œç»“æœè®©æˆ‘æ·±æ„Ÿæ¬£æ…°ï¼ˆæƒ…æ„Ÿï¼‰ã€‚â€ ç¡®å®šè§’è‰²å’Œç›®æ ‡åœ¨æ’°å†™ä½¿å‘½å®£è¨€æ—¶ï¼Œä¸å¦¨åˆ†å¼€ä¸åŒçš„è§’è‰²é¢†åŸŸï¼Œä¸€ä¸€è®¢ç«‹ç›®æ ‡ã€‚äº‹ä¸šã€ç”Ÿæ´»ã€æ”¿æ²»ã€ä¿¡ä»°ç­‰ã€‚ å®¶åº­çš„ä½¿å‘½å®£è¨€æ¯ä¸ªå®¶åº­éƒ½æœ‰å…±åŒçš„ä»·å€¼è§‚åŠç†å¿µï¼Œä½œä¸ºç”Ÿæ´»çš„é‡å¿ƒï¼Œæ’°å†™å®¶åº­ä½¿å‘½å®£è¨€æ­£å¯ä»¥å‡¸æ˜¾è¿™ä¸ªç”Ÿæ´»ä¸­å¿ƒï¼Œæ—¶å…¨å®¶äººå›¢ç»“åœ¨å…±åŒçš„ç›®æ ‡ä¸‹ã€‚ ç»„ç»‡çš„ä½¿å‘½å®£è¨€ä¸€ä¸ªçœŸæ­£åæ˜ æ¯éš”æˆå‘˜çš„å…±åŒæ„¿æ™¯å’Œä»·å€¼è§‚çš„ä½¿å‘½å®£è¨€ï¼Œèƒ½è°ƒåŠ¨ä»–ä»¬çš„åˆ›é€ åŠ›å’Œå¥‰çŒ®ç²¾ç¥ï¼Œä½¿ä»–ä»¬ä¸å†éœ€è¦æ—äººçš„æŒ‡å¯¼ã€ç›‘ç£å’Œæ‰¹è¯„ï¼Œå› ä¸ºä»–ä»¬å·²ç»æ¥å—äº†ä¸å˜çš„æ ¸å¿ƒåŸåˆ™ï¼Œæ¥å—äº†ä¼ä¸šä¸ºä¹‹å¥‹æ–—çš„å…±åŒç›®æ ‡ã€‚ ä»˜è¯¸è¡ŒåŠ¨ æŠŠä½ å‚åŠ è‘¬ç¤¼å¿ƒçµæ¼”ç»ƒæ—¶çš„å¿ƒå¾—åˆ—è¡¨æ•´ç†ã€‚ æ ¹æ®ç›®å‰ç†è§£ï¼Œå†™ä¸‹è‡ªå·±çš„äººç”Ÿè§’è‰²ã€‚æ£€è®¨ä½ å¯¹ç›®å‰æ‰®æ¼”çš„è§’è‰²å’Œè‡ªå·±çš„ç”Ÿæ´»æ˜¯å¦æ»¡æ„ã€‚ æ¯å¤©æŠ½ç©ºæ’°å†™ä¸ªäººä½¿å‘½å®£è¨€ã€‚ é˜…è¯»å„ç§ç”Ÿæ´»ä¸­å¿ƒï¼Œçœ‹ä½ çš„è¡Œä¸ºç¬¦åˆå…¶ä¸­å“ªç§ç±»å‹ï¼Ÿä»–ä»¬æ˜¯å¦è®©ä½ çš„æ—¥å¸¸è¡Œä¸ºæœ‰äº†ä¸€å®šä¾æ®ï¼Ÿä½ æ˜¯å¦æ»¡æ„ï¼Ÿ ä¸ºç¼–å†™ä½¿å‘½å®£è¨€è€Œæ‰‹æœºç¬”è®°ã€å¼•è¨€ã€æƒ³æ³•ä»¥åŠå¯èƒ½æœ‰ç”¨çš„å„ç§èµ„æ–™ã€‚ è®¾æƒ³è¿‘æœŸå†…å¯èƒ½ä¼šä»äº‹çš„æŸä¸ªé¡¹ç›®ï¼Œç”¨å¿ƒçµæ¼”ç»ƒçš„åŸåˆ™ï¼Œå†™ä¸‹ä½ å¸Œæœ›è·å¾—çš„ç»“æœä¸åº”é‡‡å–çš„æ­¥éª¤ã€‚ å‘å®¶äººå‘¢æˆ–åŒäº‹è®²è¿°æœ¬ç« çš„ç²¾åï¼Œå¹¶å»ºè®®å¤§å®¶å…±åŒæ‹Ÿå®šå®¶åº­æˆ–å›¢é˜Ÿçš„ä½¿å‘½å®£è¨€ã€‚","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬äºŒéƒ¨åˆ† ä¹ æƒ¯ä¸€ ç§¯æä¸»åŠ¨","date":"2019-04-07T02:56:26.000Z","path":"2019/04/07/Seven-Habbits-2/","text":"ç¬¬ä¸‰ç«  ä¹ æƒ¯ä¸€ ç§¯æä¸»åŠ¨â€”â€”ä¸ªäººæ„¿æ™¯çš„åŸåˆ™è‡ªæˆ‘æ€ç»´ï¼ˆSelf-paradigmï¼‰ è¡Œæœ‰ä¸å¾—ï¼Œåæ±‚è¯¸å·± è¯•ç€è·³å‡ºè‡ªæˆ‘çš„æ¡†æ¡†ï¼ŒæŠŠæ„è¯†è½¬ç§»åˆ°å±‹å­çš„æŸä¸ªè§’è½ï¼Œç„¶åç”¨å¿ƒå®¢è§‚åœ°å®¡è§†è‡ªå·±ï¼Œç«™åœ¨æ—è§‚æ³½çš„è§’åº¦è§‚å¯Ÿè‡ªå·±ï¼Œæè¿°ç°åœ¨çš„å¿ƒæƒ…ä¸ç²¾ç¥çŠ¶æ€ï¼Œæ€è€ƒä½ å¤´è„‘çš„å·¥ä½œæ–¹å¼ï¼Œå®ƒæ˜¯å¦ååº”çµæ•ã€‚ ç¤¾ä¼šä¹‹é•œï¼ˆSocial Mirroï¼‰ç¤¾ä¼šè§‚ç‚¹è®¤ä¸ºï¼Œç¯å¢ƒä¸æ¡ä»¶å¯¹æˆ‘ä»¬èµ·ç€å†³å®šæ€§çš„ä½œç”¨ã€‚æˆ‘ä»¬ä¸å¦è®¤æ¡ä»¶ä½œç”¨çš„å½±å“å·¨å¤§ï¼Œä½†å¹¶ä¸ç­‰äºæ‰¿è®¤å®ƒå‡Œé©¾äºä¸€åˆ‡ä¹‹ä¸Šï¼Œç”šè‡³å¯ä»¥å†³å®šæˆ‘ä»¬çš„å‘½è¿ã€‚æ ¹æ®è¿™ç§çœ‹æ³•ç»˜åˆ¶çš„ç¤¾ä¼šåœ°å›¾å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼Œä¹Ÿè¢«ç§°ä½œæ­ç¤ºäººæ€§çš„ä¸‰ç§â€œå†³å®šè®ºâ€ï¼š åŸºå› å†³å®šè®ºï¼ˆGenetic Determinismï¼‰ï¼šäººçš„æœ¬æ€§ç”±DNAå†³å®šï¼Œè‡ªå…ˆç¥–é—ä¼ ä¸‹æ¥ã€‚ å¿ƒç†å†³å®šè®ºï¼ˆPsychic Determinismï¼‰ï¼šäººçš„æœ¬æ€§ç”±çˆ¶æ¯çš„è¨€è¡Œå†³å®šï¼Œå³åŸç”Ÿå®¶åº­è®ºã€‚ ç¯å¢ƒå†³å®šè®ºï¼ˆEnvironmental Determinismï¼‰ï¼šç¯å¢ƒå†³å®šäººçš„æœ¬æ€§ï¼Œå¦‚å‘¨é­çš„äººä¸äº‹ï¼Œä¾‹å¦‚è€æ¿ã€é…å¶ã€å­å¥³ä¹ƒè‡³è‡ªç„¶ç¯å¢ƒå’Œç»æµç¯å¢ƒã€‚ è¿™ä¸‰ç§ç¤¾ä¼šåœ°å›¾éƒ½å·²â€œåˆºæ¿€-å›åº”â€ç†è®ºä¸ºåŸºç¡€ï¼Œæ¥æºäºå·´ç”«æ´›å¤«æ‰€åšçš„å…³äºç‹—çš„å®éªŒï¼ŒåŸºæœ¬è§‚ç‚¹è®¤ä¸ºæˆ‘ä»¬ä¼šå—æ¡ä»¶å·¦å³ï¼Œä»¥æŸä¸€ç‰¹å®šæ–¹å¼å›åº”æŸä¸€ç‰¹å®šåˆºæ¿€ã€‚ é€‰æ‹©çš„è‡ªç”±äººç±»çš„è‡ªæˆ‘æ„è¯†æ˜¯ç‹¬ç«‹çš„ï¼Œèƒ½å¤Ÿè¶…è„±è‚‰ä½“çš„æŸç¼šï¼Œä»¥æ—è§‚è€…çš„èº«ä»½å®¡è§†è‡ªå·±çš„é­é‡ã€‚ä»–å¯ä»¥å†³å®šå¤–ç•Œåˆºæ¿€å¯¹è‡ªå·±çš„å½±å“ç¨‹åº¦ï¼Œæˆ–è€…è¯´ï¼Œåœ¨é­é‡ï¼ˆåˆºæ¿€ï¼‰ä¸å¯¹é­é‡çš„å›åº”ä¹‹é—´ï¼Œä»–æœ‰é€‰æ‹©å›åº”æ–¹å¼çš„è‡ªç”±å’Œèƒ½åŠ›ã€‚ å³ï¼Œåœ¨åˆºæ¿€ä¸å›åº”ä¹‹é—´ï¼Œäººç±»æœ‰é€‰æ‹©çš„è‡ªç”±ã€‚è¿™ä¾¿æ˜¯â€œç§¯æä¸»åŠ¨â€çš„ä»·å€¼ã€‚ è´£ä»»æ„Ÿï¼ˆResponsibilityï¼‰ä»æ„è¯æ³•æ¥è¯´æ˜¯èƒ½å¤Ÿå›åº”ï¼ˆResponse-ableï¼‰çš„æ„æ€ï¼Œå³é€‰æ‹©å›åº”çš„èƒ½åŠ›ï¼Œäººç±»åº”å½“æœ‰è¥é€ æœ‰åˆ©çš„å¤–åœ¨ç¯å¢ƒçš„ç§¯ææ€§å’Œè´£ä»»æ„Ÿã€‚ç§¯æä¸»åŠ¨æ˜¯äººçš„å¤©æ€§ï¼Œå³ä½¿ç”Ÿæ´»å—åˆ°äº†å¤–ç•Œæ¡ä»¶çš„åˆ¶çº¦ï¼Œé‚£ä¹Ÿæ˜¯å› ä¸ºæˆ‘ä»¬æœ‰æ„æˆ–æ— æ„åœ°é€‰æ‹©äº†è¢«å¤–ç•Œæ¡ä»¶æ§åˆ¶ï¼Œè¿™ç§é€‰æ‹©æˆä¸ºæ¶ˆæè¢«åŠ¨ï¼ˆReactiveï¼‰ã€‚ é™¤éä½ æ„¿æ„ï¼Œå¦åˆ™æ²¡äººèƒ½ä¼¤å®³ä½ ä¼¤å®³æˆ‘ä»¬çš„å¹¶éæ‚²æƒ¨é­é‡æœ¬èº«ï¼Œè€Œæ˜¯æˆ‘ä»¬å¯¹äºæ‚²æƒ¨é­é‡çš„å›åº”ã€‚å°½ç®¡è¿™äº›äº‹çš„ç¡®ä¼šè®©äººèº«å¿ƒå—åˆ›æˆ–è€…ç»æµå—æŸï¼Œä½†æ˜¯å“å¾·å’Œæœ¬æ€§å®Œå…¨å¯ä»¥ä¸å—å½±å“ã€‚äº‹å®ä¸Šæœˆç—›è‹¦çš„ç»å†ï¼Œè¶Šèƒ½ç£¨ç»ƒæ„å¿—ï¼Œå¼€å‘æ½œèƒ½ï¼Œæå‡è‡ªå¦‚åº”å¯¹å›°å¢ƒçš„èƒ½åŠ›ï¼Œç”šè‡³è¿˜å¯èƒ½æ„Ÿå¬ä»–äººäº‰å–åŒæ ·çš„è‡ªç”±ã€‚ è†å¬è‡ªå·±çš„è¯­è¨€æ¶ˆæè¢«åŠ¨çš„äººï¼Œè¨€è¯­ä¸­å¾€å¾€ä¼šæš´éœ²å‡ºæ¨å¸è´£ä»»çš„æ„å›¾ï¼Œä¾‹å¦‚ï¼š â€œæˆ‘å°±æ˜¯è¿™æ ·åšäº‹çš„ã€‚â€å¤©ç”Ÿå¦‚æ­¤ï¼Œçˆ±çœ‹ä¸çœ‹ã€‚ â€œä»–æŠŠæˆ‘æ°”ç–¯äº†ï¼â€è´£ä»»ä¸åœ¨æˆ‘ï¼Œæ˜¯å¤–ç•Œå› ç´ æ§åˆ¶äº†æˆ‘çš„æƒ…ç»ªã€‚ â€œæˆ‘æ ¹æœ¬æ²¡æ—¶é—´åšã€‚â€å¤–ç•Œå› ç´ â€”â€”æ—¶é—´æ‰¼ä½äº†æˆ‘çš„å’½å–‰ã€‚ â€œæˆ‘åªèƒ½è¿™æ ·åšã€‚â€è¿«äºç¯å¢ƒï¼ˆå¤–ç•Œå› ç´ ï¼‰ æ¨å¸è´£ä»»çš„è¨€è¯­å¾€å¾€ä¼šå¼ºåŒ–å®¿å‘½è®ºã€‚è¯´è€…ä¸€ééè¢«è‡ªå·±æ´—è„‘ï¼Œå˜å¾—æ›´åŠ è‡ªæ€¨è‡ªè‰¾ï¼Œæ€ªç½ªåˆ«äººå’Œç¯å¢ƒï¼Œç”šè‡³æŠŠæ˜Ÿåº§ä¹Ÿæ‰¯äº†è¿›å»ã€‚ å…³æ³¨åœˆä¸å½±å“åœˆç§¯æä¸»åŠ¨çš„äººä¸“æ³¨äºâ€œå½±å“åœˆâ€ï¼Œä»–ä»¬ä¸“å¿ƒåšè‡ªå·±åŠ›æ‰€èƒ½åŠçš„äº‹ï¼Œä»–ä»¬çš„èƒ½é‡æ˜¯ç§¯æçš„ï¼Œèƒ½å¤Ÿä½¿å½±å“åœˆä¸æ–­æ‰©å¤§ã€æ‰©å¼ å’Œæˆé•¿ã€‚åªè¦æˆ‘ä»¬çš„ç„¦ç‚¹åœ¨å…³æ³¨æƒï¼Œå°±ç­‰äºæ˜¯å…è®¸è‡ªå·±å—åˆ¶äºå¤–ç•Œæ¡ä»¶ï¼Œè‡ªç„¶å°±ä¸ä¼šä¸»åŠ¨é‡‡å–å¿…è¦æªæ–½æ¥æ¨åŠ¨ç§¯æå˜åŒ–ã€‚ ä¸€ä¸ªäººçš„å…³æ³¨åœˆå¯èƒ½ä¼šå°äºå½±å“åœˆï¼Œè¿™è¯´æ˜æ­¤äººç”±äºè‡ªå·±çš„ç¼˜æ•…ï¼Œåœ¨æƒ…æ„Ÿæ–¹é¢ç¼ºä¹è¿œè§å’Œåˆ¤æ–­åŠ›ï¼Œæ¶ˆæè€Œåˆè‡ªç§ï¼Œå…¨éƒ¨ç²¾åŠ›éƒ½æ”¾åœ¨å…³æ³¨åœˆå†…ã€‚ ä¸‰ç§é—®é¢˜å¯ç›´æ¥æ§åˆ¶/å¯é—´æ¥æ§åˆ¶/æ— æ³•æ§åˆ¶ ä¸Šå¸å•Šï¼Œè¯·èµæˆ‘å‹‡æ°”ï¼Œæ”¹å˜é‚£äº›æˆ‘èƒ½æ”¹å˜çš„ï¼›è¯·èµæˆ‘èƒ¸è¥Ÿï¼Œæ¥æ”¶é‚£äº›æˆ‘æ— æ³•æ”¹å˜çš„ï¼›è¯·èµæˆ‘æ…§çœ¼ï¼Œèƒ½å¤Ÿåˆ†è¾¨è¿™ä¸¤è€…ã€‚ â€œå¦‚æœâ€å’Œâ€œæˆ‘å¯ä»¥â€ä¸å…³æ³¨åœˆç›¸å…³çš„è¯­å¥å¤šåŠå¸¦æœ‰å‡è®¾æ€§è´¨ï¼Œâ€œå¦‚æœâ€ï¼›ä¸å½±å“åœˆç›¸å…³çš„è¯­å¥å¤šåŠä½“ç°äº†è¿™ä¸ªäººçš„å“å¾·ä¿®å…»ï¼Œâ€œæˆ‘å¯ä»¥â€ã€‚ å¯¹å¾…é”™è¯¯çš„æ€åº¦é©¬ä¸Šæ‰¿è®¤ï¼Œ æ”¹æ­£å¹¶ä»ä¸­å¸å–æ•™è®­ï¼Œè¿™æ ·æ‰èƒ½åè´¥ä¸ºèƒœã€‚å¦‚æœä¸è‚¯æ‰¿è®¤è€Œåæ”¹æ­£ï¼Œä¹Ÿä¸ä¸›ä¸­å¸å–æ•™è®­ï¼Œç­‰äºé”™ä¸ŠåŠ é”™ï¼Œè‡ªæ¬ºæ¬ºäººã€‚ ä¸¤ç§ç›´æ¥æŒæ§äººç”Ÿçš„é€”å¾„ä¸€ã€ä½œå‡ºæ‰¿è¯ºï¼Œä¿¡å®ˆè¯ºè¨€äºŒã€ç¡®ç«‹ç›®æ ‡ï¼Œä»˜è¯¸å®è·µ ä»˜è¯¸è¡ŒåŠ¨ ç”¨ä¸€æ•´å¤©çš„æ—¶é—´ï¼Œå¬è‡ªå·±å’Œå‘¨å›´çš„äººè¯´è¯ï¼Œæ³¨æ„çœ‹æ˜¯å¦å¸¸æœ‰â€œä½†æ„¿â€ã€â€œæˆ‘åŠä¸åˆ°â€ã€â€œæˆ‘ä¸å¾—ä¸â€ç­‰æ¶ˆæè¯­è¨€å‡ºç° æƒ³ä¸€æƒ³è¿‘æœŸæ˜¯å¦ä¼šå‘ç”Ÿä¸€äº›æŒ‰ç…§ä»¥å‰çš„ä¹ æƒ¯æ‹Ÿä¼šæ¶ˆæå¯¹å¾…çš„äº‹æƒ…ï¼Ÿä»–æ˜¯å¦åœ¨ä½ çš„å½±å“åœˆä¹‹å†…ï¼Ÿä½ åº”å¦‚ä½•ä»¥ç§¯æä¸»åŠ¨çš„åŸåˆ™åº”å¯¹ï¼Ÿåœ¨å¿ƒé‡Œæ¼”ç»ƒä¸€ä¸‹ç§¯æçš„åº”å¯¹æ–¹å¼ï¼›æé†’è‡ªå·±åˆºæ¿€ä¸å›åº”ä¹‹é—´å­˜åœ¨ç©ºé—´ï¼›æƒ³è‡ªå·±æ‰¿è¯ºï¼Œè¦æŠ“ä½é€‰æ‹©å›åº”çš„è‡ªç”± æ‰¾å‡ºä¸€ä¸ªå·¥ä½œæˆ–ç”Ÿæ´»ä¸­ä»¤ä½ å¤‡æ„ŸæŒ«æŠ˜çš„é—®é¢˜ï¼Œåˆ¤æ–­å®ƒå±äºç›´æ¥æ§åˆ¶ã€é—´æ¥æ§åˆ¶è¿˜æ˜¯æ— æ³•æ§åˆ¶çš„é—®é¢˜ï¼Œç„¶ååœ¨å½±å“åœˆå†…æ‰¾å‡ºè§£å†³é—®é¢˜çš„ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼Œå¹¶ä»˜è¯¸è¡ŒåŠ¨ å®è¡Œç§¯æä¸»åŠ¨çš„åŸåˆ™30å¤©ï¼Œè§‚å¯Ÿè‡ªå·±çš„å½±å“åœˆæœ‰ä½•å˜åŒ–","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸€éƒ¨åˆ† é‡æ–°æ¢ç´¢è‡ªæˆ‘","date":"2019-04-07T02:54:17.000Z","path":"2019/04/07/Seven-Habbits-1/","text":"ç¬¬ä¸€ç«  ç”±å†…è€Œå¤–å…¨é¢é€ å°±è‡ªå·±æœ¬ä¹¦è¦é˜è¿°çš„å†…å®¹ä»¥åŸåˆ™ä¸ºä¸­å¿ƒï¼Œä»¥å“å¾·ä¸ºåŸºç¡€ï¼Œè¦æ±‚â€œç”±å†…è€Œå¤–â€åœ°å®ç°ä¸ªäººæ•ˆèƒ½å’Œäººé™…æ•ˆèƒ½ã€‚ ç”±å†…è€Œå¤–çš„è§‚ç‚¹è®¤ä¸ºä¸ªäººé¢†åŸŸçš„æˆåŠŸå¿…éœ€å…ˆäºå…¬ä¼—é¢†åŸŸçš„æˆåŠŸï¼›åªæœ‰å…ˆä¿¡å®ˆå¯¹è‡ªå·±çš„æ‰¿è¯ºï¼Œæ‰èƒ½ä¿¡å®ˆå¯¹ä»–äººçš„æ‰¿è¯ºã€‚ç”±å†…è€Œå¤–æ˜¯ä¸€ä¸ªæŒç»­çš„æ›´æ–°è¿‡ç¨‹ï¼Œä»¥ä¸»å®°äººç±»æˆé•¿å’Œè¿›æ­¥çš„è‡ªç„¶æ³•åˆ™ä¸ºåŸºç¡€ï¼Œæ˜¯èºæ—‹å‘ä¸Šçš„ï¼Œå®ƒè®©æˆ‘ä»¬ä¸æ–­è¿›æ­¥ï¼Œç›´åˆ°å®ç°ç‹¬ç«‹è‡ªå¼ºä¸æœ‰æ•ˆçš„äº’èµ–ã€‚ ç¬¬äºŒç«  ä¸ƒä¸ªä¹ æƒ¯æ¦‚è®ºä¹ æƒ¯çš„å¼•åŠ›å®‡å®™é£èˆ¹å¿…é¡»å…ˆæ‘†è„±å¼ºå¤§çš„åœ°çƒå¼•åŠ›ï¼Œä¸ºæ­¤åœ¨åˆšå‘å°„çš„å‡ åˆ†é’Ÿï¼Œå³åˆšå‡ç©ºæ—¶çš„å‡ å…¬é‡Œæ¶ˆè€—çš„èƒ½é‡æ¯”ä¹‹åå‡ å¤©å‡ åä¸‡å…¬é‡Œæ—…ç¨‹æ¶ˆè€—çš„èƒ½é‡è¿˜è¦å¤šã€‚ä¹ æƒ¯ä¹Ÿä¸€æ ·æœ‰æå¤§çš„å¼•åŠ›ï¼Œåªæ˜¯è®¸å¤šäººä¸åŠ æ³¨æ„æˆ–ä¸è‚¯æ‰¿è®¤ç½¢äº†ã€‚è¦æ ¹é™¤æ ¹æ·±è’‚å›ºçš„ä¸è‰¯ä¹ æƒ¯ï¼Œä»…æœ‰ä¸€ç‚¹ç‚¹æ¯…åŠ›ï¼Œåªä½œä¸€ç‚¹ç‚¹æ”¹å˜æ˜¯ä¸å¤Ÿçš„ã€‚ ä¹ æƒ¯çš„å®šä¹‰ä¹ æƒ¯æ˜¯çŸ¥è¯†ã€æŠ€å·§ã€æ„æ„¿ç›¸äº’äº¤ç»‡çš„ç»“æœã€‚ çŸ¥è¯†ï¼šç†è®ºèŒƒç•´ï¼ŒæŒ‡ç‚¹â€œåšä»€ä¹ˆâ€åŠâ€œä¸ºä½•åšâ€ æŠ€å·§ï¼šå‘Šè¯‰â€œå¦‚ä½•åšâ€ æ„æ„¿ï¼šä¿ƒä½¿â€œæƒ³è¦åšâ€ æˆç†Ÿæ¨¡å¼å›¾ ä¾èµ–ï¼šä»¥â€œä½ â€ä¸ºæ ¸å¿ƒ ç‹¬ç«‹ï¼šä»¥â€œæˆ‘â€ä¸ºæ ¸å¿ƒ äº’èµ–ï¼šä»¥â€œæˆ‘ä»¬â€ä¸ºæ ¸å¿ƒ åªé‡ç‹¬ç«‹å¹¶ä¸é€‚äºäº’èµ–çš„ç°å®ç”Ÿæ´»ã€‚åªçŸ¥ç‹¬ç«‹å´ä¸æ‡‚äº’èµ–çš„äººåªèƒ½ç§°ä¸ºç‹¬ä¸ªçš„â€œç”Ÿäº§æ ‡å…µâ€ï¼Œå´ä¸â€œä¼˜ç§€é¢†å¯¼â€æˆ–â€œæœ€ä½³åˆä½œè€…â€ä¹‹ç±»çš„ç§°å‘¼æ— ç¼˜ï¼Œä¹Ÿä¸ä¼šæ‹¥æœ‰ç¾æ»¡çš„å®¶åº­ã€å©šå§»æˆ–é›†ä½“ç”Ÿæ´»ã€‚ äº’èµ–æ˜¯ä¸€ä¸ªæ›´ä¸ºæˆç†Ÿå’Œé«˜çº§çš„æ¦‚å¿µã€‚ç”Ÿç†ä¸Šäº’èµ–çš„äººï¼Œå¯ä»¥è‡ªåŠ›æ›´ç”Ÿï¼Œä½†ä¹Ÿæ˜ç™½åˆä½œä¼šæ¯”å•å¹²æ›´æœ‰æˆæ•ˆï¼›æƒ…æ„Ÿä¸Šäº’èµ–çš„äººï¼Œèƒ½å……åˆ†è®¤è¯†è‡ªå·±çš„ä»·å€¼ï¼Œä½†ä¹ŸçŸ¥é“çˆ±å¿ƒã€å…³æ€€ä»¥åŠä»˜å‡ºçš„å¿…è¦æ€§ï¼›æ™ºåŠ›ä¸Šäº’èµ–çš„äººæ‡‚å¾—å–äººä¹‹é•¿ï¼Œè¡¥å·±ä¹‹çŸ­ã€‚ ä¸ƒä¸ªä¹ æƒ¯ä¾èµ– -&gt; ç‹¬ç«‹ï¼Œä¸ªäººé¢†åŸŸçš„æˆåŠŸ ç§¯æä¸»åŠ¨ ä»¥ç»ˆä¸ºå§‹ è¦äº‹ç¬¬ä¸€ ç‹¬ç«‹ -&gt; äº’èµ–ï¼Œå…¬ä¼—é¢†åŸŸçš„æˆåŠŸ åŒèµ¢æ€ç»´ çŸ¥å½¼è§£å·± ç»Ÿåˆç»¼æ•ˆ èºæ—‹ä¸Šå‡ ä¸æ–­æ›´æ–° ä»€ä¹ˆæ˜¯é«˜æ•ˆèƒ½äº§å‡ºä¸äº§èƒ½å¹³è¡¡çš„åŸåˆ™æ˜¯æ•ˆèƒ½çš„ç²¾é«“ï¼Œæ”¾ä¹‹å››æµ·è€Œçš†å‡†ï¼Œä¸ç®¡ä½ æ˜¯å¦éµä»ï¼Œå®ƒéƒ½ä¼šå­˜åœ¨ã€‚å®ƒæ˜¯æŒ‡å¯¼äººç”Ÿçš„ç¯å¡”ï¼Œæ˜¯æ•ˆèƒ½çš„å®šä¹‰å’Œæ¨¡å¼ï¼Œæ˜¯æœ¬ä¹¦ä¸­ä¸ƒä¸ªä¹ æƒ¯çš„åŸºç¡€ã€‚","tags":[{"name":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","slug":"é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯","permalink":"https://lilei.pro/tags/é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯/"}]},{"title":"å‹æƒ…é“¾æ¥","date":"2019-03-09T23:52:36.000Z","path":"2019/03/10/links/","text":"Title Content hexo-theme-indigo æœ¬åšå®¢ä½¿ç”¨çš„ Hexo ä¸»é¢˜","tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://lilei.pro/tags/å·¥å…·/"}]},{"title":"Java SE 8 Lambda å¿«é€Ÿå…¥é—¨","date":"2018-11-01T09:25:07.000Z","path":"2018/11/01/java8-lambda/","text":"æœ¬æ–‡æ˜¯å¯¹Java SE 8: Lambda Quick Startçš„ç¿»è¯‘ï¼Œä¾›ä¸ªäººå­¦ä¹ Lambdaè¡¨è¾¾å¼ä¹‹ç”¨ã€‚æˆæ–‡æ—¥æœŸï¼š2018-11-01ï¼Œæ‰€æœ‰ä»¥å¼•æ–‡å‡ºç°çš„æ–‡å­—ä¸ºç¬”è€…é˜…è¯»è¿‡ç¨‹ä¸­æ·»åŠ ï¼ŒéåŸæ–‡å†…å®¹ã€‚å¼ºçƒˆå»ºè®®CET4ä»¥ä¸Šçš„è¯»è€…é˜…è¯»åŸæ–‡ã€‚ æ¦‚è¿°ç›®æ ‡æœ¬æ–‡æ—¨åœ¨ä»‹ç»åœ¨ Java SE 8 ä¸­å¼•è¿›çš„ Lambda è¡¨è¾¾å¼ã€‚ é˜…è¯»æ—¶é—´å¤§çº¦ 1 å°æ—¶ ç®€ä»‹Lambda è¡¨è¾¾å¼æ˜¯ Java SE 8 æ–°å¼•å…¥çš„é‡è¦ç‰¹æ€§ã€‚å®ƒæä¾›äº†é€šè¿‡ä¸€ä¸ªè¡¨è¾¾å¼è¡¨ç¤ºæŒ‡ä»£æ¥å£çš„ç®€æ´æ–¹æ³•ã€‚Lambda è¡¨è¾¾å¼ä¹Ÿåœ¨éå†ã€è¿‡æ»¤ã€ä»¥åŠè¯»å–æ•°æ®æ–¹é¢ä¼˜åŒ–äº†Collectionç±»çš„ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œæ–°çš„å¹¶å‘ç‰¹æ€§æå‡äº†å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¨‹åºæ€§èƒ½ã€‚ æ€»ç»“ä¸€ä¸‹å°±æ˜¯ä¸‰ä¸ªä¼˜ç‚¹ï¼š1.æ›´ç®€æ´çš„åŒ¿åç±»å†™æ³•ï¼Œ2.æ›´ä¾¿åˆ©çš„é›†åˆç±»å¤„ç†ï¼Œ3.å¤šæ ¸ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–ã€‚ æœ¬æ–‡é¦–å…ˆæä¾›äº†å¯¹ Lambda è¡¨è¾¾å¼çš„ä»‹ç»è¯´æ˜ï¼Œç„¶åä»‹ç»åŒ¿åå†…éƒ¨å‡½æ•°ï¼Œæ¥ç€å¯¹å‡½æ•°å€Ÿå£å’Œæ–°çš„ Lambda è¯­æ³•è¿›è¡Œè®¨è®ºã€‚ç„¶ååˆ—ä¸¾å‡ºä¸€äº›å¸¸ç”¨ä½¿ç”¨æ–¹æ³•æ¨¡ç‰ˆã€‚ ä¸‹èŠ‚é€šè¿‡å¯¹ä¸€ä¸ªæœç´¢åœºæ™¯çš„è®¨è®ºï¼Œå¼•ç”³å‡º Lambda è¡¨è¾¾å¼å¦‚ä½•ä¼˜åŒ–è¿™ç§åŠŸèƒ½å®ç°ã€‚ç„¶åä»‹ç»äº†ä¸€äº›java.util.functionåŒ…é‡Œé¢å¸¸ç”¨çš„å‡½æ•°æ¥å£ï¼Œå¦‚Predicateå’ŒFunctionï¼Œå¹¶ä¸¾äº†ä¸€äº›æ —å­ã€‚ æ–‡æœ«ä»‹ç»å¦‚ä½•é€šè¿‡ Lambda ä¼˜åŒ–é›†åˆç±»ä½¿ç”¨ã€‚ æä¾›æ‰€æœ‰æ ·ä¾‹æºç ã€‚ ç¡¬ä»¶å’Œè½¯ä»¶éœ€æ±‚ä»¥ä¸‹æ˜¯ç¡¬ä»¶å’Œè½¯ä»¶éœ€æ±‚åˆ—è¡¨ JDK 8 NetBeans 7.4 å¯ä»¥ç”¨IDEAä»£æ›¿NetBeans ï¼ˆè¿è¡Œæ ·ä¾‹çš„ï¼‰å…ˆå†³æ¡ä»¶è¦è¿è¡Œæ ·ä¾‹ï¼Œä½ çš„ç”µè„‘ä¸Šå¿…é¡»å®‰è£…æœ‰JDK 8å’ŒNetBeans 7.4æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä½ å¯ä»¥åœ¨the main Lambda siteæ‰¾åˆ°ä¸‹è½½é“¾æ¥ã€‚æˆ–è€…å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥ã€‚ Java Development Kit 8 (JDK8) Early Access NetBeans 7.4 or later æ³¨æ„ï¼š å®‰è£…åŒ…é€‚ç”¨äºæ‰€æœ‰ä¸»æµæ“ä½œç³»ç»Ÿã€‚æœ¬æ–‡åŸºäº Linux Mint 13ï¼ˆUbuntu/Debianï¼‰å®Œæˆã€‚ å®‰è£…å®ŒæˆJDK8å’ŒNetBeansåã€‚å°†å®ƒä»¬çš„binæ–‡ä»¶å¤¹æ·»åŠ åˆ°ä½ çš„ç¯å¢ƒå˜é‡PATHä¸­ã€‚ æ³¨æ„ï¼š æœ¬æ–‡æœ€åæ›´æ–°äº 2013 å¹´åäºŒæœˆã€‚ ç«Ÿç„¶æ˜¯5å¹´ä»¥å‰çš„æ–‡ç« äº†â€¦ èƒŒæ™¯çŸ¥è¯†åŒ¿åå†…éƒ¨ç±»ï¼ˆAnonymous Inner Classï¼‰åœ¨ Java ä¸­ï¼ŒåŒ¿åå†…éƒ¨ç±»æä¾›ä¸€ç§å®ç°ä»…ä½¿ç”¨ä¸€æ¬¡çš„ç±»çš„é€”å¾„ã€‚ä¾‹å¦‚ï¼Œåœ¨æ ‡å‡†çš„ Swing æˆ–è€… JavaFX åº”ç”¨ä¸­ï¼Œéœ€è¦ç”¨ä¸€ç³»åˆ—çš„ handler æ¥å¤„ç†é”®ç›˜å’Œé¼ æ ‡äº‹ä»¶ã€‚é™¤äº†ä¸ºæ¯ä¸€ä¸ªäº‹ä»¶å•ç‹¬å†™ä¸€ä¸ªäº‹ä»¶å¤„ç†ç±»ï¼ˆè¯¥ç±»éœ€è¦å®ç° ActionListener æ¥å£ï¼‰è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç æ¥å®ç°ç±»ä¼¼éœ€æ±‚ 123456JButton testButton = new JButton(\"Test Button\");testButton.addActionListener(new ActionListener()&#123; @Override public void actionPerformed(ActionEvent ae)&#123; System.out.println(\"Click Detected by Anon Class\"); &#125;&#125;); é™¤æ­¤ä¹‹å¤–ï¼Œä½ éœ€è¦ä¸ºæ¯ä¸€ä¸ªäº‹ä»¶éƒ½å†™ä¸‹ç±»ä¼¼çš„ä»£ç ï¼Œå®ƒä»¬éƒ½éœ€è¦å®ç°ActionListeneræ¥å£ã€‚é€šè¿‡ä¸Šè¿°åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼Œä»£ç ä¼¼ä¹å˜å¾—å®¹æ˜“é˜…è¯»ä¸€äº›ã€‚ç„¶è€Œè¿™ç§å†™æ³•å¾ˆä¸ä¼˜é›…ï¼Œå› ä¸ºæœ‰å¤ªå¤šæ— ç”¨çš„æ¨¡ç‰ˆä»£ç ï¼Œæˆ‘ä»¬éœ€è¦çš„å…¶å®åªæ˜¯â€œåœ¨å‡½æ•°é‡Œæˆ‘è¦åšä»€ä¹ˆäº‹â€è¿™ä¸ªä¿¡æ¯ã€‚ å‡½æ•°æ¥å£ï¼ˆFunctional Interfacesï¼‰å®šä¹‰ActionListenerçš„ç±»ä»£ç å¦‚ä¸‹ 12345678package java.awt.event;import java.util.EventListener;public interface ActionListener extends EventListener &#123; public void actionPerformed(ActionEvent e);&#125; ActionListenerçš„æ¢¨å­æ˜¯ä¸€ä¸ªåªå«æœ‰ä¸€ä¸ªå‡½æ•°å£°æ˜çš„æ¥å£ã€‚åœ¨ Java SE 8 ä¸­ï¼Œè¿™ç§æ¨¡å¼çš„æ¥å£è¢«ç§°ä¸ºâ€œå‡½æ•°æ¥å£â€ã€‚ æ³¨æ„ï¼š è¿™ç§æ¥å£ä¹‹å‰è¢«ç§°ä¸ºâ€œSingle Abstrace Method typeâ€ï¼ˆå•ä¸€æŠ½è±¡æ–¹æ³•ç±»å‹ï¼‰ åœ¨ Java ä¸­ä½¿ç”¨åŒ¿åç±»å®ç°å‡½æ•°æ¥å£æ˜¯ä¸€ç§å¸¸è§å†™æ³•ã€‚é™¤äº†EventListenerç±»ä»¥å¤–ï¼ŒåƒRunnableå’ŒComparatorè¿™æ ·çš„æ¥å£ä¹Ÿæœ‰ä¸€æ ·çš„æ¨¡å¼ã€‚å› æ­¤ï¼Œå‡½æ•°å¼æ¥å£æ˜¯æˆ‘ä»¬ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚ Lambda è¡¨è¾¾å¼è¯­æ³•Lambda å¯ä»¥æŠŠåŒ¿åå†…éƒ¨ç±»çš„ä»£ç ä» 5 è¡Œç²¾ç®€åˆ° 1 è¡Œï¼Œæå¤§çš„ç¼©å‡äº†ä»£ç çš„å†—ä½™ã€‚å¦‚ä¸‹è¿™ç§â€œæ°´å¹³çš„â€è§£å†³æ–¹æ¡ˆè§£å†³äº†åŒ¿åå†…éƒ¨ç±»å¸¦æ¥çš„â€œå‚ç›´çš„â€é—®é¢˜ã€‚ è¿™é‡Œâ€œæ°´å¹³â€å’Œâ€œå‚ç›´â€æ˜¯æŒ‡ä»£ç å—åœ¨é¡µé¢ä¸­å‘ˆç°çš„å½¢å¼ ä¸€ä¸ª Lambda è¡¨è¾¾å¼ç”±ä¸‰éƒ¨åˆ†æ„æˆ Argument List Arrow Token Body (int x, int y) -&gt; x + y è¿™ä¸‰ä¸ªéƒ¨åˆ†å¯ä»¥ç¿»è¯‘ä¸ºâ€œå‚æ•°åˆ—è¡¨â€ã€â€œç®­å¤´æ ‡å¿—â€ã€â€œå‡½æ•°ä½“â€ï¼Œä¸è¿‡ä¸‹æ–‡ä»ç„¶ä»¥è‹±æ–‡ç§°å‘¼ï¼Œä¸ºäº†åŠ æ·±è®°å¿†ã€‚ Body éƒ¨åˆ†å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨è¾¾å¼ï¼ˆexpressionï¼‰æˆ–è€…ä»£ç å—ï¼ˆstatement blockï¼‰ã€‚åœ¨ä¸Šé¢çš„æ¨¡ç‰ˆä¸­ï¼Œbody ä¸­è¿›è¡Œäº†ç®€å•çš„è®¡ç®—å’Œè¿”å›ã€‚åœ¨ä»£ç å—æ ¼å¼ä¸­ï¼Œbody å‘ˆç°å½¢å¼ä¸æ™®é€šå‡½æ•°å†™æ³•ä¸€æ ·ï¼ŒåŒæ ·éœ€è¦ä¸€ä¸ª return è¯­å¥æ¥è¿”å›ç»“æœç»™åŒ¿åå‡½æ•°çš„è°ƒç”¨è€…ã€‚breakå’Œcontinueå…³é”®å­—åœ¨æœ€å¤–å±‚æ˜¯ç¦æ­¢ä½¿ç”¨çš„ï¼Œä¸è¿‡å¦‚æœä»£ç é‡Œå­˜åœ¨å¾ªç¯ï¼ˆloopsï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœ body éœ€è¦è¿”å›ä¸€ä¸ªç»“æœå€¼ï¼Œæ¯ä¸€æ¡æ§åˆ¶è·¯å¾„éƒ½å¿…éœ€æœ‰å€¼è¿”å›ï¼Œæˆ–è€…æŠ›å‡ºå¼‚å¸¸ã€‚ çœ‹ä¸€ä¸‹è¿™äº›æ —å­ï¼š 12345(int x, int y) -&gt; x + y() -&gt; 42(String s) -&gt; &#123; System.out.println(s); &#125; ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼è¯»å–ä¸¤ä¸ªæ•´å‹å‚æ•°ï¼Œxå’Œyï¼Œç„¶åè¿”å›x+yçš„ç»“æœã€‚ç¬¬äºŒä¸ªè¡¨è¾¾å¼ä¸éœ€è¦å‚æ•°ï¼Œä½¿ç”¨â€œè¡¨è¾¾å¼â€æ ¼å¼çš„è¿”å›ç»“æœï¼Œå€¼ä¸º42ã€‚ç¬¬ä¸‰ä¸ªè¡¨è¾¾å¼è¯»å–å­—ç¬¦ä¸²å‚æ•°ï¼Œç„¶åå°†å®ƒæ‰“å°åœ¨æ§åˆ¶å°ï¼Œä¸è¿”å›ä»»ä½•ç»“æœã€‚ æœ‰äº†ä¸Šé¢çš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€äº›æ ·ä¾‹ã€‚ Lambda æ ·ä¾‹ï¼ˆLambda Examplesï¼‰è¿™é‡Œæ˜¯ä¸€äº›ä½¿ç”¨åˆ°ä¸Šé¢æåˆ°çš„æ —å­çš„å¸¸è§ç”¨æ³•ã€‚ Runnable Lambdaä½ å¯ä»¥ç”¨ Lambda æ¥å†™ä¸€ä¸ªå®ç°äº† Runnable æ¥å£çš„å¯¹è±¡ 123456789101112131415161718192021public class RunnableTest &#123; public static void main(String[] args) &#123; System.out.println(\"=== RunnableTest ===\"); // Anonymous Runnable Runnable r1 = new Runnable()&#123; @Override public void run()&#123; System.out.println(\"Hello world one!\"); &#125; &#125;; // Lambda Runnable Runnable r2 = () -&gt; System.out.println(\"Hello world two!\"); // Run em! r1.run(); r2.run(); &#125;&#125; åœ¨ä¸¤ç§åœºæ™¯é‡Œï¼Œè¯·æ³¨æ„åˆ°æ¥å£ä¸éœ€è¦è¯»å–å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼ã€‚Runnableçš„ Lambda è¡¨è¾¾å¼ä½¿ç”¨äº†ä»£ç å—æ¨¡å¼ï¼Œå°† 5 è¡Œä»£ç æµ“ç¼©ä¸º 1 è¡Œã€‚ â€œä»£ç å—â€åº”ä¸ºåŸä½œè€…ç¬”è¯¯ï¼Œå®é™…ä¸Šæ˜¯â€œè¡¨è¾¾å¼â€æ ¼å¼ã€‚ Comparator LambdaComparatorç±»åœ¨ Java ä¸­ç”¨äºç»™é›†åˆæ’åºã€‚åœ¨ä»¥ä¸‹çš„ä¾‹å­ä¸­ï¼Œä¸€ä¸ªç”±Personå¯¹è±¡æ„æˆçš„ArrayListè¢«æŒ‰ç…§surNameè¿›è¡Œæ’åºã€‚ä»¥ä¸‹æ˜¯Personç±»çš„æˆå‘˜å˜é‡ 12345678public class Person &#123; private String givenName; private String surName; private int age; private Gender gender; private String eMail; private String phone; private String address; ä»¥ä¸‹ä»£ç åˆ†åˆ«ä½¿ç”¨äº†åŒ¿åå†…éƒ¨ç±»å’Œ Lambda è¡¨è¾¾å¼ä¸¤ç§æ–¹å¼ç”ŸæˆComparatorè¿›è¡Œæ’åºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738public class ComparatorTest &#123; public static void main(String[] args) &#123; List&lt;Person&gt; personList = Person.createShortList(); // Sort with Inner Class Collections.sort(personList, new Comparator&lt;Person&gt;()&#123; public int compare(Person p1, Person p2)&#123; return p1.getSurName().compareTo(p2.getSurName()); &#125; &#125;); System.out.println(\"=== Sorted Asc SurName ===\"); for(Person p:personList)&#123; p.printName(); &#125; // Use Lambda instead // Print Asc System.out.println(\"=== Sorted Asc SurName ===\"); Collections.sort(personList, (Person p1, Person p2) -&gt; p1.getSurName().compareTo(p2.getSurName())); for(Person p:personList)&#123; p.printName(); &#125; // Print Desc System.out.println(\"=== Sorted Desc SurName ===\"); Collections.sort(personList, (p1, p2) -&gt; p2.getSurName().compareTo(p1.getSurName())); for(Person p:personList)&#123; p.printName(); &#125; &#125;&#125; ç”±äº Markdown ä¸æ”¯æŒä»£ç è¡Œæ•°è¡¨ç¤ºï¼Œè¿™é‡Œçš„è¡Œæ•°è¯·è‡ªè¡Œä½“ä¼šã€‚ 17 - 21 è¡Œçš„æ’åºè¯­å¥å¯ä»¥è¢« 32 è¡Œçš„ Lambda è¡¨è¾¾å¼ç²¾ç®€ã€‚æ³¨æ„åˆ°ç¬¬ä¸€ä¸ª Lambda è¡¨è¾¾å¼å£°æ˜äº†ä¼ è¿›æ¥çš„å‚æ•°ç±»å‹ã€‚ç¬¬äºŒä¸ª Lambda è¡¨è¾¾å¼åˆ™çœç•¥äº†ç±»å‹å£°æ˜ã€‚Lambda æ”¯æŒâ€œtarget typingâ€ï¼ˆç±»å‹è‡ªåŠ¨åŒ¹é…ï¼Ÿï¼‰ï¼Œæ„å‘³ç€å®ƒå¯ä»¥è‡ªåŠ¨ä»ä¸Šä¸‹æ–‡ä¸­è·å–åˆ°å¯¹è±¡ç±»å‹ä¿¡æ¯ã€‚å› ä¸ºæˆ‘ä»¬å°†Comparatoråº”ç”¨äºæ³›å‹é›†åˆç±»ï¼ˆpersonListï¼‰ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªåŠ¨åˆ¤æ–­å‚æ•°ç±»å‹ä¸ºPersonã€‚ Listener Lambdaæœ€åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ActionListenerçš„ä¾‹å­ 1234567891011121314151617181920public class ListenerTest &#123; public static void main(String[] args) &#123; JButton testButton = new JButton(\"Test Button\"); testButton.addActionListener(new ActionListener()&#123; @Override public void actionPerformed(ActionEvent ae)&#123; System.out.println(\"Click Detected by Anon Class\"); &#125; &#125;); testButton.addActionListener(e -&gt; System.out.println(\"Click Detected by Lambda Listner\")); // Swing stuff JFrame frame = new JFrame(\"Listener Test\"); frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); frame.add(testButton, BorderLayout.CENTER); frame.pack(); frame.setVisible(true); &#125;&#125; æ³¨æ„ Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°è¢«ä¼ å…¥ã€‚ç±»å‹è‡ªåŠ¨åŒ¹é…å¯ä»¥åº”ç”¨åœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œä»¥ä¸‹ä¸¾ä¾‹è¯´æ˜ï¼š Variable declarationsï¼ˆå˜é‡å£°æ˜ï¼‰ Assignmentsï¼ˆèµ‹å€¼ï¼‰ Return statementsï¼ˆè¿”å›è¯­å¥ï¼‰ Array initializersï¼ˆæ•°ç»„åˆå§‹åŒ–ï¼‰ Method or constructor argumentsï¼ˆæ–¹æ³•æˆ–æ„é€ å™¨å‚æ•°ï¼‰ Lambda expression bodiesï¼ˆLambda è¡¨è¾¾å¼ä½“ï¼‰ Conditional expressions?:ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦?:ï¼‰ Cast expressionsï¼ˆç±»å‹è½¬æ¢è¯­å¥ï¼‰ ç®€å•è¯´å°±æ˜¯æ‰€æœ‰ä¸ºexpressionçš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ª expression/statementã€‚ èµ„æºä¸‹è½½æœ¬å°èŠ‚ä¸­çš„ NetBeans å·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ° LambdaExamples01.zip é€šè¿‡ Lambda è¡¨è¾¾å¼ä¼˜åŒ–ä»£ç åœ¨ä½ æŒæ¡äº†å‰é¢å±•ç¤ºçš„ä¾‹å­åï¼Œæœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•å€ŸåŠ© Lambda æ”¹è¿›ä½ çš„ä»£ç ã€‚Lambda è¡¨è¾¾å¼å°†å¸®åŠ©ä½ è½»æ¾å®ç°â€œDonâ€™t Repeat Yourself(DRY)â€åŸåˆ™ï¼Œå¹¶ä¸”ä½¿ä½ çš„ä»£ç æ›´åŠ ç®€æ´æ˜“äºé˜…è¯»ã€‚ ä¸€ä¸ªæŸ¥è¯¢çš„ Caseä¸€ä¸ªå¸¸è§çš„åº”ç”¨ç¨‹åºåœºæ™¯æ˜¯ï¼Œä»ä¸€ä¸ªé›†åˆä¸­éå†ï¼Œæ‰¾å‡ºé‚£äº›ç¬¦åˆæŸç§è¿‡æ»¤æ¡ä»¶çš„æˆå‘˜ã€‚åœ¨ 2012 å¹´çš„ JavaOne å¤§ä¼šä¸Šï¼ŒStuart Marks å’Œ Mike Duigou é€šè¿‡æ ¼å¤–å‡ºè‰²çš„Jump-Starting Lambdaå±•ç¤ºäº†è¿™ç§åº”ç”¨åœºæ™¯ã€‚ç»™ä½ ä¸€ä¸ªåå•åˆ—è¡¨ä»¥åŠä¸€ç³»åˆ—ç­›é€‰æ¡ä»¶ï¼Œéœ€è¦æ‰¾å‡ºé‚£äº›ç¬¦åˆæ¡ä»¶çš„äººå¹¶ä¸”è‡ªåŠ¨å‘¼å«ä»–ä»¬ã€‚è¿™ä¸ªæŒ‡å—åœ¨æœ‰ä¸€äº›è½»å¾®å˜æ›´çš„æƒ…å†µä¸‹å®ç°äº†ä¸Šè¿°éœ€æ±‚ã€‚ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä»ä»¥ä¸‹ä¸‰ä¸ªç¾å›½ç¾¤ä½“ä¸­æå–å‡ºæ¶ˆæ¯ï¼š å¸æœºï¼š å¹´é¾„å¤§äº 16 å² å…¥ä¼äººå‘˜ï¼š ç”·æ€§ï¼Œ18 ~ 25 å² é£è¡Œå‘˜ï¼ˆç‰¹æŒ‡å•†ä¸šé£è¡Œå‘˜ï¼‰ï¼š 23 ~ 65 å² æˆ‘ä»¬å°†è¦å®ç°ä¸Šè¿°éœ€æ±‚ï¼Œä¸è¿‡ä¸æ˜¯é€šè¿‡æ‰“ç”µè¯æˆ–è€…å‘é‚®ä»¶ï¼Œè€Œæ˜¯åœ¨æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ã€‚ä¿¡æ¯å†…å®¹åŒ…æ‹¬å§“åã€å¹´é¾„å’Œè”ç³»æ–¹å¼ï¼ˆä¾‹å¦‚é‚®ä»¶åœ°å€æˆ–è€…ç”µè¯å·ç ï¼‰ Person ç±»å±æ€§å®šä¹‰å¦‚ä¸‹ï¼š 12345678910public class Person &#123; private String givenName; private String surName; private int age; private Gender gender; private String eMail; private String phone; private String address; &#125; Personç±»é€šè¿‡Builderæ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œä½¿ç”¨createShortListæ¥åˆ›å»ºäººå‘˜åˆ—è¡¨ã€‚å¦‚ä¸‹æ–¹ä»£ç ç‰‡æ®µæ‰€ç¤ºã€‚æ³¨æ„ï¼š ä»¥ä¸‹æ‰€æœ‰æ ·ä¾‹ä»£ç éƒ½å¯ä»¥åœ¨æœ¬èŠ‚æœ«å°¾ç»™å‡ºçš„ NetBeans å·¥ç¨‹é‡Œæ‰¾åˆ°ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738public static List&lt;Person&gt; createShortList()&#123; List&lt;Person&gt; people = new ArrayList&lt;&gt;(); people.add( new Person.Builder() .givenName(\"Bob\") .surName(\"Baker\") .age(21) .gender(Gender.MALE) .email(\"bob.baker@example.com\") .phoneNumber(\"201-121-4678\") .address(\"44 4th St, Smallville, KS 12333\") .build() ); people.add( new Person.Builder() .givenName(\"Jane\") .surName(\"Doe\") .age(25) .gender(Gender.FEMALE) .email(\"jane.doe@example.com\") .phoneNumber(\"202-123-4678\") .address(\"33 3rd St, Smallville, KS 12333\") .build() ); people.add( new Person.Builder() .givenName(\"John\") .surName(\"Doe\") .age(25) .gender(Gender.MALE) .email(\"john.doe@example.com\") .phoneNumber(\"202-123-4678\") .address(\"33 3rd St, Smallville, KS 12333\") .build() ); ç¬¬ä¸€æ¬¡å°è¯•æœ‰äº†ä¸Šé¢çš„Personç±»ï¼ŒåŠ ä¸Šå®šä¹‰å¥½çš„æ£€ç´¢æ¡ä»¶ï¼Œä½ å¯ä»¥å†™ä¸€ä¸ªRoboContactç±»ã€‚ä¸€ä¸ªå¯ä»¥å‚è€ƒçš„å†™æ³•ä¸­å®šä¹‰äº†æ¯ç§ä½¿ç”¨åœºæ™¯é‡Œçš„æ–¹æ³•ï¼š RoboContactMethods.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package com.example.lambda;import java.util.List;/** * * @author MikeW */public class RoboContactMethods &#123; public void callDrivers(List&lt;Person&gt; pl)&#123; for(Person p:pl)&#123; if (p.getAge() &gt;= 16)&#123; roboCall(p); &#125; &#125; &#125; public void emailDraftees(List&lt;Person&gt; pl)&#123; for(Person p:pl)&#123; if (p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 &amp;&amp; p.getGender() == Gender.MALE)&#123; roboEmail(p); &#125; &#125; &#125; public void mailPilots(List&lt;Person&gt; pl)&#123; for(Person p:pl)&#123; if (p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65)&#123; roboMail(p); &#125; &#125; &#125; public void roboCall(Person p)&#123; System.out.println(\"Calling \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getPhone()); &#125; public void roboEmail(Person p)&#123; System.out.println(\"EMailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getEmail()); &#125; public void roboMail(Person p)&#123; System.out.println(\"Mailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getAddress()); &#125;&#125; å¦‚ä¸Šæ‰€ç¤ºï¼Œä¸Šé¢åˆ—å‡ºçš„æ–¹æ³•è¯´æ˜äº†å¯¹ä¸åŒå¯¹è±¡é‡‡å–çš„è¡Œä¸ºï¼ˆæ‰“ç”µè¯ã€å‘ç”µå­é‚®ä»¶ã€å‘å®ä½“é‚®ä»¶ï¼‰ã€‚å¯ä»¥æ¸…æ¥šåœ°çœ‹å‡ºè¿‡æ»¤æ¡ä»¶å’Œé‡‡å–çš„è¡Œä¸ºã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼š æ²¡æœ‰è·µè¡Œ DRY åŸåˆ™ æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯é‡å¤çš„æ¨¡ç‰ˆ å¿…é¡»ä¸ºæ¯ä¸ªæ–¹æ³•é‡å†™è¿‡æ»¤æ¡ä»¶ æ¯ä¸ªç”¨æˆ·åœºæ™¯éƒ½éœ€è¦å®ç°å¤§é‡çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ä»Šå¤©æ˜¯æ‰“ç”µè¯ç»™å…¥ä¼äººå‘˜ï¼Œå‘é‚®ä»¶ç»™é£è¡Œå‘˜ï¼›æ˜å¤©å¯èƒ½å°±æ˜¯æ‰“ç”µè¯ç»™é£è¡Œå‘˜ï¼Œå‘é‚®ä»¶ç»™å…¥ä¼äººå‘˜ï¼‰ ä»£ç å‘†æ¿ã€‚å¦‚æœè¿‡æ»¤æ¡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œä¸å¾—ä¸æ”¹åŠ¨å¤§é‡ä»£ç ã€‚å› æ­¤ï¼Œè¿™æ®µä»£ç æ˜¯éš¾ä»¥ç»´æŠ¤çš„ã€‚ é‡æ„è¿™äº›æ–¹æ³•å¦‚ä½•ä¿®å¤è¿™ä¸ªç±»ï¼Ÿå¯ä»¥ä»è¿‡æ»¤æ¡ä»¶å…¥æ‰‹ã€‚å¦‚æœå¯ä»¥æŠŠè¿‡æ»¤è°ƒä»·æå–å‡ºä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ï¼Œå°†ä¼šæœ‰ä¸€äº›æå‡ã€‚ RoboContactMethods2.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package com.example.lambda;import java.util.List;/** * * @author MikeW */public class RoboContactMethods2 &#123; public void callDrivers(List&lt;Person&gt; pl)&#123; for(Person p:pl)&#123; if (isDriver(p))&#123; roboCall(p); &#125; &#125; &#125; public void emailDraftees(List&lt;Person&gt; pl)&#123; for(Person p:pl)&#123; if (isDraftee(p))&#123; roboEmail(p); &#125; &#125; &#125; public void mailPilots(List&lt;Person&gt; pl)&#123; for(Person p:pl)&#123; if (isPilot(p))&#123; roboMail(p); &#125; &#125; &#125; public boolean isDriver(Person p)&#123; return p.getAge() &gt;= 16; &#125; public boolean isDraftee(Person p)&#123; return p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 &amp;&amp; p.getGender() == Gender.MALE; &#125; public boolean isPilot(Person p)&#123; return p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65; &#125; public void roboCall(Person p)&#123; System.out.println(\"Calling \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getPhone()); &#125; public void roboEmail(Person p)&#123; System.out.println(\"EMailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getEmail()); &#125; public void roboMail(Person p)&#123; System.out.println(\"Mailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getAddress()); &#125;&#125; æ¯”èµ·ä¸Šä¸€ä¸ªä¾‹å­ï¼Œè¿™æ¬¡çš„è¿‡æ»¤æ¡ä»¶è¢«å°è£…åœ¨å•ç‹¬çš„æ–¹æ³•é‡Œã€‚è¿™äº›åˆ¤æ–­ç”¨çš„ä»£ç å¯ä»¥å¤ç”¨ï¼Œéœ€æ±‚å˜æ›´æ—¶ä¹Ÿé¿å…äº†åœ¨ç±»é‡Œé¢è¿›è¡Œå¤§èŒƒå›´çš„ä¿®æ”¹ã€‚ç„¶è€Œï¼Œä»ç„¶å­˜åœ¨ç€å¤§é‡é‡å¤ä»£ç ï¼Œä»¥åŠå¿…éœ€ä¸ºæ¯ç§è”ç³»æ–¹æ³•ï¼ˆæ‰“ç”µè¯ã€å‘ç”µå­é‚®ä»¶ã€å‘é‚®ä»¶ï¼‰å•ç‹¬å†™ä¸€ä¸ªæ–¹æ³•ã€‚æ˜¯å¦æœ‰æ›´å¥½çš„å°†è¿‡æ»¤æ¡ä»¶ä¼ é€’ç»™è¿™äº›è”ç³»æ–¹æ³•çš„æ–¹å¼ï¼Ÿ åŒ¿åå†…éƒ¨ç±»åœ¨ Lambda è¡¨è¾¾å¼é—®ä¸–ä¹‹å‰ï¼Œå¯é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯å£°æ˜ä¸€ä¸ªå…·æœ‰è¿”å›å¸ƒå°”å€¼çš„testæ–¹æ³•çš„MyTest.javaç±»ã€‚æŠŠè¿‡æ»¤æ¡ä»¶åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œå¦‚ä¸‹ï¼š 123public interface MyTest&lt;T&gt; &#123; public boolean test(T t);&#125; æ›´æ–°åçš„æ¨¡æ‹Ÿè”ç³»æ–¹å¼ç±»å¦‚ä¸‹ï¼š RobocontactAnon.java 123456789101112131415161718192021222324252627282930313233343536373839public class RoboContactAnon &#123; public void phoneContacts(List&lt;Person&gt; pl, MyTest&lt;Person&gt; aTest)&#123; for(Person p:pl)&#123; if (aTest.test(p))&#123; roboCall(p); &#125; &#125; &#125; public void emailContacts(List&lt;Person&gt; pl, MyTest&lt;Person&gt; aTest)&#123; for(Person p:pl)&#123; if (aTest.test(p))&#123; roboEmail(p); &#125; &#125; &#125; public void mailContacts(List&lt;Person&gt; pl, MyTest&lt;Person&gt; aTest)&#123; for(Person p:pl)&#123; if (aTest.test(p))&#123; roboMail(p); &#125; &#125; &#125; public void roboCall(Person p)&#123; System.out.println(\"Calling \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getPhone()); &#125; public void roboEmail(Person p)&#123; System.out.println(\"EMailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getEmail()); &#125; public void roboMail(Person p)&#123; System.out.println(\"Mailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getAddress()); &#125; &#125; è¿™é‡Œæ— ç–‘æ˜¯æœ‰äº†ä¸€äº›ä¼˜åŒ–ï¼Œå› ä¸ºåªéœ€è¦ 3 ä¸ªç”¨äºè¿›è¡Œè”ç³»çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œåœ¨å®é™…è¿›è¡Œè°ƒç”¨æ—¶ï¼Œä»£ç ä¼šæœ‰ä¸€äº›ä¸‘é™‹ã€‚çœ‹ä¸‹é¢çš„æµ‹è¯•ä»£ç ï¼š RoboCallTest03.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package com.example.lambda;import java.util.List;/** * @author MikeW */public class RoboCallTest03 &#123; public static void main(String[] args) &#123; List&lt;Person&gt; pl = Person.createShortList(); RoboContactAnon robo = new RoboContactAnon(); System.out.println(\"\\n==== Test 03 ====\"); System.out.println(\"\\n=== Calling all Drivers ===\"); robo.phoneContacts(pl, new MyTest&lt;Person&gt;()&#123; @Override public boolean test(Person p)&#123; return p.getAge() &gt;=16; &#125; &#125; ); System.out.println(\"\\n=== Emailing all Draftees ===\"); robo.emailContacts(pl, new MyTest&lt;Person&gt;()&#123; @Override public boolean test(Person p)&#123; return p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 &amp;&amp; p.getGender() == Gender.MALE; &#125; &#125; ); System.out.println(\"\\n=== Mail all Pilots ===\"); robo.mailContacts(pl, new MyTest&lt;Person&gt;()&#123; @Override public boolean test(Person p)&#123; return p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65; &#125; &#125; ); &#125;&#125; è¿™æ˜¯â€œå‚ç›´â€ä»£ç çš„ä¸€ä¸ªå…¸å‹æ¡ˆä¾‹ã€‚è¿™æ ·çš„ä»£ç éš¾ä»¥é˜…è¯»ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæ¯ä¸€ç§ä½¿ç”¨åœºæ™¯å•ç‹¬å†™è‡ªå®šä¹‰çš„è¿‡æ»¤æ¡ä»¶ã€‚ Lambda è¡¨è¾¾å¼è§£åƒæ„Lambda è¡¨è¾¾å¼å¯ä»¥è§£å†³ç›®å‰ä¸ºæ­¢æˆ‘ä»¬é‡åˆ°çš„ä¸€åˆ‡é—®é¢˜ã€‚ä¸è¿‡ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ç‚¹åˆ«çš„ã€‚ java.uitl.function åœ¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼ŒMyTestå‡½æ•°æ¥å£å°†åŒ¿åå†…éƒ¨ç±»ä¼ é€’ç»™æ–¹æ³•è°ƒç”¨ã€‚ç„¶è€Œï¼Œå†™ä¸€ä¸ªæ¥å£å¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚Java SE 8 æä¾›äº†java.util.functionåŒ…ï¼Œå…¶ä¸­æœ‰ä¸€ç³»åˆ—æ ‡å‡†çš„å‡½æ•°å€Ÿå£ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒPredicateæ¥å£ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚ Predictæ„ä¸ºâ€œè°“è¯­ï¼Œæ–­è¨€â€ï¼Œå³åˆ¤æ–­æ¡ä»¶çš„æ„æ€ 123public interface Predicate&lt;T&gt; &#123; public boolean test(T t);&#125; testæ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ³›å‹ç±»ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„è¿‡æ»¤åœºæ™¯ã€‚ä¸‹é¢æ˜¯æ¨¡æ‹Ÿè”ç³»æ–¹å¼ç±»çš„æœ€ç»ˆç‰ˆæœ¬ã€‚ RobocontactsLambda.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.example.lambda;import java.util.List;import java.util.function.Predicate;/** * * @author MikeW */public class RoboContactLambda &#123; public void phoneContacts(List&lt;Person&gt; pl, Predicate&lt;Person&gt; pred)&#123; for(Person p:pl)&#123; if (pred.test(p))&#123; roboCall(p); &#125; &#125; &#125; public void emailContacts(List&lt;Person&gt; pl, Predicate&lt;Person&gt; pred)&#123; for(Person p:pl)&#123; if (pred.test(p))&#123; roboEmail(p); &#125; &#125; &#125; public void mailContacts(List&lt;Person&gt; pl, Predicate&lt;Person&gt; pred)&#123; for(Person p:pl)&#123; if (pred.test(p))&#123; roboMail(p); &#125; &#125; &#125; public void roboCall(Person p)&#123; System.out.println(\"Calling \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getPhone()); &#125; public void roboEmail(Person p)&#123; System.out.println(\"EMailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getEmail()); &#125; public void roboMail(Person p)&#123; System.out.println(\"Mailing \" + p.getGivenName() + \" \" + p.getSurName() + \" age \" + p.getAge() + \" at \" + p.getAddress()); &#125;&#125; åœ¨è¿™ç§å†™æ³•é‡Œï¼Œåªéœ€è¦ä¸‰ä¸ªæ–¹æ³•ç”¨æ¥æ¨¡æ‹Ÿè”ç³»å€™é€‰äººã€‚Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°è¢«ä¼ é€’ç»™æ–¹æ³•ï¼Œç”¨æ¥è¿‡æ»¤éœ€è¦è”ç³»çš„äººå‘˜ã€‚ å‚ç›´é—®é¢˜è¿åˆƒè€Œè§£Lambda è¡¨è¾¾å¼è§£å†³äº†å‚ç›´ä»£ç çš„é—®é¢˜ï¼Œå¹¶ä¸”æ›´å®¹æ˜“é‡ç”¨ã€‚æ¥çœ‹çœ‹æ–°çš„ä½¿ç”¨äº† Lambda è¡¨è¾¾å¼çš„æµ‹è¯•ç±»ã€‚ RoboCallTest04.java 12345678910111213141516171819202122232425262728293031323334353637383940package com.example.lambda;import java.util.List;import java.util.function.Predicate;/** * * @author MikeW */public class RoboCallTest04 &#123; public static void main(String[] args)&#123; List&lt;Person&gt; pl = Person.createShortList(); RoboContactLambda robo = new RoboContactLambda(); // Predicates Predicate&lt;Person&gt; allDrivers = p -&gt; p.getAge() &gt;= 16; Predicate&lt;Person&gt; allDraftees = p -&gt; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 &amp;&amp; p.getGender() == Gender.MALE; Predicate&lt;Person&gt; allPilots = p -&gt; p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65; System.out.println(\"\\n==== Test 04 ====\"); System.out.println(\"\\n=== Calling all Drivers ===\"); robo.phoneContacts(pl, allDrivers); System.out.println(\"\\n=== Emailing all Draftees ===\"); robo.emailContacts(pl, allDraftees); System.out.println(\"\\n=== Mail all Pilots ===\"); robo.mailContacts(pl, allPilots); // Mix and match becomes easy System.out.println(\"\\n=== Mail all Draftees ===\"); robo.mailContacts(pl, allDraftees); System.out.println(\"\\n=== Call all Pilots ===\"); robo.phoneContacts(pl, allPilots); &#125;&#125; æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä¸ºæ¯ç»„è”ç³»äººï¼ˆallDrivers, allDraftees, allPilotsï¼‰å£°æ˜äº†ä¸€ä¸ªæ–­è¨€ï¼ˆPredicateï¼‰ã€‚ä½ å¯ä»¥å°†ä»»ä½•ä¸€ä¸ªæ–­è¨€ä¼ ç»™æ¨¡æ‹Ÿè”ç³»çš„æ–¹æ³•ã€‚ä»£ç ç®€æ´æ˜“äºé˜…è¯»ï¼Œå¹¶ä¸”å‡å°‘äº†é‡å¤ä»£ç ã€‚ èµ„æºä¸‹è½½æœ¬å°èŠ‚ä¸­çš„ NetBeans å·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ° RoboCallExample.zip java.util.functionåŒ…ä¸ŠèŠ‚ä»‹ç»çš„Predicateå¹¶ä¸æ˜¯ Java SE 8 æ‰€æä¾›çš„å”¯ä¸€å‡½æ•°æ¥å£ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—çš„æ ‡å‡†æ¥å£å¸®åŠ©å¼€å‘ã€‚ åƒæˆ‘è¿™ä¹ˆåŠçš„ Predicateï¼šå‚æ•°å¯¹è±¡çš„æŸä¸ªå±æ€§ Consumerï¼šå¯¹å‚æ•°å¯¹è±¡æ‰§è¡Œçš„æŸç§æ“ä½œ Functionï¼šæŠŠ T è½¬æ¢ä¸º U Supplieerï¼šæä¾›ä¸€ä¸ª T çš„å®ä¾‹ï¼ˆä¾‹å¦‚å·¥å‚ï¼‰ UnaryOperatorï¼šä¸€ä¸ªå•å…ƒè¿ç®—ç¬¦ï¼ŒT -&gt; T BinaryOperatorï¼šä¸€ä¸ªåŒå…ƒè¿ç®—ç¬¦ï¼Œ(T, T) -&gt; T æ­¤å¤–ï¼Œå¾ˆå¤šæ¥å£éƒ½æœ‰åŸå§‹å½¢å¼ï¼ˆç±»ä¼¼ä¸Šæ–‡ä¸­çš„Predicateå’Œäººå·¥è¿‡æ»¤å™¨è¿™ç§æ¯”è¾ƒï¼‰ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Lambda è¡¨è¾¾å¼ã€‚ ä¸œæ–¹å–åæ³•ä»¥åŠæ–¹æ³•è°ƒç”¨åœ¨å†™ä¸Šé¢ä¸€ä¸ªä¾‹å­æ—¶ï¼Œæˆ‘è®¤ä¸ºPersonç±»åº”å½“å…·å¤‡ä¸€ä¸ªçµæ´»çš„è¾“å‡ºç³»ç»Ÿã€‚ä¸€ä¸ªéœ€æ±‚æ˜¯ä»¥è¥¿æ–¹å’Œä¸œæ–¹ä¸¤ç§å‘½åæ–¹å¼æ‰“å°å‡ºåå­—ã€‚åœ¨è¥¿æ–¹ï¼Œååœ¨å‰ï¼Œå§“åœ¨åã€‚åœ¨ä¸œæ–¹åˆ™æ°å¥½ç›¸åã€‚ è€å¼å†™æ³•çš„ä¾‹å­è¿™æ˜¯åœ¨æœªä½¿ç”¨ Lambda è¡¨è¾¾å¼æ—¶çš„å†™æ³• Person.java 12345678910111213141516171819public void printWesternName()&#123; System.out.println(\"\\nName: \" + this.getGivenName() + \" \" + this.getSurName() + \"\\n\" + \"Age: \" + this.getAge() + \" \" + \"Gender: \" + this.getGender() + \"\\n\" + \"EMail: \" + this.getEmail() + \"\\n\" + \"Phone: \" + this.getPhone() + \"\\n\" + \"Address: \" + this.getAddress());&#125; public void printEasternName()&#123; System.out.println(\"\\nName: \" + this.getSurName() + \" \" + this.getGivenName() + \"\\n\" + \"Age: \" + this.getAge() + \" \" + \"Gender: \" + this.getGender() + \"\\n\" + \"EMail: \" + this.getEmail() + \"\\n\" + \"Phone: \" + this.getPhone() + \"\\n\" + \"Address: \" + this.getAddress());&#125; ä½ éœ€è¦ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ‰“å°è¥¿æ–¹å‘½åã€ä¸œæ–¹å‘½å Functionæ¥å£Functionæ¥å£é€‚ç”¨äºè¿™ä¸ªé—®é¢˜ã€‚å®ƒåªæœ‰ä¸€ä¸ªåä¸ºapplyçš„æ–¹æ³•ï¼Œæ–¹æ³•ç­¾åå¦‚ä¸‹ï¼š 1public R apply(T t)&#123; &#125; å®ƒæ¥æ”¶ä¸€ä¸ªæ³›å‹ T çš„å‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ª R çš„å¯¹è±¡ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œä¼ å…¥Personç±»å‹ï¼Œè¿”å›Stringç±»å‹ã€‚ä¸€ä¸ªæ›´åŠ çµæ´»çš„æ‰“å°æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š Person.java 123public String printCuston(Function &lt;Person, String&gt; f) &#123; return f.apply(this);&#125; è¿™å¯çœŸç®€å•ã€‚æ–¹æ³•æ¥æ”¶ä¸€ä¸ªFunctionå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚applyæ–¹æ³•é€šè¿‡ä¸€ä¸ª Lambda è¡¨è¾¾å¼è¿”å›Personå¯¹è±¡çš„ä¿¡æ¯ã€‚ Functionæ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Ÿå¦‚ä¸‹æ˜¯æµ‹è¯•çš„æ ·ä¾‹ä»£ç ã€‚ NameTestNew.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public class NameTestNew &#123; public static void main(String[] args) &#123; System.out.println(\"\\n==== NameTestNew02 ===\"); List&lt;Person&gt; list1 = Person.createShortList(); // Print Custom First Name and e-mail System.out.println(\"===Custom List===\"); for (Person person:list1)&#123; System.out.println( person.printCustom(p -&gt; \"Name: \" + p.getGivenName() + \" EMail: \" + p.getEmail()) ); &#125; // Define Western and Eastern Lambdas Function&lt;Person, String&gt; westernStyle = p -&gt; &#123; return \"\\nName: \" + p.getGivenName() + \" \" + p.getSurName() + \"\\n\" + \"Age: \" + p.getAge() + \" \" + \"Gender: \" + p.getGender() + \"\\n\" + \"EMail: \" + p.getEmail() + \"\\n\" + \"Phone: \" + p.getPhone() + \"\\n\" + \"Address: \" + p.getAddress(); &#125;; Function&lt;Person, String&gt; easternStyle = p -&gt; \"\\nName: \" + p.getSurName() + \" \" + p.getGivenName() + \"\\n\" + \"Age: \" + p.getAge() + \" \" + \"Gender: \" + p.getGender() + \"\\n\" + \"EMail: \" + p.getEmail() + \"\\n\" + \"Phone: \" + p.getPhone() + \"\\n\" + \"Address: \" + p.getAddress(); // Print Western List System.out.println(\"\\n===Western List===\"); for (Person person:list1)&#123; System.out.println( person.printCustom(westernStyle) ); &#125; // Print Eastern List System.out.println(\"\\n===Eastern List===\"); for (Person person:list1)&#123; System.out.println( person.printCustom(easternStyle) ); &#125; &#125;&#125; ç¬¬ä¸€ä¸ªå¾ªç¯åªæ˜¯æ‰“å°å‡ºåå­—å’Œç”µå­é‚®ä»¶åœ°å€ã€‚ä¸è¿‡å¯ä»¥æŠŠä»»ä½•çš„è¡¨è¾¾å¼ä¼ ç»™printCustonæ–¹æ³•ã€‚ä¸œæ–¹å‘½åæ³•å’Œè¥¿æ–¹å‘½åæ³•ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®šä¹‰ï¼Œå¹¶ä¸”ä¿å­˜åœ¨å˜é‡ä¸­ã€‚è¿™äº›å˜é‡æ¥ä¸‹æ¥è¢«ä¼ å…¥æœ€åçš„ä¸¤ä¸ªå¾ªç¯ã€‚å¯ä»¥å¾ˆå®¹æ˜“åœ°å°† Lambdaè¡¨è¾¾å¼åˆå¹¶æˆä¸ºMapï¼Œç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚Lambda è¡¨è¾¾å¼æä¾›äº†æ˜¾è‘—çš„çµæ´»æ€§ã€‚ æ ·ä¾‹è¾“å‡ºä¸‹é¢æ˜¯ç¨‹åºçš„æ ·ä¾‹è¾“å‡ºã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697==== NameTestNew02 ======Custom List===Name: Bob EMail: bob.baker@example.comName: Jane EMail: jane.doe@example.comName: John EMail: john.doe@example.comName: James EMail: james.johnson@example.comName: Joe EMail: joebob.bailey@example.comName: Phil EMail: phil.smith@examp;e.comName: Betty EMail: betty.jones@example.com===Western List===Name: Bob BakerAge: 21 Gender: MALEEMail: bob.baker@example.comPhone: 201-121-4678Address: 44 4th St, Smallville, KS 12333Name: Jane DoeAge: 25 Gender: FEMALEEMail: jane.doe@example.comPhone: 202-123-4678Address: 33 3rd St, Smallville, KS 12333Name: John DoeAge: 25 Gender: MALEEMail: john.doe@example.comPhone: 202-123-4678Address: 33 3rd St, Smallville, KS 12333Name: James JohnsonAge: 45 Gender: MALEEMail: james.johnson@example.comPhone: 333-456-1233Address: 201 2nd St, New York, NY 12111Name: Joe BaileyAge: 67 Gender: MALEEMail: joebob.bailey@example.comPhone: 112-111-1111Address: 111 1st St, Town, CA 11111Name: Phil SmithAge: 55 Gender: MALEEMail: phil.smith@examp;e.comPhone: 222-33-1234Address: 22 2nd St, New Park, CO 222333Name: Betty JonesAge: 85 Gender: FEMALEEMail: betty.jones@example.comPhone: 211-33-1234Address: 22 4th St, New Park, CO 222333===Eastern List===Name: Baker BobAge: 21 Gender: MALEEMail: bob.baker@example.comPhone: 201-121-4678Address: 44 4th St, Smallville, KS 12333Name: Doe JaneAge: 25 Gender: FEMALEEMail: jane.doe@example.comPhone: 202-123-4678Address: 33 3rd St, Smallville, KS 12333Name: Doe JohnAge: 25 Gender: MALEEMail: john.doe@example.comPhone: 202-123-4678Address: 33 3rd St, Smallville, KS 12333Name: Johnson JamesAge: 45 Gender: MALEEMail: james.johnson@example.comPhone: 333-456-1233Address: 201 2nd St, New York, NY 12111Name: Bailey JoeAge: 67 Gender: MALEEMail: joebob.bailey@example.comPhone: 112-111-1111Address: 111 1st St, Town, CA 11111Name: Smith PhilAge: 55 Gender: MALEEMail: phil.smith@examp;e.comPhone: 222-33-1234Address: 22 2nd St, New Park, CO 222333Name: Jones BettyAge: 85 Gender: FEMALEEMail: betty.jones@example.comPhone: 211-33-1234Address: 22 4th St, New Park, CO 222333 èµ„æºä¸‹è½½æœ¬å°èŠ‚ä¸­çš„ NetBeans å·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ° LambdaFunctionExamples.zip Lambda è¡¨è¾¾å¼å’Œé›†åˆä¸ŠèŠ‚ä»‹ç»äº†Functionæ¥å£å’Œç¤ºä¾‹è¯­æ³•ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†çœ‹åˆ° Lambda è¡¨è¾¾å¼å¦‚ä½•æå‡Collectionsç±»ã€‚ Lambda è¡¨è¾¾å¼å’Œé›†åˆåˆ°ç›®å‰ä¸ºæ­¢çš„ä¾‹å­ä¸­ï¼Œé›†åˆç±»å‡ºç°çš„å¾ˆå°‘ã€‚ç„¶è€Œï¼Œç›¸å½“ä¸€éƒ¨åˆ† Lambda è¡¨è¾¾å¼çš„ç‰¹å¾æ”¹å˜äº†æˆ‘ä»¬ä½¿ç”¨é›†åˆç±»çš„æ–¹å¼ã€‚æœ¬èŠ‚ä»‹ç»å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚ ç±»å¢å¼ºå¸æœºã€é£è¡Œå‘˜ã€å…¥ä¼äººå‘˜çš„è¿‡æ»¤æ¡ä»¶è¢«åŒ…è£…è¿›äº†SearchCriteriaç±»ã€‚ SearchCriteria.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.example.lambda;import java.util.HashMap;import java.util.Map;import java.util.function.Predicate;/** * * @author MikeW */public class SearchCriteria &#123; private final Map&lt;String, Predicate&lt;Person&gt;&gt; searchMap = new HashMap&lt;&gt;(); private SearchCriteria() &#123; super(); initSearchMap(); &#125; private void initSearchMap() &#123; Predicate&lt;Person&gt; allDrivers = p -&gt; p.getAge() &gt;= 16; Predicate&lt;Person&gt; allDraftees = p -&gt; p.getAge() &gt;= 18 &amp;&amp; p.getAge() &lt;= 25 &amp;&amp; p.getGender() == Gender.MALE; Predicate&lt;Person&gt; allPilots = p -&gt; p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65; searchMap.put(\"allDrivers\", allDrivers); searchMap.put(\"allDraftees\", allDraftees); searchMap.put(\"allPilots\", allPilots); &#125; public Predicate&lt;Person&gt; getCriteria(String PredicateName) &#123; Predicate&lt;Person&gt; target; target = searchMap.get(PredicateName); if (target == null) &#123; System.out.println(\"Search Criteria not found... \"); System.exit(1); &#125; return target; &#125; public static SearchCriteria getInstance() &#123; return new SearchCriteria(); &#125;&#125; æœ¬ä¾‹çš„ç¼–ç ä¸æ˜¯å¾ˆè§„èŒƒï¼Œä½œä¸ºå‚æ•°çš„PredicateNameåº”è¯¥å†™ä¸ºpredicateNameæ›´ä¸¥è°¨ã€‚ è¿™ä¸ªç±»ä¿å­˜äº†åŸºäºPredicateçš„æœç´¢è¿‡æ»¤æ¡ä»¶ï¼Œä½ å¯ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ å¾ªç¯é¦–å…ˆç™»åœºçš„æ˜¯ä»»ä½•é›†åˆç±»éƒ½å¯ä»¥ä½¿ç”¨çš„forEachæ–¹æ³•ã€‚è¿™é‡Œæ˜¯ä¸€äº›æ‰“å°å‡ºPersonåˆ—è¡¨çš„ä¾‹å­ã€‚ Test01ForEach.java 123456789101112131415161718public class Test01ForEach &#123; public static void main(String[] args) &#123; List&lt;Person&gt; pl = Person.createShortList(); System.out.println(\"\\n=== Western Phone List ===\"); pl.forEach( p -&gt; p.printWesternName() ); System.out.println(\"\\n=== Eastern Phone List ===\"); pl.forEach(Person::printEasternName); System.out.println(\"\\n=== Custom Phone List ===\"); pl.forEach(p -&gt; &#123; System.out.println(p.printCustom(r -&gt; \"Name: \" + r.getGivenName() + \" EMail: \" + r.getEmail())); &#125;); &#125;&#125; ä¾‹ 1 å±•ç¤ºäº†ä¸€ä¸ª Lambda è¡¨è¾¾å¼ï¼Œå®ƒè°ƒç”¨printWesternNameæ–¹æ³•æ‰“å°å‡ºåˆ—è¡¨é‡Œæ¯ä¸ªäººçš„åå­—ã€‚ä¾‹ 2 å±•ç¤ºäº†ä¸€ä¸ª æ–¹æ³•è°ƒç”¨ã€‚å½“å·²ç»å­˜åœ¨å¯¹ç±»å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ—¶ï¼Œè¿™ç§å†™æ³•å¯ä»¥ä»£æ›¿é€šç”¨ Lambda è¡¨è¾¾å¼çš„å†™æ³•ã€‚æœ€åï¼Œä¾‹ 3 å±•ç¤ºäº†printCustomæ–¹æ³•ä¹Ÿå¯ä»¥åœ¨è¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨ã€‚æ³¨æ„ Lambda è¡¨è¾¾å¼åµŒå¥—æ—¶ï¼Œå˜é‡åçš„ç»†å°å·®åˆ«ã€‚ ä½ å¯ä»¥ç”¨è¿™ç§æ–¹å¼éå†ä»»ä½•é›†åˆã€‚åŸºç¡€ç»“æ„ä¸å¢å¼ºå‹forè®­è¯ç±»ä¼¼ã€‚ç„¶è€Œï¼Œä¸€äº›å¢å¼ºå‹æœºåˆ¶èƒ½å¸¦æ¥å¾ˆå¤šå¥½å¤„ã€‚ é“¾å¼è°ƒç”¨ä¸è¿‡æ»¤å™¨é™¤äº†éå†é›†åˆå†…å…ƒç´ ï¼Œä½ è¿˜å¯ä»¥å°†æ–¹æ³•ç»„è£…æˆé“¾å¼ã€‚ç¬¬ä¸€ä¸ªè¦è®²è§£çš„æ–¹æ³•æ˜¯filterï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªPredicateç±»å‹çš„å‚æ•°ã€‚ ä¸‹é¢ä¾‹å­åœ¨è¿‡æ»¤å…ƒç´ åï¼Œéå†åˆ—è¡¨ã€‚ Test02Filter.java 123456789101112131415161718192021public class Test02Filter &#123; public static void main(String[] args) &#123; List&lt;Person&gt; pl = Person.createShortList(); SearchCriteria search = SearchCriteria.getInstance(); System.out.println(\"\\n=== Western Pilot Phone List ===\"); pl.stream().filter(search.getCriteria(\"allPilots\")) .forEach(Person::printWesternName); System.out.println(\"\\n=== Eastern Draftee Phone List ===\"); pl.stream().filter(search.getCriteria(\"allDraftees\")) .forEach(Person::printEasternName); &#125;&#125; ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå¾ªç¯å±•ç¤ºäº†Listå¦‚ä½•åŸºäºè¿‡æ»¤æ¡ä»¶è¢«è¿‡æ»¤ã€‚æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213=== Eastern Draftee Phone List ===Name: Baker BobAge: 21 Gender: MALEEMail: bob.baker@example.comPhone: 201-121-4678Address: 44 4th St, Smallville, KS 12333Name: Doe JohnAge: 25 Gender: MALEEMail: john.doe@example.comPhone: 202-123-4678Address: 33 3rd St, Smallville, KS 12333 å·ç‚¹å„¿æ‡’è¿™äº›ç‰¹å¾è™½ç„¶æœ‰ä»·å€¼ï¼Œä½†æ˜¯åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªå®Œç¾çš„forå¾ªç¯è¯­æ³•çš„æƒ…å†µä¸‹ï¼ŒæŠŠå®ƒä»¬å¼•å…¥é›†åˆç±»çš„æ„ä¹‰ä½•åœ¨ï¼Ÿé€šè¿‡å°†é›†åˆæ“ä½œå½’çº³æˆåº“ï¼ŒJava å¼€å‘è€…å¯ä»¥åœ¨ä»£ç ä¸Šè¿›è¡Œæ›´å¤šçš„ä¼˜åŒ–ã€‚é¦–å…ˆçœ‹ä¸€å¯¹åè¯è§£é‡Šã€‚ æ‡’æƒ°ï¼šåœ¨ç¼–ç¨‹é¢†åŸŸï¼Œæ‡’æƒ°æ„å‘³ç€åªå¤„ç†ä½ éœ€è¦å¤„ç†çš„å¯¹è±¡ã€‚åœ¨å…ˆå‰çš„ä¾‹å­ä¸­ï¼Œæœ€åä¸€ä¸ªå¾ªç¯æ˜¯â€œæ‡’æƒ°â€çš„ï¼Œå› ä¸ºå®ƒåªéå†äº†Listè¢«è¿‡æ»¤å‡ºæ¥çš„ä¸¤ä¸ªPersonå¯¹è±¡ã€‚è¿™æ ·çš„ä»£ç æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºæœ€ååªå¤„ç†äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œï¼ˆè€Œéæ•´ä¸ªåˆ—è¡¨ï¼‰ã€‚ ä¸»åŠ¨æ€§ï¼šå¤„ç†åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„ä»£ç è¢«ç§°ä¸ºâ€œä¸»åŠ¨æ€§å¼ºâ€çš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¢å¼ºå‹forå¾ªç¯éå†æ•´ä¸ªåˆ—è¡¨ï¼Œåªä¸ºå¤„ç† 2 ä¸ªå…ƒç´ ï¼Œè¿™ç§æ–¹å¼è¢«è®¤ä¸ºâ€œä¸»åŠ¨æ€§â€å¾ˆå¼ºã€‚ streamæ–¹æ³•åœ¨å…ˆå‰çš„ä»£ç æ ·ä¾‹ä¸­ï¼Œä½ ä¼šå‘ç°åœ¨å¯¹åˆ—è¡¨è¿›è¡Œè¿‡æ»¤å’Œéå†ä¹‹å‰ï¼Œæˆ‘ä»¬è°ƒç”¨äº†streamæ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶Collectionç±»å‹çš„å‚æ•°ï¼Œè¿”å›java.util.stream.Streamç±»å‹çš„ç»“æœã€‚ä¸€ä¸ªStreamå¯¹è±¡æ„å‘³ç€ä¸€ä¸ªå…ƒç´ åºåˆ—ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢è¿›è¡Œé“¾å¼æ“ä½œã€‚é»˜è®¤åœ°ï¼Œä¸€æ—¦å…ƒç´ è¢«æ¶ˆè´¹äº†ï¼Œä»–ä»¬å°±ä¸å†å¤„äº Stream ä¸­ã€‚æ­¤å¤–ï¼Œéšç€è°ƒç”¨æ–¹æ³•ä¸åŒï¼ŒStreamå¯ä»¥ç”¨åœ¨ä¸²è¡Œï¼ˆé»˜è®¤ï¼‰æˆ–è€…å¹¶è¡Œçš„åœºæ™¯ä¸­ã€‚æœ¬èŠ‚æœ«å°¾å°†ä»‹ç»ä¸€ä¸ªå¹¶è¡Œçš„åœºæ™¯ã€‚ å˜æ›´ä¸è¿ç®—ç»“æœå¦‚åˆšæ‰æ‰€æåˆ°çš„ï¼ŒStreamåœ¨ä½¿ç”¨å®Œæˆåå°±ä¼šè¢«ä¸¢å¼ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡Streamæ¥å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³è¦ä¿å­˜é“¾å¼å¤„ç†åçš„å…ƒç´ å‘¢ï¼Ÿä½ å¯ä»¥å°†å®ƒä»¬å­˜å…¥ä¸€ä¸ªæ–°çš„é›†åˆã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š Test03toList.java 1234567891011121314151617181920public class Test03toList &#123; public static void main(String[] args) &#123; List&lt;Person&gt; pl = Person.createShortList(); SearchCriteria search = SearchCriteria.getInstance(); // Make a new list after filtering. List&lt;Person&gt; pilotList = pl .stream() .filter(search.getCriteria(\"allPilots\")) .collect(Collectors.toList()); System.out.println(\"\\n=== Western Pilot Phone List ===\"); pilotList.forEach(Person::printWesternName); &#125;&#125; collectæ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯Collectorç±»ã€‚Collectorç±»ç”¨äºä»å¤„ç†æµçš„ç»“æœä¸­ç”Ÿæˆä¸€ä¸ªListæˆ–è€…Setã€‚ä¸Šä¾‹ä»‹ç»äº†å¦‚ä½•å°†åˆ—è¡¨è¿‡æ»¤åçš„ç»“æœå­˜æˆListã€‚ ä½¿ç”¨mapè¿›è¡Œè®¡ç®—mapæ–¹æ³•é€šå¸¸å’Œfilteræ­é…ä½¿ç”¨ã€‚è¿™ä¸ªæ–¹æ³•å»é™¤ç±»é‡Œé¢çš„æŸä¸ªå±æ€§ï¼Œç„¶åå¯¹å®ƒè¿›è¡Œæ“ä½œã€‚å¦‚ä¸‹ä»£ç åŸºäºå¹´é¾„å­—æ®µè¿›è¡Œäº†ä¸€ç³»åˆ—è®¡ç®—ã€‚ Test04Map.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445public class Test04Map &#123; public static void main(String[] args) &#123; List&lt;Person&gt; pl = Person.createShortList(); SearchCriteria search = SearchCriteria.getInstance(); // Calc average age of pilots old style System.out.println(\"== Calc Old Style ==\"); int sum = 0; int count = 0; for (Person p:pl)&#123; if (p.getAge() &gt;= 23 &amp;&amp; p.getAge() &lt;= 65 )&#123; sum = sum + p.getAge(); count++; &#125; &#125; long average = sum / count; System.out.println(\"Total Ages: \" + sum); System.out.println(\"Average Age: \" + average); // Get sum of ages System.out.println(\"\\n== Calc New Style ==\"); long totalAge = pl .stream() .filter(search.getCriteria(\"allPilots\")) .mapToInt(p -&gt; p.getAge()) .sum(); // Get average of ages OptionalDouble averageAge = pl .parallelStream() .filter(search.getCriteria(\"allPilots\")) .mapToDouble(p -&gt; p.getAge()) .average(); System.out.println(\"Total Ages: \" + totalAge); System.out.println(\"Average Age: \" + averageAge.getAsDouble()); &#125; &#125; è¾“å‡ºå¦‚ä¸‹ï¼š 1234567== Calc Old Style ==Total Ages: 150Average Age: 37== Calc New Style ==Total Ages: 150Average Age: 37.5 è¿™æ®µä»£ç è®¡ç®—åˆ—è¡¨ä¸­æ‰€æœ‰é£è¡Œå‘˜çš„å¹³å‡å¹´é¾„ã€‚ç¬¬ä¸€ä¸ªå¾ªç¯å±•ç¤ºäº†è€å¼ç”¨forå¾ªç¯çš„å†™æ³•ã€‚ç¬¬äºŒä¸ªå¾ªç¯ä½¿ç”¨äº†mapæ–¹æ³•è·å–ä¸²æµä¸­çš„æ¯ä¸ªäººçš„å¹´é¾„ã€‚æ³¨æ„totalAgeæ˜¯ä¸€ä¸ªlongç±»å‹å¯¹è±¡ã€‚mapæ–¹æ³•è¿”å›ä¸€ä¸ªIntStreamå¯¹è±¡ï¼Œå¯ä»¥å¯¹å…¶è°ƒç”¨sumæ–¹æ³•ï¼Œè¿™ä¼šè¿”å›ä¸€ä¸ªlongå€¼ã€‚ æ³¨æ„ï¼š ç¬¬äºŒæ¬¡è®¡ç®—å¹³å‡å¹´é¾„æ—¶ï¼Œå†å¯¹æ‰€æœ‰å€¼æ±‚å’Œæ˜¯å¤šä½™çš„ã€‚ç„¶è€Œï¼Œä¸Šä¾‹ä¸­è¿™æ ·å†™æ˜¯ä¸ºäº†å±•ç¤ºsumå‡½æ•°çš„è°ƒç”¨æ–¹æ³•ã€‚ æœ€åä¸€ä¸ªå¾ªç¯åŸºäºä¸²æµè®¡ç®—å¹³å‡å¹´é¾„ã€‚æ³¨æ„parallelStreamæ–¹æ³•ï¼Œå®ƒæ˜¯ Java 8 ä¸­æµå¼è®¡ç®—çš„å¹¶è¡Œç‰ˆæœ¬ï¼Œè¿”å›ç»“æœä¹Ÿä¸æ˜¯ç®€å•çš„doubleï¼Œè€Œæ˜¯OptionalDoubleã€‚ parallelStreamæä¾›äº†ä¸€ç§å¹¶å‘å¤„ç†é›†åˆå…ƒç´ çš„æ–¹æ³•ï¼Œä»¥ä¸Šæ–‡çš„åˆ—è¡¨æ±‚å¹³å‡å€¼ä¸ºä¾‹ï¼Œå¦‚æœä¸€å…±æœ‰ 100 ä¸ªå…ƒç´ ï¼ŒparallelStreamä¼šå°†ä»»åŠ¡åˆ†ä¸º n ä»½ï¼ˆn æ˜¯çº¿ç¨‹æ± çš„å¤§å°ï¼Œé»˜è®¤ä¸º CPU æ ¸æ•°ï¼‰ï¼Œæ¯ä»½ä»»åŠ¡äº¤ç”±å•ç‹¬ä¸€ä¸ªçº¿ç¨‹å¤„ç†ï¼Œæœ€ç»ˆå†æ±‡æ€»è¿™äº›ä»»åŠ¡çš„ç»“æœï¼Œå¾—å‡ºå¹³å‡å€¼ èµ„æºä¸‹è½½æœ¬å°èŠ‚ä¸­çš„NetBeanså·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ° LambdaCollectionExamples.zip æ€»ç»“åœ¨æœ¬ç¯‡æŒ‡å—ä¸­ï¼Œä½ å­¦ä¼šäº†ä½¿ç”¨ä»¥ä¸‹æŠ€èƒ½ï¼š Java åŒ¿åå†…éƒ¨ç±» ä½¿ç”¨ Java SE 8 çš„ Lambda è¡¨è¾¾å¼ä»£æ›¿åŒ¿åå†…éƒ¨ç±» Lambda è¡¨è¾¾å¼çš„è¯­æ³• é€šè¿‡Predicateæ¥å£åœ¨åˆ—è¡¨ä¸­æŸ¥æ‰¾ é€šè¿‡Functionæ¥å£å¤„ç†å¯¹è±¡ï¼Œå¹¶å¾—åˆ°ä¸€ä¸ªæ–°ç±»å‹çš„å¯¹è±¡ Java SE 8 ä¸­æ–°å¢çš„æ”¯æŒ Lambda è¡¨è¾¾å¼çš„é›†åˆç‰¹æ€§ æ›´å¤šèµ„æºå¦‚æœä½ æƒ³è¦äº†è§£æ›´å¤šå…³äº Lambda è¡¨è¾¾å¼å’Œ Java SE 8 çš„ä¿¡æ¯ï¼Œå‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š Java 8 Project Lambda State of the Lambda State of the Lambda Collections Jump-Starting Lambda JavaOne 2012(You Tube) è‹¥æƒ³è¦å­¦ä¹ æ›´å¤šå…³äº Java çš„å†…å®¹ï¼Œè¯·ç‚¹å‡»Oracle Learning Library è‘—è€… è¯¾ç¨‹ç»„é•¿ï¼šMichael Williams QAï¼šJuan Quesada Nunez ç¿»è¯‘ï¼šæç£Š","tags":[{"name":"Java","slug":"Java","permalink":"https://lilei.pro/tags/Java/"}]},{"title":"é¦™å¸…çš„åŒ—å¤§é‡‘èå­¦è¯¾ï¼ˆäºŒï¼‰é‡‘èæœºæ„","date":"2018-09-23T00:37:54.000Z","path":"2018/09/23/finance-Xiangshuai-week02/","text":"è´§å¸ä¸ä¿¡ç”¨é“¶è¡Œä½“ç³»åœ¨æ•´ä¸ªç¤¾ä¼šç»æµä¸­ï¼Œå¤„äºæ¢çº½åœ°ä½ã€‚å›½å®¶é€šè¿‡é“¶è¡Œä½“ç³»è¿›è¡Œä¿¡ç”¨åˆ›é€ ï¼Œè°ƒæ§ç»æµï¼Œè¿™æ˜¯ç°ä»£ç»æµè¿è¡Œçš„ä¸€ä¸ªæœ€é‡è¦ç‰¹å¾ã€‚ é“¶è¡Œè´§å¸ä¿¡ç”¨æ‰©å¼ æœºåˆ¶ è´§å¸çš„èƒŒåæ˜¯å›½å®¶ä¿¡ç”¨è´§å¸çš„çœŸåå«åšâ€œæ³•å®šè´§å¸â€ï¼Œä¹Ÿå°±æ˜¯å›½å®¶èµ‹äºˆæŸä¸ªé“¶è¡Œï¼ˆæ¯”å¦‚ä¸­å¤®é“¶è¡Œï¼‰çš„ä¸€ç§ç‰¹è®¸æƒåŠ›è€Œå‘è¡Œçš„ï¼Œå®ƒèƒŒåçš„å…³é”®æ˜¯å›½å®¶ä¿¡ç”¨ã€‚å¸ƒé›·é¡¿æ£®æ—ä¼šè®®ä¸Šç¡®ç«‹äº†ç¾å…ƒåœ¨å›½é™…è´§å¸ä½“ç³»ä¸­â€œé”šâ€çš„åœ°ä½ï¼Œç¾å…ƒæˆä¸ºäº†å›½é™…è®¡ä»·ç»“ç®—çš„å‚¨å¤‡è´§å¸ï¼Œå˜æˆäº†å›½é™…è´§å¸ä½“ç³»çš„ä¸­å¿ƒã€‚ç°ä»£çš„è´§å¸æ˜¯ä¿¡ç”¨è´§å¸ï¼Œè´§å¸ä»·å€¼çš„æµ®åŠ¨å®Œå…¨å–å†³äºä¸€ä¸ªå›½å®¶çš„å®åŠ›å’Œå…¶ä»–å›½å®¶å¯¹äºè¿™ä¸ªå›½å®¶çš„ä¿¡å¿ƒã€‚ æ‰€ä»¥è¯´æ²¡æœ‰å›½å®¶ä¿¡ç”¨åŠ æŒçš„è´§å¸ï¼Œå³ä½¿å¯ä»¥å®Œæˆè®¡ä»·ã€å‚¨è—ã€äº¤æ¢çš„åŠŸèƒ½ï¼Œå®ƒä¹Ÿä¸èƒ½å¤Ÿæˆä¸ºé€šç”¨çš„è´§å¸â€”â€”æ¯”ç‰¹å¸æœ€æ ¹æœ¬çš„ç¼ºé™·æ¥æºäºæ­¤ï¼Œåƒæ¯”ç‰¹å¸è¿™æ ·å»ä¸­å¿ƒåŒ–çš„è´§å¸ï¼Œè¦å–ä»£å„å›½å¤®è¡Œå‘è¡Œçš„æ³•å®šè´§å¸ï¼Œè¿˜æ˜¯è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ã€‚ å­˜æ¬¾å‡†å¤‡é‡‘ç‡å’Œâ€œé™å‡†â€å‰é¢è®²åˆ°é“¶è¡Œä¸å›½å®¶å¼ºå¼ºè”åˆï¼Œå…±åŒé“¸é€ äº†å½“ä»£ä¿¡ç”¨ç¤¾ä¼šã€‚å›½å®¶é€šè¿‡é“¶è¡Œä½“ç³»ï¼Œè°ƒæ§æ•´ä¸ªç¤¾ä¼šçš„ä¿¡ç”¨è§„æ¨¡å’Œç»æµå†·çƒ­ã€‚æˆ‘ä»¬ç»å¸¸åœ¨ç”µè§†æ–°é—»é‡Œå¬åˆ°â€œé™æ¯â€ã€â€œé™å‡†â€è¿™æ ·çš„è¯æ±‡ï¼Œâ€œæ¯â€æŒ‡çš„æ˜¯åŸºç¡€åˆ©ç‡ï¼Œâ€œå‡†â€æŒ‡çš„æ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡ã€‚ ä»€ä¹ˆæ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡å‚¨æˆ·è¦æŠŠé’±å­˜åˆ°é“¶è¡Œé‡Œï¼Œé“¶è¡Œå†æ”¾è´·å‡ºå»ï¼Œç„¶åå½¢æˆä¼ä¸šã€ä¸ªäººçš„å„ç§è´·æ¬¾ï¼Œæ”¯æŒæ¶ˆè´¹ç”Ÿäº§ã€‚ä½†æ˜¯ï¼Œæ¯å¤©éƒ½æœ‰ä¸åŒçš„å‚¨æˆ·æœ‰æç°çš„è¦æ±‚ï¼Œæ‰€ä»¥é“¶è¡Œå¿…é¡»ç•™å­˜ä¸€å°éƒ¨åˆ†é’±å‡ºæ¥åº”ä»˜å‚¨æˆ·æç°çš„éœ€æ±‚ï¼Œè¿™éƒ¨åˆ†é’±å°±å«åšå­˜æ¬¾å‡†å¤‡é‡‘ï¼Œè¿™ä¸ªç•™å­˜çš„æ¯”ä¾‹å°±å«å­˜æ¬¾å‡†å¤‡é‡‘ç‡ã€‚ å­˜æ¬¾å‡†å¤‡é‡‘ç‡å¦‚ä½•ç”Ÿæ•ˆçš„å‘¢ï¼Ÿå‡å¦‚å°æ˜æœ‰ 100 å—é’±ï¼Œä»–å¯ä»¥æŠŠè¿™ 100 å—é’±å­˜åˆ°é“¶è¡Œé‡Œï¼Œå½“æ—¶çš„å­˜æ¬¾å‡†å¤‡é‡‘ç‡æ˜¯ 10%ï¼Œæ„å‘³ç€é“¶è¡Œå¿…é¡»é¢„ç•™å‡º 100 å—é’±çš„ 10%ï¼Œä¹Ÿå°±æ˜¯ 10 å—é’±çš„ç°é‡‘ï¼Œæ¥é¢„å¤‡åº”ä»˜å°æ˜çš„æç°éœ€æ±‚ã€‚å»æ‰è¿™ 10% åï¼Œé“¶è¡Œå¯ä»¥æŠŠå‰©ä¸‹çš„ 90 å—é’±é€šè¿‡è´·æ¬¾çš„æ–¹å¼å‘æ”¾ç»™å°çº¢ã€‚é‚£ä¹ˆå¸‚é¢ä¸Šä¸€å…±æœ‰å¤šå°‘è´§å¸æµé€šçš„ï¼Œæ˜¯ 100ï¼ˆå°æ˜ï¼‰+ 90ï¼ˆå°çº¢ï¼‰= 190 å…ƒã€‚å°çº¢åŒæ ·å¯ä»¥é€‰æ‹©æŠŠè¿™ 90 å—é’±å­˜è¿›é“¶è¡Œï¼Œé“¶è¡Œåˆ™åœ¨ä¿ç•™äº† 90 * 10% = 9 å…ƒçš„å­˜æ¬¾å‡†å¤‡é‡‘åï¼Œå°†å‰©ä½™ 81 å…ƒå‘æ”¾å‡ºå»â€¦â€¦æœ€ç»ˆè®¡ç®—ä¸‹æ¥ï¼Œå°æ˜æŒæœ‰çš„ 100 å…ƒé’±ï¼Œç»è¿‡å±‚å±‚è½¬åŒ–ï¼ŒæµåŠ¨åˆ°ç¤¾ä¼šä¸­çš„é’±å¯ä»¥è¾¾åˆ° 1000 å…ƒï¼Œæ•´æ•´æ‰©å¼ äº† 10 å€ã€‚è¿™å°±æ˜¯å­˜æ¬¾å‡†å¤‡é‡‘çš„å¨åŠ›ã€‚ å¹³æ—¶æ–°é—»é‡Œæ€»æ˜¯å¬åˆ°ï¼ŒåŸºç¡€è´§å¸ï¼ˆM0ï¼‰ï¼Œå¹¿ä¹‰è´§å¸ï¼ˆM2ï¼‰è¿™ç§è¯ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ100 å…ƒå°±æ˜¯åŸºç¡€è´§å¸ï¼Œ1000 å…ƒå°±æ˜¯å¹¿ä¹‰è´§å¸ï¼Œå¤®è¡Œå‘è¡Œçš„è¿™ä¸ªè´§å¸å°±å«åŸºç¡€è´§å¸ï¼Œåœ¨ 10% çš„å­˜æ¬¾å‡†å¤‡é‡‘ç‡ä¸‹ï¼Œé€šè¿‡å•†ä¸šé“¶è¡Œä½“ç³»çš„å¾ªç¯ä¹‹åï¼Œç¤¾ä¼šä¸Šçš„è´§å¸ä¾›åº”é‡æ‰©å¼ äº†æ•´æ•´ 10 å€ã€‚è¿™ä¸ªå€æ•°å…¶å®ä½ ç®—ä¸€ä¸‹ï¼Œå°±æ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡çš„å€’æ•° 10ï¼Œæ‰€ä»¥ä¹Ÿå«è´§å¸ä¹˜æ•°ã€‚ å­˜æ¬¾å‡†å¤‡é‡‘åˆ¶åº¦æ˜¯å›½å®¶å®è§‚ä¸ŠæŠŠæ§è´§å¸æ‰©å¼ çš„æ‰‹æ®µï¼Œé“¶è¡Œæ”¾è´·çš„æ„æ„¿ï¼Œæˆ‘ä»¬ä¸ªäººã€ä¼ä¸šçš„ç°é‡‘æŒæœ‰é‡ï¼Œéƒ½ä¼šå½±å“åˆ°è´§å¸æ‰©å¼ çš„æœºåˆ¶ã€‚ åŸºå‡†åˆ©ç‡å’Œâ€œåŠ æ¯â€ç°ä»£ç»æµè¿è¡Œæœ€é‡è¦çš„é€»è¾‘ï¼Œå°±æ˜¯å›½å®¶é€šè¿‡é“¶è¡Œä½“ç³»ï¼Œæ¥è°ƒæ§æ•´ä¸ªç¤¾ä¼šçš„ä¿¡ç”¨è§„æ¨¡å’Œç»æµå†·çƒ­ã€‚å…¶ä¸­ï¼Œå­˜æ¬¾å‡†å¤‡é‡‘åˆ¶åº¦ å’Œ åŸºå‡†åˆ©ç‡ æ˜¯ä¸¤ä¸ªæœ€é‡è¦çš„è°ƒæ§æ‰‹æ®µã€‚å®ƒä»¬ä¸ºä»€ä¹ˆé‡è¦å‘¢ï¼Ÿå­˜æ¬¾å‡†å¤‡é‡‘åˆ¶åº¦ä¸»è¦æ˜¯æ§åˆ¶äº†èµ„é‡‘çš„é‡ï¼Œè€ŒåŸºå‡†åˆ©ç‡è°ƒæ•´çš„æ˜¯èµ„é‡‘çš„ä»·æ ¼ã€‚ ä»€ä¹ˆæ˜¯åŸºå‡†åˆ©ç‡åŸºå‡†åˆ©ç‡å°±æ˜¯ä¸€ä¸ªå¸‚åœºä¸Šåˆ©ç‡æ°´å¹³çš„é£å‘æ ‡ã€‚å„ä¸ªé‡‘èæœºæ„ï¼Œéƒ½æ ¹æ®è¿™ä¸ªæ ‡å‡†æ¥ç¡®å®šè‡ªå·±çš„è´·æ¬¾å’Œå­˜æ¬¾åˆ©ç‡ã€‚æ”¿åºœå¦‚æœæ‹…å¿ƒç»æµè¿‡çƒ­çš„è¯ï¼Œå°±ä¼šåŠ æ¯ï¼Œä¹Ÿå°±æ˜¯æé«˜åˆ©ç‡è¿›è¡Œæ”¶ç¼©ã€‚å¦‚æœæƒ³è¦åˆºæ¿€ç»æµï¼Œå°±ä¼šé‡‡å–é™æ¯çš„æªæ–½ã€‚ åŠ æ¯å’Œé™æ¯çš„å°ºåº¦å…¶å®éå¸¸éš¾æŠŠæ¡ï¼Œè¿‡çŒ›çš„åŠ æ¯å¯èƒ½ä¼šå¯¼è‡´ç»æµçš„çªç„¶å´©ç›˜ï¼Œè€Œè¿‡åº¦çš„é™æ¯å¯èƒ½ä¼šå¯¼è‡´ç»æµæ³¡æ²«ã€‚ å­¦é‡‘èä¸ºä»€ä¹ˆè¦å…ˆäº†è§£å®è§‚èƒŒæ™¯ ä¸–ç•Œä¸Šä»æ¥å°±ä¸å­˜åœ¨ç‹¬ç«‹çš„å¾®è§‚é‡‘èç°è±¡ï¼Œå®ƒçš„èƒŒåä¸€å®šæœ‰æŸç§å®è§‚å±‚é¢çš„é€»è¾‘æˆ–è€…æ¨åŠ¨åŠ›ã€‚ æˆ‘ä»¬ä¸­å›½å¸‚åœºæ˜¯ä¸€ä¸ªå¼ºæ”¿åºœæŒ‡å¯¼ä¸‹çš„é€æ­¥å¼€æ”¾çš„é‡‘èå¸‚åœºï¼Œæ‰€ä»¥æ”¿åºœåœ¨è¿™ä¸ªå¸‚åœºçš„å½±å“åŠ›æ˜¯å¾ˆæ·±çš„ã€‚ ä»å®è§‚è§†è§’æ¥ç†è§£å¾®è§‚é‡‘èç°è±¡ï¼Œæœ€åæ‰èƒ½åšå‡ºé€‚åˆè‡ªå·±çš„é‡‘èå†³ç­–ã€‚ å­¦ä¹ é‡‘èçš„ä¸‰ä¸ªé˜¶æ®µ æ¦‚å¿µã€æœ¯è¯­é€šå…³ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ ä¼šæ¥è§¦åˆ°å¤§é‡çš„é‡‘èæœ¯è¯­ï¼Œç„¶åç†è§£è¿™äº›è¯è¯­â€”â€”é™å‡†ã€é™æ¯ã€å½±å­é“¶è¡Œã€IPOã€PEã€VCï¼Œä½ å¾—æŠŠæ¡è¿™äº›è¯çš„æ¦‚å¿µï¼Œç„¶åå»ºç«‹ä¸€ä¸ªè‡ªå·±å¯¹é‡‘èå¸‚åœºçš„ä½“æ„Ÿï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚ æ¡†æ¶é€šå…³ã€‚è¿™å°±æ˜¯è¯´ï¼Œè¦æ±‚ä½ å»ºç«‹ä¸€ä¸ªé‡‘èæ€è€ƒçš„æ¡†æ¶ã€‚æˆ‘ä»¬ç°åœ¨é¢ä¸´çš„æ˜¯ä¸€ä¸ªä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œå¸‚åœºä¸Šå…¶å®é”™è¯¯çš„ä¿¡æ¯æ˜¯å¾ˆå¤šçš„ï¼Œæ¯”å¦‚è¯´ä½ ç»å¸¸ä¼šå¬åˆ°ä»€ä¹ˆâ€œè´§å¸è¶…å‘â€ã€â€œè´§å¸æˆ˜äº‰â€è¿™äº›è¯è¯­ï¼Œè¿™é‡Œé¢æœ‰å¾ˆå¤šçš„é€»è¾‘ç¡¬ä¼¤ã€‚åœ¨æ¦‚å¿µé€šå…³çš„åŸºç¡€ä¸Šï¼Œä½ è¦å­¦ç€å»ºç«‹ä¸€ä¸ªè‡ªå·±çš„é‡‘èæ€ç»´çš„æ¡†æ¶ï¼Œè¾¨åˆ«è¿™äº›ä¿¡æ¯ã€‚ å®æ“é€šå…³ï¼Œè¿™å°±æ˜¯è¦æ±‚ä½ è¿ç”¨é‡‘èæ¡†æ¶æ¥è§£å†³é—®é¢˜ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä¼šç»™ä½ ä¸€äº›æ¨¡æ‹Ÿçš„å®è§‚ç¯å¢ƒï¼Œè®©ä½ ç½®èº«åœ¨ä¸€ä¸ªå…·ä½“çš„åœºæ™¯é‡Œé¢ï¼Œè¿™ä¸ªæ—¶å€™ä½ è¦å¼€å§‹è¿ç”¨è‡ªå·±åœ¨å‰é¢å­¦åˆ°çš„å¾ˆå¤šçŸ¥è¯†è¿›è¡Œåˆ¤æ–­ï¼Œè¿›è¡Œæ“ä½œã€æŠ•èµ„ã€å•†ä¸šå†³ç­–ã€é‡‘èè¿ä½œç­‰ç­‰ã€‚ é“¶è¡Œä¸ç†è´¢é“¶è¡Œèººç€èµšé’±çš„ç§˜å¯† 2017å¹´å…¨çƒæœ€èµšé’±çš„5å®¶å…¬å¸ï¼Œä¸­å›½å äº†å…¶ä¸­4å®¶ï¼Œåˆ†åˆ«æ˜¯å·¥å†œä¸­å»ºå››å¤§è¡Œã€‚å»å¹´æ‹›è¡Œå¹³å‡è–ªæ°´46ä¸‡ï¼Œä¸Šæµ·é“¶è¡Œ45ä¸‡ã€‚ ä»2003å¹´åˆ°2012å¹´è¿™åå¹´ï¼Œè¢«ç§°ä¸ºâ€œä¸­å›½é“¶è¡Œä¸šçš„é»„é‡‘åå¹´â€ã€‚ é“¶è¡Œåˆ©æ¶¦æ¥æº 3/4ï¼Œå­˜è´·å·® 1/4ï¼Œé“¶è¡ŒæŠ•èµ„ï¼Œé€šé“è´¹ç”¨ é“¶è¡Œè§£å†³äº†èµ„é‡‘åŒ¹é…ä¸Šçš„è§„æ¨¡ã€æœŸé™å’Œé£é™©é—®é¢˜ï¼Œæ‰€ä»¥å®ƒä¼šäº§ç”Ÿå¤§é‡æ”¶ç›Šã€‚ ä¸ºä»€ä¹ˆåœ¨ä¸­å›½ä¼šå‘ç”Ÿâ€œé»„é‡‘åå¹´â€ï¼Ÿ é‡‘èå‡†å…¥é—¨æ§›é«˜ï¼Œç‰Œç…§æ§åˆ¶ä¸¥æ ¼ï¼Œè€Œä¸”å›½å®¶åœ¨2000å¹´ä»¥åå¯¹å­˜æ¬¾åˆ©ç‡å®è¡Œä¸¥æ ¼ç®¡åˆ¶ï¼Œåœ¨2012å¹´åˆ©ç‡å¸‚åœºåŒ–ä¹‹å‰ï¼Œåˆ©ç‡ä¸€ç›´ç»´æŒåœ¨3%å·¦å³ å›½å®¶ç»æµé«˜é€Ÿå¢é•¿çš„åå¹´ï¼ŒæŠ•èµ„æœºä¼šå¤šã€åˆ©æ¶¦é«˜ï¼Œäº§ç”Ÿå¤§é‡çš„è´·æ¬¾éœ€æ±‚ é“¶è¡Œä¸šè´«å¯Œåˆ†åŒ–çš„æ–°ä¸šæ€ç”±äºå‡†å…¥é—¨æ§›é™ä½ï¼ˆé“¶è¡Œä¸ªæ•°ä»2000å¹´çš„40å®¶å‘å±•åˆ°4000å®¶ï¼‰ã€åˆ©ç‡å¸‚åœºåŒ–ï¼Œåœ¨é©¬å¤ªæ•ˆåº”ä¸‹ï¼Œé“¶è¡Œä¸šä¸¤æåˆ†åŒ–ï¼Œå››å¤§è¡Œä¾æ—§æ˜¯å·¨å¤´ï¼Œè‚¡ä»½åˆ¶é“¶è¡Œå„è¾Ÿè¹Šå¾„ï¼ŒåŸå•†è¡ŒçŠ¶æ€æ¬ ä½³ã€‚æ‰€æœ‰é“¶è¡Œéƒ½èµšé’±çš„å¥½æ—¥å­è¿‡å»äº†ã€‚ è´§å¸åŸºé‡‘å’Œé“¶è¡Œé“¶è¡Œé—´è´§å¸å¸‚åœºé“¶è¡Œé—´è´§å¸å¸‚åœºï¼šé“¶è¡Œä¼šæœ‰èµ„é‡‘çŸ­ç¼ºå’Œç›ˆä½™çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¼šäº’ç›¸å€Ÿé’±ï¼Œç§°ä¸ºé“¶è¡Œé—´çš„è´§å¸æ‹†å€Ÿï¼Œå½¢æˆé“¶è¡Œé—´å¸‚åœºã€‚å®ƒæ˜¯ä¸€ä¸ªå¤§é¢çš„ã€çŸ­æœŸçš„èµ„é‡‘æ‹†å€Ÿå¸‚åœºã€‚ è´§å¸åŸºé‡‘ å°±æ˜¯ç¾å›½70å¹´ä»£åˆ©ç‡ç®¡åˆ¶ä¸‹çš„é‡‘èåˆ›æ–°ã€æŠ•èµ„é“¶è¡Œé€šè¿‡å‹Ÿé›†èµ„é‡‘ã€æŠ•å…¥é“¶è¡Œé—´è´§å¸å¸‚åœºæ¥è·å–åˆ©æ¶¦ã€‚è´§å¸åŸºé‡‘çš„å‡ºç°æ˜¯ç¾å›½é‡‘èè‡ªç”±åŒ–çš„ä¸€ä¸ªæ ‡å¿—æ€§äº‹ä»¶ã€‚ å¯¹è€ç™¾å§“æ¥è¯´ï¼Œè´§å¸åŸºé‡‘æä¾›äº†ä¸€ä¸ªåŠ å…¥é«˜æ”¶ç›Šçš„é“¶è¡Œé—´è´§å¸å¸‚åœºçš„é€”å¾„ï¼Œè®©ä¸€å°éƒ¨åˆ†åˆ©æ¶¦ä»é“¶è¡Œæµå›è€ç™¾å§“æ‰‹ä¸­ã€‚å¯¹é“¶è¡Œæ¥è¯´ï¼Œè´§å¸åŸºé‡‘ä¸ºå…¶æ•²å“äº†è­¦é’Ÿï¼Œä¿ƒä½¿é“¶è¡Œæ¨å‡ºæ›´å¤šçš„è´§å¸åŸºé‡‘äº§å“ã€‚ è´§å¸åŸºé‡‘æ”¶ç›Šç‡è´§å¸åŸºé‡‘åˆ©ç‡çš„ä¸Šä¸‹æµ®åŠ¨ï¼Œä¸»è¦æ˜¯è·Ÿéšé“¶è¡Œé—´å¸‚åœºæ³¢åŠ¨ã€‚å¸‚é¢ä¸Šçš„é’±è¶Šç´§å¼ ï¼ˆé’±è’ï¼‰ï¼Œè´§å¸å¸‚åœºè¶Šç«çƒ­ï¼Œè´§å¸åŸºé‡‘æ”¶ç›Šç‡è¶Šé«˜ã€‚åä¹‹ï¼Œå¸‚é¢ä¸Šé’±è¶Šå¤šï¼Œè´§å¸åŸºé‡‘åˆ©ç‡è¶Šä½ã€‚ é“¶è¡Œéä¿æœ¬ç†è´¢äº§å“å½±å­é“¶è¡Œé“¶è¡Œæ”¶åˆ°ä¸¥æ ¼çš„ç›‘ç®¡ï¼Œå®ƒæœ‰ç»•å¼€ç›‘ç®¡çš„å†²åŠ¨ã€‚åœ¨ä¸­å›½çš„é“¶è¡Œé‡‘èä½“ç³»ä¸­ï¼Œé“¶è¡Œå æ®ç€ç»å¯¹ä¸»å¯¼åœ°ä½ï¼Œå› ä¸ºåªæœ‰é“¶è¡Œèƒ½å¸æ”¶å­˜æ¬¾ï¼Œå‹Ÿèµ„ä¹Ÿæ¯”å…¶ä»–æœºæ„å®¹æ˜“å¾—å¤šã€‚ä¸­å›½240ä¸‡äº¿çš„é‡‘èæ€»èµ„äº§é‡Œé¢ï¼Œé“¶è¡Œå äº†90%ä»¥ä¸Šã€‚ é“¶è¡Œå—åˆ°ç›‘ç®¡å¤šï¼Œå‹Ÿèµ„èƒ½åŠ›å¼ºã€‚ å…¶ä»–é‡‘èæœºæ„é’±å°‘ï¼Œå—åˆ°ç›‘ç®¡å®½æ¾ã€‚ ä¿¡æ‰˜ã€åŸºé‡‘è¿™äº›æœºæ„é€šè¿‡é“¶è¡Œå‹Ÿé›†èµ„é‡‘ï¼ŒæŠŠè¿™äº›é’±æŠ•åˆ°å½“æ—¶åˆ©æ¶¦æœ€é«˜çš„è¡Œä¸šå’Œå¸‚åœºä¸­å»ï¼Œç»•å¼€ç›‘ç®¡ï¼Œå¤§å®¶ä¸€èµ·èµšé’±ï¼Œè¿™äº›ä¸šåŠ¡å°±æ˜¯å½±å­é“¶è¡Œã€‚æœ€å…¸å‹çš„å°±æ˜¯é“¶è¡Œå’Œä¿¡æ‰˜è”æ‰‹çš„â€œé“¶ä¿¡åˆä½œâ€ä¸šåŠ¡ï¼Œ2010å¹´çš„æˆ¿åœ°äº§å¸‚åœºï¼Œ2014å¹´çš„è‚¡ç¥¨è¯åˆ¸å¸‚åœºï¼Œéƒ½æœ‰é“¶è¡Œå’Œä¿¡æ‰˜ã€åˆ¸å•†åˆä½œçš„å› ç´ ã€‚ ä¸­å›½çš„å½±å­é“¶è¡Œå°±æ˜¯ä¸€ä¸ªé‡‘èæœºæ„å’Œé‡‘èç›‘ç®¡ä¹‹é—´çŒ«æ‰è€é¼ çš„æ¸¸æˆã€‚ åœ¨è¿™äº›ä¸šåŠ¡ä¸­ï¼Œé“¶è¡Œå……å½“é€šé“ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®å¤±è´¥ï¼Œé“¶è¡Œä¸è´Ÿæœ‰ä¿æœ¬è´£ä»»ã€‚ åˆ¤åˆ«éä¿æœ¬ç†è´¢äº§å“æ˜¯å¦é è°±çš„å››ä¸ªåŸºæœ¬åŸåˆ™ åœ¨äº§å“è¯´æ˜ä¹¦ä¸Šè¦ç‰¹åˆ«æ³¨æ„äº§å“çš„æŠ•å‘ï¼Œå¦‚æœå®ƒå·ç½‘çš„æ˜¯ç°é‡‘è´·ã€å°é¢è´·ã€æ¶ˆè´¹è´·è¿™ç±»çš„äº§å“ï¼Œåœ¨å½“å‰çš„å¤§èƒŒæ™¯ä¸‹è¦éå¸¸è°¨æ… å¦‚æœæ˜¯é“¶è¡Œä»£é”€ï¼Œæ„å‘³ç€é“¶è¡Œå……å½“çš„åªæ˜¯ä¸­é—´äººè§’è‰²ï¼Œä½ ä¸ä¼šçŸ¥é“äº§å“æœ€åæŠ•åˆ°å“ªé‡Œï¼Œä¿¡æ¯ä¸å¯¹ç§°å¤ªå¤§ï¼Œéš¾ä»¥æŠŠæ¡ï¼Œä¸å»ºè®®æŠ•èµ„ æ³¨æ„å‹Ÿèµ„æ–¹ä¿¡æ¯ï¼Œä¸è¦è¢«åå¤´å”¬åˆ°ï¼Œè¦å¯¹äº§å“æœ¬èº«åšä¸€äº›ç ”ç©¶å’Œäº†è§£ å¦‚æœåˆ©ç‡è¿‡é«˜å°±è¦å°å¿ƒï¼Œä½†æ˜¯æ€æ ·åˆ¤æ–­åˆ©ç‡è¿‡é«˜ï¼Ÿå¯ä»¥æ ¹æ®åŸºå‡†åˆ©ç‡åšåˆ¤æ–­ï¼Œæ¯”å¦‚å½“å‰åŠå¹´æœŸåŸºå‡†è´·æ¬¾åˆ©ç‡æ˜¯4.35%ï¼Œäº”å¹´æœŸä»¥ä¸Šçš„æ˜¯4.9%ï¼Œåœ¨è¿™ä»¥ä¸Šä¸Šæµ®10%ã€20%éƒ½æ˜¯æ­£å¸¸çš„èŒƒç•´ã€‚5%çš„é“¶è¡Œç†è´¢äº§å“æ”¶ç›Šå¹¶ä¸ç®—å¤ªé«˜ ä»€ä¹ˆæ ·çš„è´§å¸åŸºé‡‘å€¼å¾—ä¹°ä¸­å›½å¸‚åœºä¸Šæœ‰5ä¸‡å¤šäº¿çš„èµ„é‡‘éƒ½åœ¨è´§å¸åŸºé‡‘ä¸Šï¼Œä¸€å…±300å¤šç§äº§å“ï¼Œæ€æ ·æŒ‘é€‰å®‰å…¨ã€æ”¶ç›Šç‡æ›´é«˜çš„ï¼Ÿ æŒ‘é€‰è´§å¸åŸºé‡‘çš„ä¸¤å¤§åŸåˆ™å®‰å…¨æ€§ä¸æµåŠ¨æ€§åŸåˆ™â€”â€”æŒ‘é€‰æ•£æˆ·æ¯”ä¾‹é«˜çš„è´§å¸åŸºé‡‘ æœºæ„å‹çš„è´§åŸºï¼Œç”³è´­èµå›éƒ½éå¸¸é¢‘ç¹ï¼Œæ•£æˆ·ç»å¸¸ååº”è¿‡æ…¢ï¼Œä¼šå—åˆ°èµ„é‡‘é‡å¤§çš„æœºæ„å½±å“ã€‚è¿™ç§åŸºé‡‘ç”±äºæœºæ„é¢‘ç¹è´­ä¹°èµå›äº§ç”Ÿçš„æµåŠ¨æ€§é£é™©ï¼Œæˆä¸ºâ€œåŸºé‡‘æŒ¤å…‘â€ï¼ˆFund Runï¼‰ï¼Œè¿™ä¼šå¯¼è‡´åŸºé‡‘æ³¢åŠ¨å¾ˆå¤§ï¼Œä¸å¤Ÿç¨³å¥ã€‚ å¦‚æœä¸€ä¸ªè´§åŸºçš„æ•£æˆ·åˆ©ç‡è¾¾åˆ°70%ä»¥ä¸Šï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯æ•£æˆ·å‹åŸºé‡‘ï¼ŒæµåŠ¨æ€§é£é™©å°±éå¸¸ä½äº†ã€‚å‡ºäºæ”¶ç›Šç‡è€ƒè™‘ï¼Œè¿™ä¸ªæ ‡å‡†å¯ä»¥æ”¾å®½åˆ°60%ã€‚ æ”¶ç›Šç‡åŸåˆ™â€”â€”æŒ‘é€‰è§„æ¨¡é€‚ä¸­çš„è´§å¸åŸºé‡‘ è´§åŸºçš„æ”¶ç›Šç‡å’Œå®ƒçš„è´§åŸºè§„æ¨¡ï¼Œå‘ˆç°ä¸€ä¸ªå€’Uå‹çš„å…³ç³»ï¼ŒåŸºé‡‘è§„æ¨¡å¤ªå°ï¼ˆ&lt;50äº¿ï¼‰æˆ–è€…å¤ªå¤§ï¼ˆ&gt;1000äº¿ï¼‰éƒ½ä¼šå¯¼è‡´æ”¶ç›Šç‡è¿‡ä½ã€‚æŒ‘é€‰è´§åŸºæ—¶åº”å½“æŒ‘é€‰100äº¿åˆ°400äº¿è¿™æ ·ä¸­ç­‰è§„æ¨¡çš„åŸºé‡‘ã€‚ ä»¥ä¸‹æ˜¯é¦™å¸…å›¢é˜Ÿåœ¨2018å¹´åˆæ ¹æ®ä»¥ä¸ŠåŸåˆ™æŒ‘é€‰å‡ºçš„å‡ æ”¯åŸºé‡‘ã€‚ è´§å¸åŸºé‡‘ç”³è´­èµå›çš„ä¸‰ä¸ªå°çªé—¨ é¿å¼€T+2ã€T+3çš„åŸºé‡‘ï¼Œå› ä¸ºè¿™ä¼šå¯¹åŸºé‡‘æµåŠ¨æ€§é€ æˆä¸€å®šæŸå¤± åŸºé‡‘äº¤æ˜“æŒ‰ç…§å·¥ä½œæ—¥æ¥è®¡ç®—ï¼Œå‘¨äº”ä¸ä¹°å…¥ï¼Œå‘¨å››ä¸èµå›ã€‚å¦‚æœåœ¨å‘¨äº”ä¹°å…¥ï¼ŒT+1å‹åŸºé‡‘åº”å½“åœ¨å‘¨å…­èµå›ï¼Œè€Œå‘¨å…­éå·¥ä½œæ—¥ï¼Œå°±åªèƒ½åœ¨ä¸‹å‘¨ä¸€èµå›ï¼Œå˜æˆäº†T+3å‹åŸºé‡‘ã€‚â€œå‘¨å››ä¸èµå›â€æ˜¯å› ä¸ºä½ å¦‚æœåœ¨å‘¨å››èµå›äº†ï¼Œå°±ä¼šå˜æˆâ€œå‘¨äº”ä¹°å…¥â€ è´§å¸åŸºé‡‘çš„æŠ•èµ„æ–¹å‘åº”è¯¥æ˜¯ä¸€ä¸ªçŸ­æœŸçš„è´§å¸å·¥å…·ï¼Œå¸‚åœºä¸Šèµ„é‡‘çš„ç´§å¼ ä¸å¦æ˜¯è´§åŸºæ”¶ç›Šç‡çš„å…³é”®ï¼Œèµ„é‡‘è¶Šç´§å¼ ï¼Œæ”¶ç›Šç‡è¶Šé«˜ã€‚ä¸€èˆ¬æ¥è¯´æœˆæœ«ã€å­£æœ«ã€å¹´ä¸­ã€å¹´åº•æ—¶ï¼Œå¸‚åœºä¸Šè´§å¸æœ€ç´§å¼ ï¼Œåœ¨è¿™äº›æ—¶å€™è´­ä¹°è´§åŸºä¹Ÿæ˜¯æ”¶ç›Šç‡ç›¸å¯¹æ¯”è¾ƒé«˜çš„ã€‚ ä¸€äº›åœ¨çº¿è´­ä¹°è´§å¸åŸºé‡‘çš„æ¸ é“ å¤©å¤©åŸºé‡‘ å¥½ä¹°åŸºé‡‘ æ•°ç±³åŸºé‡‘","tags":[{"name":"é‡‘èå­¦","slug":"é‡‘èå­¦","permalink":"https://lilei.pro/tags/é‡‘èå­¦/"}]},{"title":"é¦™å¸…çš„åŒ—å¤§é‡‘èå­¦è¯¾ï¼ˆä¸€ï¼‰é‡‘èä¸–ç•Œè§‚","date":"2018-09-09T03:59:01.000Z","path":"2018/09/09/finance-Xiangshuai-week01/","text":"å­¦ä¹ â€œå¾—åˆ°Appâ€ä¸­ã€Šé¦™å¸…çš„åŒ—å¤§é‡‘èå­¦è¯¾ã€‹ç¬”è®° ç¬¬ä¸€å‘¨ï¼šé‡‘èçš„æœ¬è´¨ é‡‘èçš„æœ¬è´¨ é‡‘èå¹¶ä¸æ˜¯é«˜é«˜åœ¨ä¸Šã€åªå­˜åœ¨äºé“¶è¡Œå®¶å’Œè¯åˆ¸åˆ†æå¸ˆå£ä¸­çš„ç¥ç§˜äº‹ç‰©ï¼Œå®ƒä¸æ¯ä¸€ä¸ªæ™®é€šäººæ¯æ¯ç›¸å…³ï¼Œä¸è®ºæ˜¯èœè´©ã€æ‰“å·¥è€…ã€æœåŠ¡å‘˜ï¼Œåªè¦ä½ æ´»åœ¨æ—¶é—´çš„æ²³æµä¸­ï¼Œå°±ä¸€å®šä¼šä¸é‡‘èå‘ç”Ÿè¿™æ ·é‚£æ ·çš„å…³ç³»ã€‚ é‡‘èçš„ç¬¬ä¸€å®šç†â€”â€”æ—¶é—´çš„ä»·å€¼ æ—¶é—´å°±æ˜¯é‡‘é’± æ—¶é—´æ˜¯å¯ä»¥è¢«æ¢ç®—æˆé‡‘é’±çš„ï¼Œæˆ‘ä»¬æ¯ä¸ªäººæ‹¥æœ‰çš„æ—¶é—´æ•°é‡æ˜¯ç›¸åŒçš„ï¼Œä¸Šå¸ç»™æ¯ä¸ªäººçš„æ—¶é—´ä¸€ä¸ªåŸºç¡€å®šä»·ï¼ˆè´¨é‡ï¼‰ï¼Œæˆ‘ä»¬å†åˆ©ç”¨å„è‡ªé€‰æ‹©çš„é‡‘èå·¥å…·ï¼Œæ”¾å¤§/ç¼©å°å„è‡ªæ‹¥æœ‰çš„æ—¶é—´ä»·å€¼ã€‚è¿™åœ¨é‡‘èå­¦é‡Œè¢«ç§°ä½œâ€œè´§å¸çš„æ—¶é—´ä»·å€¼â€ï¼ˆtime value of moneyï¼‰ã€‚ é‡‘èä¸ºæ—¶é—´å®šä»·ï¼Œæˆ‘ä»¬è¿™äº›è´­ä¹°é‡‘èäº§å“ã€åšå‡ºé‡‘èå†³ç­–çš„äººï¼Œå°±æ˜¯è´­ä¹°äº†ä¸åŒçš„æœªæ¥ä»·å€¼ã€‚ é‡‘èçš„ç¬¬äºŒå®šç†â€”â€”èµ„é‡‘çš„é›†èšäººç±»é¢ä¸´ä¸¤ä¸ªçº¦æŸï¼šæ—¶é—´å’Œèµ„é‡‘ï¼Œç»æµå­¦ä¸Šå°†èµ„é‡‘çš„çº¦æŸç§°ä¸ºâ€œç¨€ç¼ºâ€ã€‚è¶Šæ˜¯ä¼Ÿå¤§çš„äº‹ç‰©ï¼Œè¶Šéœ€è¦èµ„é‡‘çš„å¿«é€Ÿé›†èšå’Œæœ‰æ•ˆé…ç½®ï¼Œè¿™ç§åŠŸèƒ½åªæœ‰é‡‘èå¯ä»¥å®ç°ã€‚é‡‘èå¸®åŠ©æˆ‘ä»¬çªç ´æ—¶é—´å’Œåœ°åŸŸçš„é™åˆ¶ï¼Œè¿›è¡Œå¿«é€Ÿæœ‰æ•ˆçš„èµ„é‡‘é›†èšã€‚ é‡‘èçš„ç¬¬ä¸‰å®šç†â€”â€”åˆ†æ•£é£é™©é‡‘èä½¿äººç±»å¯¹é£é™©çš„æ‰¿å—èƒ½åŠ›çªç ´åœ°åŸŸå’Œæ—¶é—´é™åˆ¶ï¼Œæ‹“å±•äººç±»ç»æµæ´»åŠ¨èŒƒå›´ ä¿é™©å°†ä¸ªä½“æ‰¿å—çš„é£é™©åˆ†æ•£åˆ°ç¤¾ä¼šç¾¤ä½“ä¹‹é—´ è‚¡ç¥¨èµ·åˆ°çš„ä½œç”¨æ˜¯åˆ©ç›Šå…±äº«ã€é£é™©å…±æ‹…ã€‚ é£æŠ•ã€åˆ›æŠ•è®©ç¤¾ä¼šåˆ†æ‹…åˆ›ä¸šåˆ›æ–°çš„é£é™© è¾©è¯çœ‹å¾…é‡‘èä¸–ç•Œè§‚é‡‘èèµ‹èƒ½äººç±»ï¼Œå¸®åŠ©æˆ‘ä»¬æ‰©å¤§æ—¶é—´ä»·å€¼ã€è¿›è¡Œèµ„é‡‘çš„é›†èšï¼Œåˆ†æ•£é£é™©ã€‚é‡‘èåŒæ ·ä¹Ÿæœ‰è´Ÿé¢çš„ä½œç”¨ï¼Œæ¯”å¦‚é©¬å¤ªæ•ˆåº”å’Œé“å¾·é£é™©ã€‚ é‡‘èçš„åŸºç¡€çŸ¥è¯†å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å…­ä¸ªæ¿å— é‡‘èæœºæ„ï¼šé“¶è¡Œã€æŠ•è¡Œã€åŸºé‡‘çš„èµ·æºã€åŠŸèƒ½ã€è¿ä½œæ¨¡å¼ï¼Œä»¥åŠèƒŒåçš„é‡‘èå­¦é€»è¾‘ é‡‘èå·¥å…·ï¼šè‚¡ç¥¨ã€å€ºåˆ¸ã€é‡‘èè¡ç”Ÿå“çš„æœ¬è´¨å’Œç‰¹å¾ï¼Œé‡‘èæœºæ„å¦‚ä½•å¼€æ‹“å¸‚åœºï¼Œé‡‘èäº¤æ˜“åˆ¶åº¦ æŠ•èµ„è€…å†³ç­–ï¼šèµ„äº§é…ç½®ã€è¯åˆ¸é€‰æ‹©ã€éç†æ€§å†³ç­– å…¬å¸å†³ç­–ï¼šç­¹èµ„çš„æ—¶æœºå’Œæ–¹æ³•ï¼Œä¸Šå¸‚æ—¶æœºï¼Œåˆ†çº¢ç­–ç•¥ï¼Œè‚¡æƒæ¿€åŠ± é‡‘èçš„ç›‘ç®¡ã€åˆ›æ–°å’Œå±æœºï¼šâ€œç›‘ç®¡ã€åˆ›æ–°ã€å±æœºâ€çš„é‡‘èå‘¨æœŸ ç§‘æŠ€é‡‘èï¼šé‡‘èè¡Œä¸šæœªæ¥çš„å‘å±•ï¼Œäº’è”ç½‘ï¼ŒåŒºå—é“¾ï¼Œæ¯”ç‰¹å¸ é‡‘èå­¦å¸¦æ¥é‡‘èæ€ç»´ï¼Œå®ƒè®©æˆ‘ä»¬å­¦ä¼šæƒè¡¡é£é™©å’Œæ”¶ç›Šï¼Œä¸ä»…æŠ•èµ„é‡‘é’±ï¼Œæ›´æ˜¯æŠ•èµ„äººç”Ÿã€‚ ç¬¬äºŒå‘¨ é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–è¿‡ç¨‹ é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ– ä¸­å›½é‡‘èå¸‚åœºçš„åˆ¶åº¦æ ¹æºâ€”â€”ä¸­å¤®è´§å¸è´¢æ”¿ä½“ç³»æ‰€æœ‰çš„é‡‘èå¸‚åœºéƒ½ä¸æ˜¯å‡­ç©ºå‡ºç°çš„ï¼Œå®ƒçš„å½¢æˆèƒŒåéƒ½æœ‰ä¸€ä¸ªå¼ºå¤§çš„å†å²åˆ¶åº¦æ ¹æºã€‚ ä¸­å›½çš„é‡‘èå¸‚åœºæ˜¯ä»ä¸€ä¸ªä¸­å¤®é›†æƒçš„å¸å›½å†…éƒ¨æ¼”åŒ–æ¥çš„ï¼Œæ—©æœŸçš„é‡‘èå‘è¾¾ä¹Ÿæ¥æºäºè¿™æ ·çš„å°å»ºä¸“åˆ¶åˆ¶åº¦ï¼Œå›½å®¶å„æ–­äº†é‡‘èè¡Œä¸šï¼Œç»æµç”Ÿæ´»å›½æœ‰åŒ–ï¼Œå¯ä»¥é›†ä¸­åŠ›é‡åŠå¤§äº‹ã€‚ è¿™ç§ç»æµåˆ¶åº¦çš„ç¼ºç‚¹æ˜¯æ°‘é—´ä¿¡ç”¨æå…¶è„†å¼±ï¼Œæ°‘ä¼—çš„èèµ„éœ€æ±‚å¾—ä¸åˆ°æ»¡è¶³ï¼Œé€ æˆä¸­å›½é‡‘èå¸‚åœºå¾ˆå¤šä¹±è±¡ã€‚ æ¬§ç¾é‡‘èå¸‚åœºçš„æ¼”åŒ–â€”â€”ä»¥é“¶è¡Œä¸ºä¸­å¿ƒï¼Œåˆ†æƒåˆ¶è¡¡ä¸‹çš„ä¿¡ç”¨ä½“ç³»æ¬§ç¾çš„é‡‘èå¸‚åœºä¹Ÿä¸æ˜¯ä¸€å¼€å§‹å°±åƒç°åœ¨è¿™æ ·æˆç†Ÿï¼Œè€Œæ˜¯ä»11ä¸–çºªä»¥åæ…¢æ…¢å‘å±•èµ·æ¥çš„ åœ£æ®¿éª‘å£«å›¢å¥ å®šæ¬§æ´²é“¶è¡Œä¸šåŸºç¡€ -&gt; æ„å¤§åˆ©é“¶è¡Œä¸šã€è·å…°è‚¡ç¥¨è¯åˆ¸ã€è‹±æ³•é“¶è¡Œä¸šé€æ¸å½¢æˆåˆ†æƒåˆ¶è¡¡ä¿¡ç”¨ä½“ç³» -&gt; ç¾å›½çš„é‡‘èç«‹å›½ï¼Œç§°ä¸ºä¸–ç•Œä¸Šæœ€å‘è¾¾çš„é‡‘èå¸‚åœºã€‚æˆ‘ä»¬ç°åœ¨æ‰€çœ‹åˆ°çš„æ¬§ç¾ä¿¡ç”¨ç¤¾ä¼šï¼Œæ˜¯ç”±äºæ¬§æ´²åˆ†æƒåˆ¶è¡¡çš„å½¢æ€æ‰€å†³å®šçš„ã€‚ å†å²ä¸èƒ½ä¾é ç®€å•çš„æ‹¿æ¥ä¸»ä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªè·¯å¾„ç›¸ä¾çš„è¿‡ç¨‹ã€‚ é‡‘èæœºæ„ç”¨äºæ¶ˆé™¤é‡‘èå¸‚åœºä¸Šçš„ä¿¡æ¯ä¸å¯¹ç§°é‡‘èå¸‚åœºä¸Šäº¤æ˜“çš„æ˜¯â€œä¿¡ç”¨â€ã€â€œæœªæ¥â€ï¼Œæ˜¯çœ‹ä¸è§æ‘¸ä¸åˆ°çš„æŠ½è±¡ç‰©å“ï¼Œå­˜åœ¨å·¨å¤§çš„ä¿¡æ¯ä¸å¯¹ç§°ï¼Œé‡‘èä¸­ä»‹çš„å­˜åœ¨å°±æ˜¯ä¸ºäº†æ¶ˆé™¤ä¿¡æ¯ä¸å¯¹ç§°ã€‚å„ç§å®¡è®¡æœºæ„ã€ä¼šè®¡å¸ˆäº‹åŠ¡æ‰€ã€åˆ¸å•†é“¶è¡Œéƒ½å±äºé‡‘èä¸­ä»‹ã€‚ æ²¡æœ‰é‡‘èä¸­ä»‹æœºæ„ï¼Œé‡‘èå¸‚åœºæ˜¯æ— æ³•è¿è¡Œçš„ï¼Œé‡‘èå¸‚åœºçš„é«˜åº¦ä¸­ä»‹åŒ–æ˜¯å¿…ç„¶çš„ç»“æœã€‚ å»¶å±•è¯é¢˜ï¼šä¸ªäººèµ„äº§é…ç½®çš„ç”Ÿå‘½å‘¨æœŸ é’å¹´æ—¶æœŸï¼šæœ€å¤§çš„ä¼˜åŠ¿æ˜¯æ—¶é—´ï¼ŒåŠ å¤§å®ç‰©èµ„äº§é…ç½®ï¼Œä»¥æ—¶é—´æ¢ç©ºé—´ï¼Œå¢å¤§å¹´è½»æ—¶æœŸèµ„æœ¬ç§¯ç´¯ å£®å¹´æ—¶æœŸï¼šç°é‡‘æ”¶å…¥é«˜ï¼Œé£é™©æ‰¿å—èƒ½åŠ›å¼ºã€‚åº”è¯¥åŠ å¤§é£é™©èµ„äº§é…ç½®ï¼›èº«ä»½è§’è‰²çš„è½¬æ¢ï¼Œéœ€è¦èµ„äº§çš„å¤šå…ƒåŒ–é…ç½® è€å¹´æ—¶æœŸï¼šæœªæ¥æ—¶é—´å˜å°‘ï¼Œé£é™©æ‰¿å—èƒ½åŠ›å‡å¼±ï¼ŒåŠ å¤§å®‰å…¨èµ„äº§é…ç½®ï¼ŒåŒæ—¶åŠ å¤§æµåŠ¨æ€§èµ„äº§é…ç½®ï¼Œä¿éšœç°é‡‘æµ","tags":[{"name":"é‡‘èå­¦","slug":"é‡‘èå­¦","permalink":"https://lilei.pro/tags/é‡‘èå­¦/"}]},{"title":"æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼ˆä¸‰ï¼‰åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥","date":"2018-08-15T09:26:32.000Z","path":"2018/08/15/JVM-Note-03/","text":"æœ¬ç« ä»‹ç»åƒåœ¾æ”¶é›†å™¨çš„è®¾è®¡æ€è·¯ã€ç®—æ³•ä»¥åŠå¸¸è§å®ç°ï¼ŒåŒæ—¶ä»‹ç»ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´æ—¶é‡‡å–çš„ç­–ç•¥ã€‚ åƒåœ¾æ”¶é›†ï¼ˆGarbage Collectionï¼‰GC çš„å†å²æ¯” Java ä¹…è¿œï¼Œ1960 å¹´è¯ç”Ÿäº MIT çš„ Lisp æ˜¯ç¬¬ä¸€é—¨çœŸæ­£ä½¿ç”¨å†…å­˜åŠ¨æ€åˆ†é…å’Œåƒåœ¾å›æ”¶æŠ€æœ¯çš„è¯­è¨€ã€‚ä¸è®ºæ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œåœ¨è®¾è®¡ GC æ—¶éƒ½å¿…é¡»è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š å“ªäº›å†…å­˜éœ€è¦å›æ”¶ï¼ˆWhoï¼‰ ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼ˆWhenï¼‰ å¦‚ä½•å›æ”¶ï¼ˆHowï¼‰ ä¹Ÿè®¸ä½ è¦é—®ï¼Œè™šæ‹Ÿæœºå·²ç»ä¸ºæˆ‘ä»¬å®Œæˆäº†å†…å­˜å›æ”¶çš„å·¥ä½œï¼Œç›®å‰å†…å­˜çš„åŠ¨æ€åˆ†é…ä¸å›æ”¶æŠ€æœ¯å·²ç»ç›¸å½“æˆç†Ÿï¼Œä¸€åˆ‡éƒ½è¿›å…¥äº†â€œè‡ªåŠ¨åŒ–â€æ—¶ä»£ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦å»äº†è§£ GC å’Œå†…å­˜åˆ†é…å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œå½“æˆ‘ä»¬éœ€è¦æ’æŸ¥å„ç§å†…å­˜æº¢å‡ºã€æ³„æ¼é—®é¢˜æ—¶ï¼Œå½“åƒåœ¾æ”¶é›†ç§°ä¸ºç³»ç»Ÿè¾¾åˆ°æ›´é«˜å¹¶å‘é‡çš„ç“¶é¢ˆæ—¶ï¼Œå°±å¿…é¡»è¦å¯¹è¿™äº›â€œè‡ªåŠ¨åŒ–â€çš„æŠ€æœ¯è¿›è¡Œå¿…è¦çš„ç›‘æ§å’Œè°ƒèŠ‚ã€‚ åœ¨ä¸Šä¸€ç« çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ° JVM çš„å†…å­˜å¯ä»¥åˆ’åˆ†ä¸ºçº¿ç¨‹ç§æœ‰éƒ¨åˆ†ï¼ˆè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ï¼‰å’Œå…¬æœ‰éƒ¨åˆ†ï¼ˆå †ã€æ–¹æ³•åŒºï¼‰ï¼Œå…¶ä¸­çº¿ç¨‹ç§æœ‰éƒ¨åˆ†æ‰€ç”³è¯·çš„å†…å­˜ï¼Œéšç€çº¿ç¨‹è¿è¡Œç»“æŸè€Œé”€æ¯ï¼Œåœ¨è¿™ä¸ªåŒºåŸŸçš„å†…å­˜åˆ†é…å’Œå›æ”¶å…·å¤‡ç¡®å®šæ€§ã€‚å…¬æœ‰éƒ¨åˆ†çš„æ–¹æ³•åŒºï¼Œå…¶åˆ†é…å¤šå°‘å†…å­˜åœ¨ç¼–è¯‘æœŸé—´ä¹Ÿå¯ä»¥ç¡®è®¤ï¼Œå› æ­¤ï¼Œéœ€è¦è€ƒè™‘å†…å­˜å›æ”¶çš„åŒºåŸŸä¸»è¦æ˜¯ Java å †ï¼Œå †ä¸­çš„å¯¹è±¡æ˜¯è¿è¡Œæ—¶åˆ›å»ºçš„ï¼Œå®ƒä»¬çš„åˆ›å»ºå’Œå›æ”¶éƒ½æ˜¯åŠ¨æ€çš„ï¼Œè¿™æ˜¯åƒåœ¾æ”¶é›†å™¨å…³æ³¨çš„åŒºåŸŸã€‚ å¯¹è±¡å·²æ­»å—ï¼Ÿå¼•ç”¨è®¡æ•°å™¨æ³•å¼•ç”¨è®¡æ•°å™¨æ³•ï¼ˆReference Countingï¼‰æ˜¯ä¸€ç§å®ç°èµ·æ¥å¾ˆç®€å•çš„åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»çš„æ–¹æ³•ã€‚åŸç†æ˜¯å½“å‡ºç°ä¸€ä¸ªå¯¹å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œè®¡æ•°å™¨ +1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨ -1ï¼Œè®¡æ•°å™¨å€¼ä¸º 0 åˆ™è¡¨ç¤ºå¯¹è±¡å·²æ­»ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œåˆ¤å®šæ•ˆç‡é«˜ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ä¸é”™çš„ç®—æ³•ï¼Œä¹Ÿæœ‰å¾ˆå¤šè‘—åçš„åº”ç”¨æ¡ˆä¾‹ï¼š M$ çš„ COMï¼ˆComponent Object Modelï¼‰æŠ€æœ¯ è¯•ç”¨ AS3 çš„ FlashPlayer Python Squirrel å¼•ç”¨è®¡æ•°å™¨å‘å­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå› æ­¤ä¸»æµ Java è™šæ‹Ÿæœºæ²¡æœ‰é€‰ç”¨è¿™ç§æ–¹æ³•æ¥ç®¡ç†å†…å­˜ã€‚ å¯è¾¾æ€§åˆ†ææ³•ä¸»æµå•†ç”¨ç¨‹åºè¯­è¨€ï¼ˆJavaã€C#ã€Lispï¼‰ä½¿ç”¨å¯è¾¾æ€§åˆ†æï¼ˆReachability Analysisï¼‰æ–¹æ³•æ¥åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»ï¼š ä»ä¸€ç³»åˆ— GC Roots èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼ˆReference Chainï¼‰ å½“ä¸€ä¸ªå¯¹è±¡åˆ° GC Roots æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼ˆä¸å¯è¾¾ï¼‰æ—¶ï¼Œè¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ åœ¨ Java ä¸­çš„ GC Roots æœ‰ä»¥ä¸‹å‡ ç§ è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰å¼•ç”¨çš„å¯¹è±¡ æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNI å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ å¯è§ GC Roots èŠ‚ç‚¹ä¸»è¦æœ‰å…¨å±€æ€§å¼•ç”¨å’Œæ‰§è¡Œä¸Šä¸‹æ–‡è¿™ä¸¤ä¸ªæ¥æºã€‚ JDK 1.2 åçš„å‡ ç§å¼•ç”¨åœ¨ Java 1.2 ä¹‹å‰ï¼Œå¯¹â€œå¼•ç”¨â€çš„å®šä¹‰å¾ˆä¼ ç»Ÿï¼šå¦‚æœ reference ç±»å‹çš„æ•°æ®ä¸­å­˜å‚¨çš„æ•°å€¼ä»£è¡¨çš„æ˜¯å¦ä¸€å—å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå°±ç§°ä¸ºè¿™å—å†…å­˜ä»£è¡¨ç€ä¸€ä¸ªå¼•ç”¨ã€‚è¿™ç§å®šä¹‰å¾ˆçº¯ç²¹ä½†æ˜¯å¤ªè¿‡ç‹­éš˜ï¼Œä¸€ä¸ªå¯¹è±¡åœ¨è¿™ç§å®šä¹‰ä¸‹åªæœ‰è¢«å¼•ç”¨æˆ–è€…æ²¡æœ‰è¢«å¼•ç”¨ä¸¤ç§çŠ¶æ€ã€‚æˆ‘ä»¬å¸Œæœ›æè¿°è¿™æ ·ä¸€ç±»å¯¹è±¡ï¼šå½“å†…å­˜ç©ºé—´è¿˜è¶³å¤Ÿæ—¶ï¼Œåˆ™èƒ½ä¿å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼›å¦‚æœå†…å­˜ç©ºé—´åœ¨è¿›è¡Œ GC åè¿˜æ˜¯éå¸¸ç´§å¼ ï¼Œåˆ™å¯ä»¥æŠ›å¼ƒè¿™äº›å¯¹è±¡ã€‚åœ¨ JDK 1.2 ä¹‹åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºâ€œå¼ºè½¯å¼±è™šâ€å››ç§ï¼š å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰ï¼šæŒ‡åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„ï¼Œç±»ä¼¼â€œObject obj = new Object()â€è¿™ç±»çš„å¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨ æ°¸è¿œä¸ä¼š å›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰ï¼šç”¨æ¥æè¿°ä¸€äº› è¿˜æœ‰ç”¨ä½†éå¿…éœ€ çš„å¯¹è±¡ï¼Œå¯¹äºè½¯å¼•ç”¨å…³è”çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—å…¥å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ã€‚å¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œåˆ™ä¼šæŠ›å‡º å†…å­˜æº¢å‡ºå¼‚å¸¸ å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰ï¼šç”¨æ¥æè¿° éå¿…éœ€ å¯¹è±¡ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶å‘ç”Ÿä¹‹å‰ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰ï¼šä¹Ÿç§°ä¸ºå¹½çµå¼•ç”¨æˆ–è€…å¹»å½±å¼•ç”¨ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨è·å–å¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨å®ƒè¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ ä¸¤æ¬¡æ ‡è®°å®£å‘Šå¯¹è±¡æ­»äº¡å¯¹äºåœ¨å¯è¾¾æ€§åˆ†æä¸­è¢«åˆ¤æ–­ä¸ºâ€œä¸å¯è¾¾â€çš„å¯¹è±¡ï¼Œæœ‰ä¸€æ¬¡è¿›è¡Œè‡ªæ•‘çš„æœºä¼šï¼Œè¦çœŸæ­£å®£å‘Šä¸€ä¸ªå¯¹è±¡æ­»äº¡ï¼Œéœ€è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼š ç¬¬ä¸€æ¬¡æ ‡è®°ï¼šå¯¹è±¡åœ¨å¯è¾¾æ€§åˆ†æä¸­è¢«æ ‡è®°ä¸ºâ€œä¸å¯è¾¾â€ ç¬¬äºŒæ¬¡ç­›é€‰ï¼šåˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³å…¶ä¸€æ—¶ï¼Œå¯è®¤ä¸ºæ˜¯â€œæœ‰å¿…è¦â€ï¼Œa. å¯¹è±¡è¦†ç›–äº† finalize() æ–¹æ³•ï¼›b. å¯¹è±¡çš„ finalize() æ–¹æ³•æœªè¢«è°ƒç”¨è¿‡ å¯¹è±¡è¢«åˆ¤æ–­ä¸ºâ€œæœ‰å¿…è¦æ‰§è¡Œ finalize()â€æ—¶ï¼Œæ˜¯å…¶æœ€åä¸€æ¬¡è‡ªæ•‘æœºä¼šï¼Œå®ƒä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªåä¸ºF-Queueçš„é˜Ÿåˆ—ä¹‹ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€ä¸ªè™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½ä¼˜å…ˆçº§çš„ Finalizer çº¿ç¨‹å»æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œå¯¹è±¡è¿›è¡Œè‡ªæ•‘çš„å”¯ä¸€æ‰‹æ®µæ˜¯åœ¨ finalize() æ–¹æ³•ä¸­å»ºç«‹ä¸ GC Roots çš„è¿æ¥ï¼Œè­¬å¦‚æŠŠè‡ªå·±ï¼ˆthis å…³é”®å­—ï¼‰èµ‹å€¼ç»™æŸä¸ªç±»å˜é‡æˆ–è€…å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œè¿™æ ·ä¼šä½¿å¾—å¯¹è±¡è¢«ç§»é™¤å‡ºâ€œå³å°†å›æ”¶â€é›†åˆï¼›æ¢è¨€ä¹‹ï¼Œå¦‚æœè¿™æ—¶å€™å¯¹è±¡ä»ç„¶æœªèƒ½è‡ªæ•‘ï¼Œåˆ™ä¼šè¿æ¥æ­»äº¡çš„å‘½è¿ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•åªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ã€‚åœ¨ç¼–ç ä¸­æˆ‘ä»¬åº”å½“å°½é‡é¿å…ä½¿ç”¨finalize()æ–¹æ³•ï¼Œå› ä¸ºå®ƒçš„è¿è¡Œä»£ä»·é«˜æ˜‚ï¼Œä¸ç¡®å®šæ€§å¤§ï¼Œå¹¶ä¸”æ— æ³•ä¿è¯å„ä¸ªå¯¹è±¡çš„è°ƒç”¨é¡ºåºã€‚ å›æ”¶æ–¹æ³•åŒºæ–¹æ³•åŒºï¼ˆåœ¨ HotSpot è™šæ‹Ÿæœºä¸­è¢«ç§°ä¸ºâ€œæ°¸ä¹…ä»£â€ï¼‰ä¹Ÿå¯ä»¥è¿›è¡Œåƒåœ¾æ”¶é›†ï¼ˆè™½ç„¶ Java è™šæ‹Ÿæœºè§„èŒƒä¸­æ˜ç¡®è¡¨ç¤ºå¯ä»¥ä¸è¦æ±‚åœ¨æ–¹æ³•åŒºå®ç°åƒåœ¾æ”¶é›†ï¼‰ã€‚ä¸è¿‡åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œæ”¶é›†çš„â€œæ€§ä»·æ¯”â€é€šå¸¸å¾ˆä½ï¼Œåœ¨å †ä¸­å¸¸è§„åº”ç”¨è¿›è¡Œä¸€æ¬¡åƒåœ¾æ”¶é›†ä¸€èˆ¬å¯ä»¥å›æ”¶ 70%ï½95% çš„ç©ºé—´ï¼Œè€Œæ°¸ä¹…ä»£çš„åƒåœ¾æ”¶é›†æ•ˆç‡è¿œä½äºæ­¤ã€‚ æ°¸ä¹…ä»£çš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼šåºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚ åºŸå¼ƒå¸¸é‡ çš„å›æ”¶ä¸ Java å †ä¸­å¯¹è±¡å›æ”¶ååˆ†ç±»ä¼¼ï¼Œä»¥å­—é¢é‡å›æ”¶ä¸ºä¾‹ï¼Œå‡å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²â€œabcâ€å·²ç»è¿›å…¥äº†å¸¸é‡æ± ä¸­ï¼Œä½†æ˜¯å½“å‰ç³»ç»Ÿæ²¡æœ‰ä»»ä½•ä¸€ä¸ª String å¯¹è±¡æ˜¯å«åšâ€œabcâ€çš„ï¼Œä¹Ÿæ²¡æœ‰åœ¨å…¶ä»–ä»»ä½•åœ°æ–¹å¼•ç”¨äº†è¿™ä¸ªå­—é¢é‡ï¼Œå¦‚æœè¿™æ—¶å‘ç”Ÿå†…å­˜å›æ”¶ï¼Œåœ¨å¿…è¦çš„æƒ…å†µä¸‹ï¼Œâ€œabcâ€å¸¸é‡ä¼šè¢«æ¸…é™¤å‡ºå¸¸é‡æ± ã€‚ æ— ç”¨çš„ç±» çš„åˆ¤æ–­åˆ™è¦ç¨å¾®å¤æ‚ä¸€äº›ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼Œæ‰â€œå¯ä»¥â€è¢«å›æ”¶ï¼Œæ³¨æ„ä¸æ˜¯â€œä¸€å®šâ€è€Œæ˜¯â€œå¯ä»¥â€ è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯ Java å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹ åŠ è½½è¯¥ç±»çš„ ClassLoader å·²ç»è¢«å›æ”¶ è¯¥ç±»å¯¹åº”çš„ java.lang.Class å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³• HotSpot è™šæ‹Ÿæœºæä¾›äº†-Xnoclassgcå‚æ•°è¿›è¡Œæ§åˆ¶æ— ç”¨çš„ç±»å›æ”¶ã€‚ åƒåœ¾æ”¶é›†ç®—æ³•æ ‡è®°-æ¸…é™¤ç®—æ³•æœ€åŸºæœ¬çš„æ”¶é›†ç®—æ³•æ˜¯æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰ç®—æ³•ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š æ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ ç»Ÿä¸€å›æ”¶æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ æ ‡è®°-æ¸…é™¤ç®—æ³•çš„ç¤ºæ„å›¾å¦‚ä¸‹ æ ‡è®°æ¸…é™¤ æ ‡è®°-æ¸…é™¤ç®—æ³•ä¸»è¦ä¸è¶³æœ‰ä¸¤ä¸ª æ•ˆç‡é—®é¢˜ï¼Œæ ‡è®°å’Œæ¸…é™¤çš„æ•ˆç‡éƒ½ä¸é«˜ ç©ºé—´é—®é¢˜ï¼Œæ¸…æ¥šä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ å¤åˆ¶ç®—æ³•å¤åˆ¶ï¼ˆCopyingï¼‰ç®—æ³•ä¸»è¦ç›®çš„æ˜¯è§£å†³æ•ˆç‡é—®é¢˜ï¼Œå®ƒå°†å¯ç”¨å†…å­˜å¹³å‡åˆ†ä¸ºä¸¤ä¸ªåŠåŒºï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªåŠåŒºï¼Œåœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå°†ä»å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦åŠåŒºä¸Šï¼Œç„¶åæ¸…ç©ºåˆšåˆšä½¿ç”¨çš„åŠåŒºã€‚å¤åˆ¶ç®—æ³•çš„å®ç°ç®€å•è¿è¡Œé«˜æ•ˆï¼Œä¸è¶³æ˜¯ç©ºé—´åˆ©ç”¨ç‡å¤ªä½ï¼Œåªä½¿ç”¨äº†ä¸€åŠçš„å†…å­˜ã€‚ å¤åˆ¶ ç°åœ¨çš„å•†ä¸šè™šæ‹Ÿæœºéƒ½é‡‡ç”¨å¤åˆ¶ç®—æ³•æ¥å›æ”¶æ–°ç”Ÿä»£ï¼ŒIBM ç ”ç©¶è¡¨æ˜æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡å¤šè¾¾ 98% æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æŒ‰ç…§ 1:1 çš„æ¯”ä¾‹æ¥åˆ’åˆ†å†…å­˜ã€‚è€Œæ˜¯å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„ Eden ç©ºé—´å’Œä¸¤å—è¾ƒå°çš„ Survivor ç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨ Eden ç©ºé—´å’Œå…¶ä¸­ä¸€å— Survivor ç©ºé—´ï¼ˆç§°ä¸º From Survivorï¼‰ï¼Œåœ¨å›æ”¶æ—¶å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å— Survivor ç©ºé—´ï¼ˆç§°ä¸º To Survivorï¼‰ï¼Œå¹¶æ¸…ç†æ‰ Eden ä»¥åŠ From Survivor ç©ºé—´ã€‚HotSpot è™šæ‹Ÿæœºé»˜è®¤å¯¹ Eden å’Œ Survivor ç©ºé—´åˆ†é…æ¯”ä¾‹ä¸º 8:1ã€‚ å½“ GC è¿‡ç¨‹ä¸­å‘ç° To Survivor ç©ºé—´ä¸å¤Ÿç”¨æ—¶ï¼Œéœ€è¦ä¾èµ–å…¶ä»–å†…å­˜ï¼ˆè€å¹´ä»£ï¼‰è¿›è¡Œåˆ†é…æ‹…ä¿ï¼ˆHandle Promotionï¼‰ã€‚ æ ‡è®°-æ•´ç†ç®—æ³•å¤åˆ¶ç®—æ³•å¯¹äºå¯¹è±¡å­˜æ´»ç‡é«˜çš„åœºæ™¯å¹¶ä¸é€‚ç”¨ï¼Œå› ä¸ºéœ€è¦é¢‘ç¹è¿›è¡Œå¤åˆ¶æ“ä½œï¼›å¹¶ä¸”å®ƒè¿˜éœ€è¦é¢å¤–ç©ºé—´è¿›è¡Œåˆ†é…æ‹…ä¿ã€‚å› æ­¤ï¼Œåœ¨è€å¹´ä»£ä¸­é€šå¸¸ä¸ä½¿ç”¨å¤åˆ¶ç®—æ³•è¿›è¡Œå†…å­˜å›æ”¶ï¼Œè€Œæ˜¯ä½¿ç”¨çš„æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰ç®—æ³•ï¼š æ ‡è®°è¿‡ç¨‹ä¸â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ç›¸åŒï¼Œå…ˆæ˜¯æ ‡è®°å‡ºä»ç„¶å­˜æ´»çš„å¯¹è±¡ æŠŠæ‰€æœ‰å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ æ ‡è®°æ•´ç† åˆ†ä»£æ”¶é›†ç®—æ³•å½“ä»£å•†ä¸šè™šæ‹Ÿæœºé‡‡ç”¨çš„éƒ½æ˜¯åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectionï¼‰ï¼Œå°† Java å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€åˆé€‚çš„æ”¶é›†ç®—æ³•ã€‚ æ–°ç”Ÿä»£ï¼šå¯¹è±¡å­˜æ´»å‘¨æœŸçŸ­ï¼Œæ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶æœ‰å¤§é‡å¯¹è±¡æ­»å»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³• è€å¹´ä»£ï¼šå¯¹è±¡å­˜æ´»å‘¨æœŸé•¿ï¼Œå­˜æ´»ç‡é«˜ï¼Œæ²¡æœ‰é¢å¤–ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œé‡‡ç”¨æ ‡è®°-æ¸…é™¤æˆ–è€…æ ‡è®°-æ•´ç†ç®—æ³• HotSpot çš„ç®—æ³•å®ç°åœ¨è™šæ‹Ÿæœºä¸Šå®ç°ä¹‹å‰æ‰€è¿°çš„ç®—æ³•æ—¶ï¼Œå¿…éœ€å¯¹ç®—æ³•çš„æ‰§è¡Œæ•ˆç‡æœ‰ä¸¥æ ¼è€ƒé‡ï¼Œæ‰èƒ½ä¿è¯è™šæ‹Ÿæœºé«˜æ•ˆè¿è¡Œã€‚ æšä¸¾æ ¹èŠ‚ç‚¹ä¹‹å‰è®²åˆ°ä½œä¸º GC Roots çš„åŒºåŸŸä¸»è¦æ˜¯å…¨å±€æ€§å¼•ç”¨ï¼ˆå¸¸é‡ã€ç±»é™æ€å±æ€§ï¼‰å’Œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡ï¼‰ï¼Œå¾ˆå¤šåº”ç”¨ä»…ä»…æ–¹æ³•åŒºå°±æœ‰æ•°ç™¾å…†ï¼Œå¦‚æœé€ä¸ªæ£€æŸ¥å¼•ç”¨ï¼Œå¿…ç„¶ä¼šæ¶ˆè€—å¾ˆå¤šæ—¶é—´ã€‚ æ­¤å¤–ï¼Œå¯è¾¾æ€§åˆ†æå¯¹æ‰§è¡Œæ—¶é—´çš„æ•æ„Ÿè¿˜ä½“ç°åœ¨ GC åœé¡¿ ä¸Šï¼Œå› ä¸ºå¯è¾¾æ€§åˆ†æå¿…é¡»åœ¨ä¸€ä¸ªèƒ½ç¡®ä¿ä¸€è‡´æ€§çš„å¿«ç…§ä¸­è¿›è¡Œï¼ˆåˆ†æè¿‡ç¨‹ä¸­å¯¹è±¡å¼•ç”¨å…³ç³»ä¸å¯ä»¥å‘ç”Ÿå˜åŒ–ï¼‰ï¼ŒGC æ—¶å¿…é¡»åœé¡¿æ‰€æœ‰çš„ Java æ‰§è¡Œçº¿ç¨‹ï¼ˆç§°ä¸º Stop The Worldï¼‰ã€‚ ç›®å‰æ‰€æœ‰ä¸»æµè™šæ‹Ÿæœºé‡‡ç”¨çš„éƒ½æ˜¯å‡†ç¡®å¼ GCï¼Œå½“æ‰§è¡Œç³»ç»Ÿåœé¡¿ä¸‹æ¥æ—¶ï¼Œè™šæ‹Ÿæœºæœ‰åŠæ³•çŸ¥é“ï¼Œå“ªäº›åœ°æ–¹å­˜æ”¾ç€å¯¹è±¡å¼•ç”¨ã€‚åœ¨ HotSpot å®ç°ä¸­ï¼Œä½¿ç”¨ä¸€ç»„ç§°ä¸º OopMap çš„æ•°æ®ç»“æ„è¾¾æˆè¿™ä¸ªç›®çš„ã€‚åœ¨ç±»åŠ è½½å®Œæˆæ—¶ï¼ŒHotSpot æŠŠå¯¹è±¡å†…ä»€ä¹ˆåç§»é‡ä¸Šæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®è®¡ç®—å‡ºæ¥ï¼Œåœ¨ JIT ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šåœ¨ç‰¹å®šçš„ä½ç½®è®°å½•ä¸‹æ ˆå’Œå¯„å­˜å™¨ä¸­å“ªäº›ä½ç½®æ˜¯å¼•ç”¨ã€‚ å®‰å…¨ç‚¹åœ¨ OopMap ååŠ©ä¸‹ï¼ŒHotSpot å¯ä»¥å¿«é€Ÿä¸”å‡†ç¡®åœ°å®Œæˆ GC Roots çš„æšä¸¾ï¼Œç„¶è€Œå­˜åœ¨ä¸€ä¸ªå¾ˆç°å®çš„é—®é¢˜ï¼šå¯èƒ½å¯¼è‡´å¼•ç”¨å…³ç³»å˜åŒ–ï¼Œæˆ–è€…è¯´ OopMap å†…å®¹å˜åŒ–çš„æŒ‡ä»¤éå¸¸å¤šï¼Œå¦‚æœä¸ºæ¯ä¸€æ¡æŒ‡ä»¤éƒ½ç”Ÿæˆå¯¹åº”çš„ OopMapï¼Œå°†éœ€è¦å¤§é‡çš„é¢å¤–ç©ºé—´ï¼Œå¯¼è‡´ GC çš„ç©ºé—´æˆæœ¬éå¸¸é«˜ã€‚ HotSpot å¤„ç†çš„æ–¹æ³•æ˜¯ï¼Œå¹¶æ²¡æœ‰ä¸ºæ¯ä¸€æ¡æŒ‡ä»¤éƒ½ç”Ÿæˆ OopMapï¼Œåªæ˜¯åœ¨â€œç‰¹å®šçš„ä½ç½®â€è®°å½•è¿™äº›ä¿¡æ¯ï¼Œè¿™äº›ä½ç½®ç§°ä¸ºå®‰å…¨ç‚¹ï¼ˆSafepointï¼‰ï¼Œå³ç¨‹åºæ‰§è¡Œæ—¶å¹¶éåœ¨æ‰€æœ‰åœ°æ–¹éƒ½èƒ½åœé¡¿ä¸‹æ¥å¼€å§‹ GCï¼Œåªæœ‰åœ¨åˆ°è¾¾å®‰å…¨ç‚¹æ—¶æ‰æš‚åœã€‚å®‰å…¨ç‚¹çš„é€‰å®šåŸºæœ¬ä¸Šæ˜¯ä»¥ç¨‹åºâ€œæ˜¯å¦å…·æœ‰è®©ç¨‹åºé•¿æ—¶é—´æ‰§è¡Œçš„ç‰¹å¾â€ä¸ºæ ‡å‡†è¿›è¡Œé€‰å®šçš„â€”â€”å› ä¸ºæ¯æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´éƒ½éå¸¸çŸ­æš‚ï¼Œç¨‹åºä¸å¤ªå¯èƒ½å› ä¸ºæŒ‡ä»¤æµé•¿åº¦å¤ªé•¿è¿™ä¸ªåŸå› è€Œè¿‡é•¿æ—¶é—´è¿è¡Œã€‚ï¼ˆè¿™éƒ¨åˆ†ä¸ç†è§£ï¼‰ å¯¹äº Safepoint å¦ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„ç‚¹æ˜¯å¦‚ä½•åœ¨ GC æ—¶è®©æ‰€æœ‰çº¿ç¨‹éƒ½è¿è¡Œåˆ°å®‰å…¨ç‚¹ä¸Šåœé¡¿ä¸‹æ¥ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š æŠ¢å…ˆå¼ä¸­æ–­ï¼ˆPreemptive Suspensionï¼‰ï¼šGC å‘ç”Ÿæ—¶ä¸­æ–­æ‰€æœ‰çº¿ç¨‹ï¼Œå¦‚æœæœ‰çº¿ç¨‹ä¸­æ–­åœ°æ–¹ä¸å¤„äºå®‰å…¨ç‚¹ï¼Œåˆ™è®©è¯¥çº¿ç¨‹è¿è¡Œè‡³å®‰å…¨ç‚¹ã€‚ç°åœ¨å‡ ä¹æ²¡æœ‰è™šæ‹Ÿæœºé‡‡ç”¨æŠ¢å…ˆå¼ä¸­æ–­æ¥æš‚åœçº¿ç¨‹ä»è€Œå“åº” GC äº‹ä»¶ã€‚ ä¸»åŠ¨å¼ä¸­æ–­ï¼ˆVoluntary Suspensionï¼‰ï¼šå½“ GC éœ€è¦ä¸­æ–­æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ã€‚å„ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶ä¸»åŠ¨è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå‘ç°ä¸­æ–­æ ‡å¿—ä¸ºçœŸæ—¶å°±è‡ªå·±ä¸­æ–­æŒ‚èµ·ã€‚è½®è¯¢æ ‡å¿—çš„åœ°æ–¹å’Œå®‰å…¨ç‚¹æ˜¯é‡åˆçš„ï¼Œå¦å¤–å†åŠ ä¸Šåˆ›å»ºå¯¹è±¡éœ€è¦åˆ†é…å†…å­˜çš„åœ°æ–¹ã€‚ å®‰å…¨åŒºåŸŸSafepoint æœºåˆ¶ä¿è¯ç¨‹åºæ‰§è¡Œæ—¶è¿›å…¥ GC çš„å¯è¡Œæ€§ï¼Œä½†æ˜¯ï¼Œå½“ç¨‹åºä¸æ‰§è¡Œçš„æ—¶å€™ï¼ˆå³æ²¡æœ‰åˆ†é… CPU äº‹ä»¶ï¼Œä¾‹å¦‚çº¿ç¨‹å¤„äº Sleep çŠ¶æ€æˆ–è€… Blocked çŠ¶æ€ï¼‰ï¼Œçº¿ç¨‹æ— æ³•å“åº” JVM çš„ä¸­æ–­è¯·æ±‚ï¼Œæ— æ³•è½®è¯¢è‡ªç„¶æ— æ³•è¿è¡Œè‡³å®‰å…¨ç‚¹å†ä¸­æ–­æŒ‚èµ·ï¼Œå®‰å…¨åŒºåŸŸ ï¼ˆSafe Regionï¼‰å°±æ˜¯ç”¨æ¥è§£å†³è¿™ç§é—®é¢˜çš„ã€‚ å®‰å…¨åŒºåŸŸæ˜¯æŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¹‹ä¸­ï¼Œå¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚åœ¨è¿™ä¸ªåŒºåŸŸä¸­çš„ä»»æ„åœ°æ–¹å¼€å§‹ GC éƒ½æ˜¯å®‰å…¨çš„ã€‚å¯ä»¥æŠŠ Safe Region çœ‹ä½œæ˜¯æ‰©å±•äº†çš„ Safepointã€‚ å½“çº¿ç¨‹æ‰§è¡Œåˆ° Safe Region ä¸­çš„ä»£ç æ—¶ï¼Œé¦–å…ˆæ ‡è¯†è‡ªå·±å·²ç»è¿›å…¥äº† Safe Region å½“è¿™æ®µæ—¶é—´é‡Œ JVM éœ€è¦å‘èµ· GC æ—¶ï¼Œå¯¹äºæ ‡è¯†è‡ªå·±ä¸º Safe Region çŠ¶æ€çš„çº¿ç¨‹è®¤ä¸ºå®ƒæ˜¯å®‰å…¨çŠ¶æ€ å½“çº¿ç¨‹éœ€è¦ç¦»å¼€ Safe Region æ—¶ï¼Œæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²ç»å®Œæˆäº†æ ¹èŠ‚ç‚¹æšä¸¾ï¼Œå¦‚æœå®Œæˆåˆ™çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™ç­‰å¾…ç›´è‡³æ”¶åˆ°å¯ä»¥å®‰å…¨ç¦»å¼€ Safe Region çš„ä¿¡å·ä¸ºæ­¢ åƒåœ¾æ”¶é›†å™¨å¦‚æœè¯´æ”¶é›†ç®—æ³•æ˜¯å†…å­˜å›æ”¶çš„æ–¹æ³•è®ºï¼Œé‚£ä¹ˆåƒåœ¾æ”¶é›†å™¨å°±æ˜¯å†…å­˜å›æ”¶çš„å…·ä½“å®ç°ã€‚ä¸‹å›¾å±•ç¤ºäº† 7 ç§ä½œç”¨äºä¸åŒåˆ†ä»£çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå­˜åœ¨è¿çº¿çš„åƒåœ¾æ”¶é›†å™¨å¯ä»¥æ­é…ä½¿ç”¨ã€‚ HotSpotåƒåœ¾æ”¶é›†å™¨ Serial æ”¶é›†å™¨ æœ€åŸºæœ¬ã€å‘å±•å†å²æœ€æ‚ ä¹…çš„æ”¶é›†å™¨ å•çº¿ç¨‹ï¼Œè¿›è¡Œåƒåœ¾æ”¶é›†æ—¶å¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰å·¥ä½œçº¿ç¨‹ï¼ˆStop The Worldï¼‰ æ˜¯è™šæ‹Ÿæœºè¿è¡Œåœ¨ Client æ¨¡å¼ä¸‹é»˜è®¤çš„ æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œåœ¨ç”¨æˆ·çš„æ¡Œé¢åœºæ™¯åº”ç”¨ä¸­ï¼Œåˆ†é…ç»™è™šæ‹Ÿæœºçš„å†…å­˜ä¸€åŠä¸ä¼šå¾ˆå¤§ï¼Œæ”¶é›†å‡ åå…†ä¹ƒè‡³ä¸€ä¸¤ç™¾å…†çš„æ–°ç”Ÿä»£ï¼Œåœé¡¿æ—¶é—´å¯ä»¥æ§åˆ¶åœ¨ 100 æ¯«ç§’ä¹‹å†…ï¼Œå¯ä»¥æ¥å— å¯¹äºå•ä¸ª CPU çš„æƒ…å†µï¼Œæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡ ParNew æ”¶é›†å™¨ Serial æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬ è®¸å¤šè¿è¡Œåœ¨ Server æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºé¦–é€‰çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ åªæœ‰å®ƒå¯ä»¥ä¸ CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨é…åˆå·¥ä½œ åœ¨å• CPU ç¯å¢ƒä¸­ï¼Œæ•ˆç‡ä¸å¦‚ Serial æ”¶é›†å™¨ï¼›é»˜è®¤å¼€å¯çš„æ”¶é›†çº¿ç¨‹æ•°ä¸ CPU æ•°é‡ç›¸åŒ Parallel Scavenge æ”¶é›†å™¨ æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œé‡‡ç”¨å¤åˆ¶ç®—æ³• å…³æ³¨ç‚¹åœ¨äº è¾¾åˆ°å¯æ§åˆ¶çš„ååé‡ï¼ˆThroughputï¼‰ï¼Œååé‡ = è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + åƒåœ¾æ”¶é›†æ—¶é—´)ï¼Œæ˜¯ä¸€ä¸ªç™¾åˆ†æ•° åœé¡¿æ—¶é—´çŸ­çš„æ”¶é›†å™¨ï¼ˆä¾‹å¦‚ CMSï¼‰é€‚åˆä¸ç”¨æˆ·äº¤äº’çš„ç¨‹åºï¼›ååé‡é«˜çš„æ”¶é›†å™¨ï¼ˆä¾‹å¦‚ Parallelï¼‰é€‚åˆåå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„ç¨‹åº è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥ï¼šè™šæ‹Ÿæœºä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´å‚æ•°ä»¥æä¾›æœ€åˆé€‚çš„åœé¡¿æ—¶é—´æˆ–è€…æœ€å¤§çš„ååé‡ Serail Old æ”¶é›†å™¨ Serial æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå•çº¿ç¨‹ï¼Œâ€œæ ‡è®°-æ•´ç†â€ç®—æ³• ä¸»è¦æ„ä¹‰åœ¨äºç»™ Client æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä½¿ç”¨ Parallel Old æ”¶é›†å™¨ Parallel Scanvenge æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå¤šçº¿ç¨‹ï¼Œâ€œæ ‡è®°-æ•´ç†â€ç®—æ³• ååé‡ä¼˜å…ˆï¼šParallel Scanvenge + Parallel Old CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨ ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡ï¼Œåº”ç”¨äºç½‘ç«™ä»¥åŠ B/S ç³»ç»Ÿçš„æœåŠ¡ç«¯ï¼Œæ³¨é‡æœåŠ¡å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›åœé¡¿æ—¶é—´æœ€çŸ­ åŸºäºâ€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ï¼Œæ”¶é›†è¿‡ç¨‹åˆ†ä¸ºå››æ­¥ åˆå§‹æ ‡è®°ï¼ˆCMS initial markï¼‰ï¼Œæ ‡è®° GC Roots èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ å¹¶å‘æ ‡è®°ï¼ˆCMS concurrent markï¼‰ï¼Œè¿›è¡Œ GC Roots Tracing é‡æ–°æ ‡è®°ï¼ˆCMS remarkï¼‰ï¼Œä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½• å¹¶å‘æ¸…é™¤ï¼ˆCMS concurrent sweepï¼‰ åˆå§‹æ ‡è®°ã€é‡æ–°æ ‡è®°è¿™ä¸¤ä¸ªè¿‡ç¨‹éœ€è¦ Stop The World æœ‰ä¸‰ä¸ªæ˜æ˜¾ç¼ºç‚¹ å¯¹ CPU èµ„æºéå¸¸æ•æ„Ÿï¼Œå¹¶å‘é˜¶æ®µä¼šå ç”¨ä¸€éƒ¨åˆ†çº¿ç¨‹ï¼ˆæˆ–è€…è¯´ CPU èµ„æºï¼‰å¯¼è‡´ç”¨æˆ·ç¨‹åºå˜æ…¢ï¼Œååé‡é™ä½ã€‚CMS é»˜è®¤å¯åŠ¨çš„å›æ”¶çº¿ç¨‹æ•°æ˜¯ï¼ˆCPUæ•°é‡ + 3ï¼‰/4ï¼Œå½“ CPU ä¸è¶³ 4 ä¸ªæ—¶ï¼Œå¯¹ç”¨æˆ·ç¨‹åºå½±å“å¯èƒ½å˜å¾—å¾ˆå¤§ æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼ˆFloating Garbageï¼‰ï¼Œå¯èƒ½å‡ºç°â€œConcurrent Mode Failuteâ€è€Œå¯¼è‡´å¦ä¸€æ¬¡ Full GC å‘ç”Ÿã€‚â€œæµ®åŠ¨åƒåœ¾â€æ˜¯æŒ‡å¹¶å‘æ¸…ç†é˜¶æ®µæ‰€äº§ç”Ÿçš„åƒåœ¾ï¼Œå¿…é¡»ä¸ºè¿™éƒ¨åˆ†åƒåœ¾æå‰é¢„ç•™ç©ºé—´ï¼Œä»¥ä¾›å¹¶å‘æ”¶é›†æ—¶ç¨‹åºè¿ä½œä½¿ç”¨ å› ä¸ºé‡‡ç”¨çš„æ˜¯â€œæ ‡è®°-æ¸…ç†â€ç®—æ³•ï¼Œå½“ç©ºé—´ç¢ç‰‡è¿‡å¤šæ—¶ï¼Œæ— æ³•åˆ†é…å¤§å¯¹è±¡ï¼ŒCMS æ”¶é›†å™¨æä¾›-XX:+UseCMSCompactAtFullCollectionå‚æ•°ï¼Œç”¨æ¥åœ¨ FullGC æ—¶å¼€å¯å‹ç¼© G1ï¼ˆGarbage-Firstï¼‰ æ”¶é›†å™¨ JDK 1.7 æ­£å¼æ¨å‡ºï¼ˆ7u4ï¼‰ï¼Œé¢å‘æœåŠ¡ç«¯åº”ç”¨ ç‰¹ç‚¹ï¼šå¹¶è¡Œä¸å¹¶å‘ï¼Œåˆ†ä»£æ”¶é›†ï¼Œç©ºé—´æ•´åˆï¼Œå¯é¢„æµ‹çš„åœé¡¿ è¿‡ç¨‹ï¼šå°† Java å †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œé¿å…åœ¨æ•´ä¸ª Java å †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ï¼Œè€Œæ˜¯è¿½è¸ªå“¥å“¥ Region é‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªæ‚ é—²åˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„ Regionï¼ˆä¹Ÿæ˜¯ Garbage-First åå­—ç”±æ¥ï¼‰ åˆ†ä¸º 4 ä¸ªæ­¥éª¤ åˆå§‹æ ‡è®° å¹¶å‘æ ‡è®° æœ€ç»ˆæ ‡è®° ç­›é€‰å›æ”¶","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"https://lilei.pro/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"JVM","slug":"JVM","permalink":"https://lilei.pro/tags/JVM/"}]},{"title":"æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼ˆäºŒï¼‰JVM å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸","date":"2018-08-09T07:30:23.000Z","path":"2018/08/09/JVM-Note-02/","text":"æœ¬ç« ä»æ¦‚å¿µä¸Šä»‹ç» Java è™šæ‹Ÿæœºå†…å­˜çš„å„ä¸ªåŒºåŸŸï¼Œä»ä½œç”¨ã€æœåŠ¡å¯¹è±¡ã€å¯èƒ½äº§ç”Ÿçš„é—®é¢˜å‡ ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚ è¿è¡Œæ—¶æ•°æ®åŒºåŸŸæ ¹æ®ã€ŠJava è™šæ‹Ÿæœºè¿è¡Œè§„èŒƒã€‹çš„è§„å®šï¼ŒJava è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜å°†ä¼šåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè¿è¡Œæ—¶åŒºåŸŸï¼š è™šæ‹Ÿæœºæ•°æ®åˆ†åŒº çº¿ç¨‹ç§æœ‰ï¼šç¨‹åºè®¡æ•°å™¨ï¼Œè™šæ‹Ÿæœºæ ˆï¼Œæœ¬åœ°æ–¹æ³•æ ˆ çº¿ç¨‹å…±äº«ï¼šå †ï¼Œæ–¹æ³•åŒº ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç è¡Œå·æŒ‡ç¤ºå™¨ï¼ŒJVM é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼ï¼Œæ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½ã€‚ ç¨‹åºè®¡æ•°å™¨ç©ºé—´æ˜¯ç§æœ‰çš„ï¼ŒåŸå› åœ¨äº Java è™šæ‹Ÿæœºæ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶åˆ†é…å¤„ç†å™¨æ—¶é—´æ¥å®ç°çš„å¤šçº¿ç¨‹ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ã€‚ å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œ Java æ–¹æ³•ï¼Œåˆ™ç¨‹åºè®¡æ•°å™¨è®°å½•çš„æ˜¯è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤åœ°å€ å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œ Native æ–¹æ³•ï¼Œåˆ™ç¨‹åºè®¡æ•°å™¨å€¼ä¸ºç©ºï¼ˆUndefinedï¼‰ ç¨‹åºè®¡æ•°å™¨æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­ä¸ä¼šå‘ç”Ÿ OutOfMemoryError çš„åŒºåŸŸã€‚ Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰æè¿° Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ–¹æ³•è¿è¡Œä»å¼€å§‹åˆ°ç»“æŸï¼Œå¯¹åº”çš„æ˜¯æ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåŠå‡ºæ ˆçš„è¿‡ç¨‹ã€‚ä»¥ä¸‹ç€é‡ä»‹ç»å±€éƒ¨å˜é‡è¡¨ã€‚ å±€éƒ¨å˜é‡è¡¨å­˜æ”¾ä»¥ä¸‹ç±»å‹çš„å˜é‡ï¼Œå…¶ä¸­ 64 ä½é•¿åº¦çš„ long å’Œ double ç±»å‹æ•°æ®ä¼šå ç”¨ 2 ä¸ªå±€éƒ¨å˜é‡ç©ºé—´ï¼ˆSlotï¼‰ï¼Œå…¶ä½™æ•°æ®ç±»å‹åªå æ® 1 ä¸ªã€‚ ç¼–è¯‘æœŸå·²çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼šbooleanã€byteã€charã€shortã€intã€floatã€longã€double å¯¹è±¡å¼•ç”¨ï¼šreference ç±»å‹ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½® returnAddress ç±»å‹ï¼šæŒ‡å‘å­—èŠ‚ç æŒ‡ä»¤åœ°å€ å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…ä¿ƒå†œå»ºåœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ›´æ”¹å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚ åœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­ï¼Œå¯¹è¿™ä¸ªåŒºåŸŸè§„å®šäº†ä¸¤ç§å¼‚å¸¸æƒ…å†µï¼š StackOverflowError: çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ OutOfMemoryError: è™šæ‹Ÿæœºæ ˆè¿›è¡ŒåŠ¨æ€æ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ç±»ä¼¼äºè™šæ‹Ÿæœºæ ˆï¼Œåªä¸è¿‡æœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä¸ºæœ¬åœ°æ–¹æ³•æœåŠ¡ã€‚åŒæ ·ä¼šæŠ›å‡º StackOverflowError å’Œ OutOfMemoryErrorã€‚ Java å †ï¼ˆHeapï¼‰æ˜¯ Java è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—åŒºåŸŸï¼Œè¢«æ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚å †å­˜åœ¨çš„å”¯ä¸€æ„ä¹‰æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­çš„è¡¨è¿°æ˜¯â€œæ‰€æœ‰çš„å¯¹è±¡å’Œæ•°ç»„éƒ½è¦åœ¨å †ä¸Šåˆ†é…â€ã€‚ä½†æ˜¯éšç€ JIT ç¼–è¯‘å™¨çš„å‘å±•ä¸é€ƒé€¸åˆ†ææŠ€æœ¯é€æ¸æˆç†Ÿï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ä¼˜åŒ–æŠ€æœ¯å°†ä¼šå¯¼è‡´è¿™ä¸€è§„åˆ™ä¸å†é‚£ä¹ˆç»å¯¹ã€‚GC å°±æ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡è¿›è¡Œå›æ”¶ã€‚å †åŒºåŸŸç©ºé—´ä¸è¶³ä¼šå¯¼è‡´ OOMã€‚ æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ä¹Ÿæ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚åˆ«å Non-Heapã€‚HotSpot è™šæ‹Ÿæœºè®¾è®¡å›¢é˜Ÿé€‰æ‹©æŠŠ GC åˆ†ä»£æ”¶é›†æ‰©å±•è‡³æ–¹æ³•åŒºï¼Œå¯¼è‡´ä¹Ÿæœ‰äººç§°å‘¼æ–¹æ³•åŒºä¸ºâ€œæ°¸ä¹…ä»£â€ï¼ˆPermanent Generationï¼‰ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®è·µï¼Œä¼šå¯¼è‡´å†…å­˜æº¢å‡ºé—®é¢˜ï¼Œè€Œä¸”æå°‘æ•°çš„æ–¹æ³•ä¼šå› ä¸ºè¿™ä¸ªåŸå› è€Œåœ¨ä¸åŒè™šæ‹Ÿæœºä¸Šäº§ç”Ÿä¸åŒè¡¨ç°ã€‚ åƒåœ¾æ”¶é›†è¡Œä¸ºåœ¨æ–¹æ³•åŒºæ˜¯è¾ƒå°‘å‡ºç°çš„ï¼Œè€Œä¸”å›æ”¶ç‡ä¸é«˜ï¼Œå›æ”¶ç›®æ ‡ä¸»è¦æ˜¯é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»å‹çš„å¸è½½ã€‚ è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰ æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼ŒClass æ–‡ä»¶é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼ˆConstant Pool Tableï¼‰ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚å¯èƒ½ä¼šæŠ›å‡º OOM å¼‚å¸¸ã€‚ ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰ç›´æ¥å†…å­˜ä¸æ˜¯ JVM è¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼ŒJDK 1.4 ä¸­æ–°åŠ å…¥äº† NIOï¼ˆNew Input/Outputï¼‰ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å†²åŒºï¼ˆBufferï¼‰çš„ I/O æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚ä»è€Œé¿å…åœ¨ Java å †å’Œ Native å †ä¸­æ¥å›å¤åˆ¶æŠ¤å…·ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ã€‚ä½¿ç”¨ä¸å½“ä¼šæœ‰ OOM å¼‚å¸¸ã€‚ HotSpot è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜åŸºäºå®ç”¨ä¼˜å…ˆåŸåˆ™ï¼Œä»¥ HotSpot è™šæ‹Ÿæœºä¸ºä¾‹ï¼Œå­¦ä¹ åœ¨å®ƒåœ¨ Java å †ä¸­å¯¹è±¡åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹ã€‚ å¯¹è±¡åˆ›å»ºåœ¨è¯­è¨€å±‚é¢ä¸Šï¼Œå¯¹è±¡åˆ›å»ºåªéœ€è¦newå…³é”®å­—å³å¯å®Œæˆã€‚ä½†æ˜¯åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹èƒŒåå®é™…ä¸Šå¹¶ä¸é‚£ä¹ˆç®€å•ã€‚ å¹¶ä¸ç®€å• ç±»åŠ è½½è™šæ‹Ÿæœºæ”¶åˆ°ä¸€æ¡newæŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå»æ£€æŸ¥æŒ‡ä»¤å‚æ•°èƒ½å¦åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šè¿›è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚ åˆ†é…å†…å­˜å¯¹è±¡æ‰€éœ€å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåå³å¯å®Œå…¨ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…å†…å­˜çš„æ“ä½œç›¸å½“äºä»å †ä¸­åˆ’åˆ†å‡ºä¸€å—å¯ä½¿ç”¨çš„åŒºåŸŸã€‚æœ‰ä¸¤ç§åˆ†é…æ–¹å¼ï¼š æŒ‡é’ˆç¢°æ’ (Bump the Pointerï¼‰ï¼šå½“ Java å †ä¸­çš„å†…å­˜æ˜¯ç»å¯¹è§„æ•´çš„ï¼Œç”¨è¿‡çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜åˆ†ä¸¤è¾¹å­˜æ”¾ï¼Œå¹¶ä¸”æœ‰æŒ‡é’ˆæŒ‡å‘æ˜ç¡®çš„ç•Œé™ï¼Œæ­¤æ—¶åˆ†é…å†…å­˜åªéœ€è¦å°†æŒ‡é’ˆç§»åŠ¨ä¸å¯¹è±¡å¤§å°ç›¸åŒè·ç¦»å³å¯ã€‚Serialã€ParNew ç­‰å¸¦ Compact è¿‡ç¨‹çš„æ”¶é›†å™¨é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚ ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰ï¼šå½“å†…å­˜ä¸è§„æ•´ã€ç”¨è¿‡çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜äº¤å‰æ’åˆ—æ—¶ï¼Œéœ€è¦ç”±è™šæ‹Ÿæœºç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨è®°å½•å“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œåˆ†é…æ—¶ä¸ºå¯¹è±¡å¯»æ‰¾ä¸€å—è¶³å¤Ÿå¤§çš„åŒºåŸŸå¹¶æ›´æ–°åˆ—è¡¨ã€‚CMS è¿™ç§åŸºäº Mark-Sweep ç®—æ³•çš„æ”¶é›†å™¨é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚ é™¤äº†åˆ’åˆ†å¯ç”¨ç©ºé—´å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘ç§»åŠ¨æŒ‡é’ˆå¸¦æ¥çš„å¹¶å‘é—®é¢˜ã€‚è§£å†³å¹¶å‘é—®é¢˜æœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼š å¯¹åˆ†é…å†…å­˜ç©ºé—´çš„åŠ¨ä½œè¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œè™šæ‹Ÿæœºé‡‡ç”¨ CAS é…ä¸Šå¤±è´¥é‡è¯•çš„æ–¹æ³•ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§ æŠŠå†…å­˜åˆ†é…çš„åŠ¨ä½œæŒ‰ç…§çº¿ç¨‹åˆ’åˆ†åœ¨ä¸åŒç©ºé—´è¿›è¡Œï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨ Java å †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œç§°ä¸ºæœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼ˆThread Local Allocation Bufferï¼ŒTLABï¼‰ã€‚çº¿ç¨‹åœ¨å„è‡ªçš„ TLAB ä¸Šä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼Œåªæœ‰å½“ TLAB ç”¨å°½å¹¶åˆ†é…æ–°çš„ TLAB æ—¶ï¼Œæ‰éœ€è¦åŒæ­¥é”å®šã€‚ å†…å­˜åˆ†é…å®Œæˆåï¼Œè™šæ‹Ÿæœºä¼šè®²æ‰€åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ã€‚ å¯¹è±¡è®¾ç½®è™šæ‹Ÿæœºä¼šè®¾ç½®å¯¹è±¡ä¿¡æ¯ï¼ˆå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å“ˆå¸Œç ã€GC åˆ†ä»£å¹´é¾„ï¼‰ï¼Œè¿™äº›ä¿¡æ¯ä¿å­˜åœ¨å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰ä¸­ã€‚ initåœ¨ä»¥ä¸Šæ­¥éª¤éƒ½å®Œæˆåï¼Œå¼€å§‹å¯¹è±¡åˆ›å»ºï¼Œå³æ‰§è¡Œ&lt;init&gt;æ–¹æ³•ï¼Œå°†å¯¹è±¡æŒ‰ç…§æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨äº§ç”Ÿå‡ºæ¥ã€‚ å¯¹è±¡å†…å­˜å¸ƒå±€åœ¨ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å¸ƒå±€åˆ†ä¸ºä¸‰å—ï¼šå¯¹è±¡å¤´ï¼ˆHeaderï¼‰ã€å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰ã€å¯¹é½å¡«å……ï¼ˆPaddingï¼‰ã€‚ å¯¹è±¡å¤´ åŒ…æ‹¬ä¸¤éƒ¨åˆ†ä¿¡æ¯ å¯¹è±¡è‡ªèº«è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ï¼ˆHashCodeï¼‰ã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹ IDã€åå‘æ—¶é—´æˆ³ç­‰ã€‚è¿™éƒ¨åˆ†æ•°æ®é•¿åº¦åœ¨ 32 ä½å’Œ 64 ä½è™šæ‹Ÿæœºä¸­åˆ†åˆ«æ˜¯ 32bit å’Œ 64bitï¼Œå®˜æ–¹ç§°å®ƒä¸ºâ€œMark Wordâ€ã€‚æ˜¯ä¸€ä¸ªéå›ºå®šçš„æ•°æ®ç»“æ„ã€‚ ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚å¦‚æœå¯¹è±¡æ˜¯ Java æ•°ç»„ï¼Œè¿˜éœ€è¦ä¸€å—ç”¨äºè®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ã€‚ å®ä¾‹æ•°æ® æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å„ç§ç±»å‹å­—æ®µå†…å®¹ã€‚å­˜å‚¨é¡ºåºå—è™šæ‹Ÿæœºåˆ†é…ç­–ç•¥å‚æ•°ï¼ˆFieldsAllocationStyleï¼‰å’Œå­—æ®µåœ¨ Java ä»£ç ä¸­å®šä¹‰é¡ºåºå½±å“ã€‚ HotSpot è™šæ‹Ÿæœºé»˜è®¤åˆ†é…ç­–ç•¥æ˜¯ longs/doublesã€intsã€shorts/charsã€bytes/booleansã€oopsï¼ˆOrdinary Object Pointersï¼‰ï¼Œç›¸åŒå®½åº¦çš„å­—æ®µæ€»è¢«åˆ†é…åˆ°ä¸€èµ· åœ¨æ»¡è¶³ä¸Šä¸€æ¡ä»¶çš„å‰æä¸‹ï¼Œåœ¨çˆ¶ç±»ä¸­å®šä¹‰çš„å˜é‡ä¼šå‡ºç°åœ¨å­ç±»ä¹‹å‰ã€‚å¦‚æœ CompactFields å‚æ•°å€¼ä¸º trueï¼Œåˆ™å­ç±»ä¸­è¾ƒçª„çš„å˜é‡ä¹Ÿå¯èƒ½ä¼šæ’å…¥åˆ°çˆ¶ç±»å˜é‡ç©ºéš™ä¹‹ä¸­ã€‚ å¯¹é½å¡«å…… ä¸æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå› ä¸º HotSpot è™šæ‹Ÿæœºå†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€ï¼Œå› æ­¤å½“ å®ä¾‹æ•°æ® éƒ¨åˆ†æ²¡æœ‰å¯¹é½æ—¶ï¼Œå°±è¦é€šè¿‡å¯¹é½å¡«å……æ¥è¡¥é½ã€‚ å¯¹è±¡è®¿é—®å®šä½JVM æ ˆä¸­ä¿å­˜çš„æ˜¯ reference æ•°æ®ï¼ŒæŒ‡å‘å­˜æ”¾åœ¨å †ä¸­çš„å¯¹è±¡ï¼Œå¯¹è±¡çš„è®¿é—®ï¼ˆå®šä½ï¼‰æ–¹å¼å–å†³äºè™šæ‹Ÿæœºå…·ä½“å®ç°ï¼Œä¸»æµçš„æœ‰å¥æŸ„å’Œç›´æ¥æŒ‡é’ˆä¸¤ç§ï¼Œå®ƒä»¬å„æœ‰ä¼˜åŠ£ã€‚ å¥æŸ„Java å †ä¸­åˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreference ä¸­ä¿å­˜çš„æ˜¯å¥æŸ„åœ°å€ï¼Œå¥æŸ„ä¸­åŒ…å«å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªçš„å…·ä½“åœ°å€ä¿¡æ¯ã€‚ å¥æŸ„ ä¼˜ç‚¹ reference ä¸­ä¿å­˜çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨ï¼ˆæ¯”å¦‚ GCï¼‰æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­å®ä¾‹æ•°æ®æŒ‡é’ˆçš„åœ°å€ï¼Œ reference æœ¬èº«ä¸å˜ã€‚åœ¨å¯¹è±¡é¢‘ç¹å¼‚åŠ¨çš„åœºæ™¯é‡Œæ€§èƒ½æ›´å¥½ã€‚ ç›´æ¥æŒ‡é’ˆJava å †å¯¹è±¡å¤´é‡ä¿å­˜ç±»å‹æ•°æ®ä¿¡æ¯ï¼Œreference ç›´æ¥æŒ‡å‘å¯¹è±¡åœ°å€ã€‚ ç›´æ¥æŒ‡é’ˆ ä¼˜ç‚¹ é€Ÿåº¦æ›´å¿«ï¼ŒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½å¼€é”€ï¼Œåœ¨å¯¹è±¡é¢‘ç¹è®¿é—®çš„åœºæ™¯é‡Œæ€§èƒ½æ›´å¥½ã€‚HotSpot VM ä½¿ç”¨çš„æ˜¯ç›´æ¥æŒ‡é’ˆæ–¹å¼ã€‚","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"https://lilei.pro/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"JVM","slug":"JVM","permalink":"https://lilei.pro/tags/JVM/"}]},{"title":"æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼ˆä¸€ï¼‰èµ°è¿‘ Java","date":"2018-08-09T00:45:15.000Z","path":"2018/08/09/JVM-Note-01/","text":"æœ€è¿‘é˜…è¯»å‘¨å¿—æ˜çš„ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœº JVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ï¼Œä»¥è¯»ä¹¦ç¬”è®°çš„å½¢å¼è®°å½•ä¸‹æ‰€å­¦æ‰€å¾—ï¼Œå…ˆç»™è‡ªå·±å®šä¸ªå°ç›®æ ‡ï¼Œå®Œæˆ10ç¯‡ç¬”è®°ã€‚ ä¸–ç•Œä¸Šå¹¶æ²¡æœ‰å®Œç¾çš„ç¨‹åºï¼Œä½†æˆ‘ä»¬å¹¶ä¸å› æ­¤è€Œæ²®ä¸§ï¼Œå› ä¸ºå†™ç¨‹åºæœ¬æ¥å°±æ˜¯ä¸€ä¸ªä¸æ–­è¿½æ±‚å®Œç¾çš„è¿‡ç¨‹ã€‚ æ¦‚è¿°Java ä¸ä»…ä»…æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œæ›´æ˜¯ä¸€ä¸ªç”±ä¸€ç³»åˆ—è®¡ç®—æœºè½¯ä»¶å’Œè§„èŒƒå½¢æˆçš„æŠ€æœ¯ä½“ç³»ï¼Œè¿™ä¸ªæŠ€æœ¯ä½“ç³»æä¾›äº†å®Œæ•´çš„ç”¨äºè½¯ä»¶å¼€å‘å’Œè·¨å¹³å°éƒ¨ç½²çš„æ”¯æŒç¯å¢ƒã€‚å®ƒæœ‰ä¸€ç³»åˆ—ä¼˜ç‚¹ï¼š æ‹¥æœ‰ä¸€é—¨ç»“æ„ä¸¥è°¨ã€é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ æ‘†è„±ç¡¬ä»¶å¹³å°æŸç¼šï¼Œå®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„è¿è¡Œâ€ æä¾›ç›¸å¯¹å®‰å…¨çš„å†…å­˜ç®¡ç†å’Œè®¿é—®æœºåˆ¶ï¼Œé¿å…äº†ç»å¤§éƒ¨åˆ†å†…å­˜æ³„éœ²å’ŒæŒ‡é’ˆè¶Šç•Œ å®ç°çƒ­ç‚¹ä»£ç æ£€æµ‹å’Œè¿è¡Œæ—¶ç¼–è¯‘åŠä¼˜åŒ–ï¼Œä½¿å¾— Java åº”ç”¨èƒ½éšç€è¿è¡Œæ—¶é—´çš„å¢åŠ è€Œè·å–æ›´é«˜çš„æ€§èƒ½ æœ‰ä¸€å¥—å®Œå–„çš„åº”ç”¨ç¨‹åºæ¥å£ï¼Œè¿˜æœ‰æ— æ•°ç¬¬ä¸‰æ–¹ç±»åº“å®ç°å„ç§åŠŸèƒ½ Java æŠ€æœ¯ä½“ç³»æŒ‰ç…§ç»„æˆéƒ¨åˆ†æ¥åˆ†ï¼ŒSun å®˜æ–¹å®šä¹‰çš„ Java æŠ€æœ¯ä½“ç³»åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å†…å®¹ Java ç¨‹åºè®¾è®¡è¯­è¨€ å„ç§ç¡¬ä»¶å¹³å°ä¸Šçš„ Java è™šæ‹Ÿæœº Class æ–‡ä»¶æ ¼å¼ Java API ç±»åº“ æ¥è‡ªå•†ä¸šæœºæ„å’Œå¼€æºç¤¾åŒºçš„ç¬¬ä¸‰æ–¹ Java ç±»åº“ JDKï¼ˆJava Development Kitï¼‰ï¼šJava ç¨‹åºè®¾è®¡è¯­è¨€ + Java è™šæ‹Ÿæœº + Java API ç±»åº“ï¼Œæ˜¯æ”¯æŒ Java ç¨‹åºå¼€å‘çš„æœ€å°ç¯å¢ƒ JREï¼ˆJava Runtime Environmentï¼‰ï¼šJava è™šæ‹Ÿæœº + Java SE APIï¼Œæ”¯æŒJava ç¨‹åºè¿è¡Œçš„æœ€å°ç¯å¢ƒ JavaæŠ€æœ¯ä½“ç³»æ‰€åŒ…å«çš„å†…å®¹ æŒ‰ç…§æ‰€æœåŠ¡çš„é¢†åŸŸæ¥åˆ†ï¼ŒJava æŠ€æœ¯ä½“ç³»å¯ä»¥åˆ†ä¸º4ä¸ªå¹³å° Java Cardï¼šæ”¯æŒä¸€äº› Java å°ç¨‹åºï¼ˆAppletsï¼‰è¿è¡Œåœ¨å°å†…å­˜è®¾å¤‡ä¸Šçš„å¹³å° Java MEï¼ˆMicro Editionï¼‰ï¼šæ”¯æŒ Java ç¨‹åºè¿è¡Œåœ¨ç§»åŠ¨ç»ˆç«¯ï¼ˆæ‰‹æœºã€PDAï¼‰å¹³å°ï¼Œå¯¹ Java API æœ‰æ‰€ç²¾ç®€ï¼Œå¹¶åŠ å…¥äº†é’ˆå¯¹ç§»åŠ¨ç»ˆç«¯çš„æ”¯æŒï¼Œæ—§ç§° J2ME Java SEï¼ˆStandard Editionï¼‰ï¼šæ”¯æŒé¢å‘æ¡Œé¢çº§åº”ç”¨ï¼ˆå¦‚ Windows ä¸‹çš„åº”ç”¨ç¨‹åºï¼‰çš„ Java å¹³å°ï¼Œæä¾›å®Œæ•´çš„ Java æ ¸å¿ƒ APIï¼Œæ—§ç§° J2SE Java EEï¼ˆEnterprise Editionï¼‰ï¼šæ”¯æŒé¢å‘å¤šå±‚æ¶æ„çš„ä¼ä¸šåº”ç”¨ï¼ˆå¦‚ ERPã€CRMï¼‰çš„ Java å¹³å°ï¼Œé™¤äº†æä¾› Java SE API å¤–ï¼Œè¿˜å¯¹å…¶åšäº†å¤§é‡è¡¥å……ä»¥åŠéƒ¨ç½²æ”¯æŒï¼Œæ—§ç§° J2EE Java å‘å±•å² 1991 å¹´ 4 æœˆï¼ŒOakï¼ˆæ©¡æ ‘ï¼‰å‡ºç°ï¼Œç›®çš„åœ¨äºå¼€å‘ä¸€ç§èƒ½å¤Ÿåœ¨å„ç§æ¶ˆè´¹å‹ç”µå­äº§å“ï¼ˆæœºé¡¶ç›’ã€å†°ç®±ã€æ”¶éŸ³æœºï¼‰ä¸Šè¿è¡Œçš„ç¨‹åºæ¶æ„ï¼Œæ˜¯ä¸º Java å‰èº« 1995 å¹´ï¼ŒOak æ­£å¼æ›´åä¸º Javaï¼Œå¹¶ä¸”åœ¨ SunWorld å¤§ä¼šä¸Šæ­£å¼å‘å¸ƒ 1.0 ç‰ˆæœ¬ï¼ŒåŒæ—¶æå‡ºâ€œWrite Onceï¼ŒRun Everywhereâ€å£å· 1998 å¹´ï¼Œå‘å¸ƒé‡Œç¨‹ç¢‘å¼çš„ 1.2 ç‰ˆæœ¬ï¼ŒSun åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å°† Java æŒ‰ç…§æœåŠ¡é¢†åŸŸæ‹†åˆ†ä¸ºä¸‰ä¸ªæ–¹å‘ï¼šJ2SE, J2ME, J2EEï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡å†…ç½®äº† JIT ç¼–è¯‘å™¨ï¼Œä»¥åŠå†…ç½® Classicã€HotSpotã€Exact ä¸‰ç§ VM 2002 å¹´ï¼Œå‘å¸ƒç¬¬ä¸€ä¸ªçœŸæ­£æˆç†Ÿçš„ç‰ˆæœ¬ 1.4ï¼ŒåŒå¹´å‡ºç° .NET 2009 å¹´ï¼Œå‘å¸ƒ 1.7ï¼Œä»£å· Dolphin æµ·è±š å®è·µï¼šç¼–è¯‘ JDKæ—¶é—´åŸå› æ²¡æœ‰è¿›è¡Œè¿›è¡Œç¼–è¯‘ï¼Œåªæ˜¯æŠŠæºç ä¸‹è½½ä¸‹æ¥ï¼Œæ—¥åæœ‰éœ€è¦ä¼šè¡¥ä¸Š","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"https://lilei.pro/tags/è¯»ä¹¦ç¬”è®°/"},{"name":"JVM","slug":"JVM","permalink":"https://lilei.pro/tags/JVM/"}]},{"title":"æœ¬å‘¨æ€»ç»“ 20180723 ~ 20180729","date":"2018-07-30T11:02:20.000Z","path":"2018/07/30/weekly-20180723-20180729/","text":"ä½ çš„ç—›è‹¦æ˜¯å› ä¸ºï¼ŒåŒ…è£¹ä½ å¿ƒæ™ºçš„å¤–å£³ï¼Œæ­£åœ¨ç ´è£‚æ¯ä¼¤ã€‚ä½ å¿…é¡»ç»å†ç—›è‹¦ï¼Œæ­£å¦‚æœå£³å¿…é¡»ç ´è£‚ï¼Œæœä»æ‰è§é˜³å…‰ã€‚ åˆšåˆšåº¦è¿‡ä¸ƒæœˆçš„æœ€åä¸€å‘¨ï¼Œè¿™ä¸€å‘¨è‡ªå·±å¾€è¿”è·‘äº†ä¸¤æ¬¡æ­å·ï¼Œä¸€å…±é¢äº†5å®¶å…¬å¸ï¼Œå…¶ä¸­ä¸¤å®¶ç°åœºï¼Œä¸‰å®¶ç”µé¢ã€‚ä¸ƒæœˆçš„æ­å·æ°”æ¸©è¾¾åˆ°ä¸‰åä¸ƒåº¦ï¼Œæ¯”ä¸Šæµ·å¹³å‡é«˜å‡ºå››äº”åº¦ï¼Œé¡¶ç€çƒˆæ—¥å¥”æ³¢åœ¨åŸä¸œåŸè¥¿ï¼Œè¿™æ ·çš„ç»å†ï¼Œè¿˜çœŸæ˜¯éš¾å¾—å•Šã€‚","tags":[{"name":"å‘¨æŠ¥","slug":"å‘¨æŠ¥","permalink":"https://lilei.pro/tags/å‘¨æŠ¥/"}]},{"title":"é¢è¯•çŸ¥è¯†æ•´ç† 2018.07.29","date":"2018-07-29T04:48:48.000Z","path":"2018/07/29/interview-180729/","text":"æœ‰ä»€ä¹ˆæ‰‹æ®µå¯ä»¥å‡å°‘APKä½“ç§¯è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆéœ€è¦äº†è§£APKä½“ç§¯å¢å¤§çš„åŸå› ï¼Œæˆ‘ä»¬ä»è¿™å¼ ç»å…¸çš„APKæ„å»ºæµç¨‹å›¾å¼€å§‹åˆ†æã€‚ apk_build å¯ä»¥çœ‹åˆ°æœ€ç»ˆç”Ÿæˆçš„ APK é‡Œé¢ï¼Œä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†å†…å®¹ï¼šJava æºç ç¼–è¯‘å‡ºæ¥çš„.dexæ–‡ä»¶ï¼Œç¼–è¯‘åçš„èµ„æºæ–‡ä»¶ &amp; æœªç»ç¼–è¯‘çš„assetsç›®å½•ï¼Œä»¥åŠä¸€äº›ç» NDK ç¼–è¯‘åç”Ÿæˆçš„.soæ–‡ä»¶ã€‚ä¸‹é¢é’ˆå¯¹è¿™ä¸‰æ–¹é¢ç»™å‡ºä¼˜åŒ–çš„å»ºè®®ã€‚ dex æ–‡ä»¶dex æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰ Java ç±»ç¼–è¯‘å‡ºæ¥ç±»æ–‡ä»¶ã€‚ä»â€œæ•°é‡â€ä¸â€œè´¨é‡â€ä¸¤æ–¹é¢å…¥æ‰‹ï¼Œæˆ‘ä»¬å¯ä»¥å‰Šå‡ç±»çš„æ•°ç›®ï¼Œè¿˜å¯ä»¥å‡å°‘ç±»æ–‡ä»¶çš„å¤§å°ã€‚ å¼€å¯ Proguardè¿™æ ·å¯ä»¥åœ¨æ‰“åŒ…æ—¶å»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„ç±»ï¼Œä»¥åŠç¼©çŸ­ç±»å’Œå­—æ®µã€æ–¹æ³•çš„å‘½åï¼Œä»è€Œå‡å°‘ class æ–‡ä»¶å¤§å°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŠŠè¦ä¿ç•™å‘½åï¼ˆæ¯”å¦‚åå°„ï¼‰çš„ç±» keep ä½ã€‚å¯¹äºæ··æ·†åæ‰“åŒ…å‡ºæ¥çš„ APK åº”å½“è¿›è¡Œå……åˆ†çš„å›å½’æµ‹è¯•ã€‚ é€‰æ‹©è¾ƒå°çš„é€‚ç”¨äºç§»åŠ¨å¹³å°çš„ç¬¬ä¸‰æ–¹ç±»åº“æ—¢å¯ä»¥å‡å°‘äº†åŒ…ä½“ sizeï¼Œä¹Ÿèƒ½å‡å°‘æ–¹æ³•æ•°ï¼Œä»è€Œé¿å… 65535 é—®é¢˜ã€‚æ¯”å¦‚åœ¨æ¥å…¥ JSON è§£æåº“æ—¶ï¼Œæ¯”è¾ƒå¸¸è§çš„å‡ ç§ç±»åº“æœ‰ï¼šGsonï¼ˆ2.8.5ï¼Œ235Kbï¼‰ã€Jacksonï¼ˆ2.9.5ï¼Œä¸‰ä¸ª Jarï¼Œå…± 1.7Mbï¼‰ã€Fastjsonï¼ˆ1.2.47ï¼Œ533Kbï¼‰ï¼Œåœ¨æ»¡è¶³éœ€æ±‚çš„å‰æä¸‹é€‰æ‹©åŒ…ä½“æœ€å°çš„ Gsonã€‚ å®šåˆ¶ç¬¬ä¸‰æ–¹åº“å¯¹äºå¼€æºçš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚æœé¡¹ç›®é‡Œåªç”¨åˆ°å…¶ä¸­ 10% ç”šè‡³æ›´å°‘çš„åŠŸèƒ½ï¼Œä¸å¦¨ä»…å°†ç”¨åˆ°çš„æºç æ‹·è´è‡³è‡ªå·±é¡¹ç›®é‡Œï¼Œè€Œä¸æ˜¯é€šè¿‡ gradle å®Œæ•´å¼•å…¥ã€‚ èµ„æºæ–‡ä»¶ä¸»è¦æ˜¯å›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰ï¼Œå¤„ç†ä¸å½“çš„è¯ä¸€å¼ å›¾ç‰‡å¯èƒ½å°±ä¼šå¢åŠ  1Mb çš„ä½“ç§¯ï¼Œå› æ­¤å¿…é¡»è°¨æ…å¯¹å¾…èµ„æºæ–‡ä»¶ï¼Œä¸è¦ä¸åŠ è€ƒè™‘åœ°å…¨ç›˜æ¥å—è®¾è®¡å¸ˆç»™å‡ºçš„åˆ‡å›¾ã€‚ å‹ç¼©å¤§å°å¤§éƒ¨åˆ† png å›¾ç‰‡æ˜¯å¯ä»¥å‹ç¼©çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨https://compresspng.com/åœ¨çº¿è¿›è¡Œå‹ç¼©ã€‚å¯¹äºéŸ³è§†é¢‘ï¼Œä¹Ÿè¦åœ¨ä¿è¯æ•ˆæœçš„å‰æä¸‹ï¼Œå°½é‡ç¼©å‡ä½“ç§¯ã€‚ ä½¿ç”¨æ›´æ˜“æ‰©å±•çš„å›¾ç‰‡æ ¼å¼ä½¿ç”¨çŸ¢é‡å›¾ã€.9 å›¾ä»£æ›¿é«˜æ¸…åˆ‡å›¾ï¼Œå°¤å…¶æ˜¯è§„åˆ™å½¢çŠ¶çš„èƒŒæ™¯ã€è¾¹æ¡†å›¾ç‰‡ç­‰ã€‚ ä½¿ç”¨ WebP æ ¼å¼WebPæ ¼å¼æ˜¯æœ‰æŸå‹ç¼©ï¼ˆåƒJPEGï¼‰ä¸”æœ‰é€æ˜é€šé“ï¼ˆåƒPNGï¼‰ï¼Œä¸”å‹ç¼©ç‡é«˜äºJPEGæˆ–PNGã€‚åœ¨Android Studioä¸­ï¼Œèƒ½å°†BMPï¼ŒJPGï¼ŒPNGæˆ–è€…é™æ€GIFå›¾ç‰‡è½¬æ¢æˆWebPæ ¼å¼ã€‚ ä½¿ç”¨WebPæ–‡ä»¶æ ¼å¼ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚ç¬¬ä¸€ï¼Œä½äºAndroid 3.2çš„ç‰ˆæœ¬ä¸æ”¯æŒWebPï¼Œç¬¬äºŒï¼ŒWebPçš„è§£ç æ—¶é—´æ¯”PNGé•¿ã€‚ ç”¨ä»£ç ä»£æ›¿å›¾ç‰‡ä½¿ç”¨å±æ€§åŠ¨ç”»ï¼Œè€Œéå¸§åŠ¨ç”»ã€‚å¸§åŠ¨ç”»é€šå¸¸éœ€è¦å¤šå¼ å›¾ç‰‡ç»„åˆæ‰èƒ½è¿›è¡Œæ’­æ”¾ï¼Œæ­¤æ—¶é€šè¿‡ä»£ç å®ç°ç¼©æ”¾ã€æ—‹è½¬ç­‰åŠ¨ç”»æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼›ç”¨ RotateDrawable ä»£æ›¿ä»…ä»…æ˜¯æ–¹å‘ä¸åŒçš„â€œå†…å®¹ç›¸åŒâ€çš„å›¾ç‰‡ï¼›ç”¨ layer-list æ¥åˆ¶ä½œå¤šå±‚å›¾ç‰‡ä»è€Œè¾¾åˆ°å¤ç”¨ã€‚ åˆ é™¤ä¸å†ä½¿ç”¨çš„èµ„æºæ–‡ä»¶éšç€ç‰ˆæœ¬è¿­ä»£ï¼Œä¸€äº›æ—§æ—¥éœ€æ±‚å¼•å…¥çš„èµ„æºæ–‡ä»¶å°†ä¸å†ä½¿ç”¨ï¼Œæ­¤æ—¶åº”å½“å°†å®ƒä»¬åˆ é™¤ã€‚Android Studio è‡ªå¸¦çš„ Lint å·¥å…·å¯ä»¥å¸®æˆ‘ä»¬å®Œæˆè¿™ä»¶äº‹ã€‚åœ¨ AS çš„èœå•ä¸­é€‰æ‹© Analyze -&gt; Inspect Codeã€‚åˆ†æéœ€è¦ä¸€å®šæ—¶é—´ï¼Œå¾…åˆ†æå®Œæˆåä¼šåœ¨çª—å£å±•ç¤ºç»“æœã€‚å…¶ä¸­ Unused resources å³æ˜¯æœªä½¿ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ã€‚ ä¸è¦å¿˜äº†æ¸…ç† assets æ–‡ä»¶å¤¹ä¸‹ä¸å†ä½¿ç”¨çš„æ–‡ä»¶ã€‚ unused_res åˆ é™¤èµ„æºæ˜¯æ ¹æ²»çš„æ–¹æ³•ï¼Œå¦‚æœä½ æƒ³å·ç‚¹æ‡’ï¼Œå¯ä»¥é€šè¿‡ shrinkResources å±æ€§è®©ç¼–è¯‘å™¨æ‰“åŒ…æ—¶è‡ªåŠ¨å‰”é™¤ä¸å†ä½¿ç”¨çš„èµ„æºï¼Œè¯¥å±æ€§éœ€è¦ä¸ proguard åŒæ—¶å¼€å¯ã€‚ 1234567buildTypes &#123; release &#123; minifyEnabled true shrinkResources true proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125;&#125; å¦‚æœæƒ³çœ‹çœ‹åœ¨æ¿€æ´»è‡ªåŠ¨ç¼©å‡èµ„æºå APK ç¼©å‡äº†å¤šå°‘ï¼Œå¯ä»¥è¿è¡Œ shrinkReleaseResources ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ä¼šæ‰“å°å‡ºåŒ…çš„å¤§å°ç¼©å‡äº†å¤šå°‘ã€‚ è‡ªåŠ¨ç¼©å‡èµ„æºæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå®ƒå¯èƒ½ç§»é™¤äº†è¿‡å¤šçš„èµ„æºï¼Œç‰¹åˆ«æ˜¯é‚£äº›åŠ¨æ€ä½¿ç”¨çš„èµ„æºè‚¯å®šä¼šè¢«åˆ é™¤ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨ res/raw/ ä¸‹çš„ keep.xml æ–‡ä»¶ä¸­å®šä¹‰è¿™äº›ä¾‹å¤–ã€‚ æ”¾å¼ƒä¸€äº›å›¾ç‰‡èµ„æºAndroid æœ‰ ldpiã€mdhiã€hdpiã€xhdpiã€xxhdpiã€xxxhdpi ç­‰å¤šç§åˆ†è¾¨ç‡æ ¼å¼ï¼Œè°¨æ…çš„äººä¹Ÿè®¸ä¼šé’ˆå¯¹åˆ†è¾¨ç‡æä¾›ä¸€ä»½åˆ‡å›¾ï¼Œä½†æˆ‘åœ¨è¿™é‡Œåƒä½ å»ºè®®ï¼Œåƒä¸‡åˆ«è¿™ä¹ˆåšã€‚ ä¸€æ–¹é¢ï¼ŒAndroid ç³»ç»Ÿæä¾›äº†å…¼å®¹çš„å¤„ç†æ–¹æ¡ˆï¼Œæ¯”å¦‚ä¼šæŠŠ hdpi çš„å›¾ç‰‡ç¼©æ”¾åˆ° ldpi ä½¿ç”¨ã€‚ å¦ä¸€æ–¹é¢ï¼Œåœ¨æ·»åŠ èµ„æºæ–‡ä»¶æ—¶åº”å½“è€ƒè™‘å®ƒæ‰€å¯¹åº”æœºå‹çš„å æœ‰ç‡ã€‚æ¯”å¦‚ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸éœ€è¦å‡†å¤‡ ldpi å’Œ xxxhdpi çš„å›¾ç‰‡ï¼Œå‰è€…çš„æ‰‹æœºæ—©å·²è¿‡æ—¶ï¼Œåè€…åˆ™æ˜¯ç»™ 2K å±å¹•ä½¿ç”¨çš„ï¼Œç›®å‰å¸‚é¢ä¸Šå¹¶ä¸å¸¸è§ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å¿½ç•¥ã€‚ å¯¹äºç¬¬ä¸‰æ–¹ aar å¼•å…¥çš„èµ„æºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¼•å…¥ç‰¹å®šåˆ†è¾¨ç‡çš„ï¼Œé€šè¿‡ gradle é…ç½®å®ç°è¿™ä¸€ç‚¹ã€‚ 123456defaultConfig &#123; // ... resConfigs \"en\", \"de\", \"fr\", \"it\" // æŒ‡å®šè¯­è¨€ resConfigs \"hdpi\", \"xhdpi\", \"xxhdpi\" // æŒ‡å®šæ˜¾ç¤ºå¯†åº¦&#125; so æ–‡ä»¶å½“æˆ‘ä»¬é¡¹ç›®é‡Œéœ€è¦ä½¿ç”¨ NDK æ—¶ï¼Œä¼šå°†ç¼–è¯‘ç”Ÿæˆçš„ .so æ–‡ä»¶ç½®äºé¡¹ç›®é‡Œé¢ï¼Œå½“ä½ è§£å‹ä¸€ä¸ª APK æ—¶ä¼šå‘ç°å®ƒä»¬çš„èº«å½±ã€‚æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥ç¼©å‡å®ƒä»¬æ‰€å çš„ä½“ç§¯ã€‚ ä½¿ç”¨å…¼å®¹æŒ‡ä»¤é›†å¤„ç†å™¨çš„æŒ‡ä»¤é›†é€šå¸¸æ˜¯å‘ä¸‹å…¼å®¹çš„ï¼Œæ¯”å¦‚[TODO]çš„æŒ‡ä»¤é›†å°±å¯ä»¥å…¼å®¹[TODO]ï¼Œæ„å‘³ç€ä½ å¯ä»¥åªæä¾›ä¸€ä»½[TODO]çš„ soï¼ˆä½†æˆ‘ä¸å»ºè®®è¿™ä¹ˆåšï¼Œå› ä¸ºæ›´é«˜ç‰ˆæœ¬çš„æŒ‡ä»¤é›†å¯ä»¥æä¾›æ›´é«˜çš„è¿è¡Œæ•ˆç‡ï¼‰ã€‚ å»é™¤å®Œå…¨ç”¨ä¸åˆ°çš„æŒ‡ä»¤é›†æ–‡ä»¶æ¯”å¦‚ x86ã€x86_64ï¼Œç°åœ¨æå°‘æ‰‹æœºæ˜¯ä½¿ç”¨ x86 çš„ CPU æ¶æ„äº†ï¼Œä½ è‡ªç„¶å¯ä»¥å»é™¤å®ƒä»¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³è®© APP åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œä»éœ€è¦ä¿ç•™å®ƒä»¬ã€‚ åœ¨ gradle æ–‡ä»¶çš„ defaultConfig åŸŸä¸‹é…ç½®éœ€è¦çš„ soï¼š 1234567defaultConfig &#123; // ... ... ndk &#123; //è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„ abiFilters 'arm64-v8a', 'armeabi' //, 'x86', ,'x86_64', 'armeabi-v7a &#125; &#125; å…¶å®ƒæ‰‹æ®µæ’ä»¶åŒ–æ’ä»¶åŒ–æŠ€æœ¯è‡ª 2015 å¹´äº•å–·åï¼Œä¸€ç›´æ˜¯ Android é¢è¯•ä¸­é•¿ç››ä¸è¡°çš„é¢è¯•é¢˜ã€‚å‘å¸ƒ APP æ—¶åªå‘å¸ƒåŒ…å«å¿…è¦åŠŸèƒ½çš„å®¿ä¸»ï¼Œå­æ¨¡å—åŠŸèƒ½ä»¥æ’ä»¶çš„å½¢å¼ä¸‹å‘ã€‚ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆé™ä½ APK ä½“ç§¯çš„æ–¹æ³•ã€‚ä½†æé«˜äº†é¡¹ç›®çš„å¼€å‘éš¾åº¦å’Œç»´æŠ¤æˆæœ¬ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¸€ä¸ªæˆç†Ÿçš„å‘å¸ƒåå°ã€‚ APK åˆ†å‰²å¯ä»¥é€šè¿‡åœ¨ gradle é…ç½®ä¸­å®šä¹‰ä¸€ä¸ª splits ä»£ç å—æ¥é…ç½®åˆ†å‰²ï¼Œç›®å‰æ”¯æŒ density åˆ†å‰²å’Œ ABI åˆ†å‰²ã€‚æ¯”å¦‚ä½ å¯ä»¥é€šè¿‡é…ç½®ï¼Œåœ¨ä¸€æ¬¡æ‰“åŒ…ä¸­ç”Ÿæˆä»¥ä¸‹ APKï¼Œè¿›è€Œå°†å®ƒä»¬åˆ†åˆ«å‘å¸ƒç»™ä¸åŒæœºå‹ã€‚ density åˆ†å‰² app-hdpi-release.apk app-universal-release.apk app-xhdpi-release.apk app-xxhdpi-release.apk app-xxxhdpi-release.apk ABI åˆ†å‰² app-armeabi-v7a-debug.apk app-mips-debug.apk app-x86-debug.apk æ¨¡å—åŒ–è¿™ä¸ª Title å¤ªå¤§ï¼Œæˆ‘ä¼šå•ç‹¬æ’°æ–‡åŠ ä»¥è®²è§£ã€‚ æ’ä»¶åŒ–è¿™ä¸ª Title å¤ªå¤§ï¼Œæˆ‘åŒæ ·ä¼šå•ç‹¬æ’°æ–‡åŠ ä»¥è®²è§£ã€‚ä¸Šä¸ªæœˆåˆšè¯»å®ŒåŒ…å»ºå¼ºæ‰€è‘—çš„ã€ŠAndroid æ’ä»¶è¯å¼€å‘æŒ‡å—ã€‹ä¸€ä¹¦ï¼Œæ‰€è·é¢‡ä¸°ã€‚åé¢æˆ‘ä¼šå°†ä¹¦ä¸­çš„é‡ç‚¹å†…å®¹æ€»ç»“æˆæ–‡å­—ç¬”è®°åˆ†äº«åœ¨åšå®¢é‡Œé¢ã€‚ GET å’Œ POST åŒºåˆ«æœ¬è´¨ä¸Šæ— åŒºåˆ«é¦–å…ˆï¼ŒGET å’Œ POST éƒ½æ˜¯HTTP åè®®ä¸­å‘é€è¯·æ±‚çš„æ–¹æ³•ï¼Œè¿™ä¸¤è€…åº•å±‚çš„åè®®ä¹Ÿéƒ½æ˜¯ TCP/IPï¼Œè¿™ä¸¤è€…å¹¶æ²¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ã€‚ ä»åº•å±‚åŸç†ä¸Šï¼ŒGET äº§ç”Ÿäº†ä¸€ä¸ª TCP æ•°æ®åŒ…ï¼ŒPOST äº§ç”Ÿäº†ä¸¤ä¸ª TCP æ•°æ®åŒ…ã€‚ å¯¹äº GET è¯·æ±‚ï¼Œæµè§ˆå™¨æŠŠ HTTP Header å’Œ Data ä¸€åŒå‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨ç›¸åº” 200ã€‚ å¯¹äº POST è¯·æ±‚ï¼Œæµè§ˆå™¨ å…ˆå‘é€ HTTP Headerï¼ŒæœåŠ¡å™¨å“åº” 100ï¼ˆcontinueï¼‰ï¼Œæµè§ˆå™¨å†å‘é€ Dataï¼ŒæœåŠ¡å™¨å“åº” 200ï¼ˆè¿”å›æ•°æ®ï¼‰ã€‚ æ˜¯å¦å¯ä»¥äº’æ¢é‚£ä¹ˆæ˜¯å¦å¯ä»¥æŠŠæ‰€æœ‰çš„ POST è¯·æ±‚éƒ½æ”¹æˆ GETï¼Œä»¥æé«˜ç½‘ç«™ç›¸åº”æ•ˆç‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸è¡Œã€‚ ä¸¤è€…å…·æœ‰ä¸åŒçš„è¯­ä¹‰ã€‚ åœ¨ç½‘ç»œç¯å¢ƒå¥½çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡è¯·æ±‚ä¸ä¸€æ¬¡è¯·æ±‚åœ¨å“åº”æ—¶é—´ä¸Šç›¸å·®å¾®ä¹å…¶å¾®ï¼›åœ¨ç½‘ç»œæƒ…å†µå·®çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡è¯·æ±‚æ›´æœ‰åŠ©äºè¿›è¡Œæ•°æ®å®Œæ•´æ€§æ ¡éªŒã€‚ å¹¶éæ‰€æœ‰æµè§ˆå™¨åœ¨ POST æ—¶éƒ½å‘é€ä¸¤ä¸ªåŒ…ï¼ŒFirefox å°±åªå‘é€ä¸€æ¬¡ã€‚ å…¶å®ƒä¸€äº›è¡¥å…… æµè§ˆå™¨å›é€€ï¼šGETåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚ Bookmarkï¼šGETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚ Cacheï¼šGETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚ ç¼–ç ï¼šGETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚ å‚æ•°ä¿å­˜ï¼šGETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚ å‚æ•°é•¿åº¦ï¼šGETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTæ²¡æœ‰ã€‚ å‚æ•°ç±»å‹ï¼šå¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGETåªæ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ã€‚ å‚æ•°å®‰å…¨ï¼šGETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚ å‚æ•°ä¼ é€’ï¼šGETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚ LeakCanary æ£€æŸ¥å†…å­˜æ³„æ¼çš„åŸç†èƒŒæ™¯çŸ¥è¯†JVM è¿è¡Œæ—¶å†…å­˜åˆ†åŒºï¼Œå†…å­˜æ¨¡å‹ï¼Œåƒåœ¾å›æ”¶ç®—æ³•ï¼ŒGC Rootsï¼Œå¼ºè½¯å¼±è™šå¼•ç”¨ã€‚ A small leak will sink a great ship.â€“ Benjamin Franklin LeakCanary æ˜¯ç”±Squareå…¬å¸å¼€æºçš„å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·ã€‚Logo æ˜¯ä¸€åªå°é»„é¸¡ã€‚ LeakCanaryLogo åŸºæœ¬åŸç† åœ¨ Activity.onDestroy æ–¹æ³•é‡Œæ‰‹åŠ¨è§¦å‘ GCã€‚ åˆ©ç”¨ ReferenceQueue + WeakReference åˆ¤æ–­æ˜¯å¦æœ‰æœªé‡Šæ”¾çš„å¼•ç”¨ã€‚ ç»“åˆ dump memory å¾—åˆ°çš„ hprof æ–‡ä»¶ï¼Œåˆ©ç”¨ HaHa(Headless Android Heap Analyzer) åˆ†æå‡ºæ³„æ¼ä½ç½®ã€‚ æºç åˆ†ææ•´ä½“æµç¨‹ leakcanaryæ•´ä½“æµç¨‹ å…¥å£éœ€è¦åœ¨ Application ç±»ä¸­å¯ç”¨ LeakCanaryã€‚ 1234567891011// å®‰è£…if (!LeakCanary.isInAnalyzerProcess(WeiboApplication.this)) &#123; LeakCanary.install(WeiboApplication.this);&#125;// installpublic static RefWatcher install(Application application) &#123; return ((AndroidRefWatcherBuilder) refWatcher(application) .listenerServiceClass(DisplayLeakService.class).excludedRefs(AndroidExcludedRefs.createAppDefaults().build())) //é…ç½®ç›‘å¬å™¨åŠåˆ†ææ•°æ®æ ¼å¼ .buildAndInstall();&#125; LeakCanary ä¼šè¿è¡Œåœ¨ä¸¤ä¸ªè¿›ç¨‹ï¼šAppè¿›ç¨‹ä¸­è¿è¡Œç›‘å¬ä»»åŠ¡ï¼Œå·¥ä½œè¿›ç¨‹ä¸­è¿è¡Œåˆ†æä»»åŠ¡ã€‚ ç›‘å¬åœ¨installæ–¹æ³•é‡Œï¼Œåˆ›å»ºäº†ä¸€ä¸ªRefWatcherå¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031public RefWatcher buildAndInstall() &#123; RefWatcher refWatcher = this.build(); if(refWatcher != RefWatcher.DISABLED) &#123; LeakCanary.enableDisplayLeakActivity(this.context); ActivityRefWatcher.install((Application)this.context, refWatcher); &#125; return refWatcher;&#125;public static void install(Application application, RefWatcher refWatcher) &#123; (new ActivityRefWatcher(application, refWatcher)).watchActivities();&#125;private final ActivityLifecycleCallbacks lifecycleCallbacks = new ActivityLifecycleCallbacks() &#123; public void onActivityCreated(Activity activity, Bundle savedInstanceState) &#123; &#125; public void onActivityStarted(Activity activity) &#123;&#125; public void onActivityResumed(Activity activity) &#123;&#125; public void onActivityPaused(Activity activity) &#123;&#125; public void onActivityStopped(Activity activity) &#123; &#125; public void onActivitySaveInstanceState(Activity activity, Bundle outState) &#123;&#125; public void onActivityDestroyed(Activity activity) &#123; ActivityRefWatcher.this.onActivityDestroyed(activity); &#125;&#125;;void onActivityDestroyed(Activity activity) &#123; this.refWatcher.watch(activity);&#125; LeakCanary é€šè¿‡Application.registerActivityLifecycleCallbacksæ–¹æ³•ï¼Œæ³¨å†Œäº† Activity ç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬ï¼Œåœ¨ç›‘æµ‹åˆ°onDestroyedè°ƒç”¨æ—¶ï¼Œè§¦å‘RefWatcher.watchæ–¹æ³•ã€‚ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„å®ç°ã€‚ 12345678910111213141516171819202122232425262728293031public void watch(Object watchedReference, String referenceName) &#123; if (this != DISABLED) &#123; Preconditions.checkNotNull(watchedReference, \"watchedReference\"); Preconditions.checkNotNull(referenceName, \"referenceName\"); long watchStartNanoTime = System.nanoTime(); String key = UUID.randomUUID().toString();//ä¿è¯keyçš„å”¯ä¸€æ€§ this.retainedKeys.add(key); KeyedWeakReference reference = new KeyedWeakReference(watchedReference, key, referenceName, this.queue); this.ensureGoneAsync(watchStartNanoTime, reference); &#125;&#125; final class KeyedWeakReference extends WeakReference&lt;Object&gt; &#123; public final String key; public final String name; KeyedWeakReference(Object referent, String key, String name, ReferenceQueue&lt;Object&gt; referenceQueue) &#123; //ReferenceQueueç±»ç›‘å¬å›æ”¶æƒ…å†µ super(Preconditions.checkNotNull(referent, \"referent\"), (ReferenceQueue)Preconditions.checkNotNull(referenceQueue, \"referenceQueue\")); this.key = (String)Preconditions.checkNotNull(key, \"key\"); this.name = (String)Preconditions.checkNotNull(name, \"name\"); &#125;&#125;private void ensureGoneAsync(final long watchStartNanoTime, final KeyedWeakReference reference) &#123; this.watchExecutor.execute(new Retryable() &#123; public Result run() &#123; return RefWatcher.this.ensureGone(reference, watchStartNanoTime); &#125; &#125;);&#125; ç±»KeyedWeakReferenceæ˜¯WeakReferenceï¼Œè¿™é‡Œåˆ©ç”¨äº†ReferenceQueueæ¥ç›‘å¬ GC åçš„å›æ”¶æƒ…å†µã€‚ReferenceQueueçš„åŸç†æ˜¯ï¼Œå½“ GC æ£€æµ‹åˆ°å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œä¼šå°†å…¶æ·»åŠ åˆ° ReferenceQueue ä¸­ã€‚å½“ GC è¿‡åå¯¹è±¡ä¸€ç›´ä¸è¢«åŠ å…¥ ReferenceQueueï¼Œè¯´æ˜å®ƒå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ã€‚ æ­£æ˜¯åˆ©ç”¨ ReferenceQueue è¿™ä¸€ç‰¹æ€§ï¼ŒLeakCanary å®ç°äº†å¯¹å¯¹è±¡æ˜¯å¦è¢«é‡Šæ”¾çš„ç›‘æ§ã€‚ ç›‘æµ‹ Fragment æ³„æ¼ä¸Šæ–‡ä¸­çœ‹åˆ°åªåœ¨ Activity.onDestroy ä¸­è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœéœ€è¦æ£€æµ‹ Fragment æ—¶ï¼Œåº”å½“æ‰‹åŠ¨åœ¨ Fragment.onDestroy ä¸­åˆ›å»ºä¸€ä¸ª RefWatcher å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ watch æ–¹æ³•ã€‚ 1234567public abstract class BaseFragment extends Fragment &#123; @Override public void onDestroy() &#123; super.onDestroy(); RefWatcher refWatcher = ExampleApplication.getRefWatcher(getActivity()); refWatcher.watch(this); &#125;&#125; ensureGoneæ˜¯æ£€æµ‹å›æ”¶çš„æ ¸å¿ƒä»£ç ã€‚ 12345678910111213141516171819202122232425262728293031323334353637Result ensureGone(KeyedWeakReference reference, long watchStartNanoTime) &#123; long gcStartNanoTime = System.nanoTime(); long watchDurationMs = TimeUnit.NANOSECONDS.toMillis(gcStartNanoTime - watchStartNanoTime); this.removeWeaklyReachableReferences(); //å…ˆå°†å¼•ç”¨å°è¯•ä»é˜Ÿåˆ—ä¸­pollå‡ºæ¥ if(this.debuggerControl.isDebuggerAttached()) &#123; //è§„é¿è°ƒè¯•æ¨¡å¼ return Result.RETRY; &#125; else if(this.gone(reference)) &#123; //æ£€æµ‹æ˜¯å¦å·²ç»å›æ”¶ return Result.DONE; &#125; else &#123; //å¦‚æœæ²¡æœ‰è¢«å›æ”¶ï¼Œåˆ™æ‰‹åŠ¨GC this.gcTrigger.runGc();//æ‰‹åŠ¨GCæ–¹æ³• this.removeWeaklyReachableReferences();//å†æ¬¡å°è¯•pollï¼Œæ£€æµ‹æ˜¯å¦è¢«å›æ”¶ if(!this.gone(reference)) &#123; // è¿˜æ²¡æœ‰è¢«å›æ”¶ï¼Œåˆ™dumpå †ä¿¡æ¯ï¼Œè°ƒèµ·åˆ†æè¿›ç¨‹è¿›è¡Œåˆ†æ long startDumpHeap = System.nanoTime(); long gcDurationMs = TimeUnit.NANOSECONDS.toMillis(startDumpHeap - gcStartNanoTime); File heapDumpFile = this.heapDumper.dumpHeap(); if(heapDumpFile == HeapDumper.RETRY_LATER) &#123; return Result.RETRY;//éœ€è¦é‡è¯• &#125; long heapDumpDurationMs = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startDumpHeap); this.heapdumpListener.analyze(new HeapDump(heapDumpFile, reference.key, reference.name, this.excludedRefs, watchDurationMs, gcDurationMs, heapDumpDurationMs)); &#125; return Result.DONE; &#125;&#125;private boolean gone(KeyedWeakReference reference) &#123; return !this.retainedKeys.contains(reference.key);&#125;private void removeWeaklyReachableReferences() &#123; KeyedWeakReference ref; while((ref = (KeyedWeakReference)this.queue.poll()) != null) &#123; this.retainedKeys.remove(ref.key); &#125;&#125; ensureGoneæ–¹æ³•é€šè¿‡æ£€æµ‹referenceQueueé˜Ÿåˆ—çš„å¼•ç”¨æƒ…å†µï¼Œæ¥åˆ¤æ–­å›æ”¶æƒ…å†µï¼Œé€šè¿‡æ‰‹åŠ¨ GC æ¥è¿›ä¸€æ­¥ç¡®è®¤å›æ”¶æƒ…å†µã€‚è¿™æ˜¯ä¸€ä¸ªè€—æ—¶è¿‡ç¨‹ï¼Œè¿è¡Œåœ¨WatchExecutorä¸­ã€‚ LeakCanary åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶å€™æ‰§è¡Œæ£€æµ‹ä»»åŠ¡ï¼Œä»£ç ä½äºAndroidWatchExecutorä¸­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455public final class AndroidWatchExecutor implements WatchExecutor &#123; static final String LEAK_CANARY_THREAD_NAME = \"LeakCanary-Heap-Dump\"; private final Handler mainHandler = new Handler(Looper.getMainLooper()); private final Handler backgroundHandler; private final long initialDelayMillis; private final long maxBackoffFactor; public AndroidWatchExecutor(long initialDelayMillis) &#123; HandlerThread handlerThread = new HandlerThread(\"LeakCanary-Heap-Dump\"); handlerThread.start(); this.backgroundHandler = new Handler(handlerThread.getLooper()); this.initialDelayMillis = initialDelayMillis; this.maxBackoffFactor = 9223372036854775807L / initialDelayMillis; &#125; public void execute(Retryable retryable) &#123; if(Looper.getMainLooper().getThread() == Thread.currentThread()) &#123; this.waitForIdle(retryable, 0);//éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­æ£€æµ‹ &#125; else &#123; this.postWaitForIdle(retryable, 0);//poståˆ°ä¸»çº¿ç¨‹ &#125; &#125; void postWaitForIdle(final Retryable retryable, final int failedAttempts) &#123; this.mainHandler.post(new Runnable() &#123; public void run() &#123; AndroidWatchExecutor.this.waitForIdle(retryable, failedAttempts); &#125; &#125;); &#125; void waitForIdle(final Retryable retryable, final int failedAttempts) &#123; Looper.myQueue().addIdleHandler(new IdleHandler() &#123; public boolean queueIdle() &#123; AndroidWatchExecutor.this.postToBackgroundWithDelay(retryable, failedAttempts);//åˆ‡æ¢åˆ°å­çº¿ç¨‹ return false; &#125; &#125;); &#125; void postToBackgroundWithDelay(final Retryable retryable, final int failedAttempts) &#123; long exponentialBackoffFactor = (long)Math.min(Math.pow(2.0D, (double)failedAttempts), (double)this.maxBackoffFactor); // äºŒè¿›åˆ¶é€€è®©ç®—æ³• long delayMillis = this.initialDelayMillis * exponentialBackoffFactor; this.backgroundHandler.postDelayed(new Runnable() &#123; public void run() &#123; Result result = retryable.run();//RefWatcher.this.ensureGone(reference, watchStartNanoTime)æ‰§è¡Œ if(result == Result.RETRY) &#123; AndroidWatchExecutor.this.postWaitForIdle(retryable, failedAttempts + 1); &#125; &#125; &#125;, delayMillis); &#125;&#125; å…¶ä¸­è°ƒç”¨äº†MessageQueue.addIdleHandleræ–¹æ³•ï¼ŒLooper ä¸­çš„ MessageQueue æœ‰ä¸ªmIdleHandlersé˜Ÿåˆ—ï¼Œåœ¨è·å–ä¸‹ä¸ªè¦æ‰§è¡Œçš„ Message æ—¶ï¼Œå¦‚æœæ²¡æœ‰å‘ç°å¯æ‰§è¡Œçš„ Messageï¼Œå°±ä¼šå›è°ƒqueueIdle()æ–¹æ³•ï¼Œå¦‚æœqueueIdle()è¿”å›falseï¼Œåˆ™ç§»é™¤è¯¥ IdleHandlerã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869Message next() &#123; int pendingIdleHandlerCount = -1; // -1 only during first iteration int nextPollTimeoutMillis = 0; for (;;) &#123; Â·Â·Â· Â·Â·Â·//çœç•¥éƒ¨åˆ†æ¶ˆæ¯æŸ¥æ‰¾ä»£ç  if (msg != null) &#123; if (now &lt; msg.when) &#123; // Next message is not ready. Set a timeout to wake up when it is ready. nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE); &#125; else &#123; Â·Â·Â· return msg; &#125; &#125; else &#123; // No more messages. nextPollTimeoutMillis = -1; &#125; // If first time idle, then get the number of idlers to run. // Idle handles only run if the queue is empty or if the first message // in the queue (possibly a barrier) is due to be handled in the future. if (pendingIdleHandlerCount &lt; 0 &amp;&amp; (mMessages == null || now &lt; mMessages.when)) &#123; pendingIdleHandlerCount = mIdleHandlers.size(); &#125; if (pendingIdleHandlerCount &lt;= 0) &#123; // No idle handlers to run. Loop and wait some more. mBlocked = true; continue; &#125; if (mPendingIdleHandlers == null) &#123; mPendingIdleHandlers = new IdleHandler[Math.max(pendingIdleHandlerCount, 4)]; &#125; mPendingIdleHandlers = mIdleHandlers.toArray(mPendingIdleHandlers); &#125; // Run the idle handlers. // We only ever reach this code block during the first iteration. for (int i = 0; i &lt; pendingIdleHandlerCount; i++) &#123; final IdleHandler idler = mPendingIdleHandlers[i]; mPendingIdleHandlers[i] = null; // release the reference to the handler boolean keep = false; try &#123; keep = idler.queueIdle(); &#125; catch (Throwable t) &#123; Log.wtf(TAG, \"IdleHandler threw exception\", t); &#125; if (!keep) &#123;//è¿”å›falseï¼Œåˆ™ä»é˜Ÿåˆ—ç§»é™¤ï¼Œä¸‹æ¬¡ç©ºé—²ä¸ä¼šè°ƒç”¨ã€‚ synchronized (this) &#123; mIdleHandlers.remove(idler); &#125; &#125; &#125; // Reset the idle handler count to 0 so we do not run them again. pendingIdleHandlerCount = 0; // While calling an idle handler, a new message could have been delivered // so go back and look again for a pending message without waiting. nextPollTimeoutMillis = 0; &#125;&#125; åˆ†æåˆ©ç”¨ VMDebug+HaHa å®Œæˆåˆ†æä»»åŠ¡ã€‚ åœ¨åå°çº¿ç¨‹æ£€æŸ¥å¼•ç”¨æ˜¯å¦è¢«æ¸…é™¤ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè°ƒç”¨ GCã€‚ å¦‚æœå¼•ç”¨è¿˜æ˜¯æœªè¢«æ¸…é™¤ï¼ŒæŠŠ heap å†…å­˜ dump åˆ° APP å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ª .hprof æ–‡ä»¶ä¸­ã€‚ åœ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ HeapAnalyzerService æœ‰ä¸€ä¸ª HeapAnalyzer ä½¿ç”¨HAHA è§£æè¿™ä¸ªæ–‡ä»¶ã€‚ å¾—ç›Šäºå”¯ä¸€çš„ reference key, HeapAnalyzer æ‰¾åˆ° KeyedWeakReferenceï¼Œå®šä½å†…å­˜æ³„æ¼ã€‚ HeapAnalyzer è®¡ç®— åˆ° GC roots çš„æœ€çŸ­å¼ºå¼•ç”¨è·¯å¾„ï¼Œå¹¶ç¡®å®šæ˜¯å¦æ˜¯æ³„æ¼ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œå»ºç«‹å¯¼è‡´æ³„æ¼çš„å¼•ç”¨é“¾ã€‚ å¼•ç”¨é“¾ä¼ é€’åˆ° APP è¿›ç¨‹ä¸­çš„ DisplayLeakServiceï¼Œ å¹¶ä»¥é€šçŸ¥çš„å½¢å¼å±•ç¤ºå‡ºæ¥ã€‚ HeapAnalyzerServiceæ˜¯ä¸€ä¸ª IntentServiceï¼Œè°ƒç”¨ HAHA ä¸­çš„HeapAnalyzerå¯¹ hprof æ–‡ä»¶è¿›è¡Œåˆ†æï¼Œæ‰¾å‡ºæ³„éœ²ç‚¹ã€‚ç”±äºè¿è¡Œåœ¨ä¸åŒè¿›ç¨‹ï¼Œé€šè¿‡ Intent ä¼ é€’æ•°æ®ã€‚æœ€ç»ˆå°†ç»“æœå‘å›ç»™ç›‘å¬å™¨ã€‚ 1234567891011@Override protected void onHandleIntent(Intent intent) &#123; if (intent == null) &#123;// intent ä¸ºç©ºç›´æ¥è¿”å› CanaryLog.d(\"HeapAnalyzerService received a null intent, ignoring.\"); return; &#125; String listenerClassName = intent.getStringExtra(LISTENER_CLASS_EXTRA);//è·å–å›è°ƒç±»çš„ç±»å HeapDump heapDump = (HeapDump) intent.getSerializableExtra(HEAPDUMP_EXTRA);//è·å– HeapDump HeapAnalyzer heapAnalyzer = new HeapAnalyzer(heapDump.excludedRefs);//åˆ›å»º HeapAnalyzer AnalysisResult result = heapAnalyzer.checkForLeak(heapDump.heapDumpFile, heapDump.referenceKey);//æ£€æŸ¥æ³„æ¼ï¼ˆé€šè¿‡ HAHA æ¥å®Œæˆï¼‰ï¼Œå¹¶è·å–ç»“æœ AbstractAnalysisResultService.sendResultToListener(this, listenerClassName, heapDump, result);//å°†åˆ†æç»“æœå‘é€ç»™ç›‘å¬å™¨&#125; å‚è€ƒæ˜é‡‘ï¼šJava å†…å­˜é—®é¢˜åŠ LeakCanary åŸç†åˆ†ææ‹†è½®å­ç³»åˆ—â€”â€”LeakCanaryå·¥ä½œåŸç† åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶å†…éƒ¨æµç¨‹Java åœ¨ new ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šå…ˆæ£€æŸ¥å¯¹è±¡æ‰€å±çš„ç±»æ˜¯å¦å·²ç»åŠ è½½åˆ°å†…å­˜ã€‚å¦‚æœæ²¡æœ‰åŠ è½½ï¼Œåˆ™ä¼šå…ˆæ‰§è¡Œç±»çš„åŠ è½½è¿‡ç¨‹ï¼›å¦‚æœå·²ç»åŠ è½½ï¼Œåˆ™ç›´æ¥æ‰§è¡Œå¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ã€‚ ç±»çš„åŠ è½½è¿‡ç¨‹Java ä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å‹æ¥è¿›è¡Œç±»çš„åŠ è½½ã€‚ å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼Œæ¯ä¸€ä¸ªå±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ã€‚å› æ­¤æ‰€æœ‰çš„åŠ è½½è¯·æ±‚æœ€ç»ˆéƒ½åº”è¯¥ä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¿™ä¸ªåŠ è½½è¯·æ±‚ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€è¦åŠ è½½çš„ç±»ï¼‰æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚ è¿™æ ·åšçš„å¥½å¤„æ˜¯èƒ½å¤Ÿç¡®ä¿ä¸€ä¸ªç±»çš„å…¨å±€å”¯ä¸€æ€§ã€‚å› ä¸ºç±»çš„å”¯ä¸€æ€§ç”±åŠ è½½å™¨+ç±»åå…±åŒå†³å®šã€‚ä½¿ç”¨åŒäº²å§”æ´¾æ¨¡å‹ä¿è¯äº†åŒä¸€ä¸ªç±»å§‹ç»ˆç”±åŒä¸€åŠ è½½å™¨è¿›è¡ŒåŠ è½½ã€‚ ç±»åŠ è½½è¿‡ç¨‹ 1. åŠ è½½ç”±ç±»åŠ è½½å™¨è´Ÿè´£æ ¹æ®ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è¯»å–æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµåˆ° JVM å†…éƒ¨ï¼Œå¹¶å­˜å‚¨åœ¨è¿è¡Œæ—¶å†…å­˜åŒºçš„æ–¹æ³•åŒºï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªä¸ç›®æ ‡ç±»å‹å¯¹åº”çš„ java.lang.Class å¯¹è±¡å®ä¾‹ã€‚ 2. éªŒè¯ æ ¼å¼éªŒè¯ï¼šéªŒè¯æ˜¯å¦ç¬¦åˆclassæ–‡ä»¶è§„èŒƒã€‚ è¯­ä¹‰éªŒè¯ï¼šæ£€æŸ¥ä¸€ä¸ªè¢«æ ‡è®°ä¸ºfinalçš„ç±»å‹æ˜¯å¦åŒ…å«å­ç±»ï¼›æ£€æŸ¥ä¸€ä¸ªç±»ä¸­çš„finalæ–¹æ³•æ˜¯å¦è¢«å­ç±»è¿›è¡Œé‡å†™ï¼›ç¡®ä¿çˆ¶ç±»å’Œå­ç±»ä¹‹é—´æ²¡æœ‰ä¸å…¼å®¹çš„ä¸€äº›æ–¹æ³•å£°æ˜ï¼ˆæ¯”å¦‚æ–¹æ³•ç­¾åç›¸åŒï¼Œä½†æ–¹æ³•çš„è¿”å›å€¼ä¸åŒï¼‰ã€‚ æ“ä½œéªŒè¯ï¼šåœ¨æ“ä½œæ•°æ ˆä¸­çš„æ•°æ®å¿…é¡»è¿›è¡Œæ­£ç¡®çš„æ“ä½œï¼Œå¯¹å¸¸é‡æ± ä¸­çš„å„ç§ç¬¦å·å¼•ç”¨æ‰§è¡ŒéªŒè¯ï¼ˆé€šå¸¸åœ¨è§£æé˜¶æ®µæ‰§è¡Œï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥é€šè¿‡ç¬¦å·å¼•ç”¨ä¸­æè¿°çš„å…¨é™å®šåå®šä½åˆ°æŒ‡å®šç±»å‹ä¸Šï¼Œä»¥åŠç±»æˆå‘˜ä¿¡æ¯çš„è®¿é—®ä¿®é¥°ç¬¦æ˜¯å¦å…è®¸è®¿é—®ç­‰ï¼‰ã€‚ 3. å‡†å¤‡ä¸ºç±»ä¸­çš„æ‰€æœ‰é™æ€å˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸ºå…¶è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼›è¢«finalä¿®é¥°çš„staticå˜é‡ï¼ˆå¸¸é‡ï¼‰ï¼Œä¼šç›´æ¥èµ‹å€¼ã€‚ 4. è§£æå°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬ä¸ºç›´æ¥å¼•ç”¨ï¼ˆå¾—åˆ°ç±»æˆ–è€…å­—æ®µã€æ–¹æ³•åœ¨å†…å­˜ä¸­çš„æŒ‡é’ˆæˆ–è€…åç§»é‡ï¼Œä»¥ä¾¿ç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼‰ï¼Œè¿™ä¸ªå¯ä»¥åœ¨åˆå§‹åŒ–ä¹‹åå†æ‰§è¡Œã€‚ è§£æéœ€è¦é™æ€ç»‘å®šçš„å†…å®¹ã€‚ï¼ˆæ‰€æœ‰ä¸ä¼šè¢«é‡å†™çš„æ–¹æ³•å’ŒåŸŸéƒ½ä¼šè¢«é™æ€ç»‘å®šï¼‰ ä»¥ä¸Š 2ã€3ã€4 ä¸‰ä¸ªé˜¶æ®µåˆåˆç§°ä¸ºé“¾æ¥é˜¶æ®µï¼Œé“¾æ¥é˜¶æ®µè¦åšçš„æ˜¯å°†åŠ è½½åˆ° JVM ä¸­çš„äºŒè¿›åˆ¶å­—èŠ‚æµçš„ç±»æ•°æ®ä¿¡æ¯åˆå¹¶åˆ° JVM çš„è¿è¡Œæ—¶çŠ¶æ€ä¸­ã€‚ 5. åˆå§‹åŒ–ï¼ˆçˆ¶çˆ¶å­å­ï¼‰5.1 èµ‹å€¼é™æ€å˜é‡ã€‚ 5.2 æ‰§è¡Œé™æ€ä»£ç å—ã€‚ å› ä¸ºå­ç±»å­˜åœ¨å¯¹çˆ¶ç±»çš„ä¾èµ–ï¼Œæ‰€ä»¥ç±»çš„åŠ è½½é¡ºåºæ˜¯å…ˆåŠ è½½çˆ¶ç±»ååŠ è½½å­ç±»ï¼Œåˆå§‹åŒ–ä¹Ÿä¸€æ ·ã€‚ æœ€ç»ˆï¼Œæ–¹æ³•åŒºä¼šå­˜å‚¨å½“å‰ç±»ç±»ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„é™æ€å˜é‡ã€ç±»åˆå§‹åŒ–ä»£ç ï¼ˆå®šä¹‰é™æ€å˜é‡æ—¶çš„èµ‹å€¼è¯­å¥ å’Œ é™æ€åˆå§‹åŒ–ä»£ç å—ï¼‰ã€å®ä¾‹å˜é‡å®šä¹‰ã€å®ä¾‹åˆå§‹åŒ–ä»£ç ï¼ˆå®šä¹‰å®ä¾‹å˜é‡æ—¶çš„èµ‹å€¼è¯­å¥å®ä¾‹ä»£ç å—å’Œæ„é€ æ–¹æ³•ï¼‰å’Œå®ä¾‹æ–¹æ³•ï¼Œè¿˜æœ‰çˆ¶ç±»çš„ç±»ä¿¡æ¯å¼•ç”¨ã€‚ å¯¹è±¡åˆ›å»ºè¿‡ç¨‹1. åœ¨å †åŒºåˆ†é…å¯¹è±¡éœ€è¦çš„å†…å­˜åŒ…æ‹¬æœ¬ç±»ä¸çˆ¶ç±»æ‰€æœ‰å®ä¾‹å˜é‡ï¼Œä¸åŒ…æ‹¬é™æ€å˜é‡ã€‚ 2. ä¸ºå®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼å°†æ–¹æ³•åŒºå†…å¯¹å®ä¾‹å˜é‡çš„å®šä¹‰æ‹·è´ä¸€ä»½åˆ°å †åŒºï¼Œç„¶åèµ‹é»˜è®¤å€¼ã€‚ 3. æ‰§è¡Œå®ä¾‹åˆå§‹åŒ–ä»£ç åˆå§‹åŒ–é¡ºåºæ˜¯å…ˆåˆå§‹åŒ–çˆ¶ç±»å†åˆå§‹åŒ–å­ç±»ï¼Œåˆå§‹åŒ–æ—¶å…ˆæ‰§è¡Œå®ä¾‹ä»£ç å—ç„¶åæ˜¯æ„é€ æ–¹æ³•ã€‚ å¦‚æœæˆ‘ä»¬å¯¹å®ä¾‹å˜é‡ç›´æ¥èµ‹å€¼æˆ–è€…ä½¿ç”¨å®ä¾‹ä»£ç å—èµ‹å€¼ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šå°†å…¶ä¸­çš„ä»£ç æ”¾åˆ°ç±»çš„æ„é€ å‡½æ•°ä¸­å»ï¼Œå¹¶ä¸”è¿™äº›ä»£ç ä¼šè¢«æ”¾åœ¨å¯¹è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨è¯­å¥ä¹‹å(Javaè¦æ±‚æ„é€ å‡½æ•°çš„ç¬¬ä¸€æ¡è¯­å¥å¿…é¡»æ˜¯è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨è¯­å¥)ï¼Œæ„é€ å‡½æ•°æœ¬èº«çš„ä»£ç ä¹‹å‰ã€‚ å¦‚æœæœ‰ç±»ä¼¼äºChild c = new Child()å½¢å¼çš„cå¼•ç”¨çš„è¯ï¼Œåœ¨æ ˆåŒºå®šä¹‰Childç±»å‹å¼•ç”¨å˜é‡cï¼Œç„¶åå°†å †åŒºå¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™å®ƒã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸ªå­ç±»å¯¹è±¡æŒæœ‰çˆ¶ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯åœ¨å†…éƒ¨é€šè¿‡ super å…³é”®å­—æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œä½†åœ¨å¤–éƒ¨ä¸å¯è®¿é—®ã€‚å¹¶ä¸”å­ç±»å¯¹è±¡åˆ›å»ºæ—¶åªæ˜¯è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œå¹¶éåˆ›å»ºçˆ¶ç±»å¯¹è±¡ã€‚ Java è¦æ±‚åœ¨å®ä¾‹åŒ–ç±»ä¹‹å‰ï¼Œå¿…é¡»å…ˆå®ä¾‹åŒ–å…¶è¶…ç±»ï¼Œä»¥ä¿è¯æ‰€åˆ›å»ºå®ä¾‹çš„å®Œæ•´æ€§ã€‚å¦‚æœæˆ‘ä»¬æ—¢æ²¡æœ‰è°ƒç”¨å…¶ä»–çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰æ˜¾å¼è°ƒç”¨è¶…ç±»çš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯¹è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚ è™šæ–¹æ³•è¡¨é€šè¿‡å®ä¾‹å¼•ç”¨è°ƒç”¨å®ä¾‹æ–¹æ³•çš„æ—¶å€™ï¼Œå…ˆä»æ–¹æ³•åŒºä¸­å¯¹è±¡çš„å®é™…ç±»å‹ä¿¡æ¯æ‰¾ï¼Œæ‰¾ä¸åˆ°çš„è¯å†å»çˆ¶ç±»ç±»å‹ä¿¡æ¯ä¸­æ‰¾ã€‚ å¦‚æœç»§æ‰¿çš„å±‚æ¬¡æ¯”è¾ƒæ·±ï¼Œè¦è°ƒç”¨çš„æ–¹æ³•ä½äºæ¯”è¾ƒä¸Šå±‚çš„çˆ¶ç±»ï¼Œåˆ™è°ƒç”¨çš„æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨éƒ½è¦ç»è¿‡å¾ˆå¤šæ¬¡æŸ¥æ‰¾ã€‚è¿™æ—¶å€™å¤§å¤šç³»ç»Ÿä¼šé‡‡ç”¨ä¸€ç§ç§°ä¸ºè™šæ–¹æ³•è¡¨çš„æ–¹æ³•æ¥ä¼˜åŒ–è°ƒç”¨çš„æ•ˆç‡ã€‚ æ‰€è°“è™šæ–¹æ³•è¡¨ï¼Œå°±æ˜¯åœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œä¸ºæ¯ä¸ªç±»åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œè¿™ä¸ªè¡¨åŒ…æ‹¬è¯¥ç±»çš„å¯¹è±¡æ‰€æœ‰åŠ¨æ€ç»‘å®šçš„æ–¹æ³•åŠå…¶åœ°å€ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½†ä¸€ä¸ªæ–¹æ³•åªæœ‰ä¸€æ¡è®°å½•ï¼Œå­ç±»é‡å†™äº†çˆ¶ç±»æ–¹æ³•ååªä¼šä¿ç•™å­ç±»çš„ã€‚å½“é€šè¿‡å¯¹è±¡åŠ¨æ€ç»‘å®šæ–¹æ³•çš„æ—¶å€™ï¼Œåªéœ€è¦æŸ¥æ‰¾è¿™ä¸ªè¡¨å°±å¯ä»¥äº†ï¼Œè€Œä¸éœ€è¦æŒ¨ä¸ªæŸ¥æ‰¾æ¯ä¸ªçˆ¶ç±»ã€‚ Demoå®ä¾‹åˆå§‹åŒ–ä¸ä¸€å®šè¦åœ¨ç±»åˆå§‹åŒ–ç»“æŸä¹‹åæ‰å¼€å§‹åˆå§‹åŒ– ç±»åˆå§‹åŒ–&lt;clinit&gt;() å®ä¾‹åˆå§‹åŒ–&lt;init&gt;() åœ¨Javaä¸­ï¼Œ åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¸¸å¸¸éœ€è¦ç»å†å¦‚ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š çˆ¶ç±»çš„ç±»æ„é€ å™¨&lt;clinit&gt;() å­ç±»çš„ç±»æ„é€ å™¨&lt;clinit&gt;() çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œå®ä¾‹ä»£ç å— çˆ¶ç±»çš„æ„é€ å‡½æ•° å­ç±»çš„æˆå‘˜å˜é‡å’Œå®ä¾‹ä»£ç å— å­ç±»çš„æ„é€ å‡½æ•°ã€‚ ä½ å¯ä»¥ä½¿ç”¨ https://www.tutorialspoint.com/compile_java_online.php è¿›è¡Œåœ¨çº¿éªŒè¯ã€‚ ä¸€é“æµ‹éªŒé¢˜12345678910111213141516171819202122232425262728293031323334public class StaticTest &#123; public static void main(String[] args) &#123; staticFunction(); &#125; static StaticTest st = new StaticTest(); static &#123; //é™æ€ä»£ç å— System.out.println(\"1\"); &#125; &#123; // å®ä¾‹ä»£ç å— System.out.println(\"2\"); &#125; StaticTest() &#123; // å®ä¾‹æ„é€ å™¨ System.out.println(\"3\"); System.out.println(\"a=\" + a + \",b=\" + b); &#125; public static void staticFunction() &#123; // é™æ€æ–¹æ³• System.out.println(\"4\"); &#125; int a = 110; // å®ä¾‹å˜é‡ static int b = 112; // é™æ€å˜é‡&#125;/* Output: 2 3 a=110,b=0 1 4*/ å¦ä¸€é“æµ‹éªŒé¢˜1234567891011121314151617181920212223242526272829303132333435363738394041424344454647class Foo &#123; int i = 1; Foo() &#123; System.out.println(i); int x = getValue(); System.out.println(x); &#125; &#123; i = 2; &#125; protected int getValue() &#123; return i; &#125;&#125;//å­ç±»class Bar extends Foo &#123; int j = 1; Bar() &#123; j = 2; &#125; &#123; j = 3; &#125; @Override protected int getValue() &#123; return j; &#125;&#125;public class ConstructorExample &#123; public static void main(String... args) &#123; Bar bar = new Bar(); System.out.println(bar.getValue()); &#125;&#125;/* Output:202*/ å‚è€ƒ åšå®¢å›­ - java new ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ CSDN - JVMç±»ç”Ÿå‘½å‘¨æœŸæ¦‚è¿°ï¼šåŠ è½½æ—¶æœºä¸åŠ è½½è¿‡ç¨‹ IBM - è§£æ Java ç±»å’Œå¯¹è±¡çš„åˆå§‹åŒ–è¿‡ç¨‹","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://lilei.pro/tags/é¢è¯•/"}]},{"title":"è¥¿è™¹å¸‚é¦–å¯Œ","date":"2018-07-28T14:24:56.000Z","path":"2018/07/28/hello-mr-billionaire/","text":"ä¸ç»™æˆ‘ç”Ÿä¸€ç™¾ä¸ªå­©å­ä½ éƒ½å¯¹ä¸èµ·æˆ‘ï¼ JVM å¼€å¿ƒéº»èŠ±å¾ˆæ“…é•¿æŠ“ä½å¹³å‡¡äººçš„å¿ƒé‡Œçš„çˆ½ç‚¹ï¼Œå’Œç½‘ç»œå°è¯´çš„å¥—è·¯ä¸€æ ·ï¼Œèµ„è´¨å¹³å¹³å±¡é­ç™½çœ¼çš„ç”·ä¸»è§’ï¼Œæœºç¼˜å·§åˆä¹‹ä¸‹å¾—åˆ°ä¸€ç¬”å·¨å¤§çš„è´¢å¯Œ/ç»ä¸–çš„æ­¦åŠŸï¼Œä¸€è·¯å¹²ç¿»ä»‡å®¶ï¼Œå°†æ›¾ç»ä¸æŠŠä»–æ”¾åœ¨çœ¼é‡Œçš„å¯¹å¤´ä»¬ä¸€ä¸€è¸©åœ¨è„šä¸‹ã€‚æœ€åä¸¾ç›®å››é¡¾é—ä¸–ç‹¬ç«‹ï¼Œæ„Ÿåˆ°æ— æ•Œæ˜¯å¤šä¹ˆå¯‚å¯ï¼Œç”˜æ„¿è‡ªåºŸæ­¦åŠŸæ•£å°½å®¶è´¢ï¼Œåšå›ä¸€ä¸ªæ™®é€šäººã€‚ ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹æ˜¯è¿™æ ·ï¼Œã€Šè¥¿è™¹å¸‚é¦–å¯Œã€‹ä¹Ÿå¦‚æ­¤ã€‚ åäº¿äººæ°‘å¸ï¼Œé¦–å¯Œå£ä¸­çš„â€œå°ç›®æ ‡â€x10ï¼Œæ™®é€šäººä¸€è¾ˆå­åˆ«è¯´èµšè¿™ä¹ˆå¤šé’±ï¼Œèƒ½è§åˆ°ä¸€æ¬¡ææ€•éƒ½æ˜¯ä¸‰ç”Ÿæœ‰å¹¸ã€‚æ‰€ä»¥å¼€å¿ƒéº»èŠ±æ‹äº†è¿™æ ·ä¸€éƒ¨ç”µå½±ï¼Œè®©æˆ‘ä»¬è¿™äº›å¹³å‡¡äººçœ‹åˆ°ï¼ŒåŸæ¥åäº¿äººæ°‘å¸å¯ä»¥å †æ»¡ä¸¤ç™¾å¹³çš„å±‹å­ï¼ŒåŸæ¥æœ‰é’±äººå¯ä»¥åƒé¥­ä¸åƒä¸»é£Ÿåªåƒé¾™è™¾æ¾èŒ¸ï¼ŒåŸæ¥æœ‰é’±äººå¯ä»¥è¯·åˆ°ç‹åŠ›å®ä¸ºä»–å¼€ä¸€åœºç§äººæ¼”å”±ä¼šï¼ŒåŸæ¥æœ‰é’±äººåšçš„å†³ç­–å°±ç®—ç‹—å±ä¸é€šä¹Ÿèƒ½è®©ä»–çš„é’±è¶Šæ»šè¶Šå¤šâ€¦â€¦ ä»¥åè€å­ä¹Ÿæ˜¯è§è¿‡åäº¿äººæ°‘å¸çš„äººäº†ï¼Œåäº¿äººæ°‘å¸ï¼Œç°é‡‘ã€‚ ä¸è®ºæƒ…æ€€è¿˜æ˜¯åŒ…è¢±ï¼Œè¿™éƒ¨ç”µå½±æ¯”èµ·ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹éƒ½è½äºä¸‹é£ï¼Œé™¤äº†ç‹åŠ›å®çš„å‡ºåœºï¼Œè®©å½±é™¢é‡Œå“èµ·ä¸€ç‰‡æƒŠå¹ä¹‹å£°ã€‚æˆ‘ä¸ªäººå¯¹å¼€å¿ƒéº»èŠ±å‡ éƒ¨ç”µå½±çš„æ’åæ˜¯ï¼š ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹ ã€Šé©´å¾—æ°´ã€‹ ã€Šè¥¿çº¢æŸ¿é¦–å¯Œã€‹ ã€Šç¾ç¾çš„é“æ‹³ã€‹ 2018.07.28@ä¸Šå½±å¾æ±‡æ—¥æœˆå…‰åº—","tags":[{"name":"ç”µå½±","slug":"ç”µå½±","permalink":"https://lilei.pro/tags/ç”µå½±/"}]},{"title":"æˆ‘ä¸æ˜¯è¯ç¥","date":"2018-07-27T09:38:47.000Z","path":"2018/07/27/dying-to-survive/","text":"æˆ‘å¸Œæœ›ä»Šåä¼šè¶Šæ¥è¶Šå¥½ï¼Œæˆ‘ç›¸ä¿¡ä¼šçš„ã€‚ å•å—ç›Š å¦‚æœæ²¡æœ‰äº‹å…ˆä»æœ‹å‹åœˆé‡Œå¾—åˆ°é“ºå«ï¼Œåœ¨çœ‹ç”µå½±å‰åŠæ®µï¼Œç›´åˆ°å¾å³¥æ‰®æ¼”çš„ç¨‹å‹‡æ¥åˆ°å•å—ç›Šå®¶ä¸­åšå®¢æ—¶ï¼Œè‡ªå·±å‡ ä¹è¦ä»¥ä¸ºè¿™æ˜¯ä¸€éƒ¨ç±»ä¼¼â€œXå›§â€çš„å–œå‰§ç‰‡ã€‚ä¸è®ºä»èŠ‚å¥ã€å°è¯å’Œå‰§æƒ…ä¸Šæ¥çœ‹ï¼Œéƒ½å¤ªåƒäº†ã€‚æµ‘ä¸åçš„ä¿å¥å“åº—è€æ¿ï¼Œæˆ´ç€è›¤èŸ†é•œé¬¼å¤´é¬¼è„‘è®©äººæƒ³ä¸èµ·ä»–æ˜¯ç—…äººçš„å•å—ç›Šï¼Œæ»¡å˜´è‹±æ–‡ä¸€æœ¬æ­£ç»çš„è€ç¥çˆ¶ï¼Œè¿˜æœ‰å¤œåº—å¥³ç‹è¿™ä¸ªé¢œå€¼æ‹…å½“ï¼Œä»¥åŠæ— å£é»„æ¯›å°é…·å“¥ã€‚å¤šå¥½çš„è¥¿å¤©å–ç»äº”äººç»„ã€‚ ä½†å¾å³¥æ¯•ç«Ÿæ˜¯å¾å³¥ï¼Œæ‹è¿‡ã€Šå¿ƒèŠ±è·¯æ”¾ã€‹è¿™ç§å–œå‰§å¤–å£³çš„å…¬è·¯æ–‡è‰ºç‰‡ã€‚ä»–æœ‰é‡å¿ƒï¼Œæ›´æœ‰èƒ½åŠ›ã€‚ äºæ˜¯åœ¨çœ‹åˆ°è­¦å¯Ÿçªè¢­ç™½è¡€ç—…äººæ—…é¦†ï¼Œæ‹˜ç•™äº†ä¸€å±‹å­äººï¼Œå´æ²¡æœ‰ä¸€ä¸ªä¾›å‡ºç¨‹å‹‡ï¼Œè€äººç™½å‘è‹è‹ï¼Œå‘è­¦å®˜å“­è¯‰ç€è¢«ç–¾ç—…å‰¥å¤ºçš„ä¸€åˆ‡æ—¶ï¼Œæˆ‘ç¬¬ä¸€æ¬¡çœ¼çœ¶æ¹¿æ¶¦äº†ã€‚åœ¨çªå¦‚å…¶æ¥çš„ç–¾ç—…é¢å‰ï¼Œä½ å¼•ä»¥ä¸ºå‚²çš„å­¦è¯†ã€äº‹ä¸šã€é‡‘é’±ã€åœ°ä½éƒ½è„†å¼±ä¸å ªä¸€å‡»ã€‚å»å¹´æœ‰ä¸€ç¯‡åœ¨æœ‹å‹åœˆç–¯ä¼ çš„é•¿æ–‡ï¼Œã€Šæµæ„Ÿä¾µè¢­ä¸‹çš„åŒ—äº¬ä¸­äº§é˜¶çº§ã€‹ï¼Œæ·±æ·±åœ°æ­éœ²äº†è¿™ç§æ— åŠ›çš„ç°çŠ¶ã€‚ ä¸ºäº†å‡èŒåŠ è–ªï¼Œä¸ºäº†KPIï¼Œä¸ºäº†ä¹°æˆ¿ä¸Šè½¦ï¼Œä¸ºäº†ä¸‹ä¸€ä»£ï¼Œä¸ºäº†ä¸æ¯”åŒé¾„äººè½åï¼Œä¸ºäº†åˆ«äººçš„æœŸå¾…ç›®å…‰ï¼Œä¸ºäº†è¿‡ä¸Šè‡ªå·±æƒ³è¦çš„ç”Ÿæ´»ã€‚ä½ å¤œä»¥ç»§æ—¥ç†¬ç§ƒäº†å‘é™…çº¿ç†¬æ·±äº†è¿‘è§†çœ¼ç†¬å‡ºäº†å°è‚šè…©æ‰€æ¢æ¥çš„ä¸€åˆ‡ï¼Œåœ¨ä¸€åœºç–¾ç—…é¢å‰è½°ç„¶å€’å¡Œï¼Œç“¦ç ¾éåœ°ã€‚ ä»¥å‰è‡ªå·±æ€»ä¼šæœ‰è¿™ç§æƒ³æ³•ï¼Œç°ä»£åŒ»å­¦è™½ç„¶å»¶é•¿äº†äººç±»çš„å¯¿å‘½ï¼Œä½†åœ¨å®ƒçš„åº‡æŠ¤ä¸‹ï¼Œäººç±»è‡ªèº«æœºä½“çš„æŠµæŠ—åŠ›åè€Œä¸‹é™ï¼Œå˜å¾—å¦‚åŒæ¸©å®¤ä¸­çš„èŠ±æœµèˆ¬æ›´åŠ è„†å¼±æ˜“æŠ˜ã€‚ æˆ‘ä»¬ä»ç—…åºŠä¸Šèµ¤æ¡æ¡åœ°æ¥ï¼Œä¹Ÿç»ˆå°†åœ¨ç—…åºŠä¸Šèµ¤æ¡æ¡åœ°ç¦»å¼€ï¼Œå¸¦ä¸èµ°ä»»ä½•ä¸€æ ·ä¸œè¥¿ã€‚ æœ€ç»ˆå¾å³¥è¢«è­¦è½¦æŠ¼è¿èµ°ï¼Œè­¦å®˜å©å’å¼€è½¦çš„åŒä¼´æ”¾æ…¢é€Ÿåº¦ï¼Œçœ‹åˆ°è¡—è¾¹é€è¡Œçš„ç™½è¡€ç—…äººçº·çº·æ‘˜ä¸‹å£ç½©ï¼Œå»ä¸–çš„å•å—ç›Šå’Œé»„æ¯›æµ©å­ä¹Ÿå‡ºç°åœ¨äººç¾¤ä¸­ï¼Œæˆ‘ç¬¬äºŒæ¬¡æµæ³ªã€‚ å›ä»¥å›½å£«å¾…æˆ‘ï¼Œæˆ‘å¿…ä»¥å›½å£«æŠ¥ä¹‹ã€‚ ç—…é­”æ— æƒ…ï¼Œäººé—´æœ‰çˆ±ã€‚å…¶å®å€˜è‹¥äººé—´æ— çˆ±ï¼Œç—…é­”ä¹Ÿå°±æ— ä»å¯æ€•ï¼Œä¸è‡ªçˆ±ï¼Œåˆ™èº«ä½“å‘è‚¤ï¼Œçš†å¯æ¯ä¼¤ï¼›ä¸çˆ±äººï¼Œåˆ™æ¼ è§†ç”Ÿå‘½ï¼Œå¤©æ€§å‡‰è–„ã€‚å¯äººæ´»ç€ï¼Œä¸å°±æ˜¯ä»—ç€å¿ƒåº•æ€»æœ‰ä¸€äº›ä¸å¯å‰²èˆçš„çˆ±ä¹ˆï¼Ÿ ç”±çˆ±æ•…ç”Ÿå¿§ï¼Œç”±çˆ±æ•…ç”Ÿæ€–ï¼Œè‹¥ç¦»äºçˆ±è€…ï¼Œæ— å¿§äº¦æ— æ€–ã€‚","tags":[{"name":"ç”µå½±","slug":"ç”µå½±","permalink":"https://lilei.pro/tags/ç”µå½±/"}]},{"title":"ç¼çº«æœºä¹é˜Ÿ","date":"2018-07-27T09:01:06.000Z","path":"2018/07/27/city-of-rock/","text":"å¿ƒé‡Œè¿˜æœ‰é‚£å£æ°”å„¿ï¼Œæƒ¦è®°çš„æ˜¯æ¯å¤©ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼›å¸ä¸‹é‚£å£æ°”å„¿ï¼Œæƒ¦è®°çš„æ˜¯æ¯å¤©ä»€ä¹ˆæ—¶å€™ç»“æŸã€‚ â€‹ éƒ½é€‰C - è™¾ç±³éŸ³ä¹ è™½ç„¶å¨œæ‰å¾ˆç¾ï¼Œä½†æˆ‘è®¤ä¸ºä¹”æ‰æ‰æ˜¯æœ¬ç‰‡çš„æ¼”æŠ€ã€ç¬‘ç‚¹ä¹ƒè‡³é¢œå€¼æ‹…å½“ã€‚ ä¿å¥å“¥ å‰§æƒ…ä¸­æœ‰ä¸€æ®µæ˜¯è€å‰ä»–æ‰‹æ‹¿å‡ºå½“å¹´çš„ç”µå‰ä»–æ“¦æ‹­ï¼Œä¹”æ‰ç››èµè¿™æ˜¯å‰ä»–ç•Œçš„æŸ³å²©ï¼Œæƒ³è¦æ‘¸ä¸€æ‘¸ç»“æœè¢«è€å‰ä»–æ‰‹ä¸€å·´æŒæ‰‡æ‰ã€‚å¤§é¹åœ¨ä¸€æ—å˜²è®½é“â€œæŸ³å²©é‚£æ˜¯è°éƒ½èƒ½æ‘¸çš„ä¹ˆï¼Ÿâ€ã€‚çœ‹åˆ°è¿™é‡Œä¼šå¿ƒä¸€ç¬‘ï¼Œæ›¾ç»æ‹ã€Šå±Œä¸ç”·å£«ã€‹æ—¶ï¼Œå¤§é¹æ²¡å°‘ä¸æŸ³å²©æ¼”å¯¹æ‰‹æˆã€‚ å¤§é¹å¼ºè¡Œä¸ºè‡ªå·±å’Œå¨œæ‰å®‰æ’çš„æ„Ÿæƒ…çº¿ï¼Œä¸ä»…å¯¹å‰§æƒ…æ¨è¿›æ¯«æ— å¸®åŠ©ï¼Œè€Œä¸”çœŸçš„å¾ˆå°¬ã€‚ å²³äº‘é¹æ‰®æ¼”çš„é’¢ç´å®¶ï¼Œè™½ç„¶è¯´ä¸å‡ºå–œæ„Ÿåœ¨å“ªï¼Œä½†è®©äººä¸€çœ‹åˆ°ä»–é‚£å¼ åœ†è„¸ï¼Œå°±å¿ä¸ä½æƒ³ç¬‘ï¼Œä¹Ÿè®¸è¿™å°±æ˜¯ç¥–å¸ˆçˆ·èµé¥­åƒå§ã€‚é‚£ä¸€å¥â€œå¥³äººå•Šï¼Œä½ çš„åå­—æ˜¯è´ªå©ªâ€ç¡¬ç”Ÿç”Ÿåœ°å°†æ•´éƒ¨ç”µå½±çš„æ–‡å­¦æ°´å¹³æ‹”é«˜äº†ä¸€å˜ç±³ã€‚ å°½ç®¡å®ƒåœ¨è±†ç“£ä¸Šçš„è¯„åˆ†ä¸åˆ°7ï¼Œå¤§æŠµå±äºâ€œæ‹çš„ä¸å·®ï¼Œä½†ä¹Ÿç®—ä¸ä¸Šå¤šå¥½â€çš„æ°´å¹³ã€‚ä½†æˆ‘ååå–œæ¬¢ï¼Œè‡ªå·±å¤§æ¦‚æœ¬å°±æ˜¯ä¸ªä¿—äººå§ã€‚ çœ‹è¿™éƒ¨ç”µå½±çš„æ—¶å€™ï¼Œæ­£ååœ¨ K8402 æ­å· - ä¸Šæµ·å— çš„åŠ 1è½¦å¢é‡Œï¼Œæ±‚èŒä¸­ç¬¬ä¸‰æ¬¡å¾€è¿”äºæ­å·ä¸Šæµ·ï¼Œè¿™å¤©é¢è¯•äº†ç¬¬åå®¶å…¬å¸ã€‚ çœ‹äº†ï¼Œç¬‘äº†ï¼Œå“­äº†ï¼Œå¤Ÿäº†ã€‚æ£ç€é‚£å£æ°”å„¿ï¼Œç”Ÿæ´»ä»è¦ç»§ç»­ã€‚ P.S. é›†å®‰å¸‚ï¼Œéš¶å±å‰æ—çœé€šåŒ–å¸‚ï¼Œä½äºå‰æ—ä¸œå—éƒ¨ï¼Œä¸æœé²œä¸€æ±Ÿä¹‹éš”ã€‚å·²åˆ—å…¥æ—…æ¸¸åå•ã€‚","tags":[{"name":"ç”µå½±","slug":"ç”µå½±","permalink":"https://lilei.pro/tags/ç”µå½±/"}]},{"title":"é¢è¯•çŸ¥è¯†æ•´ç† 2018.07.26","date":"2018-07-26T04:51:20.000Z","path":"2018/07/26/interview-180726/","text":"è°ˆè°ˆ SparseArrayç”¨æ³•ä½¿ç”¨ Key-Value ä¿å­˜å¯¹è±¡çš„é›†åˆï¼Œç±»ä¼¼ HashMapï¼Œä½†åªå…è®¸ä½¿ç”¨ int å‹çš„ Key ç‰¹ç‚¹ ï¼ˆä¼˜ç‚¹ï¼‰å†…å­˜æ•ˆç‡é«˜ï¼Œé¿å…è‡ªåŠ¨è£…ç®±ï¼Œé¿å…äº†ä½¿ç”¨ Entry æ¥æ„å»ºæ•°æ®ç»“æ„ï¼Œint 4 bytesï¼ŒInteger 16 bytes ï¼ˆç¼ºç‚¹ï¼‰ä½¿ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾å¯¹è±¡ï¼Œåœ¨æ•°æ®ä½“é‡å¤§ï¼ˆmore than hundreds of itemsï¼‰çš„åœºæ™¯ä¸‹æŸ¥æ‰¾/æ’å…¥/åˆ é™¤æ•ˆç‡ä¸å¦‚ HashMap åˆ é™¤è¿‡ç¨‹ä¼˜åŒ–ï¼šå…ˆæ ‡è®° itemï¼Œå¾… GC æ—¶çœŸæ­£åˆ é™¤ æ“ä½œ éšæœºæ’å…¥ï¼šput(int, x)ï¼Œä¼šæ›¿æ¢æ‰å·²æœ‰çš„å¯¹è±¡ é¡ºåºæ’å…¥ï¼šappend(int, x)ï¼Œå½“ Key æ¯”ç›®å‰æ‰€æœ‰çš„éƒ½è¦å¤§æ—¶æ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼Œå¦åˆ™åŒ put éšæœºåˆ é™¤ï¼šdelete(int)ï¼Œåˆ é™¤ Key å¯¹åº”çš„å¯¹è±¡ é¡ºåºåˆ é™¤ï¼šremoveAt(int)ï¼Œåˆ é™¤ç¬¬ N é¡¹ èŒƒå›´åˆ é™¤ï¼šremoveAtRange(int, int) éšæœºè®¿é—®ï¼šget(int)ï¼Œæ ¹æ® Key è·å– Valueï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å› null é¡ºåºè®¿é—®ï¼švalueAt(int) éå†ï¼škeyAt(int)ï¼Œè·å–ç¬¬ n ä½çš„ keyï¼›valueAt(int)ï¼Œè·å–ç¬¬ n ä½ key å¯¹åº”çš„ valueï¼›indexOfKey(int)ï¼Œè·å– key çš„ indexï¼›indexOfValue(int)ï¼Œè·å– value çš„ index æºç é˜…è¯»æˆå‘˜å˜é‡éƒ¨åˆ† 12345678910private static final Object DELETED = new Object(); // åˆ é™¤å¯¹è±¡æ—¶ï¼Œå¹¶éçœŸæ­£åˆ é™¤ï¼Œè€Œæ˜¯å°† Value æ›¿æ¢æˆ DELETE å¯¹è±¡private boolean mGarbage = false; // æ ‡ç¤ºæ˜¯å¦éœ€è¦è¿›è¡Œ gcprivate int[] mKeys;private Object[] mValues;private int mSize;public SparseArray() &#123; this(10); // é»˜è®¤é•¿åº¦æ˜¯10&#125; åœ¨è°ƒç”¨ append, put, size ç­‰æ–¹æ³•æ—¶ä¼šè§¦å‘ GCï¼Œæ˜¯ä¸€ä¸ªé€é¡¹å¤åˆ¶çš„è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹ 1234567891011121314151617181920212223private void gc() &#123; int n = mSize; int o = 0; int[] keys = mKeys; Object[] values = mValues; for (int i = 0; i &lt; n; i++) &#123; Object val = values[i]; if (val != DELETED) &#123; // åˆ¤æ–­æ˜¯å¦å·²ç»æ ‡è®° if (i != o) &#123; keys[o] = keys[i]; values[o] = val; values[i] = null; &#125; o++; &#125; &#125; mGarbage = false; mSize = o;&#125; put è¿‡ç¨‹ï¼Œæ ¸å¿ƒæ˜¯å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰åŒä¸€ä¸ª key å­˜åœ¨ï¼Œæœ‰åˆ™æ›¿æ¢ï¼Œæ²¡æœ‰çš„è¯ï¼Œå†åˆ¤æ–­æ˜¯å¦ç›®æ ‡ä½ç½®åˆšå¥½è¢« DELETED æ ‡è®°ï¼Œæœ€åæ‰è¿›è¡ŒåŠ é¡¹æ“ä½œ 1234567891011121314151617181920212223242526public void put(int key, E value) &#123; int i = ContainerHelpers.binarySearch(mKeys, mSize, key); // äºŒåˆ†æŸ¥æ‰¾ key çš„ä½ç½® if (i &gt;= 0) &#123; // å¦‚æœå·²ç»æœ‰åŒä¸€ä¸ª key mValues[i] = value; &#125; else &#123; i = ~i; // æ±‚å¼‚æˆ– if (i &lt; mSize &amp;&amp; mValues[i] == DELETED) &#123; // ç›®æ ‡ä½ç½®é¡¹ç›®å·²ç»æ ‡è®° DELETEï¼Œå¯ä»¥ç›´æ¥æ›¿æ¢ mKeys[i] = key; mValues[i] = value; return; &#125; if (mGarbage &amp;&amp; mSize &gt;= mKeys.length) &#123; // éœ€è¦å¯»æ‰¾æ–°çš„ä½ç½®ï¼Œæ­¤æ—¶å…ˆ gc gc(); // Search again because indices may have changed. i = ~ContainerHelpers.binarySearch(mKeys, mSize, key); &#125; mKeys = GrowingArrayUtils.insert(mKeys, mSize, i, key); // è¿ç”¨ System.arraycopy è¿›è¡Œæ·»åŠ ï¼ˆæœ‰å¿…è¦åˆ™æ‰©å®¹ï¼‰ mValues = GrowingArrayUtils.insert(mValues, mSize, i, value); mSize++; &#125;&#125; delete è¿‡ç¨‹ï¼Œå…ˆäºŒåˆ†æŸ¥æ‰¾åˆ°ç›®æ ‡ä½ç½®ï¼Œæ ‡è®° DELETEDï¼Œä¸ç›´æ¥åˆ é™¤ 12345678910public void delete(int key) &#123; int i = ContainerHelpers.binarySearch(mKeys, mSize, key); if (i &gt;= 0) &#123; if (mValues[i] != DELETED) &#123; mValues[i] = DELETED; mGarbage = true; &#125; &#125;&#125; Handler å†…éƒ¨åŸç†ï¼ŒHandlerThread ä¸æ™®é€š Thread åŒºåˆ«Handler çš„ä¸¤ä¸ªç”¨é€” ç®¡ç†æ¶ˆæ¯/ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¯ä»¥æ§åˆ¶ç«‹å³æ‰§è¡Œæˆ–è€…å»¶è¿Ÿæ‰§è¡Œ è°ƒåº¦ä»»åŠ¡åœ¨ä¸åŒçº¿ç¨‹è¿è¡Œf ä¸»è¦æ¦‚å¿µ Handlerï¼šæ¶ˆæ¯åˆ†å‘å™¨ï¼Œä¸€ä¸ª Handler é‡Œé¢ä¼šå…³è”ä¸€ä¸ª MessageQueueï¼Œè¿™ä¸ª MessageQueue æ¥è‡ªå½“å‰çº¿ç¨‹çš„ Looper Looperï¼šæ¶ˆæ¯å¾ªç¯å™¨ï¼Œä» MQ é‡Œé¢ä¸æ–­å–å‡ºæ¶ˆæ¯è¿è¡Œã€‚é UI çº¿ç¨‹æ˜¯æ²¡æœ‰é»˜è®¤åˆ›å»º Looper çš„ï¼Œéœ€è¦äººå·¥è°ƒç”¨ prepare å’Œ loop æ¥å¯åŠ¨ Looperã€‚è¢«å£°æ˜ä¸º ThreadLocalï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹ç‹¬ç«‹æ‹¥æœ‰ Messageï¼šæ¶ˆæ¯å•å…ƒï¼Œå†…éƒ¨ç”¨æ¶ˆæ¯æ± ç®¡ç†ï¼Œé»˜è®¤ capacity = 50 MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå•é“¾è¡¨ï¼Œæ¯ä¸ªæ¶ˆæ¯å…¥é˜Ÿæ—¶ä¼šå¸¦ä¸Šä¸€ä¸ªè¿è¡Œæ—¶é—´ whenï¼Œæ ¹æ®è¿™ä¸ª when å°†å…¶æ”¾å…¥é˜Ÿåˆ—ä¸­ç›¸åº”çš„ä½ç½®ï¼ˆæ—©æ‰§è¡Œçš„æ”¾åœ¨é˜Ÿé¦–ï¼‰ï¼Œæ•´ä¸ªé˜Ÿåˆ—æ˜¯æŒ‰ç…§è¿è¡Œæ—¶é—´æ’åºçš„ åŸç†æµç¨‹æ¦‚è¿°åˆ›å»º Handler æ—¶ä¼šå…³è”å½“å‰çº¿ç¨‹ Looper ä¸­çš„ MQï¼Œå½“ç”¨ Handler å¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯ä¼šè¿›å…¥ MQï¼Œç» Looper è½®è¯¢å–å‡ºåè¿›è¡Œå¤„ç†ï¼Œå¤„ç†æ—¶ä¼šè°ƒç”¨æ‰€å®ç°çš„ handleMessage æ–¹æ³•ã€‚ UI çº¿ç¨‹åˆ›å»º Looper ActivityThread åœ¨ main æ–¹æ³•é‡Œé€šè¿‡ Looper.prepareMainLooper() åˆ›å»ºä¸» Looperï¼Œå¹¶å°†å…¶å­˜å…¥ ThreadLocal å˜é‡ä¸­ã€‚åŒæ—¶å°†å®ƒå¦å­˜ä¸€ä»½ä½œä¸ºä¸»çº¿ç¨‹ Looperï¼Œä¾›å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚ åœ¨ main æ–¹æ³•æœ€åé€šè¿‡ looper.loop() å¯åŠ¨è½®è¯¢ 123456public static void main(String[] args) &#123; Looper.prepareMainLooper(); ActivityThread thread = new ActivityThread(); thread.attach(false); Looper.loop(); &#125; Handler å‘é€æ¶ˆæ¯çš„æµç¨‹æ„é€ è¿‡ç¨‹ä¸­å–å‡ºå½“å‰çº¿ç¨‹æŒæœ‰çš„ Looperï¼Œå¹¶ä¿å­˜å…¶ MQ å¯¹è±¡ 123456public Handler(Callback callback, boolean async) &#123; mLooper = Looper.myLooper(); mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async; &#125; handleré€šè¿‡sendMessage(msg) å°†æ¶ˆæ¯å‘å‡ºï¼Œæ¶ˆæ¯æœ€ç»ˆèµ°å‘ queue.enqueueMessage(msg, uptimeMillis) è¿›å…¥é˜Ÿåˆ—ï¼ŒåŒæ—¶å°†å½“å‰ Handler ä»¥ target ä¿å­˜åœ¨æ¶ˆæ¯å¯¹è±¡ä¸­ï¼Œå½“ Looper è½®è¯¢æ—¶ï¼Œä¼šå–å‡º target ç”¨äºå¤„ç†æ¶ˆæ¯ 1234567891011121314private boolean enqueueMessage(MessageQueue queue, Message msg, long uptimeMillis) &#123; msg.target = this; return queue.enqueueMessage(msg, uptimeMillis); &#125;public static void loop() &#123; final Looper me = myLooper(); final MessageQueue queue = me.mQueue; for (;;) &#123; Message msg = queue.next(); // å–å‡ºæ¶ˆæ¯ï¼Œæ— æ¶ˆæ¯åˆ™é˜»å¡ if (msg == null) &#123; return; &#125; msg.target.dispatchMessage(msg);//å‘é€æ¶ˆæ¯ å…¶ä¸­targetå°±æ˜¯Handler &#125; &#125; dispatchMessage æœ€ç»ˆä¼šè°ƒåˆ° Handler ä¸­å®ç°çš„ handleMessage 123456789101112public void dispatchMessage(Message msg) &#123; if (msg.callback != null) &#123; handleCallback(msg); &#125; else &#123; if (mCallback != null) &#123; if (mCallback.handleMessage(msg)) &#123; return; &#125; &#125; handleMessage(msg); &#125; &#125; HandlerThreadæ„é€ å‡½æ•°é‡Œåˆ›å»ºäº†è‡ªå·±çš„ Looper å¹¶ä¸”å¼€å¯è½®è¯¢ï¼Œæ™®é€š Thread ä¸å« Looper Picasso VS Glide é¡¹ç›® Picasso Glide å›¾ç‰‡æ ¼å¼ ARGB8888 RGB_565 ç¼“å­˜ åŸå›¾å°ºå¯¸ æ˜¾ç¤ºå°ºå¯¸ GIF ä¸æ”¯æŒ æ”¯æŒ video ä¸æ”¯æŒ æ”¯æŒ Library size 100K 500K Methods count 500 2500 View çš„ç»˜åˆ¶è¿‡ç¨‹ä¸€ä¸ª Activity çš„çª—å£é¡µé¢ï¼Œå¯ä»¥åˆ†ä¸ºPhoneWindowã€DecorViewã€TitleBar &amp; ContentView å‡ ä¸ªå±‚çº§ window.png æ•´ä¸ª View æ ‘çš„ç»˜å›¾æµç¨‹åœ¨ ViewRootImpl.performTraversals() æ–¹æ³•ä¸­ï¼Œå®ƒä¸»è¦åšçš„äº‹æƒ…æ˜¯æ ¹æ®ä¹‹å‰è®¾ç½®çš„çŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—è§†å›¾å¤§å°ï¼ˆmeasureï¼‰ã€æ˜¯å¦éœ€è¦é‡æ–°æ”¾ç½®è§†å›¾ä½ç½®ï¼ˆlayoutï¼‰ä»¥åŠæ˜¯å¦éœ€è¦é‡æ–°ç»˜åˆ¶ï¼ˆdrawï¼‰ï¼Œä»£ç å¦‚ä¸‹ measureï¼šæµ‹é‡ï¼ŒæŒ‡æµ‹é‡ View çš„å®½é«˜ layoutï¼šå¸ƒå±€ï¼ŒæŒ‡ç¡®å®šåœ¨çˆ¶å®¹å™¨ä¸­çš„ä½ç½®åæ ‡ drawï¼šç»˜åˆ¶å¹¶æ˜¾ç¤º 1234567891011121314private void performTraversals() &#123; ...... //æœ€å¤–å±‚çš„æ ¹è§†å›¾çš„widthMeasureSpecå’ŒheightMeasureSpecç”±æ¥ //lp.widthå’Œlp.heightåœ¨åˆ›å»ºViewGroupå®ä¾‹æ—¶ç­‰äºMATCH_PARENT int childWidthMeasureSpec = getRootMeasureSpec(mWidth, lp.width); int childHeightMeasureSpec = getRootMeasureSpec(mHeight, lp.height); ...... mView.measure(childWidthMeasureSpec, childHeightMeasureSpec); ...... mView.layout(0, 0, mView.getMeasuredWidth(), mView.getMeasuredHeight()); ...... mView.draw(canvas); ...... &#125; perform_traversals measure è¿‡ç¨‹åˆ†ææ•´ä¸ª View æ ‘ä»æ ¹ View å¼€å§‹ï¼Œé€’å½’è¿›è¡Œ measure measure.png View.java 123456789101112131415161718192021222324252627282930313233/** * &lt;p&gt; * This is called to find out how big a view should be. The parent * supplies constraint information in the width and height parameters. * &lt;/p&gt; * * &lt;p&gt; * The actual measurement work of a view is performed in * &#123;@link #onMeasure(int, int)&#125;, called by this method. Therefore, only * &#123;@link #onMeasure(int, int)&#125; can and must be overridden by subclasses. * &lt;/p&gt; * * * @param widthMeasureSpec Horizontal space requirements as imposed by the * parent * @param heightMeasureSpec Vertical space requirements as imposed by the * parent * * @see #onMeasure(int, int) */ //finalæ–¹æ³•ï¼Œå­ç±»ä¸å¯é‡å†™public final void measure(int widthMeasureSpec, int heightMeasureSpec) &#123; ...... //å›è°ƒonMeasure()æ–¹æ³• onMeasure(widthMeasureSpec, heightMeasureSpec); ......&#125;//Viewçš„onMeasureé»˜è®¤å®ç°æ–¹æ³•protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec), getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));&#125; MeasureSpec çš„è¯­ä¹‰æ˜¯çˆ¶ View å¯¹å­ View åœ¨é•¿å®½ä¸Šçš„çº¦æŸï¼Œæœ‰ä¸‰ç§å–å€¼ EXACTLYï¼šä¸ç®¡å­ View æƒ³å¤šå¤§ï¼Œå®ƒåªèƒ½è¿™ä¹ˆå¤§ AT_MOSTï¼šæœ€å¤§åªèƒ½è¿™ä¹ˆå¤§ UNSPECIFIEDï¼šä¸åŠ çº¦æŸï¼Œå­ View æƒ³å¤šå¤§å°±å¤šå¤§ measure è¿‡ç¨‹ä¸»è¦å°±æ˜¯ä»é¡¶å±‚çˆ¶ View å‘å­ View é€’å½’è°ƒç”¨ view.measure æ–¹æ³•ï¼ˆmeasureä¸­ åˆå›è°ƒ onMeasure æ–¹æ³•ï¼‰çš„è¿‡ç¨‹ã€‚å…·ä½“ measure æ ¸å¿ƒä¸»è¦æœ‰å¦‚ä¸‹å‡ ç‚¹ Viewçš„measureæ–¹æ³•æ˜¯finalçš„ï¼Œä¸å…è®¸é‡è½½ï¼ŒViewå­ç±»åªèƒ½é‡è½½onMeasureæ¥å®Œæˆè‡ªå·±çš„æµ‹é‡é€»è¾‘ã€‚ æœ€é¡¶å±‚DecorViewæµ‹é‡æ—¶çš„MeasureSpecæ˜¯ç”±ViewRootImplä¸­getRootMeasureSpecæ–¹æ³•ç¡®å®šçš„ï¼ˆLayoutParamså®½é«˜å‚æ•°å‡ä¸ºMATCH_PARENTï¼ŒspecModeæ˜¯EXACTLYï¼ŒspecSizeä¸ºç‰©ç†å±å¹•å¤§å°ï¼‰ã€‚ ViewGroupç±»æä¾›äº†measureChildï¼ŒmeasureChildå’ŒmeasureChildWithMarginsæ–¹æ³•ï¼Œç®€åŒ–äº†çˆ¶å­Viewçš„å°ºå¯¸è®¡ç®—ã€‚ åªè¦æ˜¯ViewGroupçš„å­ç±»å°±å¿…é¡»è¦æ±‚LayoutParamsç»§æ‰¿å­MarginLayoutParamsï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨layout_marginå‚æ•°ã€‚ Viewçš„å¸ƒå±€å¤§å°ç”±çˆ¶Viewå’Œå­Viewå…±åŒå†³å®šã€‚ ä½¿ç”¨Viewçš„getMeasuredWidth()å’ŒgetMeasuredHeight()æ–¹æ³•æ¥è·å–Viewæµ‹é‡çš„å®½é«˜ï¼Œå¿…é¡»ä¿è¯è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨onMeasureæµç¨‹ä¹‹åè¢«è°ƒç”¨æ‰èƒ½è¿”å›æœ‰æ•ˆå€¼ã€‚ layout è¿‡ç¨‹åˆ†æView.performTraversals åœ¨ measure ä¹‹åï¼Œä¼šæ‰§è¡Œ layout è¿‡ç¨‹ 12345private void performTraversals() &#123; ...... mView.layout(0, 0, mView.getMeasuredWidth(), mView.getMeasuredHeight()); ......&#125; layout() æ–¹æ³•æœ‰å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ leftã€topã€rightã€bottomï¼Œè¡¨ç¤ºå½“å‰ View ç›¸å¯¹ Parent çš„å››ä¸ªåæ ‡ã€‚layout è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼š layout.png View.layout æ–¹æ³•å®é™…ä¸Šä¼šè°ƒç”¨åˆ° onLayout æ–¹æ³• 1234567891011121314public void layout(int l, int t, int r, int b) &#123; ...... //å®è´¨éƒ½æ˜¯è°ƒç”¨setFrameæ–¹æ³•æŠŠå‚æ•°åˆ†åˆ«èµ‹å€¼ç»™mLeftã€mTopã€mRightå’ŒmBottomè¿™å‡ ä¸ªå˜é‡ //åˆ¤æ–­Viewçš„ä½ç½®æ˜¯å¦å‘ç”Ÿè¿‡å˜åŒ–ï¼Œä»¥ç¡®å®šæœ‰æ²¡æœ‰å¿…è¦å¯¹å½“å‰çš„Viewè¿›è¡Œé‡æ–°layout boolean changed = isLayoutModeOptical(mParent) ? setOpticalFrame(l, t, r, b) : setFrame(l, t, r, b); //éœ€è¦é‡æ–°layout if (changed || (mPrivateFlags &amp; PFLAG_LAYOUT_REQUIRED) == PFLAG_LAYOUT_REQUIRED) &#123; //å›è°ƒonLayout onLayout(changed, l, t, r, b); ...... &#125; ......&#125; layout ä¹Ÿæ˜¯ä»é¡¶å±‚çˆ¶ View å‘å­ View çš„é€’å½’è°ƒç”¨ layout æ–¹æ³•çš„è¿‡ç¨‹ï¼Œå³çˆ¶ View æ ¹æ®ä¸Šä¸€æ­¥ measure å­ View æ‰€å¾—åˆ°çš„å¸ƒå±€å¤§å°å’Œå¸ƒå±€å‚æ•°ï¼Œå°†å­ View æ”¾åœ¨åˆé€‚çš„ä½ç½®ä¸Šã€‚å…·ä½“ layout æ ¸å¿ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š View.layoutæ–¹æ³•å¯è¢«é‡è½½ï¼ŒViewGroup.layoutä¸ºfinalçš„ä¸å¯é‡è½½ï¼ŒViewGroup.onLayoutä¸ºabstractçš„ï¼Œå­ç±»å¿…é¡»é‡è½½å®ç°è‡ªå·±çš„ä½ç½®é€»è¾‘ measureæ“ä½œå®Œæˆåå¾—åˆ°çš„æ˜¯å¯¹æ¯ä¸ªViewç»æµ‹é‡è¿‡çš„measuredWidthå’ŒmeasuredHeightï¼Œlayoutæ“ä½œå®Œæˆä¹‹åå¾—åˆ°çš„æ˜¯å¯¹æ¯ä¸ªViewè¿›è¡Œä½ç½®åˆ†é…åçš„mLeftã€mTopã€mRightã€mBottomï¼Œè¿™äº›å€¼éƒ½æ˜¯ç›¸å¯¹äºçˆ¶Viewæ¥è¯´çš„ å‡¡æ˜¯layout_XXXçš„å¸ƒå±€å±æ€§åŸºæœ¬éƒ½é’ˆå¯¹çš„æ˜¯åŒ…å«å­Viewçš„ViewGroupçš„ï¼Œå½“å¯¹ä¸€ä¸ªæ²¡æœ‰çˆ¶å®¹å™¨çš„Viewè®¾ç½®ç›¸å…³layout_XXXå±æ€§æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„ ä½¿ç”¨Viewçš„getWidth()å’ŒgetHeight()æ–¹æ³•æ¥è·å–Viewæµ‹é‡çš„å®½é«˜ï¼Œå¿…é¡»ä¿è¯è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨onLayoutæµç¨‹ä¹‹åè¢«è°ƒç”¨æ‰èƒ½è¿”å›æœ‰æ•ˆå€¼ draw è¿‡ç¨‹åˆ†æperformTraverls åœ¨ layout åä¼šè¿›è¡Œ draw çš„æ“ä½œ 123456789private void performTraversals() &#123; ...... final Rect dirty = mDirty; ...... canvas = mSurface.lockCanvas(dirty); ...... mView.draw(canvas); ......&#125; draw ä¹Ÿæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ draw.png å¦‚æœè¯¥Viewæ˜¯ä¸€ä¸ªViewGroupï¼Œåˆ™éœ€è¦é€’å½’ç»˜åˆ¶å…¶æ‰€åŒ…å«çš„æ‰€æœ‰å­Viewã€‚ Viewé»˜è®¤ä¸ä¼šç»˜åˆ¶ä»»ä½•å†…å®¹ï¼ŒçœŸæ­£çš„ç»˜åˆ¶éƒ½éœ€è¦è‡ªå·±åœ¨å­ç±»ä¸­å®ç°ã€‚ Viewçš„ç»˜åˆ¶æ˜¯å€ŸåŠ©onDrawæ–¹æ³•ä¼ å…¥çš„Canvasç±»æ¥è¿›è¡Œçš„ã€‚ åŒºåˆ†ViewåŠ¨ç”»å’ŒViewGroupå¸ƒå±€åŠ¨ç”»ï¼Œå‰è€…æŒ‡çš„æ˜¯Viewè‡ªèº«çš„åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡setAnimationæ·»åŠ ï¼Œåè€…æ˜¯ä¸“é—¨é’ˆå¯¹ViewGroupæ˜¾ç¤ºå†…éƒ¨å­è§†å›¾æ—¶è®¾ç½®çš„åŠ¨ç”»ï¼Œå¯ä»¥åœ¨xmlå¸ƒå±€æ–‡ä»¶ä¸­å¯¹ViewGroupè®¾ç½®layoutAnimationå±æ€§ï¼ˆè­¬å¦‚å¯¹LinearLayoutè®¾ç½®å­Viewåœ¨æ˜¾ç¤ºæ—¶å‡ºç°é€è¡Œã€éšæœºã€ä¸‹ç­‰æ˜¾ç¤ºç­‰ä¸åŒåŠ¨ç”»æ•ˆæœï¼‰ã€‚ åœ¨è·å–ç”»å¸ƒå‰ªåˆ‡åŒºï¼ˆæ¯ä¸ªViewçš„drawä¸­ä¼ å…¥çš„Canvasï¼‰æ—¶ä¼šè‡ªåŠ¨å¤„ç†æ‰paddingï¼Œå­Viewè·å–Canvasä¸ç”¨å…³æ³¨è¿™äº›é€»è¾‘ï¼Œåªç”¨å…³å¿ƒå¦‚ä½•ç»˜åˆ¶å³å¯ã€‚ é»˜è®¤æƒ…å†µä¸‹å­Viewçš„ViewGroup.drawChildç»˜åˆ¶é¡ºåºå’Œå­Viewè¢«æ·»åŠ çš„é¡ºåºä¸€è‡´ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥é‡è½½ViewGroup.getChildDrawingOrder()æ–¹æ³•æä¾›ä¸åŒé¡ºåºã€‚ å‚è€ƒï¼šAndroidåº”ç”¨å±‚Viewç»˜åˆ¶æµç¨‹ä¸æºç åˆ†æç±»åŠ è½½è¿‡ç¨‹/ClassLoaderæœºåˆ¶Apk æ‰“åŒ…è¿‡ç¨‹ListView å’Œ RecyclerView åŸç†æ€§èƒ½ä¼˜åŒ–è€ƒè™‘æ€§èƒ½æ—¶ä¸€èˆ¬ä»ä»¥ä¸‹å‡ ä¸ªè§’åº¦ å†…å­˜ä¼˜åŒ– UIä¼˜åŒ–ï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ï¼‰ é€Ÿåº¦ä¼˜åŒ–ï¼ˆçº¿ç¨‹ã€ç½‘ç»œï¼‰ ç”µé‡ä¼˜åŒ– å¯åŠ¨ä¼˜åŒ– å†…å­˜ä¼˜åŒ–å†…å­˜ä¼˜åŒ–æ˜¯ä¸ºäº†è§£å†³å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰çš„é—®é¢˜ï¼Œå†…å­˜æº¢å‡ºé€šå¸¸æœ‰ä¸¤ä¸ªåŸå›  ä½¿ç”¨ä¸å½“é€ æˆçš„å†…å­˜æ³„æ¼ï¼Œå†…å­˜æ— æ³•é‡Šæ”¾ è™½ç„¶ä¸å±äºæ³„æ¼ï¼Œä½†ä¸€äº›ä»£ç é€»è¾‘ä¸å½“ï¼Œå¯¼è‡´æ¶ˆè€—å¤§é‡å†…å­˜ï¼Œéš¾ä»¥åŠæ—¶é‡Šæ”¾ å†…å­˜æ³„æ¼ å¸¸è§åŸå› ä¸å¤„ç†æ–¹æ³• å•ä¾‹æ¨¡å¼é‡Œä½¿ç”¨äº† Activity çš„ Contextï¼Œå¯¼è‡´å…¶ç”Ÿå‘½å‘¨æœŸå»¶é•¿è‡³æ•´ä¸ªåº”ç”¨ä½¿ç”¨å‘¨æœŸï¼Œåº”è¯¥ä½¿ç”¨ ApplicationContext éé™æ€å†…éƒ¨ç±»æŒæœ‰ Activity å¯¹è±¡å¼•ç”¨ï¼Œåº”è¯¥æ”¹æˆé™æ€å†…éƒ¨ç±»ï¼ŒåŒæ—¶ä½¿ç”¨ ApplicationContextï¼›ä»¥ä¸Šä¸¤æ­¥è¯´æ˜å°½é‡ä¸è¦ä½¿ç”¨ Activity çš„ Contextï¼Œè€Œæ˜¯åº”å½“ç”¨ ApplicationContext Handler æŒæœ‰ Activity å¯¹è±¡å¼•ç”¨ï¼ŒåŒæ ·åº”è¯¥æ”¹æˆé™æ€ï¼Œå¹¶ä½¿ç”¨å¼±å¼•ç”¨ï¼Œå¹¶åœ¨ Activity çš„ onDestroy æ–¹æ³•é‡Œæ¸…ç©º Handler æ¶ˆæ¯ï¼ŒmHandler.removeCallbacksAndMessages(null); çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œï¼Œå¯¼è‡´ Activity æ²¡é‡Šæ”¾ï¼Œåº”å½“ä½¿ç”¨å¼±å¼•ç”¨ï¼Œå¹¶ä¸”åœ¨ Activity çš„ onDestroy æ–¹æ³•é‡Œ cancel æ‰çº¿ç¨‹ å æœ‰ç³»ç»Ÿèµ„æºåæ²¡æœ‰å…³é—­ï¼Œåœ¨ä½¿ç”¨å®Œ BraodcastReceiver,ContentObserver,File,Cursor,Stream,Bitmap,Animation ç­‰èµ„æºæ—¶ï¼Œä¸€å®šè¦åœ¨ Activity ä¸­çš„ onDestry ä¸­åŠæ—¶çš„å…³é—­ã€æ³¨é”€æˆ–è€…é‡Šæ”¾å†…å­˜ã€‚ å‚è€ƒï¼šAndroidä¸­äº”ç§å¸¸è§å†…å­˜æ³„æ¼åŸå› å¸¸ç”¨å·¥å…· Heap SnapShot Heap Viewer LeakCanary MAT TraceViewï¼ˆDevice Monitorï¼‰ æ¶ˆè€—å¤§é‡å†…å­˜ï¼šé€šå¸¸åŠ è½½ Bitmap æ—¶ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè§£å†³æ€è·¯æ˜¯ åŠ è½½å•å¼ å›¾ç‰‡æ—¶å€™è¿›è¡Œå‹ç¼©ï¼Œæˆ–è€…ä½¿ç”¨ç¼©ç•¥å›¾ æ§åˆ¶æ¯æ¬¡åŠ è½½çš„æ•°é‡ åŠ è½½å¤šå¼ å›¾ç‰‡æ—¶ï¼Œæ»‘åŠ¨è¿‡ç¨‹ä¸­ä¸è¿›è¡ŒåŠ è½½ï¼Œä»…åœ¨æ»‘åŠ¨å®ŒæˆååŠ è½½ UIä¼˜åŒ–ï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ï¼‰Android å±å¹•åˆ·æ–°çš„é¢‘ç‡æ˜¯ 60fpsï¼Œæ„å‘³ç€æ¯ä¸€å¸§çš„ç»˜åˆ¶å¿…é¡»è¦åœ¨ 16ms å†…å®Œæˆï¼Œå¦‚æœ UI ç»˜åˆ¶è¶…è¿‡äº† 16msï¼Œåœ¨ä½“éªŒä¸Šå°±ä¼šå‡ºç°å¡é¡¿ã€‚ ä»¥ä¸‹ç½—åˆ—é€ æˆ App å¡é¡¿çš„ä¸€äº›åŸå›  åœ¨ UI çº¿ç¨‹é‡Œè¿›è¡Œè½»å¾®è€—æ—¶æ“ä½œ å¸ƒå±€ Layout è¿‡äºå¤æ‚ï¼Œæ— æ³•åœ¨ 16ms å†…å®Œæˆæ¸²æŸ“ åŠ¨ç”»æ‰§è¡Œæ¬¡æ•°è¿‡å¤šï¼Œå¯¼è‡´ CPU æˆ– GPU è´Ÿè½½è¿‡é«˜ View è¿‡åº¦ç»˜åˆ¶ï¼Œå±å¹•æŸäº›åƒç´ åœ¨ä¸€å¸§æ—¶é—´å†…ç»˜åˆ¶å¤šæ¬¡ï¼ŒCPU æˆ– GPU è´Ÿè½½è¿‡é«˜ View é¢‘ç¹è§¦å‘ measure å’Œ layoutï¼Œç´¯è®¡è€—æ—¶è¿‡å¤šï¼Œé¢‘ç¹æ¸²æŸ“é€ æˆè´Ÿè½½è¿‡é«˜ å†…å­˜é¢‘ç¹ GCï¼Œå¯¼è‡´é˜»å¡æ¸²æŸ“æ“ä½œ å†—ä½™èµ„æºå’Œé€»è¾‘å¯¼è‡´è¿è¡Œç¼“æ…¢ ANR UIä¼˜åŒ–ï¼Œé€šå¸¸æ˜¯æŒ‡å¸ƒå±€ä¼˜åŒ–å’Œ View ç»˜åˆ¶ä¼˜åŒ– å¸ƒå±€ä¼˜åŒ–åœ¨â€œå¼€å‘è€…é€‰é¡¹â€é‡Œå¯ä»¥æ‰“å¼€â€œè¿‡åº¦ç»˜åˆ¶å¼€å…³â€ï¼Œä»è€ŒæŸ¥çœ‹å½“å‰é¡µé¢ View æ˜¯å¦å­˜åœ¨è¿‡ç»˜ï¼Œçº¢è‰²è¡¨ç¤ºå±‚çº§æœ€å¤šï¼ˆ4+ï¼‰ï¼Œæµ…ç´«è‰²è¡¨ç¤ºå±‚çº§æœ€ä½ï¼ˆ1ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚æ‰¾åˆ°é‚£äº›è¿‡ç»˜çš„éƒ¨åˆ†ï¼Œåœ¨å¸ƒå±€æ–‡ä»¶é‡Œå‡å°‘å®ƒä»¬çš„èƒŒæ™¯ï¼Œæ¯”å¦‚æŠŠåº•å±‚ View çš„èƒŒæ™¯è®¾ç½®æˆé€æ˜ã€‚åŒæ—¶ï¼Œå°½é‡å‡å°‘ ViewGroup åµŒå¥—çš„æƒ…å†µï¼Œé€šå¸¸ LinearLayout ä¼šæ¯” RelativeLayout çš„å±‚çº§è¦å°‘ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯è¦ä½¿ç”¨è®¾å¤‡å¯¹åº”åˆ†è¾¨ç‡çš„èµ„æºæ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯å›¾ç‰‡è¶Šæ¸…æ™°å°±è¶Šå¥½ã€‚ Overdraw åœ¨â€œå¼€å‘è€…æ¨¡å¼â€é‡Œé¢è¿˜æœ‰å¦ä¸€é¡¹ç›¸å…³çš„è®¾ç½®ï¼Œå«åšâ€œGPUå‘ˆç°æ¨¡å¼åˆ†æâ€ï¼Œå¯ä»¥å°†æ¸²æŸ“æ—¶é—´ä»¥æ¡å½¢å›¾ğŸ“Šçš„æ–¹å¼æ˜¾ç¤ºåœ¨å±å¹•åº•éƒ¨ï¼ŒåŒæ—¶ 16ms çš„åŸºå‡†çº¿ä¹Ÿä¼šä»¥ç»¿è‰²ç»˜åˆ¶åœ¨å±å¹•ä¸­å¤®ã€‚æ¡å½¢å›¾ä¸­åŒä¸€ä¸ªæ¡å½¢çš„ä¸åŒé¢œè‰²è¡¨ç¤ºç»˜åˆ¶ä¸åŒé˜¶æ®µ å‘ˆç°æ¨¡å¼åˆ†æ ç»˜åˆ¶ä¼˜åŒ–ä¸»è¦æ˜¯é’ˆå¯¹è‡ªå®šä¹‰ View é‡Œé¢çš„ä»£ç ç¼–å†™ï¼Œåœ¨ onDraw è¿™ä¸€æ­¥è¦å°½é‡å‡å°‘å¼€é”€ï¼Œå› ä¸º onDraw æ–¹æ³•æ˜¯å®æ—¶æ‰§è¡Œçš„ï¼Œåœ¨ä¸€å¸§å†…ä¼šæ‰§è¡Œå¤šæ¬¡ã€‚å› æ­¤ï¼Œåœ¨ onDraw ä¸­è¦é¿å…å‡ºç°ä»¥ä¸‹ä¸¤ç§æƒ…å†µ åˆ›å»ºå±€éƒ¨å¯¹è±¡ï¼Œè¿™ä¼šå¯¼è‡´å ç”¨å¤§é‡å†…å­˜ï¼Œé¢‘ç¹ GC æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå‡ºç°å¾ªç¯ï¼Œè¿™ä¼šå ç”¨ CPU æ—¶é—´ è¿‡åº¦ç»˜åˆ¶ä¼˜åŒ–ï¼Œä½¿ç”¨å¯¹åº”åˆ†è¾¨ç‡çš„èµ„æºæ–‡ä»¶ é€Ÿåº¦ä¼˜åŒ–ï¼ˆçº¿ç¨‹ã€ç½‘ç»œï¼‰çº¿ç¨‹ä¼˜åŒ–éœ€è¦åœ¨å­çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ HandlerThreadï¼šæ‹¥æœ‰è‡ªå·± Looper çš„çº¿ç¨‹ç±»ï¼Œå¯ä»¥åœ¨è¿™ä¸ªçº¿ç¨‹é‡Œè¿›è¡Œè€—æ—¶æ“ä½œï¼Œç„¶åé€šçŸ¥ä¸»çº¿ç¨‹ AsyncTaskï¼šè§ä¸‹é¢ä¸€èŠ‚â€œAsyncTask çŸ¥è¯†ç‚¹â€ IntentServiceï¼šè¿è¡Œåœ¨ç‹¬ç«‹çº¿ç¨‹çš„ Serviceï¼ŒåŸç†æ˜¯åˆ›å»ºä¸€ä¸ª HandlerThreadï¼Œç„¶ååœ¨ onStart æ—¶æŠŠæ¶ˆæ¯ä¸¢ç»™ Handler å¤„ç† ThreadPoolï¼šç”¨ Executorã€ThreadPoolExecutor æ¥ç®¡ç†çº¿ç¨‹ ç½‘ç»œä¼˜åŒ–ç½‘ç»œä¼˜åŒ–ä¸»è¦æ˜¯ä»æ—¶é—´ã€é€Ÿåº¦ã€æˆåŠŸç‡å‡ ä¸ªè§’åº¦æ¥è¿›è¡Œï¼Œå¯¹äºæé«˜é€Ÿåº¦ï¼Œæ¯”è¾ƒå…¸å‹çš„æ˜¯è¯·æ±‚å›¾ç‰‡çš„åœºæ™¯ ä½¿ç”¨WebPæ ¼å¼ï¼Œèƒ½æ¯” JPG èŠ‚çº¦25%ï½35%çš„æµé‡ï¼Œæ¯” PNG èŠ‚çº¦80%æµé‡ ä½¿ç”¨ç¼©ç•¥å›¾ å¦å¤–ä¸€äº›ç½‘ç»œä¼˜åŒ–çš„çŸ¥è¯†ç‚¹ å¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œç¼“å­˜ï¼Œè‹¥è¯·æ±‚æ•°æ®ä»åœ¨æœ‰æ•ˆæœŸå†…åˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸èµ°ç½‘ç»œ å‡å°‘ GPS å®šä½ä½¿ç”¨ï¼Œæ¡ä»¶å…è®¸åˆ™å¤šç”¨ç½‘ç»œå®šä½ ä¸‹è½½è¿‡ç¨‹ä¸­ä½¿ç”¨æ–­ç‚¹ç»­ä¼  åˆ·æ–°æ•°æ®æ—¶é‡‡ç”¨å±€éƒ¨åˆ·æ–°ï¼Œå°‘ç”¨å…¨å±€åˆ·æ–° ç”µé‡ä¼˜åŒ– éœ€è¦è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œå…ˆåˆ¤æ–­ç½‘ç»œå½“å‰çŠ¶æ€ æ‰¹é‡å¤„ç†ç½‘ç»œè¯·æ±‚ åœ¨åŒæ—¶æœ‰wifiå’Œç§»åŠ¨æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ç›´æ¥å±è”½ç§»åŠ¨æ•°æ®çš„ç½‘ç»œè¯·æ±‚ å‡å°‘åå°ä»»åŠ¡ å¯åŠ¨ä¼˜åŒ–æ ¹æ®åº”ç”¨å¯åŠ¨æ—¶å€™çš„çŠ¶æ€ï¼Œå¯ä»¥åˆ†ä¸ºå†·å¯åŠ¨ã€çƒ­å¯åŠ¨ã€æš–å¯åŠ¨ä¸‰ç§ï¼Œå…¶ä¸­å†·å¯åŠ¨çš„è€—æ—¶æœ€é•¿ï¼Œå¯¹ç”¨æˆ·ä½“éªŒå½±å“æœ€å¤§ï¼Œå› æ­¤è°ˆå¯åŠ¨ä¼˜åŒ–ä¸»è¦æ˜¯ä»å†·å¯åŠ¨çš„è§’åº¦ç»™å‡ºä¼˜åŒ–å»ºè®®ã€‚ å†·å¯åŠ¨åˆå§‹æ—¶ï¼Œç³»ç»Ÿå®Œæˆä¸‰ä¸ªä»»åŠ¡ å¯åŠ¨å’ŒåŠ è½½åº”ç”¨ åˆ›å»ºåº”ç”¨è¿›ç¨‹ æ˜¾ç¤ºå¯åŠ¨è§†å›¾ï¼ˆç™½å±ï¼‰ å½“åº”ç”¨è¿›ç¨‹åˆ›å»ºå®Œæ¯•åï¼Œå¼€å§‹åˆ›å»ºåº”ç”¨ åˆ›å»ºåº”ç”¨å¯¹è±¡ å¯åŠ¨ä¸»çº¿ç¨‹ (MainThread) åˆ›å»º Main Activity åŠ è½½è§†å›¾ (Inflating views) æ¸²æŸ“å¸ƒå±€ (Laying out) æ‰§è¡Œåˆå§‹ç»˜åˆ¶ å†·å¯åŠ¨ä¼˜åŒ– å‡å°‘é¦–é¡µä½¿ç”¨çš„èµ„æºï¼Œæ‡’åŠ è½½ ä¼˜åŒ–é¦–é¡µå¸ƒå±€ï¼Œå‡å°‘å±‚çº§ï¼Œä¸ç»˜åˆ¶ä¸å¯è§çš„ UIï¼Œè€Œæ˜¯ä½¿ç”¨ ViewStub å¯¹è±¡åœ¨é€‚å½“çš„æ—¶é—´å¸ƒå±€ç»˜åˆ¶ åœ¨é—ªå±é¡µï¼ˆFragmentï¼‰é¢„å…ˆåŠ è½½ AsyncTask çŸ¥è¯†ç‚¹æ˜¯ä»€ä¹ˆæ˜¯ä¸ºäº†è§£å†³ UI çº¿ç¨‹æ— æ³•è¿›è¡Œè€—æ—¶æ“ä½œçš„é—®é¢˜è€Œåº”ç”¨çš„ä¸€ç§ APIï¼Œé€šå¸¸å¤„ç†çŸ­æ—¶è€—æ—¶ä»»åŠ¡ï¼ˆé•¿æ—¶ä»»åŠ¡å»ºè®®ä½¿ç”¨ Executorã€ThreadPoolExecutorã€FutureTaskï¼‰ï¼Œæœ‰å››ä¸ªæ–¹æ³•éœ€è¦è¦†ç›– onPreExecute()ï¼Œåœ¨ UI çº¿ç¨‹è°ƒç”¨ï¼Œè¿›è¡Œä»»åŠ¡è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ doInBackground(Paramsâ€¦)ï¼Œåœ¨åå°çº¿ç¨‹è¿è¡Œï¼Œè¯»å– execute ä¼ æ¥çš„å‚æ•°ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥é€šè¿‡ publishProgress(Progressâ€¦) æ¥å‘å¸ƒè¿›åº¦ä¿¡æ¯ï¼Œè¿›åº¦ä¿¡æ¯ä¼šä»¥ onProgressUpdate(Progressâ€¦) å›è°ƒçš„æ–¹å¼é€šçŸ¥ UI çº¿ç¨‹ onProgressUpdate(Progressâ€¦)ï¼Œåœ¨ UI çº¿ç¨‹è°ƒç”¨ï¼Œæ¥æ”¶è¿›åº¦ä¿¡æ¯ onPostExecute(Result)ï¼Œåœ¨ UI çº¿ç¨‹è°ƒç”¨ï¼Œæ¥å—ä»»åŠ¡è¿è¡Œç»“æœ å˜æ›´å†å² æœ€åˆé—®ä¸–ï¼Œé‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼Œæ‰€æœ‰ä»»åŠ¡ä¸²è¡Œæ‰§è¡Œ DONUTï¼ˆ1.6ï¼‰ï¼Œé‡‡ç”¨çº¿ç¨‹æ± æ¨¡å‹ï¼Œå¹¶å‘è¿è¡Œ HONEYCOMBï¼ˆ3.0ï¼‰ï¼Œåˆæ”¹å›å•çº¿ç¨‹æ¨¡å‹ï¼Œä¸ºäº†ç®€åŒ–ä½¿ç”¨ï¼Œé¿å…å¹¶å‘å¸¦æ¥çš„åŒæ­¥é—®é¢˜ å†…éƒ¨åŸç†ï¼ˆAPI 26ï¼‰ AsyncTask æ— å‚æ„é€ å‡½æ•°é‡Œä¼šåˆ›å»ºä¸€ä¸ªä»»åŠ¡å¯¹è±¡ mWorkerï¼ˆåœ¨å…¶ä¸­æ‰§è¡Œ doInBackgroundï¼‰ï¼Œä¸€ä¸ªä»»åŠ¡å®Œæˆå›è°ƒå¯¹è±¡ mFutureï¼ŒåŒæ—¶è·å–åˆ° UI çº¿ç¨‹çš„ Looperï¼Œç”¨æ¥åœ¨ä»»åŠ¡å®Œæˆåé€šçŸ¥ UI çº¿ç¨‹ ç»´æŠ¤å•ä¾‹ SERIAL_EXECUTORï¼Œç”¨æ¥ä¸²è¡Œæ‰§è¡Œä»»åŠ¡ è°ƒç”¨ AsyncTask.execute æ—¶ï¼Œä¼šè¿›å…¥ executeOnExecutor æ–¹æ³•ï¼Œåœ¨å…¶å†…éƒ¨å…ˆè°ƒç”¨ onPreExecuteï¼Œç„¶åé€šè¿‡ executor è¿è¡Œ mWorkerï¼Œç”± SERIAL_EXECUTOR ä¿è¯äº†ä¸²è¡Œè¿è¡Œï¼ŒçœŸæ­£è¿è¡Œä»»åŠ¡çš„æ˜¯ THREAD_POOL_EXECUTOR åœ¨ä»»åŠ¡å®Œæˆåï¼Œé€šè¿‡ UI çº¿ç¨‹çš„ Looper é€šçŸ¥ UI çº¿ç¨‹ ä¸€ä¸ªå…³äºç±»çš„é™æ€å˜é‡å½’å±çš„é—®é¢˜çˆ¶ç±»æœ‰ä¸€ä¸ª protected çš„é™æ€å˜é‡ fooï¼ŒåŸºäºçˆ¶ç±» A åˆ›å»ºä¸¤ä¸ªå­ç±» B1 å’Œ B2 å¦‚æœ B1 å’Œ B2 ä¸å£°æ˜å˜é‡ fooï¼Œé‚£ä¹ˆå®ƒä»¬ä½¿ç”¨çš„ foo æ˜¯åŒä¸€ä¸ªï¼Œæ¥è‡ªçˆ¶ç±» A å¦‚æœ B1 å’Œ B2 éƒ½å£°æ˜å˜é‡ fooï¼Œé‚£ä¹ˆå®ƒä»¬ä½¿ç”¨å„è‡ªçš„å˜é‡ ç®€å•æ¦‚æ‹¬å°±æ˜¯è¯´é™æ€å˜é‡ä¸ç±»ç»‘å®šï¼Œdemo å¦‚ä¸‹ 123456789101112131415161718192021222324252627282930313233343536// case 1abstract class A &#123; protected static int foo = 0;&#125;class B1 extends A &#123;&#125;class B2 extends B &#123;&#125;public static void main(String[] args) &#123; A b1 = new B1(); A b2 = new B2(); System.out.println(\"b1.foo = \" + b1.foo + \"&amp; b2.foo = \" + b2.foo); // b1.foo = 0 &amp; b2.foo = 0&#125;// case 2abstract class A &#123; protected static int foo = 0;&#125;class B1 extends A &#123; static int foo = 100;&#125;class B2 extends B &#123; static int foo = 200;&#125;public static void main(String[] args) &#123; A b1 = new B1(); A b2 = new B2(); System.out.println(\"b1.foo = \" + b1.foo + \"&amp; b2.foo = \" + b2.foo); // b1.foo = 100 &amp; b2.foo = 200&#125;","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://lilei.pro/tags/é¢è¯•/"}]},{"title":"ç¾å›¢æŠ€æœ¯æ²™é¾™ç¬¬39æœŸï¼šæ–°æ€è·¯æ‰“é€ ç§»åŠ¨ç«¯é«˜æ•ˆç ”å‘ä½“ç³» å°è®°","date":"2018-07-21T05:37:13.000Z","path":"2018/07/21/dianping-meituan-mobile-share-0721/","text":"å¶ç„¶åœ¨ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå…¬ä¼—å·é‡Œçœ‹åˆ°æœ‰è¿™ä¸ªåˆ†äº«ï¼Œä¸»è®²äººæ˜¯å‘¨è¾‰ã€è™æƒ æ–‡ã€è’‹å›½å®ç­‰äººï¼Œå†…å®¹åŸºæœ¬ä¸Šæ˜¯ç§»åŠ¨ç ”å‘ä¸“åœºï¼Œé‚è¿‡æ¥å‡‘ä¸ªçƒ­é—¹ã€‚æ—¶é—´æ˜¯7æœˆ21æ—¥13:30~17:30ï¼Œåœ°ç‚¹ç”°æ—è·¯200å·åé‘«å¤©åœ° æ—¶é—´è¡¨ å†…å®¹ ä¸»è®²äºº Picassoåœ¨å¤§ä¼—ç‚¹è¯„é¦–é¡µçš„åº”ç”¨ è™æƒ æ–‡@ç¾å›¢Androidå¼€å‘å·¥ç¨‹å¸ˆ ç§»åŠ¨å‰åç«¯å¼€å‘è§£è€¦ æ—æ™¨@ç¾å›¢åç«¯æŠ€æœ¯ä¸“å®¶ æ‰“é€ ç¨³å®šã€çµæ´»ã€é«˜æ•ˆçš„è¿è¥é…ç½®å¹³å° è’‹å›½å®@ç¾å›¢åç«¯æŠ€æœ¯æ¶æ„å¸ˆ ç§»åŠ¨æŒç»­é›†æˆå®è·µ ä½•æ™ºèª@ç¾å›¢iOSæŠ€æœ¯ä¸“å®¶ å‰è¨€13:44ï¼Œè¿˜æœªå¼€å§‹ï¼Œå…¨æ˜¯å¹´è½»çš„è„¸åºï¼Œæœªè§æ•…äººã€‚å¤§æ¦‚æ•…äººä»¬ä¸å±‘äºè¿™ç§ç¨‹åº¦çš„æŠ€æœ¯åˆ†äº«å§ï¼Œä»–ä»¬å°±ç®—æ¥ï¼Œä¹Ÿåº”è¯¥æ˜¯ç«™åœ¨è®²å°ä¸Šï¼Œè€Œéå¬ä¼—å¸­ã€‚ å‘¨æ ¡é•¿å¼€åœºè¯ä»‹ç»äº†ä¸€ä¸‹ç›®å‰å¤§ä¼—ç‚¹è¯„ç§»åŠ¨å›¢é˜Ÿçš„è§„æ¨¡å’Œä¸šåŠ¡å†…å®¹ï¼Œbase åœ¨ä¸Šæµ·ï¼Œ100 äººã€‚æ›¾ç»è‡ªå·±ä¹Ÿæ˜¯è¿™ä¸ªå›¢é˜Ÿçš„ä¸€å‘˜ï¼Œæƒ³æƒ³ç«Ÿæœ‰äº›å”å˜˜ã€‚ Picasso åœ¨å¤§ä¼—ç‚¹è¯„é¦–é¡µçš„åº”ç”¨ç—›ç‚¹é¦–é¡µæ”¹ç‰ˆå¤šæ˜¯è§†è§‰å˜æ›´ï¼Œéœ€è¦å¿«é€Ÿä¸Šçº¿éªŒè¯ï¼Œç„¶è€Œä¼ ç»Ÿçš„å¼€å‘å‘å¸ƒæµç¨‹å¤ªè¿Ÿæ»ï¼Œéš¾ä»¥å®æ—¶çœ‹åˆ°æ•ˆæœã€‚ä¾‹å¦‚ï¼Œé¦–é¡µåä¸ªé‡‘åˆšä½å…¥å£ï¼Œéœ€è¦è°ƒæ•´å…¶ä¸­æŸä¸€ä¸ªï¼Œæ›´æ¢å›¾æ ‡ã€æ–‡å­—ã€è§’æ ‡ï¼Œå¹¶ä¸”å¿«é€ŸéªŒè¯ï¼Œå€˜è‹¥èµ°ä¼ ç»Ÿçš„â€œå¼€å‘-æµ‹è¯•-å‘å¸ƒâ€æµç¨‹ï¼Œæ˜¾ç„¶ä¸èƒ½æ»¡è¶³äº§å“ç»ç†â€œè¶Šå¿«çœ‹åˆ°æ•ˆæœè¶Šå¥½â€çš„éœ€æ±‚ã€‚è¿™æ˜¯å°±éœ€è¦æœ‰ä¸€ä¸ªåŠ¨æ€åŒ–æ¡†æ¶ï¼Œæ”¯æŒå®æ—¶å¯¹è¿™äº›è¿›è¡Œä¿®æ”¹ã€‚ æŠ€æœ¯éœ€æ±‚ éœ€è¦ä¸€ä¸ªåŠ¨æ€åŒ–æ¡†æ¶ï¼Œåœ¨è¿è¡Œæ—¶å†³å®šéœ€è¦å±•ç¤ºçš„å†…å®¹ã€‚ æ€§èƒ½è¾¾åˆ° Native æ°´å‡† å®è·µè¿›è¡Œè®¾è®¡çš„æ—¶å€™ï¼Œæ²¡æœ‰é€‰æ‹© RNï¼ŒåŸå› å¦‚ä¸‹ ç¨³å®šæ€§å·® æŠ€æœ¯æ ˆåˆ‡æ¢æˆæœ¬é«˜ åŒç«¯ä¸å¯¹é½ï¼ŒæŸäº›ç‰¹æ€§åªæ”¯æŒå•ç«¯ æ‰€é‡‡å–çš„è®¾è®¡æ€è·¯æ˜¯â€œæœåŠ¡ç«¯ä¸‹å‘æ•°æ®ï¼ˆdataï¼‰å’Œè§†å›¾è§„åˆ™ï¼ˆlayoutï¼‰â€ï¼Œdata å’Œ layout ä¼šè¢«è®¡ç®—æˆ PModelï¼Œå…¶ä¸­åŒ…å«äº†è¯¥è§†å›¾è¢«æ¸²æŸ“è‡³å±å¹•ä¸Šçš„å…¨éƒ¨ä¿¡æ¯ã€‚ Picassoæ„æ€ åŒæ—¶é‡‡ç”¨é¢„è®¡ç®—&amp;ç¼“å­˜ï¼Œé™ä½ç»˜åˆ¶æ—¶çš„å¼€é”€ï¼Œæé«˜ç»˜åˆ¶é€Ÿåº¦ã€‚ é¢„è®¡ç®—æ˜¯æŒ‡ PModel åŒ…å«äº†è¯¥è§†å›¾æ‰€æœ‰å°ºå¯¸ä¿¡æ¯ï¼Œåœ¨éšåæ¸²æŸ“è¿‡ç¨‹ä¸­çš„ measure å’Œ layout è¿™ä¸¤æ­¥ç›´æ¥å–ç”¨è¿™äº›ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å†æ¬¡è®¡ç®—ã€‚ é¢„è®¡ç®— ç¼“å­˜æ˜¯æŒ‡ç¼“å­˜äº† PModelï¼Œè€Œé Dataï¼ˆéœ€è¦å†æ¬¡è®¡ç®— PModelï¼‰ ç¼“å­˜ ç§»åŠ¨å¼€å‘å‰åç«¯è§£è€¦å®è·µ ä¸»è¦ä»‹ç»äº†ç‚¹è¯„å†…éƒ¨åœ¨å‰åç«¯å¼€å‘è”è°ƒæµ‹è¯•è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å‡ ä¸ªå·¥å…·ï¼Œä¸»è¦æ˜¯ AppMockï¼ˆå‰èº«æ˜¯ wendong.dpï¼‰ã€ç§»åŠ¨ä¹‹å®¶ã€‚çš„ç¡®æœ‰äº†è¿™äº›å·¥å…·ï¼Œå¯¹äºç§»åŠ¨ç«¯å¼€å‘çš„åŒå­¦æ¥è¯´æ˜¯æå¤§çš„ç¦éŸ³ï¼Œç¦»å¼€ç‚¹è¯„ä¹‹åæ·±æ„Ÿå¦‚æ­¤ã€‚ ç—›ç‚¹ æ¥å£ç®¡ç†å›°éš¾ â€”â€”â€”â€” é‚£ä¹ˆå¤šçš„æ¥å£å’Œæ•°æ®æ ¼å¼ï¼Œç”¨ä»€ä¹ˆç®¡ç†å‘¢ï¼ŸExcelæ–‡æ¡£ï¼ŸWikiï¼ŸèŠå¤©å·¥å…·ï¼Ÿä¸ä¸€è‡´æ€ä¹ˆåŠï¼Œå‡ºäº†é”…è°æ¥èƒŒï¼Ÿ ç§»åŠ¨ç«¯æ¥å£æ•°æ®é»‘ç›’ â€”â€”â€”â€” æƒ³è¦æŸ¥çœ‹æ¥å£æ•°æ®ï¼Œåªèƒ½å€ŸåŠ© Charles è¿™æ ·çš„ä»£ç†å·¥å…·ï¼Œä½¿ç”¨å¤æ‚ä¸è¯´ï¼Œè¿˜å‡ ä¹æ— æ³•è¿›è¡Œå®šåˆ¶ã€‚ å‰åç«¯æ¥å£æ•°æ®ä¾èµ– â€”â€”â€”â€” çº¦å¥½è”è°ƒæ—¶é—´ï¼Œéš¾å…é‡åˆ°å„ç§æƒ…å†µå‘ç”Ÿ delayï¼Œæµ‹å¾—è¶Šæ™šï¼Œé£é™©è¶Šå¤§ã€‚ æµ‹è¯•å·¥ä½œé‡ â€”â€”â€”â€” ç”Ÿæˆæµ‹è¯•æ•°æ®ä¸ä»…ç´¯çš„ä¸€æ‰¹ï¼Œè¿˜æ¯«æ— æˆå°±æ„Ÿã€‚ æ¥å£ç®¡ç†å›°éš¾ æ¥å£æ•°æ®æ¨¡å‹åŒ– æ¥å£æ›´æ–°å¯é€šçŸ¥ æ¥å£å¤šç»´åº¦ç®¡ç† é€šè¿‡â€œç§»åŠ¨ä¹‹å®¶ï¼ˆmobile.dpï¼‰â€è¿›è¡Œæ¥å£æ³¨å†Œï¼Œæ³¨å†Œè¿‡ç¨‹ä¸­éœ€è¦æ˜ç¡®æ ‡æ˜æ¥å£æ•°æ®ç»“æ„å’Œç±»å‹ï¼Œæ³¨å†Œå®Œæˆä¹‹åï¼Œä¼šæœ‰ä»£ç è‡ªåŠ¨ç”Ÿæˆå·¥å…·ç”Ÿæˆå¯¹åº”å¹³å°ï¼ˆWebã€Appã€Serverï¼‰çš„ä»£ç ã€‚ è‡ªåŠ¨ç”Ÿæˆæ¥å£ä»£ç  å‰åç«¯äº¤äº’é»‘ç›’ç”±äºç½‘ç»œç¯å¢ƒå¤æ‚ï¼ˆ3Gã€4Gã€WIFIï¼‰ï¼ŒåŠ ä¸Šæ•°æ®é€šå¸¸æœ‰åŠ å¯†åºåˆ—åŒ–ï¼Œæƒ³è¦å®æ—¶æŸ¥çœ‹æ¥å£æ•°æ®ä¿¡æ¯é€šå¸¸è¦å¤§è´¹å‘¨ç« ã€‚è¿™é‡Œä»‹ç»äº† AppMock çš„ä¸»è¦åŠŸèƒ½å’ŒåŸç†ï¼Œæ˜¯åœ¨ APP çš„ç½‘ç»œå±‚å¯¹è¯·æ±‚è¿›è¡Œé‡å®šå‘ã€‚ AppMock å‰åç«¯æ¥å£å’Œæ•°æ®ä¾èµ–åç«¯åŒå­¦æµ‹è¯•æ¥å£ï¼šæä¾› APIReader å·¥å…·ï¼Œå¯ä»¥åœ¨ç½‘é¡µä¸­ç»„åˆå‚æ•°ï¼Œæ¨¡æ‹Ÿå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œæµ‹è¯•åç«¯æ¥å£å‰ç«¯åŒå­¦æµ‹è¯•åº”ç”¨ï¼šAppMock è‡ªåŠ¨ mock response æµ‹è¯•å·¥ä½œé‡è‡ªåŠ¨åŒ–æµ‹è¯•(Appium) + è‡ªåŠ¨åŒ–Mockï¼ŒMock å·¥å…·å¯ä»¥å­˜å‚¨ç”¨ä¾‹ï¼Œè¿™éƒ¨åˆ†ä¸ç»†è®²ã€‚ æœ€åæ˜¯ AppMock å’Œä¸šå†…ç±»ä¼¼å·¥å…·çš„å¯¹æ¯” å¯¹æ¯” æ‰“é€ ç¨³å®šã€çµæ´»ã€é«˜æ•ˆçš„è¿è¥é…ç½®å¹³å°ç®€å•çš„è¯´å°±æ˜¯è®¾è®¡ä¸€ä¸ªâ€œå¯ä»¥è®¾è®¡æ˜¾ç¤ºè§„åˆ™â€çš„å¹³å°ï¼ŒåŒæ—¶è®¨è®ºäº†å¦‚ä½•æ»¡è¶³æµ‹è¯•åœºæ™¯ï¼ˆå»ºç«‹æµ‹è¯•ç”¨æˆ·åå•ï¼‰ã€å¦‚ä½•é™ä½ä¸­å¤®èŠ‚ç‚¹è´Ÿè½½ï¼ˆSDKæ–¹æ¡ˆï¼‰ã€‚ ç§»åŠ¨æŒç»­é›†æˆå®è·µè¿™éƒ¨åˆ†æ²¡å¬ï¼Œç›´æ¥è·‘è·¯å»æ‰¾å«é¹å’Œå°å‡¡åƒå°é¾™è™¾å»äº†ã€‚ æ„Ÿå—æœ‰é«˜å…´ä¹Ÿæœ‰æƒ‹æƒœï¼Œé«˜å…´çš„æ˜¯ï¼Œè‡ªå·±ä»2012å¹´åŠ å…¥å¤§ä¼—ç‚¹è¯„ï¼Œå½“å¹´é‚£ä¹ˆç”Ÿæ¶©çš„è‡ªå·±å¾—åˆ°äº†ä¸å°‘è€åŒäº‹çš„åŒ…å®¹å’Œå®½å®¥ï¼Œæœ‰äº›äººè™½ç„¶å†æœªè§åˆ°è¿‡ï¼Œä½†ä»–ä»¬æ‰€å¼€å‘å‡ºæ¥çš„ä¼˜ç§€å·¥å…·å´é€ ç¦äº†å¾ˆå¤šåŒäº‹ï¼Œèƒ½ä¸è¿™äº›äººå…±äº‹ï¼Œæ˜¯æˆ‘ä¸€ç”Ÿçš„è£å¹¸ï¼›åŒæ—¶ï¼Œåˆ†äº«ç°åœºè¿™ä¹ˆå¤šå¹´è½»æœæ°”çš„é¢å­”ï¼Œè¡¨æ˜ç‚¹è¯„å›¢é˜Ÿä¾ç„¶å……æ»¡äº†å¸å¼•åŠ›å’Œå·å¬åŠ›ã€‚æƒ‹æƒœçš„æ˜¯è‡ªå·±æ²¡æœ‰åœ¨ç‚¹è¯„çš„5å¹´é‡Œï¼Œå…¨åŠ›æ±²å–ä»–äººçš„å…»åˆ†ï¼Œç™½ç™½è¾œè´Ÿäº†è¿™ä¹ˆå¥½çš„åœŸå£¤ã€‚ ç‚¹è¯„åªæ˜¯æˆ‘æ¯•ä¸šåçš„ç¬¬ä¸€æ‰€å¤§å­¦ï¼Œè€Œç¤¾ä¼šæ˜¯ç¬¬äºŒæ‰€ã€‚ æœ›å„è‡ªå®‰å¥½ï¼Œä¸€åˆ«ä¸¤å®½ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"ç‚¹è¯„","slug":"ç‚¹è¯„","permalink":"https://lilei.pro/tags/ç‚¹è¯„/"}]},{"title":"é¢è¯•çŸ¥è¯†æ•´ç† 2018.07.09","date":"2018-07-09T10:00:17.000Z","path":"2018/07/09/interview-180709/","text":"HashMap å’Œ HashTable åŒºåˆ«ç›¸åŒç‚¹ éƒ½æ˜¯ä»¥ Key - Value çš„å½¢å¼å­˜æ”¾é”®å€¼å¯¹ ä¸åŒç‚¹ null æ”¯æŒï¼šHashMap å…è®¸ null key å’Œ null valueï¼ŒHashTable ä¸å…è®¸ å¹¶å‘ç‰¹æ€§ï¼šHashMap çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼ŒHashTable çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ é»˜è®¤é•¿åº¦å’Œæ‰©å®¹æ–¹å¼ï¼šHashMap é»˜è®¤é•¿åº¦ 16ï¼Œæ‰©å®¹ 2nï¼ŒHashTable é»˜è®¤é•¿åº¦ 11ï¼Œæ‰©å®¹ 2n+1 çˆ¶ç±»ï¼šHashMap çˆ¶ç±» AbstractMapï¼Œå…¶å­ç±»è¿˜æœ‰ ConcurrentHashMapã€LinkedHashMap ç­‰ï¼ŒHashTable çˆ¶ç±» Dictionaryï¼Œå­ç±»æœ‰ Properties ç»“è®º ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨ï¼Œç”¨ HashMap éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨ï¼Œç”¨ ConcurrentHashMap JVM åƒåœ¾å›æ”¶æœºåˆ¶/GCå«ä¹‰ï¼šç”± JVM è‡ªåŠ¨å›æ”¶é‚£äº›ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ¸…ç†å†…å­˜ æ„ä¹‰ï¼šç¨‹åºå‘˜ä¸éœ€è¦äººå·¥ç®¡ç†å†…å­˜ï¼Œå‡å°‘å¼€å‘æˆæœ¬ï¼Œæé«˜å¼€å‘æ•ˆç‡ åŸºç¡€çŸ¥è¯†å¯¹è±¡å®ä¾‹å­˜åœ¨äº Java å †ä¸­ Java ä¸­å¯¹å¯¹è±¡çš„å¼•ç”¨åˆ†æˆâ€œå¼ºè½¯å¼±è™šâ€ å¼ºå¼•ç”¨ï¼Œæœ€æ™®éçš„å¼•ç”¨ï¼Œåªè¦æœ‰å¼ºå¼•ç”¨å­˜åœ¨ï¼Œå¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶ è½¯å¼•ç”¨ï¼ŒSoftReferenceï¼Œå½“ GC æ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œä¼šè¢«å›æ”¶ å¼±å¼•ç”¨ï¼ŒWeakReferenceï¼Œå½“ GC æ—¶ï¼Œä¸è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½è¢«å›æ”¶ è™šå¼•ç”¨ï¼ŒPhantomReferenceï¼Œä¸å½±å“å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ä»»ä½•æ—¶åˆ»éƒ½å¯èƒ½è¢«å›æ”¶ 12345678910111213141516171819202122232425262728293031public class ReferenceDemo &#123; public static void main(String[] arge) &#123; //å¼ºå¼•ç”¨ Object object = new Object(); Object[] objects = new Object[100]; //è½¯å¼•ç”¨ SoftReference&lt;String&gt; stringSoftReference = new SoftReference&lt;&gt;(new String(\"SoftReference\")); System.out.println(stringSoftReference.get()); System.gc(); System.out.println(stringSoftReference.get()); //æ‰‹åŠ¨GC,è¿™æ—¶å†…å­˜å……è¶³,å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶ System.out.println(); //å¼±å¼•ç”¨ WeakReference&lt;String&gt; stringWeakReference = new WeakReference&lt;&gt;(new String(\"WeakReference\")); System.out.println(stringWeakReference.get()); System.gc(); System.out.println(stringWeakReference.get()); //æ‰‹åŠ¨gc,è¿™æ—¶,è¿”å›null,å¯¹è±¡å·²ç»è¢«å›æ”¶ System.out.println(); //è™šå¼•ç”¨ //è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ã€‚ //è™šå¼•ç”¨ä¸è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼šè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚ //å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹ å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­ ReferenceQueue&lt;String&gt; stringReferenceQueue = new ReferenceQueue&lt;&gt;(); PhantomReference&lt;String&gt; stringPhantomReference = new PhantomReference&lt;&gt;(new String(\"PhantomReference\"), stringReferenceQueue); System.out.println(stringPhantomReference.get()); &#125;&#125; å¼•ç”¨è®¡æ•°å™¨æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“å®ƒè¢«å¼•ç”¨æ—¶ï¼Œè®¡æ•°å™¨ +1ï¼Œå¼•ç”¨é‡Šæ”¾æ—¶ï¼Œè®¡æ•°å™¨ -1ï¼Œå½“è®¡æ•°å™¨ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºå¯ä»¥å›æ”¶ã€‚ å­˜åœ¨çš„é—®é¢˜æ˜¯å¾ªç¯å¼•ç”¨ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆå¼•å…¥äº†â€œå¯è¾¾æ€§â€ï¼ˆGC Roots Tracingï¼‰çš„æ¦‚å¿µï¼Œç›®å‰ä¸»æµçš„ JVM éƒ½é‡‡ç”¨äº†è¿™ç§è®¡æ•°ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ä»æ ¹éƒ¨å¼€å§‹å‘ä¸‹æœç´¢ï¼Œå¦‚æœå¯¹è±¡æ— æ³•è¢«è§¦åŠï¼Œåˆ™è®¤ä¸ºæ˜¯å¯ä»¥å›æ”¶çš„ï¼Œè¿™ç§å¯¹è±¡ç§°ä¸ºâ€œä¸å¯è¾¾å¯¹è±¡â€ã€‚ çœ‹ä¸€ä¸‹ JVM è¿è¡Œæ—¶çš„å†…å­˜ç»“æ„ï¼š JVM GC Roots åŒ…æ‹¬ è™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§ä¸­çš„å¼•ç”¨å¯¹è±¡ï¼ˆæ¥è‡ªå±€éƒ¨å˜é‡è¡¨ï¼‰ æ–¹æ³•åŒºé™æ€å±æ€§å®ä½“å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºçš„å¸¸é‡å¼•ç”¨å¯¹è±¡ æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNI å¼•ç”¨çš„å¯¹è±¡ å­˜æ´» Thread å¼•ç”¨çš„å¯¹è±¡ åœ¨æ ¹æœç´¢ç®—æ³•ä¸­ï¼Œè¦çœŸæ­£å®£å‘Šä¸€ä¸ªå¯¹è±¡æ­»äº¡ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼š å¦‚æœå¯¹è±¡åœ¨è¿›è¡Œæ ¹æœç´¢åå‘ç°æ²¡æœ‰ä¸ GC Roots ç›¸è¿æ¥çš„å¼•ç”¨é“¾ï¼Œé‚£å®ƒä¼šè¢«ç¬¬ä¸€æ¬¡æ ‡è®°å¹¶ä¸”è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰çš„æ¡ä»¶æ˜¯æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³• å½“å¯¹è±¡æ²¡æœ‰è¦†ç›– finalize() æ–¹æ³•ï¼Œæˆ– finalize() æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œè™šæ‹Ÿæœºå°†è¿™ä¸¤ç§æƒ…å†µéƒ½è§†ä¸ºæ²¡æœ‰å¿…è¦æ‰§è¡Œ å¦‚æœè¯¥å¯¹è±¡è¢«åˆ¤å®šä¸ºæœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªåä¸º F-Queue é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€æ¡ç”±è™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½ä¼˜å…ˆçº§çš„ Finalizer çº¿ç¨‹å»æ‰§è¡Œ finalize() æ–¹æ³• finalize() æ–¹æ³•æ˜¯å¯¹è±¡é€ƒè„±æ­»äº¡å‘½è¿çš„æœ€åä¸€æ¬¡æœºä¼šï¼ˆå› ä¸ºä¸€ä¸ªå¯¹è±¡çš„finalize() æ–¹æ³•æœ€å¤šåªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼‰, ç¨åGCå°†å¯¹F-Queueä¸­çš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡å°è§„æ¨¡çš„æ ‡è®°ï¼Œå¦‚æœè¦åœ¨finalizeï¼ˆï¼‰æ–¹æ³•ä¸­æˆåŠŸæ‹¯æ•‘è‡ªå·±ï¼Œåªè¦åœ¨finalize() æ–¹æ³•ä¸­è®©è¯¥å¯¹è±¡é‡å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹å…³è”å³å¯ã€‚è€Œå¦‚æœå¯¹è±¡è¿™æ—¶è¿˜æ²¡æœ‰å…³è”åˆ°ä»»ä½•é“¾ä¸Šçš„å¼•ç”¨ï¼Œé‚£å®ƒå°±ä¼šè¢«å›æ”¶æ‰ åƒåœ¾æ”¶é›†ç®—æ³•æ ‡è®°-æ¸…é™¤ ç®—æ³•åˆ†ä¸ºâ€œæ ‡è®°â€å’Œâ€œæ¸…é™¤â€ä¸¤éƒ¨ï¼Œé¦–å…ˆæ ‡è®°å‡ºéœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œç„¶ååœ¨ç¬¬äºŒæ­¥æ¸…é™¤å®ƒä»¬ã€‚æ˜¯æœ€åŸºç¡€çš„å›æ”¶ç®—æ³•ï¼Œåç»­ç®—æ³•éƒ½æ˜¯åŸºäºå®ƒçš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ã€‚ æ ‡è®°-æ¸…é™¤ æ•ˆç‡é—®é¢˜ï¼šéœ€è¦ä¸¤æ¬¡æ‰«æ ç©ºé—´é—®é¢˜ï¼šäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ å¤åˆ¶ ç®—æ³•å°†å¯ç”¨å†…å­˜å¹³å‡åˆ†ä¸º2å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“ä¸€å—å†…å­˜ä½¿ç”¨å®Œæˆåï¼Œå°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å†…å­˜ä¸­ï¼Œç„¶åæ¸…ç©ºã€‚ å¤åˆ¶ ä¼˜ç‚¹ æ¯æ¬¡åªæ“ä½œä¸€å—å†…å­˜ï¼Œåˆ†é…æ—¶æ— éœ€è¦è€ƒè™‘å†…å­˜ç¢ç‰‡æƒ…å†µï¼Œåªç§»åŠ¨æŒ‡é’ˆå³å¯ï¼Œå®ç°ç®€å•ï¼Œè¿è¡Œé«˜æ•ˆ ç¼ºç‚¹ åˆ©ç”¨ç‡é—®é¢˜ï¼šå¯ç”¨å†…å­˜å°‘äº†ä¸€åŠ æ•ˆç‡é—®é¢˜ï¼šè€ç”Ÿä»£å¯¹è±¡ç”±äºå­˜æ´»ç‡é«˜ï¼Œé¢‘ç¹å¤åˆ¶ æ ‡è®°-å‹ç¼© ç®—æ³•æ ‡è®°åï¼Œå°†æ‰€æœ‰å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ æ ‡è®°-å‹ç¼© ä¼˜ç‚¹ å¯¹äºè€å¹´ä»£ï¼Œä¼šé€æ¸ç§»åŠ¨åˆ°å¤´éƒ¨ ç¼ºç‚¹ æ–°ç”Ÿä»£å¯¹è±¡å¤šçš„è¯ï¼Œä¼šé¢‘ç¹ç§»åŠ¨ åˆ†ä»£æ”¶é›† ç®—æ³•å¯¹æ–°ç”Ÿä»£é‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼ˆMinor GCï¼‰ï¼Œè€å¹´ä»£é‡‡ç”¨æ ‡è®°å‹ç¼©ç®—æ³•ï¼ˆMajor GCï¼‰ï¼Œå…¨éƒ¨å›æ”¶ç§°ä¸º Full GCã€‚ åˆ†ä»£æ”¶é›† å¹´è½»ä»£: æ˜¯æ‰€æœ‰æ–°å¯¹è±¡äº§ç”Ÿçš„åœ°æ–¹.å¹´è½»ä»£è¢«åˆ†ä¸º3ä¸ªéƒ¨åˆ†(EndenåŒºå’Œä¸¤ä¸ªSurvivoråŒº,ä¹Ÿå«Fromå’ŒTo),å½“EdenåŒºè¢«å¯¹è±¡å¡«æ»¡æ—¶,å°±ä¼šæ‰§è¡ŒMinor GC,å¹¶æŠŠæ‰€æœ‰å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡è½¬ç§»åˆ°å…¶ä¸­ä¸€ä¸ªsurvivoråŒº(Form),Minor GCåŒæ ·ä¼šæ£€æŸ¥å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡,å¹¶æŠŠå®ƒä»¬è½¬ç§»åˆ°å¦ä¸€ä¸ªsurvivoråŒº(To),è¿™æ ·åœ¨ä¸€æ®µæ—¶é—´å†…,æ€»ä¼šæœ‰ä¸€ä¸ªç©ºçš„survivoråŒº,ç»è¿‡å¤šæ¬¡GCå‘¨æœŸåï¼Œä»ç„¶å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ä¼šè¢«è½¬ç§»åˆ°å¹´è€ä»£å†…å­˜ç©ºé—´,å¸¸è¿™æ˜¯åœ¨å¹´è½»ä»£æœ‰èµ„æ ¼æå‡åˆ°å¹´è€ä»£å‰é€šè¿‡è®¾å®šå¹´é¾„é˜ˆå€¼æ¥å®Œæˆçš„,éœ€è¦æ³¨æ„ï¼ŒSurvivorçš„ä¸¤ä¸ªåŒºæ˜¯å¯¹ç§°çš„,æ²¡å…ˆåå…³ç³»,fromå’Œtoæ˜¯ç›¸å¯¹çš„. è€å¹´ä»£: åœ¨å¹´è½»ä»£ä¸­ç»å†äº†Næ¬¡å›æ”¶åä»ç„¶æ²¡æœ‰è¢«æ¸…é™¤çš„å¯¹è±¡,å°±ä¼šè¢«æ”¾åˆ°å¹´è€ä»£ä¸­,éƒ½æ˜¯ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡.å¯¹äºå¹´è€ä»£,åˆ™ä¼šæ‰§è¡ŒMajor GC,æ¥æ¸…ç†.åœ¨æŸäº›æƒ…å†µä¸‹,åˆ™ä¼šè§¦å‘Full GC,æ¥æ¸…ç†æ•´ä¸ªå †å†…å­˜ å…ƒç©ºé—´: å †å¤–çš„ä¸€éƒ¨åˆ†å†…å­˜,é€šå¸¸ç›´æ¥ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿå†…å­˜,ç”¨äºå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ,ç­‰å†…å®¹,åƒåœ¾å›æ”¶å¯¹åº”å…ƒç©ºé—´æ¥è¯´æ²¡æœ‰æ˜æ˜¾çš„å½±å“ å‚è€ƒï¼šjvm - åƒåœ¾å›æ”¶ä½¿ç”¨OkHttpåŒæ—¶å‘é€3ä¸ªè¯·æ±‚ï¼Œtokenè¿‡æœŸå¦‚ä½•å¤„ç† è¿™æ˜¯é¢è¯•å¨ä½©æ—¶çš„ä¸€é“é¢è¯•é¢˜ è¿™ä¸å‘å‡ ä¸ªè¯·æ±‚æ— å…³ï¼Œè§£å†³é—®é¢˜çš„ç‚¹åœ¨äºå‘ç° token è¿‡æœŸåå¦‚ä½•è‡ªåŠ¨è·å– token å¹¶é‡å‘è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯ï¼Œé™é»˜è‡ªåŠ¨ç™»å½•ï¼Œç„¶åç»§ç»­è¯·æ±‚ã€‚è§£å†³æ€è·¯æ˜¯åœ¨æ‹¦æˆªå™¨é“¾ä¸­å¢åŠ ä¸€ä¸ª TokenInterceptorï¼Œåˆ¤æ–­è¿”å›çŠ¶æ€æ˜¯å¦ä¸ºéªŒè¯å¤±æ•ˆã€‚ å‘é€è¯·æ±‚ç»™æœåŠ¡ç«¯ æ ¹æ®è¿”å›çŠ¶æ€ç åˆ¤æ–­æ˜¯å¦ token è¿‡æœŸ å¦‚æœè¿‡æœŸï¼Œåˆ™è°ƒå–åŒæ­¥æ¥å£è·å–æ–° token ä½¿ç”¨æ–° token å‘é€è¯·æ±‚ 1234567891011121314151617181920212223242526272829303132333435363738394041public class TokenInterceptor implements Interceptor &#123; private static final String TAG = \"TokenInterceptor\"; @Override public Response intercept(Chain chain) throws IOException &#123; Request request = chain.request(); Response response = chain.proceed(request); Log.d(TAG, \"response.code=\" + response.code()); //æ ¹æ®å’ŒæœåŠ¡ç«¯çš„çº¦å®šåˆ¤æ–­tokenè¿‡æœŸ if (isTokenExpired(response)) &#123; Log.d(TAG, \"è‡ªåŠ¨åˆ·æ–°Token,ç„¶åé‡æ–°è¯·æ±‚æ•°æ®\"); //åŒæ­¥è¯·æ±‚æ–¹å¼ï¼Œè·å–æœ€æ–°çš„Token String newToken = getNewToken(); //ä½¿ç”¨æ–°çš„Tokenï¼Œåˆ›å»ºæ–°çš„è¯·æ±‚ Request newRequest = chain.request() .newBuilder() .header(\"Authorization\", \"Basic \" + newToken) .build(); //é‡æ–°è¯·æ±‚ return chain.proceed(newRequest); &#125; return response; &#125; // æ ¹æ®Responseï¼Œåˆ¤æ–­Tokenæ˜¯å¦å¤±æ•ˆ private boolean isTokenExpired(Response response) &#123; if (response.code() == 301) &#123; return true; &#125; return false; &#125; // åŒæ­¥è¯·æ±‚æ–¹å¼ï¼Œè·å–æœ€æ–°çš„Token private String getNewToken() throws IOException &#123; // é€šè¿‡è·å–tokençš„æ¥å£ï¼ŒåŒæ­¥è¯·æ±‚æ¥å£ String newToken = \"\"; return newToken; &#125;&#125; å¦‚æœæ˜¯é¢è¯•å®˜é—®çš„â€œä¸‰ä¸ªè¯·æ±‚åŒæ—¶å‘é€â€ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ token ä¸Šå¢åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œé€šè¿‡è¿™ä¸ªæ—¶é—´æˆ³å¯ä»¥åˆ¤æ–­è¯¥ token æ˜¯å¦ä¸ºæ›´æ–°è¿‡åçš„ã€‚é‚£ä¹ˆï¼Œåœ¨ Aã€Bã€C ä¸‰ä¸ªè¯·æ±‚åŒæ—¶å‘å‡ºæ—¶ï¼Œå½“ A å‘ç° token è¿‡æœŸå¹¶æ›´æ–° token åï¼ŒB å’Œ C å¯ä»¥è¯»å–æ–°çš„ token å‘é€è¯·æ±‚ï¼Œè€Œä¸å¿…å†å‘æœåŠ¡ç«¯è·å–æ–°çš„ tokenã€‚ ä¸€ç‚¹ç‚¹åæ€é¢æœ‰èµçš„é‚£ä¸€å¤©è‡ªå·±åˆšåˆšæ’¸è¿‡ OkHttp çš„æºç ï¼Œè¿˜å†™äº†æ–‡å­—æ€»ç»“ï¼Œä½†æ˜¯è¢«é—®åˆ°è¿™é“é¢˜æ—¶ä»ç„¶ä¸€è„¸æ‡µé€¼ã€‚é—®é¢˜åœ¨äºå¯¹ OkHttp ä»¥ Interceptor ä¸ºæ ¸å¿ƒçš„æ ¹æœ¬æ€æƒ³æ²¡æœ‰æŠŠæ¡ï¼Œå…¶å®è¿™é“é¢˜æ˜¯ç¨å¾®æœ‰ä¸€ç‚¹å°èŠ±æ‹›ã€‚ä½é…ç‰ˆçš„é—®æ³•æ˜¯â€œå¦‚ä½•è§£å†³ token è¿‡æœŸâ€ï¼Œè¿™å°±å¾ˆå®¹æ˜“è”æƒ³åˆ° Interceptorï¼ˆå…¶å®ä¹Ÿä¸å®¹æ˜“ï¼‰ï¼Œé«˜é…ç‰ˆæ‰æ˜¯é—®â€œåŒæ—¶ä¸‰ä¸ªè¯·æ±‚â€ï¼Œéœ€è¦ç»“åˆåŒæ­¥æ¥è§£å†³ã€‚ å‚è€ƒ Android OkHttpå®ç°å…¨å±€è¿‡æœŸtokenè‡ªåŠ¨åˆ·æ–°ç¤ºä¾‹RecyclerViewåŒæ ·æ˜¯å¨ä½©çš„é¢è¯•é¢˜ The RecyclerView widget is a more advanced and flexible version of ListView. RecyclerView æ”¯æŒå¤šç§ Layoutï¼Œå¦‚ LinearLayoutã€GridLayoutã€‚ä½¿ç”¨ RecyclerView æ—¶éœ€è¦ç»§æ‰¿ RecyclerView.ViewHolder ç±»ï¼Œå¦‚æœæ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè°ƒç”¨ RecyclerView.Adapter.notifyâ€¦() æ–¹æ³•ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š gradle 123dependencies &#123; implementation &apos;com.android.support:recyclerview-v7:27.1.1&apos;&#125; å¸ƒå±€æ–‡ä»¶ï¼Œæ²¡å•¥ç‰¹åˆ«çš„ï¼Œé™¤äº†éœ€è¦å£°æ˜ä¸€ä¸ª Scrollbar çš„æ–¹å‘ 1234567&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;!-- A RecyclerView with some commonly used attributes --&gt;&lt;android.support.v7.widget.RecyclerView android:id=\"@+id/my_recycler_view\" android:scrollbars=\"vertical\" android:layout_width=\"match_parent\" android:layout_height=\"match_parent\"/&gt; Activityï¼Œè·Ÿ ListView ä¸åŒç‚¹åœ¨ï¼š å¦‚æœ RecyclerView çš„å°ºå¯¸ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¦è°ƒç”¨setHasFixedSize(true)æ¥æé«˜æ€§èƒ½ è¦æ ¹æ®å¸ƒå±€è®¾ç½® LayoutManager 12345678910111213141516171819202122232425public class MyActivity extends Activity &#123; private RecyclerView mRecyclerView; private RecyclerView.Adapter mAdapter; private RecyclerView.LayoutManager mLayoutManager; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.my_activity); mRecyclerView = (RecyclerView) findViewById(R.id.my_recycler_view); // use this setting to improve performance if you know that changes // in content do not change the layout size of the RecyclerView mRecyclerView.setHasFixedSize(true); // use a linear layout manager mLayoutManager = new LinearLayoutManager(this); mRecyclerView.setLayoutManager(mLayoutManager); // specify an adapter (see also next example) mAdapter = new MyAdapter(myDataset); mRecyclerView.setAdapter(mAdapter); &#125; // ...&#125; Adapterï¼Œä¸ ListView çš„å†™æ³•å·®å¼‚è¾ƒå¤§ã€‚ éœ€è¦ç»§æ‰¿è‡ª RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt; å¿…é¡»å£°æ˜ä¸€ä¸ªé™æ€å†…éƒ¨ç±» ViewHolder é‡è½½ onCreateViewHolder æ–¹æ³•ï¼Œéœ€è¦ç”Ÿæˆå¸ƒå±€ï¼Œåˆå§‹åŒ– ViewHolder å¹¶è¿”å› é‡è½½ onBindViewHolder æ–¹æ³•ï¼Œè¿™ä¸€æ­¥æ˜¯å°† ViewHolder ä¸­çš„ View éƒ½èµ‹äºˆæ­£ç¡®çš„æ•°æ® 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class MyAdapter extends RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt; &#123; private String[] mDataset; // Provide a reference to the views for each data item // Complex data items may need more than one view per item, and // you provide access to all the views for a data item in a view holder public static class ViewHolder extends RecyclerView.ViewHolder &#123; // each data item is just a string in this case public TextView mTextView; public ViewHolder(TextView v) &#123; super(v); mTextView = v; &#125; &#125; // Provide a suitable constructor (depends on the kind of dataset) public MyAdapter(String[] myDataset) &#123; mDataset = myDataset; &#125; // Create new views (invoked by the layout manager) @Override public MyAdapter.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType) &#123; // create a new view TextView v = (TextView) LayoutInflater.from(parent.getContext()) .inflate(R.layout.my_text_view, parent, false); ... ViewHolder vh = new ViewHolder(v); return vh; &#125; // Replace the contents of a view (invoked by the layout manager) @Override public void onBindViewHolder(ViewHolder holder, int position) &#123; // - get element from your dataset at this position // - replace the contents of the view with that element holder.mTextView.setText(mDataset[position]); &#125; // Return the size of your dataset (invoked by the layout manager) @Override public int getItemCount() &#123; return mDataset.length; &#125;&#125; LayoutManagerAndroid Support Library è‡ªå¸¦çš„æœ‰ä¸‰ç§ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿ RecyclerView.LayoutManager æ¥å®ç°è‡ªå·±çš„å¸ƒå±€ã€‚ LinearLayoutManagerï¼Œä¸€ç»´çº¿æ€§åˆ—è¡¨ï¼ŒåŒ ListView GridLayoutManagerï¼Œç½‘æ ¼åˆ—è¡¨ï¼ŒåŒ GridView StaggeredGridLayotManagerï¼Œç€‘å¸ƒæµåˆ—è¡¨ï¼Œåˆ—ä¹‹é—´æœ‰é”™ä½ åŠ¨ç”»Item å˜åŒ–çš„æ—¶å€™ï¼ŒRecyclerView ä½¿ç”¨ animator æ¥æ”¹å˜å¤–è§‚ï¼Œanimator ç»§æ‰¿è‡ª RecyclerView.ItemAnimatorã€‚ List-Item Selectionè¿™éƒ¨åˆ†ç•¥ï¼Œæ—¥åå†™ Demo è¡¥å…… RecyclerView å‡ å¤§é‡è¦æˆå‘˜ RecyclerView Components RecyclerView ç¼“å­˜ å†…éƒ¨ä¸¤çº§ç¼“å­˜ åˆ’å‡ºç•Œé¢çš„ ViewHolder ä¼šè¢«æ”¾å…¥ Cacheï¼ˆä¸€çº§ç¼“å­˜ï¼‰ï¼Œå®¹é‡ä¸º2ã€‚Cache ä¸­çš„å¯¹è±¡éƒ½æ˜¯åŒç§ ViewTypeã€‚ ä» Cache ä¸­è¢«æ¸…é™¤çš„å¯¹è±¡ï¼Œä¼šè¢«æ”¾å…¥ RecycledViewPoolï¼Œå®¹é‡ä¸º5ã€‚RecycledViewPool ä¸­çš„å¯¹è±¡æŒ‰ç…§ ViewType åˆ†ç±»ã€‚ RecyclerView Cache å‚è€ƒ RecycyerView - Developers æ·±å…¥æµ…å‡º RecyclerView å¾®ä¿¡çš„â€œåˆ†äº«â€é¡µé¢ä½¿ç”¨çš„æ˜¯å“ªç§å¯åŠ¨æ¨¡å¼è¿™æ˜¯é¢è¯•æœ‰èµæ—¶ï¼Œé¢è¯•å®˜æé—®çš„ç¬¬ä¸€é“é¢˜ç›®ã€‚ç›´è§‰å‘Šè¯‰æˆ‘ Standard å’Œ SingleTop éƒ½ä¸é€‚ç”¨ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä» SingleInstance å’Œ SingleTask ä¸­é€‰å‡ºä¸€ä¸ªåˆé€‚çš„æ¥ï¼Œè¿™ä¸€å—æ˜¯çŸ¥è¯†ç›²åŒºï¼Œä»¥å‰æ ¹æœ¬æ²¡æœ‰ä»å®ç”¨çš„è§’åº¦æ¥è€ƒè™‘è¿™é—®é¢˜ï¼Œéƒ½æ˜¯æ­»è®°ç¡¬èƒŒå¯åŠ¨æ¨¡å¼ã€‚ æœ¬è´¨ä¸Šè¿˜æ˜¯è€ƒå¯Ÿå¯åŠ¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ã€‚ SingleInstanceä¸å¤–éƒ¨åº”ç”¨å…±äº«çš„é¡µé¢ï¼Œä¸€èˆ¬è®¾ç½®æˆè¿™ç§å¯åŠ¨æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä½œä¸ºå¤–éƒ¨Appè°ƒç”¨è‡ªå·±å®¢æˆ·ç«¯ç¨‹åºçš„å…¥å£ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿å…¶å®ƒåº”ç”¨çš„ Activity è°ƒèµ·æœ¬åº”ç”¨ã€‚åŒæ—¶ï¼Œç”±äº SingleInstance ä¼šå•ç‹¬èµ·ä¸€ä¸ª Taskï¼Œå½“ç”¨æˆ·æ“ä½œå®Œæˆè¯¥é¡µé¢åï¼Œç‚¹å‡»è¿”å›æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨é€€å›åˆ°å¤–éƒ¨åº”ç”¨ã€‚åœ¨ä½¿ç”¨æ—¶åº”è¯¥æ³¨æ„å£°æ˜taskAffinityï¼Œä»¥ä¾¿åœ¨ä»»åŠ¡ç®¡ç†ä¸­çœ‹åˆ°æ–° Taskã€‚ 1234&lt;activity android:name=\".SingleInstanceActivity\" android:label=\"singleInstance launchMode\" android:launchMode=\"singleInstance\"/&gt; SingleTaskä¸€ä¸ª Task å†…åªå…è®¸æœ‰ä¸€ä¸ª SingleTask çš„ Activityï¼Œå¯ä¸œæ—¶å¦‚æœ Task å†…å·²ç»æœ‰äº†åŒ Activityï¼Œåˆ™ä¼šå°†å…¶ä¸Šæ‰€æœ‰çš„ Activity æŒ‰ç…§ç”Ÿå‘½æµç¨‹è¿›è¡Œé”€æ¯ï¼ŒåŒæ—¶è°ƒç”¨è¯¥ Activity çš„onNewIntentæ–¹æ³•ã€‚é€‚åˆçš„åº”ç”¨åœºæ™¯æ˜¯åº”ç”¨å†…éƒ¨ç»Ÿä¸€å…¥å£ï¼Œæ¯”å¦‚æµè§ˆå™¨é¦–é¡µã€å•†æˆ·è¯¦æƒ…é¡µç­‰ã€‚åŒæ ·ï¼Œéœ€è¦å£°æ˜taskAffinityä»¥ä¿è¯å®ƒä¼šæ–°èµ·ä¸€ä¸ª Taskã€‚ SingleTopåŒæ ·ï¼Œå¦‚æœ Task é¡¶å·²ç»æœ‰äº†åŒä¸€ä¸ª Activityï¼Œä¼šè°ƒç”¨onNewIntentä¼ å…¥å‚æ•°ã€‚ åº”ç”¨åœºæ™¯ï¼š ç‚¹å‡»â€œé€šçŸ¥â€åæ‰“å¼€çš„è¯¦æƒ…é¡µé¢ æµè§ˆå™¨æœç´¢ç»“æœé¡µï¼Œå¸¦æœ‰å…³é”®è¯è¾“å…¥æ¡† Standardåº”ç”¨äºå¯ä»¥æ‰“å¼€å¤šä¸ªå®ä¾‹çš„é¡µé¢ï¼Œæ¯”å¦‚ä¸ä¸åŒäººçš„èŠå¤©é¡µé¢ï¼Œæ’°å†™é‚®ä»¶é¡µé¢ç­‰ã€‚ åœºæ™¯ï¼šåº”ç”¨è¿›ç¨‹è¢«æ€åå†æ¬¡å¯åŠ¨è®¾æƒ³ä¸€ä¸ªè¿™æ ·çš„åº”ç”¨åœºæ™¯ï¼šç”¨æˆ·åœ¨ä½¿ç”¨ä½ çš„åº”ç”¨æ—¶ï¼Œçªç„¶æ¥æ”¶åˆ°ä¸€ä¸ªå¾®ä¿¡æ¶ˆæ¯ï¼Œä»–è·³è½¬åˆ°å¾®ä¿¡åï¼Œä½ çš„åº”ç”¨è¢«åˆ‡æ¢è‡³åå°è¿è¡Œã€‚è¯¥ç”¨æˆ·åœ¨å¾®ä¿¡ä¸­ç¿»é˜…äº†æœ‹å‹åœˆã€æŸ¥çœ‹ä¸€äº›è§†é¢‘ï¼Œä»¥åŠè¿›è¡Œäº†å…¶å®ƒå¾ˆå¤šåƒå†…å­˜çš„æ“ä½œï¼Œå¯¼è‡´ç³»ç»Ÿå†…å­˜ç´§å¼ ï¼Œè¿™æ—¶ä½ çš„åº”ç”¨è¿›ç¨‹è¢«æ€æ­»ã€‚ä½†æ˜¯ç”±äºAndroidç³»ç»Ÿä»ç„¶ä¼šä¿æŒ Task æ ˆçš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨æˆ·åœ¨â€œæœ€è¿‘åº”ç”¨â€é‡Œä»ç„¶æ˜¯å¯ä»¥çœ‹åˆ°ä½ çš„åº”ç”¨çš„ã€‚æ­¤æ—¶å¦‚æœç”¨æˆ·é€šè¿‡â€œæœ€è¿‘åº”ç”¨â€åˆ‡æ¢å›ä½ çš„åº”ç”¨ï¼ˆè¿›ç¨‹å·²ç»è¢«æ€æ­»ï¼‰ï¼Œææ˜“å‘ç”Ÿå¼‚å¸¸å¯¼è‡´é—ªé€€ã€‚ å¼‚å¸¸åŸå› åœ¨äºå½“è¿›ç¨‹è¢«æ€æ­»åï¼Œæ‰€æœ‰çš„é™æ€å¸¸é‡å€¼ä¼šè¢«æ¸…ç©ºï¼Œå¦‚æœåœ¨æ­¤æ—¶ä½¿ç”¨å¹¶ä¸”æœªç»æ£€æŸ¥ï¼Œå¾ˆå®¹æ˜“å‡ºç° NPE ç­‰å¼‚å¸¸ã€‚å¸¸è§„è§£å†³æ–¹æ³•æ˜¯åœ¨ onSaveInstance é‡Œé¢å¯¹å˜é‡è¿›è¡Œä¿å­˜ï¼Œç„¶ååœ¨ onRestoreInstance é‡Œæ¢å¤å˜é‡å€¼ã€‚ç¼ºç‚¹æ˜¯å·¥ä½œé‡å¤§ï¼Œä»£ç å†—é•¿ã€‚ æ­¤æ—¶çš„ä¸€ä¸ªè§£å†³æ€è·¯æ˜¯å¯¹äºè¿›ç¨‹è¢«æ€æ­»çš„æƒ…å†µï¼Œå¦‚æœå†æ¬¡å¯åŠ¨ï¼Œåˆ™è·³è½¬å›åº”ç”¨é¦–é¡µï¼ˆè¿™ç‚¹éœ€è¦è·å–äº§å“ç»ç†åŒæ„ï¼‰ï¼Œéšåçš„ä¸€åˆ‡ç­‰åŒäºé¦–æ¬¡å¯åŠ¨ã€‚ ç›¸åº”çš„æŠ€æœ¯æ€è·¯æ˜¯ï¼Œå°†é¦–é¡µå¯åŠ¨æ¨¡å¼å£°æ˜ä¸º SingleTaskï¼ŒåŒæ—¶å†™ä¸€ä¸ª BaseActivityï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ª getAppStatus æ–¹æ³•ç”¨æ¥åˆ¤æ–­åº”ç”¨æ˜¯å¦å¤„äºå›æ”¶åé‡æ–°å¯åŠ¨çš„çŠ¶æ€ï¼Œåˆ¤æ–­æ–¹æ³•æ˜¯è¯»å–ä¸€ä¸ªé™æ€ int ç±»å‹å˜é‡ appStatusï¼Œå®ƒé»˜è®¤å€¼æ˜¯ KILLEDï¼Œåœ¨æ¯ä¸€ä¸ªå­ Activity çš„ onCreate æ–¹æ³•é‡Œå°†å…¶è®¾ç½®æˆ NORMAL å€¼ã€‚è¿™æ ·ä¸€æ—¦è¢«å›æ”¶ï¼Œå®ƒå°±ä¼šå˜æˆ KILLEDï¼Œå°±å¯ä»¥åœ¨ BaseActivity.onCreate é‡Œé€šè¿‡å¯¹è¿™ä¸ªå˜é‡çš„åˆ¤æ–­ï¼Œå†³å®šæ˜¯ä¸æ˜¯è¦é‡æ–°å›åˆ°é¦–é¡µã€‚ å‚è€ƒï¼šå¦‚ä½•è®©ä½ çš„appåœ¨åå°è¢«å¹²æ‰åä¼˜é›…çš„å¯åŠ¨IntentService å®ç°åŸç†é€šè¿‡startService(Intent)æ¥å¯åŠ¨ä¸€ä¸ª IntentServiceï¼Œå®ƒå†…éƒ¨æœ‰ä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—ï¼ˆWorker Threadï¼‰ï¼Œåœ¨å·¥ä½œçº¿ç¨‹å†…è¿è¡Œï¼Œä¸ä¼šå½±å“ UI çº¿ç¨‹ã€‚IntentService æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç»§æ‰¿å®ƒæ—¶å¿…é¡»å®ç°onHandleIntentæ–¹æ³•ã€‚ æ™®é€š Service ç”±äºè¿è¡Œåœ¨ UI çº¿ç¨‹ï¼Œæ— æ³•è¿›è¡Œè€—æ—¶æ“ä½œï¼ŒIntentService è§£å†³äº†è¿™ä¸ªé—®é¢˜ è¿è¡Œå®Œæˆåï¼ŒIntentService ä¼šè‡ªåŠ¨åœæ­¢ ä»åŸç†ä¸Šè®²ï¼ŒIntentService æ˜¯åˆ›å»ºäº†ä¸€ä¸ª HandlerThreadï¼Œç„¶åç”¨ thread.getLooper() èµ‹ç»™ Handlerï¼Œè¿™ä¸ª Handler æ¥æ”¶ onStart æ—¶ä¼ æ¥çš„ Intentï¼Œå¹¶ä»¥æ­¤ Intent è°ƒç”¨ä½ æ‰€è¦†ç›–çš„ onHandleIntent æ–¹æ³•ã€‚ä»»åŠ¡å®Œæˆåï¼Œå¯ä»¥ç”¨å¹¿æ’­æˆ–è€… EventBus ç­‰æ‰‹æ®µé€šçŸ¥è°ƒç”¨è€…ã€‚ å‚è€ƒï¼šIntentServiceçš„åŸç†å’Œå®ä¾‹åˆ†æHTTP è¯·æ±‚å’Œå“åº”å¤´çš„æ ¼å¼æœ‰èµå’Œå¨ä½©éƒ½é—®åˆ°äº†è¿™ä¸€é¢˜ã€‚ HTTPçš„å¤´åŸŸåŒ…æ‹¬é€šç”¨å¤´ï¼Œè¯·æ±‚å¤´ï¼Œå“åº”å¤´å’Œå®ä½“å¤´å››ä¸ªéƒ¨åˆ†ã€‚æ¯ä¸ªå¤´åŸŸç”±ä¸€ä¸ªåŸŸåï¼Œå†’å·ï¼ˆ:ï¼‰å’ŒåŸŸå€¼ä¸‰éƒ¨åˆ†ç»„æˆã€‚åŸŸåæ˜¯å¤§å°å†™æ— å…³çš„ï¼ŒåŸŸå€¼å‰å¯ä»¥æ·»åŠ ä»»ä½•æ•°é‡çš„ç©ºæ ¼ç¬¦ï¼Œå¤´åŸŸå¯ä»¥è¢«æ‰©å±•ä¸ºå¤šè¡Œï¼Œåœ¨æ¯è¡Œå¼€å§‹å¤„ï¼Œä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ã€‚ é€šç”¨å¤´é€šç”¨å¤´åŸŸåŒ…å«è¯·æ±‚å’Œå“åº”æ¶ˆæ¯éƒ½æ”¯æŒçš„å¤´åŸŸï¼Œé€šç”¨å¤´åŸŸåŒ…å«Cache-Controlã€Connectionã€Dateã€Pragmaã€Transfer-Encodingã€Upgradeã€Viaã€‚ è¯·æ±‚å¤´è¯·æ±‚æ¶ˆæ¯çš„ç¬¬ä¸€è¡Œä¸ºä¸‹é¢çš„æ ¼å¼ï¼š 1Method SP Request-URI SP HTTP-Version CRLF è¯·æ±‚å¤´åŸŸå…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€’å…³äºè¯·æ±‚æˆ–è€…å…³äºå®¢æˆ·æœºçš„é™„åŠ ä¿¡æ¯ã€‚è¯·æ±‚å¤´åŸŸå¯èƒ½åŒ…å«ä¸‹åˆ—å­—æ®µAcceptã€Accept-Charsetã€Accept- Encodingã€Accept-Languageã€Authorizationã€Fromã€Hostã€If-Modified-Sinceã€If- Matchã€If-None-Matchã€If-Rangeã€If-Rangeã€If-Unmodified-Sinceã€Max-Forwardsã€ Proxy-Authorizationã€Rangeã€Refererã€User-Agentã€‚ å“åº”å¤´å“åº”æ¶ˆæ¯çš„ç¬¬ä¸€è¡Œä¸ºä¸‹é¢çš„æ ¼å¼ï¼š 1HTTP-Version SP Status-Code SP Reason-Phrase CRLF å¸¸è§é”™è¯¯ç  1xx:ä¿¡æ¯å“åº”ç±»ï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç† 2xx:å¤„ç†æˆåŠŸå“åº”ç±»ï¼Œè¡¨ç¤ºåŠ¨ä½œè¢«æˆåŠŸæ¥æ”¶ã€ç†è§£å’Œæ¥å— 3xx:é‡å®šå‘å“åº”ç±»ï¼Œä¸ºäº†å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œå¿…é¡»æ¥å—è¿›ä¸€æ­¥å¤„ç† 4xx:å®¢æˆ·ç«¯é”™è¯¯ï¼Œå®¢æˆ·è¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–è€…æ˜¯ä¸èƒ½æ­£ç¡®æ‰§è¡Œ 5xx:æœåŠ¡ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨ä¸èƒ½æ­£ç¡®æ‰§è¡Œä¸€ä¸ªæ­£ç¡®çš„è¯·æ±‚ å®ä½“ä¿¡æ¯è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½å¯ä»¥åŒ…å«å®ä½“ä¿¡æ¯ï¼Œå®ä½“ä¿¡æ¯ä¸€èˆ¬ç”±å®ä½“å¤´åŸŸå’Œå®ä½“ç»„æˆã€‚å®ä½“å¤´åŸŸåŒ…å«å…³äºå®ä½“çš„åŸä¿¡æ¯ï¼Œå®ä½“å¤´åŒ…æ‹¬Allowã€Content-Baseã€Content-Encodingã€Content-Languageã€ Content-Lengthã€Content-Locationã€Content-MD5ã€Content-Rangeã€Content-Typeã€ Etagã€Expiresã€Last-Modifiedã€extension-headerã€‚ MVP ä¸­å¯¹ Presenter å¦‚ä½•è¿›è¡Œæµ‹è¯•å„å±‚å•å…ƒæµ‹è¯•é€‰å‹å„å±‚ç”±äºç‰¹æ€§ä¸åŒï¼Œæ‰€é‡‡ç”¨çš„æµ‹è¯•å·¥å…·ä¹Ÿä¸ä¸€æ · JVM Modelå±‚ï¼šæ¶‰åŠæ•°æ®åº“æ“ä½œï¼Œä¾èµ– Android ç¯å¢ƒï¼Œä½¿ç”¨ AndroidJUnitRunner æµ‹è¯• Viewå±‚ï¼šæ¶‰åŠ UIï¼Œä½¿ç”¨ Espresso è¿›è¡Œæµ‹è¯• Presenterå±‚ï¼šä¸éœ€è¦ Android ç¯å¢ƒï¼Œçº¯ JAVA ä»£ç ï¼Œä½¿ç”¨ JUnit æµ‹è¯• MVP çš„ä¸€å¤§ä¼˜ç‚¹å°±æ˜¯å°†æ•°æ®ã€è§†å›¾ã€é€»è¾‘è§£è€¦ï¼Œä»è€Œå¯ä»¥å¯¹å…¶ä¸­æŸä¸€è§’è‰²è¿›è¡Œå•ç‹¬æµ‹è¯•ã€‚ç„¶è€Œï¼Œæƒ³è¦å¯¹ Presenter è¿›è¡Œæµ‹è¯•ï¼Œå°±å¿…é¡»å›ç­”ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š æµ‹è¯•è¿‡ç¨‹è¦é¿å…é€šè¿‡ç½‘ç»œæˆ–è€…æœ¬åœ°å­˜å‚¨äº§ç”Ÿè„æ•°æ®ï¼Œå› æ­¤å¿…é¡»å¯¹æ•°æ®å±‚æ¥å£è¿›è¡Œ Mock ä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå¹¶ä¸” Presenter æœ¬èº«æ˜¯è§†å›¾æ— å…³çš„ï¼Œå› æ­¤æµ‹è¯•ç”¨ä¾‹åº”è¯¥å¯ä»¥è„±ç¦»çœŸæœº/æ¨¡æ‹Ÿå™¨ç‹¬ç«‹è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æœ‰å¯¹ View çš„Mock å¦‚ä½•æ£€éªŒ Presenter çš„å„ä¸ªæ–¹æ³•è¿è¡ŒæˆåŠŸäº† æˆ‘ä»¬ä»¥ Demo ä¸­å¯¹ AddEditTaskPresenter çš„æµ‹è¯•ä¸ºä¾‹ï¼Œçœ‹å‚è€ƒç­”æ¡ˆæ˜¯æ€æ ·çš„ï¼Œå¯¹åº”çš„ç±»æ˜¯AddEditTaskPresenterTest.java 12@Mockprivate TasksRepository mTasksRepository; è¿™é‡Œç›´æ¥ä½¿ç”¨ Mockito çš„@Mockæ³¨è§£æ¥å£°æ˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¦åœ¨æµ‹è¯•ç”¨ä¾‹è¿è¡Œä¹‹å‰é€šè¿‡MockitoAnnotations.initMocks(this)è¿›è¡Œæ³¨å…¥ã€‚å¦‚æ­¤è¿™èˆ¬è§£å†³äº†æ•°æ®å±‚ Mock çš„é—®é¢˜ã€‚ å¯¹ View çš„æ³¨å…¥ä¹Ÿä¸€æ · 12@Mockprivate AddEditTaskContract.View mAddEditTaskView; 123456789@Beforepublic void setupMocksAndView() &#123; // Mockito has a very convenient way to inject mocks by using the @Mock annotation. To // inject the mocks in the test the initMocks method needs to be called. MockitoAnnotations.initMocks(this); // æ³¨å…¥ Mock å¯¹è±¡ // The presenter wont't update the view unless it's active. when(mAddEditTaskView.isActive()).thenReturn(true); // è¿™æ®µä»£ç çš„å«ä¹‰æ˜¯â€œå½“ isActive è¢«è°ƒç”¨æ—¶ï¼Œç›´æ¥è¿”å› trueâ€&#125; æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹å¦‚ä½•æ£€éªŒ Presenter é‡Œé¢å„ä¸ªæ–¹æ³•è°ƒç”¨æˆåŠŸï¼Œé€‰ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æ¶‰åŠåˆ°å›è°ƒçš„åœºæ™¯ï¼Œä¹Ÿå°±æ˜¯è·å–å•ä¸ª Taskï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥å›è°ƒæ¥å£ã€‚ 1234567891011121314151617181920212223@Testpublic void populateTask_callsRepoAndUpdatesView() &#123; Task testTask = new Task(\"TITLE\", \"DESCRIPTION\"); // Get a reference to the class under test mAddEditTaskPresenter = new AddEditTaskPresenter(testTask.getId(), mTasksRepository, mAddEditTaskView, true); // When the presenter is asked to populate an existing task mAddEditTaskPresenter.populateTask(); // è¿™é‡Œä¼šè°ƒç”¨ Repository é‡Œé¢çš„ getTask æ–¹æ³• // Then the task repository is queried and the view updated // éªŒè¯è°ƒç”¨åˆ°äº† getTask æ–¹æ³•ï¼Œå¹¶ä¸”å°†å›è°ƒèµ‹ç»™ mGetTaskCallbackCaptorï¼Œåé¢å¯ä»¥å¯¹ captor è‡ªç”±è§¦å‘å›è°ƒ verify(mTasksRepository).getTask(eq(testTask.getId()), mGetTaskCallbackCaptor.capture()); assertThat(mAddEditTaskPresenter.isDataMissing(), is(true)); // è¿™æ—¶å€™è¿˜æ²¡æœ‰åŠ è½½æˆåŠŸ task // Simulate callback mGetTaskCallbackCaptor.getValue().onTaskLoaded(testTask); // éªŒè¯ View é‡Œé¢ç›¸åº”æ–¹æ³•å¾—åˆ°è°ƒç”¨ verify(mAddEditTaskView).setTitle(testTask.getTitle()); verify(mAddEditTaskView).setDescription(testTask.getDescription()); assertThat(mAddEditTaskPresenter.isDataMissing(), is(false)); // æ­¤æ—¶åŠ è½½æˆåŠŸ&#125; ç»¼ä¸Šï¼Œå¯ä»¥ç†è§£å¯¹ Presenter è¿›è¡Œå•å…ƒæµ‹è¯•çš„éªŒè¯æµç¨‹å°±æ˜¯â€œè°ƒç”¨ Presenter é‡Œé¢çš„æŸä¸ªæ–¹æ³• -&gt; å°†å›è°ƒæš‚å­˜ -&gt; éªŒè¯ View é‡Œé¢ç›¸åº”çš„æ–¹æ³•è¢«æ‰§è¡Œ -&gt; ç»™å›è°ƒèµ‹å€¼ï¼ŒéªŒè¯å›è°ƒâ€ å±å¹•ç‰©ç†å°ºå¯¸ï¼Œåƒç´ ï¼Œdpï¼Œpxï¼Œspç‰©ç†å°ºå¯¸ï¼šè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å±å¹•é•¿å¤šå°‘mmï¼Œå®½å¤šå°‘mmã€‚ä½†é€šå¸¸ä¸ä¼šç›´æ¥è¯´é•¿å®½ï¼Œè€Œæ˜¯ç”¨â€œxxè‹±å¯¸â€è¡¨ç¤ºï¼Œæ¯”å¦‚æˆ‘çš„å°ç±³5xå°±æ˜¯5.5è‹±å¯¸ï¼Œè¿™é‡Œçš„5.5è‹±å¯¸æŒ‡çš„æ˜¯å¯¹è§’çº¿é•¿åº¦ï¼Œ1è‹±å¯¸ â‰ˆ 2.54cmï¼Œ5.5è‹±å¯¸ â‰ˆ 13.97cm â‰ˆ 14cmï¼Œå¸‚é¢ä¸Šå¦‚ä»Š 90% ä»¥ä¸Šçš„æ‰‹æœºéƒ½æ˜¯ 16:9 çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ—å‡ºæ–¹ç¨‹ (16x)^2 + (9x)^2 = 14^2ï¼Œè§£æ–¹ç¨‹å¾—åˆ° x = 0.76cmï¼Œå¾—å‡ºå°ç±³5xå±å¹•ç‰©ç†å°ºå¯¸ä¸ºé•¿ 12.16cmï¼Œå®½ 6.84cmã€‚ 5xå±å¹•å°ºå¯¸ åˆ†è¾¨ç‡/åƒç´ ï¼šä»ä¸Šå›¾é‡Œçœ‹åˆ°ï¼Œ5xå®½é«˜ä¸º 1080px * 1920pxï¼Œå¯¹äºè¿™æ ·çš„æ‰‹æœºé€šå¸¸ç§°å…¶åˆ†è¾¨ç‡ä¸º 1080pã€‚åƒç´ çš„æ¦‚å¿µæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä¸€ä¸ªåƒç´ å°±æ˜¯æ¶²æ™¶å±çš„ä¸€ä¸ªæœ€å°å‘å…‰å•å…ƒï¼Œ8-bit æ¸¸æˆå¸¸è¢«ç§°ä¸ºåƒç´ æ¸¸æˆï¼Œå› ä¸ºåƒç´ é¢—ç²’é€šå¸¸æ¯”è¾ƒå¤§ï¼Œå›¾åƒæœ‰æ–¹å—æ„Ÿã€‚ ç‰©ç†å°ºå¯¸ä¸åˆ†è¾¨ç‡æ²¡æœ‰å¿…ç„¶çš„å…³ç³»ã€‚ åƒç´ å¯†åº¦ï¼šPixels Per Inchï¼ŒPPIï¼Œä¹Ÿç§°ä¸º Dots Per Inchï¼ˆDPIï¼‰ã€‚æ¯è‹±å¯¸ä¸Šæ’åˆ—çš„åƒç´ ä¸ªæ•°ï¼Œè¿™ä¸ªâ€œæ¯è‹±å¯¸â€æ˜¯é•¿è¿˜æ˜¯å®½å‘¢ï¼Ÿéƒ½ä¸æ˜¯ï¼Œæ˜¯æŒ‡å¯¹è§’çº¿ã€‚é€šè¿‡å‹¾è‚¡å®šç†è®¡ç®—ï¼Œ1080*1920 åˆ†è¾¨ç‡çš„å±å¹•ï¼Œå…¶å¯¹è§’çº¿åƒç´ æ•°ä¸º 2203pï¼Œé‚£ä¹ˆå°ç±³5xçš„ PPI å°±æ˜¯ 2203/5.5 = 400ã€‚åƒç´ å¯†åº¦è¶Šé«˜ï¼Œé”¯é½¿æ„Ÿè¶Šä½ï¼Œæ˜¾ç¤ºè¶Šç²¾ç»†ã€‚ å€ç‡å’Œé€»è¾‘åƒç´ ï¼šiPhone 3gs å’Œ 4sï¼Œç‰©ç†å°ºå¯¸éƒ½æ˜¯ 3.5 è‹±å¯¸ï¼Œ3gs çš„åˆ†è¾¨ç‡æ˜¯ 320x480ï¼Œ4s çš„åˆ†è¾¨ç‡åˆ™æ˜¯ 640x960ï¼Œ4s çš„åƒç´ å¯†åº¦æ˜¯ 3gs çš„ä¸¤å€ï¼Œå•ä¸ªåƒç´ å°ºå¯¸æ˜¯ 3gs çš„ä¸€åŠã€‚ä½†æ˜¯åœ¨æ˜¾ç¤ºä¸­ï¼Œè¿™ä¸¤ä¸ªè®¾å¤‡çš„æ˜¾ç¤ºæ•ˆæœå´æ˜¯ä¸€æ ·çš„ï¼ŒåŸå› åœ¨äº 4s ç”¨ 2x2 ä¸ªåƒç´ åˆå¹¶æˆ 1 ä¸ªåƒç´ ï¼Œå¦‚ä¸‹å›¾ã€‚è¿™ä½¿å¾—åŒæ ·çš„å›¾ç‰‡åœ¨ 4s ä¸Šæ˜¾ç¤ºæ›´åŠ æ¸…æ™°ã€‚ç„¶è€Œè¿™å¯¹å›¾ç‰‡æºæ–‡ä»¶æœ‰è¦æ±‚ï¼Œå¿…é¡»ä½¿ç”¨å¸¦æœ‰â€œ@2xâ€åç¼€çš„å›¾ç‰‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å…¶ç”¨äº 4s è®¾å¤‡ä¸Šã€‚ 3gs 4s ä¸Šé¢è®²çš„æ˜¯è‹¹æœçš„å¤„ç†æ–¹æ³•ï¼Œå¯¹äº Android è¿™å¹¶ä¸å¤ªé€‚ç”¨ï¼Œå› ä¸º Android è®¾å¤‡çš„åˆ†è¾¨ç‡å®åœ¨å¤ªå¤šäº†ã€‚å› æ­¤åˆ’åˆ†ä¸ºå¤šç§å°ºå¯¸ï¼Œå¦‚ä¸‹ã€‚ Android DPI ä»¥ 160DPIï¼ˆmdpiï¼‰ ä¸ºåŸºå‡†ï¼Œå€ç‡ä¸ºä¸€å€ï¼Œå…¶å®ƒå¯†åº¦ä»¥æ­¤è®¡ç®—ã€‚åœ¨ 160DPIçš„æƒ…å†µä¸‹ï¼Œ1px = 1dpã€‚ ldpi [0.75å€] mdpi [1å€] hdpi [1.5å€] xhdpi [2å€] xxhdpi [3å€] xxxhdpi [4å€] æ‰€ä»¥ä¸ºäº†ä¿è¯å‡†ç¡®é«˜æ•ˆçš„æ²Ÿé€šï¼Œæ— è®ºæ˜¯åœ¨æ ‡æ³¨å›¾è¿˜æ˜¯åœ¨æ—¥å¸¸æ²Ÿé€šä¸­ï¼Œè®¾è®¡äººå‘˜ä¸å¼€å‘äººå‘˜éƒ½éœ€è¦å°½é‡ä»¥é€»è¾‘åƒç´ å°ºå¯¸æ¥æè¿°å’Œç†è§£ç•Œé¢ï¼ŒçœŸæ­£å†³å®šæ˜¾ç¤ºæ•ˆæœçš„ï¼Œæ˜¯é€»è¾‘åƒç´ å°ºå¯¸ã€‚ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰ Android è®¾å¤‡çš„é€»è¾‘åƒç´ å°ºå¯¸éƒ½ä¸€è‡´ï¼Œæ¯”å¦‚ä¸¤ç§å¸¸è§çš„å±å¹•480Ã—800å’Œ1080Ã—1920ï¼Œå®ƒä»¬åˆ†åˆ«å±äºhdpiå’Œxxhdpiã€‚é™¤ä»¥å„è‡ªå€ç‡1.5å€å’Œ3å€ï¼Œå¾—åˆ°é€»è¾‘åƒç´ ä¸º320Ã—533å’Œ360Ã—640ã€‚å¾ˆæ˜¾ç„¶ï¼Œåè€…æ›´å®½æ›´é«˜ï¼Œèƒ½æ˜¾ç¤ºæ›´å¤šå†…å®¹ã€‚ pxï¼špixels,åƒç´ ï¼Œå±å¹•ä¸Šå®é™…çš„åƒç´ ç‚¹å•ä½ dpï¼šdevice independent pixels, è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œå®‰å“ä¸“ç”¨é•¿åº¦å•ä½ï¼Œä»¥160ppiå±å¹•ä¸ºæ ‡å‡†ï¼Œåˆ™ 1dp=1pxã€‚dp*ppi/160=px spï¼šscaled pixels,æ”¾å¤§åƒç´ ï¼Œå®‰å“ä¸“ç”¨å­—ä½“å•ä½ï¼Œä»¥160ppiå±å¹•ä¸ºæ ‡å‡†ï¼Œå­—ä½“å¤§å°ä¸º100%æ—¶ï¼Œåˆ™1dp=1px Android ä¸€èˆ¬ä»¥ 360x640 çš„é€»è¾‘å°ºå¯¸æ¥è®¾è®¡ UI Androidå¸¸è§å±å¹•å°ºå¯¸ä¸DPI","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://lilei.pro/tags/é¢è¯•/"}]},{"title":"OkHttp æºç å­¦ä¹ ","date":"2018-07-06T07:36:57.000Z","path":"2018/07/06/okhttp/","text":"OkHttp æ˜¯ç”± Square å‘å¸ƒçš„ HTTP Clientï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚ã€‚ç”¨å®˜ç½‘çš„æè¿°å°±æ˜¯ï¼ŒAn HTTP &amp; HTTP/2 client for Android and Java applications. ä¼˜ç‚¹ æ”¯æŒ HTTP/2ï¼Œå¤šä¸ªè¿æ¥å¯ä»¥å…±ç”¨ä¸€ä¸ª Socket è¿æ¥æ± å¯ä»¥å‡å°‘å»¶è¿Ÿï¼ˆé HTTP/2ï¼‰ GZIP å‹ç¼©å‡å°‘æµé‡ Response ç¼“å­˜ é‡å®šå‘å’Œé‡è¯• OkHttp çš„ç”¨æ³•åŒæ­¥è¯·æ±‚éœ€è¦åœ¨ AsyncTask æˆ–è€…èµ·çº¿ç¨‹æ¥è¿›è¡Œï¼Œè°ƒç”¨execute() 123456789101112private String doRequest(String param) &#123; Request.Builder builder = new Request.Builder(); builder.url(param); Request request = builder.build(); try &#123; Response response = client.newCall(request).execute(); return response.body().string(); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; return null;&#125; å¼‚æ­¥è¯·æ±‚è°ƒç”¨enqueue() 1234567891011121314151617181920212223242526OkHttpClient client = new OkHttpClient();Request request = new Request.Builder() .url(url) .build();client.newCall(request).enqueue(new Callback() &#123; @Override public void onFailure(Call call, IOException e) &#123; call.cancel(); &#125; @Override public void onResponse(Call call, Response response) throws IOException &#123; final String myResponse = response.body().string(); MainActivity.this.runOnUiThread(new Runnable() &#123; @Override public void run() &#123; txtString.setText(myResponse); &#125; &#125;); &#125;&#125; è®¾ç½® Header å’Œå‚æ•°åœ¨ URL æ„å»ºè¿‡ç¨‹ä¸­é€šè¿‡addQueryParameterè®¾ç½®å‚æ•°ï¼Œåœ¨ Request æ„å»ºè¿‡ç¨‹ä¸­è®¾ç½® Header 123456789HttpUrl.Builder urlBuilder = HttpUrl.parse(\"https://httpbin.org/get).newBuilder();urlBuilder.addQueryParameter(\"website\", \"www.journaldev.com\");urlBuilder.addQueryParameter(\"tutorials\", \"android\");String url = urlBuilder.build().toString();Request request = new Request.Builder() .header(\"Authorization\", \"replace this text with your token\") .url(url) .build(); post è¯·æ±‚éœ€è¦å£°æ˜MediaType 12345678910111213141516171819202122232425262728293031public String postUrl= \"https://reqres.in/api/users/\";public String postBody=\"&#123;\\n\" + \" \\\"name\\\": \\\"morpheus\\\",\\n\" + \" \\\"job\\\": \\\"leader\\\"\\n\" + \"&#125;\";public static final MediaType JSON = MediaType.parse(\"application/json; charset=utf-8\");void postRequest(String postUrl,String postBody) throws IOException &#123; OkHttpClient client = new OkHttpClient(); RequestBody body = RequestBody.create(JSON, postBody); Request request = new Request.Builder() .url(postUrl) .post(body) .build(); client.newCall(request).enqueue(new Callback() &#123; @Override public void onFailure(Call call, IOException e) &#123; call.cancel(); &#125; @Override public void onResponse(Call call, Response response) throws IOException &#123; Log.d(\"TAG\",response.body().string()); &#125; &#125;);&#125; è®¾è®¡æ€è·¯æˆ‘è®¤ä¸º OkHttp çš„æ ¸å¿ƒæ˜¯ä»¥åˆ†å±‚çš„æ€æƒ³é“¾å¼å¤„ç†ç½‘ç»œè¯·æ±‚ã€‚æ‰€æœ‰å¤„ç†çš„ä»£ç éƒ½ä½äºXXXInterceptorä¸­ï¼Œä¸€å…±æœ‰6ä¸ªè¿™æ ·çš„ Interceptorï¼Œæ¥å£å¦‚ä¸‹ 123public interface Interceptor &#123; Response intercept(Chain chain) throws IOException; // å¤„ç†å½“å‰å±‚çš„è¯·æ±‚&#125; ä¸‹å›¾æ¥æºäº Piasy çš„åšå®¢ï¼Œå¾ˆå¥½åœ°æè¿°äº† OkHttp å‘é€ç½‘ç»œè¯·æ±‚åˆ°å¤„ç†å®Œæˆçš„è¿‡ç¨‹ã€‚ flow å…³é”®ç±»è®²è§£ RetryAndFollowUpInterceptorï¼Œå¤„ç†è¯·æ±‚å¤±è´¥é‡è¯•ä»¥åŠé‡å®šå‘ï¼ˆ30Xï¼‰ BridgeInterceptorï¼Œå¯¹ Request å’Œ Response è¿›è¡Œå°è£…ï¼Œä¸»è¦æ˜¯å†™ Headerï¼ŒGzip è§£å‹ç¼©ç­‰æ“ä½œ CacheInterceptorï¼Œç¼“å­˜ï¼Œå¾ˆæ£’çš„ç£ç›˜ç¼“å­˜è®¾è®¡ï¼Œç»´æŠ¤ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶æ¥è¿›è¡Œç¼“å­˜çš„æ¢å¤é‡å»º ConnectInterceptorï¼Œç®¡ç†ä¸ç›®æ ‡çš„è¿æ¥ï¼Œé‡‡ç”¨ç­–ç•¥æ¨¡å¼ï¼Œæœ‰ HTTP(HTTP/1.1) å’Œ HTTP/2 ä¸¤ç§ç­–ç•¥ï¼Œå…³é”®ç±»StreamAllocation CallServerInterceptorï¼Œæ•°æ®äº¤æ¢ï¼Œå°†æ•°æ®ä¼ é€ç»™æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‹‰å–æ•°æ®ã€‚å†™è¯·æ±‚å¤´ -&gt; å†™è¯·æ±‚ä½“ -&gt; è·å–å“åº”å¤´ -&gt; è·å–å“åº”ä½“ è®¾è®¡æ¨¡å¼æ„å»ºå™¨æ¨¡å¼æ„å»ºå™¨æ¨¡å¼å¯ä»¥å‡å°‘å†—é•¿çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è®¾ç½®å‚æ•°æ—¶è¿›è¡Œæ£€æŸ¥ã€‚OKHttpClient.javaã€Request.java è¿™äº›ç±»é‡Œé¢éƒ½ç”¨åˆ°äº† Builder æ¨¡å¼ï¼Œç®€å•å†™ä¸€ä¸ªæ¨¡ç‰ˆ 12345678910111213141516171819202122232425public final class Foo &#123; final A a; private Foo(Builder builder) &#123; this.a = builder.a; &#125; public static class Builder &#123; private A a; public Builder() &#123; this.a = \"a\"; &#125; public Builder a(A a) &#123; this.a = a; return this; &#125; public Foo build() &#123; return new Foo(this); &#125; &#125;&#125; ç­–ç•¥æ¨¡å¼ç­–ç•¥æ¨¡å¼ä½“ç°é¢å‘æ¥å£ç¼–ç¨‹çš„æ¦‚å¿µï¼Œå°†å…·ä½“å®ç°ä¸æ¥å£å‰¥ç¦»ï¼Œå‡å°‘è€¦åˆæ€§ã€‚ContentInterceptor é‡Œé¢çš„ HttpCodec æ¥å£å°±æ˜¯è¿™æ ·çš„ï¼Œæœ‰ HTTP/1 å’Œ HTTP/2 ä¸¤ç§å®ç°ã€‚ è´£ä»»é“¾æ¨¡å¼ï¼ˆchain of responbilityï¼‰è´£ä»»é“¾æ¨¡å¼åŒ…å«äº†ä¸€ç³»åˆ—å¯¹è±¡ï¼Œä»¥åŠä¸€ç³»åˆ—å¤„ç†æŒ‡ä»¤ã€‚è¿™äº›å¯¹è±¡å…±åŒæ„æˆäº†ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸€ç¯éƒ½æœ‰ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œé“¾è¡¨ä¸­çš„å¯¹è±¡ç»è¿‡é€çº§é€’å½’å¤„ç†åï¼Œç”Ÿæˆæœ€ç»ˆç»“æœã€‚å¯ä»¥å‘å¤„ç†é“¾çš„æœ«å°¾æ·»åŠ æ–°çš„å¤„ç†æŒ‡ä»¤ã€‚Interceptor.Chain æ‰€é‡‡ç”¨çš„æ¨¡å¼ï¼Œæ¯ä¸€å±‚éƒ½å¤„ç†å„è‡ªçš„èŒè´£ï¼ŒæŒ‰ç…§é“¾å¼é€’å½’è°ƒç”¨ã€‚ å°ç»“OkHttp çš„ä»£ç å¤æ‚ç¨‹åº¦è®©äººå¤´å¤§ï¼Œæˆ‘ä¸æ•¢è¯´è‡ªå·±å·²ç»æ‘¸æ¸…äº†è¿™ä¸ªæ¡†æ¶ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹å€¼å¾—æ·±å…¥æŒ–æ˜ï¼Œæ¯”å¦‚åŸºäºæ—¥å¿— Cache çš„å®ç°ç»†èŠ‚ï¼Œè´£ä»»é“¾æ¨¡å¼çš„è®¾è®¡ã€‚ä¸‹ä¸€è¯¾é¢˜ï¼šRetrofitã€‚å­¦ä¹ è¿‡ç¨‹ä¸­å‚è€ƒäº†ç®€ä¹¦ä¸Šâ€œè¢«ä»£ç æ·¹æ²¡çš„å°ä¼™å­â€okhttpæºç åˆ†æç³»åˆ—æ–‡ç« ï¼Œæ„Ÿè°¢åŸä½œè€…ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"æºç å­¦ä¹ ","slug":"æºç å­¦ä¹ ","permalink":"https://lilei.pro/tags/æºç å­¦ä¹ /"}]},{"title":"Picasso æºç å­¦ä¹ ","date":"2018-07-03T09:19:20.000Z","path":"2018/07/03/picasso/","text":"Picasso æ˜¯ç”± Square å‘å¸ƒçš„å›¾ç‰‡åŠ è½½æ¡†æ¶ï¼Œä¼˜é›…åœ°å®ç°äº† Android ç³»ç»Ÿä¸­å›¾ç‰‡åŠ è½½çš„åŠŸèƒ½ã€‚å…¶ä¸­è¯·æ±‚åˆ†ç±»ã€ä»»åŠ¡è°ƒåº¦ã€å¤šçº§ç¼“å­˜ç­‰æ€æƒ³å¾ˆæœ‰å€Ÿé‰´æ„ä¹‰ï¼Œæœ¬æ–‡å°†ä»æºç è§’åº¦é˜è¿° Picasso çš„å·¥ä½œåŸç†ã€‚ Ask Yourselfï¼šå®ç°ä¸€ä¸ªå›¾ç‰‡åŠ è½½æ¡†æ¶å›¾ç‰‡çš„åŠ è½½æµç¨‹æ˜¯è·å– - å˜æ¢ - æ˜¾ç¤ºï¼Œæ¥æºå¯èƒ½æ˜¯ç½‘ç»œã€èµ„æºæ–‡ä»¶ã€æœ¬åœ°æ–‡ä»¶ï¼Œå…¶ä¸­è¿˜è¦åŠ ä¸Šç¼“å­˜ï¼Œç»¼ä¸Šï¼Œå¯ä»¥æ•´ç†å‡ºè¿™æ ·çš„æµç¨‹å›¾ã€‚ æµç¨‹å›¾ ç»“åˆä¸Šå›¾ï¼Œæ•´ç†å‡ºä¸»è¦èŒè´£ç±»ï¼š è¯·æ±‚åŒ…è£…ç±»ï¼ŒåŒ…å«è¯·æ±‚åœ°å€ã€ç¼“å­˜ç­–ç•¥ ç¼“å­˜ç±»ï¼Œå†…å­˜+ç£ç›˜ï¼Œä¸¤çº§ç¼“å­˜ç®¡ç† è¯·æ±‚å¤„ç†ç±»ï¼Œå®ç°ç›¸åŒçš„æ¥å£ï¼Œæœ‰ç½‘ç»œã€æœ¬åœ°ã€èµ„æºä¸‰ç§å®ç° ä¸‹è½½å™¨ç±»ï¼Œå…¼æœ‰æš‚åœã€æ¢å¤ã€å–æ¶ˆåŠŸèƒ½ å›¾ç‰‡å˜æ¢ç±»ï¼Œè·å–å®Œå›¾ç‰‡åè¿›è¡Œè£å‰ªã€ç¼©æ”¾ã€æ—‹è½¬ã€åœ†è§’ç­‰å˜æ¢ è°ƒåº¦å™¨ç±»ï¼Œç®¡ç†çº¿ç¨‹ æœ‰äº†è‡ªå·±çš„ç†è§£ä¹‹åï¼Œå†ç»“åˆ Picasso çš„ä»£ç è¿›è¡Œå­¦ä¹ ã€‚ è¯·æ±‚ä¿¡æ¯ç±» Request/RequestCreatoré¦–å…ˆæ˜¯ Request.javaï¼Œè¿™ä¸ªç±»åŒ…å«äº†å¾…æ˜¾ç¤ºå›¾ç‰‡çš„åœ°å€ã€å°ºå¯¸ã€ç¼©æ”¾ã€æ—‹è½¬ã€è£å‰ªä¿¡æ¯ï¼Œé‡‡ç”¨ Builder æ¨¡å¼ï¼Œå±æ€§å¦‚ä¸‹ 1234567891011121314151617public static final class Builder &#123; private Uri uri; private int resourceId; private String stableKey; private int targetWidth; private int targetHeight; private boolean centerCrop; private boolean centerInside; private boolean onlyScaleDown; private float rotationDegrees; private float rotationPivotX; private float rotationPivotY; private boolean hasRotationPivot; private List&lt;Transformation&gt; transformations; private Bitmap.Config config; private Priority priority;&#125; ç„¶åæ‰æ˜¯è¯·æ±‚åŒ…è£…ç±» RequestCreator.javaï¼Œåœ¨ Request.java åŸºç¡€ä¸Šï¼Œè¿™ä¸ªç±»å¢åŠ äº†æ˜¾ç¤ºæ•ˆæœçš„å±æ€§ï¼Œæ¯”å¦‚æ·¡å…¥ã€åŠ è½½ä¸­çš„å ä½å›¾ç‰‡ã€é”™è¯¯å›¾ç‰‡ã€tag ä»¥åŠç¼“å­˜ç­–ç•¥ 1234567891011121314151617public class RequestCreator &#123; private static final AtomicInteger nextId = new AtomicInteger(); private final Picasso picasso; private final Request.Builder data; private boolean noFade; private boolean deferred; private boolean setPlaceholder = true; private int placeholderResId; private int errorResId; private int memoryPolicy; private int networkPolicy; private Drawable placeholderDrawable; private Drawable errorDrawable; private Object tag;&#125; å¦å¤–ï¼ŒPicasso.with(context).load(&quot;fake_url&quot;).into(someImageView) ä¸­çš„intoæ–¹æ³•ä¹Ÿæ˜¯ç”± RequestCreator.java ç±»å®ç°çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960public void into(ImageView target, Callback callback) &#123; long started = System.nanoTime(); checkMain(); // å› ä¸ºè¦æ˜¾ç¤ºåœ¨ ImageView ä¸Šï¼Œæ‰€ä»¥å¿…é¡»åœ¨ä¸»çº¿ç¨‹è°ƒç”¨ if (target == null) &#123; throw new IllegalArgumentException(\"Target must not be null.\"); &#125; if (!data.hasImage()) &#123; // å–å›¾å¤±è´¥ picasso.cancelRequest(target); if (setPlaceholder) &#123; setPlaceholder(target, getPlaceholderDrawable()); &#125; return; &#125; if (deferred) &#123; // é‡‡ç”¨ fit è°ƒæ•´å›¾ç‰‡å¤§å°ä»¥é€‚åº” ImageViewï¼Œå»¶æ—¶æ“ä½œ if (data.hasSize()) &#123; // fit åè‡ªç„¶ä¸èƒ½äººå·¥è®¾ç½®é•¿å®½ throw new IllegalStateException(\"Fit cannot be used with resize.\"); &#125; int width = target.getWidth(); int height = target.getHeight(); if (width == 0 || height == 0) &#123; if (setPlaceholder) &#123; setPlaceholder(target, getPlaceholderDrawable()); &#125; picasso.defer(target, new DeferredRequestCreator(this, target, callback)); return; &#125; data.resize(width, height); &#125; Request request = createRequest(started); String requestKey = createKey(request); // cache çš„ key if (shouldReadFromMemoryCache(memoryPolicy)) &#123; // æ£€éªŒå†…å­˜ç¼“å­˜ Bitmap bitmap = picasso.quickMemoryCacheCheck(requestKey); if (bitmap != null) &#123; picasso.cancelRequest(target); setBitmap(target, picasso.context, bitmap, MEMORY, noFade, picasso.indicatorsEnabled); if (picasso.loggingEnabled) &#123; log(OWNER_MAIN, VERB_COMPLETED, request.plainId(), \"from \" + MEMORY); &#125; if (callback != null) &#123; callback.onSuccess(); &#125; return; &#125; &#125; // å†…å­˜ç¼“å­˜æœªå‘½ä¸­ï¼Œå…ˆæ˜¾ç¤ºå ä½ç¬¦ï¼Œç„¶åå»ç½‘ç»œè·å– if (setPlaceholder) &#123; setPlaceholder(target, getPlaceholderDrawable()); &#125; Action action = new ImageViewAction(picasso, target, request, memoryPolicy, networkPolicy, errorResId, errorDrawable, requestKey, tag, callback, noFade); picasso.enqueueAndSubmit(action);&#125; ä»£ç ä¸­æœ‰ä¸€ä¸ªdeferredçš„åˆ¤æ–­ï¼Œå¦‚æœä¸ºtrueåˆ™ä¼šåˆ›å»ºä¸€ä¸ªDeferredRequestCreatorï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„å®ç°ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253class DeferredRequestCreator implements ViewTreeObserver.OnPreDrawListener &#123; final RequestCreator creator; final WeakReference&lt;ImageView&gt; target; Callback callback; @TestOnly DeferredRequestCreator(RequestCreator creator, ImageView target) &#123; this(creator, target, null); &#125; DeferredRequestCreator(RequestCreator creator, ImageView target, Callback callback) &#123; this.creator = creator; this.target = new WeakReference&lt;ImageView&gt;(target); this.callback = callback; target.getViewTreeObserver().addOnPreDrawListener(this); &#125; @Override public boolean onPreDraw() &#123; // è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œä»¥ä¾¿å½“ViewTreeè®¡ç®—å®Œæˆå‡†å¤‡ç»˜åˆ¶æ—¶ï¼Œæ‹¿åˆ°ImageViewçš„é•¿å®½ ImageView target = this.target.get(); if (target == null) &#123; return true; &#125; ViewTreeObserver vto = target.getViewTreeObserver(); if (!vto.isAlive()) &#123; return true; &#125; int width = target.getWidth(); int height = target.getHeight(); if (width &lt;= 0 || height &lt;= 0) &#123; return true; &#125; vto.removeOnPreDrawListener(this); this.creator.unfit().resize(width, height).into(target, callback); // å°†ImageViewé•¿å®½ä¼ ç»™RequestCreatorä»¥ä¾¿å¯¹å›¾ç‰‡è¿›è¡Œresize return true; &#125; void cancel() &#123; callback = null; ImageView target = this.target.get(); if (target == null) &#123; return; &#125; ViewTreeObserver vto = target.getViewTreeObserver(); if (!vto.isAlive()) &#123; return; &#125; vto.removeOnPreDrawListener(this); &#125;&#125; åªæœ‰å½“åœ¨æ˜¾ç¤ºå›¾ç‰‡çš„åœ°æ–¹è°ƒç”¨fit()æ—¶æ‰ä¼šåˆ›å»ºDeferredRequestCreatorå¯¹è±¡ã€‚ RequestCreatoré‡Œé¢æœ‰ä¸¤ä¸ªå­—æ–­åˆ†åˆ«å¯¹åº”ç€å†…å­˜è®¾ç½®ä¸ç½‘ç»œè®¾ç½®ï¼Œæ˜¯ç¼“å­˜ç­–ç•¥ï¼Œå¯¹åº”çš„æšä¸¾ç±»å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤è€…éƒ½æœ‰NO_CACHE NO_STOREï¼Œç½‘ç»œç­–ç•¥æšä¸¾é‡Œå¤šäº†ä¸€ä¸ªOFFLINEã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758public enum MemoryPolicy &#123; /** Skips memory cache lookup when processing a request. */ NO_CACHE(1 &lt;&lt; 0), /** * Skips storing the final result into memory cache. Useful for one-off requests * to avoid evicting other bitmaps from the cache. */ NO_STORE(1 &lt;&lt; 1); static boolean shouldReadFromMemoryCache(int memoryPolicy) &#123; return (memoryPolicy &amp; MemoryPolicy.NO_CACHE.index) == 0; &#125; static boolean shouldWriteToMemoryCache(int memoryPolicy) &#123; return (memoryPolicy &amp; MemoryPolicy.NO_STORE.index) == 0; &#125; final int index; private MemoryPolicy(int index) &#123; this.index = index; &#125;&#125;public enum NetworkPolicy &#123; /** Skips checking the disk cache and forces loading through the network. */ NO_CACHE(1 &lt;&lt; 0), /** * Skips storing the result into the disk cache. * &lt;p&gt; * &lt;em&gt;Note&lt;/em&gt;: At this time this is only supported if you are using OkHttp. */ NO_STORE(1 &lt;&lt; 1), /** Forces the request through the disk cache only, skipping network. */ OFFLINE(1 &lt;&lt; 2); public static boolean shouldReadFromDiskCache(int networkPolicy) &#123; return (networkPolicy &amp; NetworkPolicy.NO_CACHE.index) == 0; &#125; public static boolean shouldWriteToDiskCache(int networkPolicy) &#123; return (networkPolicy &amp; NetworkPolicy.NO_STORE.index) == 0; &#125; public static boolean isOfflineOnly(int networkPolicy) &#123; return (networkPolicy &amp; NetworkPolicy.OFFLINE.index) != 0; &#125; final int index; private NetworkPolicy(int index) &#123; this.index = index; &#125;&#125; ç¼“å­˜ç®¡ç† LruCachePicasso.javaé‡Œç»´æŠ¤äº†ä¸€ä¸ªæˆå‘˜å˜é‡cacheï¼Œå¯¹åº”æ¥å£æ˜¯Cache.javaï¼Œï¼ˆåªè´´å‡ºä¸»è¦ä»£ç ï¼‰ 1234567891011121314151617181920212223/** * A memory cache for storing the most recently used images. * &lt;p&gt; * &lt;em&gt;Note:&lt;/em&gt; The &#123;@link Cache&#125; is accessed by multiple threads. You must ensure * your &#123;@link Cache&#125; implementation is thread safe when &#123;@link Cache#get(String)&#125; or &#123;@link * Cache#set(String, android.graphics.Bitmap)&#125; is called. */public interface Cache &#123; /** Retrieve an image for the specified &#123;@code key&#125; or &#123;@code null&#125;. */ Bitmap get(String key); /** Store an image in the cache for the specified &#123;@code key&#125;. */ void set(String key, Bitmap bitmap); /** Returns the current size of the cache in bytes. */ int size(); /** Returns the maximum size in bytes that the cache can hold. */ int maxSize(); /** Clears the cache. */ void clear();&#125; å¾ˆç®€å•çš„å‡ ä¸ªæ¥å£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨å®ç°è¿‡ç¨‹ä¸­è¦ä¿è¯get/setçš„çº¿ç¨‹å®‰å…¨ã€‚å¯¹åº”çš„å®ç°ç±»æ˜¯LruCache.javaï¼Œè¿™æ˜¯LruCacheä¸€ä¸ªå¾ˆæ¼‚äº®çš„å®ç°ï¼Œè¯¥æœ‰çš„åŠŸèƒ½éƒ½æœ‰ï¼Œä¸æ¯«ä¸æ‹–æ³¥å¸¦æ°´ï¼Œæˆ‘å¿ä¸ä½æŠŠæ•´ä¸ªç±»éƒ½è´´å‡ºæ¥ã€‚å•è¯evictionçš„ç¿»è¯‘æ˜¯é©±é€ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141/** A memory cache which uses a least-recently used eviction policy. */public class LruCache implements Cache &#123; final LinkedHashMap&lt;String, Bitmap&gt; map; // æœ‰åº map private final int maxSize; private int size; private int putCount; private int evictionCount; private int hitCount; // å‘½ä¸­è®¡æ•° private int missCount; // æœªå‘½ä¸­è®¡æ•° /** Create a cache using an appropriate portion of the available RAM as the maximum size. */ public LruCache(Context context) &#123; this(Utils.calculateMemoryCacheSize(context)); // Utils.java é‡Œç”¨äºè®¡ç®—å†…å­˜çš„å·¥å…·æ–¹æ³•ï¼Œè¿”å›çš„æ•°å€¼æ˜¯1/7ï¼ˆçº¦15%ï¼‰åº”ç”¨å¯ç”¨å†…å­˜ã€‚ &#125; /** Create a cache with a given maximum size in bytes. */ public LruCache(int maxSize) &#123; if (maxSize &lt;= 0) &#123; throw new IllegalArgumentException(\"Max size must be positive.\"); &#125; this.maxSize = maxSize; this.map = new LinkedHashMap&lt;String, Bitmap&gt;(0, 0.75f, true); // ç¬¬ä¸‰ä¸ªå‚æ•° true è¡¨ç¤º LinkedHashMap çš„æ’åºæ˜¯æŒ‰ç…§æœ€è¿‘ accessï¼Œfalseåˆ™ä¸ºæœ€è¿‘ insertion &#125; @Override public Bitmap get(String key) &#123; if (key == null) &#123; throw new NullPointerException(\"key == null\"); &#125; Bitmap mapValue; synchronized (this) &#123; // å‰é¢è¯´äº†ï¼Œget/setå¿…é¡»è¦åšåŒæ­¥æ§åˆ¶ mapValue = map.get(key); if (mapValue != null) &#123; hitCount++; return mapValue; &#125; missCount++; &#125; return null; &#125; @Override public void set(String key, Bitmap bitmap) &#123; if (key == null || bitmap == null) &#123; throw new NullPointerException(\"key == null || bitmap == null\"); &#125; Bitmap previous; synchronized (this) &#123; // ä¸€æ ·çš„åŒæ­¥ putCount++; size += Utils.getBitmapBytes(bitmap); previous = map.put(key, bitmap); if (previous != null) &#123; size -= Utils.getBitmapBytes(previous); &#125; &#125; trimToSize(maxSize); // è‹¥å°ºå¯¸è¶…è¿‡ maxSize åˆ™éœ€è¦æ¸…ç† &#125; private void trimToSize(int maxSize) &#123; while (true) &#123; String key; Bitmap value; synchronized (this) &#123; // å‡¡æ˜¯æ‰€æœ‰æ“ä½œ map çš„åœ°æ–¹éƒ½åŠ é” if (size &lt; 0 || (map.isEmpty() &amp;&amp; size != 0)) &#123; throw new IllegalStateException( getClass().getName() + \".sizeOf() is reporting inconsistent results!\"); &#125; if (size &lt;= maxSize || map.isEmpty()) &#123; break; &#125; Map.Entry&lt;String, Bitmap&gt; toEvict = map.entrySet().iterator().next(); key = toEvict.getKey(); value = toEvict.getValue(); map.remove(key); // æ¸…ç†å‡º mapï¼Œç”± GC è‡ªåŠ¨å›æ”¶ size -= Utils.getBitmapBytes(value); evictionCount++; &#125; &#125; &#125; /** Clear the cache. */ public final void evictAll() &#123; trimToSize(-1); // -1 will evict 0-sized elements &#125; @Override public final synchronized int size() &#123; return size; &#125; @Override public final synchronized int maxSize() &#123; return maxSize; &#125; @Override public final synchronized void clear() &#123; evictAll(); &#125; @Override public final synchronized void clearKeyUri(String uri) &#123; // æ¸…é™¤æŸä¸ª URI å¯¹åº”çš„å…¨éƒ¨å›¾ç‰‡ï¼ŒåŒæ ·å†…å®¹çš„å›¾ç‰‡å› ä¸ºå°ºå¯¸ç¼©æ”¾æ—‹è½¬ä¸åŒï¼Œä¼šåœ¨ cache é‡Œå­˜åœ¨å¤šä¸ªå®ä¾‹ boolean sizeChanged = false; int uriLength = uri.length(); for (Iterator&lt;Map.Entry&lt;String, Bitmap&gt;&gt; i = map.entrySet().iterator(); i.hasNext();) &#123; Map.Entry&lt;String, Bitmap&gt; entry = i.next(); String key = entry.getKey(); Bitmap value = entry.getValue(); int newlineIndex = key.indexOf(KEY_SEPARATOR); if (newlineIndex == uriLength &amp;&amp; key.substring(0, newlineIndex).equals(uri)) &#123; i.remove(); size -= Utils.getBitmapBytes(value); sizeChanged = true; &#125; &#125; if (sizeChanged) &#123; trimToSize(maxSize); &#125; &#125; /** Returns the number of times &#123;@link #get&#125; returned a value. */ public final synchronized int hitCount() &#123; return hitCount; &#125; /** Returns the number of times &#123;@link #get&#125; returned &#123;@code null&#125;. */ public final synchronized int missCount() &#123; return missCount; &#125; /** Returns the number of times &#123;@link #set(String, Bitmap)&#125; was called. */ public final synchronized int putCount() &#123; return putCount; &#125; /** Returns the number of values that have been evicted. */ public final synchronized int evictionCount() &#123; return evictionCount; &#125;&#125; çŸ¥é“äº† cache çš„ç”¨æ³•ï¼Œå°±å¯ä»¥å¾ˆå¥½åœ°åœ¨Picasso.javaé‡Œé¢æ£€æŸ¥ cache äº†ï¼Œç”¨èµ·æ¥ååˆ†ç®€å•ã€‚ 123456789Bitmap quickMemoryCacheCheck(String key) &#123; Bitmap cached = cache.get(key); if (cached != null) &#123; stats.dispatchCacheHit(); &#125; else &#123; stats.dispatchCacheMiss(); &#125; return cached;&#125; è¯·æ±‚å¤„ç†å™¨ RequestHandleråœ¨ Picasso.java çš„æ„é€ å‡½æ•°é‡Œï¼Œæœ‰è¿™æ ·ä¸€æ®µåˆå§‹åŒ–ä»£ç  123456789101112131415Picasso(Context context, Dispatcher dispatcher, Cache cache, Listener listener, RequestTransformer requestTransformer, List&lt;RequestHandler&gt; extraRequestHandlers, Stats stats, Bitmap.Config defaultBitmapConfig, boolean indicatorsEnabled, boolean loggingEnabled) &#123; allRequestHandlers.add(new ResourceRequestHandler(context)); if (extraRequestHandlers != null) &#123; allRequestHandlers.addAll(extraRequestHandlers); &#125; allRequestHandlers.add(new ContactsPhotoRequestHandler(context)); allRequestHandlers.add(new MediaStoreRequestHandler(context)); allRequestHandlers.add(new ContentStreamRequestHandler(context)); allRequestHandlers.add(new AssetRequestHandler(context)); allRequestHandlers.add(new FileRequestHandler(context)); allRequestHandlers.add(new NetworkRequestHandler(dispatcher.downloader, stats)); requestHandlers = Collections.unmodifiableList(allRequestHandlers);&#125; å¯ä»¥çœ‹å‡ºè¿™æ˜¯å®ç°äº†å¤šç§è¯·æ±‚å¤„ç†ç±»ï¼Œæ‰€æœ‰çš„XXXRequetHandlerç±»éƒ½ç»§æ‰¿è‡ªæŠ½è±¡ç±»RequestHandler.javaï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯canHandleRequestå’Œloadè¿™ä¸¤ä¸ªæ–¹æ³•ã€‚æºç æ³¨é‡Šé‡Œç»™å‡ºäº†ç®€æ´çš„è¯´æ˜ï¼Œä¸å†èµ˜è¿°ã€‚ 1234567891011121314public abstract class RequestHandler &#123; /** * Whether or not this &#123;@link RequestHandler&#125; can handle a request with the given &#123;@link Request&#125;. */ public abstract boolean canHandleRequest(Request data); /** * Loads an image for the given &#123;@link Request&#125;. * * @param request the data from which the image should be resolved. * @param networkPolicy the &#123;@link NetworkPolicy&#125; for this request. */ public abstract Result load(Request request, int networkPolicy) throws IOException;&#125; æˆ‘ä»¬çœ‹ä¸€ä¸‹NetworkRequestHandlerç±»çš„å®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748class NetworkRequestHandler extends RequestHandler &#123; static final int RETRY_COUNT = 2; private static final String SCHEME_HTTP = \"http\"; // è¿™ä¸¤ä¸ªå¸¸é‡ç”¨äºåˆ¤æ–­ url private static final String SCHEME_HTTPS = \"https\"; private final Downloader downloader; // ä¸‹è½½å™¨ï¼Œæœ‰ OkHttp å’Œ URLConnectionDownloader ä¸¤ç§å®ç°ï¼Œç¨åè®²è§£ private final Stats stats; public NetworkRequestHandler(Downloader downloader, Stats stats) &#123; this.downloader = downloader; this.stats = stats; &#125; @Override public boolean canHandleRequest(Request data) &#123; String scheme = data.uri.getScheme(); // ä» scheme åˆ¤æ–­æ˜¯å¦ä¸ºç½‘ç»œå›¾ç‰‡è¯·æ±‚ return (SCHEME_HTTP.equals(scheme) || SCHEME_HTTPS.equals(scheme)); &#125; @Override public Result load(Request request, int networkPolicy) throws IOException &#123; Response response = downloader.load(request.uri, request.networkPolicy); // åŒæ­¥ä¸‹è½½ if (response == null) &#123; return null; &#125; Picasso.LoadedFrom loadedFrom = response.cached ? DISK : NETWORK; Bitmap bitmap = response.getBitmap(); if (bitmap != null) &#123; // ç›´æ¥æ‹¿åˆ° Bitmapï¼Œåˆ™è¿”å› return new Result(bitmap, loadedFrom); &#125; InputStream is = response.getInputStream(); // æ‹¿åˆ°è¾“å…¥æµï¼Œéœ€è¦è§£ææˆ Bitmap if (is == null) &#123; return null; &#125; // Sometimes response content length is zero when requests are being replayed. Haven't found // root cause to this but retrying the request seems safe to do so. if (loadedFrom == DISK &amp;&amp; response.getContentLength() == 0) &#123; Utils.closeQuietly(is); throw new ContentLengthException(\"Received response with 0 content-length header.\"); &#125; if (loadedFrom == NETWORK &amp;&amp; response.getContentLength() &gt; 0) &#123; stats.dispatchDownloadFinished(response.getContentLength()); &#125; return new Result(is, loadedFrom); &#125;&#125; å¯ä»¥çœ‹åˆ°å®ƒæ˜¯å°†ä¸‹è½½ä»»åŠ¡å§”æ‰˜ç»™äº†Downloaderè¿›è¡Œï¼ŒDownloaderçš„æ³¨é‡Šé‡Œæè¿°çš„å¾ˆæ¸…æ¥šï¼Œå®ƒæ˜¯â€œA mechanism to load images from external resources such as a disk cache and/or the internet.â€ï¼Œç”¨äºåŠ è½½å¤–éƒ¨å›¾ç‰‡ï¼ˆç›¸æ¯”äºå†…å­˜ç¼“å­˜è€Œè¨€ï¼‰ã€‚æœ€ä¸»è¦çš„æ˜¯loadæ–¹æ³• 1Response load(Uri uri, int networkPolicy) throws IOException; å…¶ä¸­Responseçš„ç»“æ„æ˜¯ 123456class Response &#123; final InputStream stream; final Bitmap bitmap; final boolean cached; // å›¾ç‰‡æ˜¯å¦æ¥æºè‡ªç£ç›˜ç¼“å­˜ï¼ˆlocal disk cacheï¼‰ final long contentLength;&#125; Downloaderæœ‰ä¸¤ä¸ªå®ç° OKHttpDownloaderï¼Œå¯¹åº” Android ç‰ˆæœ¬ &gt;= 4.4 URLConnectionDownloaderï¼Œå¯¹åº” Android ç‰ˆæœ¬ &lt; 4.4 åˆ¤æ–­ä»£ç ä½äºUtils.java 12345678static Downloader createDefaultDownloader(Context context) &#123; try &#123; Class.forName(\"com.squareup.okhttp.OkHttpClient\"); return OkHttpLoaderCreator.create(context); &#125; catch (ClassNotFoundException ignored) &#123; &#125; return new UrlConnectionDownloader(context);&#125; OKHttpDownloaderé‡Œé¢çš„loadæ–¹æ³•ï¼Œé‡‡ç”¨ square è‡ªå®¶çš„OKHttpè¿›è¡Œä¸‹è½½ï¼Œåœ¨æ„å»ºå…¶ Builder æ—¶å†³å®šæ˜¯å¦ä½¿ç”¨ç£ç›˜ç¼“å­˜ã€‚æ¢è¨€ä¹‹ï¼Œè™½ç„¶Picassoå£°ç§°æœ‰å†…å­˜+ç£ç›˜ä¸¤çº§ç¼“å­˜ï¼Œå…¶ç£ç›˜ç¼“å­˜å…¶å®æ˜¯å€ŸåŠ©OKHttpå®ç°çš„ã€‚ 1234567891011121314151617181920212223242526272829303132333435@Override public Response load(Uri uri, int networkPolicy) throws IOException &#123; CacheControl cacheControl = null; // è¿™ä¸ª CacheControl æ˜¯ OKHttp é‡Œé¢çš„ç±» if (networkPolicy != 0) &#123; if (NetworkPolicy.isOfflineOnly(networkPolicy)) &#123; cacheControl = CacheControl.FORCE_CACHE; &#125; else &#123; CacheControl.Builder builder = new CacheControl.Builder(); if (!NetworkPolicy.shouldReadFromDiskCache(networkPolicy)) &#123; builder.noCache(); &#125; if (!NetworkPolicy.shouldWriteToDiskCache(networkPolicy)) &#123; builder.noStore(); &#125; cacheControl = builder.build(); &#125; &#125; Request.Builder builder = new Request.Builder().url(uri.toString()); if (cacheControl != null) &#123; builder.cacheControl(cacheControl); &#125; com.squareup.okhttp.Response response = client.newCall(builder.build()).execute(); // åŒæ­¥æ¥å£ int responseCode = response.code(); if (responseCode &gt;= 300) &#123; response.body().close(); throw new ResponseException(responseCode + \" \" + response.message(), networkPolicy, responseCode); &#125; boolean fromCache = response.cacheResponse() != null; ResponseBody responseBody = response.body(); return new Response(responseBody.byteStream(), fromCache, responseBody.contentLength());&#125; è‡³æ­¤RequestHandlerçš„åˆ†æå·²ç»å®Œæˆï¼Œè™½ç„¶å®ƒåä¸º Handlerï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰åŒ…å«å·¥ä½œçº¿ç¨‹ä¸€ç±»çš„ä¸œè¥¿ï¼Œè¿™éƒ¨åˆ†ç›¸å…³ä»£ç å®é™…ä¸Šä½äºDispatcher.javaä¸­ã€‚ ä»»åŠ¡è°ƒåº¦å™¨ Dispatcherç†è§£Dispatcherä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ä»»åŠ¡ç±»Action.java 123456789101112131415161718192021222324252627abstract class Action&lt;T&gt; &#123; static class RequestWeakReference&lt;M&gt; extends WeakReference&lt;M&gt; &#123; final Action action; public RequestWeakReference(Action action, M referent, ReferenceQueue&lt;? super M&gt; q) &#123; super(referent, q); this.action = action; &#125; &#125; final Picasso picasso; final Request request; final WeakReference&lt;T&gt; target; final boolean noFade; final int memoryPolicy; final int networkPolicy; final int errorResId; final Drawable errorDrawable; final String key; final Object tag; boolean willReplay; boolean cancelled; abstract void complete(Bitmap result, Picasso.LoadedFrom from); abstract void error(); Actionå¯ä»¥ç†è§£æˆä¸€é¡¹å›¾ç‰‡åŠ è½½ä»»åŠ¡ï¼Œå®ƒç»„åˆäº†ä¹‹å‰ä»‹ç»çš„Requestå’ŒRequestCreatorçš„å†…å®¹ï¼Œä¸”åŒ…å«åŠ è½½æˆåŠŸ/å¤±è´¥çš„å›è°ƒã€‚ æ‰€æœ‰çš„Actionä»»åŠ¡éƒ½ä¼šè¢«ä¸¢ç»™Dispatcheræ‰§è¡Œ 12345678910111213141516171819202122232425262728293031323334353637383940class Dispatcher &#123; private static final int RETRY_DELAY = 500; private static final int AIRPLANE_MODE_ON = 1; // é£è¡Œæ¨¡å¼ï¼Œä¼šå½±å“å¹¶å‘çº¿ç¨‹æ•° private static final int AIRPLANE_MODE_OFF = 0; static final int REQUEST_SUBMIT = 1; // æ¶ˆæ¯ç±»å‹ï¼Œä¾› handler ä½¿ç”¨ static final int REQUEST_CANCEL = 2; static final int REQUEST_GCED = 3; static final int HUNTER_COMPLETE = 4; static final int HUNTER_RETRY = 5; static final int HUNTER_DECODE_FAILED = 6; static final int HUNTER_DELAY_NEXT_BATCH = 7; static final int HUNTER_BATCH_COMPLETE = 8; static final int NETWORK_STATE_CHANGE = 9; static final int AIRPLANE_MODE_CHANGE = 10; static final int TAG_PAUSE = 11; static final int TAG_RESUME = 12; static final int REQUEST_BATCH_RESUME = 13; private static final String DISPATCHER_THREAD_NAME = \"Dispatcher\"; private static final int BATCH_DELAY = 200; // ms final DispatcherThread dispatcherThread; // è°ƒåº¦å™¨çº¿ç¨‹ final Context context; final ExecutorService service; // çº¿ç¨‹æ±  final Downloader downloader; // ä¸‹è½½å™¨ final Map&lt;String, BitmapHunter&gt; hunterMap; // çº¿ç¨‹ map final Map&lt;Object, Action&gt; failedActions; final Map&lt;Object, Action&gt; pausedActions; final Set&lt;Object&gt; pausedTags; final Handler handler; // DispatchHandler final Handler mainThreadHandler; // UI å˜æ›´ final Cache cache; final Stats stats; // ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…å«å‘½ä¸­ç¼“å­˜ã€æœªå‘½ä¸­ç¼“å­˜ã€è§£ç ã€ä¸‹è½½è®¡æ•° final List&lt;BitmapHunter&gt; batch; final NetworkBroadcastReceiver receiver; // ç›‘å¬ç½‘ç»œå˜åŒ–ï¼Œè°ƒæ•´å¹¶å‘çº¿ç¨‹æ•° final boolean scansNetworkChanges; boolean airplaneMode;&#125; æ—¢ç„¶åä¸ºDispatcherï¼Œè‚¯å®šå°‘ä¸äº†dispatchXXXçš„æ–¹æ³•ï¼Œå®ƒä»¬çš„å¤„ç†æ–¹æ³•å®Œå…¨ä¸€æ ·ï¼Œéƒ½æ˜¯æŠŠæ¶ˆæ¯ä¸¢ç»™DispatchHandler 123456789101112131415void dispatchSubmit(Action action) &#123; handler.sendMessage(handler.obtainMessage(REQUEST_SUBMIT, action));&#125;void dispatchCancel(Action action) &#123; handler.sendMessage(handler.obtainMessage(REQUEST_CANCEL, action));&#125;void dispatchPauseTag(Object tag) &#123; handler.sendMessage(handler.obtainMessage(TAG_PAUSE, tag));&#125;// ä»¥ä¸‹è¿˜æœ‰ dispatchResumeTagã€dispatchCompleteã€dispatchRetryï¼Œç•¥...&#125; DispatchHandleræ˜¯ç”¨äºæ¥æ”¶å¤„ç†è¿™äº›æ¶ˆæ¯çš„ç±» 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667private static class DispatcherHandler extends Handler &#123; private final Dispatcher dispatcher; public DispatcherHandler(Looper looper, Dispatcher dispatcher) &#123; super(looper); this.dispatcher = dispatcher; &#125; @Override public void handleMessage(final Message msg) &#123; switch (msg.what) &#123; case REQUEST_SUBMIT: &#123; Action action = (Action) msg.obj; dispatcher.performSubmit(action); break; &#125; case REQUEST_CANCEL: &#123; Action action = (Action) msg.obj; dispatcher.performCancel(action); break; &#125; case TAG_PAUSE: &#123; Object tag = msg.obj; dispatcher.performPauseTag(tag); break; &#125; case TAG_RESUME: &#123; Object tag = msg.obj; dispatcher.performResumeTag(tag); break; &#125; case HUNTER_COMPLETE: &#123; BitmapHunter hunter = (BitmapHunter) msg.obj; dispatcher.performComplete(hunter); break; &#125; case HUNTER_RETRY: &#123; BitmapHunter hunter = (BitmapHunter) msg.obj; dispatcher.performRetry(hunter); break; &#125; case HUNTER_DECODE_FAILED: &#123; BitmapHunter hunter = (BitmapHunter) msg.obj; dispatcher.performError(hunter, false); break; &#125; case HUNTER_DELAY_NEXT_BATCH: &#123; dispatcher.performBatchComplete(); break; &#125; case NETWORK_STATE_CHANGE: &#123; NetworkInfo info = (NetworkInfo) msg.obj; dispatcher.performNetworkStateChange(info); break; &#125; case AIRPLANE_MODE_CHANGE: &#123; dispatcher.performAirplaneModeChange(msg.arg1 == AIRPLANE_MODE_ON); break; &#125; default: Picasso.HANDLER.post(new Runnable() &#123; @Override public void run() &#123; throw new AssertionError(\"Unknown handler message received: \" + msg.what); &#125; &#125;); &#125; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œå¤„ç†æ‰‹æ®µæ˜¯å–å‡ºæ¶ˆæ¯é‡Œçš„Actionï¼Œç„¶åè°ƒç”¨Dispatcherä¸­performXXXç›´æ¥è¿›è¡Œå¤„ç†ã€‚è¿™ç§Dispatcherç»„åˆHandlerçš„æ¨¡å¼å€¼å¾—å­¦ä¹ å€Ÿé‰´ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹performSubmitä¹Ÿå°±æ˜¯æäº¤ä¸€ä¸ªå›¾ç‰‡åŠ è½½è¯·æ±‚å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ 12345678910111213141516171819202122232425262728293031323334void performSubmit(Action action, boolean dismissFailed) &#123; if (pausedTags.contains(action.getTag())) &#123; // å¦‚æœè¯·æ±‚å·²ç»è¢« pauseï¼Œåˆ™ä¸ç»§ç»­å‘ä¸‹å¤„ç† pausedActions.put(action.getTarget(), action); if (action.getPicasso().loggingEnabled) &#123; log(OWNER_DISPATCHER, VERB_PAUSED, action.request.logId(), \"because tag '\" + action.getTag() + \"' is paused\"); &#125; return; &#125; BitmapHunter hunter = hunterMap.get(action.getKey()); if (hunter != null) &#123; // BitmapHunter æ˜¯å·¥ä½œçº¿ç¨‹ç±»ï¼ˆå®ç° Runnable æ¥å£ï¼‰ï¼Œè‹¥ä¸€å¼ å›¾ç‰‡å·²ç»æœ‰å·¥ä½œçº¿ç¨‹åœ¨å¤„ç†ï¼Œåˆ™å°†å½“å‰ Action é™„åˆ°å·¥ä½œçº¿ç¨‹çš„é˜Ÿåˆ—ä¸­ hunter.attach(action); return; &#125; if (service.isShutdown()) &#123; // çº¿ç¨‹æ± å·²åœæ­¢ if (action.getPicasso().loggingEnabled) &#123; log(OWNER_DISPATCHER, VERB_IGNORED, action.request.logId(), \"because shut down\"); &#125; return; &#125; // ç”Ÿæˆä¸€ä¸ª BitmapHunter hunter = forRequest(action.getPicasso(), this, cache, stats, action); hunter.future = service.submit(hunter); // è¿™é‡Œå¾ˆé‡è¦ï¼Œæäº¤ä¸€ä¸ª Runnable ç»™çº¿ç¨‹æ±  hunterMap.put(action.getKey(), hunter); // å­˜è¿›å·¥ä½œçº¿ç¨‹ Map if (dismissFailed) &#123; failedActions.remove(action.getTarget()); &#125; if (action.getPicasso().loggingEnabled) &#123; log(OWNER_DISPATCHER, VERB_ENQUEUED, action.request.logId()); &#125;&#125; èŒè´£é‡å¤§çš„ BitmapHunterBitmapHunterå®ç°äº†Runnableæ¥å£ï¼Œrunæ–¹æ³•å¯ä»¥çœ‹ä½œå¯¹ä¸€æ¬¡å›¾ç‰‡è¯·æ±‚çš„å®Œæ•´å¤„ç†è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æ–‡åˆæåˆ°çš„â€œè·å– - å˜æ¢ - æ˜¾ç¤ºâ€ã€‚ 12345678910111213141516171819202122class BitmapHunter implements Runnable &#123; final int sequence; // åºåˆ—å·ï¼ŒåŸºäº AtomicInteger å®ç° final Picasso picasso; // å•ä¾‹ final Dispatcher dispatcher; // ä»»åŠ¡è°ƒåº¦å™¨ final Cache cache; final Stats stats; final String key; final Request data; final int memoryPolicy; int networkPolicy; final RequestHandler requestHandler; Action action; List&lt;Action&gt; actions; // ä¸€ä¸ª BitmapHunter å¯ä»¥å¤„ç†å¤šä¸ª Action Bitmap result; Future&lt;?&gt; future; Picasso.LoadedFrom loadedFrom; Exception exception; int exifRotation; // Determined during decoding of original resource. int retryCount; Priority priority;&#125; EXIFï¼ˆExchangeable Image Fileï¼‰æ˜¯â€œå¯äº¤æ¢å›¾åƒæ–‡ä»¶â€çš„ç¼©å†™ï¼Œå½“ä¸­åŒ…å«äº†ä¸“é—¨ä¸ºæ•°ç ç›¸æœºçš„ç…§ç‰‡è€Œå®šåˆ¶çš„å…ƒæ•°æ®ï¼Œå¯ä»¥è®°å½•æ•°ç ç…§ç‰‡çš„æ‹æ‘„å‚æ•°ã€ç¼©ç•¥å›¾åŠå…¶ä»–å±æ€§ä¿¡æ¯ã€‚å¾ˆå¤šå›¾åƒç¼–è¾‘å™¨ä¼šè‡ªåŠ¨è¯»å–Exifæ•°æ®æ¥å¯¹å›¾åƒè¿›è¡Œä¼˜åŒ–ï¼Œæœ€å¸¸è§çš„ä¾¿æ˜¯ä» Exifä¸­è¯»å–å‡ºç›¸æœºå§¿æ€ä¿¡æ¯ï¼Œä»è€Œè‡ªåŠ¨è¯†åˆ«å‡ºç«–æ‹ç”šè‡³æ˜¯é¢ å€’æ‹æ‘„çš„ç…§ç‰‡å¹¶å¯¹å…¶è¿›è¡Œæ—‹è½¬æ ¡æ­£ã€‚ run()æ–¹æ³•æ˜¯å¯¹å›¾ç‰‡çš„å¤„ç†æµç¨‹ 1234567891011121314151617181920212223242526272829303132333435363738@Override public void run() &#123; try &#123; updateThreadName(data); if (picasso.loggingEnabled) &#123; log(OWNER_HUNTER, VERB_EXECUTING, getLogIdsForHunter(this)); &#125; result = hunt(); // åŒæ­¥è·å–ç»“æœ if (result == null) &#123; // é€šçŸ¥ Dispatcher ä»»åŠ¡å®Œæˆ dispatcher.dispatchFailed(this); &#125; else &#123; dispatcher.dispatchComplete(this); &#125; &#125; catch (Downloader.ResponseException e) &#123; if (!e.localCacheOnly || e.responseCode != 504) &#123; exception = e; &#125; dispatcher.dispatchFailed(this); &#125; catch (NetworkRequestHandler.ContentLengthException e) &#123; // éå¸¸ç»†èŠ‚çš„é”™è¯¯å¤„ç† exception = e; dispatcher.dispatchRetry(this); &#125; catch (IOException e) &#123; exception = e; dispatcher.dispatchRetry(this); &#125; catch (OutOfMemoryError e) &#123; StringWriter writer = new StringWriter(); stats.createSnapshot().dump(new PrintWriter(writer)); exception = new RuntimeException(writer.toString(), e); dispatcher.dispatchFailed(this); &#125; catch (Exception e) &#123; exception = e; dispatcher.dispatchFailed(this); &#125; finally &#123; Thread.currentThread().setName(Utils.THREAD_IDLE_NAME); &#125;&#125; å¯è§å¯¹å›¾ç‰‡çš„è·å–å’Œå¤„ç†åœ¨huntä¸­ï¼Œå¯¹å¾—èµ·BitmapHunterè¿™ä¸ªåå­— 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162Bitmap hunt() throws IOException &#123; Bitmap bitmap = null; if (shouldReadFromMemoryCache(memoryPolicy)) &#123; // æ£€æŸ¥å†…å­˜ç¼“å­˜ bitmap = cache.get(key); if (bitmap != null) &#123; stats.dispatchCacheHit(); loadedFrom = MEMORY; if (picasso.loggingEnabled) &#123; log(OWNER_HUNTER, VERB_DECODED, data.logId(), \"from cache\"); &#125; return bitmap; &#125; &#125; data.networkPolicy = retryCount == 0 ? NetworkPolicy.OFFLINE.index : networkPolicy; RequestHandler.Result result = requestHandler.load(data, networkPolicy); // è°ƒç”¨ handler åŒæ­¥è·å–ç»“æœ if (result != null) &#123; loadedFrom = result.getLoadedFrom(); exifRotation = result.getExifOrientation(); // ä» exif é‡Œè·å–æ—‹è½¬è§’åº¦ bitmap = result.getBitmap(); // If there was no Bitmap then we need to decode it from the stream. if (bitmap == null) &#123; InputStream is = result.getStream(); // è§£ç å›¾ç‰‡ try &#123; bitmap = decodeStream(is, data); &#125; finally &#123; Utils.closeQuietly(is); // quietly çš„å«ä¹‰æ˜¯æ— è§†æ‰€æœ‰å¼‚å¸¸ &#125; &#125; &#125; if (bitmap != null) &#123; // å–åˆ°è§£ç åçš„å›¾ç‰‡ï¼Œè¿›è¡Œè½¬æ¢å’Œæ˜¾ç¤º if (picasso.loggingEnabled) &#123; log(OWNER_HUNTER, VERB_DECODED, data.logId()); &#125; stats.dispatchBitmapDecoded(bitmap); // è¿™é‡Œåªæ˜¯è®¡æ•°ï¼Œå¹¶æœªæ“ä½œè½¬æ¢ if (data.needsTransformation() || exifRotation != 0) &#123; synchronized (DECODE_LOCK) &#123; // å¿…é¡»åŠ é”ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€å¼ å›¾ç‰‡ï¼Œé˜²æ­¢ OOM if (data.needsMatrixTransform() || exifRotation != 0) &#123; bitmap = transformResult(data, bitmap, exifRotation); // è¿ç”¨ matrix çš„ scale ä¸ rotate å¤„ç†å›¾ç‰‡ if (picasso.loggingEnabled) &#123; log(OWNER_HUNTER, VERB_TRANSFORMED, data.logId()); &#125; &#125; if (data.hasCustomTransformations()) &#123; // è‡ªå®šä¹‰è½¬æ¢ï¼Œæ¯”å¦‚åœ†è§’ bitmap = applyCustomTransformations(data.transformations, bitmap); if (picasso.loggingEnabled) &#123; log(OWNER_HUNTER, VERB_TRANSFORMED, data.logId(), \"from custom transformations\"); &#125; &#125; &#125; if (bitmap != null) &#123; stats.dispatchBitmapTransformed(bitmap); &#125; &#125; &#125; return bitmap;&#125; åˆ°æ­¤ä¸ºæ­¢ï¼Œæ•´ä¸ªå›¾ç‰‡çš„åŠ è½½æµç¨‹åŸºæœ¬åˆ†æå®Œæˆï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç±»å›¾ï¼Œå‡ºå¤„è§æ–‡æœ«ã€‚ ç±»å›¾ ç¢ç¢å¿µåœ¨æˆ‘çœ‹æ¥ï¼Œåšä¸€ä¸ªå¼€æºé¡¹ç›®çš„æºç è§£è¯»ï¼Œä¸€èˆ¬æœ‰ä¸¤ä¸ªåˆ‡å…¥ç‚¹ã€‚ å…ˆåé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼Œâ€œå¦‚æœè®©ä½ å®ç°ä¸€ä¸ª XX æ¡†æ¶ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿâ€ï¼Œç”»å‡ºæµç¨‹å›¾ï¼Œåˆ—å‡ºæ‰¿æ‹…ä¸»è¦èŒè´£çš„ç±»ï¼›ç„¶åå†å¯¹ç…§ç€è‡ªå·±çš„è®¾è®¡ï¼Œå»é˜…è¯»å¹¶ç†è§£é¡¹ç›®ä»£ç ã€‚æˆ‘æŠŠå®ƒå«åšè‡ªé¡¶å‘ä¸‹ã€‚ ä»é¡¹ç›®ä»£ç çš„å…¥å£å¼€å§‹ï¼ˆä¸€èˆ¬æ˜¯å‡½æ•°è°ƒç”¨å¤„ï¼‰ï¼Œé€çº§è¿½è¸ªï¼Œå¼„æ¸…æ¥šæ¯ä¸€æ­¥æ¶‰åŠåˆ°å“ªäº›ç±»ï¼Œå®ƒä»¬çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æœ€åä¼šæœ‰ä¸€ä¸ªé“¾å¼çš„è°ƒç”¨åœ¨ä½ è„‘æµ·ä¸­ã€‚æˆ‘æŠŠå®ƒå«åšè‡ªåº•å‘ä¸Šã€‚ æ–¹æ³• 1 èƒ½è®©ä½ åœ¨å¼€å§‹æ—¶çºµè§ˆå…¨å±€ï¼Œå¯¹æ¯ä¸€ä¸ªæ¨¡å—æœ‰å¤§è‡´çš„è½®å»“ï¼Œéšç€é€æ­¥æ·±å…¥å­¦ä¹ ä»£ç ï¼Œå¯¹å…¶è®¤è¯†ä¼šè¿›ä¸€æ­¥åŠ æ·±ï¼Œæœ€ååŒ–ä¸ºå·±ç”¨ï¼›ä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä½ ä¸å¯èƒ½ä¸€ä¸Šæ¥å°±æŠŠæµç¨‹å›¾ã€ç±»å›¾ç»˜åˆ¶åœ°æ˜æ˜ç™½ç™½ï¼Œéœ€è¦ä½ å¯¹é¡¹ç›®ä»£ç æœ‰ä¸€äº›ç†è§£ï¼Œä¹Ÿè®¸è¿˜éœ€è¦ä¸€å®šçš„è®¾è®¡æ¨¡å¼çŸ¥è¯†ã€‚æ–¹æ³• 2 å®¹æ˜“ä¸Šæ‰‹ï¼Œå¦‚æœé¡¹ç›®ç®€å•è¿˜å¥½ï¼Œè‹¥æ˜¯å¤æ‚é¡¹ç›®å¾ˆå®¹æ˜“è®©äººè¿·å¤±å…¶ä¸­ã€‚æœ¬æ–‡é‡‡ç”¨çš„æ˜¯æ–¹æ³• 1 çš„æ€è·¯ï¼Œä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« åˆ†åˆ«å¯¹åº”æ–¹æ³• 1 å’Œ 2ï¼Œå®ƒä»¬åœ¨æˆ‘å†™æœ¬æ–‡çš„è¿‡ç¨‹ä¸­æä¾›äº†å¤§é‡å¸®åŠ©ï¼Œéå¸¸æ„Ÿè°¢åŸä½œè€…ã€‚ Android é¢è¯•åŠ©åŠ›ï¼šä¸€æ¬¡è¯»æ‡‚çƒ­é—¨å›¾ç‰‡æ¡†æ¶ Picasso æºç åŠæµç¨‹ Picassoæºä»£ç åˆ†æ","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"æºç å­¦ä¹ ","slug":"æºç å­¦ä¹ ","permalink":"https://lilei.pro/tags/æºç å­¦ä¹ /"}]},{"title":"ä½œæ¯æ—¶é—´è¡¨","date":"2018-05-15T00:31:05.000Z","path":"2018/05/15/schedule2018/","text":"A man is not old as long as he is seeking something. A man is not old until regrets take the place of dreams. å¼€å§‹æ—¥æœŸ 2018.5.15 æ—¶é—´ äº‹é¡¹ å¤‡æ³¨ 6:00~7:00 èµ·åºŠï¼Œæ´—æ¼±ï¼Œæ—©é¥­ï¼Œæ¸…ç†æˆ¿é—´ è§£å†»ç‰›æ’ 7:00~11:00 ä¸Šåˆè‡ªä¹  å‰ç«¯å¼€å‘ 11:00~13:30 è®­ç»ƒ èƒ¸ï¼ŒèƒŒï¼Œè…¿ï¼Œè‚©ï¼Œä¸Šè‡‚ï¼Œå°è…¿å°è‡‚ 13:30~14:30 åˆé¥­ / 14:30~18:00 ä¸‹åˆè‡ªä¹  è®¡ç®—æœºé€šç”¨æŠ€èƒ½ 18:00~19:00 æ™šé¥­ å…¨å®¶è´­ä¹°è”¬èœè‰²æ‹‰ 19:00~22:00 æ™šè‡ªä¹  åšå®¢ï¼Œæ—¥è®° 22:00~23:00 æ´—æ¼±ï¼Œæ´—è¡£æœ / 23:00 ç¡è§‰ /","tags":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://lilei.pro/tags/ç”Ÿæ´»/"}]},{"title":"æˆ‘ï¼Œå ‚å‰è¯ƒå¾·","date":"2018-05-06T08:33:43.000Z","path":"2018/05/06/Man-of-Lamancha/","text":"To dream the impossible dreamto fight the unbeatable foeto bear with unbearable sorrowto run where the brave dare not goto right the unrightable wrongto love pure and chaste from afarto try when your arms are too wearyto reach the unreachable star ç‚¹å‡»æ’­æ”¾è‹±æ–‡ç‰ˆThe Impossible Dream æˆ‘ï¼Œå ‚å‰è¯ƒå¾· è¿™æ˜¯æç£Šåœ¨2018å¹´è®°å½•çš„ç¬¬ä¸€éƒ¨éŸ³ä¹å‰§/è¯å‰§ï¼Œ2018å¹´5æœˆ5æ—¥ï¼Œäºä¸Šæµ·å¤§èˆå°ã€‚ å‘¨å…­ï¼Œä¸‹ç€å°é›¨ï¼Œä»äººå¹¿åœ°é“ç«™14å·å£èµ°å‡ºä¸è¿œï¼Œå°±åˆ°äº†æ­¤å‰§çš„æ¼”å‡ºåœ°ç‚¹ä¸Šæµ·å¤§èˆå°ï¼Œç¦»å¼€åœºè¿˜æœ‰45åˆ†é’Ÿï¼Œäºæ˜¯åœ¨é™„è¿‘èµ°äº†ä¸€èµ°ã€‚è¡—å¯¹é¢æœ‰ä¸€æ‰€é€ å‹ä¼˜ç¾çš„æ•™å ‚ï¼Œä¸¤é¢—è·¯å£å¤–ï¼Œæ˜¯äººå¤´æ”’åŠ¨çš„å—äº¬è·¯æ­¥è¡Œè¡—ï¼Œå³ä½¿å¤©å…¬ä¸ä½œç¾ï¼Œä¹Ÿå¹¶æœªæ‰“æ¶ˆæ¸¸äººä»¬çš„å…´è‡´ã€‚ä¸Šä¸€æ¬¡è‡ªå·±æ¥è¿™é‡Œè¿˜æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿæ€•æ˜¯æœ‰ä¸€ä¸¤å¹´å§ã€‚ è¾èŒä¹‹åï¼Œè‡ªå·±å˜å¾—å¤ªæ‡’ï¼Œè¿™ä¸æ˜¯ä¸ªå¥½ç°è±¡ã€‚14:15å›åˆ°å‰§åœºï¼Œæ£€ç¥¨ï¼Œè¿›åœºå…¥åº§ã€‚ åˆè¯†ä¸çŸ¥å‰§ä¸­æ„ï¼Œå†è§å·²æ˜¯å‰§ä¸­äººã€‚ è¿™éƒ¨å‰§å¥½ä¹ˆï¼Ÿ å¥½ï¼Œæ¯ä¸€ä¸ªåœ¨ç¤¾ä¼šçš„æ±ªæ´‹å¤§æµ·ä¸­æ‰¾ä¸åˆ°æ–¹å‘çš„äººï¼Œéƒ½åº”è¯¥å»çœ‹ä¸€çœ‹ã€‚å¥¹é…å¾—ä¸Šé‚£ä¸€å¥å®£ä¼ è¯­â€”â€”â€œä¸€ç”Ÿä¸­å€¼å¾—çœ‹ä¸‰éçš„éŸ³ä¹å‰§â€ã€‚ç°å®ç”Ÿæ´»ä¸­ï¼Œä»–æ˜¯æ‹‰æ›¼æŸ¥çš„è€è¿ˆä¹¡ç»…é˜¿éš†ç´¢ï¼Œåœ¨ä»–çš„ä¸–ç•Œé‡Œï¼Œå´æ˜¯èº«æŠ«ç”²èƒ„æŒ‘æˆ˜æ¶é¾™èµ¢å¾—å…¬ä¸»èŠ³å¿ƒçš„æ¸¸ä¾ éª‘å£«å ‚å‰è¯ƒå¾·ã€‚ å°è±¡æœ€æ·±çš„æ˜¯ï¼Œå½“å ‚å‰è¯ƒå¾·çš„éª‘å£«å¹»æ¢¦è¢«é•œå­éª‘å£«æ­ç©¿åï¼Œé‚£èººåœ¨ç—…åºŠä¸Šçš„è€äººä»¿ä½›ä¸€ç¬é—´è¢«æŠ½å»äº†çµé­‚ï¼Œå°½ç®¡è‡ªå·±ååœ¨å½±é™¢äºŒæ¥¼ï¼Œä¼¼ä¹å´å¯ä»¥çœ‹åˆ°ä»–çš„çœ¼ä¸­å¤±å»äº†å¾€æ˜”çš„å…‰å½©ã€‚ åœ¨â€œæ­£å¸¸äººâ€çœ¼ä¸­ï¼Œé€€ä¼‘çš„ä¹¡ç»…åº”è¯¥æ‹¾æ‡èŠ±åœƒå®‰åº¦æ™šå¹´ï¼Œå¦“å¥³ä¸€å®šæ˜¯ç‹‚èœ‚æµªè¶äººå°½å¯å¤«ï¼Œè€Œé˜¿éš†ç´¢æ”¶ç¨æ”¶åˆ°äº†æ•™å ‚å¤´ä¸Šï¼Œç®€ç›´æ˜¯ä¸è¯†æŠ¬ä¸¾ã€‚ åœ¨ä»–ä»¬çœ‹æ¥ï¼Œé£è½¦å°±æ˜¯é£è½¦ï¼Œç†å‘åŒ çš„è„¸ç›†è·Ÿé‡‘å¤´ç›”å…«æ†å­æ‰“ä¸ç€ï¼Œå§‘ä¸”å«ä½ ä¸€å£°å“­ä¸§è„¸çš„éª‘å£«ï¼Œä¸ç–¯å­ä¸éœ€è®¡è¾ƒã€‚ æˆ‘ä»¬çš„æ–‡åŒ–ä¸€ç›´ä»¥æ¥å¼ºè°ƒçš„æ˜¯äººçš„ç¤¾ä¼šå±æ€§ï¼šçˆ¶äº²ã€å„¿å­ã€å‘˜å·¥ã€è€æ¿ã€å¤–ä¹¡äººã€æ¶ˆè´¹è€…â€¦â€¦å½“æˆ‘ä»¬å‘é™Œç”Ÿäººè‡ªæˆ‘ä»‹ç»æ—¶ï¼Œæœ€å…ˆè¯´çš„æ˜¯â€œä»–æ˜¯ä¸€ä¸ªæ•™å¸ˆâ€ã€â€œä»–æ˜¯ä¸€ååŒ»ç”Ÿâ€ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šåœ¨å¬åˆ°è¿™å¥è¯åï¼Œä¸ºçœ¼å‰è¿™ä¸ªäººè´´ä¸Šå¥½å¤šä¸ªå±æ€§æ ‡ç­¾ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¤ªå°‘è°ˆåŠä½œä¸ºä¸€ä¸ªäººçš„è‡ªç„¶å±æ€§ï¼šäººæ ¼ã€å°Šä¸¥ã€è‡ªç”±ã€å¿«ä¹ã€å¹¸ç¦ã€è¿½æ±‚ã€è¿˜æœ‰ç†æƒ³ã€‚ è¿™ç§ç†æƒ³ï¼Œä¸æ˜¯YYè‡ªå·±èº«æŠ«é‡‘ç”²åœ£è¡£ã€è„šè¸©ä¸ƒå½©ç¥¥äº‘ï¼Œäºä¸‡ä¼—ç©ç›®ä¸­ä»¥ä¸€å·±ä¹‹åŠ›é€†è½¬ä¹¾å¤ï¼Œç†æƒ³åº”å½“æ˜¯åšå®šçš„ã€å€¼å¾—æŒä¹‹ä»¥æ’çš„ã€å¯ä»¥å®ç°çš„ã€‚ç†æƒ³ä¸åº”å½“æ˜¯åŠ¨ç‰©æ€§ï¼Œè´ªå©ªã€æ‡’æƒ°ã€æš´é£Ÿã€æ·«æ¬²ã€æ„¤æ€’ã€å«‰å¦’ã€å‚²æ…¢ã€‚ç†æƒ³åº”å½“æ˜¯æ— å®³äºäººå¹¶ä¸”æœ‰åˆ©äºå·±ã€‚ å³ä½¿ä¸€ä¸ªäººæ´»çš„åƒæ¡ç‹—ï¼Œä¹Ÿä¸çŸ›ç›¾ã€‚ å»é—®è‡ªå·±çš„å†…å¿ƒï¼Œæƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Œè€Œä¸æ˜¯è®©è¿™ä¸ªç¤¾ä¼šå‘Šè¯‰ä½ ï¼Œè¦è¿‡ä»€ä¹ˆæ ·çš„ç”Ÿæ´»ã€‚ ç‰‡ä¸­çš„å°é©¬å°é©´è¡¨æ¼”çš„é¢‡æœ‰çµæ°”ï¼Œåœ¨èˆå°ä¸€è§’æˆä»½å¾ˆè¶³ï¼Œå¯æƒœååœ¨äºŒæ¥¼è§†çº¿ä¸å¥½ï¼Œè¢«é®æŒ¡äº†ä¸€äº›ã€‚ å»æ‘˜ï¼Œé¥ä¸å¯åŠçš„æ˜Ÿï¼ åˆ†äº«ä¸€ç¯‡æ–‡ç«  å¦‚ä½•è¯„ä»·éŸ³ä¹å‰§ã€Šæˆ‘ï¼Œå ‚å‰è¯ƒå¾·ã€‹ä¸­æ–‡ç‰ˆï¼Ÿ - NYLEçš„å›ç­” - çŸ¥ä¹","tags":[{"name":"éŸ³ä¹å‰§","slug":"éŸ³ä¹å‰§","permalink":"https://lilei.pro/tags/éŸ³ä¹å‰§/"}]},{"title":"æ¸è¡Œæ¸è¿œæ¸æ— ä¹¦","date":"2018-05-05T00:20:28.000Z","path":"2018/05/05/æ¸è¡Œæ¸è¿œæ¸æ— ä¹¦/","text":"æ¬§é˜³ä¿®ã€Šç‰æ¥¼æ˜¥ åˆ«åä¸çŸ¥å›è¿œè¿‘ã€‹ åˆ«åä¸çŸ¥å›è¿œè¿‘ï¼Œè§¦ç›®å‡„å‡‰å¤šå°‘é—·ï¼Œæ¸è¡Œæ¸è¿œæ¸æ— ä¹¦ï¼Œæ°´é˜”é±¼æ²‰ä½•å¤„é—®ã€‚å¤œæ·±é£ç«¹æ•²ç§‹éŸµï¼Œä¸‡å¶åƒå£°çš†æ˜¯æ¨ï¼Œæ•…æ¬¹å•æ•æ¢¦ä¸­å¯»ï¼Œæ¢¦åˆä¸æˆç¯åˆçƒ¬ã€‚","tags":[{"name":"è¯—è¯","slug":"è¯—è¯","permalink":"https://lilei.pro/tags/è¯—è¯/"}]},{"title":"åæ¥çš„æˆ‘ä»¬","date":"2018-04-30T12:28:17.000Z","path":"2018/04/30/åæ¥çš„æˆ‘ä»¬/","text":"ç¼˜åˆ†è¿™ä»¶äº‹ï¼Œä¸è´Ÿå¯¹æ–¹å°±å¥½äº†ï¼Œæƒ³ä¸è´Ÿæ­¤ç”Ÿæ˜¯å¾ˆéš¾çš„ã€‚ ç‚¹å‡»æ’­æ”¾äº”æœˆå¤©ã€Šåæ¥çš„æˆ‘ä»¬ã€‹ è¿™æ˜¯æç£Šåœ¨2018å¹´è®°å½•çš„ç¬¬2éƒ¨ç”µå½±ã€‚ åæ¥çš„æˆ‘ä»¬ æƒ³å»å½±é™¢çœ‹è¿™éƒ¨ç”µå½±ï¼Œæ¥æºäºå®ƒçš„ä¸»é¢˜â€”â€”å°äººç‰©åœ¨å¤§åŸå¸‚é‡Œçš„æ‰“æ‹¼ï¼Œä»¥åŠä»–ä»¬ä¹‹é—´çš„çˆ±æ¨æ‚²æ¬¢ã€‚èº«ä¸ºå…¶ä¸­ä¸€å‘˜ï¼Œä¹Ÿæƒ³çœ‹çœ‹é‚£ä¸ªæ›¾ç»å”±å‡ºã€Šå¾ˆçˆ±å¾ˆçˆ±ä½ ã€‹å’Œã€Šåæ¥ã€‹çš„åˆ˜è‹¥è‹±ï¼Œæ‹å‡ºæ¥çš„æ•…äº‹ä¼šæ˜¯æ€æ ·çš„ã€‚æœ€åä¸€ç‚¹æ˜¯äº”æœˆå¤©çš„éŸ³ä¹åŠ æˆï¼Œå¥½å¯æƒœåœ¨æ­£ç‰‡é‡Œå¹¶æ²¡æœ‰é‡‡ç”¨è¿™é¦–æ­Œã€‚ æ•…äº‹æ¯”è¾ƒç®€å•ï¼Œä¸å†å¤è¿°å‰§æƒ…ï¼Œæƒ³åˆ°å“ªé‡Œå°±è¯´åˆ°å“ªé‡Œã€‚ â€œæ—¶éš”è®¸ä¹…å›åˆ°æ•…ä¹¡ï¼Œå‘ç°è¿™é‡Œå¥½åƒå¹¶æ²¡æœ‰å˜è¿‡â€ï¼Œè¿™æ˜¯æ—è§æ¸…åœ¨å‰§ä¸­çš„ä¸€æ®µç‹¬ç™½ã€‚å¬åˆ°è¿™ä¸€å¥æ—¶ï¼Œæˆ‘çš„å¿ƒé‡Œä»¿ä½›æœ‰ä¸€æ ¹å¼¦è¢«â€œzongâ€åœ°ä¸€å£°æ‹¨åŠ¨äº†ã€‚è§æƒ¯äº†å¤§åŸå¸‚é‡Œçš„å˜åŒ–ï¼Œæ–°çš„è¡Œä¸šã€æ½®æµã€ç”Ÿæ´»æ–¹å¼ä¸€å¤œä¹‹é—´å¯ä»¥å æ®å„å¤§å¤´ç‰ˆã€‚å†å›åˆ°äººç”Ÿå‰åå‡ å¹´æˆé•¿çš„æ•…ä¹¡æ—¶ï¼Œçœ‹åˆ°çš„å±±æ°´è½¦é©¬ï¼Œä»æ—§æ˜¯å°æ—¶å€™çš„æ ·å­ï¼Œä»¿ä½›æ—¶é—´ä»ä¸æ›¾æµé€ã€‚ ä¹Ÿè®¸å®¶ä¹¡å”¯ä¸€å¯è§çš„å˜åŒ–ï¼Œå°±æ˜¯äº²äººæ—¥æ¸è€å»çš„æ ·è²Œã€‚ä»–ä»¬çš„è…°æ†ä¸å†åƒå¹´è½»æ—¶é‚£ä¹ˆç¬”ç›´ï¼Œå¸¸å¸¸ä¼šæƒ³ä¸èµ·åˆšåˆšåšè¿‡çš„äº‹å’Œå¯¹ä½ å” å¨è¿‡çš„è¯è¯­ï¼Œçœ‹æŠ¥çº¸æ–‡ç« ä¹ƒè‡³é¥æ§å™¨ä¸Šçš„å­—æ¯ï¼Œéƒ½è¦å€ŸåŠ©æ”¾å¤§é•œã€‚ è®©äººæ›´æ‚²ä¼¤çš„æ˜¯ï¼Œä»–ä»¬çš„è®°å¿†é‡Œå†æ€ä¹ˆè¡°é€€ï¼Œæ€»è¿˜ä¼šè®°å¾—ï¼Œé¡½åŠ£å¦‚ä½ å°æ—¶å€™åšè¿‡çš„é‚£äº›äº‹ï¼Œä½ æœ€çˆ±åƒçš„å®¶ä¹¡èœï¼Œä»¥åŠä½ çš„ç”Ÿæ—¥ã€‚ å¦‚åŒç”°å£®å£®é¥°æ¼”çš„æ—çˆ¶ï¼Œåœ¨ç«è½¦ç«™æ¥æ—è§æ¸…å’Œä»–å¥³æœ‹å‹æ—¶ï¼Œè„±å£è€Œå‡ºçš„é‚£å¥â€œå°æ™“ï¼â€ï¼Œçœ‹ç€é“¶å¹•ä¸Šè€äººæµ‘æµŠçš„åŒçœ¼ï¼Œè®©è‡ªå·±åœ¨è§‚çœ‹è¿™éƒ¨ç”µå½±çš„è¿‡ç¨‹ä¸­ç¬¬ä¸€æ¬¡æƒ³å“­ã€‚ å…¶ä¸­æœ‰ä¸€æ®µï¼Œæ—è§æ¸…åˆšåˆšä¸¢äº†å·¥ä½œï¼Œé™¤å¤•å¤œä¸æ–¹å°æ™“çªåœ¨ç‹­å°çš„å‡ºç§Ÿå±‹ã€‚æ—åœ¨æ‰“æ¸¸æˆæ—¶ï¼ˆåˆ†æ˜æ˜¯ã€Šæ±‚ç”Ÿä¹‹è·¯ã€‹ï¼‰ï¼Œæ—çˆ¶æ‰“æ¥ç”µè¯ï¼Œä¸¤äººä½ ç’æˆ‘ç’ï¼Œä¸€ä¸ªè¯´åœ¨åŒ—äº¬å¾ˆå¥½ï¼Œåƒç€çƒ¤é¸­è¿‡ç€å¹´ï¼Œä¸€ä¸ªè¯´å®¶é‡Œæ¥äº†å¥½å¤šäº²æˆšçƒ­é—¹å¾—å¾ˆï¼Œä½ åœ¨åŒ—äº¬è¦ç…§é¡¾å¥½è‡ªå·±åˆ«æƒ¦è®°æˆ‘ã€‚äº‹å®å‘¢ï¼Ÿæ˜¯ä¸æ˜¯æ¯ä¸€å¥â€œæˆ‘å¾ˆå¥½ï¼Œä½ ä¸è¦æƒ¦è®°â€èƒŒåï¼Œéƒ½æœ‰ä¸€ä¸ªå–„æ„çš„è°è¨€ï¼Ÿ åˆ˜è‹¥è‹±åœ¨è®²è¿™ä¸ªæ•…äº‹æ—¶ï¼Œæœ‰ä¸€ç‚¹æˆ‘è§‰å¾—å¤„ç†å¾—å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œé‚£å°±æ˜¯ä¸¤ä¸ªäººä¸ºä»€ä¹ˆåˆ†å¼€ã€‚æ— ç–‘ä»–ä»¬è¿˜æ˜¯å½¼æ­¤ç›¸çˆ±ç€çš„ï¼Œæ–¹å°æ™“åº”è¯¥æ˜¯å§‹ç»ˆæœªå©šï¼Œæ—è§æ¸…çš„å©šå§»ä¹Ÿä¸è§å¾—å¤šå¹¸ç¦ï¼Œæ˜¯ä¸ºäº†æ‚²å‰§è€Œæ‚²å‰§å—ï¼Ÿè™½ç„¶æœ«å°¾å€ŸåŠ©æ—çˆ¶çš„ä¿¡ä»¶è¯´å‡ºäº†å¼•æ–‡ä¸­â€œç¼˜åˆ†è¿™ä»¶äº‹ï¼Œä¸è´Ÿå¯¹æ–¹å°±å¥½äº†ï¼Œæƒ³ä¸è´Ÿæ­¤ç”Ÿæ˜¯å¾ˆéš¾çš„â€çš„è¯ï¼Œä½†ä»ç„¶è®©äººè§‰å¾—å¦‚é² åœ¨å–‰ã€‚ æŠŠè¿™éƒ¨ç”µå½±é‡Œçš„â€œåŒ—äº¬â€æ¢æˆâ€œä¸Šæµ·â€ã€â€œå¹¿å·â€ï¼Œæ²¡æœ‰ä¸æ¯«ä¸å¦¥ã€‚åŒæ ·çš„æ•…äº‹åœ¨ä¸åŒçš„æƒ…ä¾£ä¹‹é—´ï¼Œæ¯ä¸€å¤©éƒ½åœ¨ä¸Šæ¼”ç€ã€‚ç„¶è€Œï¼Œä¸ªäººçš„æ‚²æ¬¢åœ¨è¿™äº›æ‹¥æœ‰å‡ åƒä¸‡äººå£çš„å¤§éƒ½å¸‚é‡Œï¼Œè¢«æ— é™ç¨€é‡Šäº†ã€‚æ¯å¤©åœ°é“æ—©æ™šé«˜å³°æ¶Œå‡ºå¤šå°‘äººæµï¼Œå°±æœ‰å¤šå°‘ä¸ªæ—è§æ¸…æ–¹å°æ™“ã€‚åœ¨åˆ«äººçš„æ•…äº‹é‡Œï¼Œæˆ‘ä»¬æ˜¯çœ‹å®¢ï¼Œåœ¨è‡ªå·±çš„æ•…äº‹é‡Œï¼Œæˆ‘ä»¬æ˜¯ä¸»è§’ã€‚ è¿™éƒ¨æˆè¿˜æœ‰ä¸€äº›å¾ˆç”¨å¿ƒçš„å°ç»†èŠ‚ï¼Œæ¯”å¦‚ä¸€å¼€å§‹07å¹´ä¸¤äººä¹˜åç»¿çš®è½¦å»åŒ—äº¬ï¼ˆå½“å¹´æˆ‘ä»å“ˆå¸‚åˆ°ä¸Šæµ·åçš„33å°æ—¶ç¡¬åº§å¤§æ¦‚ä¹Ÿæ˜¯ç»¿çš®çš„ï¼‰ï¼ŒèƒŒæ™¯ç”µè§†é‡Œå“èµ·çš„åŒ—äº¬ç”³å¥¥æˆåŠŸæ–°é—»æŠ¥é“ï¼Œä»¥åŠé™¤å¤•å¤œè§æ¸…ä¸ºå®¶é‡Œä¹°äº†æ–°ç”µè§†æ—¶ï¼Œç”µè§†é‡Œæ’­æ”¾çš„è¥¿å•å¥³å­©åœ¨æ˜¥æ™šçš„è¡¨æ¼”ã€‚è¿˜æœ‰â€œç²˜è±†åŒ…â€ï¼Œå°½ç®¡è‡ªå·±å¹¶ä¸å–œæ¬¢åƒï¼Œä½†å¥½ä¹…ä¹‹åå¬äººè¯´èµ·è¿™ä¸ªè¯è¯­ï¼Œè¿˜æ˜¯è“¦ç„¶å¿ƒé‡Œä¸€çƒ­ã€‚ è®©äººå‡ºæˆçš„åœ°æ–¹ä¹Ÿæœ‰ï¼Œåƒå‰§ä¸­ä¸‰åä¸»è§’çš„ä¸œåŒ—è¯ï¼Œåˆ†æ˜ä¸æ˜¯é»‘é¾™æ±Ÿå†…ç–™ç˜©çš„ï¼ˆæœ«å°¾æ—è§æ¸…ç§Ÿè½¦å¼€å»ä¸Šæµ·ï¼Œæ˜¯ä¸€è¾†é»‘Aç‰Œç…§çš„å‡¯è¿ªæ‹‰å…‹SUVï¼Œå¯è§ä»–ä»¬æ˜¯åœ¨å“ˆå°”æ»¨ç§Ÿçš„è½¦ï¼‰ï¼Œæœ‰ç‚¹å‡ºæˆï¼Œä½†ç‘•ä¸æ©ç‘œã€‚ç”°å£®å£®â€”â€”åŒ—äº¬äººï¼Œå‘¨å†¬é›¨â€”â€”çŸ³å®¶åº„äººï¼Œäº•æŸç„¶å€’æ˜¯åœ°é“çš„æ²ˆé˜³äººï¼Œä¸è¿‡è¾½å®çš„ä¸œåŒ—è¯ä¸é»‘é¾™æ±Ÿã€å‰æ—å·®å¼‚è¿˜æ˜¯è›®å¤§çš„ã€‚ å½±ç‰‡ååŠæ®µï¼Œå‰§é™¢é‡Œé™†é™†ç»­ç»­å“èµ·æŠ½æ³£çš„å£°éŸ³ï¼Œæˆ‘å–œæ¬¢è¿™éƒ¨ç”µå½±ï¼Œå°½ç®¡å¤–ç•Œå¯¹å®ƒçš„è¯„ä»·å¾ˆä½ï¼Œè€Œä¸”åˆ˜è‹¥è‹±å¹¶ä¸æ“…é•¿è®²æ•…äº‹ï¼Œä½†åªè¦æœ‰å¯ä»¥è§¦åŠ¨æˆ‘çš„åœ°æ–¹å°±å¤Ÿäº†ã€‚åˆ«äººéƒ½çœ‹å¥½çš„ï¼Œä¸ä¸€å®šåˆä½ çš„å£å‘³ï¼Œç”µå½±å¦‚æ­¤ï¼Œçˆ±æƒ…ä¹Ÿä¸€æ ·ã€‚ 2018å¹´4æœˆ30æ—¥ï¼Œäºé•¿å®å½±å‰§é™¢ã€‚","tags":[{"name":"å‘¨å†¬é›¨","slug":"å‘¨å†¬é›¨","permalink":"https://lilei.pro/tags/å‘¨å†¬é›¨/"},{"name":"äº•æŸç„¶","slug":"äº•æŸç„¶","permalink":"https://lilei.pro/tags/äº•æŸç„¶/"}]},{"title":"I'm a motherfuckin beast - æ°å…‹å‰ä¼¦å“ˆå°”ã€Šé“æ‹³ã€‹","date":"2018-04-29T13:44:39.000Z","path":"2018/04/29/motherfuckin-beast-æ°å…‹å‰ä¼¦å“ˆå°”ã€Šé“æ‹³ã€‹/","text":"åšæŒåˆ°ç¬¬12å›åˆï¼ŒåšæŒåˆ°ä½ æ•Œäººå€’ä¸‹çš„é‚£ä¸€åˆ»ã€‚ è¿™æ˜¯æç£Šåœ¨2018å¹´è®°å½•çš„ç¬¬1éƒ¨ç”µå½±ã€‚ Southpaw è¯´å®è¯ï¼Œè‡ªå·±æ˜¯è¢«æ°å…‹å‰ä¼¦å“ˆå°”ä¸€èº«è…±å­è‚‰å¸å¼•ï¼Œæ‰è§‚çœ‹è¿™éƒ¨ç”µå½±çš„ã€‚åœ¨ã€Šå¤œè¡Œè€…/nightcrawlerã€‹ä¸€ç‰‡ä¸­å‰ä¼¦å“ˆå°”æ‰®æ¼”äº†ä¸€åæ–‡è´¨å½¬å½¬ã€ä¸ºè¾¾ç›®çš„ä¸æ‹©æ‰‹æ®µçš„æ–°é—»è´©å­ï¼Œå¾ˆéš¾æƒ³è±¡ä»–é‚£æ ·å¼±ä¸ç¦é£çš„æ ·å­ï¼Œç«Ÿç„¶å¯ä»¥åœ¨æœ¬ç‰‡é‡Œé¥°æ¼”æ‹³å‡»æ‰‹ä¸€è§’ï¼Œä¸€èº«ç²¾å£®è€Œæœ‰çº¿æ¡åˆ†æ˜çš„è‚Œè‚‰ï¼Œä½“è„‚ç‡ç›®æµ‹7ï½8å·¦å³ã€‚ä¸ºäº†è¿™ä¸ªç”µå½±ï¼Œä»–ä¸€å®šä»˜å‡ºäº†å¾ˆå¤šåŠªåŠ›ã€‚ å…³äºå½±ç‰‡æœ¬èº«ï¼Œèƒ½å¤Ÿè®²è¿°çš„ä¸œè¥¿å¹¶ä¸å¤šï¼Œæƒ…èŠ‚è°ˆä¸ä¸Šæ›²æŠ˜ï¼Œæ˜¯è¿åŠ¨é¢˜æç”µå½±ä¸€è´¯çš„å¥—è·¯ï¼Œæ‰€å‘æ— æ•Œ-éª„å‚²æ”¾è‚†-è·Œä¸‹ç¥å›-æ´—å¿ƒé©é¢ï¼ˆè¿™æ—¶å€™é€šå¸¸éœ€è¦ä¸€ä¸ªä¿ƒä½¿ä¸»è§’è§‰é†’è¦ç´ ï¼Œåœ¨æœ¬ç‰‡ä¸­æ˜¯å¥³å„¿&amp;æ•™ç»ƒï¼‰-é­é‡å®¿æ•Œ-å¼€å±€é€†é£-ç»åœ°åå‡»ã€‚å€¼å¾—ç§°èµçš„æ˜¯æ°å…‹å‰ä¼¦å“ˆå°”çš„æ¼”æŠ€å§‹ç»ˆåœ¨çº¿ï¼Œå°†ä¸€ä¸ªç”Ÿæ´»ã€äº‹ä¸šæ¥è¿å—æŒ«ã€å¤„äºé€†å¢ƒä¸­çš„æ‹³å‡»æ‰‹/çˆ¶äº²å½¢è±¡æ¼”ç»å¾—ææ£’ï¼Œå°¤å…¶æ˜¯ä»–çš„çœ¼ç¥ã€‚åé¢çš„æ‰“æ–—éƒ¨åˆ†å€’ä¸å¦‚ã€Šç›‘ç‹±æ–—å£«ã€‹æ¥å¾—ç²¾å½©åˆºæ¿€ã€‚ å°½ç®¡å¦‚æ­¤ï¼Œè¿™éƒ¨ç”µå½±èƒ½åœ¨æˆ‘workoutæ—¶å€™ï¼Œæ¿€åŠ±æˆ‘å¤šåšä¸€ä¸ªåå¤ï¼Œå¦‚æ­¤è¿™èˆ¬å°±è¶³å¤Ÿäº†ã€‚","tags":[{"name":"æ°å…‹å‰ä¼¦å“ˆå°”","slug":"æ°å…‹å‰ä¼¦å“ˆå°”","permalink":"https://lilei.pro/tags/æ°å…‹å‰ä¼¦å“ˆå°”/"}]},{"title":"æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ã€ŠåŸºç£å±±ä¼¯çˆµã€‹","date":"2018-04-28T00:40:12.000Z","path":"2018/04/28/å†è¯»ã€ŠåŸºç£å±±ä¼¯çˆµã€‹/","text":"äººç±»çš„ä¸€åˆ‡æ™ºæ…§ï¼Œéƒ½åŒ…å«åœ¨è¿™ä¸¤ä¸ªè¯è¯­é‡Œé¢ã€‚ è¿™æ˜¯æç£Šåœ¨2018å¹´è¯»å®Œçš„ç¬¬1æœ¬ä¹¦ã€‚ ã€ŠåŸºç£å±±ä¼¯çˆµã€‹è¿™æœ¬ä¹¦ï¼Œåº”è¯¥æ˜¯åœ¨ä¸­å­¦æ—¶ä»£è¯»çš„ç¬¬ä¸€éå§ï¼Œä»ç™¾è‰å›­ä¹¦åº—ç§Ÿå€Ÿçš„ä¹¦ç±ã€‚è¿™å‘¨ä¸­ï¼Œç”±äºå†™ä¿¡æ—¶éœ€è¦å¼•ç”¨ä¹¦ä¸­çš„ä¸€æ®µè¯ï¼Œé‚åœ¨ç½‘ä¸Šæ‰¾æ¥åŸæ–‡ï¼Œè°çŸ¥å†æ¬¡è¢«å¸å¼•ï¼Œä¸€å‘ä¸å¯æ”¶æ‹¾ï¼ŒèŠ±3å¤©æ—¶é—´åˆä»å¤´è¯»å®Œäº†è¿™æœ¬ä¸è–„çš„è‘—ä½œã€‚ æ•…äº‹å†…å®¹é¢‡æœ‰ç°åœ¨ç½‘æ–‡çš„å¥—è·¯ï¼Œç”·ä¸»è§’ï¼ˆåŸƒå¾·è’™å”æ³°æ–¯ï¼‰å‡ºèº«å¹³å¹³ï¼Œç¦€æ€§çº¯è‰¯ï¼Œæœ‰ä¸€é’æ¢…ç«¹é©¬çº¢é¢œçŸ¥å·±ï¼Œæœ¬æ¥å¯ä»¥å‡èŒèˆ¹é•¿å¨¶å¦»ç”Ÿå­å®‰ç¨³è¿‡å®Œè¿™ä¸€ç”Ÿï¼Œè°çŸ¥è¢«å«‰å¦’ä»–çš„å°äººæš—ä¸­åŠ å®³ï¼Œä¸ä»…è€çˆ¶äº²è´«å›°è€Œæ­»ï¼Œè¿è’™åœ¨é¼“é‡Œçš„æœªå©šå¦»éƒ½æˆä¸ºä»‡äººçš„å¦»å­ï¼Œè‡ªå·±ä¹Ÿåœ¨æš—æ— å¤©æ—¥çš„æµ·ä¸Šç›‘ç‰¢é‡Œåº¦è¿‡äº†åå››å¹´æ—¶å…‰ã€‚æ‰€å¹¸åœ¨é­éš¾æ—¶ï¼Œé‡åˆ°äº†ä¸ä¸–å‡ºçš„é«˜äººï¼ˆæ³•åˆ©äºšç¥çˆ¶ï¼‰ï¼Œä¼ æˆç»™ä»–ä¸€èº«æ–‡æ­¦æœ¬é¢†ï¼Œåˆèµ äºˆä¸€å¤§ç¬”å¯Œå¯æ•Œå›½çš„è´¢å®ã€‚å½“ä»–æˆåŠŸè¶Šç‹±åï¼Œæ‘‡èº«ä¸€å˜åŸºç£å±±ä¼¯çˆµï¼Œå°†ä»‡äººç©å¼„äºè‚¡æŒä¹‹é—´ã€‚æœ€åçœ‹ç ´ä¸–äº‹ï¼Œæºç¾äººå½’éšã€‚ ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œã€ŠåŸºç£å±±ä¼¯çˆµã€‹è¿™æœ¬ç”±å¤§ä»²é©¬ï¼ˆ1802â€”1870ï¼‰å‡ºç‰ˆäº1846å¹´çš„å°è¯´ï¼Œå¼•é¢†äº†åä¸–æ½®æµè¶³æœ‰è¿‘ä¸¤ç™¾å¹´ã€‚ç„¶è€Œï¼Œå®ƒå¹¶éä»…ä»…åƒé¾™å‚²å¤©é‚£ä¹ˆç®€å•ç²—æš´ã€‚ å–„æ¶åˆ†æ˜ã€æœºæ™ºæœæ•¢ã€ç®—æ— é—ç­–ã€æ²‰é»˜é«˜è´µã€æ…·æ…¨æ— ç§â€¦â€¦æˆ‘ä»¬å¯ä»¥å°†å¤ªå¤šèµç¾çš„è¯æ±‡åŠ è¯¸äºåŸƒå¾·è’™ï¼Œç„¶è€Œå¯¹äºä»–æ‰€æ‰¿å—è¿‡çš„ç—›è‹¦ï¼Œæˆ‘ä»¬å§‹ç»ˆæ— æ³•æ„ŸåŒèº«å—ã€‚ä¸è®ºæ˜¯ä»ä¸çˆ±äººçš„å©šç¤¼ä¸Šè¢«è­¦å¯Ÿå¸¦èµ°å«å†¤å…¥ç‹±ï¼Œè¿˜æ˜¯åœ¨é»‘æš—é˜´æ£®çš„ä¼Šå¤«å ¡ç›‘ç‹±åº¦æ—¥å¦‚å¹´ï¼Œä»¥åŠç›®ç¹äº¦å¸ˆäº¦å‹äº¦çˆ¶çš„æ³•åˆ©äºšç¥çˆ¶æ­»äº¡ï¼Œè¿˜æœ‰å¾—çŸ¥æ‰€çˆ±ä¹‹äººå·²ç»å«ç»™äº†è°‹å®³è‡ªå·±çš„å‡¶å¾’ï¼Œè¿™äº›ç—›è‹¦ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½è¶³ä»¥å‹å®ä¸€ä¸ªå¿ƒæ™ºå¥å…¨çš„äººï¼Œä½•å†µæ˜¯å…¨éƒ¨ã€‚ å…¶å®æˆ‘æœ€æƒ³çŸ¥é“çš„æ˜¯ï¼Œå½“åŸƒå¾·è’™ç§»èŠ±æ¥æœ¨ä»£æ›¿æ³•åˆ©äºšç¥çˆ¶ï¼Œä»æ‚¬å´–è¢«æŠ•å…¥é»‘æš—å¤§æµ·æ—¶ï¼Œæ˜¯ä»€ä¹ˆæ”¯æ’‘ç€ä»–æœç€æ¸ºèŒ«å¸Œæœ›æ¸¸å»ï¼Œè€Œä¸æ˜¯å°±æ­¤æ”¾æ‰‹ï¼Œè‡ªæˆ•äºå¤§æµ·ã€‚ äººç”Ÿå¦‚æ­¤è‰°éš¾ï¼Œæ´»ä¸‹å»æ¯”æ­»äº¡æ›´éœ€è¦å‹‡æ°”ã€‚ æˆ‘æ¥è‡ªæš—æ— å¤©æ—¥çš„åœ°ç‹±ï¼Œåªæƒ³è§ä¸€è§é˜³å…‰ã€‚æˆ‘è¿˜æœ‰å¥å£®çš„èº«ä½“ã€æ¸Šåšçš„çŸ¥è¯†ã€ç­‰å¾…å‘æ˜çš„æ— å°½è´¢å¯Œï¼Œä»¥åŠï¼Œé¥®ä¸å®Œçš„æ¯ä¸­é…’ï¼Œæ€ä¸å°½çš„ä»‡äººå¤´ã€‚æ€ä¹ˆä¼šå°±è¿™æ ·æ”¾å¼ƒï¼Ÿ å–„è‰¯çš„è«é›·å°”å…ˆç”Ÿï¼Œä»–åœ¨æˆ‘è’™å†¤å…¥ç‹±åå››å¤„å¥”æ³¢ï¼Œå¯¼è‡´é­äººå«‰æ¨æ’æŒ¤å®¶é“ä¸­è½ï¼›æˆ‘ä»ä¼Šå¤«å ¡é€ƒç‹±å‡ºæ¥åï¼Œé‡åˆ°çš„å•çº¯æ°´æ‰‹é›…å„å¸ƒï¼Œä¸æ¯«æ²¡æœ‰æ€€ç–‘æˆ‘çš„èº«ä»½ï¼ŒæŠŠæˆ‘å½“åšåŒä¼´ä¸€æ ·èµ¤è¯šå¯¹å¾…ï¼›é‚£è½è‰ä¸ºå¯‡æ©æ€¨åˆ†æ˜çš„ç½—å‰ä¸‡å¸•ï¼Œæ¯”é“è²Œå²¸äººçš„è¡£å† ç¦½å…½å¥½ä¸Šä½•æ­¢åƒä¸‡å€ï¼›è¿˜æœ‰ä¸€å¿ƒä¸€æ„ä¾èµ–æˆ‘å…³å¿ƒæˆ‘çš„æµ·é»›ï¼Œè‹¦å‘½çš„å…¬ä¸»ã€‚ è¿™ä¸–ç•Œå¹¶æ²¡æœ‰é‚£ä¹ˆè’å‡‰ï¼Œé‚£ä¹ˆæ— è¯å¯æ•‘ã€‚ è¿™å‘¨åˆæ”¶åˆ°äº†å£¹ä¸ªæ‘å°çš„å®¶è®¿åé¦ˆï¼Œå°æœ‹å‹ç”Ÿæ´»å’Œå­¦ä¹ ä¸Šé‡åˆ°ä¸€äº›å›°éš¾ï¼Œé‚å†™ä¿¡é¼“åŠ±ï¼Œæœ›å…¶å¯ä»¥åº¦è¿‡éš¾å…³ã€‚ æˆ‘ä¸ç¥ç¦ä½ ä¸‡äº‹é¡ºåˆ©å‰è·¯å¹³å¦ï¼Œè€Œæ˜¯ç¥ä½ æœ‰ç›´é¢ä¸€åˆ‡å›°éš¾çš„å‹‡æ°”ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨å¤§ä»²é©¬å»ä¸–132å¹´åï¼Œäº2002å¹´11æœˆ30æ—¥ï¼Œä»–çš„çµæŸ©åœ¨æ—¶ä»»æ³•å›½æ€»ç»Ÿå¸Œæ‹‰å…‹çš„äº²è‡ªæŠ¤é€ä¸‹ï¼Œè¢«ç§»å…¥å…ˆè´¤ç¥ ï¼Œä»–æ˜¯ç¬¬70ä½è¿›å…¥å…ˆè´¤ç¥ çš„ä¼Ÿäººï¼Œä¹Ÿæ˜¯å…¶ä¸­çš„ç¬¬å…­åä½œå®¶ã€‚ä»–å°†é•¿çœ äºå·¦æ‹‰å’Œä»–ç”Ÿå‰æŒšå‹é›¨æœä¹‹é—´ã€‚ è«é›·å°”æ‹†å¼€ä¿¡å¿µé“ï¼šâ€”â€” â€œæˆ‘äº²çˆ±çš„é©¬è¥¿ç±³å…°ï¼Œâ€”â€”å²›è¾¹ä¸ºä½ ä»¬åœç€ä¸€åªå°å¸†èˆ¹ã€‚è´¾å¯å¸ƒä¼šå¸¦ä½ ä»¬åˆ°é‡Œçªå»ï¼Œé‚£é‡Œè¯ºç“¦è’‚åŸƒå…ˆç”Ÿæ­£åœ¨ç­‰ç€ä»–çš„å­™å¥³å„¿ï¼Œä»–å¸Œæœ›åœ¨ä»–é¢†ä»–çš„å­™å¥³åˆ°åœ£å›å‰å»ä»¥å‰ï¼Œèƒ½å…ˆä¸ºä½ ä»¬ç¥ç¦ï¼Œæˆ‘çš„æœ‹å‹ï¼Œè¿™ä¸ªæ´é‡Œçš„ä¸€åˆ‡ï¼Œæˆ‘åœ¨é¦™æ¦­ä¸½èˆå¤§é“çš„æˆ¿å­ï¼Œä»¥åŠæˆ‘åœ¨é»æ¸¯çš„åˆ«å¢…ï¼Œéƒ½æ˜¯çˆ±å¾·è’™Â·å”å¤ªæ–¯é€ç»™è«é›·å°”èˆ¹ä¸»çš„å„¿å­çš„ç»“å©šç¤¼ç‰©ã€‚ä¹Ÿè¯·ç»´å°”ç¦å°å§æ¥å—å…¶ä¸­çš„ä¸€åŠï¼Œå› ä¸ºï¼Œå¥¹çš„çˆ¶äº²ç°åœ¨å·²æˆäº†ä¸€ä¸ªç–¯å­ï¼Œå¥¹çš„å¼Ÿå¼Ÿå·²åœ¨ä¹æœˆé—´å’Œä»–çš„æ¯äº²ä¸€åŒå»ä¸–ï¼Œæˆ‘æƒ³è¯·å¥¹æŠŠå¥¹ä»å¥¹çˆ¶äº²å’Œå¥¹å¼Ÿå¼Ÿé‚£å„¿ç»§æ‰¿æ¥çš„é‚£ç¬”è´¢äº§æèµ ç»™ç©·äººã€‚è«é›·å°”ï¼Œå‘Šè¯‰é‚£ä½ä½ å°†ç»ˆç”Ÿçœ·é¡¾çš„å¤©ä½¿ï¼Œè¯·å¥¹æ—¶æ—¶ä¸ºä¸€ä¸ªäººç¥ˆç¥·ï¼Œé‚£ä¸ªäººï¼Œè±¡æ’’æ—¦ä¸€æ ·ï¼Œä¸€åº¦æ›¾è‡ªä»¥ä¸ºå¯ä¸ä¸Šå¸åŒ¹æ•Œï¼›ä½†ç°åœ¨ï¼Œä»–å·²å¸¦ç€åŸºç£å¾’çš„è‡ªå‘æ‰¿è®¤åªæœ‰ä¸Šå¸æ‹¥æœ‰è‡³é«˜æ— ä¸Šçš„æƒåŠ›å’Œæ— ç©·çš„æ™ºæ…§ã€‚æˆ–è®¸é‚£äº›ç¥ˆç¥·å¯ä»¥å‡è½»ä»–å¿ƒé‡Œæ‰€æ„Ÿåˆ°çš„å†…ç–šã€‚è‡³äºä½ ï¼Œè«é›·å°”ï¼Œæˆ‘å¯¹ä½ è¯´ä¸€å¥çŸ¥å¿ƒè¯ã€‚ä¸–ç•Œä¸Šæ—¢æ— æ‰€è°“å¿«ä¹æˆ–ä¹Ÿæ— æ‰€è°“ç—›è‹¦ï¼›åªæœ‰ä¸€ç§çŠ¶å†µä¸å¦ä¸€ç§çŠ¶å†µçš„æ¯”è¾ƒï¼Œå¦‚æ­¤è€Œå·²ã€‚åªæœ‰ä½“éªŒè¿‡ä¸å¹¸çš„äººæ‰èƒ½ä½“ä¼šæœ€å¤§çš„å¿«ä¹ã€‚è«é›·å°”ï¼Œæˆ‘ä»¬å¿…é¡»ä½“éªŒè¿‡æ­»çš„ç—›è‹¦ï¼Œæ‰èƒ½ä½“ä¼šåˆ°ç”Ÿçš„å¿«ä¹ã€‚ æ‰€ä»¥ï¼Œæˆ‘å¿ƒçˆ±çš„å­©å­ä»¬ï¼Œäº«å—ç”Ÿå‘½çš„å¿«ä¹å§ï¼æ°¸è¿œä¸è¦å¿˜è®°ï¼Œç›´è‡³ä¸Šå¸æ­éœ²äººçš„æœªæ¥å›¾æ™¯çš„é‚£ä¸€å¤©ä»¥å‰ï¼Œäººç±»çš„ä¸€åˆ‡æ™ºæ…§å°±åŒ…å«åœ¨è¿™ä¸¤ä¸ªè¯é‡Œé¢ï¼šâ€˜ç­‰å¾…â€™å’Œâ€˜å¸Œæœ›â€™ã€‚ ä½ çš„æœ‹å‹åŸºç£å±±ä¼¯çˆµçˆ±å¾·è’™Â·å”å¤ªæ–¯ã€‚â€","tags":[{"name":"å°è¯´","slug":"å°è¯´","permalink":"https://lilei.pro/tags/å°è¯´/"}]},{"title":"Android-Performance-Patterns-s4ep11-Culling","date":"2017-02-27T02:59:09.000Z","path":"2017/02/27/Android-Performance-Patterns-s4ep11-Culling/","text":"å»èŠœå­˜èï¼Œavoid donig unnecessary work.link è¿‡åº¦ç»˜åˆ¶è¿‡åº¦ç»˜åˆ¶ï¼ˆOverdrawï¼‰æ˜¯æŒ‡å¯¹ä¸å¯è§çš„éƒ¨åˆ†ä¹Ÿè¿›è¡Œç»˜åˆ¶çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾å·¦ä¾§ï¼Œåœ¨å¼€å‘è€…è®¾ç½®é‡Œå¯ä»¥æ‰“å¼€æŸ¥çœ‹å¼€å…³ã€‚ä¸€èˆ¬è§£å†³è¿‡åº¦ç»˜åˆ¶çš„æ–¹æ³•æ˜¯å‡å°‘å¸ƒå±€æ·±åº¦ï¼Œå»é™¤æ— ç”¨èƒŒæ™¯ã€‚ Draw with careåœ¨ç¼–å†™è‡ªå®šä¹‰æ§ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨canvas.cliprect(..)æ–¹æ³•æ¥ä½¿ä¸æ˜¾ç¤ºçš„Viewä¸è¿›è¡Œç»˜åˆ¶ã€‚ é“¾æ¥ï¼šhttps://www.youtube.com/watch?annotation_id=annotation_104709861&amp;feature=iv&amp;index=38&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;src_vid=KFklLqiEG6w&amp;v=vkTn3Ule4Ps å¤šé‡æ¡ä»¶æœç´¢æ¯”å¦‚è¦æœç´¢åŒæ—¶æ»¡è¶³ A &amp; B &amp; C ä¸‰ä¸ªæ¡ä»¶ä¸‹çš„ç»“æœï¼Œæœ‰ä¸¤ç§æ–¹æ³• æŠŠABCä¸‰ä¸ªæ¡ä»¶åŒæ—¶ä¼ å…¥ï¼Œä¸€æ­¥æœç´¢å‡ºç»“æœ å…ˆæœAï¼Œå¾—åˆ°ç»“æœé›†åï¼Œåœ¨ç»“æœé›†ä¸­æœç´¢Bï¼Œæœ€ååœ¨Bçš„ç»“æœé›†ä¸­æœç´¢C ä¸è¦æƒ³å½“ç„¶åœ°ä»¥ä¸ºä¸€å®šæ˜¯1æ›´é«˜æ•ˆï¼Œå®é™…æ“ä½œæ—¶è¦æ ¹æ®æœç´¢æœåŠ¡çš„ç‰¹å¾æ¥é€‰æ‹©ä¸¤è€…ä¸­çš„ä¸€ç§è¿›è¡Œã€‚2ä¹Ÿæ˜¯ä¸€ç§Cullingçš„æ€æƒ³ï¼Œé€å±‚æ·±å…¥ï¼ŒæŠ½ä¸å‰¥èŒ§ã€‚ ï¼ˆè§†é¢‘é‡Œæ˜¯ç”¨çš„Mc Collinså¤§å”çš„ç…§ç‰‡æ¥ä¸¾ä¾‹çš„ï¼Œå¾ˆæç¬‘ï¼‰ æå‡ç”¨æˆ·ä½“éªŒåœ¨ä½¿ç”¨åœ°ç†å®šä½ç­‰å®æ—¶æœåŠ¡æ—¶ï¼Œæ¶ˆå‡é‚£äº›ç”¨æˆ·ä¸éœ€å…³å¿ƒçš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·å±…ä½åœ¨Aåœ°ï¼Œé‚£å°±æ— éœ€æŠŠBåœ°çš„å®æ—¶çŠ¶å†µæ¨é€ç»™ç”¨æˆ·ï¼Œä½¿ç”¨åœ°å›¾è½¯ä»¶ä¸­çš„å®æ—¶è·¯å†µæŸ¥çœ‹å°±æ˜¯è¿™æ ·ï¼Œåªéœ€è¦è¯·æ±‚å¹¶å±•ç¤ºå½“å‰å±å¹•èŒƒå›´å†…çš„åŒºåŸŸè·¯å†µï¼Œè€Œä¸æ˜¯å…¨å¸‚ä¹ƒè‡³å…¨çœã€å…¨å›½ã€‚ ====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s4ep10 Approximation","date":"2017-02-22T01:27:48.000Z","path":"2017/02/22/Android-Performance-Patterns-s4ep10-Approximation/","text":"åœ¨ç”¨æˆ·æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹ï¼Œåˆç†åœ°è¿›è¡Œè¿‘ä¼¼è®¡ç®—ï¼Œä»¥åŠ å¿«å“åº”ï¼Œå¢å¼ºæ€§èƒ½ã€‚link Good enough. Letâ€™s ship it.åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç”¨æˆ·åªéœ€è¦70%çš„ç²¾ç¡®ç¨‹åº¦ï¼Œè¿™æ—¶åœ¨ç¨‹åºé‡Œæä¾›100%çš„ç²¾ç¡®ç¨‹åº¦æ˜¯ä¸åˆé€‚çš„ï¼Œè¿™ä¼šé¢å¤–å¢åŠ 30%çš„æˆæœ¬ã€‚ Position is not always helpfulä»¥ä¸€ä¸ªè·¯çº¿è§„åˆ’Appä¸ºä¾‹ï¼Œå¦‚æœç¼©æ”¾çº§åˆ«ä»…ä»…åˆ°çœï¼Œé‚£ä¹ˆå¯¹ç”¨æˆ·å®šä½çš„æ ‡ç¤ºåªéœ€è¦ç²¾ç¡®åˆ°åŸå¸‚å³å¯ï¼Œå®Œå…¨ä¸å¿…ç²¾ç¡®åˆ°è¡—é“é—¨ç‰Œå·ï¼Œå› ä¸ºå°±ç®—é€šè¿‡GPSç²¾ç¡®åˆ°äº†è¡—é“é—¨ç‰Œå·ï¼Œåœ¨çœçº§è§†å›¾ä¸Šè§‚å¯Ÿï¼Œä¹Ÿå¹¶ä¸ä¼šæœ‰ä»»ä½•åŒºåˆ«ã€‚åªæœ‰å½“ç”¨æˆ·æ”¾å¤§åœ°å›¾åˆ°è¡—é“ç¨‹åº¦æ—¶ï¼Œæ‰éœ€è¦æ›´ç²¾ç¡®çš„å®šä½ã€‚ Do less, when you can.Use less time, to calculate a less precision result, that still meets the userâ€™s current need. åŒæ ·ä»¥ä¸Šæ–¹çš„è·¯çº¿è§„åˆ’Appä¸ºä¾‹ï¼Œå½“ç”¨æˆ·ä»¥å›ºå®šé€Ÿåº¦åœ¨é«˜é€Ÿå·¡èˆªæ—¶ï¼Œå¯ä»¥åŸºäºç”¨æˆ·è½¦é€Ÿè®¡ç®—ï¼Œå¾—åˆ°ç”¨æˆ·åœ¨å…¬è·¯ä¸Šçš„å¤§æ¦‚ä½ç½®ï¼Œä¹Ÿæ— éœ€æ—¶æ—¶é€šè¿‡GPSå®šä½ã€‚å½“ç”¨æˆ·æ¥è¿‘POIï¼ˆPoint of Interestï¼‰æ—¶ï¼Œæ‰å”¤èµ·GPSã€‚ å›¾åƒä¸Šçš„è¿‘ä¼¼è®¡ç®—åœ¨éœ€è¦å±•ç¤ºå›¾ç‰‡çš„åœºæ™¯ï¼Œå¦‚æœæ— éœ€å±•ç¤ºå¤§å›¾ï¼Œåˆ™åªåŠ è½½ä½åˆ†è¾¨ç‡ä¸‹çš„å›¾ç‰‡ï¼Œè¿™æ ·å¯ä»¥èŠ‚çº¦å†…å­˜å¹¶ä¸”åŠ å¿«åŠ è½½é€Ÿåº¦ã€‚ä¸€ä¸ªä¾‹å­å°±æ˜¯å¾®ä¿¡é‡Œé¢å¯Ÿçœ‹å¯¹è¯ä»¥åŠæœ‹å‹åœˆçš„å›¾ç‰‡ã€‚ ====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s4ep9 Caching","date":"2017-02-20T02:11:07.000Z","path":"2017/02/20/Android-Performance-Patterns-s4ep9-Caching/","text":"æœ¬èŠ‚å†…å®¹çº¯ç†è®ºï¼Œæ¦‚æ‹¬æˆä¸€å¥è¯ï¼šCacheå¾ˆé‡è¦ï¼link Caches are FASTè®¡ç®—æœºå¯ä»¥å¯¹Cacheè¿›è¡Œå¿«é€Ÿçš„è¯»å–ï¼ŒåŸå› åœ¨äºï¼Œè¯»å–Cacheæ—¶æ˜¯CPUç›´æ¥æ“ä½œRAMï¼›å¦‚æœä¸å€ŸåŠ©Cacheï¼ŒCPUéœ€è¦é—´æ¥ä¸ç¡¬ç›˜é€šä¿¡ï¼Œè€Œç¡¬ç›˜çš„è¯»å†™é€Ÿåº¦æ˜¯æ¯”ä¸ä¸ŠRAMçš„ã€‚ åœ¨æœ‰Cacheçš„æ—¶å€™ï¼Œé€šå¸¸æƒ…å†µä¸‹ç¬¬ä¸€æ¬¡è¯»å–æ˜¯ä»ç¡¬ç›˜åŠ è½½ï¼Œåç»­çš„è¯»å–å°±å…¨éƒ½èµ°Cacheäº†ã€‚ When to cache?åœ¨å¾ªç¯ä¸­é‡å¤æ‰§è¡Œå¹¶ä¸”ç»“æœä¸å˜çš„è®¡ç®—ï¼Œå¯ä»¥å°†å…¶æŠ½å‡ºæ¥ä¿å­˜åœ¨Cacheä¸­ã€‚ä¸è¦åœ¨å¾ªç¯ä¸­è¿›è¡Œé‡å¤è®¡ç®—ï¼Œè¿™æ˜¯ç¼–ç¨‹ä¸­å¿…é¡»éµå®ˆçš„ä¸€é¡¹åŸºæœ¬åŸåˆ™ã€‚ Caches help manage resourcesè¿™éƒ¨åˆ†å¼ºè°ƒçš„æ˜¯Cacheæ›´æ–°ç®—æ³•ï¼ŒLRUæ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ Caching by pre-computingæå‰æ‰§è¡Œè§£æç¨‹åºï¼Œé¢„å¤„ç†ä½“é‡å¤§çš„æŸ¥æ‰¾è¡¨æˆ–è€…XMLæ–‡ä»¶ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å¯ä»¥å¾ˆå¿«åœ°è·å–æƒ³è¦çš„ç»“æœï¼Œè€Œä¸æ˜¯åŒæ­¥ç­‰å¾…ã€‚ ====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"å…³äºé™†é‡‘æ‰€Appåœ¨å°ç±³æ‰‹æœºä¸Šæ— æ³•å±•ç¤ºé¡¹ç›®è¯¦æƒ…é¡µçš„é—®é¢˜åŸå› ä¸è§£å†³åŠæ³•","date":"2017-02-17T10:12:21.000Z","path":"2017/02/17/Lu-App-Not-Work-On-Mi-Devices/","text":"åœ¨ä½¿ç”¨é™†é‡‘æ‰€Androidç‰ˆæœ¬çš„Appæ—¶ï¼Œè¿›å…¥ä»»ä½•ç†è´¢äº§å“è¯¦æƒ…é¡µï¼Œéƒ½æ˜¾ç¤ºä¸ºç©ºç™½ï¼Œæ— æ³•è¿›è¡ŒæŸ¥é˜…ä¸è´­ä¹°ã€‚ æƒ…æ™¯å†ç° å°ç±³ç³»ç»Ÿæ˜¯å‡çº§åçš„æœ€æ–°ç‰ˆWebkitå†…æ ¸ç‰ˆæœ¬ï¼š54.0.2840.85 å‘ç°æˆªå›¾ä¸­æ— æ³•æ˜¾ç¤ºäº§å“è¯¦æƒ…çš„é—®é¢˜åï¼Œæˆ‘è”ç³»äº†é™†é‡‘æ‰€çš„äººå·¥åœ¨çº¿å®¢æœï¼Œåœ¨æè¿°é—®é¢˜å¹¶æä¾›æˆªå›¾åï¼Œå®¢æœå‘ŠçŸ¥éœ€è¦1åˆ°2ä¸ªå·¥ä½œæ—¥ç»™å‡ºåé¦ˆã€‚å®é™…ä¸Šå¹¶æ²¡æœ‰é‚£ä¹ˆä¹…ï¼Œæˆ‘æ˜¯æ—©ä¸Šåé¦ˆçš„é—®é¢˜ï¼Œä¸‹åˆä¸´è¿‘ä¸‹ç­æ—¶å°±æ”¶åˆ°äº†å®¢æœçš„å›å¤ç”µè¯ã€‚ å®¢æœåº”è¯¥æ˜¯ä»å¼€å‘é‚£é‡Œå¾—åˆ°äº†åé¦ˆé‚®ä»¶ï¼Œåœ¨è¿™é‡Œè¡¨æ‰¬ä¸€ä¸‹é™†é‡‘æ‰€å“åº”é—®é¢˜çš„é€Ÿåº¦ã€‚æ— æ³•æ˜¾ç¤ºçš„åŸå› åœ¨äºå°ç±³ç³»ç»Ÿé‡Œä½¿ç”¨çš„WebViewå†…æ ¸ç‰ˆæœ¬æ˜¯53æˆ–è€…54ï¼Œè¿™ä¸¤ä¸ªç‰ˆæœ¬å­˜åœ¨bugï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆâ€œç®€å•â€ï¼Œåªè¦æŠŠå®ƒå‡çº§æˆ55å°±å¯ä»¥äº†ã€‚è¿™é‡Œçš„â€œç®€å•â€ä¸ºä»€ä¹ˆæ‰“ä¸Šäº†å¼•å·å‘¢ï¼Ÿå› ä¸ºå‡çº§WebViewéœ€è¦æ‰‹æœºä¸Šè£…æœ‰GooglePlayï¼Œè€Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå›½å†…çš„Androidæ‰‹æœºç³»ç»Ÿé‡Œï¼Œå®‰è£…GooglePlayçš„å°‘ä¹‹åˆå°‘ã€‚ä¸è¿‡ä»€ä¹ˆä¹Ÿéš¾ä¸ä½å¹¿å¤§çš„ç½‘æ°‘æœ‹å‹å¯¹å¢™å¤–ä¸–ç•Œçš„å‘å¾€ï¼Œå†…äº‹ä¸å†³é—®ç™¾åº¦ï¼Œè‡ªç„¶å¯ä»¥æ‰¾åˆ°å®‰è£…çš„é€”å¾„ã€‚ è§£å†³é€”å¾„å…ˆå®‰è£…Googleæ¡†æ¶ï¼Œå†å®‰è£…GooglePlayåï¼Œåœ¨GooglePlayä¸­æœç´¢WebViewè¿›è¡Œå‡çº§å®‰è£…ï¼Œå†æ‰“å¼€é™†é‡‘æ‰€â€”â€”duangï¼é—®é¢˜è¿åˆƒè€Œè§£äº†ã€‚ é—®é¢˜èµ·å› æ¢ç©¶åœ¨ç™¾åº¦ä¸Šæœä¸å‡ºä»»ä½•å›½å†…å¼€å‘è€…å¯¹è¿™ä¸ªé—®é¢˜çš„æè¿°ï¼æŒ‰è¯´ä½†å‡¡æ˜¯ä½¿ç”¨äº†å°ç±³æ‰‹æœºï¼Œåªè¦å‡çº§åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼Œåœ¨æ‰“å¼€WebViewæ—¶éƒ½æœ‰å¾ˆå¤§å¯èƒ½é­é‡è¿™ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå†…ç½‘ä¸Šæœä¸åˆ°ï¼Œæˆ‘ä¹Ÿå¾ˆè´¹è§£ã€‚ è€Œåœ¨Googleä¸Šï¼Œå¾ˆå®¹æ˜“å°±æ‰¾åˆ°ä¸‹é¢è¿™ç¯‡ç”±Chromiumå®˜æ–¹å‘å¸ƒçš„æ–‡æ¡£ï¼šWebView FAQ for Symantec Certificate Transparency Issue æˆ‘åœ¨è¿™é‡Œä¾ä¸ªäººç†è§£ç®€å•æè¿°ä¸€ä¸‹ï¼Œå»ºè®®å„ä½ç›´æ¥é˜…è¯»åŸæ–‡ï¼Œä¼šè®¤è¯†å¾—æ›´åŠ å…¨é¢ã€‚ æ ¹æœ¬åŸå› ä»WebViewçš„53ç‰ˆæœ¬å¼€å§‹ï¼Œå®ƒè¦æ±‚æ‰€æœ‰è¢«Symantecï¼ˆèµ›é—¨é“å…‹ï¼‰ç­¾ç½²çš„è¯ä¹¦ï¼Œå¿…é¡»æ‰§è¡ŒChromeè¯ä¹¦æ”¿ç­–ã€‚ä½†æ˜¯ï¼ŒChromeè‡ªå·±åœ¨è¿›è¡ŒéªŒè¯æ—¶ï¼Œç«Ÿç„¶å‡ºé”™äº†ï¼ï¼ï¼åœ¨åŠ è½½å…·æœ‰Symantecè¯ä¹¦çš„é¡µé¢æ—¶ï¼Œä¼šå¯¼è‡´onReceivedSslError()çš„å›è°ƒï¼Œé¡µé¢æ˜¾ç¤ºä¸€ç‰‡ç©ºç™½ã€‚ è¿™ç®—ä¸ç®—å¼„å·§æˆæ‹™ï¼Ÿ å½±å“èŒƒå›´è‡ªAndroid Lç‰ˆæœ¬å¼€å§‹ï¼ŒWebViewç‰ˆæœ¬53å’Œ54ä¼šå—åˆ°å½±å“ï¼Œ55å¼€å§‹æ¢å¤æ­£å¸¸ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé—®é¢˜å¹¶éæ˜¯ç«‹åˆ»æ˜¾ç°çš„ï¼Œè€Œä¼šåœ¨WebViewçš„build dateåå‘¨ä¹‹åï¼Œæ‰æš´éœ²å‡ºæ¥ã€‚Buildç‰ˆæœ¬ä¸è¿‡æœŸæ—¶é—´å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨æˆ‘åˆšå‡çº§Androidç³»ç»Ÿæ—¶å¹¶æ²¡æœ‰å‘ç”Ÿè¿™ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯åœ¨ä¸Šå‘¨ä½¿ç”¨é™†é‡‘æ‰€Appæ—¶æ‰æ˜¾éœ²å‡ºæ¥ã€‚ Build ID Expiration Date 54.0.2840.68 12/27/2016 54.0.2840.85 1/7/2017 ç°èº«è¯´æ³•ä¸ºäº†éªŒè¯ä¸Šæ–‡çš„æƒ…å†µï¼Œæˆ‘åœ¨ä»£ç ä¸­ä½¿ç”¨getPackageManager().getPackageInfo(&quot;com.google.android.webview&quot;, 0).versionCodeå¯Ÿçœ‹å°ç±³æ‰‹æœºçš„WebViewç‰ˆæœ¬å·ï¼Œæœç„¶æ˜¯54.0.2840.85ï¼Œä¸å¹¸ä¸­æ‹›ã€‚ åœ¨é€šè¿‡GooglePlayå®‰è£…æœ€æ–°çš„55.0.2883.91ç‰ˆæœ¬åï¼Œå†æ‰“å¼€é™†é‡‘æ‰€Appï¼Œä¸€åˆ‡æ­£å¸¸äº†ã€‚ Q &amp; AQï¼šAndroid Nç³»ç»Ÿä¹Ÿä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼ŸAï¼šè‡ªLå¼€å§‹çš„ç³»ç»Ÿéƒ½ä¼šé‡åˆ°ï¼Œè€ŒNç³»ç»Ÿç”±äºä¸æ˜¯ä½¿ç”¨å•ç‹¬çš„WebViewï¼Œè€Œæ˜¯ä½¿ç”¨ç”±Chromeæä¾›çš„WebViewï¼Œå› æ­¤åªè¦å‡çº§Chromeå°±å¯ä»¥ã€‚ï¼ˆåœ¨Chromeçš„å±æ€§é‡Œå¯ä»¥çœ‹åˆ°Webviewç‰ˆæœ¬ï¼‰ Qï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ä¸ºæœªè¿‡æœŸçš„æ—¶é—´ï¼Œæ¥é¿å…è¿™ä¸ªé—®é¢˜å—ï¼ŸAï¼šç¬”è€…äº²æµ‹å¯ä»¥ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆåšï¼Œæœ‰å¯èƒ½å¯¼è‡´æ›´å¤šæ½œåœ¨çš„é—®é¢˜ã€‚ Qï¼šå¯å¦é€šè¿‡UserAgentå—…æ¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŸAï¼šéªŒè¯å¤±è´¥å‘ç”Ÿåœ¨è¿æ¥TLSå±‚æ—¶ï¼Œè¿™æ—¶è¿˜æ²¡æœ‰å‘é€UserAgentä¿¡æ¯ï¼Œæ„å‘³ç€é¡µé¢æŒ‚æ‰æ—¶å€™æ˜¯è¿˜ä¸çŸ¥é“UAçš„ã€‚å¦‚æœä¸€å®šè¦åœ¨TLSå±‚è·å–UAä¹Ÿä¸æ˜¯æ²¡æœ‰åŠæ³•ï¼Œä½†è¿™ä¹ˆåšè¿‡äºå¤æ‚ï¼Œå¹¶ä¸”ä¸å®‰å…¨ã€‚ Qï¼šå¼€å‘è€…æ€æ ·ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼ŸAï¼šå”¯ä¸€çš„ä¿®å¤åŠæ³•æ˜¯æç¤ºç”¨æˆ·æ›´æ–°WebViewï¼Œå½“å‘ç”Ÿé—®é¢˜æ—¶ï¼ŒWebViewä¼šå‘å‡ºä¸€ä¸ªonReceivedSslError()å›è°ƒï¼Œä½†æ˜¯å›è°ƒé‡Œå¹¶æ²¡æœ‰è¶³ä»¥è¯´æ˜é—®é¢˜çš„æç¤ºä¿¡æ¯ã€‚å¹¶ä¸”é€šè¿‡è¿™ä¸ªå›è°ƒæ¥å›é¿é—®é¢˜ï¼ˆæ¯”å¦‚åœæ­¢ä½¿ç”¨è¯ä¹¦ï¼‰ä¼šå¯¼è‡´æ›´å¤šå®‰å…¨éšæ‚£ï¼Œå¼ºçƒˆä¸å»ºè®®è¿™ä¹ˆåšã€‚ ä¸€äº›æ€è€ƒæ•´ä¸ªé—®é¢˜çš„æè¿°ä¸è§£é‡Šçœ‹ä¸‹æ¥ï¼Œè¿˜çœŸä¸æ˜¯é™†é‡‘æ‰€å›¢é˜Ÿçš„é”…â€”â€”å¥½ä¹…æ²¡è§å¯¸å¿—äº†ï¼Œå¦‚æœå½“é¢é—®ä»–è¿™ä¸ªäº‹ï¼Œä»–ä¸€å®šæ‘†ç€æ‰‹è¯´ï¼šè¿™ä¸ªé”…æˆ‘ä¸èƒŒï¼è¦æ€ªå°±æ€ªAndroidç¢ç‰‡åŒ–å¤ªä¸¥é‡ï¼Œå°¤å…¶æ˜¯å›½å†…å¸‚åœºï¼Œå„å¤§å‚å•†æŠŠåŸç”Ÿç³»ç»Ÿåšåšç¾åŒ–ï¼Œæ”¹å¤´æ¢é¢ï¼Œå†é¢„è£…ä¸€å¤§å †åƒåœ¾è½¯ä»¶ï¼Œå°±æ‘‡èº«ä¸€å˜æˆäº†è‡ªå·±çš„ä¸œè¥¿ã€‚è€Œå…³é”®ç‰¹æ€§åˆæ›´æ–°ä¸åŠæ—¶ï¼Œå°±å¯¼è‡´äº†ä¸Šæ–‡å‘ç”Ÿçš„é—®é¢˜ã€‚ Androidç³»ç»Ÿçš„å¼€æ”¾ç‰¹æ€§æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå°±çœ‹æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨å®ƒã€‚ ====Ending====","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"}]},{"title":"è§£å†³Android Studioå¯¼å…¥é¡¹ç›®æ—¶é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜","date":"2017-02-17T02:41:49.000Z","path":"2017/02/17/Fix-Slow-Inilizating-Project-In-AS/","text":"å½“æˆ‘ä»¬é€šè¿‡Android Studioå¯¼å…¥æ–°é¡¹ç›®æ—¶ï¼Œå¾€å¾€éœ€è¦åŒæ­¥ä¸‹è½½æ–°é¡¹ç›®æ‰€éœ€çš„gradleç‰ˆæœ¬ï¼Œè¿™æ˜¯å¯¼è‡´åŠ è½½è¿‡æ…¢çš„åŸå› ã€‚ å¡ä½çš„åŸå› é¡¹ç›®éœ€è¦ç‰¹å®šç‰ˆæœ¬çš„gradleè¿›è¡Œæ„å»ºï¼Œè€Œæœ¬åœ°æ²¡æœ‰å¯¹åº”ç‰ˆæœ¬çš„gradleï¼Œéœ€è¦ä»ç½‘ç»œä¸‹è½½ï¼ˆ http://services.gradle.org/distributions ï¼‰ï¼Œç”±äºå¤§å®¶å¿ƒçŸ¥è‚šæ˜çš„åŸå› ï¼Œä¸‹è½½é€Ÿåº¦éå¸¸æ…¢ï¼›è€Œä¸”ï¼Œé…ç½®çš„shadowsockså¯¹æ­¤ä¼¼ä¹ä¸èµ·ä½œç”¨ã€‚è¿™å°±å¯¼è‡´äº†å¯¼å…¥é¡¹ç›®æ—¶ä¸€ç›´åœç•™åœ¨â€œBuilding gradle project infoâ€ã€‚ è§£å†³åŠæ³•æœ¬ä»¥ä¸ºå›½å†…æœ‰å¯¹åº”çš„é•œåƒç«™ç‚¹ï¼Œå¯ä»¥é…ç½®ï¼Œä½†å´æ²¡æœ‰æ‰¾åˆ°ã€‚è¿™é‡Œå…ˆé€šè¿‡æµè§ˆå™¨ä¸‹è½½ä¸‹æ¥gradle-xx.zipï¼Œç„¶åæ›¿æ¢æœ¬åœ°æ–‡ä»¶æ¥è¿›è¡Œã€‚ ç¬¬ä¸€æ­¥ï¼šåœ¨ http://services.gradle.org/distributions ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬é€šè¿‡å·²é…ç½®ä»£ç†çš„æµè§ˆå™¨ä¸‹è½½ï¼Œæˆ–è€…è¿…é›·ï¼ˆè¦é¿å…å†æ¬¡ä¸Šæ¼”XcodeGhostäº‹ä»¶ï¼‰ã€‚ä¸‹è½½å®ŒæˆåæŠŠzipåŒ…ä¸¢è¿›æœ¬åœ°gradleä»“åº“é‡Œã€‚ä»¥gradle-2.14.1-allä¸ºä¾‹ï¼Œåœ¨æˆ‘çš„ç”µè„‘ä¸Šè·¯å¾„æ˜¯~/.gradle/wrapper/dists/gradle-2.14.1-all/8bnwg5hd3w55iofp58khbp6yv/ã€‚ ç¬¬äºŒæ­¥ï¼ˆå¯é€‰ï¼‰ï¼šä¿®æ”¹é¡¹ç›®gradleç‰ˆæœ¬å¦‚æœä¸‹è½½çš„gradleç‰ˆæœ¬å’Œé¡¹ç›®æ–‡ä»¶é‡Œå£°æ˜çš„ç‰ˆæœ¬ä¸åŒï¼Œéœ€è¦ä¿®æ”¹é¡¹ç›®é‡Œä¾èµ–çš„gradleç‰ˆæœ¬ã€‚æœ‰ä¸¤ä¸ªæ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼Œåˆ†åˆ«æ˜¯gradle/wrapper/gradle-wrapper.propertieså’Œbuild.gradle gradle/wrapper/gradle-wrapper.propertiesä¿®æ”¹distributionUrl 12345distributionBase=GRADLE_USER_HOMEdistributionPath=wrapper/distszipStoreBase=GRADLE_USER_HOMEzipStorePath=wrapper/distsdistributionUrl=https\\://services.gradle.org/distributions/gradle-2.14.1-all.zip build.gradleä¿®æ”¹classpath 12345678910111213buildscript &#123; repositories &#123; maven &#123; url &quot;http://depot.sankuai.com/nexus/content/groups/public/&quot; &#125; &#125; dependencies &#123; classpath &apos;com.android.tools.build:gradle:2.2.0&apos; // NOTE: Do not place your application dependencies here; they belong // in the individual module build.gradle files &#125;&#125; å®Œæˆä»¥ä¸Šæ­¥éª¤åé‡å¯ASï¼Œå°±å¯ä»¥é¡ºåˆ©åœ°æ‰“å¼€é¡¹ç›®äº†ã€‚ ===Ending===","tags":[{"name":"Android Studio","slug":"Android-Studio","permalink":"https://lilei.pro/tags/Android-Studio/"}]},{"title":"AndroidåŸºç¡€çŸ¥è¯†ä¹‹Viewç»˜åˆ¶å†æ€è€ƒ","date":"2017-02-15T07:09:22.000Z","path":"2017/02/15/View-Drawing-In-Android/","text":"è¿‘æ—¥è‡ªå·±åœ¨å†™ä¸€ä¸ªç»“åˆäº†ä¸‹æ‹‰åˆ·æ–°&amp;ViewPageråŠŸèƒ½äºä¸€ä½“çš„è‡ªå®šä¹‰æ§ä»¶ï¼Œé¡ºä¾¿é‡æ¸©äº†Viewç»˜åˆ¶çš„æµç¨‹ã€‚ æœ¬æ–‡ã€å¾…å®Œæˆã€‘å¯èƒ½æ˜¯ä½ æ‰€çœ‹è¿‡æœ€ç®€å•æ˜“æ‡‚çš„Viewç»˜åˆ¶æµç¨‹è§£è¯»ã€‚ å‡ ä¸ªé‡è¦æ–¹æ³•å­¦ä»¥è‡´ç”¨ï¼šå®ç°ä¸€ä¸ªç®€å•çš„PullToRefreshå®¹å™¨","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"}]},{"title":"AndroidåŸºç¡€çŸ¥è¯†ä¹‹äº‹ä»¶ä¼ é€’","date":"2017-02-15T07:03:55.000Z","path":"2017/02/15/Android-Touch-Event-Delivery/","text":"åœ¨Androidç³»ç»Ÿä¸­ï¼Œäº‹ä»¶çš„ä¼ é€’å’Œå¤„ç†æ˜¯è®©äººå¾ˆå®¹æ˜“å›°æƒ‘çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œåœ¨å¤„ç†å¤æ‚ç•Œé¢äº‹ä»¶æ—¶ï¼Œå¦‚æœå¯¹è¿™æ–¹é¢æŒæ¡ä¸æ‰å®ï¼Œä¼šé‡åˆ°å¾ˆå¤šåƒå¥‡ç™¾æ€ªçš„é—®é¢˜ã€‚ æœ¬æ–‡å¯èƒ½æ˜¯ä½ è¯»è¿‡çš„å¯¹äº‹ä»¶ä¼ é€’ç³»ç»Ÿæœ€ç®€å•æ˜“æ‡‚çš„è§£è¯»ã€‚ Androidäº‹ä»¶ç³»ç»Ÿæ¦‚è¿°ä»»ä½•UIç•Œé¢ç³»ç»Ÿçš„è®¾è®¡ï¼Œéƒ½ä¸€å®šç¦»ä¸æ¥äº‹ä»¶ä¼ é€’ï¼ŒAndroidç³»ç»Ÿå½“ç„¶ä¸ä¾‹å¤–ã€‚ è¦ç†è§£Androidä¸­çš„äº‹ä»¶æœºåˆ¶ï¼Œéœ€è¦ç‰¢è®°ä¸‹é¢ä¸¤ä¸ªåŸºæœ¬åŸåˆ™ï¼š äº‹ä»¶ä¼ é€’ï¼Œä»å¤–å‘å†…ã€‚ äº‹ä»¶æ¶ˆè´¹ï¼Œä»å†…å‘å¤–ã€‚ äº‹ä»¶ä¼ é€’å…ˆè§¦å‘å¤–å±‚ViewGroupçš„dispatchTouchEventæ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨äº‹ä»¶çš„æ•´ä¸ªå¤„ç†æµç¨‹ç»“æŸåå¼‚æ­¥è¿”å›ï¼›æ¥ç€è§¦å‘å¤–å±‚ViewGroupçš„onInterceptTouchEventæ–¹æ³•ï¼Œå¦‚æœè¦æ‹¦æˆªè¿™ä¸ªäº‹ä»¶ï¼Œä¸è®©å®ƒç»§ç»­å‘ä¸‹ä¼ é€’ï¼Œå°±åœ¨è¿™ä¸ªæ–¹æ³•é‡Œå°±è¦è¿”å›trueï¼›å½“äº‹ä»¶ç»§ç»­å‘ä¸‹ä¼ é€’æ—¶ï¼Œå†…å±‚Viewå…ˆè§¦å‘dispatchTouchEventï¼Œæ¥ç€è¿›è¡Œåˆ°äº‹ä»¶æ¶ˆè´¹ç¯èŠ‚ã€‚ äº‹ä»¶æ¶ˆè´¹å¦‚æœå¤–å±‚ViewGroupåœ¨onInterceptTouchEventæ–¹æ³•é‡Œè¿”å›trueï¼Œé‚£ä¹ˆäº‹ä»¶ä»…ç”±å¤–å±‚è¿›è¡Œæ¶ˆè´¹ï¼Œå³è¿›å…¥onTouchEventæ–¹æ³•é‡Œï¼Œæ¶ˆè´¹å®Œæˆåï¼Œè¿›è¡ŒdispatchTouchEventç»“æœå›è°ƒï¼Œäº‹ä»¶æ¶ˆè´¹æ‰äº†åˆ™è¿”å›trueï¼Œåä¹‹è¿”å›falseã€‚ å¦‚æœå¤–å±‚ViewGroupåœ¨onInterceptTouchEventæ–¹æ³•é‡Œè¿”å›falseï¼Œäº‹ä»¶ç»§ç»­å‘ä¸‹ä¼ é€’ï¼Œå†…å±‚Viewåœ¨å®ƒçš„onTouchEventé‡Œè¿”å›å¤„ç†ç»“æœï¼Œå†æŠŠç»“æœäº¤ç»™å†…å±‚Viewçš„dispatchTouchEventæ–¹æ³•è¿”å›ã€‚å¦‚æœå†…å±‚æ¶ˆè´¹äº†äº‹ä»¶ï¼ˆè¿”å›trueï¼‰ï¼Œåˆ™å¤–å±‚ä¸ä¼šè§¦å‘onTouchEventæ–¹æ³•ï¼›å¦‚æœå†…å±‚æ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ï¼ˆè¿”å›falseï¼‰ï¼Œé‚£ä¹ˆäº‹ä»¶äº¤ç”±å¤–å±‚æ¶ˆè´¹ï¼Œä¼šè§¦å‘å¤–å±‚ViewGroupçš„onTouchEventæ–¹æ³•ã€‚ ä¸Šä¾‹çš„è¡¥å……è¯´æ˜ä¸Šä¾‹çš„case Bï¼Œè¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œæ˜¯å¤–å±‚ViewGroupä¸å¯¹äº‹ä»¶è¿›è¡Œæ‹¦æˆªï¼Œè€Œæ˜¯åœ¨å†…å±‚Viewçš„onTouchEventä¸­è¿”å›falseï¼Œè¿™æ ·äº‹ä»¶ä¾æ—§ä¼šäº¤ç”±å¤–å±‚ViewGroupçš„onTouchEventè¿›è¡Œæ¶ˆè´¹ã€‚ åŒç†ï¼Œcase Dä¹Ÿæœ‰å¦å¤–çš„å†™æ³•ï¼Œèªæ˜çš„è¯»è€…ï¼Œä½ ä¸€å®šå·²ç»çŒœå‡ºæ¥äº†ã€‚ å‡ ä¸ªå…³é”®æ–¹æ³•ä¸Šæ–‡ä¸­å·²ç»çœ‹å‡ºï¼ŒAndroidç³»ç»Ÿä¸­å¯¹äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œä¸»è¦æ˜¯dispatchTouchEventã€onInterceptTouchEventã€onTouchEventè¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œä¸‹é¢é€ä¸€è¿›è¡Œåˆ†æã€‚ dispatchTouchEventViewå¤„ç†äº‹ä»¶æ—¶ï¼Œæœ€å…ˆè¿›å…¥çš„æ–¹æ³•ï¼Œç›´åˆ°äº‹ä»¶å¤„ç†å®Œæˆåï¼Œæ‰ä¼šè¿”å›trueï¼ˆåœ¨å½“å‰Viewæˆ–è€…å†…éƒ¨Viewè¿›è¡Œäº†æ¶ˆè´¹ï¼‰æˆ–è€…falseï¼ˆæœªè¿›è¡Œæ¶ˆè´¹ï¼‰ã€‚ å¯¹äºViewï¼Œè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸onTouchEventè¿”å›å€¼ç›¸åŒã€‚ å¯¹äºViewGroupï¼Œåªè¦å†…éƒ¨æœ‰ä»»æ„ä¸€ä¸ªViewæ¶ˆè´¹äº†äº‹ä»¶ï¼Œåœ¨ViewGroupçš„è¿™ä¸ªæ–¹æ³•å°±ä¼šè¿”å›trueã€‚ onInterceptTouchEventè¿™ä¸ªæ–¹æ³•åªå­˜åœ¨äºViewGroupä¸­ï¼Œæ§åˆ¶æ˜¯å¦å°†å½“å‰æ—¶é—´æ‹¦æˆªä¸‹æ¥ä¸å‘ä¸‹ä¼ é€’ï¼Œåªç»™è‡ªå·±æ¶ˆè´¹ã€‚ éœ€è¦æ³¨æ„ä¸€æ—¦ACTION_DOWNè¢«æ‹¦æˆªï¼Œåç»­çš„ACTION_MOVEå’ŒACTION_UPæ ¹æœ¬ä¸ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•é‡Œã€‚ onTouchEventå¤„ç†touchäº‹ä»¶çš„åœ°æ–¹ï¼Œå¦‚æœè¦å¤„ç†çš„æ˜¯clickäº‹ä»¶ï¼Œä¸è¦å†™åœ¨onTouchEventæ–¹æ³•é‡Œï¼Œè€Œæ˜¯åº”è¯¥å†™åœ¨performClickä¸­ã€‚ æ¶ˆè´¹äº†äº‹ä»¶åˆ™è¿”å›trueï¼Œæ¶ˆè´¹åçš„äº‹ä»¶ç«‹å³åºŸå¼ƒï¼Œä¸ä¼šå†äº¤ç”±å…¶å®ƒViewæ¶ˆè´¹ã€‚ requestDisallowInterceptTouchEventä¸Šæ–‡è®²åˆ°ï¼Œå¤–å±‚çš„ViewParentå¯ä»¥é€šè¿‡onInterceptTouchEventæ¥æ‹¦æˆªäº‹ä»¶ï¼Œä¸ç»§ç»­å‘ä¸‹ä¼ é€’ã€‚ä¸Šæœ‰æ”¿ç­–ä¸‹æœ‰å¯¹ç­–ï¼Œå†…å±‚ViewåŒæ ·å¯ä»¥æ‹’ç»å¤–å±‚ViewGroupçš„è¿™ç§è¡Œä¸ºï¼Œè¿™å°±æ˜¯requestDisallowInterceptTouchEvent(boolean)æ–¹æ³•æ‰€åšçš„äº‹ã€‚ è¿™ä¸ªæ–¹æ³•ä½äºViewParent.javaä¸­ï¼Œå¯ä»¥é€šè¿‡View.getParent()æ¥è·å–æŸä¸ªViewçš„Parentã€‚è¯¥æ–¹æ³•ä¼šåº”ç”¨åˆ°å½“å‰Viewçš„æ‰€æœ‰ç¥–å…ˆViewGroupï¼Œè€Œä¸ä»…ä»…æ˜¯çˆ¶äº²ã€‚æ‰€æœ‰æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚çš„Parentå¿…é¡»åœæ­¢å®ƒä»¬çš„Interceptè¡Œä¸ºï¼Œç›´åˆ°å½“å‰touchäº‹ä»¶ç»“æŸï¼ˆæ”¶åˆ°upä¿¡å·æˆ–è€…cancelä¿¡å·ï¼‰ã€‚ å­¦ä»¥è‡´ç”¨ï¼šè§£å†³åœ¨ScrollViewä¸­åµŒå¥—ListViewçš„é—®é¢˜æœ‰äº†è¿™äº›çš„çŸ¥è¯†å‚¨å¤‡ï¼Œæˆ‘ä»¬æ¥å®æ“ä¸€ä¸‹ï¼Œè§£å†³ä¸€ä¸ªå¾ˆå®¹æ˜“å‡ºç°çš„caseï¼šåœ¨ScrollViewä¸­åµŒå¥—ListViewæ—¶ï¼ŒListViewæ— æ³•è¿›è¡Œä¸Šä¸‹æ»‘åŠ¨ï¼Œå¯¼è‡´é¡¹ç›®å±•ç¤ºä¸å®Œæ•´ã€‚ é¦–å…ˆï¼Œåœ¨ScrollViewä¸­åµŒå¥—ListViewå¹¶ä¸æ˜¯å¥½çš„è®¾è®¡ï¼Œå¦‚æœèƒ½å¤Ÿé¿å…æœ€å¥½ï¼Œè‹¥ä¸èƒ½é¿å…ï¼Œå°±å¿…é¡»è§£å†³ListViewä¸èƒ½æ»‘åŠ¨çš„é—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›å½“æ‰‹æŒ‡è½åœ¨ListViewä¸Šè¿›è¡Œæ»‘åŠ¨æ—¶ï¼Œä¼šæ§åˆ¶ListViewçš„æ¡ç›®ï¼Œå½“æ»‘è‡³é¡¶ç«¯æˆ–åº•ç«¯æ—¶ï¼ŒListViewæ— æ³•å†æ»‘ï¼Œåˆ™è¿›è¡Œå¤–å±‚ScrollViewçš„æ»‘åŠ¨ã€‚å½“æ‰‹æŒ‡è½åœ¨ListViewå¤–éƒ¨çš„ScrollViewæ—¶ï¼Œç›´æ¥æ§åˆ¶ScrollViewè¿›è¡Œæ»‘åŠ¨ã€‚ å‡ºç°é—®é¢˜çš„åŸå› åŸå› åœ¨äºScrollViewåœ¨å®ƒçš„onInterceptTouchEventé‡Œå¯¹ACTION_MOVEè¿›è¡Œäº†æ‹¦æˆªï¼ŒCode donesnâ€™t lie. 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120@Overridepublic boolean onInterceptTouchEvent(MotionEvent ev) &#123; /* * This method JUST determines whether we want to intercept the motion. * If we return true, onMotionEvent will be called and we do the actual * scrolling there. */ /* * Shortcut the most recurring case: the user is in the dragging * state and he is moving his finger. We want to intercept this * motion. */ final int action = ev.getAction(); if ((action == MotionEvent.ACTION_MOVE) &amp;&amp; (mIsBeingDragged)) &#123; return true; &#125; /* * Don't try to intercept touch if we can't scroll anyway. */ if (getScrollY() == 0 &amp;&amp; !canScrollVertically(1)) &#123; return false; &#125; switch (action &amp; MotionEvent.ACTION_MASK) &#123; case MotionEvent.ACTION_MOVE: &#123; /* * mIsBeingDragged == false, otherwise the shortcut would have caught it. Check * whether the user has moved far enough from his original down touch. */ /* * Locally do absolute value. mLastMotionY is set to the y value * of the down event. */ final int activePointerId = mActivePointerId; if (activePointerId == INVALID_POINTER) &#123; // If we don't have a valid id, the touch down wasn't on content. break; &#125; final int pointerIndex = ev.findPointerIndex(activePointerId); if (pointerIndex == -1) &#123; Log.e(TAG, \"Invalid pointerId=\" + activePointerId + \" in onInterceptTouchEvent\"); break; &#125; final int y = (int) ev.getY(pointerIndex); final int yDiff = Math.abs(y - mLastMotionY); if (yDiff &gt; mTouchSlop &amp;&amp; (getNestedScrollAxes() &amp; SCROLL_AXIS_VERTICAL) == 0) &#123; mIsBeingDragged = true; mLastMotionY = y; initVelocityTrackerIfNotExists(); mVelocityTracker.addMovement(ev); mNestedYOffset = 0; if (mScrollStrictSpan == null) &#123; mScrollStrictSpan = StrictMode.enterCriticalSpan(\"ScrollView-scroll\"); &#125; final ViewParent parent = getParent(); if (parent != null) &#123; parent.requestDisallowInterceptTouchEvent(true); &#125; &#125; break; &#125; case MotionEvent.ACTION_DOWN: &#123; final int y = (int) ev.getY(); if (!inChild((int) ev.getX(), (int) y)) &#123; mIsBeingDragged = false; recycleVelocityTracker(); break; &#125; /* * Remember location of down touch. * ACTION_DOWN always refers to pointer index 0. */ mLastMotionY = y; mActivePointerId = ev.getPointerId(0); initOrResetVelocityTracker(); mVelocityTracker.addMovement(ev); /* * If being flinged and user touches the screen, initiate drag; * otherwise don't. mScroller.isFinished should be false when * being flinged. */ mIsBeingDragged = !mScroller.isFinished(); if (mIsBeingDragged &amp;&amp; mScrollStrictSpan == null) &#123; mScrollStrictSpan = StrictMode.enterCriticalSpan(\"ScrollView-scroll\"); &#125; startNestedScroll(SCROLL_AXIS_VERTICAL); break; &#125; case MotionEvent.ACTION_CANCEL: case MotionEvent.ACTION_UP: /* Release the drag */ mIsBeingDragged = false; mActivePointerId = INVALID_POINTER; recycleVelocityTracker(); if (mScroller.springBack(mScrollX, mScrollY, 0, 0, 0, getScrollRange())) &#123; postInvalidateOnAnimation(); &#125; stopNestedScroll(); break; case MotionEvent.ACTION_POINTER_UP: onSecondaryPointerUp(ev); break; &#125; /* * The only time we want to intercept motion events is if we are in the * drag mode. */ return mIsBeingDragged;&#125; å¯ä»¥çœ‹åˆ°å½“(action == MotionEvent.ACTION_MOVE) &amp;&amp; (mIsBeingDragged)æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ç›´æ¥è¿”å›trueï¼Œæ‹¦æˆªæ‰äº†ACTION_MOVEäº‹ä»¶ã€‚è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨å†…å±‚Viewæ¥æ”¶åˆ°ACTION_DOWNæ—¶ï¼Œç¦æ­¢æ‰å¤–å±‚çš„æ‹¦æˆªï¼›åœ¨å†…å±‚Viewæ”¶åˆ°æ‰‹æŒ‡æŠ¬èµ·æ¥çš„ACTION_UPæ—¶ï¼Œæ”¾æ‰ç¦åˆ¶ã€‚æˆ‘ä»¬åœ¨dispatchTouchEventä¸­å†™å…¥è¿™æ®µé€»è¾‘ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒå†™è¿›å†…å±‚Viewçš„onTouchListenerä¸­ã€‚ æ¢å¤ListViewæ»‘åŠ¨dispatchTouchEventä¸­çš„å†™æ³• 123456789@Overridepublic boolean dispatchTouchEvent(MotionEvent ev) &#123; switch (ev.getAction()) &#123; case MotionEvent.ACTION_DOWN: getParent().requestDisallowInterceptTouchEvent(true); break; // ...... &#125;&#125; onTouchListenerä¸­çš„å†™æ³• 1234567891011listView.setOnTouchListener(new View.OnTouchLister &#123; @Override public boolean onTouch(View v, MotionEvent event) &#123; if(event.getAction() == MotionEvent.ACTION_UP)&#123; scrollView.requestDisallowInterceptTouchEvent(false); &#125;else&#123; scrollView.requestDisallowInterceptTouchEvent(true); &#125; return false; &#125;&#125;); è¿™ä¸ªæ—¶å€™ListViewå·²ç»å¯ä»¥ä¸Šä¸‹æ»‘åŠ¨äº†ï¼Œä½†æ˜¯å½“æ»‘åŠ¨åˆ°ä¸Šï¼ä¸‹å°½å¤´æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å¤–å±‚çš„ScrollViewç»§ç»­æ¥ç®¡æ»‘åŠ¨ã€‚ å¤–å±‚ScrollViewæ¥ç®¡æ»‘åŠ¨é¦–å…ˆéœ€è¦å†™ä¸¤ä¸ªæ–¹æ³•åˆ¤æ–­ListViewå·²ç»åˆ°äº†ç©·é€”æœ«è·¯ã€‚ 12345678910111213141516171819202122public boolean scrollToBottom() &#123; int first = getFirstVisiblePosition(); int last = getLastVisiblePosition(); int visibleCoutn = getChildCount(); int count = getCount(); if ((first + visibleCoutn) == count) &#123; return true; &#125; return false;&#125;public boolean scrollToTop() &#123; int first = getFirstVisiblePosition(); int last = getLastVisiblePosition(); int visibleCoutn = getChildCount(); int count = getCount(); if (first == 0) &#123; return true; &#125; return false;&#125; ç„¶ååœ¨dispatchTouchEventæ–¹æ³•é‡Œåˆ¤æ–­ï¼Œåˆ°äº†å°½å¤´åï¼ŒæŠŠACTION_MOVEäº‹ä»¶äº¤ç»™å¤–å±‚ScrollViewå¤„ç†ã€‚è¿™é‡ŒåŒ…å«äº†å‰æ–‡ä¸­â€œç¦æ­¢å¤–å±‚ViewGroupæ‹¦æˆªâ€çš„é€»è¾‘ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243float downY, y, mTouchSlop;@Overridepublic boolean dispatchTouchEvent(MotionEvent ev) &#123; switch (ev.getAction()) &#123; case MotionEvent.ACTION_DOWN: downY = ev.getRawY(); y = downY; getParent().requestDisallowInterceptTouchEvent(true); break; case MotionEvent.ACTION_MOVE: y = ev.getRawY(); if (scrollToTop()) &#123; if (y - downY &gt; mTouchSlop) &#123; /** * Point 1 : å¦‚æœæ»‘åŠ¨åˆ°é¡¶éƒ¨ï¼Œå¹¶ä¸”æ‰‹æŒ‡è¿˜æƒ³å‘ä¸‹æ»‘åŠ¨ï¼Œåˆ™äº‹ä»¶äº¤è¿˜ç»™çˆ¶æ§ä»¶ï¼Œè¦æ±‚çˆ¶æ§ä»¶å¯ä»¥æ‹¦æˆªäº‹ä»¶ */ getParent().requestDisallowInterceptTouchEvent(false); return false; &#125; &#125; if (scrollToBottom()) &#123; if (y - downY &lt; -mTouchSlop) &#123; /** * Point 3 : å¦‚æœæ»‘åŠ¨åˆ°åº•éƒ¨ï¼Œå¹¶ä¸”æ‰‹æŒ‡è¿˜æƒ³å‘ä¸Šæ»‘åŠ¨ï¼Œåˆ™äº‹ä»¶äº¤è¿˜ç»™çˆ¶æ§ä»¶ï¼Œè¦æ±‚çˆ¶æ§ä»¶å¯ä»¥æ‹¦æˆªäº‹ä»¶ */ getParent().requestDisallowInterceptTouchEvent(false); return false; &#125; &#125; break; case MotionEvent.ACTION_UP: break; default: break; &#125; return super.dispatchTouchEvent(ev);&#125; ä¸Šè¿°å†™æ³•åŸºæœ¬å®ç°äº†æ‹‰åˆ°ListViewå°½å¤´æ—¶ï¼Œå°†æ»‘åŠ¨æ—¶é—´äº¤ç»™å¤–éƒ¨ScrollViewå¤„ç†çš„åŠŸèƒ½ã€‚è¿˜å­˜åœ¨çš„é—®é¢˜æ˜¯åœ¨è¾¹ç•Œåˆ¤æ–­æ—¶ä¸å¤Ÿç²¾ç¡®ï¼Œä¼šå‘ç”Ÿç¬¬ä¸€ä¸ªï¼æœ€åä¸€ä¸ªitemåªå±•ç¤ºä¸€ä¸ªè¾¹ç•Œï¼Œå°±è§¦å‘è§£é™¤ç¦æ­¢çš„æ•ˆæœï¼Œå¾…å®Œå–„ã€‚ å¸Œæœ›è¿™ç¯‡æ–‡ç« è®©ä½ ä¸å†ä¸ºAndroidä¸­çš„äº‹ä»¶ä¼ é€’æœºåˆ¶è€Œå›°æƒ‘ã€‚ å‚è€ƒèµ„æ–™ ScrollViewåµŒå¥—ListViewå¤„ç†äº‹ä»¶å†²çª ====Ending====","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"}]},{"title":"Android Performance Patterns - s4ep8 Removing Unused Resources","date":"2017-02-14T01:40:48.000Z","path":"2017/02/14/Android-Performance-Patterns-s4ep8-Removing-Unused-Resources/","text":"Although YOU may be diligent in removing resources your app wonâ€™t use, itâ€™s not safe to assume that the LIBRARIES youâ€™re including will do the same.Thankfully some helpful Gradle tools can put your APK on a diet.link é—®é¢˜èµ·å› æ— ç”¨çš„Resourceså­˜åœ¨äºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯é¡¹ç›®æ–‡ä»¶ä¸­ï¼Œå¼€å‘è€…å¯ä»¥æ£€æŸ¥å¹¶ç›´æ¥ç§»é™¤è¿™äº›æ–‡ä»¶ï¼›ç¬¬äºŒéƒ¨åˆ†å­˜åœ¨äºä¾èµ–çš„libraryä¸­ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨åº“é‡Œé¢çš„æŸä¸€äº›åŠŸèƒ½ï¼Œè€Œå¹¶éå…¨éƒ¨åŠŸèƒ½ã€‚å¦‚æœä¸åŠ ä»¥ç‰¹æ®Šå¤„ç†ï¼Œå…¶å®ƒæœªç»ä½¿ç”¨èµ„æºæ–‡ä»¶ä¹Ÿä¼šè¢«æ‰“å…¥æœ€ç»ˆçš„APKä¸­ã€‚ GradleGradleå¯ä»¥åˆ†æèµ„æºæ–‡ä»¶çš„ä½¿ç”¨æƒ…å†µï¼Œä»è€Œåˆ é™¤é‚£äº›ä¸éœ€å¼•å…¥çš„èµ„æºæ–‡ä»¶ã€‚ å¦‚æœè¦å¼€å¯è¿™é¡¹åŠŸèƒ½ï¼Œéœ€è¦åœ¨gradleé…ç½®æ–‡ä»¶ä¸­å°†minifyEnabledå’ŒshrinkResourceså£°æ˜ä¸ºtrueã€‚ 123456789android &#123; buildTypes &#123; release &#123; minifyEnabled trure shrinkResources true proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; &#125;&#125; æˆ‘ä»¬ä¹Ÿå¯ä»¥å¼ºåˆ¶ä¿ç•™ï¼åˆ é™¤æŸäº›æ–‡ä»¶ 1234&lt;resources xmlns:tools:=&quot;http://schemas.android.com/tools&quot; tools:keep=&quot;@layout/l_used*_c, @layout/l_used_b*&quot; tools:discard=&quot;@layout/unused2&quot; /&gt; Gradleå¹¶éæ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä¸ä¼šå¤„ç†å¤šåˆ†è¾¨ç‡ï¼å¤šè¯­è¨€ä¸‹çš„èµ„æºæ–‡ä»¶ï¼ˆç¬”è€…å¯¹è¿™éƒ¨åˆ†å­˜ç–‘ï¼Œè¿™äº›èµ„æºæ–‡ä»¶åŸæœ¬å°±ä¸éœ€è¦ç²¾ç®€ï¼Œé™¤éAPPæŒ‡å®šäº†ä»…ä¾›æŸäº›ç‰¹å®šç”¨æˆ·äººç¾¤ä½¿ç”¨ï¼‰ ====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns s6ep6 - VectorDrawable For Smaller APKs","date":"2017-02-13T01:13:49.000Z","path":"2017/02/13/Android-Performance-Patterns-s6ep6-VectorDrawable/","text":"ç”±äºAndroidç³»ç»Ÿå­˜åœ¨å¤šç§åˆ†è¾¨ç‡ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨å›¾ç‰‡æ—¶ï¼Œå¾€å¾€éœ€è¦å‡†å¤‡ldpiã€mdpiã€hdpiã€xhdpiç­‰å¤šç§åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå ç”¨å¤§é‡APKä½“ç§¯ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæœ¬æ–‡ä»‹ç»äº†å¦‚ä½•VectorDrawableæŠ€æœ¯çš„ä¼˜ç‚¹ï¼Œä»¥åŠä½¿ç”¨åœºæ™¯ã€‚link ä¸åˆé€‚çš„åšæ³•JPEGå’ŒPNGæ˜¯å…‰æ …åŒ–çš„å›¾ç‰‡æ ¼å¼ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹å‡ºç°å›¾ç‰‡æ¨¡ç³Šçš„æƒ…å†µï¼Œå°±å¿…é¡»å‡†å¤‡å¤šå¼ å›¾ç‰‡ï¼Œè¿™ä¼šæµªè´¹APKä½“ç§¯ã€‚ VectorDrawableVectorDrawableåˆ™å¯ä»¥åªç”¨ä¸€ä¸ªæ–‡ä»¶æ»¡è¶³å¤šç§å±å¹•åˆ†è¾¨ç‡ã€‚å®ƒå°†å›¾ç‰‡åˆ†è§£ä¸ºå¤šä¸ªåŸºæœ¬å›¾å½¢çš„ç»„åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ å¯¹äºæ–‡ç« å¼€å¤´çš„ä¸‰ä¸ªåœ†å½¢çš„åœºæ™¯ï¼Œå¯ä»¥å°†å ç”¨ç©ºé—´ä»56Ké™ä½åˆ°2Kï¼Œé™ä½äº†96%ã€‚ ä½¿ç”¨VectorDrawableè¿˜å¯ä»¥é¿å…å› ä½¿ç”¨å¸§åŠ¨ç”»ï¼Œå¯¼è‡´å›¾ç‰‡æ–‡ä»¶è¿‡å¤šçš„æƒ…å†µ CaveatsåŠ è½½åŠ è½½æ—¶ï¼ŒJPEGã€PNGæ–‡ä»¶å¯ä»¥ä¾é ç¡¬ä»¶è¿›è¡Œçº¹ç†æ¸²æŸ“ï¼Œè€ŒVectorDrawableåœ¨å¤„ç†æ—¶ï¼Œéœ€è¦å…ˆç¿»è¯‘æˆGPUæŒ‡ä»¤ï¼ŒVDä¸­çš„æ¯ä¸€ä¸ªåŸºæœ¬å›¾å½¢ï¼Œéƒ½ä¼šè¢«ä½œä¸ºä¸€ä¸ªå›¾å±‚å¤„ç†ã€‚ å¤æ‚å›¾åƒVectorDrawableä¸é€‚ç”¨äºå¤„ç†å¤æ‚å›¾åƒï¼Œå¯¹äºä¸‹å›¾çš„è‚–åƒï¼Œä½¿ç”¨PNGæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚ ç®€åŒ–VectorDrawableçš„è·¯å¾„ï¼Œä»¥ä¾¿æ›´åŠ é«˜æ•ˆåœ°ç»˜åˆ¶ã€‚ ====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns s6ep5 Smaller APKs A checklist","date":"2017-02-10T03:49:46.000Z","path":"2017/02/10/Android-Performance-Patterns-s6ep5-Smaller-APKs/","text":"å¦‚ä½•å‡å°‘APKä½“ç§¯link å¤´è„‘é£æš´ï¼šæ€æ ·å‡å°‘APKä½“ç§¯å‘¢ï¼Ÿ é¿å…ä½¿ç”¨åˆ†è¾¨ç‡è¿‡å¤§çš„å›¾ç‰‡ ä½¿ç”¨çŸ¢é‡å›¾ ä»£ç ã€å¸ƒå±€æ–‡ä»¶å¤ç”¨ ç²¾ç®€å¤šåª’ä½“æ–‡ä»¶ æ‡’åŠ è½½ï¼ŒæŸäº›ä¸šåŠ¡åŠŸèƒ½ï¼Œç›´åˆ°çœŸæ­£åº”ç”¨æ—¶æ–¹ä»ç½‘ç»œè¿›è¡Œä¸‹è½½ ProGuard Two key areas Smaller resources (easiest to fix) Smaller code Smaller resourcesç§»é™¤æ— ç”¨èµ„æºæ–‡ä»¶åœ¨gradleæ–‡ä»¶é‡Œé…ç½®minifyEnabled trueå’ŒshrinkResources trueï¼Œåœ¨æ‰“åŒ…æ—¶ä¼šå¿½ç•¥å®é™…ä¸Šæ²¡æœ‰åº”ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ã€‚å»ºè®®åœ¨releaseæ—¶æ‰æ‰“å¼€ï¼Œä»¥å‡å°‘debugç¯å¢ƒç¼–è¯‘æ—¶é—´ã€‚ 12345678910android &#123; ... buildTypes &#123; release &#123; minifyEnabled true shirnkResources true proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos; &#125; &#125;&#125; ä½¿ç”¨è‡ªåŠ¨åˆ†è¾¨ç‡é€‚é…åŠŸèƒ½æˆ‘ä»¬çŸ¥é“Androidä¸­æœ‰ldpi mdpi hdpi xhdpi xxhdpi ä¹ƒè‡³ xxxhdpi å’Œ tvdpi ç­‰åˆ†è¾¨ç‡ï¼Œå¦‚æœæŠŠæ¯ä¸ªèµ„æºæ–‡ä»¶ï¼Œé’ˆå¯¹è¿™äº›åˆ†è¾¨ç‡éƒ½åˆ†åˆ«åˆ¶ä½œä¸€ä¸ªå‰¯æœ¬ï¼Œè¿™å°†å ç”¨å¤§é‡çš„ç©ºé—´ã€‚ é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å¤šä¸ªè§£å†³é€”å¾„ã€‚ åˆ é™¤ä¸€éƒ¨åˆ†åˆ†è¾¨ç‡ä¸‹çš„æ–‡ä»¶æ¡†æ¶ä¼šæ ¹æ®é«˜åˆ†è¾¨ç‡çš„èµ„æºæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆä½åˆ†è¾¨ç‡ä¸‹çš„èµ„æºæ–‡ä»¶ã€‚è¿™é‡Œåˆ é™¤äº†ldpiï¼ˆå¯ä»¥ä»mdpiç”Ÿæˆï¼‰ã€hdpiå’Œxhdpiï¼ˆå¯ä»¥ä»xxhdpiç”Ÿæˆï¼‰ï¼Œå¦å¤–tvdpiåªåº”ç”¨äºTVappï¼Œè¿™é‡Œä¸€å¹¶åˆ é™¤ã€‚ ![][rescale.png] ä½¿ç”¨çŸ¢é‡å›¾ä»£æ›¿åƒç´ å›¾çŸ¢é‡å›¾ä¼šæ ¹æ®è®¾å¤‡åˆ†è¾¨ç‡ä¸åŒï¼Œè‡ªåŠ¨è°ƒæ•´è‡ªèº«å¤§å°ï¼Œä¸€ä¸ªçŸ¢é‡å›¾å¯ä»¥åº”ç”¨åœ¨å¤šç§åˆ†è¾¨ç‡ä¸‹ å¤ç”¨å·²æœ‰çš„å›¾ç‰‡èµ„æºæ–‡ä»¶å¯¹äºä¸‹å›¾è¿™ç§åªæ˜¯å˜æ›´äº†æ–¹å‘çš„åœºæ™¯ï¼Œåº”å½“åªä½¿ç”¨ä¸€å¼ å›¾ç‰‡ï¼Œé€šè¿‡ä»£ç æ¥æ§åˆ¶ç®­å¤´æœå‘ã€‚ 12345&lt;rotate xmlns:android=\"http://schemas.android.com/apk/res/android\" android:drawable=\"@drawable/ic_arrow_expand\" android:fromDegrees=\"0\" android:toDegrees=\"270\" /&gt; Smaller Codeä½¿ç”¨ProGuardè®¾ç½®minifyEnabled trueï¼Œä»£ç è§å‰æ–‡ã€‚ ä¼˜åŒ–ä»£ç ç”Ÿæˆå™¨çš„ç”Ÿæˆä»£ç ä»£ç ç”Ÿæˆå™¨æ˜¯å°†åŸå§‹ä»£ç è½¬åŒ–ä¸ºç›®æ ‡ä»£ç çš„ä¸€ç§å·¥å…·ï¼Œåœ¨è½¬åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½ç”Ÿæˆå†—ä½™çš„ç›®æ ‡ä»£ç ï¼Œè¿™éƒ¨åˆ†ä»£ç éœ€è¦ç²¾ç®€ã€‚ æ³¨æ„ä¾èµ–ï¼å½“æˆ‘ä»¬çš„ä»£ç éœ€è¦å¼•å…¥å¤–éƒ¨åº“çš„æ—¶å€™ï¼Œåºå¤§çš„å¤–éƒ¨ä¾èµ–ä¼šå¯¼è‡´APKä½“ç§¯å‰§å¢ã€‚ProGuardèƒ½å¤Ÿä¸ºæˆ‘ä»¬å¤„ç†ä¸€éƒ¨åˆ†è¿™ç§æƒ…å†µï¼Œæ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ç›®çš„åœ°æŒ‘é€‰é€‚åˆç§»åŠ¨ç«¯ä½¿ç”¨çš„å·¥å…·åº“ã€‚åœ¨å¼•å…¥å¤–éƒ¨ä¾èµ–çš„æ—¶å€™ï¼Œä¸€å®šè¦å…³æ³¨å®ƒå¯¹APKä½“ç§¯äº§ç”Ÿçš„å½±å“ã€‚ Segment your APKè§†é¢‘ä½œè€…å¯¹è¿™éƒ¨åˆ†çš„å†…å®¹è®²è¿°ä¸ç”šæ¸…æ™°ï¼Œæˆ‘ç†è§£ä¸‹æ¥ï¼Œæ‰€åšçš„äº‹æƒ…æ˜¯ï¼Œå¯ä»¥æ ¹æ®APIçº§åˆ«ã€åˆ†è¾¨ç‡é«˜ä½ç­‰æ¡ä»¶ï¼Œç”Ÿæˆä¸åŒçš„APKåŒ…ï¼Œåœ¨åº”ç”¨å¸‚åœºé‡Œå‘å¸ƒæ—¶è¿›è¡Œé…ç½®ã€‚è€Œåº”ç”¨å¸‚åœºä¼šæ ¹æ®ç”¨æˆ·æ‰‹æœºå‹å·ï¼Œä¸ºç”¨æˆ·æ¨é€ä¸åŒçš„APKè¿›è¡Œä¸ªæ€§åŒ–å®‰è£…ã€‚ Android Studio 2.2æ–°ç‰ˆæœ¬çš„ASä¸­ï¼Œå¢åŠ äº†APKåˆ†æå·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯Ÿçœ‹classesã€methodsçš„æ•°ç›®ï¼Œèµ„æºæ–‡ä»¶å¤§å° ç­‰ä¿¡æ¯ã€‚ ====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"ç¦æ­¢Android File Transferè‡ªå¯åŠ¨","date":"2017-01-24T12:07:55.000Z","path":"2017/01/24/Stop-Android-File-Transfer-From-Auto-Starting/","text":"Android File Transferæ˜¯macOSç³»ç»Ÿä¸‹ç”¨äºåœ¨æ‰‹æœº-ç”µè„‘é—´ä¼ è¾“æ–‡ä»¶çš„å·¥å…·ï¼Œç„¶è€Œï¼Œè¿™ä¸ªå·¥å…·é»˜è®¤æ˜¯æ¯ä¸€æ¬¡å°†æ‰‹æœºè¿æ¥è‡³ç”µè„‘ï¼Œéƒ½ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œéå¸¸æ¼äººã€‚æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•å°†è‡ªå¯åŠ¨å…³é—­çš„æ–¹æ³•ã€‚ ProblemAndroid File Transfer Auto Launches Solution Close Android File Transfer Open Activity Monitor and kill â€œAndroid File Transfer Agentâ€ Go to where you installed â€œAndroid File Transfer.appâ€ (I have it under /Applications) Right click and â€“&gt; â€œShow package contentsâ€ Go to Contents/Resources Rename â€œAndroid File Transfer Agentâ€ to e.g. â€œAndroid File Transfer Agent_DISABLEDâ€ Then go to â€œ/Users/username/Library/Application Support/Google/Android File Transferâ€ and again rename the Agent app.. â€œAndroid File Transfer Agent_DISABLEDâ€. Referencehttps://mtmurdockblog.com/2012/12/17/disable-auto-start-for-android-file-transfer-on-osx/ ====End====","tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://lilei.pro/tags/å·¥å…·/"}]},{"title":"Android Performance Patterns s6ep4 Themed launch screens","date":"2017-01-23T01:40:31.000Z","path":"2017/01/23/Android-Performance-Patterns-s6ep4-Themed-launch-screens/","text":"This video identifies some pitfalls with bad ways to implement launch screens, and provides a solution that everyone can use.link Bad WaysTheme the launch screenå£°æ˜é¦–é¡µçš„Themeä¸Appå…¶å®ƒé¡µé¢çš„Themeç›¸åŒï¼Œè§†é¢‘ä½œè€…å¯¹äºè¿™éƒ¨åˆ†å†…å®¹è®²è¿°ä¸æ¸…ï¼Œç›®å‰å­˜ç–‘ã€‚ Turn off the official startup windowä½¿ç”¨Window Disable Previewæ¥ç¦æ­¢æ˜¾ç¤ºPreviewç•Œé¢ï¼Œè¿™ä¼šå¯¼è‡´å¯åŠ¨Appåä¾ç„¶åœç•™åœ¨æ¡Œé¢ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­æ— æ³•å“åº”ç”¨æˆ·æ“ä½œã€‚æ–¹æ³•å¦‚ä¸‹ï¼š åœ¨styles.xmlä¸­å£°æ˜Theme 123&lt;style name=\"Theme.NoPreviewWindow\" parent=\"Theme.AppCompat.NoActionBar\"&gt; &lt;item name=\"android:windowIsTranslucent\"&gt;true&lt;/item&gt;&lt;/style&gt; æˆ–è€… 123&lt;style name=\"Theme.NoPreviewWindow\" parent=\"Theme.AppCompat.NoActionBar\"&gt; &lt;item name=\"android:windowDisablePreview\"&gt;true&lt;/item&gt;&lt;/style&gt; ç„¶ååœ¨AndroidManifest.xmlä¸­ä½¿ç”¨å·²ç»å®šä¹‰çš„Theme 1234567891011&lt;activity android:name=\".activities.SplashActivity\" android:label=\"@string/app_name\" android:theme=\"@style/Theme.NoPreviewWindow\" android:screenOrientation=\"portrait\" &gt; &lt;intent-filter&gt; &lt;action android:name=\"android.intent.action.MAIN\"/&gt; &lt;category android:name=\"android.intent.category.LAUNCHER\"/&gt; &lt;/intent-filter&gt;&lt;/activity&gt; The better wayé€šè¿‡åˆ‡æ¢Themeçš„æ‰‹æ®µæ¥å®Œæˆé¦–å…ˆå£°æ˜ä¸€ä¸ªä»¥å›¾ç‰‡ä¸ºèƒŒæ™¯çš„Themeï¼Œå¹¶ä¸”åœ¨é¦–é¡µActivityä¸­åº”ç”¨ 12345678910&lt;layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\" android:opacity=\"opaque\"&gt; &lt;item android:drawable=\"@android:color/white\"/&gt; &lt;item&gt; &lt;bitmap android:src=\"@drawable/product_log_144dp\" android:gravity=\"center\"/&gt; &lt;/item&gt;&lt;/layer-list&gt;&lt;activity ...android:theme=\"@style/AppTheme.Launcher\"/&gt; å½“é¦–é¡µActivityæ­£å¼å¯åŠ¨æ—¶ï¼Œåˆ‡æ¢åˆ°æ­£å¼çš„theme 123456@Overrideprotected void onCreate(Bundel savedInstanceState) &#123; setTheme(R.style.Theme_MyApp); super.onCreate(savedInstanceState); // ...&#125; å‚è€ƒèµ„æ–™ Disabling the Preview(Start) Window in Android Splash Screens the Right Way====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"å¦‚ä½•åœ¨æ§åˆ¶å°è¾“å‡ºæ–‡ä»¶ç³»ç»Ÿç»“æ„","date":"2017-01-22T12:47:29.000Z","path":"2017/01/22/Print-File-System-Tree-In-Terminal/","text":"å®‰è£…å¹¶ä½¿ç”¨treeå·¥å…· ç›®å½•ç»“æ„12345678910111213141516171819202122232425262728293031323334353637383940main/java/com/example/android/architecture/blueprints/todoappâ”œâ”€â”€ BasePresenter.javaâ”œâ”€â”€ BaseView.javaâ”œâ”€â”€ addedittaskâ”‚ â”œâ”€â”€ AddEditTaskActivity.javaâ”‚ â”œâ”€â”€ AddEditTaskContract.javaâ”‚ â”œâ”€â”€ AddEditTaskFragment.javaâ”‚ â””â”€â”€ AddEditTaskPresenter.javaâ”œâ”€â”€ dataâ”‚ â”œâ”€â”€ Task.javaâ”‚ â””â”€â”€ sourceâ”‚ â”œâ”€â”€ TasksDataSource.javaâ”‚ â”œâ”€â”€ TasksRepository.javaâ”‚ â”œâ”€â”€ localâ”‚ â”‚ â”œâ”€â”€ TasksDbHelper.javaâ”‚ â”‚ â”œâ”€â”€ TasksLocalDataSource.javaâ”‚ â”‚ â””â”€â”€ TasksPersistenceContract.javaâ”‚ â””â”€â”€ remoteâ”‚ â””â”€â”€ TasksRemoteDataSource.javaâ”œâ”€â”€ statisticsâ”‚ â”œâ”€â”€ StatisticsActivity.javaâ”‚ â”œâ”€â”€ StatisticsContract.javaâ”‚ â”œâ”€â”€ StatisticsFragment.javaâ”‚ â””â”€â”€ StatisticsPresenter.javaâ”œâ”€â”€ taskdetailâ”‚ â”œâ”€â”€ TaskDetailActivity.javaâ”‚ â”œâ”€â”€ TaskDetailContract.javaâ”‚ â”œâ”€â”€ TaskDetailFragment.javaâ”‚ â””â”€â”€ TaskDetailPresenter.javaâ”œâ”€â”€ tasksâ”‚ â”œâ”€â”€ ScrollChildSwipeRefreshLayout.javaâ”‚ â”œâ”€â”€ TasksActivity.javaâ”‚ â”œâ”€â”€ TasksContract.javaâ”‚ â”œâ”€â”€ TasksFilterType.javaâ”‚ â”œâ”€â”€ TasksFragment.javaâ”‚ â””â”€â”€ TasksPresenter.javaâ””â”€â”€ util â”œâ”€â”€ ActivityUtils.java â”œâ”€â”€ EspressoIdlingResource.java â””â”€â”€ SimpleCountingIdlingResource.java å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å†™æ–‡ç« ï¼Œéœ€è¦è´´å‡ºé¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚æˆ‘ä¹‹å‰é‡‡ç”¨çš„æ–¹æ³•æ¯”è¾ƒç¬¨ï¼Œæ˜¯åœ¨IDEä¸­æˆªå›¾ã€‚ç›¸ä¿¡å¾ˆå¤šäººåœ¨çœ‹èµ„æ–™æ—¶ï¼Œé‡åˆ°è¿‡ä¸Šé¢è¿™æ ·ï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºçš„æ–‡ä»¶ç›®å½•ç»“æ„ã€‚ç›´è§‚è€Œä¸”èµå¿ƒæ‚¦ç›®ï¼Œé‚£ä¹ˆè¿™æ˜¯ç”¨ä»€ä¹ˆå·¥å…·ç”Ÿæˆçš„å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šTree Treeçš„å®‰è£…ä¸ä½¿ç”¨å¦‚æœä½ ç”¨çš„æ˜¯Ubuntuæˆ–å…¶ä»–çš„*nuxç³»ç»Ÿï¼Œç›´æ¥è¿è¡Œsudo apt-get install treeå®‰è£…å³å¯ï¼Œä½†æ˜¯åœ¨macOSä¸­ï¼Œå¹¶æ²¡æœ‰apt-getå·¥å…·ï¼Œéœ€è¦å…ˆå®‰è£…Homebrewï¼Œç„¶åé€šè¿‡brewå®‰è£…treeã€‚ æ³¨æ„åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥ç®¡ç†å‘˜å¯†ç ã€‚ 12$/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"$brew install tree å¾…å®‰è£…å®Œæˆåï¼ˆå¤§æ¦‚éœ€è¦10ï½20åˆ†é’Ÿï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨tree ${folder_name}åœ¨æ§åˆ¶å°ä¸­æ‰“å°å‡ºç›®å½•ç»“æ„äº†ã€‚ ===End===","tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://lilei.pro/tags/å·¥å…·/"}]},{"title":"Android Performance Patterns s6ep3 App Launch time & Bloated Application objects","date":"2017-01-22T01:28:39.000Z","path":"2017/01/22/Android-Performance-Patterns-s6ep3-App-Launch-Time/","text":"This videos are really interesting but it seems to me that the last 3 episodes have been basically the same. â€”â€”â€”â€”æ‘˜è‡ªyoutubeè¯„è®ºlink Slow start-up apps cause unhappy users.æ˜¯çš„ï¼Œæˆ‘åŒæ„ï¼ ä½†æ˜¯ä½ èƒ½ä¸èƒ½å¤šè®²ä¸€äº›å¹²è´§ï¼Ÿ Android has tools to help.Method Traceå‰é¢ä¸¤èŠ‚å·²ç»è®²è¿‡è¿™ä¸ªï¼Œå›¾ç‰‡æˆ‘å°±ä¸è´´äº†ã€‚ Solution: lazy loading ====Ending====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns s5ep3 App Launch time & Activity creation","date":"2017-01-17T01:45:40.000Z","path":"2017/01/17/Android-Performance-Patterns-s6ep2-App-Launch-Time-And-Activity-Creation/","text":"ep1ä»‹ç»äº†Applicationå¯åŠ¨è¿‡æ…¢çš„åŸå› ï¼Œæœ¬èŠ‚åˆ†æActivityå¯åŠ¨è¿‡æ…¢çš„åŸå› ï¼Œå¯åŠ¨é€Ÿåº¦æ ‡å‡†ä»¥åŠå·¥å…·ã€‚link å¯åŠ¨MainActivityè¿‡æ…¢åŸå› å¯èƒ½æœ‰å¤šä¸ªï¼Œå¦‚ä¸‹å›¾ã€‚ åŠ è½½å¸ƒå±€ åŠ è½½ Bitmapï¼ˆå¼•èµ·GCï¼‰ ç½‘ç»œè¯·æ±‚ è¯»å†™ User Preference åˆ†æé—®é¢˜Method tracing toolMethod Tracer å·¥å…·è¢«ç”¨æ¥æŸ¥çœ‹æ¯ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ—¶é—´ã€‚ å¦‚æœonCreateçš„æ‰§è¡Œè¶…è¿‡äº†16msï½30msï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½æ˜¯æœ‰é—®é¢˜çš„ã€‚ Inserting Trace Commandsä½¿ç”¨traceæ¥è®°å½•å¼€å§‹ï¼æˆªæ­¢æ—¶é—´ï¼Œæ‰€è®°å½•çš„æ—¶é—´ä¼šæ˜¾ç¤ºåœ¨Systraceä¸­ã€‚ 12345trace.beginSection();// code to be valuedtrace.endSection(); é€ æˆActivityå¯åŠ¨è¿‡æ…¢çš„åŸå› Complex Layoutsé¦–å½“å…¶å†²çš„æ˜¯å¤æ‚å¸ƒå±€å¯¼è‡´åŠ è½½è¿‡æ…¢ï¼Œå¸ƒå±€è¶Šå¤æ‚ï¼Œè¶Šå¤šçš„èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€ä¸»é¢˜ï¼‰éœ€è¦åŠ è½½ã€‚ è§£å†³æ–¹æ³•æœ‰é™ä½å¤æ‚åº¦ã€ä½¿ç»“æ„æ‰å¹³åŒ–ã€å¯¹äºä¸å¯è§çš„å…ƒç´ æš‚æ—¶ä¸åŠ è½½ã€‚ æ‡’åŠ è½½&amp;å¼‚æ­¥å¤„ç† å½“åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ¶‰åŠå¤šä¸ªè€—æ—¶æ“ä½œï¼Œæœ€ç³Ÿç³•çš„æƒ…å†µæ˜¯æŠŠå®ƒä»¬ä¸²è¡Œèµ·æ¥è¿›è¡Œï¼Œè¿™ä¼šå¯¼è‡´æ¯ä¸€é¡¹æ“ä½œçš„å»¶è¿Ÿè¢«å åŠ èµ·æ¥ï¼Œè®©ç”¨æˆ·æŠ“ç‹‚ã€‚ è¿™æ—¶åº”å½“åˆ¤æ–­å“ªäº›æ“ä½œæ˜¯ä¸€å®šè¦ä¸²è¡Œè¿›è¡Œï¼Œå“ªäº›æ˜¯å¯ä»¥å¼‚æ­¥åŠ è½½çš„ï¼Œä»è€Œè¿›è¡Œä¼˜åŒ–ã€‚ ====End====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"ä½¿ç”¨Charlesç›‘æ§Genymotionæ¨¡æ‹Ÿå™¨å‘é€çš„è¯·æ±‚","date":"2017-01-16T09:25:07.000Z","path":"2017/01/16/Using-Charles-Proxy-with-Genymotion/","text":"Charlesåœ¨æ¨¡æ‹Ÿå™¨ä¸­çš„é…ç½®ï¼Œä¸åœ¨çœŸæœºä¸Šçš„é…ç½®æœ‰æ‰€ä¸åŒã€‚ èƒŒæ™¯Charlesæ˜¯å¾ˆå¥½ç”¨çš„ä»£ç†å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„Requestå’ŒResponseï¼ŒGenymotionåˆ™å·ç§°é€Ÿåº¦æœ€å¿«çš„Androidæ¨¡æ‹Ÿå™¨ã€‚ç„¶è€Œï¼Œåœ¨æŠŠè¿™ä¸¤è€…ç»“åˆä½¿ç”¨æ—¶ï¼Œä¼šå‘ç°å¹¶æ²¡æœ‰ç”¨çœŸæœºåšä»£ç†é‚£ä¹ˆæ–¹ä¾¿ã€‚åŸå› åœ¨äºæ¨¡æ‹Ÿå™¨æ‰€æ¥å…¥çš„ç½‘ç»œæ˜¯VirtualBoxæ‰€å»ºç«‹çš„æ¨¡æ‹Ÿç½‘ç»œï¼Œè·Ÿç¬”è®°æœ¬ç”µè„‘æ‰€çœ‹åˆ°çš„å±€åŸŸç½‘IPä¸åœ¨åŒä¸€ä¸ªç½‘ç»œç¯å¢ƒã€‚ è§£å†³æ–¹æ¡ˆåœ¨æ¨¡æ‹Ÿå™¨çš„WLANé…ç½®ä¸­ï¼Œå°†ä»£ç†hostæ”¹ä¸º10.0.3.2ï¼Œç«¯å£æ”¹ä¸ºCharlesé…ç½®çš„ç«¯å£ï¼ˆé»˜è®¤çš„æ˜¯8888ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯8642ï¼‰ã€‚ Doneï¼ å‚è€ƒèµ„æ–™Using Genymotion With Charles Proxy ====End====","tags":[{"name":"å·¥å…·","slug":"å·¥å…·","permalink":"https://lilei.pro/tags/å·¥å…·/"}]},{"title":"Androidåº”ç”¨ç­¾åå®è·µ","date":"2017-01-16T06:15:48.000Z","path":"2017/01/16/Android-Sign/","text":"å‚è€ƒèµ„æ–™ Androidç»™apkç­¾åé‚£ç‚¹äº‹","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"}]},{"title":"Android-Performance-Patterns-s6ep1-Launch-Time-Performance","date":"2017-01-16T02:15:04.000Z","path":"2017/01/16/Android-Performance-Patterns-s6ep1-Launch-Time-Performance/","text":"Season 6 ep 1ï¼Œç¬¬å…­å­£é›†ä¸­è®¨è®ºAppå¯åŠ¨é€Ÿåº¦çš„è¯é¢˜ã€‚ link ç†è§£å¯åŠ¨æ—¶é—´ï¼ˆLaunching Timeï¼‰å½“ç”¨æˆ·å¯åŠ¨åº”ç”¨æ—¶ï¼ŒAndroidç³»ç»Ÿä¼šå±•ç¤ºä¸€ä¸ªç©ºç™½ï¼ˆdummyï¼‰å¯åŠ¨é¡µï¼Œåé¢ä¼šè®²åˆ°ï¼Œå¯ä»¥é€šè¿‡åœ¨AndroidManifest.xmlä¸­ä¸ºè¿™ä¸ªå¯åŠ¨é¡µé…ç½®èƒŒæ™¯å›¾ç‰‡ã€‚ ç©ºç™½é¡µæŒç»­åˆ°Appç»˜åˆ¶å‡ºé¦–å±å›¾åƒä¸ºæ­¢ã€‚ ä¸‹é¢çš„æµç¨‹å›¾ä»è¿›ç¨‹è§’åº¦è¿›è¡Œè¯´æ˜ï¼Œç³»ç»Ÿè¿›ç¨‹System Processä¼šä¸ºAppå¯åŠ¨ä¸€ä¸ªApplication Processï¼Œåœ¨è¿™è¿›ç¨‹é‡Œå…ˆæ‰§è¡ŒApplication.onCreateï¼ˆåœ¨musical.lyçš„face to faceä¸­æåˆ°äº†è¿™ä¸ªï¼‰ï¼Œéšåï¼Œåº”ç”¨ä¸»çº¿ç¨‹MainThreadå¤„ç†Activityåˆå§‹åŒ–äº‹åŠ¡ï¼Œç›´è‡³ç»˜åˆ¶å‡ºç¬¬ä¸€ä¸ªç•Œé¢ï¼Œç³»ç»Ÿæ‰å°†å±å¹•äº¤ç»™åº”ç”¨æ¥å±•ç¤ºã€‚ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œinflate viewsæ˜¯è€—æ—¶æœ€å¤šçš„ï¼Œå› æ­¤åœ¨å¼€å‘è‡ªå·±çš„åº”ç”¨æ—¶ï¼Œåº”å½“æœ‰æ„åœ°ç²¾ç®€é¦–å±å¸ƒå±€ï¼Œå‡å°‘åŠ è½½æ—¶é—´ã€‚å¦‚æœæœ‰è€—æ—¶æ“ä½œï¼Œåˆ™ä½¿ç”¨æ‡’åŠ è½½ã€‚ è‹¥ä½ ä½¿ç”¨æ‡’åŠ è½½ï¼Œå½“æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆåï¼Œå¯ä»¥é€šè¿‡reportFullyDrawn()æ–¹æ³•æ¥å‘Šè¯‰ç³»ç»Ÿè¿™ä¸€äº‹ä»¶ã€‚ç³»ç»Ÿåœ¨ç»Ÿè®¡åˆå§‹åŠ è½½æ—¶é—´çš„æ—¶å€™ï¼Œä¼šä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶æœºä½œä¸ºç»“æŸã€‚ å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å¯åŠ¨æ—¶é—´çš„å·¥å…·Android Studioä¸ºæˆ‘ä»¬æä¾›äº†ç›‘æ§å¯åŠ¨æ—¶é—´çš„å·¥å…·ï¼Œå€ŸåŠ©è¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå¯åŠ¨è¿‡ç¨‹ä¸­æœ€è€—æ—¶çš„æ­¥éª¤æ˜¯å“ªä¸ªï¼Œé€šè¿‡æ‡’åŠ è½½ç­‰æ‰‹æ®µï¼Œå°†å¯åŠ¨æ—¶é—´æ§åˆ¶åœ¨åˆç†çš„èŒƒå›´å†…ã€‚ é¦–å…ˆä¾¿æ˜¯Appå¯åŠ¨æ—¶å€™è‡ªåŠ¨æ‰“å‡ºçš„log ç²¾ç¡®åˆ°æ–¹æ³•ï¼Œåœ¨Monitoré¢æ¿ä¸­æœ‰MethodTracingå·¥å…· æ›´å¤šå…³äºå¯åŠ¨æ—¶é—´çš„çŸ¥è¯†ï¼Œå°†åœ¨åç»­ç« èŠ‚ä¸­ä»‹ç»ã€‚ å‚è€ƒèµ„æ–™ Launch-Time Performance ====END====","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Linux Shell ${} ç”¨æ³•","date":"2017-01-13T02:02:04.000Z","path":"2017/01/13/Linux-Shell-Usage/","text":"åœ¨Linux Shellä¸­ï¼Œ${}å¯ä»¥è¢«ç”¨æ¥å¤„ç†æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²ã€‚ è¯­æ³•${[input][rule]}ï¼Œå…¶ä¸­inputæ˜¯éœ€è¦å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œruleæ˜¯å¤„ç†è§„åˆ™ï¼Œè¯¦ç»†è§„åˆ™å¦‚ä¸‹ã€‚ #å»æ‰å·¦è¾¹å­—ç¬¦ã€‚ $å»æ‰å³è¾¹å­—ç¬¦ã€‚ ä¸Šé¢ä¸¤ç‚¹å¾ˆå¥½è®°å¿†ï¼Œé”®ç›˜ä¸Š#åœ¨å·¦ï¼Œ$åœ¨å³ã€‚ å•ä¸ªç¬¦å·æœ€å°åŒ¹é…ï¼Œä¸¤ä¸ªç¬¦å·æœ€å¤§åŒ¹é…ã€‚ ä¸¾ä¾‹å®šä¹‰file=/dir1/dir2/dir3/my.file.txt åˆ é™¤ ${file#*/}ï¼šæ‹¿æ‰ç¬¬ä¸€æ¡ / åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼šdir1/dir2/dir3/my.file.txt ${file##*/}ï¼šæ‹¿æ‰æœ€åä¸€æ¡ / åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼šmy.file.txt ${file#*.}ï¼šæ‹¿æ‰ç¬¬ä¸€ä¸ª . åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼šfile.txt ${file##*.}ï¼šæ‹¿æ‰æœ€åä¸€ä¸ª . åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼štxt ${file%/*}ï¼šæ‹¿æ‰æœ€åæ¡ / åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š/dir1/dir2/dir3 ${file%%/*}ï¼šæ‹¿æ‰ç¬¬ä¸€æ¡ / åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š(ç©ºå€¼) ${file%.*}ï¼šæ‹¿æ‰æœ€åä¸€ä¸ª . åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š/dir1/dir2/dir3/my.file ${file%%.*}ï¼šæ‹¿æ‰ç¬¬ä¸€ä¸ª . åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š/dir1/dir2/dir3/my æå– ${file:0:5}ï¼šæå–æœ€å·¦è¾¹çš„ 5 ä¸ªå­—èŠ‚ï¼š/dir1 ${file:5:5}ï¼šæå–ç¬¬ 5 ä¸ªå­—èŠ‚å³è¾¹çš„è¿ç»­ 5 ä¸ªå­—èŠ‚ï¼š/dir2 æ›¿æ¢ ${file/dir/path}ï¼šå°†ç¬¬ä¸€ä¸ª dir ææ¢ä¸º pathï¼š/path1/dir2/dir3/my.file.txt ${file//dir/path}ï¼šå°†å…¨éƒ¨ dir ææ¢ä¸º pathï¼š/path1/path2/path3/my ====END====","tags":[{"name":"Linux","slug":"Linux","permalink":"https://lilei.pro/tags/Linux/"},{"name":"Shell","slug":"Shell","permalink":"https://lilei.pro/tags/Shell/"}]},{"title":"Those Questions","date":"2017-01-11T09:50:41.000Z","path":"2017/01/11/Those-Questions/","text":"åœ¨è®¡ç®—æœºç§‘å­¦çš„æ²™æ»©ä¸Šï¼Œæˆ‘å§‹ç»ˆæ˜¯ä¸€ä¸ªè¹¦è¹¦è·³è·³æ¡æ‹¾è´å£³çš„å­©å­ï¼Œè€Œé‚£çœŸç†çš„å¤§æµ·å°±åœ¨èº«è¾¹ï¼Œæˆ‘å´æœªèƒ½å‘ç°å®ƒã€‚ Project? Module?AppCompatActivity?AndroidManifest.xmlä¸­çš„tools:context","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"}]},{"title":"å°é²œå¼€å‘å¾®ä¿¡å°ç¨‹åºæœ‰æ„Ÿ","date":"2017-01-09T10:22:24.000Z","path":"2017/01/09/WeChat-App-Dev/","text":"é¦–æ¬¡å¼€å‘å°ç¨‹åºï¼Œå®Œæˆäº†ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼ˆåŠæˆå“ï¼‰ï¼Œæœ‰æ‰€æ€ï¼Œæœ‰æ‰€æ„Ÿ å§‹æœ«2017å¹´1æœˆ9æ—¥ï¼Œå¾®ä¿¡å°ç¨‹åºä¸Šçº¿ï¼Œæœ‹å‹åœˆé‡Œé“ºå¤©ç›–åœ°çš„å„ç§æˆªå›¾ï¼Œè¶³è§å…¶ç«çˆ†ã€‚è¯¸å¤šç§»åŠ¨åº”ç”¨å¤§å‚çº·çº·ä¸Šçº¿å„è‡ªçš„å°ç¨‹åºç‰ˆæœ¬ï¼Œç¬”è€…æ‰€åœ¨çš„Då…¬å¸ä¹Ÿæ‚„æ‚„å‘å¸ƒäº†å°ç¨‹åºï¼Œçœ‹æ¥æ˜¯åœ¨ä¿å¯†æƒ…å†µä¸‹å¼€å‘çš„ï¼Œåœ¨ä¹‹å‰ä¸€æ®µæ—¶é—´é‡Œè‡ªå·±ç«Ÿä»æœªå¬é—»ã€‚ çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚ä»Šå¤©ç¬”è€…å°±å°è¯•å¼€å‘äº†ä¸€ä¸ªå°ç¨‹åºï¼ŒåŠŸèƒ½éå¸¸ç®€å•ï¼Œè§ä¸‹æ–‡ã€‚ ç¨‹åºé¡µé¢ä¸åŠŸèƒ½æ•´ä¸ªå°ç¨‹åºåŒ…å«ä¸¤ä¸ªé¡µé¢ï¼Œç™»é™†é¡µä¸åŠŸèƒ½é¡µã€‚ç™»é™†é¡µæ˜¾ç¤ºä¸€å¼ æ¬¢è¿å›¾ç‰‡å’Œä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå½“ç”¨æˆ·è¾“å…¥æ­£ç¡®çš„æ–‡å­—åï¼Œè·³è½¬è‡³åŠŸèƒ½é¡µã€‚åŠŸèƒ½é¡µæä¾›ä¸€ä¸ªç®€å•çš„ASCIIå­—ç¬¦è½¬æ¢åŠŸèƒ½ã€‚ å®æ“ä¾ç…§å®˜æ–¹Demoï¼Œæ–°å»ºä¸¤ä¸ªé¡µé¢ç›®å½•ï¼Œå¸ƒå±€å†™å…¥wxmlï¼Œé€»è¾‘å†™å…¥jsã€‚ ä»£ç è¿‡äºç®€å•ï¼Œè€Œä¸”æ¶‰åŠä¸ªäººéšç§ï¼Œç•¥å»ä¸æã€‚ç€é‡è°ˆæ€è€ƒä¸æ„Ÿæƒ³ã€‚ æ€è€ƒä¸æ„Ÿæƒ³æ¶æ„æ•´ä½“çœ‹æ¥ï¼Œå°ç¨‹åºçš„ç»“æ„è¿˜æ˜¯å¾ˆæ¸…æ™°çš„ã€‚ æŒ‰é¡µé¢ç»„ç»‡ï¼Œæ¯ä¸ªé¡µé¢æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ æ–‡ä»¶å¤¹ä¸‹ï¼Œwxmlï¼ˆå¸ƒå±€ï¼‰ï¼Œjsonï¼ˆé…ç½®ï¼‰ï¼Œwxssï¼ˆæ ·å¼ï¼‰ï¼Œjsï¼ˆé€»è¾‘ï¼‰ï¼Œè‡ªå¸¦æ•°æ®ç»‘å®šï¼Œæ¥è¿‘è®¾è®¡æ¨¡å¼ä¸­çš„MVVMæ¨¡å¼ å®˜æ–¹é›†æˆç™»é™†ã€å®šä½ã€åœ°å›¾ã€æ”¯ä»˜ã€åˆ†äº«ã€ç½‘ç»œè¯·æ±‚ç­‰åŸºç¡€æœåŠ¡ï¼Œå‡å°‘äºŒæ¬¡å¼€å‘æˆæœ¬ å¦ä¸€æ–¹é¢ï¼Œè¿™ä¹Ÿé™åˆ¶äº†å¼€å‘è€…å¯¹äºåº•å±‚å·¥å…·çš„é€‰æ‹©ï¼Œåªèƒ½å¯„å¸Œæœ›äºå¾®ä¿¡æä¾›çš„APIè¶³å¤Ÿå¼ºå¤§ä¸é«˜æ•ˆï¼Œå› ä¸ºä½ å‹æ ¹ä¹Ÿæ²¡æœ‰åˆ«çš„åŠæ³•å»ä¿®æ”¹åº•å±‚æœåŠ¡ å¼€å‘è€…å·¥å…·ç›®å‰çœ‹æ¥ï¼Œå¾®ä¿¡å®˜æ–¹æä¾›çš„å¼€å‘è€…å·¥å…·åªæ˜¯ä¸ªåŠæˆå“ï¼Œç”±äºç¼ºå°‘ä¸€äº›å¸¸ç”¨åŠŸèƒ½ï¼Œä½¿ç”¨èµ·æ¥åè€Œä¼šç¢æ‰‹ç¢è„šï¼Œæ‹–æ…¢å¼€å‘é€Ÿåº¦ã€‚å»ºè®®å¼€å‘è€…ä½¿ç”¨è‡ªå·±ä¹ æƒ¯çš„å·¥å…·è¿›è¡Œå¼€å‘ï¼Œåªä½¿ç”¨å®˜æ–¹å¼€å‘å·¥å…·ä¸­çš„é¢„è§ˆ&amp;å‘å¸ƒåŠŸèƒ½ã€‚ å®˜æ–¹å¼€å‘è€…å·¥å…·çš„ä¸€äº›æ§½ç‚¹ å¿«æ·é”®åŒ®ä¹ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå…³é—­æ–‡ä»¶ï¼Œè‡ªåŠ¨æ ¼å¼åŒ–â€¦â€¦ æ— æ³•æ‰¹é‡æ“ä½œæ–‡ä»¶ æ— æ³•æ‰¹é‡é‡å‘½åå˜é‡ æ— æ³•å…¨å±€æœç´¢ ä¸æ”¯æŒLess Wxmlæ ‡ç­¾ä¸­ä¸æ”¯æŒé”®ç›˜å±•å¼€/æ”¶èµ·èŠ‚ç‚¹ wxmlã€wxssåœ¨sublimeç­‰ç¼–è¾‘å™¨ä¸­æ— è¯­æ³•é«˜äº® å¶å°”å‡ºç°è°ƒè¯•é¢æ¿ä¸­åªæ˜¾ç¤ºConsole Sources Networkä¸‰ä¸ªæ ‡ç­¾çš„bugï¼Œé‡æ–°ä¸‹è½½åè§£å†³ å‘å¸ƒè¿™æ˜¯ç¬”è€…æœ€ä¸å–œæ¬¢çš„ä¸€ç‚¹ï¼Œå¿…é¡»ä»¥å…¬å¸/ä¼ä¸š/åª’ä½“/æ”¿åºœæœºå…³çš„èº«ä»½è¿›è¡Œè®¤è¯åï¼Œæ‰èƒ½å‘å¸ƒåˆ°çº¿ä¸Šï¼Œå®Œå…¨å µæ­»äº†ä¸ªäººå¼€å‘è€…å‘å¸ƒçš„é“è·¯ã€‚ ä¸€äº›æ€è€ƒå¼ å°é¾™çš„é‡å¿ƒå¾ˆå¤§ï¼Œå½“å¾®ä¿¡å æ®äº†8äº¿æ‰‹æœºå…¥å£åï¼Œè¿™é‡å¿ƒå¼€å§‹æ˜¾éœ²å‡ºæ¥â€”â€”â€”â€”å¾®ä¿¡ä¸ä¼šæ»¡è¶³äºåªåšä¸€ä¸ªé€šè®¯è½¯ä»¶ï¼Œå®ƒæ­£è¯•å›¾æˆä¸ºä¸€ä¸ªå…¥å£ï¼Œä¸€ä¸ªè§¦è¾¾ä½¿ç”¨è€…ç”Ÿæ´»æ–¹æ–¹é¢é¢çš„å…¥å£ã€‚ä¸€æ—¦è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿè¢«è¯æ˜æ˜¯è¡Œä¹‹æœ‰æ•ˆçš„ï¼Œæœªæ¥äººä»¬æ‰‹æœºä¸Šå¯èƒ½åªä¼šå®‰è£…ä¸€ä¸ªå¾®ä¿¡ã€‚ å¯¹äºå¼€å‘è€…ï¼Œå°¤å…¶æ˜¯Android/iOSå¼€å‘è€…ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼Œä»–ä»¬å¯èƒ½éœ€è¦æ”¹è¡Œå†™js/cssäº†ã€‚ æ”¯ä»˜å®åœ°ä½å—åˆ°å¨èƒï¼Œé˜¿é‡Œææˆæœ€å¤§è¾“å®¶ã€‚ ä»¥ä¸Šçš„ä¸€åˆ‡ï¼Œéƒ½å»ºç«‹åœ¨å°ç¨‹åºçœŸæ­£è·‘å¾—å¤Ÿå¿«ã€å¤Ÿå¥½çš„åŸºç¡€ä¸Šï¼Œç›®å‰çœ‹æ¥è¿™æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ¯”èµ·åŸç”Ÿç³»ç»Ÿï¼Œå°ç¨‹åºçš„ä½“éªŒè¦ä¸‹é™è®¸å¤šï¼Œå°¤å…¶æ˜¯Tap/Scrolläº‹ä»¶ï¼Œå¡é¡¿éå¸¸æ˜æ˜¾ã€‚ é™„1: ASCIIå¯¹ç…§è¡¨ é™„2: JavaScriptä¸­è·å–å­—ç¬¦çš„ASCIIå€¼ï¼Œä»¥åŠå°†ACSIIè½¬æ¢ä¸ºå­—ç¬¦123var x = 'c';var ascii = c.charCodeAt(); // 99var y = String.fromCharCode(ascii); // 'c' ======Ending======","tags":[{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://lilei.pro/tags/å¾®ä¿¡å°ç¨‹åº/"}]},{"title":"Android SDKä¸‹è½½æé€Ÿä»£ç†åœ°å€","date":"2017-01-09T00:55:17.000Z","path":"2017/01/09/Android-SDK-Manager-Proxy-Server/","text":"HTTP Proxy Server: android-mirror.bugly.qq.comHTTP Proxy Port: 8080 åœ¨Android SDK Managerä¸­å¦‚ä¸Šé…ç½®å³å¯ï¼Œä¸ºé¹…å‚ç‚¹èµğŸ‘ è®°å¾—å‹¾é€‰ä¸‹é¢çš„Force https://... sources to be fetched using http://... ======Ending======","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"Android Studio","slug":"Android-Studio","permalink":"https://lilei.pro/tags/Android-Studio/"}]},{"title":"Android WebView ä»0åˆ°1ï¼ˆäºŒï¼‰","date":"2016-11-10T00:31:11.000Z","path":"2016/11/10/Android-WebView-0-to-1-part-2/","text":"WebViewä¸­clearCacheçš„æ‰§è¡Œè¿‡ç¨‹æºç åˆ†æã€‚ å‰æƒ…æè¦ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å¯¹Android WebViewçš„loadUrlæ–¹æ³•è¿›è¡Œäº†åˆ†æï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥çœ‹çœ‹clearCacheç©¶ç«Ÿåšäº†ä»€ä¹ˆäº‹ï¼Œè¿›è€Œææ¸…æ¥šWebViewä¸­çš„ç¼“å­˜æœºåˆ¶ã€‚ WebView.clearCacheclearCacheçš„æºç å¾ˆç®€å•ï¼Œå”¯ä¸€çš„å‚æ•°includeDiskFilesä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚å¦‚å‰ç¯‡æ‰€è¿°ï¼ŒWebViewçš„å¤§éƒ¨åˆ†æ“ä½œï¼Œéƒ½æ˜¯ä»£ç†ç»™WebViewProvideræ¥è¿›è¡Œï¼ŒclearCacheä¹Ÿä¸ä¾‹å¤–ã€‚ä¸è¿‡å¯ä»¥å‘ç°ï¼Œè¿™é‡Œæœ‰ä¸ªcheckThread()çš„æ“ä½œï¼Œè¿™æ˜¯æ¥è¿›è¡Œä»€ä¹ˆçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬åœ¨æºç ä¸­ä¸€æ¢ç©¶ç«Ÿã€‚ 12345678910/** * Clears the resource cache. Note that the cache is per-application, so * this will clear the cache for all WebViews used. * * @param includeDiskFiles if false, only the RAM cache is cleared */public void clearCache(boolean includeDiskFiles) &#123; checkThread(); mProvider.clearCache(includeDiskFiles);&#125; 123456789101112131415161718private void checkThread() &#123; // Ignore mWebViewThread == null because this can be called during in the super class // constructor, before this class's own constructor has even started. if (mWebViewThread != null &amp;&amp; Looper.myLooper() != mWebViewThread) &#123; Throwable throwable = new Throwable( \"A WebView method was called on thread '\" + Thread.currentThread().getName() + \"'. \" + \"All WebView methods must be called on the same thread. \" + \"(Expected Looper \" + mWebViewThread + \" called on \" + Looper.myLooper() + \", FYI main Looper is \" + Looper.getMainLooper() + \")\"); Log.w(LOGTAG, Log.getStackTraceString(throwable)); StrictMode.onWebViewMethodCalledOnWrongThread(throwable); if (sEnforceThreadChecking) &#123; throw new RuntimeException(throwable); &#125; &#125;&#125; å¼€å¤´æ³¨é‡Šé‡Œå°±å·²ç»è¯´æ˜ï¼Œå¿½ç•¥mWebViewThreadä¸ºnullçš„æƒ…å†µï¼Œå› ä¸ºå¯èƒ½ä¼šåœ¨è¶…ç±»çš„æ„é€ å™¨é‡Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶WebViewè¿™ä¸ªç±»çš„å¯¹è±¡è¿˜æ²¡æœ‰æ„å»ºå‡ºæ¥ï¼Œæ„å‘³ç€mWebViewThreadä¸ºnullã€‚ifæ¡ä»¶ä¸­çš„Looper.myLooper() != mWebViewThreadè¿™æ¡åˆ¤æ–­ï¼Œå¯¹Androidç³»ç»Ÿæœ‰è¿‡ä¸€å®šäº†è§£çš„äººçš„äººï¼Œåº”è¯¥ä¼šå¯¹Looper.myLooper()è¿™ç§å†™æ³•éå¸¸ç†Ÿæ‚‰ï¼Œè¿™æ˜¯è·å–å½“å‰çº¿ç¨‹çš„å…¸å‹æ‰‹æ®µã€‚å¦‚æœå½“å‰çº¿ç¨‹ä¸æ˜¯WebViewçº¿ç¨‹çš„è¯ï¼Œå°±è¦åšå¥½æŠ›å‡ºå¼‚å¸¸çš„å‡†å¤‡ã€‚ä¸ºä»€ä¹ˆè¦åšè¿™ç§åˆ¤æ–­å‘¢ï¼Ÿæˆ‘åˆ†æäº†10åˆ†é’Ÿï¼Œå¾—å‡ºç»“è®ºæ˜¯ï¼šå› ä¸ºWebViewä¸­å¾ˆå¤šæ“ä½œï¼Œéƒ½éœ€è¦è¿ç”¨çº¿ç¨‹å†…éƒ¨èµ„æºï¼Œå¦‚æœåœ¨å¤–éƒ¨çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œå¾ˆå®¹æ˜“å‡ºç°å¹¶å‘é—®é¢˜ï¼Œå¦‚æœè¦é¿å…ï¼Œå°±åªæœ‰å¢åŠ åŒæ­¥çš„æˆæœ¬ï¼Œæ‰€ä»¥ç´¢æ€§åªé™åˆ¶åœ¨çº¿ç¨‹å†…äº†ã€‚æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºWebViewæ˜¯ä¸€ä¸ªUIç»„ä»¶ï¼Œå¤§éƒ¨åˆ†æ—¶é—´é‡Œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸­åˆå§‹åŒ–ï¼Œå› æ­¤ï¼Œè¿™é‡Œåˆ¤æ–­çš„å°±æ˜¯å½“å‰çº¿ç¨‹æ˜¯å¦ä¸ºUIçº¿ç¨‹ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹WebViewProviderä¸­çš„clearCacheæ–¹æ³•ï¼Œä¾æ—§æ˜¯WebViewChromium.javaã€‚ 1234@Overridepublic void clearCache(boolean includeDiskFiles) &#123; mAwContents.clearCache(includeDiskFiles);&#125; åŒæ ·ï¼Œè¿™ä¸ªæ“ä½œè¢«ä»£ç†ç»™äº†AwContentsï¼Œæºç è§AwContents.javaã€‚éœ€è¦æ³¨æ„ï¼Œç”±äºappå†…æ‰€æœ‰çš„WebViewç¼“å­˜éƒ½æ˜¯ä¿å­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ¸…ç©ºappå…¨éƒ¨WebViewçš„ç¼“å­˜ï¼Œå‚æ•°includeDiskFilesæ§åˆ¶æ¸…ç©ºç¡¬ç›˜ä¸Šçš„ç¼“å­˜æ–‡ä»¶ã€‚ 12345678910/** * Clears the resource cache. Note that the cache is per-application, so this will clear the * cache for all WebViews used. * * @param includeDiskFiles if false, only the RAM cache is cleared */public void clearCache(boolean includeDiskFiles) &#123; if (mNativeAwContents == 0) return; nativeClearCache(mNativeAwContents, includeDiskFiles);&#125; å¯¹åº”çš„å®ç°ä½äºaw_contents.ccä»£ç ã€‚å…ˆæ£€æµ‹å½“å‰çº¿ç¨‹ä¸ºUIçº¿ç¨‹ï¼Œç„¶åè°ƒç”¨render_view_host_ext_çš„ClearCacheæ–¹æ³•ï¼Œå¦‚æœéœ€è¦æ¸…ç©ºç¡¬ç›˜ä¸Šçš„ç¼“å­˜çš„è¯ï¼Œè°ƒç”¨RemoveHttpDiskCache(web_contents_-&gt;GetRenderProcessHost())ã€‚é€ä¸ªæ¥åˆ†æã€‚ 12345678void AwContents::ClearCache(JNIEnv* env, const JavaParamRef&lt;jobject&gt;&amp; obj, jboolean include_disk_files) &#123; DCHECK_CURRENTLY_ON(BrowserThread::UI); render_view_host_ext_-&gt;ClearCache(); if (include_disk_files) RemoveHttpDiskCache(web_contents_-&gt;GetRenderProcessHost());&#125; é¦–å…ˆçœ‹render_view_host_ext_-&gt;ClearCache()ï¼Œä»£ç åœ¨aw_render_view_host_ext.ccã€‚è¿™é‡Œå‘å‡ºäº†ä¸€ä¸ªä¿¡æ¯ï¼ŒAwViewMsg_ClearCacheï¼Œçœ‹å‡ºæ¥äº†ï¼Œæ˜¯å¹¿æ’­æ¨¡å¼ã€‚é‚£ä¹ˆæ¶ˆæ¯ç›‘å¬è€…åœ¨å“ªå„¿å‘¢ï¼Ÿ 1234void AwRenderViewHostExt::ClearCache() &#123; DCHECK(CalledOnValidThread()); Send(new AwViewMsg_ClearCache);&#125; ç›‘å¬è€…ä½äºaw_render_thread_observer.ccã€‚é€šè¿‡blink::WebCache::clear()è°ƒç”¨clearæ–¹æ³•ã€‚blinkç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼ŸI donâ€™t know. å€ŸåŠ©Googleçš„åŠ›é‡ï¼Œæ‰¾åˆ°äº†WebCache::clear()çš„å®ç°ã€‚ 12345678910111213bool AwRenderThreadObserver::OnControlMessageReceived( const IPC::Message&amp; message) &#123; bool handled = true; IPC_BEGIN_MESSAGE_MAP(AwRenderThreadObserver, message) IPC_MESSAGE_HANDLER(AwViewMsg_ClearCache, OnClearCache) IPC_MESSAGE_HANDLER(AwViewMsg_SetJsOnlineProperty, OnSetJsOnlineProperty) IPC_MESSAGE_UNHANDLED(handled = false) IPC_END_MESSAGE_MAP() return handled;&#125;void AwRenderThreadObserver::OnClearCache() &#123; blink::WebCache::clear();&#125; WebCache.cpp 123456void WebCache::clear()&#123; MemoryCache* cache = memoryCache(); if (cache) cache-&gt;evictResources();&#125; è·å–memoryCache()çš„æ–¹æ³•ä½äºWebCache.cppï¼Œå¯ä»¥çœ‹å‡ºè¯¥cacheæ˜¯çº¿ç¨‹ç›¸å…³çš„ï¼Œè€Œä¸”ä»å‘½åä¸Šå°±å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯MemoryCacheï¼Œä½äºRAMä¸­ã€‚ 1234567MemoryCache* memoryCache()&#123; ASSERT(WTF::isMainThread()); if (!gMemoryCache) gMemoryCache = new Persistent&lt;MemoryCache&gt;(MemoryCache::create()); return gMemoryCache-&gt;get();&#125; åˆ†æå®Œæ¸…ç†å†…å­˜ç¼“å­˜çš„è·¯å¾„ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹å¦‚ä½•æ¸…ç†ç£ç›˜ç¼“å­˜ã€‚ 123if (include_disk_files) RemoveHttpDiskCache(web_contents_-&gt;GetRenderProcessHost());&#125; RemoveHttpDiskCacheä½äºnet_disk_cache_remover.ccã€‚æ‰€åšçš„äº‹æƒ…æ˜¯ï¼Œåœ¨BrowserThreadä¸­å‘å¸ƒä¸€ä¸ªTaskï¼Œæ¸…ç†Renderè¿›ç¨‹æ‹¥æœ‰çš„ç£ç›˜ç©ºé—´ã€‚ 123456789void RemoveHttpDiskCache(content::RenderProcessHost* render_process_host) &#123; BrowserThread::PostTask( BrowserThread::IO, FROM_HERE, base::Bind(&amp;ClearHttpDiskCacheOnIoThread, base::Unretained(render_process_host-&gt;GetStoragePartition()-&gt; GetURLRequestContext()), base::Unretained(render_process_host-&gt;GetStoragePartition()-&gt; GetMediaURLRequestContext())));&#125; åˆ°è¿™é‡Œï¼Œä¼¼ä¹å‘Šä¸€æ®µè½äº†ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"æºç åˆ†æ","slug":"æºç åˆ†æ","permalink":"https://lilei.pro/tags/æºç åˆ†æ/"}]},{"title":"Android WebView ä»0åˆ°1ï¼ˆä¸€ï¼‰","date":"2016-11-09T00:22:59.000Z","path":"2016/11/09/Android-WebView-0-to-1/","text":"è¿™ä¸€ç³»åˆ—å°†ä»æºç è§’åº¦ï¼Œåˆ†æWebViewåŠ è½½é¡µé¢çš„å…¨è¿‡ç¨‹ã€‚åœ¨æ‘¸é€ç¼“å­˜æœºåˆ¶çš„åŸºç¡€ä¸Šï¼Œå®ç°è‡ªå·±çš„WebViewç¼“å­˜æ§åˆ¶é¡¹ç›®Vindowã€‚ä»0åˆ°1å¾ˆéš¾ï¼Œä½†æ˜¯å…‹æœäº†ä¹‹åï¼Œä»1åˆ°100å°±å®¹æ˜“äº†è®¸å¤šã€‚ WebView.javaè¿™é‡Œé‡‡ç”¨android-23çš„æºç ç¤ºä¾‹ã€‚ WebViewçš„ç±»è¯´æ˜æ³¨é‡Šéå¸¸é•¿ï¼Œå»ºè®®è€å¿ƒåœ°è¯»å®Œæ¯ä¸€è¡Œï¼Œéšåï¼Œä½ å°±ä¼šå¯¹WebViewçš„ä¸»è¦åŠŸèƒ½æœ‰ä¸€ä¸ªè½®å»“ä¸Šçš„è®¤è¯†ã€‚ 1234567/** * A View that displays web pages. This class is the basis upon which you * can roll your own web browser or simply display some online content within your Activity. * It uses the WebKit rendering engine to display * web pages and includes methods to navigate forward and backward * through a history, zoom in and out, perform text searches and more. * / è¿™æ®µæ˜¯è¯´ï¼ŒWebViewä¸»è¦ç”¨æ¥å±•ç¤ºç½‘é¡µä¿¡æ¯ï¼Œå®ƒä½¿ç”¨WebKitå†…æ ¸ï¼ˆè¿™é‡Œå¾ˆé‡è¦ï¼Œåç»­åˆ†æå¤§éƒ¨åˆ†æºç éƒ½æ˜¯æ¥è‡ªWebKitçš„ï¼‰ï¼ŒåŒ…å«äº†æ§åˆ¶ç½‘é¡µå‰è¿›åé€€çš„å¯¼èˆªåŠŸèƒ½ã€ç¼©æ”¾åŠŸèƒ½ã€æ–‡æœ¬æœç´¢åŠŸèƒ½ä»¥åŠå…¶ä»–ã€‚ 12345678910111213/** * By default, a WebView provides no browser-like widgets, does not * enable JavaScript and web page errors are ignored. If your goal is only * to display some HTML as a part of your UI, this is probably fine; * the user won't need to interact with the web page beyond reading * it, and the web page won't need to interact with the user. If you * actually want a full-blown web browser, then you probably want to * invoke the Browser application with a URL Intent rather than show it * with a WebView. * Uri uri = Uri.parse(\"http://www.example.com\"); * Intent intent = new Intent(Intent.ACTION_VIEW, uri); * startActivity(intent); * / è¿™é‡Œå¼ºè°ƒäº†ï¼ŒWebViewåº”å½“ä»…ä»…æä¾›å±•ç¤ºï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦ç”¨JavaScriptï¼Œå¹¶ä¸”éšè—ç½‘é¡µé”™è¯¯ä¿¡æ¯çš„ã€‚æ¢å¥è¯è¯´ï¼ŒGoogleæœ¬æ„æ˜¯ä¸æå€¡åœ¨WebViewä¸­å¼•å¯¼ç”¨æˆ·è¿›è¡Œè¿‡å¤šçš„æ“ä½œï¼Œå¦‚æœæœ‰è¿™ç§éœ€æ±‚ï¼Œå°±é€šè¿‡intentæ‰“å¼€æµè§ˆå™¨é¡µé¢è¿›è¡Œæ“ä½œã€‚ç„¶è€Œå½“ä¸‹è¿™æ¡è§„åˆ™åœ¨å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸‹æ˜¯è¢«æ— è§†çš„ï¼Œæƒ³æƒ³å¾®ä¿¡åœ¨H5é¡µé¢é‡Œï¼Œå¯ä»¥åšå¤šå°‘äº‹ã€‚ 1234567891011121314151617181920212223242526/** * &lt;p&gt;A WebView has several customization points where you can add your * own behavior. These are:&lt;/p&gt; * * &lt;ul&gt; * &lt;li&gt;Creating and setting a &#123;@link android.webkit.WebChromeClient&#125; subclass. * This class is called when something that might impact a * browser UI happens, for instance, progress updates and * JavaScript alerts are sent here (see &lt;a * href=\"&#123;@docRoot&#125;guide/developing/debug-tasks.html#DebuggingWebPages\"&gt;Debugging Tasks&lt;/a&gt;). * &lt;/li&gt; * &lt;li&gt;Creating and setting a &#123;@link android.webkit.WebViewClient&#125; subclass. * It will be called when things happen that impact the * rendering of the content, eg, errors or form submissions. You * can also intercept URL loading here (via &#123;@link * android.webkit.WebViewClient#shouldOverrideUrlLoading(WebView,String) * shouldOverrideUrlLoading()&#125;).&lt;/li&gt; * &lt;li&gt;Modifying the &#123;@link android.webkit.WebSettings&#125;, such as * enabling JavaScript with &#123;@link android.webkit.WebSettings#setJavaScriptEnabled(boolean) * setJavaScriptEnabled()&#125;. &lt;/li&gt; * &lt;li&gt;Injecting Java objects into the WebView using the * &#123;@link android.webkit.WebView#addJavascriptInterface&#125; method. This * method allows you to inject Java objects into a page's JavaScript * context, so that they can be accessed by JavaScript in the page.&lt;/li&gt; * &lt;/ul&gt; * / é»˜è®¤WebViewçš„å¾ˆå¤šåŠŸèƒ½æ˜¯å…³é—­çš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ‰“å¼€ã€‚è¿™é‡Œåˆ—å‡ºäº†å¦‚ä½•å¤„ç†JS Alertä¸é”™è¯¯ã€å¦‚ä½•å¼€å¯JSã€å¦‚ä½•ä½¿nativeä»£ç ä¸é¡µé¢JSè¿›è¡Œäº¤äº’ã€‚ 123456// Implementation notes.// The WebView is a thin API class that delegates its public API to a backend WebViewProvider// class instance. WebView extends &#123;@link AbsoluteLayout&#125; for backward compatibility reasons.// Methods are delegated to the provider implementation: all public API methods introduced in this// file are fully delegated, whereas public and protected methods from the View base classes are// only delegated where a specific need exists for them to do so. ä¸Šé¢è¿™æ®µè¯´æ˜äº†WebViewä¸»è¦çš„å®ç°æœºç†â€”â€”â€”â€”WebViewæœ¬èº«åªæ˜¯ä¸€ä¸ªä»£ç†ï¼ˆdelegateï¼‰ï¼Œæä¾›äº†å…¬å…±çš„APIä¾›å®¢æˆ·ç«¯è°ƒç”¨ï¼Œè€Œè¿™äº›APIçš„å®ç°ï¼Œéƒ½æ˜¯ä»£ç†åˆ°äº†ä¸€ä¸ªå«WebViewProviderçš„å¯¹è±¡ä¸Šé¢ã€‚æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¤§è‡´æµè§ˆä¸‹WebViewæœ‰å“ªäº›å…¬æœ‰APIï¼ŒæŠŠæ›´å¤šçš„ç²¾åŠ›ä¿ç•™ä¸‹æ¥ï¼Œé›†ä¸­åˆ†æWebViewProviderçš„å®ç°ã€‚ WebView APIè¿™éƒ¨åˆ†ä¸ç½—åˆ—äº†ï¼Œåªåšä¸€ä¸ªç®€å•çš„å½’ç±»ï¼ŒAPIæ–‡æ¡£è§ https://developer.android.com/reference/android/webkit/WebView.html åŠ è½½é¡µé¢è¿™æ˜¯æœ€ä¸»è¦çš„åŠŸèƒ½ï¼Œå…¨éƒ¨ç”±ä»£ç†Providerå®Œæˆ loadUrl postUrl loadData loadDataWithBaseURL getUrlï¼ŒgetOriginalUrl getFaviconï¼ŒgetTouchIconUrl ä¿å­˜é¡µé¢ï¼šsaveWebArchive æ§åˆ¶åŠ è½½ï¼šstopLoadingï¼Œreloadï¼ŒgetProgress é¡µé¢å°ºå¯¸ï¼šgetContentHeightï¼ŒgetContentWidth è®¡æ—¶å™¨ JSä¸­çš„è®¡æ—¶å™¨ï¼Œåœ¨onPauseæ—¶å¯ä»¥æš‚åœï¼ŒonResumeæ—¶æ¢å¤ï¼špauseTimersï¼ŒresumeTimers å¯¼èˆª canGoBackï¼ŒcanGoForwardï¼ŒcanGoBackOrForward goBackï¼ŒgoForwardï¼ŒgoBackOrForward pageUpï¼ŒpageDown copyBackForwardList JavaScript evaluateJavascript addJavascriptInterfaceï¼ŒremoveJavascriptInterface WebViewClientï¼WebChromeClient setWebViewClientï¼šWebViewæœ¬èº«æ˜¯æ§åˆ¶é¡µé¢æ•´ä½“æ¡†æ¶çš„å‰è¿›ã€åé€€ã€ç¼©æ”¾ã€åŠ è½½ç­‰åŠŸèƒ½ï¼Œè€Œå…·ä½“é¡µé¢å†…å®¹çš„å˜åŒ–ï¼Œåˆ™è¦äº¤ç»™WebViewClientæ¥ç®¡ç†ã€‚ setWebChromeClientï¼šWebChromeClientä¸»è¦è¾…åŠ©WebViewå¤„ç†Javascriptçš„å¯¹è¯æ¡†ã€ç½‘ç«™å›¾æ ‡ã€ç½‘ç«™titleã€åŠ è½½è¿›åº¦ç­‰ã€‚å¦‚æœé¡µé¢åªæ˜¯ç®€å•åœ°å±•ç¤ºHTMLï¼Œå¹¶æ²¡æœ‰JSæ“ä½œï¼Œé‚£ä¹ˆç”¨WebViewClientå°±è¶³å¤Ÿäº†ã€‚ ä¸‹è½½ å®Œæˆä¸‹è½½ç›‘å¬å™¨ï¼šsetDownloadListener æŸ¥æ‰¾ é€šè¿‡FindListenerå›è°ƒæ¥å£å®ç°ï¼šsetFindListenerï¼ŒfindNextï¼ŒfindAllâ€¦â€¦ ç¼©æ”¾ å±•ç¤ºç¼©æ”¾æ§ä»¶ï¼šinvokeZoomPicker æ§åˆ¶ç¼©æ”¾ï¼šzoomInï¼ŒzoomOutâ€¦â€¦ å®‰å…¨è®¤è¯ è¯ä¹¦æ“ä½œï¼šgetCertificateï¼ŒsetCertificateï¼ˆdeprecatedï¼‰ï¼Œ ç”¨æˆ·åå¯†ç ï¼šsetHttpAuthUsernamePasswordï¼ŒgetHttpAuthUsernamePassword ç§å¯†æ¨¡å¼ï¼šisPrivateBrowsingEnabled è®¾ç½®ç½‘ç»œ ç½‘ç»œå¯ç”¨æ€§ï¼šsetNetworkAvailable ä¿å­˜çŠ¶æ€ ä»£ç†ç»™Providerè¿›è¡Œï¼šsaveStateï¼ŒrestoreState ç”Ÿå‘½å‘¨æœŸä¸å›è°ƒ postVisualStateCallback é¡µé¢å†…å®¹æ ‡ç­¾ HitTestResultç³»åˆ—ï¼šgetHitTestResult Cacheä¸è®¿é—®å†å²æœ¬ç³»åˆ—æ–‡ç« é‡ç‚¹äº†è§£çš„å†…å®¹ï¼Œä»£ç†ç»™Providerå®ç° clearCache clearFormData clearHistory clearSslPreferences è¢«åºŸå¼ƒçš„æ–¹æ³• è®¾ç½®æ»šåŠ¨æ¡æ ·å¼ï¼šsetHorizontalScrollbarOverlayï¼ŒsetVerticalScrollbarOverlayï¼ŒoverlayHorizontalScrollbarï¼ŒoverlayVerticalScrollbarâ€¦â€¦ è·å–Titleé«˜åº¦ï¼šgetVisibleTitleHeight å¹³å°é€šçŸ¥ï¼šenablePlatformNotificationsï¼ŒdisablePlatformNotifications å›¾ç‰‡æ“ä½œï¼šsavePictureï¼ŒrestorePictureâ€¦â€¦ å†…å­˜ï¼šfreeMemory Pluginsï¼šgetPluginListï¼ŒrefreshPluginsâ€¦â€¦ WebViewProviderå‰é¢è¯´äº†ï¼ŒWebViewçš„åŠŸèƒ½å‡ ä¹å…¨éƒ¨éƒ½æ˜¯ä»£ç†ç»™WebViewProvideræ¥å®ç°çš„ï¼Œandroid.webkit.WebViewProvideræ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…¶å®ç°è¦è¿½æº¯æºç ï¼Œæ®ç‰ˆæœ¬ä¸åŒæœ‰æ‰€åŒºåˆ†ã€‚ Android4.4ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œç”±WebViewClassicå®ç°ã€‚ Android4.4ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ï¼Œç”±WebViewChromiumå®ç°ã€‚ éšSDKä¸‹è½½çš„æºç é‡Œä¸åŒ…å«è¿™éƒ¨åˆ†ä»£ç ï¼Œåœ¨è¿™ä¸ªé¡µé¢æŸ¥çœ‹ï¼šWebViewChromium.java WebViewChromiumç±»å®ç°äº†WebViewä¸­è¢«ä»£ç†çš„å…¨éƒ¨æ–¹æ³•ï¼Œç¯‡å¹…æ‰€é™ï¼Œæˆ‘ä»¬ä¸é€ä¸€è¿›è¡Œåˆ†æï¼Œåªè¿½è¸ªæˆ‘ä»¬å…³æ³¨çš„åŠ è½½é¡µé¢ï¼cacheç›¸å…³ï¼Œä¹Ÿå°±æ˜¯loadUrlå’ŒclearCacheä¸¤ä¸ªæ–¹æ³•ã€‚ loadUrl123456789101112@Overridepublic void loadUrl(String url) &#123; loadUrl(url, null);&#125;@Overridepublic void loadUrl(String url, Map&lt;String, String&gt; additionalHttpHeaders) &#123; // TODO: We may actually want to do some sanity checks here (like filter about://chrome). LoadUrlParams params = new LoadUrlParams(url); if (additionalHttpHeaders != null) params.setExtraHeaders(additionalHttpHeaders); mAwContents.loadUrl(params);&#125; æˆ‘ä»¬é€šå¸¸æ‰€ç”¨çš„loadUrl(&quot;http://www.foo.com&quot;)ï¼Œä¼šèµ°åˆ°loadUrl(String url, Map&lt;String, String&gt; additionalHttpHeaders)è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°é¦–å…ˆæŠŠurlæ‹¼è£…æˆäº†ä¸€ä¸ªLoadUrlParamsï¼Œé‚£ä¹ˆè¿™ä¸ªLoadUrlParamsæ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿ LoadUrlParams.java1234567891011121314151617181920212223242526272829303132333435363738394041424344/** * Holds parameters for ContentViewCore.LoadUrl. Parameters should match * counterparts in NavigationController::LoadURLParams, including default * values. */@JNINamespace(\"content\")public class LoadUrlParams &#123; // Should match NavigationController::LoadUrlType exactly. See comments // there for proper usage. Values are initialized in initializeConstants. public static int LOAD_TYPE_DEFAULT; public static int LOAD_TYPE_BROWSER_INITIATED_HTTP_POST; public static int LOAD_TYPE_DATA; // Should match NavigationController::UserAgentOverrideOption exactly. // See comments there for proper usage. Values are initialized in // initializeConstants. public static int UA_OVERRIDE_INHERIT; public static int UA_OVERRIDE_FALSE; public static int UA_OVERRIDE_TRUE; // Fields with counterparts in NavigationController::LoadURLParams. // Package private so that ContentViewCore.loadUrl can pass them down to // native code. Should not be accessed directly anywhere else outside of // this class. final String mUrl; int mLoadUrlType; int mTransitionType; int mUaOverrideOption; private Map&lt;String, String&gt; mExtraHeaders; byte[] mPostData; String mBaseUrlForDataUrl; String mVirtualUrlForDataUrl; boolean mCanLoadLocalResources; public LoadUrlParams(String url) &#123; // Check initializeConstants was called. assert LOAD_TYPE_DEFAULT != LOAD_TYPE_BROWSER_INITIATED_HTTP_POST; mUrl = url; mLoadUrlType = LOAD_TYPE_DEFAULT; mTransitionType = PageTransitionTypes.PAGE_TRANSITION_LINK; mUaOverrideOption = UA_OVERRIDE_INHERIT; mPostData = null; mBaseUrlForDataUrl = null; mVirtualUrlForDataUrl = null; &#125; // ä»¥ä¸‹ç•¥&#125; ä¸€ä¸ªURLç«Ÿç„¶å¯ä»¥è§£æå‡ºè¿™ä¹ˆå¤šä¸œè¥¿æ¥ï¼Œé€ä¸ªçœ‹çœ‹è¿™äº›å˜é‡çš„å«ä¹‰ï¼šï¼ˆå‚è€ƒnavigation_controller.hï¼‰ mUrlï¼šæœ€åŸå§‹çš„URL mLoadUrlTypeï¼šåŠ è½½ç±»å‹ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§ LOAD_TYPE_DEFAULTï¼šé»˜è®¤ç±»å‹ï¼Œä»¥ä¸‹ä¸¤ç§ä»¥å¤–çš„ä»»æ„ç±»å‹ã€‚ LOAD_TYPE_BROWSER_INITIATED_HTTP_POSTï¼šPOSTè¯·æ±‚éœ€è¦è®¾ç½®æ­¤ç±»å‹ã€‚ LOAD_TYPE_DATAï¼šä½¿ç”¨Base64ç¼–ç çš„å›¾ç‰‡ç±»å‹ï¼Œé€šè¿‡Base64ç¼–ç å›¾ç‰‡èƒ½å¤Ÿå‡å°‘ä¸€æ¬¡ç½‘ç»œèµ„æºåŠ è½½ã€‚(å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¿™ä¸¤ä¸ªå·¥å…·ï¼ŒæŸ¥çœ‹å¦‚ä½•åœ¨å›¾ç‰‡ä¸Base64ç¼–ç ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼šhttp://dataurl.net/#dataurlmaker http://codebeautify.org/base64-to-image-converter) mTransitionTypeï¼šé¡µé¢å˜åŒ–çš„ç±»å‹ï¼ˆå®åœ¨æ‰¾ä¸å‡ºåˆé€‚çš„è¯è¯­æ¥æè¿°ï¼‰ï¼Œé»˜è®¤ä¸ºï¼Œè¯¦è§page_transition_types.hï¼Œä¸¾ä¾‹è¯´æ˜ï¼š PAGE_TRANSITION_LINKï¼šé»˜è®¤å€¼ï¼Œç‚¹å‡»link PAGE_TRANSITION_TYPEDï¼šåœ¨åœ°å€æ è¾“å…¥link PAGE_TRANSITION_RELOADï¼šåˆ·æ–°é¡µé¢ ç•¥ mUaOverrideOptionï¼šæ§åˆ¶httpä¸­çš„UserAgentï¼Œæœ‰ä¸‰ä¸ªå¯é€‰å€¼ UA_OVERRIDE_INHERITï¼šé»˜è®¤å€¼ï¼ŒUse the override value from the previous NavigationEntry in the NavigationController. UA_OVERRIDE_FALSEï¼šUse the default user agent UA_OVERRIDE_TRUEï¼šUse the user agent override, if itâ€™s available. mPostDataï¼šPOSTè¯·æ±‚çš„data mBaseUrlForDataUrlï¼šä»…å¯¹LOAD_TYPE_DATAæœ‰æ•ˆï¼Œç”¨äºURLçš„ç›¸å¯¹è·¯å¾„ä»¥åŠJavaScriptè·¨åŸŸæ£€éªŒã€‚ mVirtualUrlForDataUrlï¼šä»…å¯¹LOAD_TYPE_DATAæœ‰æ•ˆï¼Œæ˜¾ç¤ºåœ¨å¤–ç»™ç”¨æˆ·çœ‹çš„åœ°å€ã€‚ åˆ†æå®Œäº†LoadUrlParamsï¼Œç»§ç»­è¿½æº¯WebViewChromiumä¸­çš„loadUrlæ–¹æ³•ã€‚ 1if (additionalHttpHeaders != null) params.setExtraHeaders(additionalHttpHeaders); è¿™é‡Œè®¾ç½®çš„ExtraHeadersæ˜¯ä¸€ä¸ªMapï¼Œå…·ä½“å‚è§httpåè®®çš„headeréƒ¨åˆ†ã€‚ 1mAwContents.loadUrl(params); æœ€ç»ˆäº¤ç»™AwContentå¯¹è±¡å¤„ç†ï¼Œå®Œæ•´æºç è§AwContents.javaã€‚â€Awâ€æ˜¯â€Android WebViewâ€çš„ç¼©å†™ã€‚ 12345678/** * Exposes the native AwContents class, and together these classes wrap the ContentViewCore * and Browser components that are required to implement Android WebView API. This is the * primary entry point for the WebViewProvider implementation; it holds a 1:1 object * relationship with application WebView instances. * (We define this class independent of the hidden WebViewProvider interfaces, to allow * continuous build &amp; test in the open source SDK-based tree). */ ä¸Šè¿°æ³¨é‡Šä¸­æœ€é‡è¦çš„æ˜¯This is the primary entry point for the WebViewProvider implementation; it holds a 1:1 object relationship with application WebView instances.è¿™ä¸€å¥ï¼Œè¯´æ˜æ¯ä¸€ä¸ªWebViewç¤ºä¾‹ï¼Œéƒ½æœ‰ä¸€ä¸ªAwContentå¯¹è±¡å’Œå®ƒå¯¹åº”ã€‚åŒæ ·ï¼Œæˆ‘ä»¬åªå…³æ³¨loadUrlæ–¹æ³•ï¼Œè¿™é‡Œé€šè¿‡æˆ‘ä»¬ä¸Šä¸€æ­¥åˆ†æçš„LoadUrlParamså‚æ•°è¿›è¡ŒåŠ è½½ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/** * Load url without fixing up the url string. Consumers of ContentView are responsible for * ensuring the URL passed in is properly formatted (i.e. the scheme has been added if left * off during user input). * * @param params Parameters for this load. */ public void loadUrl(LoadUrlParams params) &#123; if (params.getLoadUrlType() == LoadUrlParams.LOAD_TYPE_DATA &amp;&amp; !params.isBaseUrlDataScheme()) &#123; // This allows data URLs with a non-data base URL access to file:///android_asset/ and // file:///android_res/ URLs. If AwSettings.getAllowFileAccess permits, it will also // allow access to file:// URLs (subject to OS level permission checks). params.setCanLoadLocalResources(true); &#125; // If we are reloading the same url, then set transition type as reload. if (params.getUrl() != null &amp;&amp; params.getUrl().equals(mContentViewCore.getUrl()) &amp;&amp; params.getTransitionType() == PageTransitionTypes.PAGE_TRANSITION_LINK) &#123; params.setTransitionType(PageTransitionTypes.PAGE_TRANSITION_RELOAD); &#125; params.setTransitionType( params.getTransitionType() | PageTransitionTypes.PAGE_TRANSITION_FROM_API); // For WebView, always use the user agent override, which is set // every time the user agent in AwSettings is modified. params.setOverrideUserAgent(LoadUrlParams.UA_OVERRIDE_TRUE); // We don't pass extra headers to the content layer, as WebViewClassic // was adding them in a very narrow set of conditions. See http://crbug.com/306873 // However, if the embedder is attempting to inject a Referer header for their // loadUrl call, then we set that separately and remove it from the extra headers map/ final String REFERER = \"referer\"; Map&lt;String, String&gt; extraHeaders = params.getExtraHeaders(); if (extraHeaders != null) &#123; for (String header : extraHeaders.keySet()) &#123; if (REFERER.equals(header.toLowerCase(Locale.US))) &#123; params.setReferrer(new Referrer(extraHeaders.remove(header), 1)); params.setExtraHeaders(extraHeaders); break; &#125; &#125; &#125; if (mNativeAwContents != 0) &#123; nativeSetExtraHeadersForUrl( mNativeAwContents, params.getUrl(), params.getExtraHttpRequestHeadersString()); &#125; params.setExtraHeaders(new HashMap&lt;String, String&gt;()); mContentViewCore.loadUrl(params); // The behavior of WebViewClassic uses the populateVisitedLinks callback in WebKit. // Chromium does not use this use code path and the best emulation of this behavior to call // request visited links once on the first URL load of the WebView. if (!mHasRequestedVisitedHistoryFromClient) &#123; mHasRequestedVisitedHistoryFromClient = true; requestVisitedHistoryFromClient(); &#125; if (params.getLoadUrlType() == LoadUrlParams.LOAD_TYPE_DATA &amp;&amp; params.getBaseUrl() != null) &#123; // Data loads with a base url will be resolved in Blink, and not cause an onPageStarted // event to be sent. Sending the callback directly from here. mContentsClient.getCallbackHelper().postOnPageStarted(params.getBaseUrl()); &#125; &#125; è®¾ç½®åŠ è½½æœ¬åœ°æ–‡ä»¶ 1234567if (params.getLoadUrlType() == LoadUrlParams.LOAD_TYPE_DATA &amp;&amp; !params.isBaseUrlDataScheme()) &#123; // This allows data URLs with a non-data base URL access to file:///android_asset/ and // file:///android_res/ URLs. If AwSettings.getAllowFileAccess permits, it will also // allow access to file:// URLs (subject to OS level permission checks). params.setCanLoadLocalResources(true);&#125; é‡è®¾transitionType 12345678// If we are reloading the same url, then set transition type as reload.if (params.getUrl() != null &amp;&amp; params.getUrl().equals(mContentViewCore.getUrl()) &amp;&amp; params.getTransitionType() == PageTransitionTypes.PAGE_TRANSITION_LINK) &#123; params.setTransitionType(PageTransitionTypes.PAGE_TRANSITION_RELOAD);&#125;params.setTransitionType( params.getTransitionType() | PageTransitionTypes.PAGE_TRANSITION_FROM_API); è®¾ç½®UAä¸ºoverride 123// For WebView, always use the user agent override, which is set// every time the user agent in AwSettings is modified.params.setOverrideUserAgent(LoadUrlParams.UA_OVERRIDE_TRUE); æŠŠExtraHeadersä¸­çš„refererå±æ€§æå–å‡ºæ¥å•ç‹¬è®¾ç½®ï¼Œå¹¶å°†å…¶ä»ExtraHeadersä¸­åˆ é™¤ï¼Œrefererå±æ€§ç”¨äºå£°æ˜å½“å‰é¡µé¢æ˜¯ä»å“ªä¸ªé¡µé¢è·³è½¬æ¥çš„ã€‚ 123456789101112131415// We don't pass extra headers to the content layer, as WebViewClassic// was adding them in a very narrow set of conditions. See http://crbug.com/306873// However, if the embedder is attempting to inject a Referer header for their// loadUrl call, then we set that separately and remove it from the extra headers map/final String REFERER = \"referer\";Map&lt;String, String&gt; extraHeaders = params.getExtraHeaders();if (extraHeaders != null) &#123; for (String header : extraHeaders.keySet()) &#123; if (REFERER.equals(header.toLowerCase(Locale.US))) &#123; params.setReferrer(new Referrer(extraHeaders.remove(header), 1)); params.setExtraHeaders(extraHeaders); break; &#125; &#125;&#125; ç„¶åå¯¹äºå‰©ä¸‹çš„å±æ€§ï¼Œå•ç‹¬è®¾ç½®ï¼Œæœ€ç»ˆæ¸…æ¥šExtraHeaders 12345if (mNativeAwContents != 0) &#123; nativeSetExtraHeadersForUrl( mNativeAwContents, params.getUrl(), params.getExtraHttpRequestHeadersString());&#125;params.setExtraHeaders(new HashMap&lt;String, String&gt;()); å¯¹paramsè¿›è¡Œè¿‡ä¸Šè¿°äºŒæ¬¡åŠ å·¥åï¼Œè°ƒç”¨mContentViewCoreçš„loadUrlæ–¹æ³• 1mContentViewCore.loadUrl(params); ç»§ç»­è¿½æº¯è‡³ContentViewCore.javaï¼Œä½äºorg.chromium.content.browseråŒ…ä¸­ã€‚ 12345678910111213141516171819202122232425/** * Load url without fixing up the url string. Consumers of ContentView are responsible for * ensuring the URL passed in is properly formatted (i.e. the scheme has been added if left * off during user input). * * @param pararms Parameters for this load. */public void loadUrl(LoadUrlParams params) &#123; if (mNativeContentViewCore == 0) return; if (isPersonalityView()) &#123; // For WebView, always use the user agent override, which is set // every time the user agent in ContentSettings is modified. params.setOverrideUserAgent(LoadUrlParams.UA_OVERRIDE_TRUE); &#125; nativeLoadUrl(mNativeContentViewCore, params.mUrl, params.mLoadUrlType, params.mTransitionType, params.mUaOverrideOption, params.getExtraHeadersString(), params.mPostData, params.mBaseUrlForDataUrl, params.mVirtualUrlForDataUrl, params.mCanLoadLocalResources);&#125; è¿™é‡Œè°ƒç”¨äº†nativeLoadUrlæ–¹æ³•ï¼Œä¼ å…¥çš„å‚æ•°æˆ‘ä»¬ä¹‹å‰éƒ½å·²ç»åˆ†æè¿‡å…¶å«ä¹‰ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°mNativeContentViewCoreï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘ContentViewCoreImplçš„æŒ‡é’ˆåœ°å€ã€‚ 12// Native pointer to C++ ContentViewCoreImpl object which will be set by nativeInit().private int mNativeContentViewCore = 0; æ¥ä¸‹æ¥å°±è¦æ·±å…¥åˆ°cppæ–‡ä»¶ä¸­äº†ï¼Œcontent_view_core_impl.ccã€‚æ³¨æ„ï¼å¯èƒ½æ˜¯ç‰ˆæœ¬çš„åŸå› ï¼Œè¿™é‡Œçš„LoadUrlæ–¹æ³•å¤šå‡ºäº†ç¬¬ä¸€ä¸ªå‚æ•°JNIEnv* envï¼Œé€šè¿‡å¯¹æ¯”å¯ä»¥å‘ç°ï¼Œå…¶å®ƒçš„å‚æ•°æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839void ContentViewCoreImpl::LoadUrl( JNIEnv* env, jobject obj, jstring url, jint load_url_type, jint transition_type, jint ua_override_option, jstring extra_headers, jbyteArray post_data, jstring base_url_for_data_url, jstring virtual_url_for_data_url, jboolean can_load_local_resources) &#123; DCHECK(url); NavigationController::LoadURLParams params( GURL(ConvertJavaStringToUTF8(env, url))); params.load_type = static_cast&lt;NavigationController::LoadURLType&gt;( load_url_type); params.transition_type = PageTransitionFromInt(transition_type); params.override_user_agent = static_cast&lt;NavigationController::UserAgentOverrideOption&gt;( ua_override_option); if (extra_headers) params.extra_headers = ConvertJavaStringToUTF8(env, extra_headers); if (post_data) &#123; std::vector&lt;uint8&gt; http_body_vector; base::android::JavaByteArrayToByteVector(env, post_data, &amp;http_body_vector); params.browser_initiated_post_data = base::RefCountedBytes::TakeVector(&amp;http_body_vector); &#125; if (base_url_for_data_url) &#123; params.base_url_for_data_url = GURL(ConvertJavaStringToUTF8(env, base_url_for_data_url)); &#125; if (virtual_url_for_data_url) &#123; params.virtual_url_for_data_url = GURL(ConvertJavaStringToUTF8(env, virtual_url_for_data_url)); &#125; params.can_load_local_resources = can_load_local_resources; LoadUrl(params);&#125; GURLæ˜¯ä¸€ä¸ªå®ï¼Œè™½ç„¶ä¸äº†è§£å®ƒå…·ä½“åšäº†ä»€ä¹ˆï¼Œä½†æ˜¯æ ¹æ®ä¸Šä¸‹æ–‡å¯ä»¥çŒœæµ‹è¿™é‡Œç”Ÿæˆäº†ä¸€ä¸ªNavigationController::LoadURLParamså¯¹è±¡ 12NavigationController::LoadURLParams params( GURL(ConvertJavaStringToUTF8(env, url))); éšåå¯¹å‡ ä¸ªå‚æ•°è¿›è¡Œç±»å‹è½¬æ¢ï¼ŒæŠŠå®ƒä»¬æ‹¼å…¥paramsä¸­ï¼Œæœ€åè°ƒç”¨LoadUrl(params)æ–¹æ³•ã€‚ 12345void ContentViewCoreImpl::LoadUrl( NavigationController::LoadURLParams&amp; params) &#123; GetWebContents()-&gt;GetController().LoadURLWithParams(params); UpdateTabCrashedFlag();&#125; è™½ç„¶è‡ªå·±å¯¹Cè¯­è¨€ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œä½†åœ¨è¿™é‡Œä¹Ÿå¯ä»¥å‘ç°ï¼Œæ˜¯æŠŠä¸Šä¸€æ­¥æ‹¼è£…æˆçš„paramså‚æ•°é›†åˆä¼ é€’ç»™äº†æŸä¸ªControllerå¯¹è±¡ã€‚é‚£ä¹ˆåˆ°åº•æ˜¯å“ªä¸€ä¸ªControllerå‘¢ï¼Ÿè·Ÿç€ä»£ç èµ°ï½ 123WebContents* ContentViewCoreImpl::GetWebContents() const &#123; return web_contents_;&#125; è¿™é‡Œè¿”å›æˆå‘˜å˜é‡web_contents_ï¼Œè€ŒControllerå°±åœ¨å®ƒå†…éƒ¨ 1234567891011121314151617181920void ContentViewCoreImpl::InitWebContents() &#123; DCHECK(web_contents_); notification_registrar_.Add( this, NOTIFICATION_RENDER_VIEW_HOST_CHANGED, Source&lt;NavigationController&gt;(&amp;web_contents_-&gt;GetController())); notification_registrar_.Add( this, NOTIFICATION_RENDERER_PROCESS_CREATED, content::NotificationService::AllBrowserContextsAndSources()); notification_registrar_.Add( this, NOTIFICATION_WEB_CONTENTS_CONNECTED, Source&lt;WebContents&gt;(web_contents_)); notification_registrar_.Add( this, NOTIFICATION_WEB_CONTENTS_SWAPPED, Source&lt;WebContents&gt;(web_contents_)); static_cast&lt;WebContentsViewAndroid*&gt;(web_contents_-&gt;GetView())-&gt; SetContentViewCore(this); DCHECK(!web_contents_-&gt;GetUserData(kContentViewUserDataKey)); web_contents_-&gt;SetUserData(kContentViewUserDataKey, new ContentViewUserData(this));&#125; æ‰¾åˆ°äº†ï¼Œæ˜¯NavigationControllerç±»å‹ï¼Œæºç è§navigation_controller_impl.ccã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576void NavigationControllerImpl::LoadURLWithParams(const LoadURLParams&amp; params) &#123; TRACE_EVENT0(\"browser\", \"NavigationControllerImpl::LoadURLWithParams\"); if (HandleDebugURL(params.url, params.transition_type)) return; // Checks based on params.load_type. switch (params.load_type) &#123; case LOAD_TYPE_DEFAULT: break; case LOAD_TYPE_BROWSER_INITIATED_HTTP_POST: if (!params.url.SchemeIs(kHttpScheme) &amp;&amp; !params.url.SchemeIs(kHttpsScheme)) &#123; NOTREACHED() &lt;&lt; \"Http post load must use http(s) scheme.\"; return; &#125; break; case LOAD_TYPE_DATA: if (!params.url.SchemeIs(chrome::kDataScheme)) &#123; NOTREACHED() &lt;&lt; \"Data load must use data scheme.\"; return; &#125; break; default: NOTREACHED(); break; &#125;; // The user initiated a load, we don't need to reload anymore. needs_reload_ = false; bool override = false; switch (params.override_user_agent) &#123; case UA_OVERRIDE_INHERIT: override = ShouldKeepOverride(GetLastCommittedEntry()); break; case UA_OVERRIDE_TRUE: override = true; break; case UA_OVERRIDE_FALSE: override = false; break; default: NOTREACHED(); break; &#125; NavigationEntryImpl* entry = NavigationEntryImpl::FromNavigationEntry( CreateNavigationEntry( params.url, params.referrer, params.transition_type, params.is_renderer_initiated, params.extra_headers, browser_context_)); if (params.should_replace_current_entry) entry-&gt;set_should_replace_entry(true); entry-&gt;set_should_clear_history_list(params.should_clear_history_list); entry-&gt;SetIsOverridingUserAgent(override); entry-&gt;set_transferred_global_request_id( params.transferred_global_request_id); entry-&gt;SetFrameToNavigate(params.frame_name); switch (params.load_type) &#123; case LOAD_TYPE_DEFAULT: break; case LOAD_TYPE_BROWSER_INITIATED_HTTP_POST: entry-&gt;SetHasPostData(true); entry-&gt;SetBrowserInitiatedPostData( params.browser_initiated_post_data.get()); break; case LOAD_TYPE_DATA: entry-&gt;SetBaseURLForDataURL(params.base_url_for_data_url); entry-&gt;SetVirtualURL(params.virtual_url_for_data_url); entry-&gt;SetCanLoadLocalResources(params.can_load_local_resources); break; default: NOTREACHED(); break; &#125;; LoadEntry(entry);&#125; è¿™é‡Œåšçš„äº‹æƒ…ä¸å‰é¢ç±»ä¼¼ï¼Œå–å‡ºå‚æ•°å†æ¬¡æ‹¼è£…æˆNavigationEntryImpl* entryï¼Œç„¶åè°ƒç”¨LoadEntryã€‚LoadEntryè¿™é‡Œçš„æ³¨é‡Šè®²è§£çš„å¾ˆæ¸…æ¥šï¼Œå½“æˆ‘ä»¬è¿›å…¥æ–°é¡µé¢æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸æ¸…æ¥šæ˜¯ä¸æ˜¯è¦ç»ˆæ­¢ä¸Šä¸€ä¸ªé¡µé¢ï¼Œå› ä¸ºæ–°é¡µé¢æœ‰å¯èƒ½åªæ˜¯ä¸€ä¸ªä¸‹è½½æˆ–è€…é‚®ä»¶ã€‚ç”±äºæˆ‘ä»¬çš„urlç­‰ä¿¡æ¯éƒ½ä¿å­˜åœ¨entryä¸­ï¼Œç»§ç»­è¿½æº¯ SetPendingEntry(entry) æ–¹æ³•ã€‚ 1234567void NavigationControllerImpl::LoadEntry(NavigationEntryImpl* entry) &#123; // When navigating to a new page, we don't know for sure if we will actually // end up leaving the current page. The new page load could for example // result in a download or a 'no content' response (e.g., a mailto: URL). SetPendingEntry(entry); NavigateToPendingEntry(NO_RELOAD);&#125; 12345678void NavigationControllerImpl::SetPendingEntry(NavigationEntryImpl* entry) &#123; DiscardNonCommittedEntriesInternal(); pending_entry_ = entry; NotificationService::current()-&gt;Notify( NOTIFICATION_NAV_ENTRY_PENDING, Source&lt;NavigationController&gt;(this), Details&lt;NavigationEntry&gt;(entry));&#125; ä¸Šè¿°ä»£ç ä¸­ï¼Œå…ˆæ˜¯ç»ˆæ­¢äº†å°šæœªæäº¤å¤„ç†çš„Entryï¼Œç„¶åå°†æ¬²è®¿é—®çš„entryä¿å­˜åœ¨pending_entry_å˜é‡ï¼Œæœ€åé€šè¿‡NotificationService::current()-&gt;Notifyï¼ŒæŠŠEntryæ’å…¥ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯ä»¥åœ¨notification_service_impl.ccçš„æºç ä¸­çœ‹åˆ°ï¼Œæ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯åï¼Œä¼šé€šçŸ¥æ‰€æœ‰çš„Observer 12345678910111213141516171819202122232425262728293031323334void NotificationServiceImpl::Notify(int type, const NotificationSource&amp; source, const NotificationDetails&amp; details) &#123; DCHECK_GT(type, NOTIFICATION_ALL) &lt;&lt; \"Allowed for observing, but not posting.\"; // There's no particular reason for the order in which the different // classes of observers get notified here. // Notify observers of all types and all sources if (HasKey(observers_[NOTIFICATION_ALL], AllSources()) &amp;&amp; source != AllSources()) &#123; FOR_EACH_OBSERVER(NotificationObserver, *observers_[NOTIFICATION_ALL][AllSources().map_key()], Observe(type, source, details)); &#125; // Notify observers of all types and the given source if (HasKey(observers_[NOTIFICATION_ALL], source)) &#123; FOR_EACH_OBSERVER(NotificationObserver, *observers_[NOTIFICATION_ALL][source.map_key()], Observe(type, source, details)); &#125; // Notify observers of the given type and all sources if (HasKey(observers_[type], AllSources()) &amp;&amp; source != AllSources()) &#123; FOR_EACH_OBSERVER(NotificationObserver, *observers_[type][AllSources().map_key()], Observe(type, source, details)); &#125; // Notify observers of the given type and the given source if (HasKey(observers_[type], source)) &#123; FOR_EACH_OBSERVER(NotificationObserver, *observers_[type][source.map_key()], Observe(type, source, details)); &#125;&#125; æˆ‘ä»¬å¿…é¡»æ‰¾åˆ°æ˜¯å“ªä¸ªObserverå¤„ç†äº†åŠ è½½Entryçš„æ¶ˆæ¯ï¼Œå¯æ˜¯åˆ°è¿™é‡Œï¼Œçº¿ç´¢ä¼¼ä¹æ–­äº†ï¼Œæ€ä¹ˆæ‰èƒ½æ‰¾åˆ°å¯¹åº”çš„Observerå‘¢ï¼Ÿ å†…äº‹ä¸å†³é—®ç™¾åº¦ï¼Œå¤–äº‹ä¸å†³é—®è°·æ­Œã€‚ åœ¨Googleçš„å¸®åŠ©ä¸‹ï¼Œæ‰¾åˆ°äº†è¿™ç¯‡æ–‡æ¡£Getting Around the Chromium Source Code Directory Structureã€‚è¿™é‡Œä»‹ç»äº†æ•´ä¸ªChromiumçš„æ¶æ„ï¼Œé‡ç‚¹å…³æ³¨â€œNavigating from the URL barâ€ä¸€èŠ‚ã€‚ Navigating from the URL bar When the user types into or accepts an entry in the URL bar, the autocomplete edit box determines the final target URL and passes that to AutocompleteEdit::OpenURL. (This may not be exactly what the user typed - for example, an URL is generated in the case of a search query.) The navigation controller is instructed to navigate to the URL in NavigationController::LoadURL. The NavigationController calls TabContents::Navigate with the NavigationEntry it created to represent this particular page transition. It will create a new RenderViewHost if necessary, which will cause creation of a RenderView in the renderer process. A RenderView wonâ€™t exist if this is the first navigation, or if the renderer has crashed, so this will also recover from crashes. Navigate forwards to RenderViewHost::NavigateToEntry. The NavigationControllerstores this navigation entry, but it is marked as â€œpendingâ€ because it doesnâ€™t know for sure if the transition will take place (maybe the host can not be resolved). RenderViewHost::NavigateToEntry sends a ViewMsg_Navigate to the new RenderView in the renderer process. When told to navigate, RenderView may navigate, it may fail, or it may navigate somewhere else instead (for example, if the user clicks a link). RenderViewHost waits for a ViewHostMsg_FrameNavigate from the RenderView. When the load is â€œcommittedâ€ by WebKit (the server responded and is sending us data), the RenderView sends this message, which is handled in RenderViewHost::OnMsgNavigate. The NavigationEntry is updated with the information on the load. In the case of a link click, the browser has never seen this URL before. If the navigation was browser-initiated, as in the startup case, there may have been redirects that have changed the URL. The NavigationController updates its list of navigations to account for this new information. åœ¨æ­¥éª¤3ä¸­çœ‹åˆ°ï¼ŒNavigationControllerè°ƒç”¨äº†TabContents::Navigateæ¥å¤„ç†Entryï¼Œéšåå°±è¿›å…¥äº†æ¸²æŸ“ï¼ˆRenderï¼‰è¿‡ç¨‹ã€‚è€Œæˆ‘ä»¬æƒ³è¦è¿½è¸ªçš„ç¼“å­˜æ–‡ä»¶ç®¡ç†çš„ç–‘é—®ï¼Œè¿˜æ˜¯è¦æ·±å…¥åˆ°æ¸²æŸ“é˜¶æ®µæ‰èƒ½æœ‰ä¸ªç­”æ¡ˆã€‚ æ›´å¤šåˆ†æï¼Œå°†åœ¨åç»­æ–‡ç« ä¸­ä¸€ä¸€é“å‡ºã€‚","tags":[{"name":"Android","slug":"Android","permalink":"https://lilei.pro/tags/Android/"},{"name":"æºç åˆ†æ","slug":"æºç åˆ†æ","permalink":"https://lilei.pro/tags/æºç åˆ†æ/"}]},{"title":"Deploy Web Application In Tomcat","date":"2016-09-09T09:17:03.000Z","path":"2016/09/09/Deploy-Web-Application-In-Tomcat/","text":"åœ¨å¼€å‘CrashReporteré¡¹ç›®æ—¶é‡åˆ°çš„ä¸€äº›å‘ Tomcatå¯åŠ¨æ—¶å¡åœ¨â€Tomcat: error deploying web application directoryâ€åŸå› æ˜¯Tomcat7/8éœ€è¦ä½¿ç”¨org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandomæ¥äº§ç”Ÿå®‰å…¨éšæœºç±»SecureRandomçš„å®ä¾‹ä½œä¸ºä¼šè¯IDã€‚è€Œæˆ‘ä»¬çŸ¥é“ï¼Œä»»ä½•éšæœºæ•°å‘ç”Ÿå™¨éƒ½éœ€è¦ä¸€ä¸ªç§å­ï¼ŒLinuxä¸­çš„éšæœºæ•°ï¼Œå¯ä»¥ä»è¿™ä¸¤ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ä¸­äº§ç”Ÿ /dev/urandom /dev/random è¿™ä¸¤ä¸ªæ–‡ä»¶äº§ç”Ÿéšæœºæ•°çš„åŸç†ï¼Œæ˜¯åˆ©ç”¨ç³»ç»Ÿçš„ç†µæ± ï¼Œè®¡ç®—å‡ºå›ºå®šä¸€å®šæ•°é‡çš„éšæœºæ¯”ç‰¹ï¼Œç„¶åå°†è¿™äº›æ¯”ç‰¹ä½œä¸ºå­—èŠ‚æµè¿”å›ã€‚ ç†µæ± å°±æ˜¯å½“å‰ç³»ç»Ÿçš„ç¯å¢ƒå™ªéŸ³ï¼Œç†µæŒ‡çš„æ˜¯ä¸€ä¸ªç³»ç»Ÿçš„æ··ä¹±ç¨‹åº¦ï¼Œç³»ç»Ÿå™ªéŸ³å¯ä»¥é€šè¿‡å¾ˆå¤šå‚æ•°æ¥è¯„ä¼°ï¼Œå¦‚å†…å­˜çš„ä½¿ç”¨ï¼Œæ–‡ä»¶çš„ä½¿ç”¨é‡ï¼Œä¸åŒç±»å‹çš„è¿›ç¨‹æ•°é‡ç­‰ç­‰ã€‚å¦‚æœå½“å‰ç¯å¢ƒå™ªéŸ³å˜åŒ–çš„ä¸æ˜¯å¾ˆå‰§çƒˆæˆ–è€…å½“å‰ç¯å¢ƒå™ªéŸ³å¾ˆå°ï¼Œæ¯”å¦‚åˆšå¼€æœºçš„æ—¶å€™ï¼Œè€Œå½“å‰éœ€è¦å¤§é‡çš„éšæœºæ¯”ç‰¹ï¼Œè¿™æ—¶äº§ç”Ÿçš„éšæœºæ•°çš„éšæœºæ•ˆæœå°±ä¸æ˜¯å¾ˆå¥½äº†ã€‚ /dev/randomåœ¨ä¸èƒ½äº§ç”Ÿæ–°çš„éšæœºæ•°æ—¶ä¼šé˜»å¡ç¨‹åºï¼Œè€Œ/dev/urandomä¸ä¼šï¼Œå½“ç„¶äº§ç”Ÿçš„éšæœºæ•°æ•ˆæœå°±ä¸å¤ªå¥½äº†ï¼Œè¿™å¯¹åŠ å¯†è§£å¯†è¿™æ ·çš„åº”ç”¨æ¥è¯´å°±ä¸æ˜¯ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ã€‚/dev/randomä¼šé˜»å¡å½“å‰çš„ç¨‹åºï¼Œç›´åˆ°æ ¹æ®ç†µæ± äº§ç”Ÿæ–°çš„éšæœºå­—èŠ‚ä¹‹åæ‰è¿”å›ï¼Œæ‰€ä»¥ä½¿ç”¨/dev/randomæ¯”ä½¿ç”¨/dev/urandomäº§ç”Ÿå¤§é‡éšæœºæ•°çš„é€Ÿåº¦è¦æ…¢ã€‚ è§£å†³åŠæ³•ï¼š åœ¨Tomcatç¯å¢ƒè§£å†³ï¼šå¯åŠ¨æ—¶åŠ å…¥å‚æ•°-Djava.security.egd=file:/dev/urandom åœ¨JVMç¯å¢ƒè§£å†³ï¼šä¿®æ”¹$JAVA_PATH/jre/lib/security/java.securityä¸­çš„securerandom.source=file:/dev/randomä¸ºsecurerandom.source=file:/dev/urandom crontab é…ç½®crontab -e ç¼–è¾‘å½“å‰ç”¨æˆ·çš„å®šæ—¶å‘½ä»¤crontab -l æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„å®šæ—¶å‘½ä»¤ ä¸€æ¡å…¸å‹çš„å®šæ—¶ä»»åŠ¡ 10 4 * * * /usr/bin/java -Xms256m -Xmx1024m -Duser.timezone=GMT+08 -jar /root/projects/crash-reporter/crash-reporter-0.1-SNAPSHOT-jar-with-dependencies.jar åœ¨é…ç½®è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œç”±äºæ²¡æœ‰ç†è§£å®ƒæœ¬è´¨ä¸Šçš„åŸç†ï¼Œè‡ªå·±çŠ¯äº†ä¸€ä¸ªæ„šè ¢çš„é”™è¯¯ï¼ŒæŠŠæ—¶é—´å†™æˆäº†* 4 * * *ï¼Œå¯¼è‡´å‡Œæ™¨4ç‚¹å†…ï¼Œæ¯åˆ†é’Ÿå‘å‡ºä¸€ç¯‡é‚®ä»¶ï¼Œè¿˜æ˜¯å‘ç»™å…¨ç»„äººçš„â€¦â€¦ é™„å›¾ä¸€å¼ ï¼Œcrontabçš„å‘½ä»¤é…ç½® Tomcatå®¹å™¨æ—¶é—´åœ¨Linuxç³»ç»Ÿé‡Œé€šè¿‡dateå‘½ä»¤æŸ¥çœ‹ï¼Œæ—¶åŒºå·²ç»æ›´æ”¹ä¸ºåŒ—äº¬æ—¶é—´ã€‚ä½†æ˜¯å®é™…è¿è¡Œæ—¶ï¼Œå‘ç°ä»£ç é‡Œé€šè¿‡new Date()åˆ›å»ºçš„æ—¶é—´ï¼Œformatåæ‰“å°å‡ºæ¥å±…ç„¶æ˜¯æ ‡å‡†æ—¶é—´ï¼›åŒæ—¶ï¼Œlog4jè®°å½•çš„æ—¶é—´ä¹Ÿæœ‰ä¸€æ ·çš„é—®é¢˜ã€‚ åŸå› åœ¨äºï¼ŒJVMçš„æ—¶é—´éœ€è¦åœ¨å¯åŠ¨æ—¶é…ç½®ï¼Œéœ€è¦åœ¨tomcatçš„å¯åŠ¨å‘½ä»¤ä¸­å¢åŠ å¦‚ä¸‹å‚æ•° 1-Duser.timezone=GMT+08 å‚è€ƒèµ„æ–™ Tomcatå¯åŠ¨æ—¶SecureRandomè¶…çº§æ…¢çš„é—®é¢˜ æ¯å¤©ä¸€ä¸ªlinuxå‘½ä»¤ï¼ˆ50ï¼‰ï¼šcrontabå‘½ä»¤ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Backend","slug":"Backend","permalink":"https://lilei.pro/tags/Backend/"}]},{"title":"Android ä¸­ View Visibility çš„å‘","date":"2016-06-29T03:37:37.000Z","path":"2016/06/29/Android-View-Visibility/","text":"å‰å‡ å¤©çˆ†å‡ºæ¥ä¸€ä¸ªçº¿ä¸Šbugï¼šå¤„äºâ€œå·²å”®å®Œâ€çŠ¶æ€çš„èœå“ï¼Œä¾ç„¶å¯ä»¥ç‚¹å‡»åŠ èœã€‚å¥½åœ¨æäº¤è®¢å•æ—¶æœ‰æ ¡éªŒï¼Œå¯¹äºè¿™ç§è®¢å•ä¼šç›´æ¥æ‰“å›ã€‚ç©¶å…¶åŸå› ï¼Œæ˜¯åŠ å‡æ§ä»¶ä¸­çš„ä»£ç å‡ºäº†é—®é¢˜ é—®é¢˜å›é¡¾åœ¨åŠ å‡æ§ä»¶ä¸­ï¼Œæä¾›äº†enlargeEmptyAddBtnClickAreaæ–¹æ³•ï¼Œç”¨æ¥æ‰©å¤§ç¬¬ä¸€æ¬¡åŠ èœæŒ‰é’®çš„ç‚¹å‡»åŒºåŸŸï¼ˆPMæå‡ºçš„æ¸£æ¸£ï¼Œæ›´æ¸£æ¸£çš„æ˜¯UXå±…ç„¶é€šè¿‡äº†è¿™ä¸ªéœ€æ±‚ï¼‰ã€‚ Talk is cheap, read the code. 123456789101112131415161718192021222324252627282930/** * å°†åˆå§‹åŠ èœæŒ‰é’®ç‚¹å‡»çŸ©å½¢åŒºåŸŸå‘å¤–æ‰©å¤§ * @param parentView åŒ…å«æ›´å¤§ç‚¹å‡»åŒºåŸŸçš„çˆ¶View * @param unit æ‰©å¤§çš„dpå€¼ */ public void enlargeEmptyAddBtnClickArea(final View parentView, final int unit) &#123; parentView.post(new Runnable() &#123; @Override public void run() &#123; if (emptyAddBtn.getVisibility() != VISIBLE) &#123; return; &#125; checkContext(); Context context = getContext(); int[] emptyAddBtnCoord = new int[2]; emptyAddBtn.getLocationOnScreen(emptyAddBtnCoord); int[] parentViewCoord = new int[2]; parentView.getLocationOnScreen(parentViewCoord); int[] relativeCoord = &#123;emptyAddBtnCoord[0] - parentViewCoord[0], emptyAddBtnCoord[1] - parentViewCoord[1]&#125;; Rect delegateArea = new Rect(relativeCoord[0], relativeCoord[1], relativeCoord[0] + emptyAddBtn.getMeasuredWidth(), relativeCoord[1] + emptyAddBtn.getMeasuredHeight()); int enlargeUnit = ViewUtils.dip2px(context, unit); delegateArea.left -= enlargeUnit; delegateArea.top -= enlargeUnit; delegateArea.right += enlargeUnit; delegateArea.bottom += enlargeUnit; CustomTouchDelegate touchDelegate = new CustomTouchDelegate(delegateArea, emptyAddBtn); parentView.setTouchDelegate(touchDelegate); &#125; &#125;); &#125; è¿™æ ·é€šè¿‡ç›´æ¥operateBtn.enlargeEmptyAddBtnClickAreaå°±å¯ä»¥æ‰©å¤§ç‚¹å‡»åŒºåŸŸã€‚ ä¹çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜å¯¹å§ï¼Ÿä»£ç ä¸­åŒæ ·è€ƒè™‘åˆ°äº†å¦‚æœåŠ èœæŒ‰é’®å½“å‰ä¸å¯è§ï¼Œå°±ä¸ä¼šä¸»åŠ¨æ‰©å¤§å…¶åŒºåŸŸã€‚ ä½†æ˜¯ä¸ºä»€ä¹ˆï¼Œè¿˜ä¼šå‡ºç°æ–‡ç« å¼€å¤´æåˆ°çš„â€œå·²å”®å®Œçš„èœå“ä»ç„¶å¯ä»¥æ·»åŠ è‡³è´­ç‰©è½¦â€é—®é¢˜ï¼ï¼ï¼ åŸå› åˆ†æåœ¨debugåï¼Œå‘ç°é—®é¢˜å‡ºåœ¨è¿™æ®µä»£ç ä¸­çš„åˆ¤æ–­ 123if (emptyAddBtn.getVisibility() != VISIBLE) &#123; return;&#125; å½“æ•´ä¸ªåŠ å‡æ§ä»¶ï¼ˆOperateButtonï¼‰çš„Visibility == INVISIBLE or GONEæ—¶ï¼Œå…¶å†…éƒ¨emptyAddBtnçš„Visibilityå±…ï¼ç„¶ï¼è¿˜ï¼æ˜¯ï¼Visibleï¼ å†™ä¸ªDemoéªŒè¯ä¸€ä¸‹ Talk is cheap, just codedemoåŠŸèƒ½å¾ˆç®€å•ï¼Œå¤–å±‚çš„ViewGroup &amp; å†…å±‚çš„Viewï¼Œå½“outerç½®ä¸ºä¸å¯è§ï¼ˆINVISIBLE or GONEï¼‰æ—¶ï¼Œè¾“å‡ºinnerçš„Visibilityã€‚ç•Œé¢å¦‚ä¸‹ï¼š éªŒè¯åå‘ç°ä¸€ä¸ªæƒŠäººçš„äº‹å®ï¼ŒOuterçš„Visibilityä¸ä¼šå½±å“Innerçš„Visibilityï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è®ºOuterè®¾ç½®ä¸ºGoneè¿˜æ˜¯Invisibleï¼Œåªè¦Innerä¹‹å‰æ˜¯Visibleï¼Œé‚£ä¹ˆè°ƒç”¨inner.getVisibility()åï¼Œéƒ½ä¼šè¿”å›Visibleï¼ æ­£ç¡®çš„åˆ¤æ–­æ–¹æ³•View.javaä¸­ä¸ºæˆ‘ä»¬æä¾›äº†isShown()æ–¹æ³•ï¼Œä»æ³¨é‡Šä¸­å³å¯çœ‹å‡ºå®ƒä¼šå°†å¤–å±‚ViewGroupå¯è§æ€§è®¡ç®—è¿›å» 123456789101112131415161718192021222324/** * Returns the visibility of this view and all of its ancestors * * @return True if this view and all of its ancestors are &#123;@link #VISIBLE&#125; */public boolean isShown() &#123; View current = this; //noinspection ConstantConditions do &#123; if ((current.mViewFlags &amp; VISIBILITY_MASK) != VISIBLE) &#123; return false; &#125; ViewParent parent = current.mParent; if (parent == null) &#123; return false; // We are not attached to the view root &#125; if (!(parent instanceof View)) &#123; return true; &#125; current = (View) parent; &#125; while (current != null); return false;&#125; åæ€èµ·åˆç¼–ç çš„æ—¶å€™ï¼Œè°èƒ½æƒ³åˆ°ï¼Œå¤–å±‚è®¾ç½®Invisibileåï¼Œå†…å±‚Viewå±…ç„¶è¿˜æ˜¯Visibleçš„çŠ¶æ€å‘¢ï¼Ÿ å‡ºç°è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºè‡ªå·±å¯¹Viewçš„æœºåˆ¶ç ”ç©¶ä¸å¤Ÿæ·±å…¥ï¼Œå¼•ä»¥ä¸ºæˆ’ã€‚ æ›´åº”è¯¥æ³¨æ„åˆ°Viewæœ¬èº«æä¾›äº†isShown()æ–¹æ³•æ¥åˆ¤æ–­å¯è§æ€§ï¼Œæ ¹æœ¬ä¸éœ€è¦ä½¿ç”¨Visibilityæ¥é‡å¤é€ è½®å­ï¼Œæ›´ä½•å†µè¿˜æ˜¯é”™è¯¯çš„è½®å­ã€‚ =========END=========","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"Use DiffMerge As Default Git Diff Tool","date":"2016-06-22T04:58:54.000Z","path":"2016/06/22/Use-Diffmerge-As-Default-Git-Diff-Tool/","text":"ä½¿ç”¨DiffMergeä½œä¸ºé»˜è®¤çš„git diff GUIå·¥å…· P4Merge: ç•Œé¢ç¾è§‚ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œå®‰è£…åŒ…å¤§ï¼ˆ100Mï¼‰ DiffMerge: ç•Œé¢ç®€å•ï¼ŒåŠŸèƒ½ä¸€èˆ¬ï¼Œå®‰è£…åŒ…å°ï¼ˆ10Mï¼‰ é…ç½®æ–¹æ³•123456$ git config --global merge.tool diffmerge$ git config --global mergetool.diffmerge.cmd \"/Applications/DiffMerge.app/Contents/MacOS/diffmerge --merge --result=\\$MERGED \\$LOCAL \\$BASE \\$REMOTE\"$ git config --global mergetool.keepBackup false$ git config --global diff.tool diffmerge$ git config --global difftool.diffmerge.cmd \"/Applications/DiffMerge.app/Contents/MacOS/diffmerge \\$LOCAL \\$REMOTE\" ä½¿ç”¨æ–¹æ³•1$ git difftool å‚è€ƒé“¾æ¥ï¼šConfigure DiffMerge for Your Git DiffTool","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"macOS é€šè¿‡ç»ˆç«¯å¯åŠ¨ Sublime2","date":"2016-06-22T01:15:10.000Z","path":"2016/06/22/Launch-Sublime-In-Terminal/","text":"åŒæ ·é€‚ç”¨äº *nix ç³»ç»Ÿä¸‹é€šè¿‡æ§åˆ¶å°å¯åŠ¨ä»»ä½•æŒ‡ä»¤ å°†Sublimeçš„å¯åŠ¨å‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­macOSä¸­ï¼ŒSublime Text 2 çš„å¯åŠ¨å‘½ä»¤ä½äº/Applications/Sublime Text 2.app/Contents/SharedSupport/binä¸­ï¼Œè¯¥ç›®å½•ä¸‹ä»…æœ‰ä¸€ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯sublã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ç»ˆç«¯ä¸­å¯åŠ¨Sublimeå¯¹æ–‡ä»¶foo.txtè¿›è¡Œç¼–è¾‘ï¼Œéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯ 1$ subl foo.txt å‰ææ˜¯ï¼Œç¯å¢ƒå˜é‡ä¸­åŒ…å«äº†sublè¿™ä¸ªæŒ‡ä»¤ã€‚åœ¨macOSä¸­ï¼Œæœ‰ä¸¤ç§é€”å¾„å¯ä»¥è¾¾æˆè¿™ä¸ªæ•ˆæœã€‚ åœ¨~/.zshrcï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯zshï¼‰ä¸­æ·»åŠ $SUBLIME_HOMEï¼Œå¹¶å°†$SUBLIME_HOME/binæ·»åŠ è‡³$PATH åœ¨/usr/local/binä¸­åˆ›å»ºæŒ‡å‘sublçš„ç¬¦å·é“¾æ¥ ä¸¤ç§æ–¹æ³•å…·ä½“å®ç°åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºï¼š .zshrcï¼Œæ³¨æ„ç©ºæ ¼å‰éœ€è¦ç”¨\\è½¬ä¹‰ 12export SUBLIME_HOME=/Applications/Sublime\\ Text\\ 2.appexport PATH=$PATH:$&#123;SUBLIME_HOME&#125;/Contents/SharedSupport/bin åˆ›å»ºç¬¦å·é“¾æ¥ 1$ ln -s \"/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl\" /usr/local/bin/subl æ–¹æ³•1é€‚ç”¨äºä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹å¤šä¸ªå‘½ä»¤çš„å¯åŠ¨ï¼ˆæ¯”å¦‚Android SDKï¼‰ï¼Œæ–¹æ³•2é€‚ç”¨äºå•ä¸ªæŒ‡ä»¤çš„å¯åŠ¨ï¼ˆæ¯”å¦‚Sublimeï¼‰ã€‚ åœ¨Windowsä¸­æˆ‘ä»¬æ€ä¹ˆåšåœ¨Windowsä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»ä¼¼æ–¹æ³•2çš„é€”å¾„ï¼Œæ¥å¿«é€Ÿå¯åŠ¨æŸä¸ªåº”ç”¨ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹A å°†æ–‡ä»¶å¤¹AåŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ å¯¹äºè¦å¿«é€Ÿå¯åŠ¨çš„Appï¼Œå¯¹å…¶åˆ›å»ºå¿«æ·æ–¹å¼åï¼ŒæŠŠå¿«æ·æ–¹å¼é‡å‘½åï¼ˆæ¯”å¦‚lolï¼‰ï¼Œç„¶åå°†å¿«æ·æ–¹å¼ä¸¢å…¥Aæ–‡ä»¶å¤¹ ä»¥åå¯ä»¥é€šè¿‡cmd+Ræ‰“å¼€è¿è¡Œçª—å£åï¼Œç›´æ¥è¾“å…¥lolæ¥å¯åŠ¨å¯¹åº”App ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"Android Studio .gitignore æ–‡ä»¶èŒƒæœ¬","date":"2016-06-22T01:09:14.000Z","path":"2016/06/22/Android-Studio-gitignore/","text":"ä¸€ä»½æ ‡å‡†çš„ Android Studio å·¥ç¨‹ .gitignore æ–‡ä»¶ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253# Built application files*.apk*.ap_# Files for the ART/Dalvik VM*.dex# Java class files*.class# Generated filesbin/gen/out/# Gradle files.gradlebuild/# Local configuration file (sdk path, etc)local.properties# Proguard folder generated by Eclipseproguard/# Log files*.log# Android Studio Navigation editor temp files.navigation/# Android Studio captures foldercaptures/# Intellij*.iml.idea/# Keystore files*.jks# Windows thumbnail dbThumbs.db# OSX files.DS_Store# Eclipse project files.classpath.project# NDKobj/ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"Androidä¸­åŠ¨æ€åŠ è½½JNIå¤±æ•ˆé—®é¢˜æ¢ç©¶(æœªå®Œå¾…ç»­)","date":"2016-06-17T02:33:02.000Z","path":"2016/06/17/Dynamic-Loading-JNI-Not-Work/","text":"åœ¨åšsoåŠ¨æ€åŠ è½½æ—¶é‡åˆ°äº†ååŠ è½½çš„JNIæ–¹æ³•å¤±æ•ˆçš„é—®é¢˜ èƒŒæ™¯æè¿°åœ¨è¿›è¡ŒåŠ¨æ€åŠ è½½3æœŸåˆ†äº«æ—¶ï¼Œä½¿ç”¨soæ–‡ä»¶çš„åŠ¨æ€åŠ è½½ä½œä¸ºç¤ºä¾‹ï¼Œå‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡â€”â€”åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šè¿‡System.load(&quot;foo.so&quot;)åŠ è½½è¿›æ¥çš„soå¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚ å…ˆçœ‹ä½œä¸ºç¤ºä¾‹çš„åŠ¨æ€åŠ è½½Demoä»£ç ã€‚ å£°æ˜çš„nativeæ¥å£ 1public native String say(); Cæ–‡ä»¶ä¸­å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œè¿”å›ä¸€ä¸ªé¢„å®šä¹‰å¥½çš„å­—ç¬¦ä¸²Keep Quiet! jni.c 1234567#include \"com_leili_season1_jni_activity_JNIActivity.h\"JNIEXPORT jstring JNICALL Java_com_leili_season1_jni_activity_JNIActivity_say (JNIEnv *env, jobject obj) &#123; return (*env)-&gt;NewStringUTF(env, \"Keep Quiet!\");&#125; åˆå§‹åŒ–æ—¶ï¼ŒåŠ è½½è¿”å›Keep Quiet!çš„soæ–‡ä»¶ 123456@Overrideprotected void onCreate(Bundle savedInstanceState) &#123; System.loadLibrary(\"Jni\"); // å†™æ³•Aï¼Œé€šè¿‡System.loadLibrary()é¦–æ¬¡åŠ è½½ System.load(getFilesDir().getParent() + \"/lib/libJni.so\"); // å†™æ³•Bï¼Œé€šè¿‡System.load()é¦–æ¬¡åŠ è½½ ... // ä»¥ä¸‹æ— å…³å†…å®¹çœç•¥&#125; ç‚¹å‡»æŒ‰é’®ååŠ è½½æ–°çš„soæ–‡ä»¶ï¼Œå…¶ä¸­ä¿®æ”¹äº†say()æ–¹æ³•çš„è¿”å›å€¼ä¸ºHello World! 12soFilePath = getFilesDir() + \"/libJni2.so\"; // /data/data/com.leili.season1/lib/libJni.soSystem.load(soFilePath); æ­¤æ—¶å†æ¬¡è°ƒç”¨say()åï¼Œæ ¹æ®é¢„æœŸï¼Œåº”è¯¥è¿”å›çš„æ˜¯ä¿®æ”¹åçš„Hello World!ã€‚ç„¶è€Œï¼Œå¦‚ä»£ç ä¸­çš„æ³¨é‡Šæ‰€å†™ï¼Œä½¿ç”¨å†™æ³•Aè¿›è¡Œé¦–æ¬¡åŠ è½½çš„soåº“ï¼Œæ— æ³•é€šè¿‡System.load(soFilePath)è¢«è¦†ç›–ï¼›ä½¿ç”¨å†™æ³•Bè¿›è¡Œé¦–æ¬¡åŠ è½½çš„soåº“ï¼Œå´å¯ä»¥é€šè¿‡System.load(soFilePath)è¢«è¦†ç›–ã€‚ åŸå› æ¢ç©¶ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯ï¼ŒSystem.loadå’ŒSystem.loadLibraryå†…éƒ¨å®ç°æœ‰å·®å¼‚ï¼Œé€šè¿‡System.loadLibraryåŠ è½½è¿›æ¥çš„soåº“ï¼Œå…¶æ–¹æ³•æ— æ³•è¢«è¦†ç›–ã€‚ å…ˆæ¥çœ‹ä¸€ä¸‹SDKæºç ä¸­è¿™ä¸¤ä¸ªæ–¹æ³•çš„ç»†èŠ‚ï¼Œé¦–å…ˆæ˜¯System.loadï¼Œä½¿ç”¨SDKç‰ˆæœ¬ä¸º23 System.load è¿‡ç¨‹System.java 123456/** * See &#123;@link Runtime#load&#125;. */public static void load(String pathName) &#123; Runtime.getRuntime().load(pathName, VMStack.getCallingClassLoader());&#125; è°ƒç”¨äº†Runtimeä¸­çš„loadæ–¹æ³• Runtime.java 123456789101112/* * Loads the given shared library using the given ClassLoader. */void load(String absolutePath, ClassLoader loader) &#123; if (absolutePath == null) &#123; throw new NullPointerException(\"absolutePath == null\"); &#125; String error = doLoad(absolutePath, loader); if (error != null) &#123; throw new UnsatisfiedLinkError(error); &#125;&#125; è·Ÿè¿› doLoad æ–¹æ³•æŸ¥çœ‹ 1234567891011121314151617181920212223242526272829303132333435363738394041private String doLoad(String name, ClassLoader loader) &#123; // Android apps are forked from the zygote, so they can't have a custom LD_LIBRARY_PATH, // which means that by default an app's shared library directory isn't on LD_LIBRARY_PATH. // The PathClassLoader set up by frameworks/base knows the appropriate path, so we can load // libraries with no dependencies just fine, but an app that has multiple libraries that // depend on each other needed to load them in most-dependent-first order. // We added API to Android's dynamic linker so we can update the library path used for // the currently-running process. We pull the desired path out of the ClassLoader here // and pass it to nativeLoad so that it can call the private dynamic linker API. // We didn't just change frameworks/base to update the LD_LIBRARY_PATH once at the // beginning because multiple apks can run in the same process and third party code can // use its own BaseDexClassLoader. // We didn't just add a dlopen_with_custom_LD_LIBRARY_PATH call because we wanted any // dlopen(3) calls made from a .so's JNI_OnLoad to work too. // So, find out what the native library search path is for the ClassLoader in question... String ldLibraryPath = null; String dexPath = null; if (loader == null) &#123; // We use the given library path for the boot class loader. This is the path // also used in loadLibraryName if loader is null. ldLibraryPath = System.getProperty(\"java.library.path\"); &#125; else if (loader instanceof BaseDexClassLoader) &#123; BaseDexClassLoader dexClassLoader = (BaseDexClassLoader) loader; ldLibraryPath = dexClassLoader.getLdLibraryPath(); &#125; // nativeLoad should be synchronized so there's only one LD_LIBRARY_PATH in use regardless // of how many ClassLoaders are in the system, but dalvik doesn't support synchronized // internal natives. synchronized (this) &#123; return nativeLoad(name, loader, ldLibraryPath); &#125;&#125;// TODO: should be synchronized, but dalvik doesn't support synchronized internal natives.private static native String nativeLoad(String filename, ClassLoader loader, String ldLibraryPath); å¯ä»¥çœ‹åˆ°æœ€ç»ˆé€šè¿‡nativeè°ƒç”¨nativeLoadåŠ è½½äº†libæ–‡ä»¶ã€‚ System.loadLibrary è¿‡ç¨‹System.loadLibrary çš„å†™æ³•æ˜¯ 1System.loadLibrary(\"Jni\"); çœŸå®åŠ è½½çš„soæ–‡ä»¶æ˜¯libJni.soï¼Œå¯ä»¥çŒœæƒ³å†…éƒ¨è¿›è¡Œäº†ä¸€ä¸ªæ‹¼æ¥æ–‡ä»¶åçš„è¿‡ç¨‹ã€‚ System.java 123456/** * See &#123;@link Runtime#loadLibrary&#125;. */public static void loadLibrary(String libName) &#123; Runtime.getRuntime().loadLibrary(libName, VMStack.getCallingClassLoader());&#125; Runtime.javaä¸­çš„loadLibraryæ–¹æ³• Runtime.java 123456789101112131415161718192021222324252627282930313233343536373839404142/* * Searches for and loads the given shared library using the given ClassLoader. */void loadLibrary(String libraryName, ClassLoader loader) &#123; if (loader != null) &#123; String filename = loader.findLibrary(libraryName); if (filename == null) &#123; // It's not necessarily true that the ClassLoader used // System.mapLibraryName, but the default setup does, and it's // misleading to say we didn't find \"libMyLibrary.so\" when we // actually searched for \"liblibMyLibrary.so.so\". throw new UnsatisfiedLinkError(loader + \" couldn't find \\\"\" + System.mapLibraryName(libraryName) + \"\\\"\"); &#125; String error = doLoad(filename, loader); if (error != null) &#123; throw new UnsatisfiedLinkError(error); &#125; return; &#125; String filename = System.mapLibraryName(libraryName); List&lt;String&gt; candidates = new ArrayList&lt;String&gt;(); String lastError = null; for (String directory : mLibPaths) &#123; String candidate = directory + filename; candidates.add(candidate); if (IoUtils.canOpenReadOnly(candidate)) &#123; String error = doLoad(candidate, loader); if (error == null) &#123; return; // We successfully loaded the library. Job done. &#125; lastError = error; &#125; &#125; if (lastError != null) &#123; throw new UnsatisfiedLinkError(lastError); &#125; throw new UnsatisfiedLinkError(\"Library \" + libraryName + \" not found; tried \" + candidates);&#125; æ³¨æ„åˆ°è¿™é‡Œå‚æ•°ä¸­çš„libraryNameä»ç„¶æ˜¯å½¢å¦‚Jniçš„ä¸åŒ…å«å‰ç¼€libä¸åç¼€.soçš„æ–‡ä»¶åã€‚çœŸæ­£çš„æ–‡ä»¶åè¡¥å…¨æ˜¯åœ¨è¿™ä¸€æ­¥è¿›è¡Œçš„ã€‚ 1String filename = loader.findLibrary(libraryName); BaseDexClassLoader.java 1234@Overridepublic String findLibrary(String name) &#123; return pathList.findLibrary(name);&#125; DexPathList.java 12345678910111213141516171819/** * Finds the named native code library on any of the library * directories pointed at by this instance. This will find the * one in the earliest listed directory, ignoring any that are not * readable regular files. * * @return the complete path to the library or &#123;@code null&#125; if no * library was found */public String findLibrary(String libraryName) &#123; String fileName = System.mapLibraryName(libraryName); for (File directory : nativeLibraryDirectories) &#123; String path = new File(directory, fileName).getPath(); if (IoUtils.canOpenReadOnly(path)) &#123; return path; &#125; &#125; return null;&#125; ç»•äº†ä¸€åœˆï¼Œåˆå›åˆ°Systemè¿™ä¸ªç±»ä¸­ï¼Œçœ‹åˆ°ä¸‹é¢è¿™å„¿ä¸€ç›®äº†ç„¶ã€‚ 1234567891011/** * Returns the platform specific file name format for the shared library * named by the argument. On Android, this would turn &#123;@code \"MyLibrary\"&#125; into * &#123;@code \"libMyLibrary.so\"&#125;. */public static String mapLibraryName(String nickname) &#123; if (nickname == null) &#123; throw new NullPointerException(\"nickname == null\"); &#125; return \"lib\" + nickname + \".so\";&#125; è¿½è¸ªè¿‡äº†è¡¥å…¨æ–‡ä»¶åçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å›åˆ°æœ€åˆSystem.loadLibraryçš„ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸System.loadä¸€æ ·ï¼Œä¹Ÿæ˜¯è°ƒç”¨äº†åŒæ ·çš„doLoadæ–¹æ³•ï¼ï¼ï¼ åˆ°è¿™é‡Œå¯èƒ½ä¼šæœ‰äº›å›°æƒ‘äº†ï¼Œæ—¢ç„¶ä¸¤è€…æ®Šé€”åŒå½’ï¼Œä¸ºä»€ä¹ˆåœ¨åº”ç”¨æ—¶ä¼šæœ‰å·®åˆ«å‘¢ï¼Ÿå…ˆåˆ«æ€¥ï¼Œæ—¢ç„¶æ–¹æ³•æ˜¯åŒæ ·çš„ï¼Œä¼šä¸ä¼šæ˜¯å‚æ•°æœ‰åŒºåˆ«ï¼Ÿ System.load &amp; System.loadLibrary åŠ è½½soåº“æ–‡ä»¶é€šè¿‡æ–­ç‚¹ï¼Œåˆ†åˆ«æŸ¥çœ‹ä»¥ä¸‹ä¸¤ä¸ªè¯­å¥çš„æ‰§è¡Œæƒ…å†µï¼Œæœç„¶å‘ç°äº†ä¸€ä¸åŒºåˆ« 1System.loadLibrary(\"Jni\"); // å†™æ³•Aï¼Œé€šè¿‡System.loadLibrary()é¦–æ¬¡åŠ è½½ å†™æ³•AåŠ è½½çš„libæ–‡ä»¶ï¼ŒçœŸå®è·¯å¾„æ˜¯/data/app/com.leili.season1-1/lib/x86/libJni.soï¼Œè¿™æ˜¯ç”¨æˆ·appåœ¨å®‰è£…æ—¶çš„è·¯å¾„ï¼ˆç³»ç»Ÿappå®‰è£…ç›®å½•ä¸º/system/appï¼‰ 1System.load(getFilesDir().getParent() + \"/lib/libJni.so\"); // å†™æ³•Bï¼Œé€šè¿‡System.load()é¦–æ¬¡åŠ è½½ å†™æ³•BåŠ è½½çš„libæ–‡ä»¶ï¼ŒçœŸå®è·¯å¾„æ˜¯/data/data/com.leili.season1/lib/libJni.soã€‚ä¸æˆ‘ä»¬çš„é¢„æœŸä¸€è‡´ã€‚ ç­‰ç­‰ï¼Œæˆ‘ä»¬é€šè¿‡adb shellçœ‹ä¸€ä¸‹/data/data/com.leili.season1/lib/è¿™ä¸ªç›®å½• 1234root@vbox86p:/data/data/com.leili.season1 # lldrwxrwx--x u0_a174 u0_a174 2016-06-16 19:34 cachedrwx------ u0_a174 u0_a174 2016-06-16 19:34 fileslrwxrwxrwx install install 2016-06-17 10:28 lib -&gt; /data/app/com.leili.season1-1/lib/x86 å‘ç°äº†ä»€ä¹ˆï¼Ÿç›®å½•/data/data/com.leili.season1/lib/ç«Ÿç„¶æ˜¯æŒ‡å‘/data/app/com.leili.season1-1/lib/x86çš„è½¯é“¾æ¥ã€‚å¤©å“ªï¼è¿™è¯´æ˜ï¼Œé€šè¿‡System.load(filePath)åŠ è½½çš„soæ–‡ä»¶ï¼Œä¸é€šè¿‡System.loadLibrary(libName)åŠ è½½çš„soæ–‡ä»¶ï¼Œå‹æ ¹å°±æ˜¯åŒä¸€ä¸ªï¼ æˆ‘çš„å¤©å“ªã€‚ã€‚ã€‚æ˜æ˜æ˜¯è°ƒç”¨åŒæ ·çš„æ–¹æ³•åŠ è½½åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ºå•¥ä¼šå‡ºç°ä¸¤ç§æˆªç„¶ä¸åŒçš„ç»“æœï¼Ÿï¼ï¼ï¼ æœ€æ–°å‘ç°ï¼šåˆæ¬¡åŠ è½½æ—¶ä¸ç”¨System.loadLibrary(&quot;Jni&quot;)ï¼Œè€Œç”¨System.load(&quot;/data/app/com.leili.season1-2/lib/x86/libJni.so&quot;)æ¥ç›´æ¥åŠ è½½/data/appçš„åº“æ–‡ä»¶æ—¶ï¼Œä¸€æ ·ä¼šé˜»æ­¢åç»­çš„åŠ è½½ï¼ åˆ°è¿™é‡Œè¢«BLOCKä½äº†ï¼ŒHELPï½","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"MT&DP Hackathon å°ç»“","date":"2016-05-27T11:38:15.000Z","path":"2016/05/27/Hackathon-1-0/","text":"16å¹´5æœˆ27æ—¥ï½28æ—¥ï¼ŒåŒ—äº¬ç¾å›¢æ€»éƒ¨ä¸¾åŠHackathonï¼Œé¡¹ç›®å°ç»“ä¸è®ºæ¯”èµ›æ’åå¦‚ä½•ã€èƒ½å¦æ‹¿åˆ°å¥–å“ï¼Œå­¦åˆ°çŸ¥è¯†æ‰æ˜¯è‡ªå·±ç¡¬å®åŠ›çš„æå‡ Databaseéƒ¨åˆ†VARCHAR, TEXTVARCHAR(n): å­˜å‚¨åœ¨åˆ—å…ƒç´ ä¸­ï¼›å¯ä»¥ä½œä¸ºç´¢å¼•TEXT: åˆ—å…ƒç´ ä¸­åªä¿å­˜ä¸€ä¸ªæŒ‡é’ˆï¼ŒçœŸå®æ–‡æœ¬ä¿å­˜åœ¨å¦å¤–çš„å­˜å‚¨åŒºåŸŸï¼›ä¸å¯ä½œä¸ºç´¢å¼• æ³¨ï¼šå­˜å‚¨ä½ç½®åŒºåˆ«ä»…å‡ºç°åœ¨MySQLä¸Šï¼Œå¯¹äºInnoDBï¼Œå¦‚æœVARCHARç±»å‹çš„å…ƒç´ è¿‡é•¿ï¼Œå†…éƒ¨ä»ç„¶ä¼šä½¿ç”¨TEXTå½¢å¼çš„ä¿å­˜æ–¹æ¡ˆ å®é™…åº”ç”¨ä¸­ï¼Œè¦æ ¹æ®ä¸åŒç±»å‹çš„è¾“å…¥ï¼Œé€‰æ‹©ä¸åŒç±»å‹çš„æ ¼å¼ Type Case VARCHAR(X) user name, email, country, subject, password TEXT messages, emails, comments, formatted text, html, code, images, links MEDIUMTEXT large json bodies, short to medium length books, csv strings LONGTEXT textbooks, programs, years of logs files, harry potter and the goblet of fire, scientific research logging Nodeéƒ¨åˆ†æ•°æ®åº“è¿æ¥ä¸€ä¸ªå…¸å‹çš„SELECTè¯·æ±‚å†™æ³• 1234567891011121314151617181920212223242526// ä¾èµ–mysqlæ¨¡å—var mysql = require('mysql');// åˆ›å»ºè¿æ¥ï¼ŒæŒ‡å®šDBåœ°å€ï¼ç”¨æˆ·åï¼å¯†ç ï¼åº“åvar pool = mysql.createPool(&#123; host: '10.4.232.53', user: 'mock_user', password: 'mock_user_pwd', database: 'live_show'&#125;);// exportsä»¥å°†æ¥å£æš´éœ²åœ¨æ¨¡å—å¤–exports.queryComments = function (channelId, limit, callback) &#123; var select = 'SELECT `comment` FROM instant_comment where `channel_id` = \\'' + channelId + '\\' ORDER BY `id` DESC LIMIT ' + limit; console.log(\"queryComments: \" + select); // å»ºè®®æ¯ä¸€æ¬¡æ‰§è¡ŒDBæ“ä½œï¼Œéƒ½é€šè¿‡logè®°å½•ä¸‹å…·ä½“æŒ‡ä»¤ pool.getConnection(function (err, conn) &#123; // è¯·æ±‚ä¸€ä¸ªè¿æ¥ if (err) throw err; // jsé‡Œé€šå¸¸çš„å†™æ³•ï¼Œå›è°ƒå‡½æ•°ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯err conn.query(select, function (err, rows, fields) &#123; if (err) &#123; throw err; &#125; else &#123; callback(rows); // å›è°ƒå‡½æ•°å¤„ç†row &#125; conn.release(); // æ³¨æ„ï¼ä¸€å®šè¦åœ¨å›è°ƒå‡½æ•°ä¸­é‡Šæ”¾è¿æ¥ï¼Œä¸ç„¶ä¸€æ—¦è¿›è¡Œ10æ¬¡ï¼ˆé»˜è®¤å€¼ï¼‰æ•°æ®è¯·æ±‚ï¼Œå°±ä¼šå¯¼è‡´è¿æ¥æ‰“æ»¡è€ŒæŒ‚æ‰ &#125;); &#125;);&#125;; httpè¯·æ±‚ä¸€èˆ¬å†™æ³•æ˜¯ 12345678// handlerä¸ºå›è°ƒå‡½æ•°require('http').createServer(handler).listen(port);// handlerå†™æ³•function handler(req, resp) &#123; // do your business resp.write('this is response'); resp.end();&#125; å…¶ä¸­ resp.write(&#39;foo&#39;) resp.end() ä¹Ÿå¯ä»¥ç®€å†™ä¸º resp.end(&#39;foo&#39;) æ•°æ®JsonåŒ–jsä¸­ä½¿ç”¨çš„æ˜¯å¼±ç±»å‹å¯¹è±¡ 1234var foo = &#123; code : 200, msg : 'æˆåŠŸ'&#125; å¯¹äºè¿™ç§å¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨ resp.write(foo.toString()) æ˜¯æ— æ³•è¿”å›æ•°æ®çš„ï¼Œæ‹¿åˆ°çš„å…¶å®æ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„æŒ‡é’ˆã€‚è¿™é‡Œè¦ç”¨ JSON.stringify(foo).toString() æ¥ç”Ÿæˆç»“æœã€‚ 1resp.write(JSON.stringify(foo).toString()); é™æ€èµ„æºä½¿ç”¨ express æ¡†æ¶ï¼Œéå¸¸ç®€å•ï¼ˆ@ç‹å–„æˆ ä»‹ç»è¯´ç°åœ¨ koa æ›´ä¸ºæµè¡Œï¼Œå¾…è°ƒç ”ï¼‰ã€‚é€šè¿‡å½¢å¦‚ http://10.4.232.53:9528/live_1.jpg çš„åœ°å€æ¥è·å–é™æ€èµ„æºï¼ˆä¸éœ€è¦æ‹¼æ¥ publicï¼‰ 1234require('express');var app = express();app.use(express.static('public')); // é¡¹ç›®ç›®å½•ä¸‹çš„publicæ–‡ä»¶å¤¹ï¼Œå³ä¸ºé™æ€æ–‡ä»¶ç›®å½•app.listen(9528); å®šæ—¶ä»»åŠ¡ä½¿ç”¨ setInterval(func, delay) æ¥æ‰§è¡Œå‘¨æœŸä»»åŠ¡ï¼Œå› ä¸ºä»£ç æœ¬èº«æœ‰è¿è¡Œæ—¶é—´ï¼Œå‡½æ•°æœ‰è°ƒç”¨æ—¶é—´ï¼Œå› æ­¤åœ¨æ—¶åˆ»ä¸Šå¹¶ä¸ä¼šä¿è¯100%çš„ç²¾ç¡®ï¼Œï¼ˆå¦‚å£°æ˜äº†3000msï¼Œå¯èƒ½åœ¨2990æ—¶æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½åœ¨3010æ—¶æ‰§è¡Œï¼‰ 12345678// å®šæ—¶ä»»åŠ¡,å…³é—­ä¸åœ¨ä¿æ´»åˆ—è¡¨é‡Œçš„ç›´æ’­æºvar livingPeriod = 10 * 1000; // éœ€è¦ä¿æ´»çš„ç›´æ’­,è¦åœ¨30så†…è°ƒç”¨ä¿æ´»æ¥å£setInterval(function() &#123; console.log(\"living shows: \" + livingShows); dbHelper.killDeadShow(livingShows, function () &#123; livingShows = []; // clear &#125;);&#125;, livingPeriod); ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"ä½¿ç”¨Gitå¯¹æœ€è¿‘nä¸ªcommitè¿›è¡Œåˆå¹¶","date":"2016-03-31T13:22:41.000Z","path":"2016/03/31/Git-Squash-Commits/","text":"å¦‚ä½•åœ¨Gitä¸­åˆå¹¶å¤šæ¬¡commitå‘¢ï¼Ÿ é€šè¿‡Gitå¯¹æœ€è¿‘çš„nä¸ªcommitè¿›è¡Œåˆå¹¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ 12$ git reset --soft HEAD~n$ git commit ç‚’é¸¡ç®€å•ï¼ å¦‚æœè¦åˆå¹¶çš„æ˜¯æœ‰é—´éš”çš„commitï¼Œç¬”è€…ç›®å‰è¿˜æ²¡æœ‰å­¦ä¼šâ€¦","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"Android Performance Patterns - s4ep7 Removing Unused Code","date":"2016-03-31T01:41:01.000Z","path":"2016/03/31/Android-Performance-Patterns-s4ep7-Removing-Unused-Code/","text":"Third party libraries can be some serious time savers for Android development. They allow us to do awesome things in our app without having to write any of the functionality ourselves. Thatâ€™s a pretty big convenience. Whatâ€™s not convenient though is the code-bloat they can often come with. Video Link Third Party Libraryåœ¨è‡ªå·±çš„appä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æœ‰å“ªäº›ä¼˜ç‚¹å‘¢ï¼Ÿ ç¬¬ä¸‰æ–¹åº“å¯ä»¥ä¸ºæˆ‘ä»¬æä¾›ä¾¿æ·çš„åŠŸèƒ½ å®ƒä»¬éƒ½ç»è¿‡äº†è‰¯å¥½å…¨é¢çš„æµ‹è¯•ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¾—åˆ°éªŒè¯ è€Œç¼ºç‚¹å¯èƒ½å°±ä¸é‚£ä¹ˆæ˜æ˜¾ ä½ å¿…é¡»å¼•ç”¨æ•´ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå³ä½¿ç”¨åˆ°çš„åªæ˜¯å…¶ä¸­ä¸€ä¸ªç®€å•çš„ç±»â€”â€”è¿™è¢«å«åšcode bloatï¼ˆä»£ç è†¨èƒ€ï¼‰ è¿™ä¼šä½¿ä½ çš„apkä½“ç§¯å¢å¤§ ç”šè‡³å¯èƒ½è§¦åŠ65kçš„æ–¹æ³•æ•°å¤©èŠ±æ¿ï¼ˆå…³äº65kï¼Œè¯·æŸ¥é˜…è¿™ä¸€ç¯‡Building Apps with Over 65K Methodsï¼‰ å¯¹äºMultiDexï¼Œå°å“¥ç»™å‡ºäº†éå¸¸å¹½é»˜çš„æè¿° Itâ€™s pretty much as much fun going to the dentistâ€¦ Proguardä½œç”¨ Shrinkï¼šç²¾ç®€ä»£ç ï¼Œå»é™¤æ— ç”¨çš„ç±» Optimizeï¼šä¼˜åŒ–é€»è¾‘ Obfuscateï¼šæ··æ·†ï¼Œå¢åŠ é€†å‘å·¥ç¨‹çš„éš¾åº¦ ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œä½¿ç”¨Proguardåï¼ŒåŸæœ¬8.4mbçš„Google IO appè¢«ç¼©å‡åˆ°äº†4.1mb å¼€å¯ proguard ä¹Ÿååˆ†ç®€å•ï¼Œåªè¦åœ¨ gradle æ–‡ä»¶ä¸­å°† minifyEnabled å±æ€§å£°æ˜ä¸º trueï¼Œå¹¶å†™æ˜ proguardFiles è·¯å¾„ 123456789android &#123; ... buildTypes &#123; release &#123; minifyEnabled true proguardFiles getDefaultProguardFile('proguard-android.txt') &#125; &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œproguardä¼šå¯¼è‡´åº”ç”¨åˆ°â€œåå°„â€çš„ä»£ç æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºå®ƒä¼šæ”¹å˜æ–¹æ³•å&amp;ç±»åï¼Œéœ€è¦ç”¨ keep åœ¨ç›¸å…³ä»£ç ä¸Šå…³é—­proguard ProGuard å®˜æ–¹æ–‡æ¡£ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"éª¨ç›†å‰å€¾101","date":"2016-03-24T12:17:47.000Z","path":"2016/03/24/Fixing-Anterior-Pelvic-Tilt/","text":"å‰è¨€éª¨ç›†å‰å€¾æ˜¯ä¸€ç§ä¸è‰¯çš„ä½“æ€ï¼Œå¦‚æœä½ åœ¨æ—©æ™¨é†’æ¥ä¸æ—¶æ„Ÿåˆ°ä¸‹èƒŒéƒ¨ç–¼ç—›ï¼›åœ¨å¥èº«æˆ¿é‡Œçš„é‡Œçš„æ·±è¹²ã€ç¡¬æ‹‰æ€»ä¼šå› ä¸ºä¸‹èƒŒåŠ›ç«­è€Œæœ‰æ‰€é˜»æ»ï¼›èº«ä½“æ›²çº¿ä¾§é¢çœ‹èµ·æ¥ä¸‹è…¹å‘å‰ã€è‡€éƒ¨å‘åçªå‡ºï¼Œé‚£ä¹ˆè¦å½“å¿ƒï¼Œå¾ˆå¯èƒ½ä½ æ­£åœ¨é­é‡éª¨ç›†å‰å€¾ã€‚ ä»€ä¹ˆæ˜¯éª¨ç›†å‰å€¾éª¨ç›†å‰å€¾ï¼ˆAnterior Pelvic Tiltï¼Œç®€ç§°APTï¼‰ï¼Œå¸¸è§äºä¹…åä¼æ¡ˆå·¥ä½œäººç¾¤ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯è‡€éƒ¨åå‡¸ï¼Œè…¹éƒ¨å‘å‰é¡¶ï¼Œå‰æŒºåæ’…ï¼Œå›¾ä¸­çš„ç¬¬äºŒç§å³ä¸ºAPTã€‚ å¦å¤–ï¼Œåœ¨å¥èº«æˆ¿é‡Œä¸€äº›ä½“æ€å‘å±•ä¸å‡çš„äººèº«ä¸Šä¹Ÿç»å¸¸çœ‹åˆ°éª¨ç›†å‰å€¾çš„ç°è±¡ï¼Œæ•…ä¹Ÿç§°ä¸ºâ€œå¥ç¾è…°â€ã€‚ ä»éª¨éª¼é€è§†å›¾ä¸Šæ¥çœ‹ å¦‚ä½•åˆ¤æ–­éª¨ç›†å‰å€¾åˆ¤æ–­éª¨ç›†å‰å€¾çš„åŸå› æœ‰å¾ˆå¤šç§ï¼Œå½“ç„¶ï¼Œå»æ­£è§„åŒ»é™¢è¿›è¡Œå¤–ç§‘ï¼ˆè„ŠæŸ±ï¼‰æ£€éªŒæ˜¯æœ€çœäº‹ä¹Ÿæœ€å‡†ç¡®çš„æ–¹æ³•ã€‚åŒ»å­¦æ‰‹æ®µä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ˜¾è‘—ç‰¹å¾å¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„å¸®åŠ©æˆ‘ä»¬é‰´åˆ«éª¨ç›†å‰å€¾ã€‚ æ–¹æ³•ä¸€ï¼šå¯¹é•œè‡ªæ£€ï¼Œä¸ç®¡æ˜¯å¥èº«æˆ¿è¿˜æ˜¯å§å®¤çš„ï¼Œåªè¦æœ‰ä¸€é¢è¶³å¤Ÿå¤§çš„é•œå­ï¼ŒæŒ‰ç…§æ­£å¸¸æ”¾æ¾å§¿æ€ç«™ç«‹ï¼Œè§‚å¯Ÿè…°è…¹åŠè‡€éƒ¨ã€‚ æ–¹æ³•äºŒï¼šè´´å¢™ç«‹æ­£ï¼Œå¦‚æœèƒŒåèƒ½æ”¾å…¥ä¸€æŒï¼ŒåŸºæœ¬èº«å§¿è¿˜ç®—æ­£å¸¸ï¼›å¦‚æœèƒ½æ”¾å…¥ä¸€æ‹³ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯éª¨ç›†å‰å€¾ã€‚ æ–¹æ³•ä¸‰ï¼šåœ¨ç¡è§‰æ—¶ï¼Œå¦‚æœä»°ç¡æ—¶è…°éƒ¨æ€»æ˜¯æ‚¬ç©ºï¼Œç¡é†’åä¼´éšç–¼ç—›ï¼Œä»¥è‡³äºä¸å¾—ä¸é‡‡å–ä¾§å§æ–¹å¼å…¥ç¡ï¼Œè¿™æ—¶ä¹Ÿè¦å°å¿ƒäº†ã€‚ éª¨ç›†å‰å€¾çš„èµ·å› é¦–å…ˆæ¥çœ‹ä¸€ä¸‹APTæ‚£è€…çš„è„Šæ¤ä¸æ­£å¸¸çš„è„Šæ¤ï¼ŒAPTæ‚£è€…çš„å°¾æ¤å‘ˆç°äº†ä¸€ä¸ªå¤¸å¼ çš„å¼§åº¦ é€ æˆè¿™ä¸€åˆ‡çš„æ ¹æœ¬åŸå› æ˜¯â€”â€” è‚ŒåŠ›ä¸å‡ æƒ³è±¡ä½ çš„ç›†è…”ï¼Œå®ƒçš„å‰ä¸Šï¼ˆè…¹ç›´è‚Œï¼‰ã€åä¸‹ï¼ˆè‡€å¤§è‚Œã€è…˜ç»³è‚Œï¼‰æ˜¯è‚Œè‚‰ç»„Aï¼Œå®ƒçš„åä¸Šï¼ˆç«–è„Šè‚Œï¼‰ã€å‰ä¸‹ï¼ˆé«‚è…°è‚Œã€è‚¡ç›´è‚Œï¼‰ä¸ºè‚Œè‚‰ç»„Bã€‚ Aä¸Bä¹‹é—´ç»´æŒå¹³è¡¡æ—¶ï¼Œäººçš„ç›†è…”å¤„äºä¸€ä¸ªåˆšå¥½çš„ç›´ç«‹çŠ¶æ€ã€‚ Aå¼±Bå¼ºæ—¶ï¼Œé€ æˆéª¨ç›†å‰å€¾ï¼ŒAnterior Pelvic Tiltï¼ˆAPTï¼‰ Aå¼ºBå¼±æ—¶ï¼Œé€ æˆéª¨ç›†åå€¾ï¼ŒPosterior Pelvic Tiltï¼ˆPPTï¼‰ åŠ›çŸ©å›¾ ç«–è„Šè‚Œã€é«‚è…°è‚Œå¤ªå¼ºï¼ˆè¿‡çŸ­ï¼‰å¯¼è‡´éª¨ç›†å‰å€¾ æ­£å¸¸çŠ¶æ€ä¸‹ï¼Œè…¹ç›´è‚Œã€è‡€å¤§è‚Œä¼šèµ·åˆ°æŠ‘åˆ¶éª¨ç›†å‰å€¾çš„æ•ˆæœ ä¸ºä»€ä¹ˆç«–è„Šè‚Œã€é«‚è…°è‚Œä¼šèµ·ä¸€ä¸ªè´Ÿé¢ä½œç”¨å‘¢ï¼Ÿ ç«–è„Šè‚Œï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„â€œä¸‹èƒŒéƒ¨â€ï¼Œå½“ç»ƒä¹ ç¡¬æ‹‰ã€æ·±è¹²æ—¶éƒ½ä¼šå¸¦åˆ°è¿™éƒ¨åˆ†è‚Œè‚‰ã€‚è€Œè‚Œè‚‰è¶Šå¼ºå£®ï¼Œè‚Œçº¤ç»´å¾€å¾€ä¹Ÿä¼šå˜å¾—è¶ŠçŸ­è¶Šç²—ï¼Œå¯¼è‡´æ‹‰åŠ¨ç›†è…”å‘å‰å€¾æ–œã€‚ è…¹ç›´è‚Œã€è…¹å¤–æ–œè‚Œã€è‡€å¤§è‚Œã€è…˜ç»³è‚Œè¿™å‡ å¤„è‚Œè‚‰ï¼Œå¾€å¾€åœ¨è®­ç»ƒä¸­å¾—ä¸åˆ°é‡è§†ï¼Œå¯¼è‡´æ¾å®æ— åŠ›ï¼Œå¸¦ä¸åŠ¨ç›†è…”å›å½’ã€‚ è¯´åˆ°åº•ï¼Œå°±æ˜¯ä¸€ç»„æ‹®æŠ—è‚Œç›¸äº’ä¹‹é—´å‘å±•ä¸å‡çš„é—®é¢˜ã€‚ è¿™ä½ç¾å›½å¤§å”å¾ˆå¥½åœ°è§£é‡Šäº†éª¨ç›†å‰å€¾çš„èµ·å› ï¼Œå¹¶ä»‹ç»äº†å‡ ç§å®¹æ˜“æ“ä½œçš„çŸ«æ­£æ–¹æ³•ã€‚ YouTubeè§†é¢‘ï¼Œè¯·è‡ªå¤‡äº‘æ¢¯ Your Back is Whack!https://www.youtube.com/watch?v=BEn61BL4Nwk éª¨ç›†å‰å€¾çš„å±å®³ ä¸‘ï¼è®©äººå°è…¹å‰å‡¸ã€è‡€éƒ¨æ¨ªå‘å‘å±•å¹¶ä¸‹å‚ï¼›è¾›è¾›è‹¦è‹¦ç»ƒæˆçš„8å—ï¼6å—è…¹è‚Œä»ä¾§é¢çœ‹å°±åƒè£¹åœ¨äº†ä¸€ä¸ªçƒå¤–é¢ è…°æ¤å‰å‡¸ï¼Œç—…ç†æ€§å§¿åŠ¿ä¸æ­£ç¡®ï¼Œå¿…ç„¶ä¼šå¯¼è‡´è…°é…¸èƒŒç—›ï¼Œå¹¶ä¸”è‚©é¢ˆé…¸èƒ€ã€‚æ­¤å¤–éª¨ç›†æ‰¿æ‰˜ç€è…¹éƒ¨å†…è„ç­‰ï¼Œå¦‚æœéª¨ç›†å€¾æ–œï¼Œä¹Ÿä¼šå¯¼è‡´å†…è„çš„è¿è½¬ä¸ç•… åƒµç¡¬çš„ä¸‹èƒŒéƒ¨æˆä¸ºé˜»ç¢ç¡¬æ‹‰ã€æ·±è¹²æ°´å¹³è¿›ä¸€æ­¥æé«˜çš„ç“¶é¢ˆ å¦‚æœè¯´éª¨ç›†å‰å€¾æœ‰ä»€ä¹ˆå¥½å¤„çš„è¯ï¼Œå¤§æ¦‚å°±æ˜¯ä¼šäº§ç”Ÿâ€œå‰å‡¸åç¿˜â€çš„æ•ˆæœã€‚ä½ æ‰€è§åˆ°çš„ç¿˜è‡€ï¼Œææœ‰å¯èƒ½æ˜¯éª¨ç›†å‰å€¾é€ æˆçš„â€œä¼ªâ€ç¿˜è‡€ å¦‚ä½•çŸ«æ­£éª¨ç›†å‰å€¾çŸ«æ­£éª¨ç›†å‰å€¾ï¼Œæœ€æ ¹æœ¬çš„åŸåˆ™åªæœ‰ä¸€ç‚¹ å¢å¼ºå¼±åŠ¿è‚Œè‚‰ï¼Œæ‹‰ä¼¸å¼ºåŠ¿è‚Œè‚‰ â€œå¼±åŠ¿è‚Œè‚‰â€ï¼šå°†éª¨ç›†æ‹‰å›å¹³è¡¡çŠ¶æ€çš„è…¹ç›´è‚Œã€è…¹å¤–æ–œè‚Œã€è‡€å¤§è‚Œã€è…˜ç»³è‚Œ â€œå¼ºåŠ¿è‚Œè‚‰â€ï¼šå°†éª¨ç›†å‘å‰å€¾çŠ¶æ€æ‹‰åŠ¨çš„é«‹éƒ¨å±ˆè‚Œï¼ˆé«‚è…°è‚Œ è‚¡ç›´è‚Œï¼‰ã€ç«–è„Šè‚Œ ä¸€æ–¹é¢å¼ºåŒ–å¼±åŠ¿è‚Œè‚‰ï¼Œä½¿èº«ä½“å¢å¼ºå°†éª¨ç›†æ‹‰å›åŸè§’åº¦çš„æ‰­åŠ›ï¼Œå¦ä¸€æ–¹é¢æ‹‰ä¼¸å¼ºåŠ¿è‚Œè‚‰ï¼Œæ”¾æ¾ç´§å¼ çš„è‚Œè‚‰ï¼Œæ‹‰é•¿è‚Œçº¤ç»´ å¼ºåŒ–è‡€å¤§è‚Œã€è…˜ç»³è‚Œã€è…¹å¤–æ–œè‚Œã€è…¹ç›´è‚Œ è‡€å¤§è‚Œï¼šè‡€æ¡¥ï¼Œä»°å§é¡¶è‡€ï¼Œç¾å¼ç¡¬æ‹‰ è…˜ç»³è‚Œï¼šä¿¯å§è…¿å¼¯ä¸¾ï¼Œåå‘è…¿å¼¯ä¸¾ è…¹è‚Œï¼šRKCå¹³æ¿æ”¯æ’‘ï¼Œåå‘å·è…¹ï¼Œæ‚¬å‚Vå­—ä¸¾è…¿ æ‹‰ä¼¸ç«–è„Šè‚Œã€é«‹éƒ¨å±ˆè‚Œï¼ˆé«‚è…°è‚Œã€è‚¡ç›´è‚Œï¼‰ ç«–è„Šè‚Œï¼šæ³¡æ²«è½´æ”¾æ¾ã€åå§¿æ‹‰ä¼¸ã€æ‰¶æ†ä¸‹è¹² é«‚è…°è‚Œï¼šå¼“æ­¥æ‹‰ä¼¸ è‚¡ç›´è‚Œï¼šä¾§å§æ‹‰è…¿ ä¸‹é¢æ˜¯ä¸€äº›è®­ç»ƒæ–¹æ³•çš„å›¾ç‰‡ï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œæ¯ä¸ªäººçš„èº«ä½“æ¡ä»¶ä¸åŒï¼Œè‚Œè‚‰å¼ºå¼±æœ‰åˆ«ï¼Œè¦æ ¹æ®å®é™…æƒ…å†µé€‰å–ä¸åŒçš„åŠ¨ä½œï¼›å°±ç®—æ˜¯åŒä¸€ä¸ªåŠ¨ä½œï¼Œåœ¨åšçš„æ—¶å€™ä½¿ç”¨ä¸åŒçš„è§’åº¦ã€æ‹‰ä¼¸ä¸åŒçš„æ—¶é—´ï¼Œä¹Ÿä¼šäº§ç”Ÿè¿¥å¼‚çš„æ•ˆæœã€‚ è‡€å¤§è‚Œï¼ˆå¼ºåŒ–ï¼‰è‡€æ¡¥ï¼šä¸‹èƒŒæ”¾æ¾ï¼Œé è‡€éƒ¨æ”¶ç´§å‘åŠ›ï¼Œé¡¶å³°æ”¶ç¼©ï¼Œæ„Ÿå—è‡€å¤§è‚Œå¤¹ç´§å¸¦æ¥çš„åˆºæ¿€æ„Ÿã€‚ è‡€æ¡¥å¯¹äºå¡‘é€ ç¿˜è‡€æœ‰ç€æ— å¯æ¯”æ‹Ÿçš„ä½œç”¨ï¼Œæ³¨æ„åœ¨åŠ¨ä½œé¡¶ç«¯æ—¶èº«ä½“åº”è¯¥ä¿æŒä¸€æ¡ç›´çº¿ï¼Œè…¹éƒ¨ä¸è¦ä¸Šé¡¶ã€‚ è¿›é˜¶è‡€æ¡¥ä½¿ç”¨å•è…¿æ”¯æ’‘ã€‚ ä¸‹é¢æ˜¯è§†é¢‘è®²è§£ï¼š https://youtu.be/viyoVBR_J5c ä»°å§é¡¶è‡€ï¼Œè‡€æ¡¥çš„è´Ÿé‡å¼ºåŒ–ç‰ˆï¼Œè¯·é‡åŠ›è€Œè¡Œï¼Œä¹Ÿå¯å€ŸåŠ©é•¿å‡³é¡¶åœ¨èƒŒéƒ¨è¿›è¡Œã€‚ è§†é¢‘è®²è§£ï¼š https://youtu.be/vSA-EBNUb-M ç¾å¼ç¡¬æ‹‰ï¼šæˆ‘ä»¬Glute Labå·²ç»å‘ç°åœ¨è¿›è¡Œç½—é©¬å°¼äºšç¡¬æ‹‰è®­ç»ƒæ—¶ï¼Œè‡€éƒ¨å‡ ä¹æ²¡æœ‰å‚ä¸æ´»åŠ¨ï¼Œä¸»è¦æ˜¯è…˜ç»³è‚Œï¼Œè‡³å°‘åœ¨è½»è´Ÿé‡çš„æ—¶å€™æ˜¯è¿™æ ·ã€‚è¿™ä¸æ˜¯ä¸€ä»¶å¥½äº‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£åœ¨é«‹å±ˆä¼¸è¿‡ç¨‹ä¸­å¦‚ä½•åˆ©ç”¨è‡€å¤§è‚Œã€‚ç¾å¼ç¡¬æ‹‰ä¸ç½—é©¬å°¼äºšç¡¬æ‹‰éå¸¸ç›¸ä¼¼ï¼Œç„¶è€Œå®ƒåŠ å…¥äº†ä¸€äº›éª¨ç›†è¿åŠ¨ã€‚åœ¨æ é“ƒä¸‹é™çš„è¿‡ç¨‹ä¸­ï¼Œä½ éœ€è¦ä¿æŒéª¨ç›†ç¨å‘å‰å€¾ã€‚åœ¨æ é“ƒä¸Šå‡çš„è¿‡ç¨‹ä¸­ï¼Œä½ éœ€è¦åˆ©ç”¨è‡€å¤§è‚Œçš„æ”¶ç¼©æ¥è®©éª¨ç›†ç¨å‘åå€¾ã€‚è¦æ³¨æ„çš„æ˜¯éª¨ç›†åå€¾æ˜¯ç”±è‡€éƒ¨çš„æ”¶ç¼©æŒ¤å‹è¾¾æˆçš„ï¼è€Œä¸æ˜¯è…°æ¤ç¿»è½¬ï¼å½“ç¡¬æ‹‰è‡³èº¯å¹²ç›´ç«‹æ—¶ï¼Œæ é“ƒå¯èƒ½ç”±äºä½ çš„è‡€éƒ¨æ”¶ç¼©ä»è€Œå‘å‰ç§»åŠ¨ã€‚ä½ å¯ä»¥æŠŠç¾å¼ç¡¬æ‹‰æƒ³è±¡æˆä¸€ç§ä»¥è‡€éƒ¨ä¸ºä¸­å¿ƒçš„ç½—é©¬å°¼äºšç¡¬æ‹‰ã€‚å†æ¬¡å¼ºè°ƒï¼Œä¾é è‡€å¤§è‚Œä½¿éª¨ç›†å‘åå€¾ï¼Œä¿æŒè…°æ¤ç¨³å®šã€‚ ç¾å¼ç¡¬æ‹‰ï¼›æ é“ƒä½äºåº•éƒ¨æ—¶ï¼Œä¿æŒè„ŠæŸ±ä¸­ç«‹ï¼›æ é“ƒä½äºé¡¶éƒ¨æ—¶ï¼Œå¼¯æ›²èƒ¸æ¤ï¼ˆä¸ŠèƒŒéƒ¨ï¼‰ï¼ŒåŒæ—¶éª¨ç›†åå€¾ æ é“ƒè‡³é¡¶éƒ¨ï¼ŒæŒ¤å‹è‡€å¤§è‚Œä½†é¿å…è…°æ¤ç¿»è½¬ Dimelç¡¬æ‹‰æ˜¯å‡ å¹´å‰ç”±è·¯æ˜“Â·è¥¿è’™æ–¯å’Œç¾å›½è¥¿éƒ¨æ é“ƒä¿±ä¹éƒ¨æ¨å¹¿å¼€æ¥çš„ã€‚ä½ å¯ä»¥çœ‹æˆæ˜¯å¤šæ¬¡æ•°çš„ç¾å¼ç¡¬æ‹‰ã€‚ç”¨ä½ æœ€å¤§é‡é‡çš„30%-40%è´Ÿé‡ç»ƒä¹ 15-30æ¬¡ç¡¬æ‹‰ï¼Œä»¥æœ€å¤§åŒ–çš„åˆºæ¿€ä½ çš„è‡€å¤§è‚Œï¼Œå¢å¼ºæ³µæ„Ÿã€‚å¦‚æœä½ åŠ¨ä½œæ­£ç¡®ï¼Œè¿™å’Œè‡€æ¨ï¼ˆHip Thrustï¼‰æœ‰ç‚¹åƒçš„ã€‚ ç¾å¼ç¡¬æ‹‰çš„è§†é¢‘æ¼”ç¤ºï¼šhttps://youtu.be/1aVjkPzKovc å¦å¤–ï¼Œå…³äºç½—é©¬å°¼äºšç¡¬æ‹‰ã€ç¾å¼ç¡¬æ‹‰ã€å±ˆè…¿ç¡¬æ‹‰ã€ç›´è…¿ç¡¬æ‹‰ï¼Œè¯·å‚è€ƒä¸‹é¢è¿™ç¯‡æ–‡ç«  http://www.actrainer.com/bbs/detail_962 è…˜ç»³è‚Œï¼ˆå¼ºåŒ–ï¼‰ä¿¯å§è…¿å¼¯ä¸¾ï¼šå¤§éƒ¨åˆ†å¥èº«æˆ¿é‡Œéƒ½ä¼šæœ‰çš„å™¨æ¢°ï¼Œæ³¨æ„è®­ç»ƒæ—¶é›†ä¸­æ³¨æ„åŠ›åˆ°è…˜ç»³è‚Œä¸Šï¼Œæ„Ÿå—è‚Œè‚‰æ”¶ç¼©ã€‚ åå‘è…¿å¼¯ä¸¾ï¼šéœ€è¦å€ŸåŠ©ç‰¹å®šå™¨æ¢°æˆ–è€…ä¼™ä¼´å¸®åŠ©æ‰èƒ½è¿›è¡Œï¼ŒæŒç»­å¯¹è…˜ç»³è‚Œã€è‡€å¤§è‚Œè¿›è¡Œç‹‚è½°æ»¥ç‚¸ã€‚ è…¹è‚Œï¼ˆå¼ºåŒ–ï¼‰RKCå¹³æ¿æ”¯æ’‘ï¼šè¿™é¡¹å¹³æ¿æ”¯æ’‘å’Œä¸€èˆ¬çš„åˆå§‹åŠ¨ä½œæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯ä½ èº«ä½“è‚Œè‚‰çš„ç´§å¼ ç¨‹åº¦ä¼šç›¸å¯¹è¾ƒé«˜ï¼Œå¹³è¡¡æ„Ÿçš„è¦æ±‚ä¹Ÿä¼šæ›´é«˜ï¼Œç›¸å½“äºä¸€èˆ¬å¹³æ¿æ”¯æ’‘4å€çš„è¿åŠ¨é‡ï¼Œè€Œä¸”æ¯ç»„ä»…ä»…éœ€è¦ä½ 10ç§’çš„æ—¶é—´ï¼Œä½ å°±èƒ½å¤Ÿæ‹¥æœ‰åšå®çš„6å—è…¹è‚Œäº†ã€‚è®©æˆ‘ä»¬æ¥æ¥ä¸‹æ¥çœ‹ä¸€äº›RKCå¹³æ¿æ”¯æ’‘åº”è¯¥æ€ä¹ˆåšã€‚ å…ˆä»¥ä¼ ç»Ÿçš„å¹³æ¿æ”¯æ’‘åšå¥½å‡†å¤‡å§¿åŠ¿ï¼Œå°è‡‚ç€åœ°ï¼Œä¸è‚©éƒ¨å¤„åœ¨ä¸€æ¡ç›´çº¿ä¸Šï¼ŒåŒè„šå¹¶æ‹¢ï¼Œé¢éƒ¨æœä¸‹ã€‚èº«ä½“ä»å¤´åˆ°è„šå‘ˆä¸€æ¡ç›´çº¿ã€‚ åŒæ‰‹æ¡æ‹³ï¼Œä¸¤è‚©å¼ å¼€ï¼Œå°è‡‚å‘åœ°é¢ç”¨åŠ›ï¼Œå°±å¥½åƒä½ è¦æŠŠä½ çš„å°è‡‚å¾€ä½ çš„è„šæ‰€åœ¨çš„åœ°æ–¹æ‹–æ‹½ä¸€æ ·ã€‚ è‡€éƒ¨ä»¥åŠè„šç­‹ç”¨åŠ›ï¼Œè®©ä½ çš„å°¾æ¤éª¨æŠ¬å‡è‡³å¾®å¾®å‘å¤´éƒ¨å€¾æ–œï¼Œä¿æŒåèƒŒä¸‹éƒ¨åˆ†æŒºç›´ï¼Œè¿™æ—¶ä½ å°±ä¼šæ„Ÿè§‰åˆ°ä½ çš„è‡€éƒ¨å’Œè…¿å¼€å§‹æœ‰ç›¸åº”çš„æ„Ÿè§‰äº†ã€‚ä¿æŒè†ç›–æ‰“ç›´ã€‚ ä¿æŒå§¿åŠ¿ï¼Œæ³¨æ„ä¿æŒæ•´ä¸ªèº«ä½“è‚Œè‚‰çš„æœ€å¤§ç´§å¼ ç¨‹åº¦ã€‚ RKCPçš„è§†é¢‘è®²è§£ï¼šhttps://youtu.be/6TKktamzq4o åå‘å·è…¹ï¼š åŠ¨ä½œæè¿° ä»°å§å¼€å§‹ï¼Œå¯ä»¥ç›´è…¿ï¼Œä¹Ÿå¯ä»¥æ›²è…¿ã€‚åŒæ‰‹ä¹Ÿå¯ä»¥æŠ“ä½å¥èº«å‡³æˆ–åºŠæ²¿æ”¯æ’‘ã€‚ ä½¿ç”¨è…¹è‚Œçš„åŠ›é‡å·æ›²èº«ä½“ã€‚æ…¢æ…¢å°†å¤§è…¿æ‹‰è¿‘èº«ä½“ã€‚ä¸‹è…°éƒ¨ç¦»å¼€åœ°é¢ã€‚ æ…¢æ…¢æ”¾ä¸‹ï¼Œé‡å¤ã€‚ åŠ¨ä½œè¦ç‚¹ é‡ç‚¹ä¸æ˜¯å¤§è…¿çš„è¿åŠ¨ï¼Œè€Œæ˜¯è…¹è‚Œå¸¦åŠ¨èº¯å¹²çš„å·æ›²ï¼ä½ ç”šè‡³å¯ä»¥ä¸æ”¹å˜å¤§è…¿ä¸èº«ä½“çš„è§’åº¦ï¼ˆè…¿å’Œé«‚ç­‰è‚Œç¾¤å°±ä¸å‘åŠ›äº†ï¼‰ã€‚ è¯•ç€æŠŠå¤§è…¿å’Œèº¯å¹²çš„è§’åº¦ç»´æŒå›ºå®šã€‚ Vå­—ä¸¾è…¿ï¼šã€Šå›šå¾’å¥èº«ã€‹é‡Œé¢ï¼Œâ€œå…­è‰ºâ€ä¸­çš„â€œä¸¾è…¿â€æœ€ç»ˆå¼ï¼Œæ³¨æ„åœ¨ä¸¾èµ·ï¼ä¸‹æ”¾çš„è¿‡ç¨‹ä¸­æœ‰æ„è¯†åœ°æ§åˆ¶è…¹éƒ¨è‚Œè‚‰â€”â€”å°¤å…¶æ˜¯ä¸‹è…¹éƒ¨ï¼Œä¸è¦å€ŸåŠ©æƒ¯æ€§ç”©ä¸Šå»ã€‚ è§†é¢‘è®²è§£ï¼šhttps://youtu.be/rI1xHnMVcfk ç«–è„Šè‚Œï¼ˆæ‹‰ä¼¸ï¼‰æ³¡æ²«è½´æ”¾æ¾ æ³¡æ²«è½´è®²è§£è§†é¢‘ï¼ˆåŒæ ·æ¥è‡ªYouTubeï¼‰ https://youtu.be/QJLxruO3su0 åå§¿æ‹‰ä¼¸ï¼šååœ¨æ¤…å­ä¸Šï¼ŒåŒè„šæ‰“å¼€ï¼Œè‡€éƒ¨ååœ¨æ¤…é¢çš„å‰é¢ï¼Œä¸Šèº«ç›´ç«‹åŒæ‰‹äº¤å‰ä»åé¢æŠ±ä½é¢ˆéƒ¨çš„ä¸‹ç«¯ï¼ˆé¢ˆæ¤ä¸èƒ¸æ¤äº¤ç•Œçš„è‚©éƒ¨ä½ç½®ï¼‰ã€‚æ…¢æ…¢åœ°åŒæ‰‹ç”¨åŠ›ï¼Œèº«ä½“é€æ­¥å¾€ä¸‹å‹ï¼Œç›´åˆ°å¤´éƒ¨ä½äºæ¤…é¢åè¿›ä¸€æ­¥å¼¯å‘æ¤…å­çš„åé¢ï¼Œè¿™æ—¶æ„Ÿè§‰åˆ°è…°èƒŒéƒ¨çš„è‚Œè‚‰å……åˆ†è¢«æ‹‰é•¿æ‹‰ç´§ï¼Œå°¤å…¶æ˜¯ä¸‹è…°éƒ¨å¯èƒ½è¿˜æœ‰é…¸ç—›çš„æ„Ÿè§‰ï¼Œä¿æŒè¿™æ ·çš„å§¿åŠ¿10~20ç§’ï¼ˆå¿ƒé‡Œè¯»æ•°20~40ä¸‹ï¼‰åï¼Œç¼“æ…¢è¿”å›èµ·å§‹ä½ç½®ã€‚ é«‚è…°è‚Œï¼ˆæ‹‰ä¼¸ï¼‰å¼“æ­¥æ‹‰ä¼¸ï¼šé‡‡ç”¨å•è·ªå¼çš„ä½“ä½ï¼Œä¿æŒä¸Šèº«ç›´ç«‹ï¼ˆè…¹éƒ¨ä¸èƒ½å¾€å‰æŒºï¼‰ï¼Œå‰é¢çš„è…¿ä¿æŒå¤§è…¿ä¸å°è…¿æˆ90Â°ã€‚èº«ä½“é€æ­¥å¾€ä¸‹åå¼€å§‹æ‹‰ä¼¸ï¼Œåé¢çš„è…¿å°½é‡å¾€åä¼¸å’Œä¸‹å‹ï¼Œæ„Ÿè§‰åˆ°è…°æ¤ä»¥åŠé«‹å…³èŠ‚è¢«æ‹‰ç´§ï¼Œç»´æŒ10~20ç§’ï¼ˆå¿ƒé‡Œè¯»æ•°20~40ä¸‹ï¼‰åæ…¢æ…¢æŠ¬èµ·èº«ä½“å›åˆ°èµ·å§‹ä½ç½®å®Œæˆä¸€ä¾§çš„æ‹‰ä¼¸ã€‚æ›´æ¢å§¿åŠ¿é‡å¤åŠ¨ä½œæ‹‰ä¼¸å¦ä¸€ä¾§çš„é«‚è…°è‚Œåå®Œæˆä¸¤ä¾§çš„æ‹‰ä¼¸ã€‚æ³¨æ„åœ¨åŠ¨ä½œçš„è¿‡ç¨‹ä¸­ï¼Œè…¹éƒ¨ä¸èƒ½å¾€å‰æŒºã€‚ è‚¡ç›´è‚Œï¼ˆæ‹‰ä¼¸ï¼‰ç¾å¥³æ¼”ç¤ºçš„å§å§¿æ‹‰ä¼¸ https://youtu.be/cWuVcqvoEFo ä¾§å§æ‹‰è…¿ï¼šé€‰æ‹©é‡‡ç”¨æ¯”è¾ƒèˆ’é€‚çš„å§ä½è¿›è¡Œè‡ªæˆ‘æ‹‰ä¼¸ã€‚ä¾§èº«å¹³èººåœ¨å«å­ä¸Šï¼Œè¿œç¦»åœ°é¢çš„æ‰‹æŠ“ä½åŒä¾§çš„è„šèƒŒï¼Œä¿æŒèº«ä½“æŒºç›´ã€‚æŠ“ä½è„šèƒŒçš„æ‰‹æ…¢æ…¢ç”¨åŠ›ï¼Œå°†è…¿å¾€è‡ªå·±èº«ä½“çš„åä¸Šæ–¹æ‹‰å’Œå¾€è‡€éƒ¨é ï¼Œåˆ°è¾¾å¤§è…¿å’Œéª¨ç›†éƒ½å¤„äºåä¼¸çš„ä½ç½®ï¼Œæ˜æ˜¾æ„Ÿè§‰è‚¡ç›´è‚Œè¢«æ‹‰ç´§å¹¶æœ‰éšéšçš„ç—›æ„Ÿæ—¶å¾€å›æ”¾æ¾ä¸€ä¸ç‚¹å„¿ä¾¿ä¿æŒåœ¨è¿™æ ·çš„ä½ç½®10~20ç§’ï¼ˆå¿ƒé‡Œè¯»æ•°è¾¾åˆ°20æˆ–40ä¸‹ï¼‰ï¼Œç¼“æ…¢æ”¾æ¾å›åˆ°èµ·å§‹ä½ç½®ï¼Œå®Œæˆå•ä¾§è‚¡ç›´è‚Œçš„ä¸€æ¬¡æ‹‰ä¼¸åï¼Œè¿›è¡Œå¦ä¸€ä¾§çš„æ‹‰ä¼¸ã€‚ å‚è€ƒèµ„æ–™&amp;æ‰©å±•é˜…è¯»https://www.t-nation.com/training/dont-be-like-donald-duck http://www.styleforum.net/t/380309/oksus-guide-to-anterior-pelvic-tilt-apt http://zhuanlan.zhihu.com/oh-hard/19986866 http://tieba.baidu.com/p/2492811917 ===Ending===","tags":[{"name":"å¤§ä¿å¥","slug":"å¤§ä¿å¥","permalink":"https://lilei.pro/tags/å¤§ä¿å¥/"}]},{"title":"novaè‡ªåŠ¨åŒ–æµ‹è¯•åç»­å†…å®¹å®‰æ’","date":"2016-03-24T09:27:17.000Z","path":"2016/03/24/Nova-Automation-Develop-Plan/","text":"ä¸Šç¯‡é“¾æ¥ milestone 1 milestone 2 appium 1. é…ç½®åœ¨ç‹¬ç«‹æœºå™¨2. ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨ n/a mock server 1. é…ç½®åœ¨ç‹¬ç«‹æœºå™¨ 2. å¤šç»ˆç«¯æ³¨å†Œ3. å¤šç»ˆç«¯é…ç½®åŠ è½½4. ä½¿ç”¨sqlæ•°æ®åº“å­˜å‚¨é…ç½®æ–‡ä»¶5. ç²¾ç®€ä»£ç ï¼Œåˆ é™¤æ— ç”¨åŠŸèƒ½ 1. æ¢³ç†æ—¥å¿— test case 1. æ’é˜Ÿå…¨å¥—ç”¨ä¾‹2. ç”¨ä¾‹æ¨¡æ¿ä¼˜åŒ–3. ç”¨ä¾‹æ‰§è¡Œè¿‡ç¨‹å¯ä»¥æˆªå± 1. ç”¨ä¾‹æ‰§è¡ŒæŠ¥å‘Šï¼ˆemailï¼‰2. æ¯æ—¥æ„å»ºï¼Œè‡ªåŠ¨æ‰§è¡Œ3. å…¶å®ƒä¸šåŠ¡çº¿ä¸»æµç¨‹case å®ŒæˆèŠ‚ç‚¹ æ’é˜Ÿä¸šåŠ¡ä¸»æµç¨‹å›å½’è¿ç§»åˆ°è‡ªåŠ¨åŒ–æµ‹è¯• n/a with iOS å‰æ iOSæœ¬èº«æœ‰æ¸…æ™°åŒ–çš„MVCç»“æ„ï¼Œå¯¹Viewåšæµ‹è¯• ä¼˜ç‚¹ ç»„ä»¶è¾“å…¥çš„ç»„åˆ åŒ…å«æˆªå›¾çš„æŠ¥è¡¨ ä¸å¤Ÿå®Œå–„ äººè‚‰éªŒè¯ æ”¹è¿› mock server å¹³å°åŒ–ï¼Œå¯ä¾› iOS ä½¿ç”¨ appium æ–‡æ¡£é˜…è¯» http://appium.io/slate/en/master/?java#introduction-to-appium appiumçš„è®¾è®¡æ€æƒ³ You shouldnâ€™t have to recompile your app or modify it in any way in order to automate it. You shouldnâ€™t be locked into a specific language or framework to write and run your tests. A mobile automation framework shouldnâ€™t reinvent the wheel when it comes to automation APIs. A mobile automation framework should be open source, in spirit and practice as well as in name! Parallel Android Tests -p the main Appium port-U the device id-bp the Appium bootstrap portâ€“chromedriver-port the chromedriver port (if using webviews or chrome)â€“selendroid-port the selendroid port (if using selendroid) If we had two devices with the IDâ€™s 43364 and 32456, we would start two different Appium servers with the following commands: node . -p 4492 -bp 2251 -U 32456 node . -p 4491 -bp 2252 -U 43364 ignoreUnimportantViews Another example of a use-case for settings would be telling appium to ignore elements which are not visible.s","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"è‡ªåŠ¨åŒ–æµ‹è¯•","slug":"è‡ªåŠ¨åŒ–æµ‹è¯•","permalink":"https://lilei.pro/tags/è‡ªåŠ¨åŒ–æµ‹è¯•/"}]},{"title":"Android Performance Patterns - s4ep6 Service Performance Patterns","date":"2016-03-20T11:03:45.000Z","path":"2016/03/20/Android-Performance-Patterns-s4ep6-Service-Performance-Patterns/","text":"Services are an integral component of almost every android application. But the functionality they provide comes with a drain on battery and system resources. And if youâ€™re not paying attention, services can easily stick around longer than they should which wastes system resources, and can often cause performance problems for your rendering thread. But Colt McAnlis has the answer : using services in the most efficient way possible means killing them off the right way, and sometimes, not even using them.Video Link On System Level, Services Ainâ€™t Freeåˆ›å»ºã€é”€æ¯ Service éœ€è¦æ—¶é—´ä¸å†…å­˜ Service May Cost Frame Lost ä½œä¸º Local Service å¯åŠ¨ï¼Œå¯¹åº”çš„ Service è¿è¡Œåœ¨ä¸»è¿›ç¨‹çš„ä¸»çº¿ç¨‹ä¸Š ä½œä¸º Remote Service å¯åŠ¨ï¼Œå¯¹åº”çš„ Service åˆ™æ˜¯è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹çš„ä¸»çº¿ç¨‹ä¸Š å¯¹äº1ä¸­çš„æƒ…å†µï¼Œå¦‚æœ Service ä¸­è¿›è¡Œäº†è€—æ—¶æ“ä½œï¼ˆè¶…è¿‡äº†16msï¼‰ï¼Œåˆ™åœ¨å±å¹•ç»˜åˆ¶æ—¶å¯èƒ½å¼•èµ·ä¸¢å¸§ã€‚ Donâ€™t Use Servicesif you donâ€™t have toâ€¦ å‚è§ä¸‹ä¸€èŠ‚ç½—åˆ—çš„ Solutions Async Event Functions GCM BroadcastReceiver LocalBroadcastReceiver HandlerThreads AsyncTaskLoaders IntentService Do not Let Services Live Longer Than They NeededService æœ‰ä¸¤ç§ä¸åŒçš„å¯åŠ¨æ–¹æ³•ï¼Œå¯¹åº”çš„ç§æ¤æ–¹æ³•ä¹Ÿä¸ºä¸¤ç§ Started Servicesï¼šåœ¨ Service ä¸­è°ƒç”¨stopSelf()ï¼Œæˆ–è€…åœ¨å¤–é¢è°ƒç”¨stopService()æ¥ç»ˆæ­¢ Bound Servicesï¼šé€šè¿‡unBindService()æ¥ç»ˆæ­¢ Mixedï¼šå¦‚æœæ˜¯å…ˆé€šè¿‡startService()å¯åŠ¨ï¼Œå†ç”¨bindService()ç»‘å®šçš„ Serviceï¼Œé‚£ä¹ˆåœ¨unBind()åï¼Œè¿˜è¦æ˜¾ç¤ºé€šè¿‡stopService()æ¥ç»ˆæ­¢ Tools å…‰å¤´å“¥åˆåœ¨æ¨é”€ Systrace äº† ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s4ep5 Minimizing Asset Payload","date":"2016-03-08T13:29:35.000Z","path":"2016/03/08/Android-Performance-Patterns-s4ep5-Minimizing-Asset-Payload/","text":"No matter how aggressively youâ€™ve optimized your networking code for performance, thereâ€™s still a huge problematic performance issue that you havenâ€™t seen: Bloated asset files. If youâ€™re not aggressively attacking the size of the assets youâ€™re transferring to your users, youâ€™re basically stealing time (and money) from them.Video Link Smaller Is Better é€Ÿåº¦ç¼“æ…¢å¹¶ä¸æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å¤„äºé«˜é€Ÿçš„4Gï¼wifiç¯å¢ƒä¸‹ å¤§æ•°æ®é‡å¯¼è‡´çš„å¤§ç”µé‡æ¶ˆè€— æµé‡ï¼é‡‘é’± å¼•èµ·æ•°æ®æµé‡è¿‡å¤§çš„ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå› ç´ ï¼šå›¾ç‰‡ã€åºåˆ—åŒ–æ•°æ®ã€‚ Images å¦‚æœä¸éœ€è¦å›¾ç‰‡é€æ˜åº¦è®¾å®šï¼Œé‚£å°±å°½é‡ä¸è¦ä½¿ç”¨PNGæ ¼å¼çš„å›¾ç‰‡æ–‡ä»¶ï¼Œè¿™ä¼šäº§ç”Ÿéš¾ä»¥ç½®ä¿¡çš„å›¾ç‰‡ä½“ç§¯ã€‚ JPGå’ŒWEBPæ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œåœ¨ä½¿ç”¨è¿™ä¸¤ç§å›¾ç‰‡æ ¼å¼æ—¶ï¼Œè®°ä½å›¾ç‰‡è´¨é‡çš„æå°é™ä½ï¼Œå¯ä»¥å¤§å¤§ç¼©å°å›¾ç‰‡ä½“ç§¯ã€‚ å›¾ç‰‡çš„åˆ†è¾¨ç‡å¹¶ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œæ ¹æ®å…·ä½“çš„ä½¿ç”¨åœºæ™¯ï¼Œè¿”å›ä¸åŒåƒç´ çš„å›¾ç‰‡ã€‚å¦‚æœåªæ˜¯éœ€è¦ç¼©ç•¥å›¾ï¼Œé‚£å°±ä¸è¦è¿”å›é«˜æ¸…çš„æ— ç å¤§å›¾ã€‚ Serialized DataJSON /dÊ’eÉªâ€™sÊŒn/ æ˜¯ä¸€ä¸ªhorribleçš„æ•°æ®æ ¼å¼ï¼ï¼ï¼ çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼ŒåŒ…å«äº†å¤§é‡çš„ç©ºæ ¼ã€å¼•å·ã€keyå€¼ç­‰å†—ä½™ä¿¡æ¯ï¼Œè¿™äº›å­—æ®µå­˜åœ¨çš„æ„ä¹‰åªæ˜¯ä¸ºäº†æ–¹ä¾¿äººå·¥é˜…è¯»ï¼Œå¹¶éæ•°æ®ä¼ è¾“ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374&#123; \"__name\": \"MOPayOrderDo\", \"RefundDetails\": [\"10.1å…ƒ 2016-02-12 20:00 é€€æ¬¾\", \"10.02å…ƒ 2016-02-17 19:00 é€€æ¬¾\", \"10.003å…ƒ 2016-02-18 17:00 é€€æ¬¾\", \"10.0004å…ƒ 2016-02-18 18:00 é€€æ¬¾\"], \"BaseOrderId\": null, \"OriAmount#D\": 2.123456, \"RemainAmount#D\": 100.123456, \"SerializedId\": null, \"RepayUrl\": \"dianping://shopinfo?id=2062015\", \"CurrentAmount#D\": 0.01, \"SaveAmount#D\": 0, \"OrderRemarks\": null, \"ErrorMsg\": \"æ”¯ä»˜æˆåŠŸ|æ­¤ä¸ºä»˜æ¬¾å‡­è¯ï¼Œè¯·å‘å•†æˆ·å±•ç¤º\", \"SerialNumber\": \"80033630111\", \"RightDos\": null, \"MerchantAmountString\": \"\", \"Discounts\": null, \"HuiTicketShareDo\": &#123; \"__name\": \"HuiTicketShareDo\", \"TicketValidPeriod\": \"\", \"TicketDesc\": \"\", \"TicketValue\": \"\", \"TicketShareStatus#I\": 0, \"TicketButtonClickable\": false, \"PayTicketDesc\": \"\", \"TicketPicUrl\": \"\", \"TicketTitle\": \"\", \"TicketButtonText\": \"\", \"ShareDo\": null, \"ExtraTickets\": \"\" &#125;, \"ShopID#I\": 2062015, \"PointMallDo\": null, \"RefundAmount#D\": 40.1234, \"BuffetDescs\": null, \"PayFailDescription\": \"æ‚¨çš„ä»˜æ¬¾å°†äº1-5ä¸ªå·¥ä½œæ—¥åŸè·¯é€€è¿˜\", \"Time#U\": 1442469357, \"HuiReviewInfo\": null, \"Banner\": null, \"OrderID#I\": 43956789, \"VoucherSerials\": [], \"Status#I\": 3, \"OperationBanners\": null, \"AlertLoginTips\": \"ç»‘å®šæ‰‹æœºåè®¢å•ä¸ä¼šä¸¢å“¦\", \"AlertLoginLink\": &#123; \"__name\": \"Link\", \"Name\": \"ç°åœ¨å»ç»‘å®š\", \"Url\": \"\" &#125;, \"MerchantAmount#D\": 0.01, \"ServiceUrl\": null, \"StatusMsg\": \"å·²é€€æ¬¾\", \"ContactMerchantTip\": \"\", \"OrderDetailTipsDo\": null, \"ShopPhones\": [ \"4008205527\" ], \"ShopName\": \"å¤§ä¼—ç‚¹è¯„ç½‘\", \"IsHobbit#I\": 0, \"NoDiscountAmount#D\": 0, \"SuccessMsg\": \"è¯·å‘æœåŠ¡å‘˜å‡ºç¤ºéªŒè¯ç \", \"HasVoiceReport\": false, \"MobileNo\": \"13774283697\", \"VerifyStatus#I\": 2, \"MOPayShare\": &#123; \"__name\": \"Share\", \"IconUrl\": \"http://qcloud.dpfile.com/pc/9vKBXqRXPl6vyOVFe4zlXMLys21f38u--LZmWbufGI2pRKzSBzQnLPwzWURFZUAvtOnd3gXQdDYlAqlaVaAFeZ0rYYyiRo_EhzufqWWjTjs.jpg\", \"Title\": \"åœ¨ã€å¤§ä¼—ç‚¹è¯„ç½‘ã€‘ä¸ç”¨ç°é‡‘ï¼Œæ‰‹æœºä¹°å•æœ‰ä¼˜æƒ !\", \"Desc\": \"\", \"BtnText\": null, \"Url\": \"http://m.dianping.com/hui/share/weixin?shopId=2062015\" &#125;, \"UserAmountString\": \"&#123;\\\"userAmount\\\":\\\"1.123456å…ƒ\\\",\\\"boughtVoucher\\\":\\\"\\\",\\\"usedVoucher\\\":\\\"\\\"&#125;\", \"BizType#I\": 10&#125; å…‰å¤´å“¥åœ¨videoä¸­ç»™å‡ºäº†å‡ ç§é«˜æ•ˆçš„åºåˆ—åŒ–æ›¿ä»£æ–¹å¼ï¼Œè®²è§£å‚è§Serialization performance (Android Performance Patterns Season 4 ep14) Protocol Buffers Nano-Proto-Buffers FlatBuffers åŒæ ·ï¼Œåœ¨httpå‹ç¼©è¿‡ç¨‹é‡Œï¼Œä¹Ÿæœ‰è¿›ä¸€æ­¥ä¼˜åŒ–çš„ç©ºé—´ï¼Œå‚è§Smaller Serialized Data (Android Performance Patterns Season 4 ep15) ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s4ep4 Adapting to Latency","date":"2016-03-08T12:26:26.000Z","path":"2016/03/08/Android-Performance-Patterns-s4ep4-Adapting-to-Latency/","text":"One of the most frequent performance problems your users will notice is how your app reacts when moving from a great network connection to a bad one. If things slow down, get sluggish, or start showing too many spinners, they can show your app the â€œuninstallâ€œ button.Video Link Bottlenecks Happen Anywhereåœ¨ä¸€æ¬¡ç”±appå‘èµ·çš„ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œä¼šå»ºç«‹â€œæ‰‹æœºï¼åŸºç«™ï¼è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼åç«¯serverâ€çš„ä¸€ä¸ªå¾€å¤é“¾è·¯ï¼Œåœ¨è¿™ä¸ªé“¾è·¯çš„ä»»ä½•ä¸€ä¸ªç¯èŠ‚ï¼Œéƒ½å¯èƒ½é€ æˆç½‘ç»œè¯·æ±‚çš„å»¶è¿Ÿã€‚ Adapting To Lagencyä¸ºäº†é€‚åº”å¤æ‚å¤šå˜çš„ç½‘ç»œç¯å¢ƒï¼Œå¿…é¡»åšä¸‹é¢ä¸¤ä»¶äº‹ï¼š Gather information. Make adjustments. SDKä¸­ä¸ºæˆ‘ä»¬æä¾›äº†åˆ¤æ–­å½“å‰ç½‘ç»œç¯å¢ƒçš„Api 123456789ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);NetworkInfo activeNetwork = cm.getActiveNetworkInfo();if (activeNetwork.getType() != ConnectivityManager.TYPE_WIFI) &#123; String typeName = activeNetwork.getSubtypeName(); int type = activeNetwork.getSubtype(); switch (type) &#123; // do the cases &#125;&#125; ä¸åŒç½‘ç»œç¯å¢ƒçš„åŸºæœ¬ä¼ è¾“é€Ÿåº¦å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Do It Yourselfç„¶è€Œï¼Œå³ä½¿åˆ¤æ–­å‡ºå½“å‰å¤„äºè¯¸å¦‚LTEçš„ç½‘ç»œç¯å¢ƒï¼Œä¾ç„¶ä¸èƒ½å®Œå…¨ä¿è¯è¾ƒé«˜çš„ä¼ è¾“é€Ÿåº¦ï¼Œæ¯”å¦‚ï¼Œç“¶é¢ˆå¯èƒ½å‘ç”Ÿåœ¨æœåŠ¡ç«¯ã€‚ è¿™æ—¶å°±éœ€è¦ä¸»åŠ¨å»æµ‹ç®—å½“å‰ç½‘ç»œå»¶è¿Ÿäº†ï¼Œå¤šæ¬¡æµ‹ç®—åï¼Œæ±‚å¹³å‡å€¼ã€‚ æ¥ç€ï¼Œä½ å¯ä»¥å®šä¹‰å‡ºä¸‰ä¸ªç½‘ç»œçŠ¶å†µåŒºé—´ï¼Œä»¥60msã€220msä¸ºç•Œ GOOD OK BAD &lt; 60ms 60ms ~ 220ms &gt; 220ms æ›´å¤šçš„é¢„åŠ è½½ï¼Œå‡ ä¹ä¸éœ€è¦ç¼“å­˜ ä¾èµ–ç¼“å­˜ï¼Œæ‹’ç»éƒ¨åˆ†ç½‘ç»œè¯·æ±‚ æ‹’ç»å¤§éƒ¨åˆ†ç½‘ç»œè¯·æ±‚ï¼ŒåªåŠ è½½é‡è¦ä¿¡æ¯ å½“ç„¶ï¼Œé˜ˆå€¼ï¼ˆ60msã€220msï¼‰ä¸æ˜¯å›ºå®šçš„ã€‚ Toolsåœ¨æµ‹è¯•æ—¶ï¼Œé’ˆå¯¹éš¾æµ‹çš„ç½‘ç»œç¯å¢ƒæ¡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å·¥å…·è¿›è¡Œå»¶æ—¶æ¨¡æ‹Ÿã€‚ Emulator Throttling: http://developer.android.com/tools/devices/emulator.html Network Attenuator: http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=14500040 ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s4ep3 Effective Prefetching","date":"2016-03-08T12:03:11.000Z","path":"2016/03/08/Android-Performance-Patterns-s4ep3-Effective-Prefetching/","text":"If youâ€™re looking for the optimal way to batch requests to reduce overall network traffic, then prefetching is for you.Video Link Why Prefetching?å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œappå‘å‡ºçš„ç½‘ç»œè¯·æ±‚æ˜¯è¿ç»­çš„ï¼Œè­¬å¦‚ï¼Œä¸€ä¸ªæ­£åœ¨ä¸‹æ‹‰ä¸­çš„æ¯ä¸€é¡¹éƒ½åŒ…å«ä¸€å¼ ç¼©ç•¥å›¾çš„åˆ—è¡¨ã€‚ å¦‚æœå¯ä»¥é¢„è§çš„è¯ï¼Œå°†æœªæ¥å³å°†å‘ç”Ÿçš„ç½‘ç»œè¯·æ±‚åˆå¹¶åˆ°ä¸€èµ·è¿›è¡Œå‘é€ï¼Œæ¯”èµ·å•ç‹¬æ¥å‘é€å„è‡ªè¯·æ±‚ï¼Œä¸€æ–¹é¢å‡å°‘äº†ç½‘ç»œè¯·æ±‚å¯¹äºèµ„æºçš„æ¶ˆè€—ï¼ˆå¦‚ï¼šèŠ‚çº¦ç”µé‡ä¸å¸¦å®½ï¼‰ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿä½¿å¾—appç•Œé¢è¿è¡Œæ›´åŠ æµç•…ã€‚ ä½†æ˜¯ï¼Œå¦‚ä½•ç¡®å®šé¢„åŠ è½½çš„åº¦ï¼Œæ˜¯ä¸€ä¸ªå€¼å¾—æ€è€ƒçš„é—®é¢˜ã€‚åŠ è½½çš„å¤ªå°‘äº†ï¼Œèµ·ä¸åˆ°æœŸæœ›çš„æ•ˆæœï¼›åŠ è½½å¤ªå¤šäº†ï¼Œåè€Œæ‹–æ…¢appã€‚ How much do we prefetch?æœ‰2ä¸ªå¯ä»¥å‚è€ƒçš„æŒ‡æ ‡ ç©ºé—´ï¼šé¢„åŠ è½½1~5mbçš„æ•°æ® æ—¶é—´ï¼šé¢„åŠ è½½æœªæ¥1~2minå†…ä¼šç”¨åˆ°çš„æ•°æ® æ­¤å¤–ï¼Œé¢„åŠ è½½å¿…é¡»è¦è€ƒè™‘ç”¨æˆ·æ‰€å¤„çš„ç½‘ç»œç¯å¢ƒ 4Gï¼š12å¼ å›¾ç‰‡ 2Gï¼š3å¼ å›¾ç‰‡ ä¸€ä¸ªå¾ˆå¥½çš„è¡¡é‡ç”¨æˆ·ç½‘ç»œç¯å¢ƒçš„æ–¹æ³•æ˜¯ï¼Œè®¡ç®—æŸä¸€ä¸ªç‰¹å®šå¤§å°æ–‡ä»¶çš„ä¼ è¾“æ—¶é—´ã€‚ åœ¨ä¸€ä¸ªç½‘ç»œè¿æ¥çš„çª—å£æœŸï¼Œå¯ä»¥æŠŠä¹‹å‰holdä½çš„ç½‘ç»œè¯·æ±‚ï¼Œè¿åŒåé¢å³å°†åŠ è½½çš„ç½‘ç»œè¯·æ±‚ä¸€åŒæ‰“åŒ…å‘é€ã€‚ GcmNetworkManagerä¸ºä½ æä¾›äº†å¼ºåŠ›çš„å·¥å…·ç”¨ä»¥å®Œæˆä¸Šé¢çš„éœ€æ±‚ã€‚ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s4ep2 Optimizing Network Request Frequencies","date":"2016-03-07T12:11:36.000Z","path":"2016/03/07/Android-Performance-Patterns-s4ep2-Optimizing-Network-Request-Frequencies/","text":"Syncing too often, can be the worst idea for the performance of your application.Video Link Do not Over Syncå¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæœ‰äº›ä¿¡æ¯æ˜¯è¦ä¿æŒæœ€æ–°çš„ï¼ˆå¤©æ°”ã€è´¦æˆ·ä½™é¢ç­‰ç­‰ï¼‰ï¼Œæœ‰äº›ä¿¡æ¯å´ä¸å¿…æ—¶åˆ»æ›´æ–°ï¼Œå¤ªé¢‘ç¹çš„åŒæ­¥æ“ä½œåè€Œè¿‡çŠ¹ä¸åŠï¼š è€—ç”µé‡ï¼šæ¯”èµ·å¾…æœºï¼Œç½‘ç»œè¯·æ±‚ä¼šæ¶ˆè€—æ›´å¤šçš„ç”µé‡ ç½‘ç»œæµé‡ï¼šåŒæ ·ï¼Œä¼šå ç”¨å¸¦å®½ï¼Œå°å¿ƒç”¨æˆ·åœ¨æ”¶åˆ°æµé‡è´¦å•å˜å¾—æŠ“ç‹‚ Sync Less, Win Moreä¼˜åŒ–ç¼“å­˜çš„å…³é”®åœ¨äºåŒºåˆ†æ•°æ®æ˜¯å½“ä¸‹ç«‹å³éœ€è¦çš„è¿˜æ˜¯ç¨åè¯·æ±‚ä¹Ÿæ— ä¼¤å¤§é›…çš„ï¼Œæ¯”å¦‚ï¼Œç”¨æˆ·è¿›è¡Œä¸‹æ‹‰åˆ·æ–°ï¼Œæ˜¾ç„¶éœ€è¦é©¬ä¸Šå‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚è€Œåå°è¿›è¡Œçš„æ•°æ®ä¸‹è½½ä¸ä¸Šä¼ ï¼Œç›¸æ¯”ä¹‹ä¸‹å°±ä¸é‚£ä¹ˆé‡è¦ã€‚ Donâ€™t Always Poll, Just Listenä¸è¦è¯•å›¾ç»å¸¸è½®è¯¢Serverè¯·æ±‚æ–°æ•°æ®ï¼Œè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œè¦çŸ¥é“å¾ˆå¤šæƒ…å†µä¸‹æ•°æ®åœ¨æœåŠ¡ç«¯æ ¹æœ¬å°±æ²¡æœ‰æ›´æ–°ã€‚ ä½¿ç”¨è¯¸å¦‚Google Cloud Messagingçš„æœåŠ¡è¿›è¡Œä»Serverå‘èµ·çš„push â€”â€” What the hell is this? ç”±äºå¤©æœçš„ç‰¹æ®Šæ€§ï¼ŒGCMæ— æ³•ä½¿ç”¨ï¼Œå› æ­¤è¯ç”Ÿäº†è¯¸å¦‚æå…‰æ¨é€ç­‰ä¸€ç³»åˆ—æ›¿ä»£å“ï¼Œä¸€äº›æœ‰èƒ½åŠ›çš„å¤§å‚å¹²è„†è‡ªå·±å®ç°æ¶ˆæ¯æ¨é€ç³»ç»Ÿï¼Œå¯ä»¥å‚è€ƒå¾®ä¿¡è¿™ç¯‡æ–‡ç« ï¼šAndroidå¾®ä¿¡æ™ºèƒ½å¿ƒè·³æ–¹æ¡ˆ å¦‚æœä¸å¾—ä¸é‡‡ç”¨å®¢æˆ·ç«¯è½®è¯¢æ¥åšï¼Œè€ƒè™‘äºŒè¿›åˆ¶é€€è®©ç®—æ³• å› åœ°åˆ¶å®œä¸‹é¢è¿™ä¸ªå¬èµ·æ¥å°±æœ‰ä¸€äº›ç‚«é…·äº†ï¼šæ ¹æ®ç”¨æˆ·å½“å‰ä¸åŒçš„è¡Œä¸ºæ¨¡å¼é‡‡å–ä¸åŒçš„åŒæ­¥ç­–ç•¥ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨é©¾é©¶æ—¶ã€è·‘æ­¥æ—¶ã€ç¡è§‰æ—¶â€¦â€¦ æ¯”å¦‚ï¼Œå½“ä½ ç›‘æµ‹åˆ°ç”¨æˆ·åˆšåˆšä»8å°æ—¶çš„ç¡çœ ä¸­é†’æ¥å¹¶å¼€å¯æ‰‹æœºæ—¶ï¼Œä¸å¦¨é©¬ä¸Šè¿›è¡Œä¸€æ¬¡åŒæ­¥ã€‚ æ ¹æ®æ˜¯å¦æ­£åœ¨å……ç”µã€æ˜¯å¦è¿æ¥wifiç­‰é…ç½®ä¿¡æ¯ï¼Œè°ƒèŠ‚åŒæ­¥æ—¶é—´ï¼š ç„¶è€Œï¼Œåœºæ™¯é‚£ä¹ˆå¤šï¼Œä½ è¦æ€ä¹ˆåŠå‘¢ï¼Ÿ å¹¸è¿çš„æ˜¯ï¼Œä½ å¹¶ä¸éœ€è¦ä¸ºæ­¤å®ç°å¤ªå¤šå¤æ‚çš„é€»è¾‘ï¼Œå‚è€ƒGCM Network Manager ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s4ep1 Cachematters for networking","date":"2016-03-07T01:31:26.000Z","path":"2016/03/07/Android-Performance-Patterns-s4ep1-Cachematters-for-networking/","text":"You know what the fastest, most efficient piece of content for networking performance is? The one you never have to download.Video Link Reading data from local memory v.s. Reading data from network è®¿é—®æœ¬åœ°æ•°æ®çš„é€Ÿåº¦è¦è¿œè¿œå¿«äºè®¿é—®ç½‘ç»œæ•°æ®ï¼ˆåºŸè¯ï¼ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œæ–‡ç« ä¸­ä¼šä»‹ç»ä¸€äº›æœ¬åœ°ç¼“å­˜çš„ç­–ç•¥ä¸å®ç°ã€‚ Enable Http Cachingé»˜è®¤æƒ…å†µä¸‹ï¼ŒHttp Cacheåœ¨Androidç³»ç»Ÿä¸­æ˜¯å…³é—­çš„ï¼Œéœ€è¦ä½¿ç”¨HttpResponseCacheæ‰‹åŠ¨å¼€å¯ï¼Œå¦‚ä¸‹ä»£ç ï¼š 12345678910111213141516protected void onCreate(Bundle savedInstanceState) &#123; try &#123; File httpCacheDir = new File(context.getCacheDir(), \"http\"); long httpCacheSize = 10 * 1024 * 1024; // 10 MB HttpResponseCache.install(httpCacheDir, httpCacheSize); &#125; catch (Exception e) &#123; Lot.i(TAG, \"Http response cache installation failed\" + e); &#125;&#125;protected void onStop() &#123; HttpResponseCache cache = HttpResponseCache.installed(); if (cache != null) &#123; cache.flush(); &#125;&#125; è¿™æ ·åšä¼šä¸ºæ‰€æœ‰çš„Httpè¯·æ±‚æä¾›ç¼“å­˜ï¼Œä¸ä»…æ˜¯è‡ªå·±ä»£ç ä¸­å‘å‡ºçš„ï¼Œä¹ŸåŒ…æ‹¬æ‰€ä¾èµ–å¤–éƒ¨jaråŒ…å‘å‡ºçš„è¯·æ±‚ã€‚ InvalidationCacheæœ‰ä¸¤ç§æœ€åŸºæœ¬çš„è¿‡æœŸçš„ç­–ç•¥ï¼šç©ºé—´ï¼ˆCacheç©ºé—´ä¸è¶³æ—¶è§¦å‘ï¼‰å’Œæ—¶é—´ï¼ˆCacheè¶…è¿‡è¿‡æœŸæ—¶é—´åè§¦å‘ï¼‰ã€‚ åœ¨ Http 1.x çš„headerä¸­ï¼Œç”¨Cache-Controlæ¥æ ‡ç¤ºç¼“å­˜ç­–ç•¥ã€‚ HttpResponseCacheçš„é™åˆ¶HttpResponseCacheé€šè¿‡Serveræ¥æ§åˆ¶æ‰€æœ‰Cacheç­–ç•¥ï¼Œè¿™åœ¨å¤§éƒ¨åˆ†åœºæ™¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæ¯•ç«ŸServerçŸ¥é“å®ƒè¿”å›ç»™Clientçš„å…·ä½“å†…å®¹æ˜¯ä»€ä¹ˆï¼ˆæ–‡å­—ã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰ç­‰ï¼‰ï¼Œç„¶è€Œï¼Œç§»åŠ¨åº”ç”¨çš„ç‰¹æ®Šæ€§ä½¿å¾—å®ƒè¿˜éœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚ Serverå¯èƒ½åœ¨Headerä¸­å‹æ ¹å°±æ²¡æœ‰ä¸ºCache-Controlèµ‹å€¼ ç§»åŠ¨è®¾å¤‡çš„å­˜å‚¨ç©ºé—´æœ‰é™ä»¥è‡³äºæ— æ³•ä¿å­˜Cacheæ•°æ® ç½‘ç»œç¯å¢ƒé«˜å»¶è¿Ÿ å› æ­¤ï¼Œä½ éœ€è¦è‡ªå·±å®šåˆ¶ä¸€ä¸ªCacheæ¡†æ¶å¹¶å¼•å…¥CacheåŠŸèƒ½ï¼Œè¿™ä¸¤ä»¶äº‹ä¸å¾—ä¸åšï¼š Write your own Disk Cache manager Use custom Caching Logic å¯ä»¥å‚ç…§å·²æœ‰çš„DiskLruCache ä¸åŒæ•°æ®çš„å„è‡ªå±æ€§é€šå¸¸è¦æ±‚å„å¼‚çš„Cacheç­–ç•¥ï¼Œæ¯”å¦‚ï¼Œæ–‡å­—æç¤ºè¯­çš„è¿‡æœŸæ—¶é—´ä¸å¤´åƒçš„è¿‡æœŸæ—¶é—´æ˜¯ä¸åŒçš„ã€‚ Codes &amp; Toolsä¸€äº›ä¼˜ç§€çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶ Volly: https://developer.android.com/training/volley/index.html OkHttp: http://square.github.io/okhttp Picasso: http://square.github.io/picasso AndroidStudioæä¾›äº†æŸ¥çœ‹ç½‘ç»œæ•°æ®æµé‡çš„Network Traffic Tool æ›´ä¸“ä¸šçš„å·¥å…·æ˜¯AT&amp;Tæä¾›çš„ARO tool ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"é•¿å®å›½é™…ä½“æ“ä¸­å¿ƒæ¸¸æ³³é¦†å¼€æ”¾æ—¶é—´","date":"2016-03-04T01:45:22.000Z","path":"2016/03/04/Changning-Swimming-Pool-Opening-Hours/","text":"ğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠ æ€§ä»·æ¯”æœ€é«˜æ—¶æ®µä¾æ—§ä¸ºå·¥ä½œæ—¥6:30~8:30ï¼Œæ°´è´¨å¥½ï¼Œäººå°‘ï¼Œä»·æ ¼ä½æ¸¸æ³³é¦†ç½‘å€ï¼šlink ===Ending===","tags":[{"name":"å¤§ä¿å¥","slug":"å¤§ä¿å¥","permalink":"https://lilei.pro/tags/å¤§ä¿å¥/"}]},{"title":"Android Performance Patterns - s5ep10 Profile GPU Rendering, M Update","date":"2016-02-25T13:49:59.000Z","path":"2016/02/25/Android-Performance-Patterns-s5ep10-Profile-GPU-Rendering/","text":"Season 5 çš„æœ€åä¸€æœŸï¼ŒAndroid M ä¸­æ–°å¢äº†GPUæ¸²æŸ“åˆ†æå·¥å…·å…‰å¤´å“¥ï¼Œæˆ‘ä»¬ä¸‹ä¸€å­£å†è§ï¼PS. å…‰å¤´å“¥çš„å¤§åæ˜¯ Colt McAnlisVideo Link Why GPU Profile Toolç”¨æˆ·åœ¨ä½¿ç”¨appæ—¶ï¼Œå¹¶ä¸å…³å¿ƒä½ çš„ä»£ç å†…éƒ¨ä½¿ç”¨äº†å¤šä¹ˆNBçš„ç®—æ³•ã€å¤šä¹ˆç¢‰å ¡çš„æ¡†æ¶ï¼Œç”¨æˆ·æœ€ç›´è§‚çš„ä½“éªŒæ˜¯â€”â€”ä½ çš„appæœ‰æ²¡æœ‰å¡é¡¿ã€ä¼šä¸ä¼šä¸¢å¸§ã€‚åŒç½‘ç«™ä¸€æ ·ï¼ŒappåŠ è½½çš„æ—¶é—´è¶Šé•¿ï¼Œç”¨æˆ·æµå¤±ä¹Ÿå°±è¶Šä¸¥é‡ã€‚å› æ­¤ï¼Œæ‰¾åˆ°ç”»é¢å¡é¡¿çš„åŸå› ä¾¿æ ¼å¤–é‡è¦ã€‚ GPU Profiling Tool Before Måœ¨ç¬”è€…çš„Meizuæ‰‹æœºä¸Šï¼ˆAndroid 5.0ï¼‰ï¼Œå¯ä»¥åœ¨å¼€å‘è€…é€‰é¡¹ä¸­å¼€å¯â€œGPUå‘ˆç°æ¨¡å¼åˆ†æâ€æ¥æŸ¥çœ‹CPUç»˜åˆ¶æƒ…å†µã€‚ç°åœ¨ç¬”è€…æ‰“å¼€å¾®ä¿¡æœ‹å‹åœˆçš„ä¸€ä¸ªé“¾æ¥ï¼ˆhtml5é¡µé¢ï¼‰ ç»“åˆè¯´æ˜ï¼Œå¯ä»¥åˆæ­¥åˆ¤æ–­é‚£ä¸€æ¡æš´å¢çš„æ›²çº¿æ˜¯ç”±äºProcessè¿‡ç¨‹æ‰€è‡´ã€‚ Strongerrrrrrr!Android M ä¸ºæˆ‘ä»¬æä¾›äº†æ›´ä¸ºå¼ºå¤§çš„GPUæ¸²æŸ“åˆ†æå·¥å…·ï¼Œå¯ä»¥ç»†åŒ–åˆ°ä»¥ä¸‹8ä¸ªç»´åº¦ï¼Œæ³¨æ„åˆ°1ã€2ã€4ä¹Ÿå°±æ˜¯ä¸Šä¸€èŠ‚å›¾ä¸­çš„ä¸‰ä¸ªç»´åº¦ï¼ˆProcessã€Executeã€Updateï¼‰ï¼Œå®ƒä»¬ä¿æŒäº†ä¸å†å²ç›¸åŒçš„é¢œè‰²ï¼ ä¸‹é¢æˆ‘ä»¬ç€é‡åˆ†æä¸€ä¸‹å¦å¤–çš„äº”é¡¹æŒ‡æ ‡ã€‚ Sync &amp; Upload è¿™é¡¹æŒ‡æ•°è¡¡é‡äº†bitmapè¢«åŒæ­¥åˆ°GPUçš„è€—æ—¶ï¼Œè¶Šå¤§çš„å›¾åƒï¼Œæ•°å€¼è¶Šé«˜ï¼Œé€šå¸¸å¤„ç†é«˜åƒç´ çš„å›¾ç‰‡æ—¶ä¼šå¯¼è‡´é£™å‡ã€‚ å‡å°‘åŒæ—¶å±•ç¤ºçš„å›¾ç‰‡æ•°é‡ï¼Œæˆ–è€…å¯¹å›¾ç‰‡è¿›è¡Œé¢„å¤„ç†ï¼Œé™ä½å›¾ç‰‡å°ºå¯¸å¯ä»¥æœ‰æ•ˆé™ä½æ•°å€¼ã€‚ Measure / Layout è¿‡é«˜çš„æŒ‡æ•°ï¼Œè¡¨æ˜é¡µé¢å¸ƒå±€è¿‡äºå¤æ‚ï¼ˆsuper complex view hierarchyï¼‰ ä¹Ÿå¯èƒ½æ˜¯ç”±äºdouble taxationæ‰€è‡´ï¼ˆå…³äºdouble layout taxationè¯·å‚é˜…Season 3 ep 8ï¼‰ è¯•ç€ç®€åŒ–å¸ƒå±€ Animation è‹¥GPUåœ¨åŠ¨ç”»ä¸Šçš„è´Ÿè½½è¿‡é«˜ï¼Œå»æ£€æŸ¥ä½ æ‰€ä½¿ç”¨åˆ°çš„è‡ªå®šä¹‰åŠ¨ç”» è°¨æ…ä½¿ç”¨ PropertyAnimation Input Handling GPUæ¶ˆè€—äº†å¤šå°‘æ—¶é—´ç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥ æˆ–è€…è¯´ï¼Œåœ¨ç›¸åº”ç”¨æˆ·è¾“å…¥çš„callbackä¸­ï¼ŒGPUçš„æ¶ˆè€— å¦‚æœå¤„ç†è¾“å…¥çš„é€»è¾‘è¿‡äºå¤æ‚ï¼Œä½¿ç”¨Worker Thread Misc / Vsync Delay å¦‚æœä½ ä»æ—¥å¿—ä¸­çœ‹åˆ°è¯¸å¦‚â€œmisc vsync â€¦ skipping â€¦ framesâ€çš„ä¿¡æ¯ï¼ŒThatâ€™s this thing! å‘ç”Ÿåœ¨ç›¸é‚»ä¸¤å¸§ä¹‹é—´çš„äº‹æƒ…ï¼Œéƒ½å¯ä»¥å½’ç±»äºæ­¤ ä½¿ç”¨Worker Threadæ¥å¤„ç†è€—æ—¶æ“ä½œï¼Œé¿å…ä¸¢å¸§ A Bigger Barä¸Šé¢æåˆ°äº†5ä¸ªç»´åº¦ï¼ŒåŠ ä¸Šä¹‹å‰çš„3ä¸ªï¼Œä¸€å…±æ˜¯8ä¸ªç»´åº¦ã€‚è¦æŠŠè¿™8ä¸ªç»´åº¦åŒæ—¶ç”¨æŸ±çŠ¶å›¾å±•ç¤ºå‡ºæ¥å¯ä¸æ˜¯ä»¶å®¹æ˜“çš„äº‹ï¼Œè¿™å¯¹ä½ çš„è§†åŠ›æœ‰ç€ç›¸å½“çš„è¦æ±‚ã€‚ æ–¹ä¾¿çš„æ˜¯ï¼ŒGPUå·¥å…·é‡Œè´´å¿ƒåœ°é€‚å½“æ‰©å®½åŠ é‡äº†é‚£äº›å¯èƒ½æœ‰é—®é¢˜çš„æ ‡ç¤ºï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ›´é†’ç›®çš„æŸ±çŠ¶å›¾å±•ç¤ºã€‚ Bye Bye! Colt McAlnisSee you in Season 6! ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep9 The Importance Of Thread Priority","date":"2016-02-25T12:57:25.000Z","path":"2016/02/25/Android-Performance-Patterns-s5ep9-The-Importance-Of-Thread-Priority/","text":"CPUåŒä¸€æ—¶é—´åªèƒ½å¤„ç†æœ‰é™æ•°ç›®çš„çº¿ç¨‹ï¼Œèµ‹äºˆçº¿ç¨‹æ€æ ·çš„ä¼˜å…ˆçº§ï¼Œå°†å†³å®šå…¶æœ€ç»ˆåœ¨CPUä¸Šå¾—ä»¥æ‰§è¡Œçš„é¡ºåºå…‰å¤´å“¥å›å½’å•¦ï¼è¯»ä¿¡çš„æ ·å­ç®€ç›´ä¸è¦å¤ªèŒï¼Video Link Thread Schedulingçº¿ç¨‹è°ƒåº¦æ˜¯ç°ä»£è®¡ç®—æœºç³»ç»Ÿå¿…ä¸å¯å°‘çš„åŠŸèƒ½ï¼ŒAndroidåšä¸ºç‹¬ç‰¹çš„ç§»åŠ¨ç³»ç»Ÿï¼Œåœ¨çº¿ç¨‹è°ƒåº¦ä¸Šï¼Œè¿˜æœ‰ä¸€äº›å®ƒä¸ä¼—ä¸åŒçš„ç‰¹æ€§ã€‚ Androidç³»ç»Ÿä¸­å¯¹äºçº¿ç¨‹ä¼˜å…ˆçº§çš„è€ƒè™‘ï¼Œè¿˜ä¼šåŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼š Activityç”Ÿå‘½å‘¨æœŸ æ˜¯å¦å¯è§ Activityåœ¨å‰å°è¿˜æ˜¯è¿è¡Œ Visible vs InvisibleCPUæ—¶é—´çš„90%å·¦å³ï¼Œéƒ½æ˜¯ç”¨ä»¥å¤„ç†ç•Œé¢å±•ç¤ºä¸­çš„çº¿ç¨‹ï¼Œåªæœ‰çº¦10%ç•™ç»™äº†åå°çº¿ç¨‹ æ‹¼çˆ¹çš„çº¿ç¨‹åœ¨çº¿ç¨‹çš„ä¸–ç•Œé‡Œï¼Œä¸€æ ·è¦æ‹¼çˆ¹â€”â€”æ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œå…¶ä¼˜å…ˆçº§ä¸åˆ›å»ºå®ƒçš„çº¿ç¨‹ç›¸åŒã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœUI Threadåˆ›å»ºäº†20ä¸ªWorker Threadï¼Œé‚£ä¹ˆè¿™20ä¸ªWorker Threadéƒ½å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œå®ƒä»¬ä¼šå¹³ç­‰ç«äº‰CPUæ—¶é—´ã€‚ è¿™å…¶å®æ˜¯å¾ˆä¸å¥½çš„ï¼Œæˆ‘ä»¬çŸ¥é“å“ªäº›å·¥ä½œæ›´é‡è¦ï¼Œå“ªäº›å·¥ä½œç›¸æ¯”äºå…¶å®ƒä¸é‚£ä¹ˆé‡è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¸»åŠ¨è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œè®©é‚£äº›å…·æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¼˜å…ˆå¾—åˆ°æ‰§è¡Œã€‚ Priority1android.os.Process.setThreadPriority(int); ä¸Šé¢çš„æ–¹æ³•æ¥å—-20~24é—­åŒºé—´å†…æ‰€æœ‰çš„æ•´æ•°ä½œä¸ºå‚æ•°ï¼Œæ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ä¸ºç”šä¹ˆé‡‡ç”¨è´Ÿæ•°å‘¢ï¼Ÿæ•°å€¼è¶Šä½ï¼Œè¡¨ç¤ºè¿™ä¸ªçº¿ç¨‹è¶Šæ²¡æœ‰è€å¿ƒï¼Œæƒ…ç»ªè¶Šæš´èºï¼Œè¶Šæ€¥åˆ‡å¸Œæœ›å¾—åˆ°æ‰§è¡Œã€‚ android.os.Processä¸­ä¸ºæˆ‘ä»¬å®šä¹‰äº†ä¸€äº›è¡¨ç¤ºçº¿ç¨‹ä¼˜å…ˆçº§çš„å¸¸é‡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081/** * Standard priority of application threads. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_DEFAULT = 0; /* * *************************************** * ** Keep in sync with utils/threads.h ** * *************************************** */ /** * Lowest available thread priority. Only for those who really, really * don't want to run if anything else is happening. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_LOWEST = 19; /** * Standard priority background threads. This gives your thread a slightly * lower than normal priority, so that it will have less chance of impacting * the responsiveness of the user interface. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_BACKGROUND = 10; /** * Standard priority of threads that are currently running a user interface * that the user is interacting with. Applications can not normally * change to this priority; the system will automatically adjust your * application threads as the user moves through the UI. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_FOREGROUND = -2; /** * Standard priority of system display threads, involved in updating * the user interface. Applications can not * normally change to this priority. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_DISPLAY = -4; /** * Standard priority of the most important display threads, for compositing * the screen and retrieving input events. Applications can not normally * change to this priority. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_URGENT_DISPLAY = -8; /** * Standard priority of audio threads. Applications can not normally * change to this priority. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_AUDIO = -16; /** * Standard priority of the most important audio threads. * Applications can not normally change to this priority. * Use with &#123;@link #setThreadPriority(int)&#125; and * &#123;@link #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal * &#123;@link java.lang.Thread&#125; class. */ public static final int THREAD_PRIORITY_URGENT_AUDIO = -19; æ­¤å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªå¸¸é‡ç”¨äºæé«˜ï¼é™ä½ä¼˜å…ˆçº§ï¼Œè®°ä½ï¼Œè´Ÿæ•°è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼ˆmore favorableï¼‰ã€‚ 123456789/** * Minimum increment to make a priority more favorable. */public static final int THREAD_PRIORITY_MORE_FAVORABLE = -1;/** * Minimum increment to make a priority less favorable. */public static final int THREAD_PRIORITY_LESS_FAVORABLE = +1; æœ‰äº†ä¸Šé¢çš„çŸ¥è¯†ï¼Œä½ å°±å¯ä»¥åœ¨UI Threadå¯åŠ¨Worker Threadæ—¶ï¼Œé€šè¿‡setPriority(THREAD_PRIORITY_DEFAULT + THREAD_PRIORITY_LESS_FAVORABLE * n)çš„æ–¹å¼ï¼Œé…Œæƒ…é™ä½Worker Threadçš„ä¼˜å…ˆçº§äº†ã€‚ Thatâ€™s How We Did It!è¿˜è®°å¾—ä¹‹å‰æˆ‘ä»¬æ€»æ˜¯æåˆ°çš„ AsyncTask/HandlerThread/ThreadPool/IntentService ä¹ˆï¼Ÿå…¶ä¸­AsyncTaskå’ŒIntentServiceå·²ç»ä¸ºè‡ªåŠ¨æˆ‘ä»¬å®ç°äº†â€œé™ä½Worker Threadä¼˜å…ˆçº§â€çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æ— éœ€é¢å¤–è®¾ç½®ã€‚è€Œå¦å¤–ä¸¤ç§åˆ™æ²¡æœ‰è¿™ä¹ˆå‘¨åˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸»åŠ¨è®¾ç½®å·¥ä½œçº¿ç¨‹ä¼˜å…ˆçº§ã€‚ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep8 Threading And Loaders","date":"2016-02-25T01:25:53.000Z","path":"2016/02/25/Android-Performance-Patterns-s5ep8-Threading-And-Loaders/","text":"Letâ€™s say youâ€™ve got some 20 bitmaps being decoded on a worker thread. Well, what happens if your activity is destroyed before that work completes?ç›¸æ¯”äºæœ¬æœŸçš„å¤§å”ï¼Œç¬”è€…æ›´å–œæ¬¢ä¹‹å‰çš„å…‰å¤´å“¥Video Link No One Writes to the Colonel äº”åå…­å¹´äº†ï¼Œä¸Šæ ¡å”¯ä¸€åšè¿‡çš„äº‹æƒ…å°±æ˜¯ç­‰å¾…ã€‚ æˆ‘ä»¬çŸ¥é“ï¼ŒWorker Threadæ˜¯åœ¨UI Threadä¹‹å¤–ç”¨æ¥å¤„ç†è€—æ—¶ä»»åŠ¡çš„çº¿ç¨‹ï¼Œå­˜åœ¨è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“ä»»åŠ¡ç”±Worker Threadæ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå¼•å‘è¿™é¡¹ä»»åŠ¡çš„Activityå·²ç»èµ°å®Œäº†onDestroyï¼Œè¿™ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„åæœå‘¢ï¼Ÿ ç¬¬ä¸€ï¼ŒActivityè™½ç„¶ç»“æŸäº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯è¿™ä¸ªå®ä¾‹å¹¶æ²¡æœ‰ä»å†…å­˜ä¸­é‡Šæ”¾â€”â€”å› ä¸ºWorker Threadè¿˜æ‹¥æœ‰ç€Activityçš„referenceï¼Œè¿™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå¦‚å›¾1ï¼›ç¬¬äºŒï¼Œå·²ç»onDestroyè¿‡çš„Activityæ—©å·²ä»å±å¹•ä¸Šæ¶ˆå¤±ï¼Œæ— æ³•å“åº”ä»»åŠ¡æ‰§è¡Œåçš„è¿”å›ï¼Œæˆ‘ä»¬å¿…é¡»é‡æ–°åˆ›å»ºActivity2æ¥å¤„ç†ä»»åŠ¡è¿”å›åç•Œé¢å˜åŒ–ï¼Œå¦‚å›¾2ã€‚ å›¾1 å›¾2 You Should Use Loadersé’ˆå¯¹ä¸Šé¢çš„åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨Loaderã€‚è®¾è®¡åˆç†çš„Loaderå¯ä»¥é¿å…å†…å­˜æ³„æ¼ã€æ­£ç¡®å¤„ç†UIäº‹ä»¶ã€å¹¶ä¸”ä¸éœ€è¦é‡å¤æ‰§è¡Œã€‚ LoaderManageræ˜¯ç”¨æ¥ç®¡ç†Loaderçš„æ¥å£ï¼Œå€ŸåŠ©å‰é¢é“¾æ¥ä¸­ä¾‹å­ä¸éš¾ç†è§£Loaderè¿è¡Œçš„æœºåˆ¶ï¼šè·å–LoaderManagerå®ä¾‹ï¼åˆå§‹åŒ–Loaderï¼å®ç°LoaderCallbacksæ¥å£å¤„ç†å›è°ƒã€‚ LoaderManagerå¯ä»¥ç¼“å­˜ä»»åŠ¡æ‰§è¡Œç»“æœï¼Œè¿™æ ·å½“Activityé”€æ¯å¹¶é‡å»ºæ—¶ï¼Œå°±ä¸éœ€è¦é‡å¤æ‰§è¡Œå‰é¢å·²ç»æ‰§è¡Œè¿‡çš„ä»»åŠ¡äº†ã€‚ å¦‚æœä¸€ä¸ªActivityè¢«ç»ˆæ­¢åä¸ä¼šé‡å»ºï¼Œæˆ‘ä»¬å°±åº”è¯¥åœ¨LoaderManagerçš„onLoaderResetä¸­å¤„ç†è¿™ç§æƒ…å½¢ï¼Œé‡Šæ”¾å¼•ç”¨ã€‚ The Downside of Loadersé›†æˆè¾ƒä¸ºå¤æ‚ï¼Œä»£ç é‡å¤§ã€‚ å‚è€ƒä¸‹é¢Referenceç»™å‡ºçš„ä¾‹å­ï¼Œå®ç°äº†Fragmentçš„ListViewä»è”ç³»äººContentProviderä¸­é€šè¿‡CursorLoaderè·å–æ•°æ®çš„è¿‡ç¨‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154public static class CursorLoaderListFragment extends ListFragment implements OnQueryTextListener, OnCloseListener, LoaderManager.LoaderCallbacks&lt;Cursor&gt; &#123; // This is the Adapter being used to display the list's data. SimpleCursorAdapter mAdapter; // The SearchView for doing filtering. SearchView mSearchView; // If non-null, this is the current filter the user has provided. String mCurFilter; @Override public void onActivityCreated(Bundle savedInstanceState) &#123; super.onActivityCreated(savedInstanceState); // Give some text to display if there is no data. In a real // application this would come from a resource. setEmptyText(\"No phone numbers\"); // We have a menu item to show in action bar. setHasOptionsMenu(true); // Create an empty adapter we will use to display the loaded data. mAdapter = new SimpleCursorAdapter(getActivity(), android.R.layout.simple_list_item_2, null, new String[] &#123; Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS &#125;, new int[] &#123; android.R.id.text1, android.R.id.text2 &#125;, 0); setListAdapter(mAdapter); // Start out with a progress indicator. setListShown(false); // Prepare the loader. Either re-connect with an existing one, // or start a new one. getLoaderManager().initLoader(0, null, this); &#125; public static class MySearchView extends SearchView &#123; public MySearchView(Context context) &#123; super(context); &#125; // The normal SearchView doesn't clear its search text when // collapsed, so we will do this for it. @Override public void onActionViewCollapsed() &#123; setQuery(\"\", false); super.onActionViewCollapsed(); &#125; &#125; @Override public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) &#123; // Place an action bar item for searching. MenuItem item = menu.add(\"Search\"); item.setIcon(android.R.drawable.ic_menu_search); item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW); mSearchView = new MySearchView(getActivity()); mSearchView.setOnQueryTextListener(this); mSearchView.setOnCloseListener(this); mSearchView.setIconifiedByDefault(true); item.setActionView(mSearchView); &#125; public boolean onQueryTextChange(String newText) &#123; // Called when the action bar search text has changed. Update // the search filter, and restart the loader to do a new query // with this filter. String newFilter = !TextUtils.isEmpty(newText) ? newText : null; // Don't do anything if the filter hasn't actually changed. // Prevents restarting the loader when restoring state. if (mCurFilter == null &amp;&amp; newFilter == null) &#123; return true; &#125; if (mCurFilter != null &amp;&amp; mCurFilter.equals(newFilter)) &#123; return true; &#125; mCurFilter = newFilter; getLoaderManager().restartLoader(0, null, this); return true; &#125; @Override public boolean onQueryTextSubmit(String query) &#123; // Don't care about this. return true; &#125; @Override public boolean onClose() &#123; if (!TextUtils.isEmpty(mSearchView.getQuery())) &#123; mSearchView.setQuery(null, true); &#125; return true; &#125; @Override public void onListItemClick(ListView l, View v, int position, long id) &#123; // Insert desired behavior here. Log.i(\"FragmentComplexList\", \"Item clicked: \" + id); &#125; // These are the Contacts rows that we will retrieve. static final String[] CONTACTS_SUMMARY_PROJECTION = new String[] &#123; Contacts._ID, Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS, Contacts.CONTACT_PRESENCE, Contacts.PHOTO_ID, Contacts.LOOKUP_KEY, &#125;; public Loader&lt;Cursor&gt; onCreateLoader(int id, Bundle args) &#123; // This is called when a new Loader needs to be created. This // sample only has one Loader, so we don't care about the ID. // First, pick the base URI to use depending on whether we are // currently filtering. Uri baseUri; if (mCurFilter != null) &#123; baseUri = Uri.withAppendedPath(Contacts.CONTENT_FILTER_URI, Uri.encode(mCurFilter)); &#125; else &#123; baseUri = Contacts.CONTENT_URI; &#125; // Now create and return a CursorLoader that will take care of // creating a Cursor for the data being displayed. String select = \"((\" + Contacts.DISPLAY_NAME + \" NOTNULL) AND (\" + Contacts.HAS_PHONE_NUMBER + \"=1) AND (\" + Contacts.DISPLAY_NAME + \" != '' ))\"; return new CursorLoader(getActivity(), baseUri, CONTACTS_SUMMARY_PROJECTION, select, null, Contacts.DISPLAY_NAME + \" COLLATE LOCALIZED ASC\"); &#125; public void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) &#123; // Swap the new cursor in. (The framework will take care of closing the // old cursor once we return.) mAdapter.swapCursor(data); // The list should now be shown. if (isResumed()) &#123; setListShown(true); &#125; else &#123; setListShownNoAnimation(true); &#125; &#125; public void onLoaderReset(Loader&lt;Cursor&gt; loader) &#123; // This is called when the last Cursor provided to onLoadFinished() // above is about to be closed. We need to make sure we are no // longer using it. mAdapter.swapCursor(null); &#125;&#125; ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep7 The Zen Of IntentService","date":"2016-02-24T12:44:20.000Z","path":"2016/02/24/Android-Performance-Patterns-s5ep7-The-Zen-Of-IntentService/","text":"Season 5 ep 7ï¼ŒIntentServiceä¹‹ç¦…ã€‚è§å±±æ˜¯å±±ï¼Œè§æ°´æ˜¯æ°´ï¼›è§å±±ä¸æ˜¯å±±ï¼Œè§æ°´ä¸æ˜¯æ°´ï¼›è§å±±ä»æ˜¯å±±ï¼Œè§æ°´ä»æ˜¯æ°´ã€‚Video Link Work With An Intentåœ¨Androidç³»ç»Ÿä¸­æˆ‘ä»¬ç»å¸¸ä¼šç”¨Intentæ¥ä¼ é€’æ¶ˆæ¯ï¼Œå¦‚æœä¸€ä¸ªIntentéœ€è¦èŠ±å¾ˆé•¿æ—¶é—´æ¥å¤„ç†ï¼Œåœ¨ä¸Šè¿‡äº†å‰é¢å‡ èŠ‚è¯¾ä¹‹åï¼Œä½ ä¸€å®šå·²ç»æŒæ¡äº†å¦‚ä½•åº”å¯¹è¿™ç§taskçš„åŠæ³•â€”â€”åœ¨æ–°çš„Worker Threadä¸­è§£å†³è¿™ä¸ªä»»åŠ¡ã€‚ åŸºäºSeason 5å‰é¢å‡ èŠ‚æ‰€è®²çš„çŸ¥è¯†ï¼Œä½ å¯èƒ½ä¼šé€‰ç”¨AsyncTaskæˆ–è€…HandlerThreadæ¥å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œç„¶è€Œï¼Œè¿™ä¸¤ä¸ªå¹¶éæœ€å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºï¼š AsyncTaské€šå¸¸å¤„ç†UIäº¤äº’æ–¹é¢çš„äº‹æƒ…ï¼Œå½“ä½ çš„Activityæ­£å¤„äºåå°ï¼ˆæ²¡æœ‰ä»»ä½•UIå…ƒç´ åœ¨æ¸²æŸ“ä¸­ï¼‰æ—¶ï¼ŒAsyncTaskå¹¶ä¸èƒ½å®Œæˆå®ƒçš„ä»»åŠ¡ HandlerThreadå€’æ˜¯å¯ä»¥è„±ç¦»UIè¿è¡Œï¼Œä¸è¿‡å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Threadï¼Œå½“æ²¡æœ‰Intentè¿‡æ¥æ—¶ï¼Œè¿™ä¸ªThreadä»ç„¶ä¼šç»´æŒå®ƒçš„ç”Ÿå‘½æ´»åŠ¨ï¼Œæ„å‘³ç€ï¼Œç©ºé—²æ—¶å ç”¨èµ„æºã€‚ï¼ˆä¸€æ¡Threadä¼šå ç”¨65k+çš„å†…å­˜ï¼‰ IntentServiceè¿™æ˜¯å°±è¦éš†é‡æ¨å‡ºIntentServiceäº†ã€‚IntentServiceæ›´åƒæ˜¯Serviceä¸HandlerThreadçš„åˆä½“ï¼ˆa hybrid between Service class and HandlerThreadï¼‰ï¼Œå®ƒç»§æ‰¿è‡ªServiceï¼Œåœ¨è¿è¡Œæ—¶ä¼šåˆ›å»ºHandlerThreadï¼Œæ¥å¤„ç†æ¥æ”¶åˆ°çš„Intentè¯·æ±‚ã€‚ å› ä¸ºIntentServiceæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªServiceï¼Œä½ å¯ä»¥é€šè¿‡å®ƒè¿›è¡Œä¸€äº›Serviceæ—¢æœ‰çš„åŠŸèƒ½ï¼Œå¦‚ä½¿ç”¨alarmåšå®šæ—¶ï¼å¾ªç¯æ“ä½œã€‚ Be Careful With IntentServiceåœ¨äº«å—IntentServiceæ‰€å¸¦æ¥ä¾¿åˆ©çš„æ—¶å€™ï¼Œä¹Ÿæœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚ é¦–å…ˆï¼ŒIntentServiceæ‰€æœ‰ä»»åŠ¡æ˜¯åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­æŒ‰é¡ºåºå¤„ç†çš„ï¼ŒåŒAsyncTaskä¸€æ ·ï¼Œå¦‚æœæ’åœ¨å‰é¢çš„ä¸€ä¸ªä»»åŠ¡æå…¶è€—æ—¶ï¼Œä¼šä½¿å¾—åé¢ä»»åŠ¡è¿Ÿè¿Ÿå¾—ä¸åˆ°æ‰§è¡Œï¼Œè¿™æ˜¯å°±è¦è€ƒè™‘HandlerThreadç­‰å…¶ä»–è§£å†³æ–¹æ¡ˆäº†ã€‚ å…¶æ¬¡ï¼ŒIntentServiceä½¿ç”¨ç±»ä¼¼Broadcast Receiverçš„æœºåˆ¶å°†ä»»åŠ¡æ‰§è¡Œç»“æœè¿”å›ç»™Activityï¼Œè¿™åœ¨è¿è¡Œç»“æœçš„æ­£ç¡®æ€§ä¸Šå¹¶æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ç„¶è€Œå¯¹äºç®€å•çš„ç»“æœè¿”å›æ“ä½œï¼Œæ˜¯ä¸éœ€è¦ä½¿ç”¨å¦‚æ­¤é‡é‡çº§çš„Broadcast Receiveræ¥è¿›è¡Œçš„ã€‚ä½ å¯ä»¥æ”¹ç”¨runOnUIThreadæ¥é™ä½èµ„æºæ¶ˆè€—ã€‚ Other Benifits of IntentServiceä½¿ç”¨IntentServiceè¿˜æœ‰ä¸€ä¸ªé™„åŠ çš„å¥½å¤„â€”â€”å®ƒä¼šä½¿ä½ çš„appåœ¨è¢«åˆ‡æ¢åˆ°åå°æ—¶ï¼Œä¸é‚£ä¹ˆå®¹æ˜“è¢«æ€æ­»ã€‚ï¼ˆç›¸æ¯”äºé‚£äº›åœ¨åå°è¿è¡Œä¸”æ²¡æœ‰Serviceçš„appè€Œè¨€ï¼‰ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep6 Swimming in ThreadPools","date":"2016-02-24T11:30:08.000Z","path":"2016/02/24/Android-Performance-Patterns-s5ep6-Swimming-In-ThreadPools/","text":"Season 5 ep 6ï¼Œå…³äºçº¿ç¨‹æ± ä½ åº”è¯¥çŸ¥é“çš„äº‹Video Link One Thread, One Thing ä¸”è¯´å­”æ˜è‡ªå¼•ä¸€å†›å±¯äºäº”ä¸ˆåŸï¼Œç´¯ä»¤äººæ¦æˆ˜ï¼Œé­å…µåªä¸å‡ºã€‚å­”æ˜ä¹ƒå–å·¾å¸¼å¹¶å¦‡äººç¼Ÿç´ ä¹‹æœï¼Œç››äºå¤§ç›’ä¹‹å†…ï¼Œä¿®ä¹¦ä¸€å°ï¼Œé£äººé€è‡³é­å¯¨ã€‚è¯¸å°†ä¸æ•¢éšè”½ï¼Œå¼•æ¥ä½¿å…¥è§å¸é©¬æ‡¿ã€‚æ‡¿å¯¹ä¼—å¯ç›’è§†ä¹‹ï¼Œå†…æœ‰å·¾å¸¼å¦‡äººä¹‹è¡£ï¼Œå¹¶ä¹¦ä¸€å°ã€‚æ‡¿æ‹†è§†å…¶ä¹¦ï¼Œç•¥æ›°ï¼šâ€œä»²è¾¾æ—¢ä¸ºå¤§å°†ï¼Œç»Ÿé¢†ä¸­åŸä¹‹ä¼—ï¼Œä¸æ€æŠ«åšæ‰§é”ï¼Œä»¥å†³é›Œé›„ï¼Œä¹ƒç”˜çªŸå®ˆåœŸå·¢ï¼Œè°¨é¿åˆ€ç®­ï¼Œä¸å¦‡äººåˆä½•å¼‚å“‰ï¼ä»Šé£äººé€å·¾å¸¼ç´ è¡£è‡³ï¼Œå¦‚ä¸å‡ºæˆ˜ï¼Œå¯å†æ‹œè€Œå—ä¹‹ã€‚å€˜è€»å¿ƒæœªæ³¯ï¼ŒçŠ¹æœ‰ç”·å­èƒ¸è¥Ÿï¼Œæ—©ä¸æ‰¹å›ï¼Œä¾æœŸèµ´æ•Œã€‚â€å¸é©¬æ‡¿çœ‹æ¯•ï¼Œå¿ƒä¸­å¤§æ€’ï¼Œä¹ƒä½¯ç¬‘æ›°ï¼šâ€œå­”æ˜è§†æˆ‘ä¸ºå¦‡äººè€¶ï¼â€å³å—ä¹‹ï¼Œä»¤é‡å¾…æ¥ä½¿ã€‚æ‡¿é—®æ›°ï¼šâ€œå­”æ˜å¯é£ŸåŠäº‹ä¹‹çƒ¦ç®€è‹¥ä½•ï¼Ÿâ€ä½¿è€…æ›°ï¼šâ€œä¸ç›¸å¤™å…´å¤œå¯ï¼Œç½šäºŒåä»¥ä¸Šçš†äº²è§ˆç„‰ã€‚æ‰€å•–ä¹‹é£Ÿï¼Œæ—¥ä¸è¿‡æ•°å‡ã€‚â€æ‡¿é¡¾è°“è¯¸å°†æ›°ï¼šâ€œå­”æ˜é£Ÿå°‘äº‹çƒ¦ï¼Œå…¶èƒ½ä¹…ä¹ï¼Ÿâ€ â€”â€”ã€Šä¸‰å›½æ¼”ä¹‰ã€‹ç¬¬ä¸€ç™¾åä¸‰å› ä¸Šæ–¹è°·å¸é©¬å—å›° äº”ä¸ˆåŸè¯¸è‘›ç¦³æ˜Ÿ è®ºæ™ºè®¡è°‹ç•¥ï¼Œè¯¸è‘›äº®è¦èƒœè¿‡å¸é©¬æ‡¿ï¼Œç„¶è€Œï¼Œç”±äºä¸ç›¸ä¸è®ºå·¨ç»†äº‹å¿…èº¬äº²ï¼Œåªè½å¾—æ˜Ÿè½äº”ä¸ˆåŸçš„æ‚²æƒ¨ç»“å±€ã€‚å¯è§ï¼Œäººçš„ç²¾åŠ›æ˜¯æœ‰é™çš„ï¼Œä¸åº”å½“æŠŠæ‰€æœ‰çš„ä»»åŠ¡éƒ½å‹åœ¨åŒä¸€ä¸ªäººå¤´ä¸Šã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè¿™ä¸€ç†è®ºåŒæ ·é€‚ç”¨ã€‚ å¯¹äºçº¿ç¨‹ï¼Œæœ‰ä¸“é—¨å¤„ç†éŸ³é¢‘çš„Audio Threadï¼Œæœ‰å“åº”IOçš„IO Threadï¼Œè¿˜æœ‰è´Ÿè´£ç½‘ç»œäº‹åŠ¡çš„Networking Threadï¼Œè¿™äº›éƒ½æ˜¯è‰¯å¥½çš„ç¼–ç¨‹å…¸èŒƒã€‚ ç„¶è€Œï¼Œå­˜åœ¨è¿™æ ·çš„æƒ…å†µï¼šå½“æŸä¸€ç³»åˆ—çš„ä»»åŠ¡æ•°é‡å®åœ¨å¤ªå¤šï¼Œå·²ç»è¶…è¿‡äº†å•ä¸ªçº¿ç¨‹æ‰€èƒ½æ‰¿å—çš„æé™ã€‚è¿™æ—¶æˆ‘ä»¬åº”å½“æ€ä¹ˆåšï¼Ÿå¦‚æœå·¥ä½œçº¿ç¨‹æœ‰ä¸”åªèƒ½ç”±ä¸€ä¸ªï¼Œå°±åƒè¯¸è‘›ä¸ç›¸ä¸€æ ·ä¸å¾—ä¸äº²åŠ›äº²ä¸ºï¼Œé‚£å¯å°±GGäº†ã€‚ä¸å¿…æ‹…å¿ƒï¼Œæ–°æ—¶ä»£çš„è®¡ç®—æœºç§‘å­¦å·²ç»è®©æˆ‘ä»¬ä¹ å¾—äº†ç§˜-å½±åˆ†èº«ä¹‹æœ¯ã€‚ çœ‹ä¸€çœ‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼Œé¡µé¢é‡Œéœ€è¦å±•ç¤º40å¼ å›¾ç‰‡ï¼Œæ¯å¼ å›¾ç‰‡çš„è§£ç æ¶ˆè€—4msæ—¶é—´ï¼Œå¦‚æœåªæœ‰å•ä¸€çº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œæ€»å…±éœ€è¦ç”¨æ‰160msã€‚è¿™æ˜¾ç„¶æ˜¯éš¾ä»¥æ¥å—çš„ã€‚ å¦‚æœæˆ‘ä»¬ç”¨10æ¡çº¿ç¨‹å¹¶è¡Œè®¡ç®—ï¼Œå¯ä»¥æŠŠæ—¶é—´å‹ç¼©åˆ°16msã€‚ Thread Pool Executoræœ‰äº†å¹¶å‘å¤„ç†è¿™ä¸€ä¸ªæ€è·¯ï¼Œä¾¿å¯ä»¥å€ŸåŠ©äºJAVAæä¾›çš„å¼ºåŠ›å·¥å…·ThreadPoolExecutoræ¥æ‰§è¡Œä»»åŠ¡äº†ã€‚ä½ åªéœ€è¦å£°æ˜éœ€è¦çš„çº¿ç¨‹æ•°ï¼Œå¹¶ä¸”æŠŠæ‹†åˆ†å¥½çš„Taskä¼ é€’ç»™ThreadPoolExecutorï¼ŒThreadPoolExecutorè‡ªèº«ä¼šå¤„ç†ä»»åŠ¡åˆ†é…ã€çº¿ç¨‹è°ƒåº¦ã€çº¿ç¨‹å›æ”¶ç­‰æ“ä½œã€‚ The More, The Better? Thread is evil å¹¶å‘çš„çº¿ç¨‹æ•°å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œé¦–å…ˆï¼Œä¸€å°ä¸»æœºèƒ½å¤Ÿå¼€å¯çš„çº¿ç¨‹æ•°æ˜¯æœ‰ä¸Šé™çš„ï¼›å…¶æ¬¡ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢æœ¬èº«æœ‰ä»£ä»·ï¼ˆçº¿ç¨‹åŒæ­¥ã€é”ä¸äº’æ–¥ã€ç¯å¢ƒå‡†å¤‡ç­‰ç­‰ï¼‰ï¼›å†æ¬¡ï¼Œè·ŸCPUæ•°æœ‰å…³ï¼ŒCPUè¶Šå¤šï¼Œæœ€å¤§æ€§èƒ½ä¸‹å¯å¹¶å‘çº¿ç¨‹æ•°è¶Šå¤šã€‚ æœ€ä½³çº¿ç¨‹æ•°è¦åœ¨å®è·µä¸­é€šè¿‡å‹æµ‹ç­‰æ‰‹æ®µè·çŸ¥ã€‚é€šå¸¸æˆ‘ä»¬å¼€å‘ä¸­æ§åˆ¶å¹¶è¡Œçº¿ç¨‹æ•°=CPUæ•°å³å¯ã€‚ æ¯æ¡çº¿ç¨‹è‡³å°‘å ç”¨64kçš„å†…å­˜ ThreadPoolExecutorçš„æ„é€ è¿‡ç¨‹ä¸­ï¼Œå…è®¸æˆ‘ä»¬æ§åˆ¶åˆå§‹çº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡Runtime.getRuntime().availableProcessors()è·å–åˆ°çš„å†…æ ¸æ•°ä¹Ÿè®¸ä¼šå°äºçœŸå®CPUæ•°â€”â€”å‡ºäºèŠ‚çº¦ç”µé‡ç­‰è€ƒè™‘ï¼ŒAndroidç³»ç»Ÿä¼šè®©æŸäº›CPUåœ¨ç©ºé—²æ—¶å¤„äºä¼‘çœ çŠ¶æ€ï¼Œè¿™äº›CPUä¸ä¼šè¢«è®¡æ•°ã€‚ 1234567private static int NUM_OF_CORES = Runtime.getRuntime().availableProcessors();mDecodeThreadPool = new ThreadPoolExecutor( NUM_OF_CORES &gt;&gt; 1, // initial pool size NUM_OF_CORES, // max pool size KEEP_ALIVE_TIME, // keep alive time KEEP_ALIVE_TIME_UNIT, // keep alive units (seconds etc) mDecodeTaskQueue); For Power Users Like URenderScriptæ˜¯ä¸“é—¨ç”¨æ¥è¿›è¡Œå¤§é‡å¹¶è¡Œè®¡ç®—çš„å·¥å…·ï¼Œå½“ä½ æœ‰è¿™æ–¹é¢çš„éœ€æ±‚æ—¶ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹ã€‚ Use Systrace to Analyzeç”¨ä»¥åˆ†æçº¿ç¨‹ã€å†…å­˜çš„Systraceå·¥å…·åœ¨å‰æ–‡å·²ç»ä»‹ç»è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep5 Getting A HandlerThread","date":"2016-02-24T01:45:19.000Z","path":"2016/02/24/Android-Performance-Patterns-s5ep5-Getting-A-HandlerThread/","text":"Season5 ep5çš„ä¸»é¢˜æ˜¯HandlerThreadlink A Case â€“ Camera Previewåœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼ŒAsyncTaskå·²ç»å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„åŠŸèƒ½éœ€æ±‚ã€‚ä¸è¿‡ï¼ŒAsyncTaskå¹¶ä¸æ˜¯å¯¹äºå„ç§åœºæ™¯å…¨éƒ½é€‚ç”¨çš„ã€‚å¯¹äºç‰¹åˆ«è€—æ—¶çš„æ“ä½œï¼Œå¦‚ç…§ç›¸æœºçš„é¢„è§ˆå›¾ç»˜åˆ¶ã€‚ 1public abstract void onPreviewFrame (byte[] data, Camera camera); onPreviewFrameæ”¾åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„è¯ï¼Œä¼šå› ä¸ºå¤§é‡æ—¶é—´ç”¨äºè®¡ç®—è€Œäº§ç”Ÿä¸¢å¸§ï¼Œæ–¹æ¡ˆä¸€passï¼ æ”¾åœ¨AsyncTaskä¸­æ‰§è¡Œçš„è¯ï¼Œå› ä¸ºè‡ªèº«çš„è€—æ—¶ç‰¹åˆ«é•¿ï¼Œå¯¼è‡´åç»­ä»»åŠ¡å§‹ç»ˆå¾—ä¸åˆ°æ‰§è¡Œï¼Œæ–¹æ¡ˆäºŒpassï¼ How?åŸºäºä¸Šé¢çš„è€ƒè™‘ï¼Œæˆ‘ä»¬éœ€è¦æœ‰è¿™æ ·ä¸€ä¸ªç‹¬ç«‹äºä¸»çº¿ç¨‹ã€å¯ä»¥æ‰§è¡Œå†—é•¿ä»»åŠ¡çš„æœºåˆ¶ï¼Œæ¥å®Œæˆç…§ç›¸æœºé¢„è§ˆå›¾çš„è·å–ã€‚ è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹HandlerThreadã€‚HandlerThreadç»§æ‰¿è‡ªjava.lang.Threadï¼Œå¯ä»¥é€šè¿‡getLooper()çš„æ–¹æ³•æ¥è·å–æŸä¸ªHandlerThreadçš„Looperï¼Œæ‹¿åˆ°Looperä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡å®ƒåˆ›å»ºä¸€ä¸ªHandlerï¼Œè¿›è€Œç”¨è¿™ä¸ªHandlerå¤„ç†é¢„è§ˆå›¾ç»˜åˆ¶è¿™æ ·çš„å·¥ä½œäº†ã€‚ demoè§ä¸‹é¢çš„ä»£ç ç‰‡æ®µ 1234HandlerThread handlerThread = new HandlerThread(\"photo preview\");handlerThread.start();Handler handler = new Handler(handlerThread.getLooper());handler.sendMessage(Handler.obtainMessage(0)); // åœ¨handleMessageæ–¹æ³•ä¸­ç»˜åˆ¶é¢„è§ˆå›¾ å½“è®¡ç®—å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡Activity.runOnUIThread(Runnable r)æ¥æ›´æ–°é¢„è§ˆå›¾äº†ã€‚ HandlerThreadä¸ä»…å¯ä»¥å¤„ç†å†—é•¿çš„è§¦å‘UIäº‹ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨å®ƒæ¥åšUIæ— å…³çš„äº‹æƒ…ã€‚ Priorityåˆ›å»ºHandlerThreadæ—¶ï¼Œè®°å¾—æ ¹æ®å®é™…éœ€æ±‚èµ‹äºˆå®ƒé€‚å½“çš„ä¼˜å…ˆçº§ï¼Œè¿™ä¼šä½¿cpuä¸ºå®ƒåˆ†é…åˆé€‚çš„æ‰§è¡Œé¡ºåºã€‚ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"ä½ å¥½å“‡ï¼Œæ±¤åœ†å„¿ï¼","date":"2016-02-23T14:13:36.000Z","path":"2016/02/23/Hello-TangYuan/","text":"===Ending===","tags":[{"name":"æ§‘","slug":"æ§‘","permalink":"https://lilei.pro/tags/æ§‘/"}]},{"title":"Android Performance Patterns - s5ep4 Good AsyncTask Hunting","date":"2016-02-23T13:51:03.000Z","path":"2016/02/23/Android-Performance-Patterns-s5ep4-Good-AsyncTask-Hunting/","text":"æœ¬èŠ‚ä»‹ç»AsyncTaskçš„ä½¿ç”¨æ–¹æ³•ä¸é£é™©link AsyncTask BasicsAsyncTaskæ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œç”¨çš„å¥½äº†æ— å¾€ä¸åˆ©ï¼Œç”¨å¾—ä¸å¥½åˆ™ä¼¤äººä¼¤å·±ã€‚ è€ƒè™‘ä¸‹é¢è¿™ç§åœºæ™¯ï¼Œæœ‰ä¸€ä¸ªéå¸¸è€—æ—¶çš„æ“ä½œéœ€è¦è¿›è¡Œï¼Œæˆ‘ä»¬åœ¨UI Threadä¹‹å¤–å¯åŠ¨äº†ä¸€ä¸ªWorker Threadï¼Œå½“Worker Threadå®Œæˆå®ƒçš„å·¥ä½œæ—¶ï¼Œä¼šæŠŠè®¡ç®—ç»“æœè¿”å›ç»™UI Threadã€‚ ç”±äºè¿™ç§åº”ç”¨åœºæ™¯å¤ªå¸¸è§äº†ï¼ŒAndroidä¸ºæˆ‘ä»¬æä¾›äº†AsyncTaskè¿™ä¸€æœºåˆ¶ã€‚AsyncTaskæœ‰ä¸‰ä¸ªé‡è¦çš„å‡½æ•°ã€‚ onPreExecute()ï¼Œåœ¨UI Threadä¸­æ‰§è¡Œï¼Œå‡†å¤‡Task doInBackground()ï¼Œåœ¨Worker Threadä¸­æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡ onPostExecute()ï¼Œåœ¨UI Threadä¸­æ‰§è¡Œï¼Œå¤„ç†ä»»åŠ¡æ‰§è¡Œç»“æœ ç‰¹åˆ«è¯´æ˜ï¼onPreExecuteå¹¶ä¸ä¿è¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œï¼è™½ç„¶å®˜æ–¹APIæ–‡æ¡£ä¸­çš„è¯´æ˜å†™åˆ°AsyncTaskâ€œå¿…é¡»åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œâ€ï¼Œä½†Frameworkåº•å±‚å®ç°ä¸­å¹¶æ²¡æœ‰ä¿è¯è¿™ä¸€æœºåˆ¶ The AsyncTask class must be loaded on the UI thread. This is done automatically as of JELLY_BEAN. æ¢å¥è¯è¯´ï¼Œâ€œä¿è¯onPreExecute()åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œâ€æ˜¯ä¸€ä¸ªç¼–ç¨‹è§„èŒƒï¼Œè€Œå¹¶éå¼ºåˆ¶è¦æ±‚ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒonPostExecue()ä¸€å®šæ˜¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨çš„æ˜¯mainLooperã€‚ AsyncTask.java 12345678910111213141516171819202122232425262728293031323334353637 private Result postResult(Result result) &#123; @SuppressWarnings(\"unchecked\") Message message = getHandler().obtainMessage(MESSAGE_POST_RESULT, new AsyncTaskResult&lt;Result&gt;(this, result)); message.sendToTarget(); return result; &#125;private static Handler getHandler() &#123; synchronized (AsyncTask.class) &#123; if (sHandler == null) &#123; sHandler = new InternalHandler(); &#125; return sHandler; &#125; &#125;private static class InternalHandler extends Handler &#123; public InternalHandler() &#123; super(Looper.getMainLooper()); &#125; @SuppressWarnings(&#123;\"unchecked\", \"RawUseOfParameterizedType\"&#125;) @Override public void handleMessage(Message msg) &#123; AsyncTaskResult&lt;?&gt; result = (AsyncTaskResult&lt;?&gt;) msg.obj; switch (msg.what) &#123; case MESSAGE_POST_RESULT: // There is only one result result.mTask.finish(result.mData[0]); break; case MESSAGE_POST_PROGRESS: result.mTask.onProgressUpdate(result.mData); break; &#125; &#125; &#125; å…³äºä¸Šé¢è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªä¾‹å­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364public class MainActivity extends AppCompatActivity &#123; private static String TAG = \"mainactivity\"; View titleView; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); initViews(); new Thread(new Runnable() &#123; @Override public void run() &#123; MyAsyncTask task = new MyAsyncTask(); task.execute(); &#125; &#125;).start(); &#125; private void initViews() &#123; titleView = findViewById(R.id.title); titleView.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; toast(\"Hello World!\"); &#125; &#125;); &#125; private void toast(String s) &#123; Toast.makeText(this, s, Toast.LENGTH_SHORT).show(); &#125; class MyAsyncTask extends AsyncTask &#123; @Override protected void onPreExecute() &#123; checkRunningInMainThread(\"onPreExecute\"); super.onPreExecute(); &#125; @Override protected void onProgressUpdate(Object[] values) &#123; checkRunningInMainThread(\"onProgressUpdate\"); super.onProgressUpdate(values); &#125; @Override protected void onPostExecute(Object o) &#123; checkRunningInMainThread(\"onPostExecute\"); super.onPostExecute(o); &#125; @Override protected Object doInBackground(Object[] params) &#123; checkRunningInMainThread(\"doInBackGround\"); return null; &#125; &#125; private static void checkRunningInMainThread(String methodName) &#123; Log.d(TAG, methodName + \" is running in UI Thread? \" + (Looper.myLooper() != null &amp;&amp; Looper.getMainLooper() == Looper.myLooper())); &#125;&#125; ä¾‹å­ä¸­æœ‰ä¸€äº›æ— å…³ä»£ç ï¼ˆtitleViewï¼‰ï¼Œä¸è¿‡ä¸å½±å“é˜…è¯»ã€‚ æ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼š 12302-29 20:29:06.440 13212-13239/com.leili.geeker D/mainactivity: onPreExecute is running in UI Thread? false02-29 20:29:06.443 13212-13241/com.leili.geeker D/mainactivity: doInBackGround is running in UI Thread? false02-29 20:29:06.850 13212-13212/com.leili.geeker D/mainactivity: onPostExecute is running in UI Thread? true å°è¯äº†onPreExecute()å¹¶ä¸ä¿è¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œã€‚ AsyncTask May Get You Into A Troubleæœ‰äº†ä¸Šé¢ä¸‰ä¸ªå‡½æ•°ï¼Œä¼¼ä¹AsyncTaskç”¨èµ·æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆå›°éš¾ã€‚ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼ŒAsyncTaskä¼šäº§ç”Ÿå¾ˆå¤šåŒªå¤·æ‰€æ€çš„é—®é¢˜ã€‚ é¦–å…ˆï¼ŒAsyncTaskå¤„ç†çš„æ‰€æœ‰Taskï¼Œéƒ½æ˜¯æ”¾åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­ä¾æ¬¡è¿›è¡Œçš„ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå‰é¢çš„Taskç›¸å½“è€—æ—¶ï¼Œä¼šä½¿å¾—å®ƒåé¢çš„Taskåœ¨å¾ˆä¹…ä¹‹åæ‰å¾—ä»¥æ‰§è¡Œã€‚åœ¨ä½ å¤„ç†long running taskæ—¶åº”ç»™äºˆé«˜åº¦å…³æ³¨ã€‚ å®é™…ä¸Šï¼ŒAsyncTaskæä¾›äº†ä¸€ä¸ªç”¨æ¥å¹¶è¡Œæ‰§è¡ŒTaskçš„æ–¹æ³•executeOnExecutorï¼Œç„¶è€Œå…‰å¤´å“¥å»ºè®®ï¼Œå½“ä½ è¶³å¤Ÿç†è§£è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œä½ å°±ä¼šè§‰å¾—è¿˜æ˜¯ä¸ç”¨ä¸ºå¥½ã€‚ AsyncTask CancelingAsyncTaskåœ¨æ‰§è¡Œä¹‹å‰ï¼æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ˜¯å¯ä»¥è¢«Cancelæ‰çš„ã€‚å‚æ•°mayInterruptIfRunningå†³å®šäº†æ˜¯å¦å…è®¸åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«ä¸­æ–­ã€‚å¦‚æœä¸€é¡¹ä»»åŠ¡æ‰§è¡Œäº†cacelæ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨doInBackgroundåè¢«è°ƒèµ·çš„å°†ä¸å†æ˜¯onPostExecuteï¼Œè€Œæ˜¯onCancelï¼ŒåŒæ ·æ˜¯åœ¨UI Threadä¸­è¿›è¡Œã€‚ 12345/* * Attempts to cancel execution of this task. This attempt will fail if the task has already completed, already been cancelled, or could not be cancelled for some other reason. If successful, and this task has not started when cancel is called, this task should never run. If the task has already started, then the mayInterruptIfRunning parameter determines whether the thread executing this task should be interrupted in an attempt to stop the task. * Calling this method will result in onCancelled(Object) being invoked on the UI thread after doInBackground(Object[]) returns. Calling this method guarantees that onPostExecute(Object) is never invoked. After invoking this method, you should check the value returned by isCancelled() periodically from doInBackground(Object[]) to finish the task as early as possible. */public final boolean cancel (boolean mayInterruptIfRunning); å¦‚æœä½ çš„Taskåœ¨è®¾è®¡æ—¶ï¼Œè€ƒè™‘äº†cancelçš„æƒ…å†µï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦é¢å¤–åšä¸¤ä»¶äº‹ã€‚ Check a â€œcanceledâ€ flag regularly Report work results invalid å¯¹äº1ï¼Œå¦‚ä¸‹ 123456doInBackground(..) &#123; // Doing some stuff if (isCanceled()) &#123;..&#125; // Oh noez, we done, clean up for (i &lt; obj.length) if (isCanceled()) &#123;..&#125; // Oh noez, we done, clean up&#125; å¯¹äº2ï¼Œå½“æˆ‘ä»¬çŸ¥é“è¢«cancelçš„taskä¼šè°ƒç”¨onCancelæ–¹æ³•æ—¶ï¼Œå¯ä»¥åœ¨onCancelä¸­åšä¸€äº›è¯¸å¦‚æ›´æ–°UIã€æ¸…ç†å†…å­˜çš„äº‹æƒ…ã€‚ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep3 Memory & Threading","date":"2016-02-23T12:09:23.000Z","path":"2016/02/23/Android-Performance-Patterns-s5ep3-Memory-And-Threading/","text":"Season5 ep3 ä¸»è¦ä»‹ç»äº†Androidä¸­ä½¿ç”¨å¤šçº¿ç¨‹å¯èƒ½å¯¼è‡´çš„é£é™©â€”â€”å†…å­˜æ³„æ¼link Memory Contention Problemså†…å­˜é—®é¢˜çš„äº§ç”Ÿï¼Œæ˜¯ç”±äºä¸¤ä¸ªçº¿ç¨‹æ“ä½œäº†åŒä¸€å—å†…å­˜ï¼Œç”±äºä¸¤è€…æ‰§è¡Œçš„å…ˆåé¡ºåºæœªçŸ¥ï¼Œå¯¼è‡´è¿è¡Œç»“æœä¸å¯é¢„æµ‹ã€‚ ç”¨å…‰å¤´å“¥çš„è¯è¯´ï¼ˆç»™å…‰å¤´å“¥çš„å¹½é»˜æ„Ÿç‚¹èµï¼‰ Memory contention problems with read-write access order, ABA problems, rips in the fabric of space-timeâ€¦ æ€æ ·è§£å†³ä¸Šè¿°é—®é¢˜å‘¢ï¼ŸåŠ é”æ˜¯ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•â€”â€”ä¸è¿‡è¿™ä¸€ç‚¹è¦æ˜¯æ‰©å±•èµ·æ¥è®²ï¼Œå¯è¯´æ¥è¯é•¿äº†ã€‚ Memory Problems in Androidè®°ä½ä¸€ç‚¹ï¼šAndroidä¸­çš„UIå¯¹è±¡ä¸ï¼æ˜¯ï¼çº¿ï¼ç¨‹ï¼å®‰ï¼å…¨ï¼çš„ï¼ï¼ˆnot thread-safeï¼‰ï¼æ‰€æœ‰UIå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½åœ¨UIçº¿ç¨‹é‡Œè¿›è¡Œï¼Œåœ¨å…¶å®ƒçº¿ç¨‹ä¸­ç»´æŠ¤çš„UIå¯¹è±¡å¼•ç”¨ï¼Œå¾ˆå¯èƒ½æ­£å¤„äºä¸€ä¸ªinvalidçš„çŠ¶æ€ã€‚ è­¬å¦‚ï¼Œåœ¨Worker Threadä¸­æŒæœ‰ä¸€ä¸ªViewçš„å¼•ç”¨ï¼Œè€Œè¿™ä¸ªå¼•ç”¨å®é™…ä¸Šå·²ç»åœ¨UI Threadä¸­ç»“æŸäº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œä»view hierarchyé‡Œé¢è¢«ç§»é™¤æ‰äº†ã€‚ç„¶è€Œï¼ŒWorker Threadå´å‚»å‚»åœ°å¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œæ¥ä¸‹æ¥å¯¹è¿™ä¸ªViewçš„ä¸€åˆ‡æ“ä½œéƒ½å°†æ˜¯å¾’åŠ³ã€‚ Donâ€™t Keep Activity ReferencesWorker Threadä¸­æ˜¯ä¸åº”è¯¥æŒæœ‰Activityå¼•ç”¨çš„ï¼Œè¿™ä¼šå¯¼è‡´Activityæ— æ³•æ­£å¸¸å›æ”¶ï¼Œè¿›è€Œäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚åœ¨Androidä¸­ï¼Œå½“æˆ‘ä»¬ä¸å¯é¿å…åœ°ç”¨åˆ°å¤šçº¿ç¨‹æ—¶ï¼Œè¿™ä¸ªé—®é¢˜çš„é£é™©è¢«æ”¾å¤§äº†ã€‚å½“åœ¨Worker Threadä¸­æŒæœ‰Activityå¼•ç”¨æ—¶ï¼Œé™¤éWorker Threadå®Œæˆè¿ç®—ï¼ˆé€šå¸¸è¿™æ˜¯ä¸€é¡¹éå¸¸è€—æ—¶çš„æ“ä½œï¼‰ï¼Œå¦åˆ™Activityçš„å®ä¾‹ä¸ä¼šçœŸæ­£è¢«é‡Šæ”¾ã€‚ Implicit Reference of Activityé™¤äº†ä¸Šæ–‡æåˆ°çš„æ˜¾å¼å¼•ç”¨ï¼ˆexplicit referenceï¼‰ï¼Œè¿˜åº”è¯¥å½“å¿ƒå†…éƒ¨ç±»å¯¼è‡´çš„éšå¼å¼•ç”¨ï¼ˆimplicit referenceï¼‰ã€‚Androidä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³æ–¹æ¡ˆâ€”â€”WeakReference &amp; static å…³é”®å­—ã€‚ ä¸Šè¿°åœºæ™¯æ˜¯å¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºcrashçš„ä¸€ä¸ªåŸå› â€”â€”AsyncTaskæŒæœ‰ä¸€ä¸ªActivityçš„å¼•ç”¨ï¼Œè€Œè¿™ä¸ªActivityå®é™…ä¸Šå·²ç»å¤„äºinvalidçŠ¶æ€æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ‰§è¡Œè¿‡onDestroy()ï¼‰ï¼ŒAsyncTaskå´å¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œå½“AsyncTaskæ‰§è¡Œå®Œå®ƒæ‰€è¿è¡Œçš„ä»»åŠ¡ï¼Œè¯•å›¾æ“ä½œActivityçš„ç•Œé¢æ—¶ï¼Œè¿™ä¸ªActivityå®é™…ä¸Šå¹¶ä¸å¯ç”¨ã€‚è¿™å°±å¯¼è‡´äº†ä¸‹é¢çš„ç³Ÿç³•åœºæ™¯â€”â€” Donâ€™t Hold Referencesä¸è¦è¯•å›¾åœ¨UIçº¿ç¨‹å¤–ä¿å­˜ä»»ä½•UIå…ƒç´ çš„å¼•ç”¨ï¼ï¼ï¼ How We Do?æˆ‘ä»¬è¦éµå®ˆçš„å”¯ä¸€å‡†åˆ™æ˜¯ï¼šæ‰€æœ‰UIæ“ä½œï¼Œéƒ½åœ¨UIçº¿ç¨‹é‡Œè¿›è¡Œã€‚ Worker Threadå¯ä»¥é€šè¿‡callbackã€intentç­‰ä»»æ„è¿›ç¨‹é—´é€šä¿¡æ–¹æ³•æ¥å‘Šè¯‰UIçº¿ç¨‹â€”â€”æˆ‘éœ€è¦ä½ å¸®æˆ‘å˜æ›´ä¸€ä¸‹ç•Œé¢ã€‚ Tool in Android Studio 2.0å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°äº†è§£è¿è¡Œæ—¶Thread&amp;Memoryçš„æƒ…å†µï¼Œè¯·ä½¿ç”¨Android Studio 2.0ä¸­æä¾›çš„æœ‰åŠ›å·¥å…·ã€‚ ===Ending===","tags":[{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep2 Understanding Android Threading","date":"2016-02-23T01:49:39.000Z","path":"2016/02/23/Android-Performance-Patterns-s5ep2-Understanding-Android-Threading/","text":"ep2è®²è§£äº†å°†ThreadåŸå‹æ‰©å±•ä¸ºHandlerThreadçš„åŸç†ä¸å®è·µã€‚link å¤§å”çš„å¸½è¡«é€ å‹å¾ˆæœ‰èŒƒå„¿å•Šï¼ï¼ï¼ Build Worker Threadä¸€ä¸ªThreadï¼Œä»æœ¬è´¨ä¸Šè®²ï¼Œå°±æ˜¯å®Œæˆäº†ä¸€ä¸ªâ€œæ¥å—ä»»åŠ¡ï¼æ‰§è¡Œä»»åŠ¡ï¼å®Œæˆä»»åŠ¡â€çš„è¿‡ç¨‹ å¦‚æœæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªThreadå¯ä»¥åœ¨å®ƒçš„ç”Ÿå‘½å‘¨æœŸå†…å¤šåšä¸€äº›äº‹ï¼Œæ˜¯çš„ï¼Œå°½å¯èƒ½å‹æ¦¨è¿™ä¸ªThreadï¼Œæ¯•ç«Ÿæˆ‘ä»¬åœ¨å‰é¢è¦åˆ›å»ºå®ƒï¼Œåœ¨åé¢è¦æ‘§æ¯å®ƒï¼Œåœ¨è¿™ä¸­é—´è¦è®©å®ƒç‰©å°½å…¶ç”¨ã€‚ Do Work â€¦ Do Work â€¦ Do Work â€¦ ç°åœ¨è¿™ä¸ªThreadå·²ç»è¢«æˆåŠŸæ´—è„‘ï¼Œè¿›å…¥äº†æ— é™Do Workçš„å¾ªç¯ä¸­ï¼Œå°±åƒä¸€å¤´æ‹‰ç£¨çš„æ¯›é©´ï¼Œæ˜¯æ—¶å€™å‘ç£¨ç›˜é‡ŒåŠ ä¸Šä¸€äº›è°·å­äº†ã€‚æˆ‘ä»¬å°†å¾…å¤„ç†çš„å·¥ä½œç§°ä¸ºTaskï¼Œè¿™äº›Taskè¢«ç»„ç»‡åœ¨ä¸€ä¸ªå«åšWorkQueueçš„é˜Ÿåˆ—ä¸­ã€‚ åŠ è°·å­çš„å·¥ä½œï¼Œäº¤ç”±å¦ä¸€ä¸ªThreadè¿›è¡Œâ€”â€”æŠŠä¸“ä¸šçš„äº‹æƒ…äº¤ç»™ä¸“ä¸šçš„è§’è‰²å»åšã€‚ Android Implementationsäº†è§£è¿‡ä¸Šé¢çš„åŸºæœ¬åŸç†ï¼Œæˆ‘ä»¬çœ‹çœ‹Androidä¸­æ˜¯å¦‚ä½•å®ç°è¿™ä¸€æœºåˆ¶çš„ã€‚ é¦–å…ˆæ˜¯Looperï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡ä¸­çš„Worker Threadï¼Œå¹²æ´»å„¿çš„çº¿ç¨‹ã€‚ ç„¶åæ˜¯MessageQueueï¼ŒLooperåœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šä¸æ–­ä»MessageQueueé‡Œæ‹‰å–ä»»åŠ¡æ‰§è¡Œã€‚ Handlerè¢«ç”¨æ¥å‘å·¥ä½œé˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡ æ¯ä¸€ä¸ªè¢«æ·»åŠ çš„å•å…ƒä»»åŠ¡ï¼ˆUnit of Workï¼‰ï¼Œå¯ä»¥æ˜¯Intent/runnable/message è¿™æ ·ä¸€æ•´å¥—ç³»ç»Ÿï¼Œå°±æ„æˆäº†Androidä¸­å¾ˆé‡è¦çš„Handleræœºåˆ¶ã€‚æ³¨æ„åˆ°ï¼Œåœ¨Handlerä¹‹å¤–è¿˜æœ‰ä¸€ä¸ªHandler Threadï¼Œå®ƒç”¨æ¥å¤„ç†Taskæ‰§è¡Œç»“æœã€‚ When An App Startså½“æˆ‘ä»¬çš„Appå¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¸ºå®ƒåˆ†é…äº†ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œå¹¶ä¸”å¯åŠ¨äº†MainThreadï¼ŒMainThreadæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªHandlerThreadï¼Œå®ƒæœ‰ä¸”åªæœ‰ä¸€ä¸ªMainLooperã€‚ MainThreadä¹Ÿæ˜¯UI Threadï¼Œåœ¨å®ƒè¿è¡Œè¿‡ç¨‹ä¸­å‡ ä¹ä¼šå¤„ç†ä¸€åˆ‡æ“ä½œï¼ˆåœ¨ep1ä¸­å·²ç»æåˆ°è¿‡ï¼‰ ç³»ç»Ÿæ¶ˆæ¯ï¼ˆç¿»è½¬æ‰‹æœºï¼Œç•Œé¢é‡æ–°ç»˜åˆ¶ï¼‰ ç”¨æˆ·è¾“å…¥ï¼ˆä¸‹æ»‘åˆ—è¡¨ï¼‰ å…¶å®ƒåº”ç”¨ä¼ è¿‡æ¥çš„ä¿¡æ¯ è¦çŸ¥é“ï¼ŒMainThreadä¸€ä¸ªå¾ˆé‡è¦çš„ä»»åŠ¡æ˜¯è´Ÿè´£UIç»˜åˆ¶ï¼Œå¦‚æœäº¤ç»™MainThreadå¤ªå¤šçš„ä»»åŠ¡ï¼Œä¼šå½±å“æ¯16msä¸€æ¬¡çš„UIæ¸²æŸ“ï¼Œé€ æˆANRã€‚ Choose Your Tool â€“ No Silver Bullet AsyncTaskï¼šå°†ä»»åŠ¡åˆ‡æ¢åˆ°UIçº¿ç¨‹ï¼éUIçº¿ç¨‹ HandlerThreadï¼šå½“éœ€è¦Callbackæ—¶ä½¿ç”¨ ThreadPoolï¼šæ‰§è¡Œæ›´ç»†åŒ–çš„å•å…ƒä»»åŠ¡ IntentServiceï¼šç”¨ä»¥æ‰§è¡Œåå°ä»»åŠ¡ï¼Œæˆ–å°†Intentä»»åŠ¡ä»UIçº¿ç¨‹ä¸­æå–å‡ºæ¥æ‰§è¡Œ SystraceSystrace æ˜¯SDKæä¾›ã€ç”¨äºæŸ¥çœ‹CPUæ“ä½œè€—æ—¶çš„å·¥å…·ï¼Œå½“ä½ åœ¨æµ‹è¯•åº”ç”¨æ—¶å‘ç°äº†ä¸¢å¸§ç°è±¡ï¼Œéœ€è¦æ·±ç©¶åŸå› çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡Systraceè·å¾—ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ã€‚ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"Android Performance Patterns - s5ep1 Threading Performance 101","date":"2016-02-23T01:00:00.000Z","path":"2016/02/23/Android-Performance-Patterns-s5ep1-Threading-Performance-101/","text":"Season 5 ep 1 ä»‹ç»äº†Androidç³»ç»Ÿä¸­çº¿ç¨‹ä¸UIæ¸²æŸ“ä¸€äº›æœ€åŸºç¡€çš„çŸ¥è¯†ã€‚link Main Threadä¸»çº¿ç¨‹æ˜¯Androidä¸­æœ€é‡è¦çš„çº¿ç¨‹ï¼Œæ‰¿æ‹…äº†å“åº”ç³»ç»Ÿæ—¶é—´ã€å¤„ç†è¾“å…¥ã€ç»˜åˆ¶UIç­‰é‡è¦ä»»åŠ¡ã€‚ UI drawing and frame droppingå‡ºäºç®€åŒ–çš„è€ƒè™‘ï¼Œandroidç³»ç»Ÿå°†å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½æ”¾åœ¨äº†ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚ç„¶è€Œå…¶ä¸­ä¸€ä¸ªä»»åŠ¡æ˜¯ä¸å…¶å®ƒæœ‰æ‰€ä¸åŒçš„ â€”â€” UI æ¸²æŸ“ã€‚å› ä¸ºUIæ¸²æŸ“ä¸€æ—¦å‡ºç°å¡é¡¿ï¼Œç”¨æˆ·ä¼šç«‹åˆ»æ„ŸçŸ¥åˆ°ANRï¼Œæä¸å‹å¥½ã€‚ä¸‹é¢æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªè¾“å…¥å¹¶å¤„ç†çš„è¿‡ç¨‹ï¼Œçœ‹ä¸€ä¸‹å†—é•¿çš„æ“ä½œæ˜¯å¦‚ä½•é˜»å¡UIç»˜åˆ¶çš„ã€‚ My Awesome Code!!! äººçœ¼èƒ½æ„ŸçŸ¥çš„æµç•…UIç•Œé¢å¿…é¡»ä¿æŒåœ¨60fpsï¼Œæ„å‘³ç€æ¯16mså°±è¦æœ‰ä¸€æ¬¡ç»˜åˆ¶å®Œæˆã€‚ ä¸€æ—¦ä¸»çº¿ç¨‹è¢«æŸä¸ªæ“ä½œé˜»å¡è¶…è¿‡äº†16msï¼ŒåŠ¿å¿…ä¼šä¸¢æ‰ï¼ˆè‡³å°‘ï¼‰ä¸€æ¬¡ç»˜åˆ¶ï¼Œè¿™å°±æ˜¯ dropping frameã€‚ Solve frame droppingè§£å†³ä¸Šè¿°é—®é¢˜çš„æ€è·¯å¾ˆç®€å•ï¼šæ—¢ç„¶ä¸»çº¿ç¨‹å¿…é¡»ä¿è¯æµç•…è¿è¡Œï¼Œé‚£æˆ‘ä»¬å°±åœ¨è‡ªå·±çš„worker threadé‡Œå¤„ç†è¿™äº›æ¼äººçš„Lame Workï¼ˆç˜¸è…¿å·¥ä½œï¼‰å¥½äº†ã€‚ æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§ç”±ç³»ç»Ÿæä¾›çš„è§£å†³æ–¹æ¡ˆï¼Œæ³¨æ„å®ƒä»¬ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚ Be Careful!å½“ä½ å†³å®šä½¿ç”¨å†…éƒ¨ç±»æ¥å®Œæˆä¸Šè¿°æ“ä½œæ—¶ï¼Œä¸€å®šè¦æ³¨æ„è¿™å¯èƒ½å¼•èµ·å†…å­˜æ³„æ¼ï¼å› ä¸ºéé™æ€å†…éƒ¨ç±»å®ä¾‹ä¼šä¿å­˜å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œè€Œåœ¨ç§»åŠ¨ç³»ç»Ÿè¿™ç§å†…å­˜æœ‰é™çš„è®¾å¤‡ä¸Šï¼Œå†…å­˜æ³„æ¼æ˜¯éå¸¸å¯æ€•çš„ã€‚ ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ç”¨é™æ€å†…éƒ¨ç±»æ›¿ä»£ï¼Œå¹¶ä¸”å†…éƒ¨ä»¥WeakReferenceä¿å­˜Activityçš„å¼•ç”¨ã€‚ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"ä¹”-éŸ¦å¾·å¥ç¾è®­ç»ƒæ³•åˆ™","date":"2016-02-19T08:26:42.000Z","path":"2016/02/19/ä¹”-éŸ¦å¾·å¥ç¾è®­ç»ƒæ³•åˆ™/","text":"ä¹”Â·éŸ¦å¾·ï¼Œç”·ï¼Œ1922å¹´å‡ºç”Ÿï¼ŒåŠ æ‹¿å¤§è£”å¥ç¾å† å†›ï¼Œè¢«ç§°ä¸ºâ€œå¥ç¾å† å†›ä¹‹çˆ¶â€ã€â€œç°ä»£å¥ç¾ä¹‹çˆ¶â€ï¼Œä»–æ›¾åˆ›åŠäº†éŸ¦å¾·è¿åŠ¨å™¨æå…¬å¸ï¼Œæ˜¯ã€Šè‚Œè‚‰ä¸å¥ç¾ã€‹ã€ã€Šå½¢ä½“ç¾ã€‹å’Œã€Šç”·å­å¥åº·ã€‹ç­‰å¥ç¾æ‚å¿—ä¸»ç¼–ï¼Œå¼€åˆ›äº†å½“ä»Šæœ€å…·å½±å“åŠ›å’Œæœ€é«˜æ°´å‡†çš„èŒä¸šå¥ç¾æ¯”èµ›â€”â€”â€œå¥¥æ—åŒ¹äºšå…ˆç”Ÿâ€å¤§èµ›ï¼Œå¹¶è®¾ç«‹äº†é«˜é¢å¥–é‡‘ã€‚ä»–æ˜¯é˜¿è¯ºå¾·Â·æ–½ç“¦è¾›æ ¼çš„æ©å¸ˆï¼Œå¼€åˆ›äº†ä¹”Â·éŸ¦å¾·è®­ç»ƒæ³•åˆ™ï¼Œæ¨åŠ¨äº†ä¸–ç•Œå¥ç¾è¿åŠ¨çš„å‘å±•ã€‚ åœ¨ç¬”è€…çœ‹æ¥ï¼ŒéŸ¦å¾·çš„æˆåŠŸä¹‹å¤„ï¼Œä¸ä»…ä»…åœ¨äºä»–æ˜¯ä¸€ä¸ªä¼˜ç§€çš„bodybuilderï¼Œæ›´æ˜¯å› ä¸ºä»–æ¨å¹¿äº†å¥èº«å¥ç¾çš„è®­ç»ƒæ³•åˆ™ã€åˆ›åŠäº†ä¸¾ä¸–é—»åçš„å¥¥èµ›ã€å¹¶ä¸”åŸ¹è‚²äº†æ–½ç“¦è¾›æ ¼è¿™æ ·ä¼Ÿå¤§çš„å¥ç¾è€…ï¼Œä¸å¾—ä¸æçš„æ˜¯ï¼ŒéŸ¦å¾·æ˜¯ä¸€ä½æˆåŠŸçš„å•†äººã€‚ éŸ¦å¾·å¥ç¾è®­ç»ƒæ³•åˆ™å…±32æ¡ï¼Œåˆ†ä¸ºåˆã€ä¸­ã€é«˜çº§ä¸‰ä¸ªé˜¶æ®µï¼Œä»”ç»†é˜…è¯»ï¼Œç§‘å­¦è®­ç»ƒï¼Œå®šä¼šå—ç›Šæ— ç©·ã€‚ å…¥é—¨é¡»çŸ¥å™¨æ¢°é¡»çŸ¥ å…¨å¥—å®¶åº­å¥èº«å™¨æ¢°åŒ…æ‹¬ï¼šå§æ¨å‡³ã€è…¹è‚Œæ¿ã€æ é“ƒå’Œå“‘é“ƒå„ä¸€å‰¯ã€‚å¯ä»¥æŒ‰ä¸ªäººæ¡ä»¶é…ç½®å…¶å®ƒå™¨æ¢°ã€‚ æœè£…é¡»çŸ¥ å®½æ¾èˆ’é€‚ï¼Œä¸ä¼šå¦¨ç¢åŠ¨ä½œï¼ˆåŠ¡å¿…è¦ç©¿æ¯”è¾ƒèˆ’é€‚çš„å†…è£¤ï¼‰ï¼› ä¿è¯é€‚å®œçš„ä½“æ¸©ï¼› æœ€å¥½ç©¿é‹ï¼Œä¿æŠ¤è¸å…³èŠ‚ï¼› è¿›è¡Œè´Ÿé‡è®­ç»ƒæ—¶ï¼Œä¸ºäº†ä¿æŠ¤è…°èƒŒéƒ¨ä½ï¼Œè…°é—´æœ€å¥½æ‰ä¸Šä¸¾é‡çš®å¸¦ï¼› é”»ç‚¼é¡»çŸ¥ æ¸è¿›å¢é‡ã€‚åˆç»ƒè€…å¯ä»25ï¼…-30ï¼…æœ€å¤§é‡é‡å¼€å§‹è¿›è¡Œè®­ç»ƒã€‚ æ³¨æ„åŠ¨ä½œçš„è§„èŒƒæ€§å’ŒèŠ‚å¥æ„Ÿã€‚æ¯ä¸ªåŠ¨ä½œè¦ä½¿è‚Œè‚‰å……åˆ†ä¼¸å±•å’Œå½»åº•æ”¶ç¼©ï¼Œä¸èƒ½ç”¨å€ŸåŠ›çš„æ–¹æ³•è¿›è¡Œç»ƒä¹ ã€‚åœ¨æœ‰ä¸€å®šç»éªŒåï¼Œåˆç»ƒè€…å¯å¼€å§‹åœ¨æœ€åä¸€ç»„æˆ–æœ€åå‡ æ¬¡ç»ƒä¹ ä¸­ï¼Œå¯¹è¯¥è‚Œè‚‰é‡‡ç”¨åŠ©åŠ›çš„æ–¹æ³•ã€‚åœ¨æ¯ä¸ªåŠ¨ä½œä¸­éƒ½è¦é›†ä¸­ç²¾ç¥ï¼Œæœ‰åŠ©äºè°ƒåŠ¨æ›´å¤šçš„è‚Œçº¤ç»´å‚åŠ ç”¨åŠ›ã€‚ æ³¨æ„å§¿åŠ¿ã€‚åœ¨è´Ÿé‡ç»ƒä¹ ä¸­ï¼Œè¦ä¿æŒä¸¤è¾¹é‡é‡çš„å¹³è¡¡ï¼Œä¸¤çœ¼å¹³è§†ï¼Œä¸¤è„šè‡ªç„¶å¼€ç«‹ï¼Œèº«ä½“ä¸Šä¸‹ç§»åŠ¨è¿‡ç¨‹ä¸­å§‹ç»ˆä¿æŒå¤´éƒ¨æ­£ç›´ã€‚ æ§åˆ¶åŠ¨ä½œé€Ÿç‡ã€‚åœ¨è®­ç»ƒä¸­ï¼Œæ¯ç»„é—´é—´æ­‡æ—¶é—´æ˜¯60-90ç§’ï¼Œå¯ä»¥ä¿æŒä½“æ¸©ï¼Œé¿å…è‚Œè‚‰ä¼¤å®³ï¼Œè¿˜èƒ½ä½¿å¤§é‡è¡€æ¶²é›†ä¸­åˆ°è‚Œè‚‰ä¸­å»ã€‚åšåŠ¨ä½œæ—¶ï¼Œä¸Šä¸¾å’Œæ”¾ä¸‹çš„é€Ÿåº¦å¿…é¡»ç¼“æ…¢ï¼Œä¸”æœ‰èŠ‚å¥ã€‚è‹¥ä¸¾èµ·æ—¶é—´ä¸º2-3ç§’ï¼Œåˆ™æ”¾ä¸‹æ—¶é—´ä¸º4ç§’ã€‚æŒæ¡äº†æ­£ç¡®çš„æŠ€æœ¯åŠ¨ä½œåï¼Œå¯é€‚å½“åŠ å¿«åŠ¨ä½œã€‚ ä¸ºäº†å‡è½»è‚Œè‚‰é…¸ç—›ï¼Œåœ¨è®­ç»ƒä¸­è¦ç©¿è¶³å¤Ÿçš„è¡£æœä»¥ä½¿èº«ä½“ä¿æŒé€‚å®œçš„ä½“æ¸©ï¼Œå¹¶åœ¨è®­ç»ƒåæ´—æ¸©æ°´æµ´ï¼Œç”¨æ©¡èƒ¶çš®è‚¤åˆ·æŒ‰æ‘©å…¨èº«ã€‚ å‘¼å¸ç‰¹åˆ«é‡è¦ã€‚é€šå¸¸å½“ç”¨åŠ›æ—¶å‘¼æ°”ï¼Œåœ¨æ”¾æ¾è¿˜åŸæ—¶å¸æ°”ï¼›èƒ¸è…”è¢«æ‰©å¤§æ—¶å¸æ°”ï¼Œèƒ¸è…”å—å‹æ—¶å‘¼æ°”ã€‚ è¡¥å……é«˜è´¨é‡çš„è›‹ç™½è´¨ã€ç»´ç”Ÿç´ ã€çŸ¿ç‰©è´¨å’Œä¸ç»è¿‡ç²¾ç‚¼çš„ç¢³æ°´åŒ–åˆç‰©ï¼ˆç²—ç²®ï¼‰ï¼› é¥®å¤§é‡çš„çº¯å¼€æ°´ï¼ˆæ¯å¤©è‡³å°‘12-16æ¯å®¹é‡ä¸º30æ¯«å‡çš„æ°´ï¼‰ï¼› æŒä¹‹ä»¥æ’ï¼› è®¡åˆ’é¡»çŸ¥ ä¿è¯è¶³å¤Ÿçš„ç¡çœ å’Œä¼‘æ¯ï¼Œæ™šä¸Šç¡çœ æ—¶é—´çº¦ä¸º6-10å°æ—¶ï¼Œæœ‰æ¡ä»¶æœ€å¥½ç™½å¤©å°ç¡ä¸€ä¼šå„¿ï¼› æœ€åˆé˜¶æ®µæ¯å‘¨ç»ƒä¸‰å¤©ï¼Œæ¯éš”ä¸€å¤©é”»ç‚¼ä¸€æ¬¡ï¼› æœ€å¥½çš„è®­ç»ƒæ—¶é—´æ˜¯æ—¥å¸¸å­¦ä¹ å’Œå·¥ä½œä¹‹ä½™ï¼Œä¸”ç²¾åŠ›æœ€ä½³æ—¶ï¼Œå°½é‡å®‰æ’åœ¨æ¯å¤©åŒä¸€æ—¶é—´é”»ç‚¼ï¼› åˆ¶è®¢è¯¾ç¨‹è®¡åˆ’æ—¶å¿…é¡»è€ƒè™‘å¯¹æœ‰ç¼ºé™·éƒ¨ä½çš„çªå‡ºè®­ç»ƒï¼Œä½†ä¸æå€¡åç»ƒæœ‰ç¼ºé™·éƒ¨ä½ã€‚åˆç»ƒè€…åº”æŒ‰è¯¾ç¨‹å†…å®¹è®­ç»ƒè‡³å°‘å…­ä¸ªæœˆï¼Œç»ä¸èƒ½åœ¨åˆç»ƒçš„å…­ä¸ªæœˆå†…å®‰æ’é‡ç‚¹éƒ¨ä½çš„çªå‡ºè®­ç»ƒã€‚ ç»ƒä¹ æ¬¡æ•° ä½æ¬¡æ•°ï¼ˆ1-5æ¬¡ï¼‰ï¼šä¸»è¦å¢é•¿ä½“åŠ›å’ŒåŠ›é‡ï¼› ä¸­æ¬¡æ•°ï¼ˆ8-12æ¬¡ï¼‰ï¼šä¸»è¦å¢é•¿è‚Œè‚‰å—ã€çº¿æ¡å’Œè€åŠ›ï¼› é«˜æ¬¡æ•°ï¼ˆ15æ¬¡ä»¥ä¸Šï¼‰ï¼šä¸»è¦å¢å¼ºè‚Œè‚‰è€åŠ›ã€çº¿æ¡å’Œå‡ç¼©è‚Œè‚‰å—ï¼› å¦‚æœåšè¾ƒé«˜æ¬¡æ•°ï¼ˆ20æ¬¡ä»¥ä¸Šï¼‰å¹¶é‡‡ç”¨ä¸€ç§è¿ç»­çš„å¾ªç¯è®­ç»ƒï¼Œç»„ä¸ç»„ç»‡é—´æ²¡æœ‰ä¼‘æ¯ï¼Œè¿˜å¯ä»¥å¢å¼ºå¿ƒè„å’Œå‘¼å¸ç³»ç»Ÿçš„åŠŸèƒ½ã€‚ ç²¾ç¥å› ç´  è®­ç»ƒæ—¶é›†ä¸­ç²¾åŠ›ï¼Œæ’é™¤æ‚å¿µã€‚å¹³æ—¶åœ¨è„‘æµ·é‡Œå¡‘é€ ä½“å‹ï¼Œå¹¶ä¸ºä¹‹åŠªåŠ›ï¼Œä¿æŒæ„‰å¿«çš„å¿ƒæƒ…ã€‚ è®­ç»ƒä¼´ä¾£ ä¾ä¸ªäººçˆ±å¥½ï¼Œé€‰æ‹©æ˜¯å¦è¦ä¼´ä¾£æˆ–è°åšä¼´ä¾£ã€‚ æœ¬èƒ½è®­ç»ƒï¼è·Ÿç€æ„Ÿè§‰èµ° é‡è§†è‡ªèº«çš„èº«ä½“æ„Ÿè§‰ï¼Œåœ¨ä½“èƒ½å…è®¸çš„æƒ…å†µä¸‹ï¼Œå……åˆ†æ»¡è¶³è‡ªèº«çš„æ„¿æœ›ï¼Œä½†ä¸è¦æœ‰æ‡’æƒ°å’Œè®­ç»ƒè¿‡åº¦ã€‚è¿™æ ·æœ‰åˆ©äºä¿æŒè‡ªå·±è¾ƒé«˜çš„æƒ…ç»ªæ°´å¹³ã€‚ åˆçº§ç¯‡ æ¸å¢è¶…è´Ÿè·è®­ç»ƒåŸåˆ™ ï¼ˆProgressive Overload Training Principleï¼‰ ä½¿è‚Œè‚‰é€æ¸å¢åŠ è´Ÿè·ï¼Œå¹¶è®©è‚Œè‚‰å—åˆ°æ›´å¼ºçƒˆçš„è®­ç»ƒæ˜¯å¢å¼ºä»»ä½•èº«ä½“ç´ è´¨ï¼ˆåŠ›é‡ã€è‚Œè‚‰å›´åº¦ã€è€ä¹…åŠ›ç­‰ï¼‰çš„åŸºç¡€ã€‚å¦‚ï¼šè¦å¢é•¿åŠ›é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨è¾ƒå¤§çš„é‡é‡ï¼›è‹¥å¢åŠ è‚Œè‚‰å›´åº¦ï¼Œä¸ä»…è¦é‡‡ç”¨è¶Šæ¥è¶Šé‡çš„è´Ÿè·ï¼Œè¿˜è¦å¢åŠ è®­ç»ƒç»„æ•°å’Œæ¯å‘¨çš„è®­ç»ƒæ¬¡æ•°ï¼›å¦‚è¦å¢åŠ å±€éƒ¨è‚Œè‚‰çš„è€ä¹…åŠ›ï¼Œå°±è¦é€æ¸å‡å°‘ç»„ä¸ç»„ä¹‹é—´çš„é—´æ­‡æ—¶é—´æˆ–å¢åŠ è®­ç»ƒç»„æ•°å’Œè®­ç»ƒæ¬¡æ•°ã€‚ä¸€åˆ‡éƒ½è¦é€æ¸å¢é•¿ã€‚è¶…è´Ÿè·è®­ç»ƒæ˜¯æ‰€æœ‰ä½“å‹è®­ç»ƒæ³•çš„åŸºç¡€ã€‚ æ³¨ï¼šé€šå¸¸åœ¨è¶…åŠ›é‡æˆ–å¤§å¼ºåº¦è®­ç»ƒä¸­ä½¿ç”¨ã€‚ å¤šç»„æ•°è®­ç»ƒåŸåˆ™ ï¼ˆSet System Training Principleï¼‰ å¤šç»„æ•°è®­ç»ƒåŸåˆ™ï¼ˆæœ‰æ—¶æ¯ä¸ªåŠ¨ä½œæœ€å¤š3-4ç»„ï¼‰ï¼Œä»¥ä¾¿ä½¿æ¯ä¸ªè‚Œè‚‰ç¾¤éƒ½èƒ½å®Œå…¨å½»åº•åœ°å¾—åˆ°é”»ç‚¼ï¼Œå¹¶è¾¾åˆ°æœ€å¤§é™åº¦çš„è‚Œè‚‰è†¨èƒ€ã€‚ æ³¨ï¼šä¸åŒçš„è®­ç»ƒè¯¾ç¨‹ä¸­ï¼Œè¦æ›´å…·è‡ªå·±çš„ä½“åŠ›æƒ…å†µå’Œæ‰€é”»ç‚¼çš„éƒ¨ä½çš„å¼ºå¼±æƒ…å†µå®‰æ’åˆé€‚çš„è®­ç»ƒç»„æ•°ã€‚ å­¤ç«‹è®­ç»ƒåŸåˆ™ï¼ˆIsolation Training Principleï¼‰ ä¸åŒçš„è‚Œè‚‰ç¾¤å¯ä»¥ä¸€èµ·ç»ƒæˆ–ç›¸å¯¹åœ°å„è‡ªå•ç‹¬åˆ†å¼€è®­ç»ƒã€‚åœ¨å®ŒæˆåŠ¨ä½œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€å—è‚Œè‚‰éƒ½æœ‰å®ƒä»¬å„è‡ªçš„ç”¨åŠ›ç‰¹ç‚¹ï¼Œä½†æ€»æœ‰æŸè‚Œè‚‰ç¾¤æ˜¯ä¸»è¦ç”¨åŠ›çš„ï¼Œå…¶å®ƒè‚Œè‚‰èµ·ç€ååŒä½œç”¨æˆ–ç›¸å¯¹å…³èŠ‚çš„å›ºå®šä½œç”¨ï¼Œæˆ–å¯¹æŠ—ä½œç”¨ã€‚å¦‚æœæ‚¨è¦æœ€å¤§é™åº¦åœ°å•ç‹¬å‘å±•æŸä¸€éƒ¨ä½çš„è‚Œè‚‰ï¼Œå°±è¦å°½å¯èƒ½ä½¿ä¸»è¦ç”¨åŠ›çš„è‚Œè‚‰ä¸å…¶å®ƒè‚Œè‚‰çš„æ´»åŠ¨åˆ†å¼€ã€‚å¯æŒ‰è§£å‰–ä½ç½®è¿›è¡Œå˜æ¢ï¼Œå¦‚æ–¯é«˜ç‰¹ï¼ˆæ–œæ‰˜ï¼‰å¼¯ä¸¾å¯¹è‡‚éƒ¨çš„å±ˆè‚Œé”»ç‚¼å°±æ¯”ç”¨çª„æ¡é‡é”¤ä¸‹æ‹‰çš„æ•ˆæœè¦å¥½ã€‚ æ³¨ï¼šé€‚åˆäºåœ¨éœ€è¦é‡ç‚¹å‘å±•çš„è‚Œè‚‰è®­ç»ƒä¸­ä½¿ç”¨ã€‚ è‚Œè‚‰å…¨é¢è®­ç»ƒåŸåˆ™ï¼ˆMuscle Priority Training Principleï¼‰ è¦ä½¿è‚Œè‚‰ä¸æ–­åœ°å¢é•¿ï¼Œå°±ä¸èƒ½é‡‡ç”¨æŸä¸ªå›ºå®šä¸å˜çš„é”»ç‚¼è¯¾ç¨‹ã€‚å¦‚æœå›ºå®šé‡‡ç”¨ç›¸åŒçš„åŠ¨ä½œã€ç»„æ•°ã€æ¬¡æ•°å’Œè§’åº¦ï¼Œå°±ä¸èƒ½ä½¿è‚Œè‚‰è·å¾—å…¨é¢çš„å¼ºåº¦åˆºæ¿€ä»¥ä½¿è‚Œè‚‰å¢é•¿ã€‚ æ³¨ï¼šé€‚åˆåœ¨å¹³æ—¶çš„è®­ç»ƒè¯¾ç¨‹ä¸­ä½¿ç”¨ã€‚ ä¸­çº§ç¯‡ é‡ç‚¹è‚Œè‚‰ä¼˜å…ˆè®­ç»ƒåŸåˆ™ï¼ˆMuscle Priority Training Principleï¼‰ è–„å¼±éƒ¨ä½çš„é”»ç‚¼åº”åœ¨è®­ç»ƒè¯¾åˆšå¼€å§‹ä½“åŠ›æœ€æ—ºç››ã€ç²¾åŠ›æœ€å……æ²›çš„æ—¶å€™è¿›è¡Œï¼Œä»¥æ‰¿å—æœ€å¤§çš„åˆºæ¿€å¼ºåº¦å’Œè¿åŠ¨é‡ã€‚ æ³¨ï¼šé€‚åˆåœ¨æ¯æ¬¡è®­ç»ƒè¯¾æ‰€éœ€é‡ç‚¹è®­ç»ƒçš„è‚Œè‚‰ã€‚ é‡‘å­—å¡”è®­ç»ƒåŸåˆ™(Pyramiding Training Principle) è‚Œè‚‰çº¤ç»´çš„å¢é•¿ä¸åŠ›é‡çš„å¢é•¿æ˜¯é˜»åŠ›è®­ç»ƒçš„ç»“æœã€‚ç†è®ºä¸Šæ¥è®²ï¼Œå¦‚æœåœ¨ä¸€ä¸ªåŠ¨ä½œä¸­èƒ½ç”¨æœ€å¤§çš„é‡é‡åš8æ¬¡ï¼Œå¹¶èƒ½åšå‡ ç»„ï¼Œé‚£ä¹ˆå¯¹å¢é•¿ä½“å›´å’ŒåŠ›é‡æœ‰å¾ˆå¤§æ•ˆæœã€‚ä½†æ²¡åšçƒ­èº«æ´»åŠ¨å°±ç”¨å¤§é‡é‡æ¥ç»ƒï¼Œä¼šæœ‰æ½œåœ¨çš„å±é™©ã€‚å› æ­¤åº”ä»æå°é‡é‡å¼€å§‹é€æ¸åœ°å¢å¤§è´Ÿè·é‡é‡ã€‚é‡‘å­—å¡”è®­ç»ƒæ³•å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚ï¼šå¼€å§‹ç”¨60ï¼…æœ€å¤§é‡é‡åš15æ¬¡ï¼Œç„¶åå†å¢åŠ é‡é‡ï¼Œè¯•åš10-12æ¬¡ï¼Œæœ€ååŠ é‡åˆ°80ï¼…ï¼Œæœ€å¤šåš5-6æ¬¡ï¼Œä¼šè·å¾—å¾ˆå¥½çš„æ•ˆæœï¼Œé¿å…å—ä¼¤ã€‚ æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶çš„è®­ç»ƒè¯¾ç¨‹ï¼Œæˆ–è¶…é‡è®­ç»ƒè¯¾ç¨‹ã€‚ åˆ†åŒ–è®­ç»ƒåŸåˆ™ï¼ˆSplit System Training Principleï¼‰ å½“è¿ç»­ä¸‰ä¸ªæœˆçš„æ¯æ˜ŸæœŸä¸‰æ¬¡è®­ç»ƒä»¥åï¼Œå°±å¯ä»¥è¿›è¡Œè¶…å¼ºåº¦è®­ç»ƒã€‚å¯ä»¥æŠŠå…¨èº«åˆ†æˆä¸Šèº«å’Œä¸‹èº«ä¸¤éƒ¨åˆ†æ¥è®­ç»ƒï¼Œæ¯ä¸ªéƒ¨åˆ†å¯ä»¥å¢åŠ åŠ¨ä½œå’Œè®­ç»ƒç»„æ•°ï¼Œè¿™æ ·æ¯ä¸ªéƒ¨åˆ†è‚Œè‚‰å°±å¯ä»¥å¾—åˆ°æ›´å¤šçš„é”»ç‚¼ã€‚åˆ†åŒ–è®­ç»ƒæ–¹æ³•æ˜¯ï¼šæŠŠä¸€ä¸ªæ˜ŸæœŸçš„ç¬¬ä¸€æ¬¡è®­ç»ƒè¯¾å…ˆå®‰æ’é”»ç‚¼ä¸Šèº«çš„8ä¸ªåŠ¨ä½œï¼Œé‡‡ç”¨è¶…å¼ºåº¦çš„è®­ç»ƒï¼›åœ¨å½“å¤©çš„ç¬¬äºŒæ¬¡è®­ç»ƒè¯¾ä¸­åªåšä¸‹èº«çš„6-8ä¸ªåŠ¨ä½œï¼Œé‡‡å–åŒæ ·çš„è¶…å¼ºåº¦è®­ç»ƒã€‚å¦‚æœé‡‡ç”¨æ¯å‘¨ç»ƒä¸‰å¤©çš„æ–¹æ³•ï¼ŒåŒä¸€æ¬¡è®­ç»ƒè¯¾ä¸­åŒæ—¶ç»ƒä¸Šèº«å’Œä¸‹èº«ï¼Œè‚Œè‚‰çš„åˆºæ¿€å¼ºåº¦å°±å¾ˆéš¾ä¸Šå»ã€‚åˆ†åŒ–è®­ç»ƒå¯¹æ¯ä¸ªéƒ¨ä½è‚Œè‚‰çš„é”»ç‚¼å¼ºåº¦ä¼šæ›´å¤§ï¼Œæ—¶é—´ä¼šæ›´é•¿ã€‚ æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒé˜¶æ®µï¼Œæˆ–å¢é•¿è‚Œè‚‰å—çš„è®­ç»ƒè¯¾ä¸­ã€‚ å±€éƒ¨é›†ä¸­è®­ç»ƒåŸåˆ™ï¼ˆFlushing Training Principleï¼‰ è®­ç»ƒä¸­å¿…é¡»ä½¿å¤§é‡è¡€æ¶²é›†ä¸­åˆ°è¢«é”»ç‚¼çš„è‚Œè‚‰ä¸­å»ï¼Œæ‰èƒ½ä½¿è‚Œè‚‰æ›´å¥½åœ°å¢é•¿ã€‚å¦‚ï¼šåœ¨é”»ç‚¼èƒ¸éƒ¨æ—¶ï¼Œè¯¾ç¨‹ä¸­å®‰æ’çš„3-4ä¸ªåŠ¨ä½œè¦è¿ç»­è¿›è¡Œï¼Œä¸­é—´ä¸æ’å…¥é”»ç‚¼å…¶å®ƒéƒ¨ä½è‚Œè‚‰çš„åŠ¨ä½œï¼Œä¸æ–­åœ°ä½¿è¡€æ¶²é›†ä¸­åˆ°è¿™ä¸ªéƒ¨ä½ï¼Œä»è€Œè¾¾åˆ°å±€éƒ¨è‚Œè‚‰å……åˆ†è†¨èƒ€çš„çŠ¶æ€ã€‚ æ³¨ï¼šé€‚åˆäºé‡ç‚¹å‘å±•æˆ–å¼ºåŒ–æŸå—è‚Œè‚‰æ—¶ä½¿ç”¨ã€‚ åŒç»„åˆè®­ç»ƒåŸåˆ™ï¼ˆSupersets Training Principleï¼‰ è¿™æ˜¯éŸ¦å¾·æœ€è‘—åçš„è®­ç»ƒåŸåˆ™ä¹‹ä¸€ã€‚å‡ æŠŠä¸¤ä¸ªåŠŸèƒ½ç›¸å¯¹åº”çš„è‚Œè‚‰ç¾¤ç»“åˆåœ¨ä¸€èµ·é”»ç‚¼ã€‚å¦‚ï¼ŒæŠŠé”»ç‚¼è‚±äºŒå¤´è‚Œçš„å¼¯ä¸¾å’Œé”»ç‚¼è‚±ä¸‰å¤´è‚Œçš„è‡‚å±ˆä¼¸ç»“åˆèµ·æ¥å°±æ˜¯ä¸€ä¸ªåŒç»„åˆè®­ç»ƒã€‚åŒç»„åˆæ˜¯æŠŠä¸¤ä¸ªåŠŸèƒ½ç›¸å¯¹åº”çš„å•å—è‚Œè‚‰çš„åŠ¨ä½œè½®æµåœ°ç»ƒï¼Œä¸€ä¸ªåŠ¨ä½œç»ƒä¸€ç»„ï¼Œç»„ä¸ç»„ä¹‹é—´åªå…è®¸æœ‰æå°‘çš„é—´æ­‡æ—¶é—´æˆ–ä¸ä¼‘æ¯ï¼Œæ˜¯ç¥ç»ç³»ç»Ÿå¤„äºé›†ä¸­åˆºæ¿€çŠ¶æ€ã€‚ æ³¨ï¼šé€‚åˆäºé›†ä¸­é”»ç‚¼æŸéƒ¨ä½è‚Œè‚‰æˆ–å‡è„‚æ—¶ä½¿ç”¨ã€‚ å¤åˆç»„æ•°è®­ç»ƒåŸåˆ™ï¼ˆCompound Sets Training Principleï¼‰ åŒä¸€éƒ¨ä½çš„è‚Œè‚‰ç¾¤çš„åŒç»„åˆè®­ç»ƒï¼ˆå¦‚è¿ç»­ä¸¤ä¸ªç»ƒè‚±äºŒå¤´è‚Œçš„åŠ¨ä½œæˆä¸ºä¸€ä¸ªå¤åˆç»„æ•°è®­ç»ƒï¼‰ï¼Œå³åœ¨å±€éƒ¨è‚Œè‚‰è¿˜æ²¡æ¢å¤æ—¶ï¼Œä½¿å…¶è¿ç»­è¿›è¡Œè¶…å¼ºåº¦åˆºæ¿€ã€‚ æ³¨ï¼šå¯¹èµ›å‰å‡è„‚æˆ–åŠ å¤§æŸé”»ç‚¼éƒ¨ä½çš„è‚Œè‚‰å¼ºåº¦æ•ˆæœè¾ƒå¥½ã€‚ ç»¼åˆè®­ç»ƒåŸåˆ™ï¼ˆHolistic Training Principleï¼‰ ç»ä¸åŒæ–¹å¼ä½¿ä¸åŒéƒ¨ä½è‚Œè‚‰ç»†èƒçš„è›‹ç™½è´¨å’Œçƒ­èƒ½äº§ç”Ÿä¸åŒååº”ã€‚å½“è‚Œè‚‰çº¤ç»´é‡åˆ°è¾ƒå¤§é˜»åŠ›è´Ÿè·æ—¶ï¼Œè‚Œè‚‰çº¤ç»´å°±ä¼šå¢å¤§ï¼Œå³ç»è¿‡ä¸åŒè§’åº¦çš„é˜»åŠ›è´Ÿè·èƒ½ä¿ƒä½¿æ•´å—è‚Œè‚‰çš„ç»†èƒå¢å¤§ã€‚å› æ­¤ï¼Œå¿…é¡»é‡‡ç”¨å„ç§ä¸åŒçš„åŠ¨ä½œå’Œè®­ç»ƒæ¬¡æ•°ã€‚ æ³¨ï¼šæ›´é€‚åˆäºé›†ä¸­å¯¹æŸå—é‡ç‚¹è‚Œè‚‰çš„çªå‡»è®­ç»ƒï¼Œä½†ä¸å®œé•¿æœŸä½¿ç”¨ã€‚ å¾ªç¯è®­ç»ƒåŸåˆ™(Cycle Training Principle) åœ¨å…¨å¹´è®­ç»ƒä¸­çš„æŸä¸€æ—¶æœŸï¼Œè®­ç»ƒè¯¾ç¨‹å¯é›†ä¸­å®‰æ’å¢é•¿è‚Œè‚‰å—å’ŒåŠ›é‡ï¼Œè€Œå¦ä¸€æ—¶æœŸå®‰æ’ä»¥å‡è½»è´Ÿè·ã€å¢åŠ è¯•ä¸¾æ¬¡æ•°ã€ç¼©çŸ­é—´æ­‡æ—¶é—´ï¼ˆä¼˜è´¨è®­ç»ƒï¼‰ä¸ºä¸»ã€‚å¯é¿å…æœºèƒ½å—ä¼¤å¹¶ä¿æŒè®­ç»ƒæ•ˆæœçš„ç¨³æ­¥æé«˜ã€‚ æ³¨ï¼šé€‚ç”¨äºå‡è„‚æˆ–æé«˜å¿ƒè¡€ç®¡ç³»ç»Ÿçš„åŠŸèƒ½æ°´å¹³ã€‚ é™åŠ›ç´§å¼ è®­ç»ƒåŸåˆ™(ISO-Tension Training Principle) é™åŠ›ç´§å¼ æ˜¯éŸ¦å¾·æœ€è¢«å…¬è®¤çš„è®­ç»ƒåŸåˆ™ä¹‹ä¸€ã€‚é™åŠ›ç´§å¼ ç”¨äºè‚Œè‚‰æ§åˆ¶ï¼Œå³æŠŠè‚Œè‚‰æ”¶ç¼©åˆ°æç‚¹ï¼Œä¿æŒé™æ­¢æ§åˆ¶3-6ç§’ï¼Œé‡å¤åš3æ¬¡ã€‚è¿™ç§è®­ç»ƒèƒ½æé«˜ç¥ç»ç³»ç»Ÿå¯¹è‚Œè‚‰çš„æ§åˆ¶èƒ½åŠ›ï¼Œå¯ä½¿åœ¨æ¯”èµ›ä¸­è¡¨ç°å„ç§é€ å‹å§¿åŠ¿æ—¶ï¼Œåˆ†åˆ«æ§åˆ¶å„éƒ¨ä½è‚Œè‚‰ï¼Œä»¥ä½¿è‚Œè‚‰çº¿æ¡æ›´åŠ æ¸…æ™°å’Œçªå‡ºã€‚ æ³¨ï¼šé€‚ç”¨äºåŠ¨ä½œé€ å‹çš„è®­ç»ƒã€‚ é«˜çº§ç¯‡ åŠ©åŠ›è®­ç»ƒåŸåˆ™(Cheating Training Principle) å€ŸåŠ©å…¶å®ƒè‚Œè‚‰çš„åŠ›é‡å®ŒæˆåŠ¨ä½œç»ƒä¹ çš„æœ€å1-2æ¬¡ï¼Œæˆ–åˆ©ç”¨èº«ä½“å…¶å®ƒéƒ¨ä½æ¥ååŠ©åœ¨è¿åŠ¨ä¸­çš„è‚Œè‚‰å®Œæˆæœ€åè¯•ä¸¾ã€‚å¦‚ï¼šä¿¯ç«‹å¼¯ä¸¾åšåˆ°æœ€åå‡ æ¬¡è¯•ä¸¾æ„Ÿåˆ°å¾ˆéš¾å®Œæˆæ—¶ç”¨å¦ä¸€åªæ‰‹è½»å¾®æ‰˜ä½æ‰‹èƒŒåœ¨å®Œæˆå‡ æ¬¡ã€‚ä½†å¦‚åœ¨åšä»°å§æ¨ä¸¾æ—¶ï¼Œé‡‡ç”¨èƒŒå’Œè‡€éƒ¨ç¦»å¼€å‡³é¢çš„åŠ›é‡æ¥å¤šå®Œæˆå‡ æ¬¡ï¼Œå°±ä¸æ˜¯éŸ¦å¾·åŠ©åŠ›è®­ç»ƒåŸåˆ™äº†ã€‚ æ³¨ï¼šé€‚ç”¨äºå¯¹æŸå—é‡ç‚¹è‚Œè‚‰çš„è¶…å¼ºåº¦è®­ç»ƒã€‚ ä¸‰ç»„åˆè®­ç»ƒåŸåˆ™(Tri-Sets Training Principle) åŒä¸€å—è‚Œè‚‰é‡‡ç”¨ä¸‰ä¸ªä¸åŒçš„åŠ¨ä½œé”»ç‚¼ï¼Œä¸”åŠ¨ä½œä¹‹é—´æ²¡æœ‰ä¼‘æ¯ã€‚è¯¥æ–¹æ³•å¯¹å¢åŠ è¡€ç®¡ä¸­è¡€æµé‡å¾ˆæœ‰æ•ˆã€‚ æ³¨ï¼šé€‚ç”¨äºå¯¹æŸå—é‡ç‚¹è‚Œè‚‰çš„è¶…å¼ºåº¦å’Œå‡è„‚è®­ç»ƒã€‚ è¶…ç»„åˆè®­ç»ƒåŸåˆ™(Giant Sets Training Principle) åŒä¸€è‚Œè‚‰ç¾¤é‡‡ç”¨4-6ç§åŠ¨ä½œé”»ç‚¼ï¼ŒåŠ¨ä½œé—´æ­‡å¾ˆçŸ­æˆ–æ²¡æœ‰ã€‚ æ³¨ï¼šé€‚ç”¨äºå‡è„‚è®­ç»ƒå’Œæé«˜è‚Œè‚‰è€åŠ›è®­ç»ƒã€‚ é¢„çƒ­è®­ç»ƒåŸåˆ™(Pre-Exhaustion Training Principle) åœ¨é”»ç‚¼æŸå—è‚Œè‚‰æ—¶ï¼Œå¼€å§‹å…ˆé‡‡ç”¨å­¤ç«‹åŠ¨ä½œç»ƒä¹ ï¼Œç„¶åç«‹åˆ»ç”¨åŒç»„åˆè®­ç»ƒè¿›è¡Œæ­£å¸¸è®­ç»ƒã€‚ æ³¨ï¼šé€šå¸¸ç”¨äºè®­ç»ƒè¯¾ç¨‹çš„å¼€å§‹é˜¶æ®µæˆ–æŸå—è‚Œè‚‰çš„å¼€å§‹è®­ç»ƒä¹‹å‰ã€‚ åœæ¯è®­ç»ƒåŸåˆ™(Rest-Pause Training Principle) ç”¨æœ€å¤§é‡é‡è¯•ä¸¾æ—¶ï¼Œæ¯æ¬¡éƒ½è¯•ä¸¾åˆ°æé™æ¬¡æ•°ï¼Œç„¶ååœæ¯ä¸€ä¼šå„¿ï¼Œå†æ¥ç€è¯•ä¸¾ã€‚ç¬¬ä¸€æ¬¡åœæ¯å¯ä¸º30-45ç§’ï¼Œä»¥åæ¯æ¬¡å¢åŠ 30ç§’ã€‚è¿™æ˜¯å¢é•¿åŠ›é‡å’Œè‚Œè‚‰å›´åº¦çš„å¥½æ–¹æ³•ã€‚ æ³¨ï¼šé€‚ç”¨äºå¢é•¿åŠ›é‡çš„ç»ƒä¹ ã€‚ é¡¶å³°æ”¶ç¼©è®­ç»ƒåŸåˆ™(Peak Contraction Training Principle) é¡¶å³°æ”¶ç¼©æ˜¯æŒ‡è‚Œè‚‰è¾¾åˆ°å®Œå…¨æ”¶ç¼©æ—¶ä½¿æ´»åŠ¨çš„è‚Œè‚‰å¤„äºæœ€ç´§å¼ çš„æ”¶ç¼©çŠ¶æ€ã€‚è‚Œè‚‰å®Œå…¨æ”¶ç¼©æ—¶è‹¥æ²¡æœ‰é”å®šè¿™ä¸ªé‡é‡ï¼Œè‚Œè‚‰ä¼šå‡ºç°æ¾å¼›ç°è±¡ã€‚ä¸ºäº†é¿å…è¿™ä¸€ç°è±¡ï¼Œåœ¨è‚Œè‚‰æ”¶ç¼©åˆ°æœ€ç´§å¼ çš„ä½ç½®æ—¶ï¼Œåº”ç»™äºˆä¸€å®šçš„å‡é˜»åŠ›ã€‚å¦‚ï¼Œåšå“‘é“ƒå¼¯ä¸¾åˆ°æœ€é«˜ç‚¹æ—¶ï¼ŒæŠŠèº¯å¹²ç¨å‘å‰å€¾ï¼Œè®©ä¸Šè‡‚å¤„äºé‡åŠ›çš„å‚çº¿ä¹‹å¤–ï¼Œå°±ä¼šé”å®šé‡é‡ï¼Œä½¿è‚Œè‚‰å¤„äºå½»åº•æ”¶ç´§çŠ¶æ€ã€‚è¿™ç§è®­ç»ƒè¯¾ä½¿è‚Œè‚‰å¢å¤§ä¸”è‚Œçº¹åˆ†å‰²çº¿æ¸…æ™°ã€‚ æ³¨ï¼šé€‚åˆäºæ‰€æœ‰åŠ¨ä½œç»ƒä¹ ä¸­è‚Œè‚‰æ”¶ç¼©è‡³æé™æ—¶é‡‡ç”¨ã€‚ æŒç»­ç´§å¼ è®­ç»ƒåŸåˆ™(Continuous Tension Training Principle) åœ¨æ•´ä¸ªåŠ¨ä½œè¿‡ç¨‹ä¸­ï¼ŒåŠ¨ä½œè¦åšå¾—æ…¢äº›ï¼Œä½¿è‚Œè‚‰èƒ½é€æ¸æ”¶ç¼©ï¼Œå§‹ç»ˆä¿æŒç´§å¼ çš„æ”¶ç¼©çŠ¶æ€ã€‚ æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒä¸­å¢é•¿è‚Œè‚‰çš„æœ€åå‡ ç»„è®­ç»ƒï¼Œæˆ–æé«˜è‚Œè‚‰è€åŠ›è®­ç»ƒã€‚ æŠ—é‡åŠ›è®­ç»ƒåŸåˆ™(Reverse-Gravity Training Principle) ä¸¾èµ·é‡ç‰©åæ”¾ä¸‹æ—¶ï¼Œç”¨åŠ›æŠµæŠ—ä¸‹é™é‡ç‰©ï¼Œè¿›è¡Œé€€è®©æ€§ç»ƒä¹ ï¼Œæ˜¯è®©å·²æ”¶ç¼©çš„è‚Œè‚‰è¢«åŠ¨æ‹‰é•¿çš„åŠ¨ä½œï¼Œå¯¹è‚Œè‚‰åˆºæ¿€æ›´å¼ºçƒˆï¼Œæœ‰åˆ©äºå¢å¤§è‚Œè‚‰ï¼Œå¢åŠ åŠ›é‡ã€‚å› ä¸ºè¿™ç§æ–¹æ³•å¼ºåº¦å¾ˆå¤§ï¼Œåœ¨è®­ç»ƒä¸­ä¸å®œç»å¸¸ä½¿ç”¨ã€‚è¿åŠ¨è´Ÿè·å®‰æ’è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š å¼ºåº¦ï¼šé‡‡ç”¨90ï¼…-120ï¼…æœ€å¤§é‡é‡ã€‚ ç»„æ•°ï¼šè¾ƒå°‘ï¼Œé€šå¸¸ä¸º4Â±2ç»„ã€‚ æ¬¡æ•°ï¼šè¾ƒå°‘ï¼Œé€šå¸¸åš2-3æ¬¡ã€‚ æ—¶é—´ï¼š6-8ç§’ã€‚ é€Ÿåº¦ï¼šæ…¢ã€‚ è¿™ç§è®­ç»ƒæ–¹æ³•ä¹Ÿå¯ç”¨äºå‘å±•è–„å¼±ç¯èŠ‚ï¼Œå¼ºè¿«ä¿ƒä½¿å…¶å¹³è¡¡å‘å±•ã€‚ æ³¨ï¼šé€šå¸¸åœ¨å¹³æ—¶çš„è®­ç»ƒå‘¨æœŸä¸­å‘å±•åŠ›é‡æˆ–è¶…å¼ºåº¦åˆºæ¿€è¢«é”»ç‚¼çš„è‚Œè‚‰ å¼ºè¿«æ¬¡æ•°è®­ç»ƒåŸåˆ™(Forced Reps Training Principle) å½“ä¸¾è‡³åŠ›ç«­æ—¶ï¼Œç”±åŒä¼´ç¨åŠ åŠ©åŠ›å†åš2-3æ¬¡çš„å¼ºè¿«æ¬¡æ•°ï¼Œä½†åŠ©åŠ›åªåœ¨ä¸¾èµ·çš„å¼€å§‹é˜¶æ®µï¼Œæ¥ä¸‹æ¥æŠŠæ é“ƒä¸¾è‡³ä¸¤è‡‚ä¼¸ç›´å°±åº”è¯¥ä¾é è‡ªå·±çš„åŠ›é‡ã€‚ æ³¨ï¼šé€šå¸¸åœ¨å¹³æ—¶è®­ç»ƒå‘¨æœŸå¯¹æ‰€é‡ç‚¹å‘å±•è‚Œè‚‰çš„æœ€å1-2ç»„çš„æœ€åå‡ æ¬¡æ¨ä¸¾ä¸­ä½¿ç”¨ï¼Œä¸å®œæ•´ä¸ªè®­ç»ƒè¯¾ç¨‹çš„æ¯ç»„æ¨ä¸¾éƒ½é‡‡ç”¨ã€‚ åŒåˆ†åŒ–è®­ç»ƒåŸåˆ™(Double-Split Training Principle) é«˜çº§å¥ç¾è¿åŠ¨å‘˜ä¸ºæé«˜æ€»è´Ÿè·ï¼Œåˆä¸è‡³äºè¿‡åº¦è®­ç»ƒï¼Œå°†æ€»è´Ÿè·é‡ä¸€åˆ†ä¸ºäºŒï¼Œä¸Šåˆç»ƒ1-2ä¸ªéƒ¨ä½ï¼Œä¸‹åˆç»ƒå¦å¤–1-2ä¸ªéƒ¨ä½ã€‚æœ‰åˆ©äºç²¾åŠ›æ›´é›†ä¸­ï¼Œé‡‡ç”¨æ›´å¤§çš„é‡é‡å’Œç»„æ•°ã€‚ æ³¨ï¼šé€‚ç”¨äºæ—¶é—´ä¸èƒ½ä¿è¯çš„é”»ç‚¼è€…ï¼Œæˆ–èµ›å‰å‡è„‚ã€‚ ä¸‰åˆ†åŒ–è®­ç»ƒåŸåˆ™(Triple-Split Training Principle) å°‘æ•°å¥ç¾è¿åŠ¨å‘˜æœ‰æƒŠäººçš„æ¢å¤èƒ½åŠ›ï¼Œæ ¹æ®åŒåˆ†åŒ–åŸç†ï¼Œä¸€å¤©ç»ƒä¸‰æ¬¡ã€‚ æ³¨ï¼šé€‚ç”¨äºå…·æœ‰å¾ˆå¥½ä½“åŠ›çš„é«˜çº§å¥ç¾è¿åŠ¨å‘˜çš„èµ›å‰å‡è„‚ã€‚ è†¨èƒ€è®­ç»ƒåŸåˆ™(Burns Training Principle) åœ¨æ­£å¸¸è®­ç»ƒçš„æœ€åä¸€æ¬¡è¯•ä¸¾æ—¶å†åš2-3æ¬¡åŠç¨‹çš„ç»ƒä¹ ï¼Œæ˜¯æ­£åœ¨æ´»åŠ¨ çš„è‚Œè‚‰è¿›å…¥æ›´å¤šçš„è¡€æ¶²å¹¶äº§ç”Ÿè¶…é‡çš„ä¹³é…¸ï¼Œå¼•èµ·è‚Œè‚‰å‘èƒ€æ„Ÿè§‰ã€‚è¿™ç§æ„Ÿè§‰æ˜¯ç”±äºå±€éƒ¨åŠ¨ä½œæ—¶æ›´å¤šçš„è¡€æ¶²è¿›å…¥è‚Œè‚‰ä¸­å¼•èµ·çš„æ¯›ç»†è¡€ç®¡è†¨èƒ€ï¼Œæœ‰åŠ©äºå¢åŠ è‚Œè‚‰å›´åº¦å’Œè‚Œè‚‰ä¸­æ¯›ç»†è¡€ç®¡çš„å¢ç²—ã€‚ æ³¨ï¼šé€‚ç”¨äºè®­ç»ƒè¯¾ç¨‹ä¸­çš„é‡ç‚¹è‚Œè‚‰è®­ç»ƒï¼Œä¸å®œç»å¸¸ä½¿ç”¨ã€‚ ä¼˜åŒ–è®­ç»ƒåŸåˆ™(Quality Training Principle) æŒ‰è§„å®šçš„ç»„æ•°å’Œæ¬¡æ•°è¿›è¡Œé”»ç‚¼æ—¶ï¼Œé€æ¸å‡å°‘ç»„é—´é—´æ­‡æ—¶é—´ã€‚ æ³¨ï¼šé€‚ç”¨äºèµ›å‰æé«˜è‚Œè‚‰è´¨é‡æˆ–å‡è„‚è®­ç»ƒã€‚ é€’å‡è®­ç»ƒåŸåˆ™(Descending Sets Training Principle) é‡‡ç”¨ç”±é‡åˆ°è½»çš„é€é™é‡é‡çš„æ–¹æ³•ï¼Œéœ€è¦æœ‰ä¸¤ä¸ªè®­ç»ƒä¼™ä¼´å¸®åŠ©ï¼Œå½“é‡‡ç”¨ä¸€å®šé‡é‡å®Œæˆè§„å®šçš„æ¬¡æ•°æ—¶ï¼Œæœ‰ä¸¤æ—çš„ä¼™ä¼´ç«‹å³ä»ä¸¤ç«¯å„å–ä¸‹ä¸€ç‰‡æ é“ƒï¼›ç»§ç»­ä¸¾åˆ°åŠ›ç«­æ—¶ï¼Œåœ¨å„å–ä¸‹ä¸€ç‰‡ï¼Œå†ä¸¾å‡ æ¬¡ï¼Œç›´è‡³æ²¡æœ‰æ é“ƒç‰‡ä¸ºæ­¢ã€‚æ­¤æ³•çš„è®­ç»ƒå¼ºåº¦å¾ˆå¤§ï¼Œæ¯æ¬¡è®­ç»ƒè¯¾ä¸è¶…è¿‡1-2ä¸ªåŠ¨ä½œã€‚ æ³¨ï¼šé€‚ç”¨äºåœ¨å¹³æ—¶è®­ç»ƒå‘¨æœŸçš„è®­ç»ƒè¯¾ä¸­éœ€è¦é‡ç‚¹å‘å±•çš„å¤§è‚Œè‚‰ã€‚ æœ¬èƒ½è®­ç»ƒåŸåˆ™(Instinctive Training Principle) æ ¹æ®è‡ªå·±çš„æ„Ÿè§‰å®‰æ’åŠ¨ä½œã€ç»„æ•°å’Œæ¬¡æ•°ã€é¥®é£Ÿè¥å…»åŠè®­ç»ƒè®¡åˆ’ã€‚æœ‰åˆ©äºå……åˆ†å‘æŒ¥è‡ªå·±çš„æ½œèƒ½ã€‚ æ³¨ï¼šé€‚ç”¨äºä¸åŒè®­ç»ƒå‘¨æœŸçš„ä¸åŒè®­ç»ƒè¯¾ç¨‹ã€‚ å…¼é¡¾è®­ç»ƒåŸåˆ™(Eclectic Training Principle) æŠŠå¤§è‚Œè‚‰ç¾¤çš„å‘å±•å’Œè‚Œè‚‰å­¤ç«‹è®­ç»ƒç»“åˆèµ·æ¥ï¼Œå³ä¸ºå‘å±•æŸä¸»è¦è‚Œè‚‰å—ï¼ŒæŠŠç›¸åº”çš„å¤§è‚Œè‚‰ç¾¤è®­ç»ƒåŠ¨ä½œå’Œå±€éƒ¨è‚Œè‚‰è®­ç»ƒåŠ¨ä½œæ”¾åˆ°åŒä¸€è¯¾ç¨‹ä¸­ï¼Œå¹¶äºæœ¬èƒ½è®­ç»ƒåŸåˆ™ç»“åˆèµ·æ¥ï¼Œæ˜¯åŠ›é‡ã€å½¢ä½“ã€è‚Œè‚‰å—å¢å¼ºåˆ°æœ€å¤§é™åº¦ã€‚ æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒå‘¨æœŸçš„è°ƒæ•´è®­ç»ƒã€‚ ç²˜ç‚¹è®­ç»ƒåŸåˆ™(Partial Reps Training Principle) ç²˜ç‚¹æŒ‡åœ¨åšæŸç»„åŠ¨ä½œåˆ°åŠ›ç«­æ—¶ï¼Œè‚Œè‚‰ä¸èƒ½å†æ”¶ç¼©å‡ºç°çš„ç²˜æ»çŠ¶æ€ã€‚ä¸åŒè‚Œè‚‰åšä¸åŒåŠ¨ä½œå‡ºç°ç²˜ç‚¹çš„æ—¶é—´å’Œä½ç½®ä¸ä¸€æ ·ã€‚ä¸€èˆ¬åšå¾’æ‰‹åŠ¨ä½œå¾ˆéš¾å‡ºç°ç²˜ç‚¹ï¼Œå¯¹è‚Œè‚‰åŠ›é‡çš„å¢é•¿æ•ˆæœä¸å¤§ï¼Œæ•…ç»™å¾’æ‰‹åŠ¨ä½œå¢åŠ è´Ÿé‡èƒ½å–å¾—å¾ˆå¥½çš„æ•ˆæœã€‚å¯¹äºé«˜çº§å¥ç¾è¿åŠ¨å‘˜æ¥è¯´ï¼Œé‡‡ç”¨ç²˜ç‚¹è®­ç»ƒæ–¹æ³•å…‹æœè–„å¼±ç¯èŠ‚èƒ½å–å¾—æœ€å¤§æ•ˆæœã€‚ æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒå‘¨æœŸçš„å‘å±•åŠ›é‡è®­ç»ƒè¯¾ç¨‹ã€‚ å¿«é€ŸåŸåˆ™(Speed Principle) ä¸€èˆ¬å¥ç¾è®­ç»ƒä¸­çš„ç»„æ•°å’Œæ¬¡æ•°ä½¿ç”¨è¦ä¸¥æ ¼æŒæ¡è¦ç‚¹ï¼Œä½¿å±€éƒ¨è‚Œè‚‰æ„Ÿåˆ°å®Œå…¨æ”¶ç¼©æ‰èƒ½è¾¾åˆ°æœ€å¥½çš„è®­ç»ƒæ•ˆæœã€‚è€Œé‡‡ç”¨å¤§é‡é‡è®­ç»ƒæ˜¯å¢é•¿å›´åº¦çš„å¥½æ–¹æ³•ï¼Œå¿«é€ŸåŸåˆ™èƒ½ä½¿è®­ç»ƒæ›´åŠ å®Œç¾ã€‚å¿«é€ŸåŸåˆ™å¿…é¡»æœ‰é«˜çº§è®­ç»ƒé˜¶æ®µçš„æŠ€æœ¯åŸºç¡€ï¼Œç»“åˆå¤§é‡é‡è®­ç»ƒåŒæ—¶è¿›è¡Œï¼ˆè¶…è¿‡75ï¼…~80ï¼…é‡é‡ï¼‰ï¼Œä¸”åŠ¨ä½œå†³ä¸èƒ½å˜å½¢ï¼Œæˆ–åŠ©åŠ›ã€‚å¿«é€ŸåŸåˆ™æœ€å¥½æ˜¯åœ¨å¹³æ—¶è®­ç»ƒå‘¨æœŸé›†ä¸­å¢é•¿åŠ›é‡å’Œè‚Œè‚‰å›´åº¦çš„æ—©æœŸä½¿ç”¨ã€‚ æ³¨ï¼šé€šå¸¸åœ¨å‘å±•åŠ›é‡è®­ç»ƒè¯¾ç¨‹æˆ–å‡è„‚è®­ç»ƒè¯¾ç¨‹ä¸­ä½¿ç”¨ã€‚ äº¤å‰è®­ç»ƒåŸåˆ™(Staggered Sets principle) æ˜¯ä¼˜å…ˆè®­ç»ƒåŸåˆ™çš„ä¸€ç§é«˜çº§å½¢å¼ã€‚æŠŠè¾ƒå°ä¸”å‘å±•è¾ƒæ…¢éƒ¨ä½çš„è‚Œè‚‰ç©¿æ’åœ¨é‡ç‚¹è¦ç»ƒçš„å¤§è‚Œè‚‰ç¾¤ä¸­ç»ƒä¹ ï¼Œæˆ–è´¯ç©¿åœ¨ä¸»è¦å¤§è‚Œè‚‰ç¾¤ä¼—é”»ç‚¼ã€‚é€šå¸¸äº¤å‰è®­ç»ƒçš„éƒ¨ä½è¦æ±‚ç›¸éš”è¾ƒè¿œï¼Œä»¥å…ç›¸äº’å½±å“ï¼Œå‰è‡‚ã€é¢ˆéƒ¨ã€å°è…¿ã€æ–œæ–¹è‚Œç­‰éƒ½æ˜¯é‡‡ç”¨äº¤å‰è®­ç»ƒè¾ƒå¥½çš„å€™è¡¥éƒ¨ä½ã€‚æŠŠäº¤å‰è®­ç»ƒæ”¾åœ¨æœ€å‰é¢è¿å¯ä»¥ä½¿ç²¾åŠ›æ›´å¥½åœ°é›†ä¸­åœ¨æœ€é‡è¦éƒ¨ä½çš„è‚Œè‚‰ç¾¤ä¸Šã€‚ æ³¨ï¼šé€‚ç”¨äºå…·æœ‰è¾ƒé«˜è®­ç»ƒæ°´å¹³ä¸”æ—¶é—´ä¸è¶³è€…ï¼Œæˆ–èµ›å‰å‡è„‚è€…ä½¿ç”¨ï¼Œä½†ä¸å®œç»å¸¸ä½¿ç”¨ã€‚ ===Ending===","tags":[{"name":"å¤§ä¿å¥","slug":"å¤§ä¿å¥","permalink":"https://lilei.pro/tags/å¤§ä¿å¥/"}]},{"title":"Android Performance Patterns - åºè¨€","date":"2016-02-18T12:33:29.000Z","path":"2016/02/18/Android-Performance-Patterns-åºè¨€/","text":"Android Performance Patterns æ˜¯ Android Developers åœ¨youtubeä¸Šå‘å¸ƒçš„ä¸€ç³»åˆ—Androidæ€§èƒ½ä¼˜åŒ–å°è§†é¢‘ï¼Œæ¯ä¸€éƒ¨éƒ½ä¸è¶…è¿‡5åˆ†é’Ÿï¼Œç›®å‰ä¸ºæ­¢å‘å¸ƒåˆ°äº†Season 5ï¼Œå…±73éƒ¨ã€‚ æ’­æ”¾åˆ—è¡¨åœ°å€ï¼šlinkï¼ˆè§†é¢‘ä¸‹æ–¹æœ‰å­—å¹•å¼€å…³ï¼Œä½ ä¹Ÿå¯ä»¥ç‚¹å‡»é”®ç›˜ä¸Šçš„Cé”®æ¥æ“ä½œå­—å¹•ï¼‰ ç›®å½•Season 5 é“¾æ¥ æ ‡é¢˜ s5ep1 Threading Performance 101 s5ep2 Understand Android Threading s5ep3 Memory &amp; Threading s5ep4 Good AsyncTask Hunting s5ep5 Getting a HandlerThread s5ep6 Swimming in Threadpools s5ep7 The Zen of IntentService s5ep8 Threading and Loaders s5ep9 The Importance of Thread Priority s5ep10 Profile GPU Rendering : M Update ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"Android Performance Patterns","slug":"Android-Performance-Patterns","permalink":"https://lilei.pro/tags/Android-Performance-Patterns/"}]},{"title":"ProGitè¯»ä¹¦ç¬”è®°ï¼ˆChapter3ï¼‰","date":"2016-02-17T13:23:42.000Z","path":"2016/02/17/ProGitè¯»ä¹¦ç¬”è®°Chapter3/","text":"Chapter 3. Git Branchingæœ¬ç« è®²è§£Gitåˆ†æ”¯åŠŸèƒ½å®ç°çš„åŸºæœ¬åŸç†ã€mergeæ“ä½œã€rebaseæ“ä½œç­‰ç­‰ åŸºæœ¬æ€æƒ³ï¼šsnapshoté¦–å…ˆè¦ç†è§£ï¼Œä¸åŒäºå…¶å®ƒVCSï¼Œå¯¹äºç‰ˆæœ¬ä¹‹é—´çš„æäº¤ï¼ŒGitå­˜å‚¨çš„ä¸æ˜¯diffï¼Œè€Œæ˜¯snapshotã€‚å¯¹äºä¸‹é¢è¿™æ ·ä¸€æ¬¡commitï¼ŒGitä¼šç”Ÿæˆ5ä¸ªæ–‡ä»¶ 12$ git add README test.rb LICENSE$ git commit -m 'The initial commit of my project' ç”Ÿæˆä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼š98ca9è®°å½•äº†æœ¬æ¬¡commitçš„ä¿¡æ¯ï¼ˆcommitterã€dateã€messageç­‰ï¼‰ï¼Œå¹¶æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘treeï¼Œtreeä¸­åŒ…å«æœ¬æ¬¡commitä¸­æ”¹åŠ¨çš„å…¨éƒ¨æ–‡ä»¶snapshot A branch in Git is simply a lightweight movable pointer to one of these commits. è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨Gitä¸­ï¼Œåˆ›å»ºã€åˆ é™¤ã€åˆ‡æ¢åˆ†æ”¯çš„æ“ä½œéƒ½å¾ˆå¿«é€Ÿã€‚ åˆ›å»ºåˆ†æ”¯Gitä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºåˆ†æ”¯ 1$ git branch testing åˆ›å»ºåçš„testingåˆ†æ”¯ï¼Œè·Ÿmasteréƒ½æŒ‡å‘åŒä¸€ä¸ªSnapshot é‚£ä¹ˆGitå¦‚ä½•çŸ¥é“å½“å‰ä½ åœ¨ç¼–è¾‘çš„æ˜¯å“ªä¸€ä¸ªåˆ†æ”¯å‘¢ï¼Ÿç”¨HEADï¼ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„å‘½ä»¤åï¼Œå†…éƒ¨çš„åˆ†æ”¯æ˜¯è¿™æ ·çš„ å¯ä»¥åœ¨git logä¸­ä½¿ç”¨--decorateå‚æ•°æ¥è§‚å¯Ÿå½“å‰HEADåˆ†æ”¯ã€‚ï¼ˆè¿™é‡Œæ¨èä¸€ä¸‹zshï¼Œè‡ªåŠ¨æ ‡ç¤ºå½“å‰HEADï¼Œéå¸¸æ–¹ä¾¿ï¼‰ 1234$ git log --oneline --decoratef30ab (HEAD -&gt; master, testing) add feature #32 - ability to add new formats to the central interface34ac2 Fixed bug #1328 - stack overflow under certain conditions98ca9 The initial commit of my project åˆ‡æ¢åˆ†æ”¯ä½¿ç”¨git checkout [branch_name]æ¥åˆ‡æ¢åˆ†æ”¯ 1$ git checkout master åˆ›å»º&amp;åˆ‡æ¢åˆ†æ”¯å¯ä»¥æ”¾åœ¨ä¸€ä¸ªå‘½ä»¤é‡Œå®Œæˆï¼šgit checkout -b [branch_name]ï¼Œä½œç”¨æ˜¯åŸºäºå½“å‰HEADåˆ‡å‡ºä¸€ä¸ªåä¸ºbranch_nameçš„æ–°åˆ†æ”¯ï¼Œå¹¶ä¸”å°†HEADåˆ‡æ¢åˆ°è¯¥æ–°åˆ†æ”¯ä¸Šã€‚ Basic Branching and Mergingæƒ³è±¡ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„åˆ†æ”¯æ¨¡å‹ï¼šå½“ä½ å¼€å‘æŸä¸ªåŠŸèƒ½æ—¶ï¼ˆiss53ï¼‰ï¼Œçªç„¶çº¿ä¸ŠåŸºäºmasteråˆ†æ”¯çš„ä»£ç çˆ†å‡ºä¸€ä¸ªbugï¼Œæ­¤æ—¶å¿…é¡»è¦è¿›è¡Œhotfixï¼Œå¹¶ä¸”åœ¨å®Œæˆhotfixåï¼Œå°†hotfixçš„å†…å®¹åˆå¹¶å›masterï¼Œæœ€åå†åˆ‡æ¢å›iss53åˆ†ä¹‹ç»§ç»­è¿›è¡ŒåŠŸèƒ½å¼€å‘ã€‚ æ€æ ·è®©masteråˆå¹¶hotfixå‘¢ï¼Ÿåˆ‡æ¢å›masteråˆ†æ”¯ï¼Œä½¿ç”¨git merge hotfixæ¥å®Œæˆ 123456$ git checkout master$ git merge hotfixUpdating f42c576..3a0874cFast-forward index.html | 2 ++ 1 file changed, 2 insertions(+) çœ‹åˆ°Fast-forwardçš„æç¤ºæ²¡æœ‰ï¼Ÿè¿™æ˜¯è¯´ï¼Œmasterçš„æŒ‡é’ˆå·²ç»â€œå‘å‰ç§»åŠ¨åˆ°äº†hotfixæŒ‡é’ˆæ‰€åœ¨ä½ç½®â€ï¼Œå¦‚ä¸‹å›¾ï¼š è¿™ä¸ªæ—¶å€™hotfixå·²ç»å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼Œç»§ç»­ç•™ç€å®ƒåªä¼šè®©æˆ‘ä»¬çš„åˆ†æ”¯æ›´åŠ æ··ä¹±ã€‚æœ¬ç€å…”æ­»ç‹—çƒ¹é¸Ÿå°½å¼“è—çš„åŸåˆ™ï¼Œæ¯é…’é‡Šå…µæƒï½æœ€ååˆ‡æ¢å›iss53åˆ†æ”¯ç»§ç»­coding 12345678$ git branch -d hotfixDeleted branch hotfix (3a0874c).$ git checkout iss53Switched to branch \"iss53\"$ vim index.html$ git commit -a -m 'finished the new footer [issue 53]'[iss53 ad82d7a] finished the new footer [issue 53]1 file changed, 1 insertion(+) Basic Mergingç°åœ¨æˆ‘ä»¬å®Œæˆäº†iss53çš„åŠŸèƒ½å¼€å‘ä¸æµ‹è¯•ï¼Œéœ€è¦å°†ä»£ç åˆå¹¶å›masterï¼Œä»¥å¤‡åç»­ä¸Šçº¿ã€‚å½“ç„¶ï¼Œéœ€è¦å…ˆåˆ‡å›masterï¼Œç„¶åä½¿ç”¨git mergeæ¥åˆå¹¶iss53åˆ†æ”¯ã€‚ 123456$ git checkout masterSwitched to branch 'master'$ git merge iss53Merge made by the 'recursive' strategy.index.html | 1 +1 file changed, 1 insertion(+) åˆå¹¶å‰ åˆå¹¶å ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºæ¥ï¼ŒGitåŸºäºmasterä¸iss53çš„æäº¤å†å²ï¼Œæ–°åˆ›å»ºäº†ä¸€ä¸ªcommitï¼C6ï¼Œå›¾ä¸­æ­¤å¤„æœ‰è¯¯ï¼Œæœ€å³è¾¹masteræŒ‡å‘çš„åº”è¯¥ä¸ºC6ã€‚æƒ¯ä¾‹ï¼Œå¸ç£¨æ€é©´ã€‚ 1$git branch -d iss53 Basic Merge Conflictsåœ¨å¹¶è¡Œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸¤ä¸ªå¼€å‘è€…åŒæ—¶ä¿®æ”¹äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨åˆå¹¶æ—¶å‘ç”Ÿå†²çªçš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ · 1234$ git merge iss53Auto-merging index.htmlCONFLICT (content): Merge conflict in index.htmlAutomatic merge failed; fix conflicts and then commit the result. ä½¿ç”¨git statusæŸ¥çœ‹å½“å‰åˆå¹¶è¿›ç¨‹ä¸çŠ¶æ€ 1234567891011$ git statusOn branch masterYou have unmerged paths. (fix conflicts and run \"git commit\")Unmerged paths: (use \"git add &lt;file&gt;...\" to mark resolution) both modified: index.htmlno changes added to commit (use \"git add\" and/or \"git commit -a\") åŸæ¥æ˜¯index.htmlè¢«åˆ†åˆ«ä¿®æ”¹äº†2æ¬¡ï¼Œå¯¼è‡´gitæ— æ³•è‡ªåŠ¨åˆå¹¶ã€‚ä½¿ç”¨ç¼–è¾‘å™¨æˆ–è€…IDEæ‰“å¼€è¿™ä¸ªæ–‡ä»¶åï¼Œèƒ½çœ‹åˆ° 1234567&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:index.html&lt;div id=\"footer\"&gt;contact : email.support@github.com&lt;/div&gt;=======&lt;div id=\"footer\"&gt; please contact us at support@github.com&lt;/div&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html Gitç”¨éå¸¸å®¹æ˜“è¯†åˆ«çš„æ–¹å¼æ ‡ç¤ºæœ‰å†²çªçš„ä»£ç ï¼š&lt;&lt;&lt;&lt;å’Œ====ä¹‹é—´çš„æ˜¯HEADçš„æ”¹åŠ¨ï¼ˆä¹Ÿå°±æ˜¯masterï¼‰ï¼Œ====å’Œ&gt;&gt;&gt;&gt;ä¹‹é—´çš„æ˜¯å¦ä¸€ä¸ªåˆ†æ”¯ï¼ˆiss53ï¼‰çš„æ”¹åŠ¨ï¼Œä¿ç•™æƒ³ä¿ç•™çš„å³å¯ã€‚ å¦‚æœå–œæ¬¢å›¾å½¢åŒ–çš„ç•Œé¢ï¼Œä½¿ç”¨git mergetoolæ¥æ‰“å¼€ï¼ŒGité»˜è®¤çš„æ˜¯opendiffã€‚ä¿®æ”¹å®Œæˆåï¼Œæ–‡ä»¶å¤„äºmodifiedçŠ¶æ€ï¼Œéœ€è¦å…ˆç”¨addå°†å…¶å˜ä¸ºstagedï¼Œç„¶ååœ¨commitä¸­æ³¨æ˜è¿™æ¬¡mergeã€‚ Branch ManagementæŸ¥çœ‹æœ¬åœ°branchï¼Œä½¿ç”¨git branchï¼Œå¢åŠ -rå‚æ•°ä»¥æŸ¥çœ‹è¿œç«¯ä»“åº“branchï¼Œå¢åŠ -vå‚æ•°æŸ¥çœ‹æœ€æ–°ä¸€æ¬¡çš„commit 12345678$ git branch iss53* master testing$ git branch -v iss53 93b412c fix javascript issue* master 7a98805 Merge branch 'iss53' testing 782fd34 add scott to the author list in the readmes å¦‚æœä½ æƒ³çœ‹å“ªäº›åˆ†æ”¯å·²ç»è¢«mergeè¿›äº†HEADä¸­ï¼Œç”¨--mergedï¼Œå‰é¢æ²¡æœ‰æ˜Ÿå·*çš„åˆ†æ”¯æ˜¯å¯ä»¥ç”¨git branch -dåˆ é™¤çš„ã€‚ 123$ git branch --merged iss53* master æŸ¥çœ‹æ²¡æœ‰mergeçš„åˆ†æ”¯ï¼Œç”¨--no-mergedå‚æ•°ã€‚å¯¹äºè¿™æ ·çš„åˆ†æ”¯ï¼Œå½“ä½ è¯•å›¾ä½¿ç”¨git branch -dè¿›è¡Œåˆ é™¤æ—¶ï¼ŒGitä¼šç»™å‡ºæç¤ºï¼Œå‘Šè¯‰ä½ è¿™æ ·çš„æ“ä½œä¸è¢«å…è®¸ã€‚ï¼ˆä½ å¯ä»¥ä½¿ç”¨git branch -Dæ¥å¼ºåˆ¶åˆ é™¤ï¼‰ 12345$ git branch --no-merged testing$ git branch -d testingerror: The branch 'testing' is not fully merged.If you are sure you want to delete it, run 'git branch -D testing'. Remote Brancheså¯¹äºè¿œç«¯ä»“åº“çš„æ¯ä¸€ä¸ªåˆ†æ”¯ï¼Œæœ¬åœ°éƒ½æœ‰ä¸€ä¸ªä¸å…¶å¯¹åº”çš„åˆ†æ”¯ï¼Œç”¨(remote)/(branch)æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚origin/masterã€‚é€šå¸¸æˆ‘ä»¬çœ‹åˆ°remoteçš„åå­—æ˜¯originï¼Œä½†è¿™ä¸æ˜¯å›ºå®šçš„ï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ›´æ”¹è¿™ä¸ªåå­—git clone -o booyahï¼Œè¿™æ ·ä½ åˆ›å»ºçš„å°±æ˜¯booyah/masterã€‚æœ€å¼€å§‹cloneå¹¶checkoutæ—¶ï¼Œorigin/masterä¸masteræŒ‡å‘åŒä¸€ä¸ªsnapshot åªè¦ä¸fetchï¼Œorigin/masteræŒ‡å‘çš„ä½ç½®å°±ä¸ä¼šå˜æ›´ï¼Œmasteråˆ†æ”¯ä¼šéšç€commitä¸€ç›´å‘å‰ã€‚ ä¹Ÿå¯ä»¥æŠŠä¸¤ä¸ªremoteçš„å†å²éƒ½æ‹‰ä¸‹æ¥ï¼Œé…Œæƒ…ä½¿ç”¨ Pushingä½¿ç”¨git push &lt;remote&gt; &lt;branch&gt;æ¥pushåˆ°è¿œç«¯ä»“åº“ã€‚ 12345678$ git push origin serverfixCounting objects: 24, done.Delta compression using up to 8 threads.Compressing objects: 100% (15/15), done.Writing objects: 100% (24/24), 1.91 KiB | 0 bytes/s, done.Total 24 (delta 2), reused 0 (delta 0)To https://github.com/schacon/simplegit * [new branch] serverfix &gt; serverfix è¿™å…¶å®æ˜¯ä¸€ä¸ªç¼©å†™ï¼ŒèƒŒåå®Œæ•´çš„å‘½ä»¤æ˜¯git push origin refs/heads/serverfix:refs/heads/serverfixï¼Œç›´æ¥å¼•ç”¨åŸæ–‡ which means, â€œTake my serverfix local branch and push it to update the remoteâ€™s serverfix branch.â€ åˆ†æ”¯åå‰é¢çš„refs/headsæ˜¯Gitå†…éƒ¨æœºåˆ¶ï¼Œä½ ä¹Ÿå¯ä»¥çœç•¥è¿™ä¸ªè·¯å¾„ï¼Œå†™ä½œserverfix:serverfixï¼Œæˆ–è€…ä½ è§‰å¾—åœ¨remoteç«¯ä¸å¸Œæœ›å«serverfixçš„åå­—ï¼Œé‚£å°±æ”¹ä¸€ä¸ªä½ å–œæ¬¢çš„ï¼git push origin serverfix:awesomebranch ä½¿ç”¨git checkout -b &lt;branch_name&gt; &lt;remote&gt;/&lt;branch_name&gt;æ¥åˆ›å»ºä¸€ä¸ªåŸºäºè¿œç«¯çš„æœ¬åœ°åˆ†æ”¯ï¼Œè¿™ç§åˆ†æ”¯è¢«å«åštracking branchï¼Œè¢«è·Ÿè¸ªçš„é‚£ä¸ªè¿œç«¯branchå«åšupstream branchã€‚æœ‰äº†è¿™å±‚å…³ç³»åœ¨é‡Œé¢ï¼Œå½“ä½ è¿›è¡Œpull/pushæ—¶ï¼ŒGitå°±è‡ªç„¶çŸ¥é“è¦æ“ä½œå“ªä¸€ä¸ªåˆ†æ”¯äº†ã€‚ ç”±äºgit checkout -b &lt;branch_name&gt; &lt;remote&gt;/&lt;branch_name&gt;å®åœ¨æ˜¯å¤ªå¸¸ç”¨äº†ï¼ŒGitä¸ºå®ƒæä¾›äº†ä¸€ä¸ªç¼©å†™git checkout --track &lt;remote&gt;/&lt;branch&gt; 123$ git checkout --track origin/serverfixBranch serverfix set up to track remote branch serverfix from origin.Switched to a new branch 'serverfix' ç”šè‡³ï¼ŒGitæä¾›äº†ä¸€ä¸ªç¼©å†™çš„ç¼©å†™ï¼šgit checkout &lt;branch&gt;ï¼Œè¿™ä¸ªå‘½ä»¤è¦æ±‚æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¿æŒåå­—ä¸€è‡´ã€‚ 123$ git checkout serverfixBranch serverfix set up to track remote branch serverfix from origin.Switched to a new branch 'serverfix' å¦‚æœå°šæœªç»™æœ¬åœ°çš„ä¸€ä¸ªåˆ†æ”¯æŒ‡å®šè¿œç«¯åˆ†æ”¯ï¼Œä½¿ç”¨-uå‚æ•° 12$ git branch -u origin/serverfixBranch serverfix set up to track remote branch serverfix from origin. å°æŠ€å·§ï¼šå¯ä»¥ç”¨{@u}æˆ–è€…@{upstream}æ¥ä»£æ›¿upstreamï¼Œæ¯”å¦‚å½“ä½ å¤„åœ¨masteråˆ†æ”¯æ—¶ï¼Œå¯ä»¥ç”¨git merge @{u}æ¥ä»£æ›¿git merge origin/master å¦‚æœä½ æƒ³äº†è§£æœ¬åœ°åˆ†æ”¯çš„trackæƒ…å†µï¼ˆåˆ†æ”¯ã€aheadã€behindï¼‰ï¼Œä½¿ç”¨git branch -vvï¼Œè®°å¾—å…ˆgit fetch --all 12345$ git branch -vv iss53 7e424c3 [origin/iss53: ahead 2] forgot the brackets master 1ae2a45 [origin/master] deploying index fix* serverfix f8674d9 [teamone/server-fix-good: ahead 3, behind 1] this should do it testing 5ea463a trying something new Pullingç›¸æ¯”äºfetchæŠŠè¿œç«¯åˆ†æ”¯æ›´æ–°åˆ°æœ¬åœ°ï¼Œpullå‘½ä»¤æ›´è¿›äº†ä¸€æ­¥ï¼Œå®Œæˆäº†mergeçš„åŠŸèƒ½ã€‚pull = fetch + mergeã€‚ç¬”è€…èµåŒä¹¦ä¸­çš„è§‚ç‚¹ï¼Œè¿˜æ˜¯å•ç‹¬ä½¿ç”¨fetch&amp;mergeçš„å¥½ã€‚ Generally itâ€™s better to simply use the fetch and merge commands explicitly as the magic of git pull can often be confusing. Deleting Remote Branchesä½¿ç”¨git push origin --delete &lt;branch_name&gt;æ¥åˆ é™¤æœåŠ¡å™¨ä¸Šçš„æŸä¸ªåˆ†æ”¯ 123$ git push origin --delete serverfixTo https://github.com/schacon/simplegit - [deleted] serverfix è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œgit push origin :&lt;branch_name&gt;ï¼Œèƒ½èµ·åˆ°åŒæ ·çš„ä½œç”¨ 123$ git push origin :feature/8.0.0_bugfix_leiliTo git@code.dianpingoa.com:mobile/android-nova-booking.git - [deleted] feature/8.0.0_bugfix_leili è®°ä½ï¼Œæ‰€åˆ é™¤çš„â€œåˆ†æ”¯â€æœ¬è´¨ä¸Šåªæ˜¯â€œæŒ‡é’ˆâ€ï¼Œæ‰€æœ‰çš„ä»£ç snapshotä¾æ—§ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥éšæ—¶checkå‡ºæ¥ Rebasingæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹ ä¸Mergeåˆ†åº­æŠ—ç¤¼çš„å¦ä¸€ä¸ªå¼ºæœ‰åŠ›çš„åŠŸèƒ½â€”â€”Rebaseã€‚ä¸¤è€…åŒæ˜¯å°†ä¸åŒåˆ†æ”¯ä¸Šçš„æäº¤åˆå¹¶åˆ°ä¸€èµ·çš„åŠŸèƒ½ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿå®¹ç¬”è€…ç»†ç»†é“æ¥ã€‚é¦–å…ˆæ¥çœ‹ä¸€ä¸ªç†Ÿæ‚‰çš„åœºæ™¯ï¼Œæœ‰masterå’Œexperimentä¸¤ä¸ªåˆ†æ”¯ï¼Œå¯¹mergeè€Œè¨€ï¼Œå¦‚æœåœ¨masteråˆ†æ”¯çš„åŸºç¡€ä¸Šï¼Œå¯¹experimentè¿›è¡Œmergeï¼ŒGitä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼ˆC5ï¼‰ï¼ŒåŒ…å«äº†ä¸¤ä¸ªåˆ†æ”¯æœ€è¿‘çš„å…±åŒç¥–å…ˆï¼ˆC2ï¼‰ä»¥æ¥å‘ç”Ÿçš„æ‰€æœ‰å˜æ›´ï¼ˆC4å’ŒC3ï¼‰ï¼Œæœ€åæŠŠmasterçš„æŒ‡é’ˆæŒ‡å‘C5 è€Œå¯¹äºrebaseï¼Œæˆ‘ä»¬è¿™ä¹ˆæ“ä½œã€‚æ³¨æ„HEADæŒ‡å‘çš„æ˜¯experimentåˆ†æ”¯ã€‚ 1234$ git checkout experiment$ git rebase masterFirst, rewinding head to replay your work on top of it...Applying: added staged command éå¸¸ç¥å¥‡åœ°ï¼ŒC4è¿™ä¸ªcommitæ¶ˆå¤±äº†ï¼ï¼ï¼ï¼Œå–è€Œä»£ä¹‹ï¼ŒGitåœ¨C3åé¢åˆ›å»ºäº†C4â€™ï¼ŒåŒæ—¶å°†experimentçš„æŒ‡é’ˆè½¬ç§»åˆ°äº†è¿™é‡Œã€‚æ•´ä¸ªæäº¤å†å²å˜æˆäº†ä¸€æ ¹ç›´çº¿ï¼Œæ¸…çˆ½äº†è®¸å¤šã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®©master move forwardï¼Œä»¥åˆå¹¶experimentå¸¦æ¥çš„æ”¹åŠ¨ã€‚ 12$ git checkout master$ git merge experiment æ³¨æ„ï¼è™½ç„¶mergeä¸rebaseçœ‹èµ·æ¥éƒ½æ˜¯æŠŠä¸¤ä¸ªåˆ†æ”¯ä¸Šçš„æ”¹åŠ¨åˆå¹¶åˆ°ä¸€èµ·ï¼Œä½†ä¸€ä¸ªæ˜¯â€œåŒæ—¶åˆå¹¶Aå’ŒBâ€ï¼Œä¸€ä¸ªæ˜¯â€œå°†Aåˆå¹¶åˆ°Bâ€ï¼Œä»”ç»†ä½“ä¼šå…¶ä¸­çš„ä¸åŒã€‚ Rebasing replays changes from one line of work onto another in the order they were introduced, whereas merging takes the endpoints and merges them together. æœ‰è¶£çš„Rebasing æƒ³è±¡ä¸Šé¢ä¸€ä¸ªåœºæ™¯ï¼Œå¯¹äºmaster server clientä¸‰ä¸ªåˆ†æ”¯ï¼Œå¦‚æœæˆ‘æƒ³è¦å°†clientä¸Šçš„æ”¹åŠ¨æäº¤åˆ°masterï¼ˆC8å’ŒC9ï¼‰ï¼Œè€Œæš‚æ—¶ä¸æƒ³åˆå¹¶serverä¸Šçš„ä»£ç ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ 12$ git checkout cient$ git rebase master ä¸Šè¿°è¿™æ ·è‚¯å®šä¸è¡Œï¼Œå› ä¸ºä¼šæŠŠC3å¸¦è¿‡å»ã€‚é’ˆå¯¹è¿™ç§åœºæ™¯ï¼ŒGitä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¸ªåŠŸèƒ½ 1$ git rebase --onto master server client æ˜¯ä¸æ˜¯æœ‰ç‚¹ä¸€å¤´é›¾æ°´ï¼Ÿè¿™éƒ½ä»€ä¹ˆé¬¼å•Šï¼åˆ«æ€¥ï¼Œæˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹è¿™æ®µæŒ‡ä»¤ã€‚ This basically says, â€œCheck out the client branch, figure out the patches from the common ancestor of the client and server branches, and then replay them onto master.â€ æ˜ç™½äº†å§ï¼ä¸è¿‡ï¼Œè™½ç„¶è¿™çœ‹ä¸Šå»å¾ˆç¥å¥‡ï¼Œç¬”è€…å¯ä¸å¸Œæœ›åœ¨å®é™…çš„å·¥ä½œä¸­ç¢°åˆ°è¿™ç§å¤æ‚çš„åœºæ™¯ã€‚Rebaseåçš„æäº¤å†å²å¦‚å›¾ï¼š æ¥ä¸‹æ¥è¯¥æ€ä¹ˆåšï¼Œç›¸ä¿¡ä¸ç”¨æˆ‘è¯´ï¼Œä½ ä¹ŸçŸ¥é“äº†â€”â€”æŠŠmaster fast forwardè¿‡å»ï½ 12$ git checkout master$ git merge client å½“ä½ å®Œæˆäº†serveråˆ†æ”¯çš„å¼€å‘ï¼Œç‹ ç‹ åœ°ç”¨rebaseæŠŠå®ƒç”©åœ¨masterè„¸ä¸Šå§ï¼Œgit rebase [basebranch] [topicbranch]â€”â€”å°†topicbranchä¸Šçš„æ”¹åŠ¨åœ¨basebranchä¸Šé‡æ”¾ï¼ˆchecks out the topic branch (in this case, server) for you and replays it onto the base branch (master)ï¼‰ 1$ git rebase master server åˆ é™¤æ— ç”¨åˆ†æ”¯åï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæ— æ¯”æ¸…çˆ½çš„æäº¤è®°å½• Rebaseçš„é£é™©Rebaseæ˜¯ä¸€ä¸ªæ— æ¯”å¼ºå¤§çš„å·¥å…·ï¼Œå€ŸåŠ©å®ƒï¼Œæˆ‘ä»¬å¯ä»¥å°†é¡¹ç›®æäº¤å†å²æ¢³ç†æˆä¸€æ¡ç›´çº¿ï¼Œç„¶è€Œï¼Œå¦‚æœåº”ç”¨ä¸å½“ï¼Œå®ƒäº§ç”Ÿçš„éº»çƒ¦è¦è¿œè¿œå¤§äºå¸¦æ¥çš„å¥½å¤„ã€‚ Do not rebase commits that exist outside your repository. ç®€å•çš„è¯´ï¼Œå¦‚æœä¸€ä¸ªcommitå·²ç»è¢«å…¬å¸ƒç»™å…¶ä»–äººä½¿ç”¨ï¼Œé‚£å°±ä¸è¦è¯•å›¾å†rebaseå®ƒã€‚å¦‚æœä½ éµå®ˆäº†è¿™æ¡å‡†åˆ™ï¼Œä¸€åˆ‡å®‰å¥½ï¼›å¯ä¸€æ—¦ä½ è¿åäº†ä»–ï¼Œä½ çš„åŒäº‹å°†ä¼šæ¨ä½ å…¥éª¨â€¦â€¦ä¸‹é¢ç”¨å‡ å¼ å›¾æ¥è¯´æ˜è¿™ç§æ·±åˆ»ä»‡æ¨çš„æ¥æº é¦–å…ˆæ˜¯ä¸€ä¸ªç®€å•çš„åˆ†æ”¯æ¨¡å‹ï¼Œteamoneå’Œä½ æ­£åœ¨åˆä½œä¸­ï¼Œæ˜¾ç„¶ä½ çš„å·¥ä½œæ•ˆç‡æ›´é«˜äº›ï¼Œå·²ç»æäº¤äº†C2ã€C3ä¸¤æ¬¡ è¿œç«¯ä»“åº“ä¹Ÿæœ‰ä¸€äº›æ›´æ–°ï¼Œè€Œä¸”ä»–ä»¬ç”¨åˆ°äº†mergeï¼ŒçœŸæ˜¯å‰å®³å•Šï¼ä½ å½“ç„¶ä¸ç”˜ç¤ºå¼±ï¼Œç«‹å³æŠŠä»–ä»¬çš„æäº¤mergeäº†è¿‡æ¥ã€‚ è¿™æ—¶ï¼Œè¿œç«¯teamå‘ç°mergeä¸å¦‚rebaseå¥½ç”¨ï¼Œä»–ä»¬ä½¿ç”¨éå¸¸é‚ªæ¶çš„git push --forceå‘½ä»¤ï¼Œè¦†ç›–æ‰äº†ä»£ç ä»“åº“ä¸­çš„å†å²ï¼Œæ„å›¾æŠ¹æ€æ‰mergeçš„å‡ºç°ã€‚ å¤©çœŸçš„ä½ å¹¶æ²¡æœ‰å‘ç°ä»–ä»¬çš„é‚ªæ¶ä¼å›¾ï¼Œå½“ä½ fetchæ—¶å€™ï¼Œå‘ç°è¿œç«¯ä»“åº“æœ‰äº†æ›´æ–°ï¼Œä½ è‡ªç„¶æƒ³å†mergeä¸€æŠŠï¼Œä»¥ä¿æŒæœ€æ–°ä»£ç  Boomï¼ç¾éš¾å‘ç”Ÿäº†ï¼Œç”±äºC4å’ŒC4â€™å®é™…ä¸Šæ˜¯ä¸€æ¨¡ä¸€æ ·çš„æ”¹åŠ¨ï¼ˆå®é™…ä¸Šï¼Œå¦‚æœä½ ç”¨git logæ¥æŸ¥çœ‹ï¼Œä½ ä¼šå‘ç°è¿™ä¸¤ä¸ªæäº¤ç”šè‡³æœ‰å®Œå…¨ç›¸åŒçš„authorã€dateã€messageï¼Œå½“ç„¶ä»–ä»¬çš„SHA1æ˜¯ä¸åŒçš„ï¼‰ã€‚è€Œä¸”ï¼Œå°±ç®—ä½ è§£å†³äº†å†²çªï¼ŒæŠŠä½ çš„ä»£ç æ¨é€å›è¿œç«¯æ—¶ï¼Œé‚ªæ¶çš„ä»–ä»¬å‘ç°ï¼ŒåŸæ¥è®©ä»–ä»¬é¿ä¹‹ä¸åŠçš„C4å’ŒC6è¿™ä¸¤ä¸ªæäº¤â€”â€”They are backï¼ Rebase When You Rebaseä¸€æ—¦å‡ºç°äº†ä¸Šé¢çš„æƒ…å†µï¼Œä¸è¦æ…Œï¼ŒGitä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³è¿™ç§é—®é¢˜çš„é€”å¾„ï¼Œé‚£å°±æ˜¯â€”â€”Rebaseï¼è¿™æ—¶ä½ checkoutåˆ°è‡ªå·±çš„masteråˆ†æ”¯ä¸Šï¼Œæ‰§è¡Œgit rebase teamone/masterï¼ŒGitä¼šä¸ºä½ åšä»¥ä¸‹äº‹æƒ…ï¼ˆå®åœ¨æ˜¯æ‡’å¾—ç¿»è¯‘äº†ï¼‰ Determine what work is unique to our branch (C2, C3, C4, C6, C7) Determine which are not merge commits (C2, C3, C4) Determine which have not been rewritten into the target branch (just C2 and C3, since C4 is the same patch as C4â€™) Apply those commits to the top of teamone/master æœ€åå¾—åˆ°å¦‚å›¾çš„æäº¤å†å²ã€‚éœ€è¦æ³¨æ„ï¼Œåªæœ‰å½“C4å’ŒC4â€™å‡ ä¹å®Œå…¨ä¸€è‡´æ—¶ï¼ŒGitæ‰ä¼šé‡‡å–ä»¥ä¸Šç­–ç•¥ã€‚ä¸ç„¶ï¼Œå³ä½¿å¦‚ä¸Šæ“ä½œï¼Œä¾ç„¶ä¼šäº§ç”Ÿå†²çªã€‚ Rebase vs. Mergeå…³äºRebaseå’ŒMergeè¯¥ç”¨å“ªä¸ªçš„é—®é¢˜ï¼Œè¦å› åœ°åˆ¶å®œâ€”â€”Rebaseå¯ä»¥æå¤§ç®€åŒ–æäº¤å†å²ï¼Œä½†å®ƒä¼šç¯¡æ”¹æäº¤è®°å½•ï¼Œè€ŒMergeå¯ä»¥åŸæ±åŸå‘³åœ°ä¿å­˜æ¯ä¸ªäººçš„æäº¤æ—¶é—´ä¸å†…å®¹ã€‚åº”å½“è®°ä½ï¼Œä¸è®ºä½¿ç”¨å“ªä¸€ä¸ªï¼Œéƒ½è¦æŒ‰ç…§åŸºæœ¬æ³•ã€‚ In general the way to get the best of both worlds is to rebase local changes youâ€™ve made but havenâ€™t shared yet before you push them in order to clean up your story, but never rebase anything youâ€™ve pushed somewhere. ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"ProGitè¯»ä¹¦ç¬”è®°ï¼ˆChapter2ï¼‰","date":"2016-02-14T11:21:22.000Z","path":"2016/02/14/ProGitè¯»ä¹¦ç¬”è®°Chapter2/","text":"2016å¹´æ˜¥èŠ‚å‰å¤§æ¦‚ä¸€å‘¨æ—¶é—´ï¼Œå¿˜äº†ä»€ä¹ˆå¥‘æœºï¼Œå¿½ç„¶è§‰å¾—è‡ªå·±ç”¨äº†Gitè¿™ä¹ˆä¹…ï¼Œä¸€ç›´å¤„äºä¸€çŸ¥åŠè§£çš„çŠ¶æ€ï¼Œè€ŒGitä½œä¸ºä¸€ä¸ªå‡ºè‰²çš„VCSï¼Œè‡ªé—®ä¸–ä»¥æ¥é•¿ç››ä¸è¡°ï¼Œä¸€å®šæœ‰å…¶é“ç†ã€‚æœ¬ç€â€œä¸ä½†è¦çŸ¥å…¶ç„¶ï¼Œè¿˜è¦çŸ¥å…¶æ‰€ä»¥ç„¶â€çš„æ€åº¦ï¼Œå†³å®šè®¤çœŸè¯»ä¸€è¯»ã€ŠPro Gitã€‹ã€‚è¯´æ¥æƒ­æ„§ï¼Œç»„å†…æœ€å¼€å§‹ä»Subversionè¿ç§»åˆ°Gitæ—¶ï¼Œä¸€æ–°å°±å‘å¤§å®¶æ¨èè¿‡è¿™æœ¬ä¹¦ï¼Œå½“æ—¶è‡ªå·±ç®€å•ç¿»äº†ç¿»ï¼Œç”±äºæœ‰å…¶ä»–äº‹æƒ…å°±è€½æä¸‹ï¼Œä¸€ç›´æ²¡æœ‰å†æ‰“å¼€è¿‡ã€‚ Chapter 2. Git Basicsç¬¬äºŒç« ä¸»è¦è®²äº†å¦‚ä½•å°†ä¸€ä¸ªæ–‡ä»¶æ·»åŠ è¿›VCSã€æäº¤æ”¹åŠ¨ã€å†å²æŸ¥çœ‹ã€æ’¤é”€æ“ä½œã€Tagã€‚ æ–‡ä»¶çŠ¶æ€Gitä¸­æœ‰å››ç§æ–‡ä»¶çŠ¶æ€ï¼Œç›¸äº’é—´è½¬æ¢å…³ç³»è§ä¸‹å›¾ ä½¿ç”¨Gitæ—¶ï¼Œè¦å¤šå¤šç”¨git statusæ¥æŸ¥çœ‹å½“å‰æ–‡ä»¶çŠ¶æ€ åŒä¸€ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥åŒæ—¶å¤„äºmodifiedå’Œstagedä¸¤ç§çŠ¶æ€çš„ï¼Œè¯•ç€edit-add-editï¼Œä½ å°±ä¼šå‘ç° git status --shortå¯ä»¥ç”¨æ¥æŸ¥çœ‹æ›´ç®€çŸ­çš„æ–‡ä»¶çŠ¶æ€æè¿°ï¼Œç”¨å¤„ä¸å¤§ .gitignoreå¯¹äºä¸æƒ³åŠ å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­çš„æ–‡ä»¶ï¼ˆIDEç”Ÿæˆæ–‡ä»¶ã€ç¼–è¯‘ä¸­é—´æ–‡ä»¶ç­‰ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨.gitignoreæ¥å‘Šè¯‰Gitç³»ç»Ÿï¼Œä¸éœ€è¦å…³æ³¨è¿™äº›æ–‡ä»¶ã€‚gitignoreçš„ä¾‹å­å¦‚ä¸‹ï¼Œä»¥#å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šï¼Œä¼šè¢«Gitå¿½ç•¥æ‰ã€‚1234567891011121314151617# no .a files*.a# but do track lib.a, even though you&apos;re ignoring .a files above!lib.a# only ignore the TODO file in the current directory, not subdir/TODO/TODO# ignore all files in the build/ directorybuild/# ignore doc/notes.txt, but not doc/server/arch.txtdoc/*.txt# ignore all .pdf files in the doc/ directorydoc/**/*.pdf git diffgit diffç”¨æ¥æŸ¥çœ‹è¿›è¡Œçš„æ”¹åŠ¨ï¼Œæ§åˆ¶å°çš„è¾“å‡ºä¸å¤Ÿç›´è§‚ï¼Œå°¤å…¶æ˜¯æ”¹åŠ¨å¾ˆå¤šçš„æ—¶å€™ã€‚æ¨èä½¿ç”¨GUIè¿›è¡ŒæŸ¥çœ‹ï¼ˆéœ€è¦åœ¨.gitconfigä¸­è¿›è¡Œé…ç½®ï¼Œä½ç½®æ˜¯~/.gitconfigï¼‰ï¼Œç›®å‰ç¬”è€…åœ¨ç”¨çš„æ˜¯DiffMergeï¼ŒåŸºæœ¬æ»¡è¶³æ—¥å¸¸ä½¿ç”¨éœ€æ±‚ã€‚ git diffç”¨æ¥æŸ¥çœ‹modifiedçš„å˜æ›´ã€‚ git diff --cachedåŒgit diff --stagedä½œç”¨ä¸€æ ·ï¼Œç”¨æ¥æŸ¥çœ‹stagedçš„å˜æ›´ git commitä½¿ç”¨git commitå°†æ”¹åŠ¨æäº¤åˆ°ä»“åº“ï¼Œä»¥åˆ›å»ºä¸€ä¸ªSnapshotã€‚Snapshotæ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œæ˜¯Gitå†…éƒ¨å®ç°çš„æœ€å…³é”®æœºåˆ¶ï¼Œä¹Ÿæ˜¯Gitèƒ½å¤Ÿè¶…è¶ŠSubversionç­‰å…¶ä»–VCSçš„æ€æ‰‹çº§ç‰¹æ€§ï¼Œè¿™ä¸€ç‚¹å°†åœ¨Chapter3ä¸­è¿›è¡Œè¯´æ˜ã€‚ ç›´æ¥è¾“å…¥git commitåï¼Œå°†ä¼šæ‰“å¼€ä¸€ä¸ªç¼–è¾‘å™¨é¡µé¢ï¼ˆç¬”è€…ç”¨çš„æ˜¯Vimï¼Œå¯ä»¥åœ¨gitconfigä¸­é…ç½®ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼š 1234567891011# Please enter the commit message for your changes. Lines starting# with &apos;#&apos; will be ignored, and an empty message aborts the commit.# On branch master# Changes to be committed:# new file: README# modified: CONTRIBUTING.md#~~~&quot;.git/COMMIT_EDITMSG&quot; 9L, 283C å¯ä»¥åœ¨å…¶ä¸­ç¼–è¾‘æœ¬æ¬¡æäº¤ä¿¡æ¯ï¼Œå¦‚æœä¸å†™ä»»ä½•ä¸œè¥¿çš„è¯ï¼ŒGitæ˜¯ä¸ä¼šæ‰¿è®¤æœ¬æ¬¡commitçš„ã€‚ å¦‚æœä¸æƒ³æ‰“å¼€ç¼–è¾‘å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨commitæ—¶åŠ ä¸Š-må‚æ•°ï¼Œå¦‚ä¸‹ 1$ git commit -m &quot;Story 182: Fix benchmarks for speed&quot; å¯ä»¥ç”¨-a -mæˆ–è€…-amæŠŠstageã€commitä¸¤ä¸ªæ“ä½œä¸€èµ·å®Œæˆ 123456789101112$ git statusOn branch masterChanges not staged for commit: (use \"git add &amp;lt;file&amp;gt;...\" to update what will be committed) (use \"git checkout -- &amp;lt;file&amp;gt;...\" to discard changes in working directory) modified: CONTRIBUTING.mdno changes added to commit (use \"git add\" and/or \"git commit -a\")$ git commit -a -m 'added new benchmarks'[master 83e38c7] added new benchmarks 1 file changed, 5 insertions(+), 0 deletions(-) Removing Filesç›´æ¥rmæ–‡ä»¶çš„è¯ï¼Œæ–‡ä»¶æ˜¯å¤„äºunstagedçŠ¶æ€çš„ï¼Œæ­¤æ—¶éœ€è¦å…ˆaddï¼Œå†commit 1234567891011$ rm PROJECTS.md$ git statusOn branch masterYour branch is up-to-date with 'origin/master'.Changes not staged for commit: (use \"git add/rm &amp;lt;file&amp;gt;...\" to update what will be committed) (use \"git checkout -- &amp;lt;file&amp;gt;...\" to discard changes in working directory) deleted: PROJECTS.mdno changes added to commit (use \"git add\" and/or \"git commit -a\") æˆ–è€…ç›´æ¥ç”¨git rmï¼Œå°†æ–‡ä»¶ç›´æ¥ç½®äºstagedçŠ¶æ€ 12345678$ git rm PROJECTS.mdrm 'PROJECTS.md'$ git statusOn branch masterChanges to be committed: (use \"git reset HEAD &amp;lt;file&amp;gt;...\" to unstage) deleted: PROJECTS.md å¦å¤–ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å‚æ•°æ˜¯--cachedï¼Œç”¨æ¥å°†æ–‡ä»¶ä»stagedçŠ¶æ€è½¬ç§»åˆ°untrackedã€‚å¦‚æœåœ¨æœ€åˆç¼–è¾‘.gitignoreæ—¶æ¼å†™äº†æŸä¸ªæ–‡ä»¶ï¼Œåé¢å‘ç°Gitå·²ç»è®°å½•äº†è¿™ä¸ªæ–‡ä»¶çš„å˜æ›´ï¼Œå¯ä»¥å…ˆç”¨--cachedå‚æ•°åœæ­¢trackè¯¥æ–‡ä»¶ï¼Œç„¶åç¼–è¾‘.gitignoreï¼Œå°†æ–‡ä»¶æ·»åŠ è¿›å»ã€‚ 1$ git rm --cached README Moving FilesåŒæ ·ï¼Œå¯ä»¥ç”¨git mvæ¥å®Œæˆæ–‡ä»¶é‡å‘½å 1234567$ git mv README.md README$ git statusOn branch masterChanges to be committed: (use &quot;git reset HEAD &amp;lt;file&amp;gt;...&quot; to unstage) renamed: README.md -&amp;gt; README æ— æ¯”é‡è¦çš„ git loggit logç”¨æ¥æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æŸ¥çœ‹å†å²ï¼Œå¦‚æœä¸åŠ ä»»ä½•å‚æ•°ï¼Œé»˜è®¤è¾“å‡ºæ¯æ¬¡æäº¤çš„SHA1å€¼ã€æäº¤è€…ã€æäº¤æ—¶é—´ã€æäº¤ä¿¡æ¯ 123456789101112131415161718$ git logcommit ca82a6dff817ec66f44342007202690a93763949Author: Scott Chacon &lt;schacon@gee-mail.com&gt;Date: Mon Mar 17 21:52:11 2008 -0700 changed the version numbercommit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7Author: Scott Chacon &lt;schacon@gee-mail.com&gt;Date: Sat Mar 15 16:40:33 2008 -0700 removed unnecessary testcommit a11bef06a3f659402fe7563abf99ad00de2209e6Author: Scott Chacon &lt;schacon@gee-mail.com&gt;Date: Sat Mar 15 10:31:28 2008 -0700 first commit ä½¿ç”¨-på‚æ•°å¯ä»¥å±•ç¤ºæ¯æ¬¡æäº¤çš„æ–‡ä»¶å…·ä½“æ”¹åŠ¨ï¼Œä½¿ç”¨-[num]ï¼ˆå¦‚-2ï¼‰æ¥æ§åˆ¶æ˜¾ç¤ºçš„commitæ•° 1234567891011121314151617181920212223242526272829303132333435363738394041$ git log -p -2commit ca82a6dff817ec66f44342007202690a93763949Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;Date: Mon Mar 17 21:52:11 2008 -0700 changed the version numberdiff --git a/Rakefile b/Rakefileindex a874b73..8f94139 100644--- a/Rakefile+++ b/Rakefile@@ -5,7 +5,7 @@ require 'rake/gempackagetask' spec = Gem::Specification.new do |s| s.platform = Gem::Platform::RUBY s.name = \"simplegit\"- s.version = \"0.1.0\"+ s.version = \"0.1.1\" s.author = \"Scott Chacon\" s.email = \"schacon@gee-mail.com\" s.summary = \"A simple gem for using Git in Ruby code.\"commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;Date: Sat Mar 15 16:40:33 2008 -0700 removed unnecessary testdiff --git a/lib/simplegit.rb b/lib/simplegit.rbindex a0a60ae..47c6340 100644--- a/lib/simplegit.rb+++ b/lib/simplegit.rb@@ -18,8 +18,3 @@ class SimpleGit end end--if $0 == __FILE__- git = SimpleGit.new- puts git.show-end\\ No newline at end of file å¦‚æœè§‰å¾—-på‚æ•°å±•ç¤ºçš„å¤ªå¤šäº†ï¼Œå°±ç”¨--statæ¥çœ‹æ”¹åŠ¨æ–‡ä»¶ä¸è¡Œæ•° 1234567891011121314151617181920212223242526272829$ git log --statcommit ca82a6dff817ec66f44342007202690a93763949Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;Date: Mon Mar 17 21:52:11 2008 -0700 changed the version number Rakefile | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-)commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;Date: Sat Mar 15 16:40:33 2008 -0700 removed unnecessary test lib/simplegit.rb | 5 ----- 1 file changed, 5 deletions(-)commit a11bef06a3f659402fe7563abf99ad00de2209e6Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;Date: Sat Mar 15 10:31:28 2008 -0700 first commit README | 6 ++++++ Rakefile | 23 +++++++++++++++++++++++ lib/simplegit.rb | 25 +++++++++++++++++++++++++ 3 files changed, 54 insertions(+) --prettyå‚æ•°å¯ä»¥ç¾åŒ–ä¿¡æ¯å±•ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªå¤åˆå‚æ•°ï¼Œæœ‰onelineã€shortã€fullã€fullerç­‰é€‰æ‹© 1234$ git log --pretty=onelineca82a6dff817ec66f44342007202690a93763949 changed the version number085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary testa11bef06a3f659402fe7563abf99ad00de2209e6 first commit æˆ–è€…è‡ªå·±å®šåˆ¶è¾“å‡ºæ¨¡ç‰ˆ 1234$ git log --pretty=format:\"%h - %an, %ar : %s\"ca82a6d - Scott Chacon, 6 years ago : changed the version number085bb3b - Scott Chacon, 6 years ago : removed unnecessary testa11bef0 - Scott Chacon, 6 years ago : first commit æ¨¡ç‰ˆå‚æ•°å®šä¹‰å¦‚ä¸‹ Option Description of Output %H Commit hash %h Abbreviated commit hash %T Tree hash %t Abbreviated tree hash %P Parent hashes %p Abbreviated parent hashes %an Author name %ae Author email %ad Author date (format respects the â€“date=option) %ar Author date, relative %cn Committer name %ce Committer email %cd Committer date %cr Committer date, relative %s Subject åœ¨logä¸­ä½¿ç”¨--graphæ¥å±•ç¤ºASCIIæ ¼å¼çš„å›¾å½¢åŒ–æäº¤å†å²ï¼Œå»ºè®®ä½¿ç”¨æ›´å‚»ç“œçš„GUIå·¥å…·æ¥æŸ¥çœ‹ 1234567891011$ git log --pretty=format:\"%h %s\" --graph* 2d3acf9 ignore errors from SIGCHLD on trap* 5e3ee11 Merge branch 'master' of git://github.com/dustin/grit|\\| * 420eac9 Added a method for getting the current branch.* | 30e367c timeout code and tests* | 5a09431 add timeout protection to grit* | e1193f8 support for heads with slashes in them|/* d6016bc require time for xmlschema* 11d191e Merge branch 'defunkt' into local å¦‚æœæƒ³æŸ¥çœ‹ä¸¤å‘¨ä»¥æ¥çš„æäº¤ï¼Œç”¨--sinceå‚æ•°ï¼ŒåŒç†ï¼Œä¹Ÿæœ‰--untilå¯ä¾›ä½¿ç”¨ï¼Œåé¢å¯ä»¥æ¥2016-01-01è¿™æ ·çš„æ—¶é—´æ ¼å¼ 1$ git log --since=2.weeks -Så‚æ•°æŸ¥çœ‹æäº¤ä¸­åŒ…å«æŸä¸ªç‰¹å®šå­—æ®µå˜æ›´çš„logï¼Œæ¯”å¦‚ä½ æƒ³çœ‹å“ªäº›æäº¤æ”¹åˆ°äº†onCreateå‡½æ•°ï¼Œå°±è¿™ä¹ˆå†™ 1$ git log --SonCreate è¿˜æœ‰å…¶å®ƒé€‰æ‹©åŠŸèƒ½ï¼Œå¦‚æŸ¥çœ‹æŸäººçš„æäº¤--committerï¼ŒæŸ¥çœ‹åŒ…å«æŸäº›æ•æ„Ÿè¯çš„æäº¤--grepç­‰ç­‰ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º Option Description -(n) Show only the last n commits â€“since, â€“after Limit the commits to those made after the specified date. â€“until, â€“before Limit the commits to those made before the specified date. â€“author Only show commits in which the author entry matches the specified string. â€“committer Only show commits in which the committer entry matches the specified string. â€“grep Only show commits with a commit message containing the string -S Only show commits adding or removing code matching the string ä¸¾ä¸ªğŸŒ°ï¼Œç›´æ¥ç…§æ¬ä¹¦ä¸­çš„å¥½äº†ï¼š For example, if you want to see which commits modifying test files in the Git source code history are merged and were committed by Junio Hamano in the month of October 2008, you can run something like this: 12345678$ git log --pretty=\"%h - %s\" --author=gitster --since=\"2008-10-01\" \\ --before=\"2008-11-01\" --no-merges -- t/5610e3b - Fix testcase failure when extended attributes are in useacd3b9e - Enhance hold_lock_file_for_&#123;update,append&#125;() APIf563754 - demonstrate breakage of detached checkout with symbolic link HEADd1a43f2 - reset --hard/read-tree --reset -u: remove unmerged new paths51a94af - Fix \"checkout --track -b newbranch\" on detached HEADb0ad11e - pull: allow \"git pull origin $something:$current_branch\" into an unborn branch Undoing Thingså¦‚æœåœ¨ä¸€æ¬¡commitåï¼Œå‘ç°å¿˜äº†ä¿®æ”¹æŸä¸ªæ–‡ä»¶fooï¼Œé‚£è¦æ€ä¹ˆåŠï¼Ÿå½“ç„¶å¯ä»¥ä¿®æ”¹äº†fooåï¼Œç”¨git commit -amæ¥å¢åŠ ä¸€æ¬¡commitã€‚å¯å¦‚æœæƒ³ä¸ä¹‹å‰çš„commitå¹¶æˆä¸€ä¸ªå‘¢ï¼Ÿgitä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·çš„å·¥å…·--amend(amend: vt&amp;vi æ”¹è‰¯ï¼Œä¿®æ”¹ï¼Œä¿®è®¢)ã€‚Gitä¼šæ£€æŸ¥stagedåŒºåŸŸï¼Œå°†å…¶ä¸­çš„å˜æ›´ä¸ä¸Šä¸€ä¸ªcommitåˆå¹¶ï¼Œä½ è¿˜å¯ä»¥ä¿®æ”¹åˆå¹¶åçš„commitä¿¡æ¯ã€‚é’ˆå¯¹ä¸Šé¢çš„åœºæ™¯ 123$ git commit -m 'initial commit'$ git add forgotten_file$ git commit --amend å¦‚æœstagedåŒºåŸŸå¹¶æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ï¼Œ--amendå¯ä»¥ç”¨æ¥å•çº¯çš„ä¿®æ”¹commit messageï¼ŒåŒæ ·ååˆ†æœ‰ç”¨ã€‚ ä¸‹é¢è®²è®²ï¼Œè¦æ˜¯åœ¨stageæ–‡ä»¶åï¼Œåæ‚”äº†ï¼Œæƒ³è¦æŠŠæ–‡ä»¶å›æ»šï¼Œæ€ä¹ˆåŠï¼Ÿå…¶å®git statuså·²ç»ç»™äº†æˆ‘ä»¬æç¤ºï¼Œé‚£å°±æ˜¯git resetï¼Œè¦ç»“åˆHEADä½¿ç”¨ 1234567891011121314151617181920212223$ git add *$ git statusOn branch masterChanges to be committed: (use \"git reset HEAD &amp;lt;file&amp;gt;...\" to unstage) renamed: README.md -&amp;gt; README modified: CONTRIBUTING.md$ git reset HEAD CONTRIBUTING.mdUnstaged changes after reset:M CONTRIBUTING.md$ git statusOn branch masterChanges to be committed: (use \"git reset HEAD &amp;lt;file&amp;gt;...\" to unstage) renamed: README.md -&amp;gt; READMEChanges not staged for commit: (use \"git add &amp;lt;file&amp;gt;...\" to update what will be committed) (use \"git checkout -- &amp;lt;file&amp;gt;...\" to discard changes in working directory) modified: CONTRIBUTING.md ä¸Šé¢è¿™ç§ç”¨æ³•åªæ˜¯å›æ»šäº†stagedä¸­çš„æ–‡ä»¶ï¼Œå¦‚æœåŠ ä¸Š--hardå‚æ•°ï¼Œå¯å°±è¦æ…é‡äº†â€”â€”è¿™ä¼šæŠŠcommitå›æ»šæ‰ï¼Œè€Œä¸”ï¼Œä¸ç•™ç—•è¿¹ï¼ å¦‚æœæ–‡ä»¶è¿˜æ²¡æœ‰è¿›è¡Œstageï¼Œæ­£å¤„äºmodifiedï¼Œä½ æƒ³è¦å°†å®ƒå˜å›åˆ°unmodifiedï¼Œå°±ç”¨checkout --ã€‚åŒæ ·ï¼Œè¿™ä¸ªæ“ä½œä¸ä¼šä¿ç•™ä¹‹å‰çš„ä»»ä½•ä¿®æ”¹ï¼Œä¸å¸¦èµ°ä¸€ä¸äº‘å½©ã€‚ 1$ git checkout -- README.md Gitè¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªå¾ˆæœ‰åŠ›çš„å·¥å…·stashï¼Œç”¨æ¥æš‚å­˜ä¿®æ”¹ï¼Œé™äºç¯‡å¹…ï¼Œæš‚ä¸å±•å¼€ã€‚ Working With RemotesGitæ˜¯ä¸€ä¸ªå¼ºæœ‰åŠ›çš„åä½œå·¥å…·ï¼Œå¿…ä¸å¯å°‘åœ°ï¼Œä½ ä¼šå°†è‡ªå·±çš„ä»£ç æ¨é€åˆ°ä»“åº“ä¾›ä»–äººä½¿ç”¨ï¼Œä½ ä¹Ÿä¼šå°†ä»–äººå®Œæˆçš„ä»£ç ä»è¿œç«¯æ‹‰ä¸‹æ¥è¿›è¡Œè¿½è¸ªã€‚ git remote -vç”¨æ¥æŸ¥çœ‹æœ¬åœ°çš„åˆ†æ”¯ï¼ˆfetch &amp; pushï¼‰ï¼Œå¯¹äºå¤æ‚çš„é¡¹ç›®ï¼Œä¼šæœ‰å¤šä¸ªè¿œç«¯remoteï¼ˆå®åœ¨æ‰¾ä¸å‡ºè¿™ä¸ªè¯­å¢ƒä¸‹åˆé€‚çš„ç¿»è¯‘ï¼Œæ€»ä¸èƒ½è¯´â€œåˆ†æ”¯â€å§ï¼Œä¼šä¸branché‡å¤ï¼‰ 1234567891011$ git remote -vbakkdoor https://github.com/bakkdoor/grit (fetch)bakkdoor https://github.com/bakkdoor/grit (push)cho45 https://github.com/cho45/grit (fetch)cho45 https://github.com/cho45/grit (push)defunkt https://github.com/defunkt/grit (fetch)defunkt https://github.com/defunkt/grit (push)koke git://github.com/koke/grit.git (fetch)koke git://github.com/koke/grit.git (push)origin git@github.com:mojombo/grit.git (fetch)origin git@github.com:mojombo/grit.git (push) ä¸€èˆ¬æˆ‘ä»¬åªä¼šçœ‹åˆ°originä¸€ä¸ªremoteï¼Œä½¿ç”¨git remote addæ¥æ·»åŠ remote 12345678$ git remoteorigin$ git remote add pb https://github.com/paulboone/ticgit$ git remote -vorigin https://github.com/schacon/ticgit (fetch)origin https://github.com/schacon/ticgit (push)pb https://github.com/paulboone/ticgit (fetch)pb https://github.com/paulboone/ticgit (push) pbæ˜¯æˆ‘ä»¬èµ·çš„åˆ«åï¼Œç„¶åä½¿ç”¨fetchæ¥æ›´æ–°è¿™ä¸ªremote 12345678$ git fetch pbremote: Counting objects: 43, done.remote: Compressing objects: 100% (36/36), done.remote: Total 43 (delta 10), reused 31 (delta 5)Unpacking objects: 100% (43/43), done.From https://github.com/paulboone/ticgit * [new branch] master &gt; pb/master * [new branch] ticgit &gt; pb/ticgit ä¹Ÿå¯ä»¥ä¸æŒ‡å®šremoteåç§°ï¼Œç›´æ¥fetchæ‰€æœ‰remote è®²å®Œäº†ä¸‹è½½ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä¸Šä¼ ã€‚git push [remote-name] [branch-name]ï¼Œç°å¸¸ç®€å• 1$ git push origin master git remote show [remote-name]å‘½ä»¤å¯ä»¥ç”¨æ¥è§‚å¯ŸæŸä¸ªremoteçš„çŠ¶æ€ï¼Œæ³¨æ„ï¼è¿™é‡Œè§‚å¯Ÿçš„å¹¶ä¸æ˜¯è¿œç«¯å®æ—¶çŠ¶æ€ï¼Œè€Œæ˜¯æœ¬åœ°ä¸Šä¸€æ¬¡ä¸‹è½½ä¸‹æ¥çš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ æƒ³è§‚å¯Ÿæœ€æ–°çŠ¶æ€ï¼Œéœ€è¦å…ˆfetch 1234567891011121314151617181920$ git remote show origin* remote origin URL: https://github.com/my-org/complex-project Fetch URL: https://github.com/my-org/complex-project Push URL: https://github.com/my-org/complex-project HEAD branch: master Remote branches: master tracked dev-branch tracked markdown-strip tracked issue-43 new (next fetch will store in remotes/origin) issue-45 new (next fetch will store in remotes/origin) refs/remotes/origin/issue-11 stale (use 'git remote prune' to remove) Local branches configured for 'git pull': dev-branch merges with remote dev-branch master merges with remote master Local refs configured for 'git push': dev-branch pushes to dev-branch (up to date) markdown-strip pushes to markdown-strip (up to date) master pushes to master (up to date) å¦‚æœä½ è§‰å¾—æŸä¸ªremoteçš„åå­—èµ·çš„å¤ªåœŸæ°”äº†ï¼Œä½¿ç”¨git remote rename [old_name] [new_name]æ¥ä¿®æ”¹ 1234$ git remote rename pb paul$ git remoteoriginpaul åŒæ ·ï¼Œä½¿ç”¨git remote rm [remote_name]æ¥åˆ é™¤ï¼ˆå¯æ€œçš„paulï¼‰ 123$ git remote rm paul$ git remoteorigin Taggingä½ å®Œæˆäº†ä¸€ä¸ªç‰ˆæœ¬çš„å…¨éƒ¨éœ€æ±‚ï¼Œå·²ç»ä¿¡å¿ƒæ»¡æ»¡åœ°è¿›è¡Œäº†ä¸Šçº¿ï¼Œå¹¶ä¸”çº¿ä¸Šå…¨é¢å›å½’è¿‡ï¼Œä¸€åˆ‡æ­£å¸¸â€”â€”ä½ ä»¥ä¸ºå…¨éƒ¨çš„å·¥ä½œéƒ½å®Œæˆäº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼ä½ éœ€è¦è®°å½•ä¸‹æœ¬æ¬¡æäº¤ä½œä¸ºä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼ŒGitæä¾›äº†Tagè¿™ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚ æŸ¥çœ‹ç›®å‰çš„tagï¼Œæ³¨æ„æ˜¯ä»¥alphabeticalé¡ºåºæ’åˆ—çš„ï¼Œå¹¶éæ—¶é—´ 123$ git tagv0.1v1.3 ä½¿ç”¨-lå‚æ•°æŸ¥çœ‹åŒ…å«æŸä¸ªæ•æ„Ÿè¯çš„tag 123456789$ git tag -l \"v1.8.5*\"v1.8.5v1.8.5-rc0v1.8.5-rc1v1.8.5-rc2v1.8.5-rc3v1.8.5.1v1.8.5.2v1.8.5.3 æœ‰ä¸¤ç§Tagï¼šlightweightedå’Œannotatedã€‚å‰è€…éå¸¸ç®€å•ï¼Œåªæ˜¯ä¸€ä¸ªtag nameï¼Œä¸åŒ…å«ä»»ä½•å…¶ä»–ä¿¡æ¯ã€‚åè€…åˆ™è®°å½•äº†tagger nameã€emailã€dateã€messageç­‰ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥ç”¨GNU Privacy Guard (GPG)è¿›è¡Œç­¾åå’Œæ ¡éªŒã€‚ç¬”è€…å¼ºçƒˆå»ºè®®ä½¿ç”¨annotatedè¿›è¡Œæ‰“Tagã€‚ annotated tag 12345$ git tag -a v1.4 -m \"my version 1.4\"$ git tagv0.1v1.3v1.4 ç”¨git show [tag_name]æŸ¥çœ‹ä¸€ä¸‹ 123456789101112$ git show v1.4tag v1.4Tagger: Ben Straub &amp;lt;ben@straub.cc&amp;gt;Date: Sat May 3 20:19:12 2014 -0700my version 1.4commit ca82a6dff817ec66f44342007202690a93763949Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;Date: Mon Mar 17 21:52:11 2008 -0700 changed the version number lightweighted tag 12345678910111213$ git tag v1.4-lw$ git tagv0.1v1.3v1.4v1.4-lwv1.5$ git show v1.4-lwcommit ca82a6dff817ec66f44342007202690a93763949Author: Scott Chacon &lt;schacon@gee-mail.com&gt;Date: Mon Mar 17 21:52:11 2008 -0700 changed the version number çœ‹åˆ°äº†æ²¡ï¼Œå¯¹äºè¿™ç§tagï¼Œå¹¶æ²¡æœ‰æä¾›commitä¹‹å¤–çš„ä»»ä½•ä¿¡æ¯ã€‚ å¦‚æœä½ æƒ³è¦å¯¹å‡ å¤©ä¹‹å‰çš„æŸä¸€ä¸ªcommitæ‰“tagï¼Œæ€ä¹ˆåŠï¼Ÿéš¾é“gitåªèƒ½åœ¨æœ€æ–°æäº¤ä¸Šæ‰“Tagå—ï¼Ÿå›¾æ ·å›¾æ£®ç ´ï¼ 123456789101112131415161718192021$ git tag -a v1.2 9fceb02$ git tagv0.1v1.2v1.3v1.4v1.4-lwv1.5$ git show v1.2tag v1.2Tagger: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;Date: Mon Feb 9 15:32:16 2009 -0800version 1.2commit 9fceb02d0ae598e95dc970b74767f19372d61af8Author: Magnus Chacon &amp;lt;mchacon@gee-mail.com&amp;gt;Date: Sun Apr 27 20:43:35 2008 -0700 updated rakefile... çœ‹åˆ°æ²¡ï¼Œåªéœ€è¦åœ¨åé¢æ‹¼ä¸Šchecksumï¼ˆå¯ä»¥åªæ˜¯ä¸€éƒ¨åˆ†ï¼‰ï¼Œå°±å¯ä»¥äº† æŒ‰ç…§ä¸Šé¢çš„æŒ‡ç¤ºï¼Œä½ åœ¨æœ¬åœ°æ‰“å¥½äº†Tagï¼Œè®©æˆ‘ä»¬æŠŠå®ƒæ¨é€åˆ°ä»“åº“ 12345678$ git push origin v1.5Counting objects: 14, done.Delta compression using up to 8 threads.Compressing objects: 100% (12/12), done.Writing objects: 100% (14/14), 2.05 KiB | 0 bytes/s, done.Total 14 (delta 3), reused 0 (delta 0)To git@github.com:schacon/simplegit.git * [new tag] v1.5 &gt; v1.5 å¦‚æœtagå¾ˆå¤šï¼Œç”¨å¤æ•°ï¼ 1234567$ git push origin --tagsCounting objects: 1, done.Writing objects: 100% (1/1), 160 bytes | 0 bytes/s, done.Total 1 (delta 0), reused 0 (delta 0)To git@github.com:schacon/simplegit.git * [new tag] v1.4 &gt; v1.4 * [new tag] v1.4-lw &gt; v1.4-lw tagæœ¬èº«æ˜¯æ— æ³•è¿›è¡Œä¿®æ”¹çš„ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯äº†ä»£ç çš„å®‰å…¨ï¼Œå½“ç„¶ï¼Œå¦‚æœtagå¯ä»¥éšä¾¿ä¿®æ”¹ï¼Œé‚£å®ƒè·Ÿæ™®é€šçš„branchæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†tagæ‹‰æˆæœ¬åœ°ä¸€ä¸ªbranchï¼Œç”¨git checkout -b [branchname] [tagname] 12$ git checkout -b version2 v2.0.0Switched to a new branch 'version2' Git Aliaesï¼ˆåˆ«åï¼‰ï¼ˆä¹Ÿè®¸æ˜¯ä½¿ç”¨Gitä¸å¤Ÿé‡åº¦çš„åŸå› ï¼Œç¬”è€…è®¤ä¸ºè¿™éƒ¨åˆ†å†…å®¹å¹¶ä¸ååˆ†é‡è¦ï¼Œå‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤éƒ½å¾ˆå®¹æ˜“è®°ï¼Œä¸å¸¸ç”¨çš„èµ·äº†åˆ«åä¹Ÿè®°ä¸ä½â€¦ï¼‰ ç”¨git config --global alias.[alias_name] [original_command]æ¥åˆ›å»ºaliasï¼Œåœ¨~/.gitconfigä¸­æŸ¥çœ‹è¿™äº›aliasã€‚ 1234$ git config --global alias.co checkout$ git config --global alias.br branch$ git config --global alias.ci commit$ git config --global alias.st status æ¯”å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºè¿™æ ·çš„aliasï¼Œæ¥å›æ»šä¸€ä¸ªstage 1$ git config --global alias.unstage 'reset HEAD --' è¿™æ ·ï¼Œä½ å°±å¯ä»¥ç”¨ 1$ git unstage fileA æ¥ä»£æ›¿ 1$ git reset HEAD -- fileA å¦‚æœä½ æƒ³è¦è¿è¡ŒGitå¤–éƒ¨å‘½ä»¤ï¼ˆrather than a Git subcommandï¼‰ï¼Œåœ¨å‘½ä»¤å‰åŠ ä¸Š!ï¼ˆåŸæ–‡ç»™çš„è§£é‡Šæ˜¯This is useful if you write your own tools that work with a Git repository.ç¬”è€…ç»å°½è„‘æ±ä¹Ÿæ²¡æœ‰æƒ³åˆ°è¿™ä¸ªåŠŸèƒ½ç”¨å¤„åœ¨å“ªé‡Œâ€¦ï¼‰ 1$ git config --global alias.visual '!gitk' ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"novaè‡ªåŠ¨åŒ–æµ‹è¯•æ¢ç´¢ä¸å®è·µ","date":"2016-01-28T03:27:49.000Z","path":"2016/01/28/Nova-Automation-Practice/","text":"è‡ªåŠ¨åŒ–æµ‹è¯•å¯è¡Œæ€§åˆ†æé’ˆå¯¹android-novaé¡¹ç›®ï¼Œæ¯ä¸ªæ–°ç‰ˆæœ¬å‘å¸ƒä¹‹å‰ï¼ŒRD éƒ½éœ€è¦è¿›è¡Œä¸»æµç¨‹å›å½’ï¼Œè¿™æ˜¯ä¸€é¡¹é‡å¤ä¸”è€—æ—¶çš„å·¥ä½œï¼Œâ€œé‡å¤â€æ˜¯æŒ‡æ¯2ï½3å‘¨å‘ç‰ˆæ—¶å°±è¦è¿›è¡Œä¸€æ¬¡ï¼Œâ€œè€—æ—¶â€åˆ™å› ä¸ºå¹³å‡ä¸€æ¡ä¸šåŠ¡çº¿è¦ç”¨ä¸€ä¸ªå°æ—¶æ—¶é—´â€”â€”è¿™è¿˜åªæ˜¯å•androidå¹³å°ã€‚å®ç°è‡ªåŠ¨åŒ–åï¼Œå¯ä»¥å¤§å¤§å‡è½» RD è´Ÿæ‹…ï¼Œå¹¶ä¸”å¯åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å»ºç«‹ daily build æœºåˆ¶ï¼ŒåŠæ—©å‘ç°é—®é¢˜ï¼Œæé«˜ææµ‹è´¨é‡ã€‚ å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç†è§£è¿™é‡Œåªé’ˆå¯¹ UI æ–¹é¢çš„ç™½ç›’æµ‹è¯• è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¾“å…¥æ˜¯ç”¨æˆ·æ“ä½œï¼ˆè¾“å…¥ã€ç‚¹å‡»ã€æ»‘åŠ¨ï¼‰ã€ç½‘ç»œè¯·æ±‚è¿”å› è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¾“å‡ºæ˜¯ UI æ§ä»¶æ˜¾ç¤º è¿™ä¸¤æ­¥éƒ½å¯ä»¥é€šè¿‡ç°æœ‰çš„è‡ªåŠ¨åŒ–å·¥å…·å®Œæˆ è‡ªåŠ¨åŒ–å·¥å…·é€‰å–ä¹‹å‰ç»„å†…åˆ†äº«äº†2ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼ŒRobutium å’Œ Appiumã€‚æŸ¥é˜…ç›¸å…³èµ„æ–™åï¼Œå‘ç°ç½‘ç»œä¸Šæ¯”è¾ƒæµè¡Œçš„ä¸å¤–ä¹ä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªã€‚ç®€å•ç½—åˆ—å‡ºå„è‡ªçš„ç‰¹ç‚¹ï¼š Robotium Appium æ˜¯å¦å¼€æº æ˜¯ æ˜¯ æµ‹è¯•ç±»å‹ é»‘ç›’ é»‘ç›’ æ”¯æŒå¹³å° Android Android, iOS, FirefoxOS apkæ˜¯å¦éœ€è¦å†ç¼–è¯‘ éœ€è¦ï¼Œæµ‹è¯•ä»£ç å¿…é¡»æ‰“å…¥apkåŒ… æ— éœ€ï¼Œæµ‹è¯•ä»£ç å•ç‹¬å­˜æ”¾ å¯æµ‹Appç±»å‹ åŸç”Ÿï¼Œhybrid åŸç”Ÿï¼Œhybridï¼Œç”šè‡³å¯ä»¥é€šè¿‡Safariï¼Chromeæ¥æµ‹è¯•webé¡µé¢ å®‰å…¨æ€§ â€œThe most notable limitationâ€, æ“ä½œä»…é™æœ¬ app æœªçŸ¥ ç”¨ä¾‹è¯­è¨€ Java Any WebDriver-compatible language: Java, Python, PHP, C#, OCâ€¦ å‚è€ƒèµ„æ–™ Android Robotiumè‡ªåŠ¨åŒ–æµ‹è¯•ä½¿ç”¨æ‰‹å†Œ by æ¥¼èµŸç¨‹ Android Appiumè‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å¯¼æ‰‹å†Œ by è¦ƒå°‘å¼º æ¯”è¾ƒä¹‹åï¼Œé€‰ç”¨Appiumä½œä¸ºå®è·µæ‰‹æ®µ éš¾ç‚¹å¦‚æœè¦å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ€»ç»“ä¸‹æ¥ï¼Œä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ˜¯éš¾ç‚¹ï¼Œä¹Ÿæ˜¯å¿…é¡»è§£å†³çš„é—®é¢˜ é¢„è®¾æ•°æ®ä¿å­˜ã€è¯»å– é¢„è®¾æ•°æ®å¡«å…¥ç»„ä»¶ æ¨¡æ‹Ÿè¯·æ±‚å‘é€æ¥æ”¶ æ£€éªŒæ¥æ”¶åçš„ç•Œé¢å±•ç¤º å…¶ä¸­2&amp;4å¯ä»¥ç”±æµ‹è¯•æ¡†æ¶å¸®åŠ©å®Œæˆï¼Œ1&amp;3æ¯”è¾ƒæ£˜æ‰‹ï¼Œè¯¦è§æœ¬æ–‡è®²è¿°ã€‚ Appiumé…ç½®ä¸è¿è¡Œå†æ—¶ä¸€å¤©æ‰è·‘é€šäº†Appiumçš„demoï¼Œä¸å¾—ä¸å†æ¬¡æ„Ÿæ…¨ï¼Œä¸­æ–‡åšå®¢çš„å¸®åŠ©çš„ç¡®æ˜¯å¤ªå¤ªå¤ªå¤ªå°‘äº†ã€‚é¦–å…ˆè¦ç¡®è®¤å¹³å°æ˜¯OS Xï¼Œå…¶æ¬¡è¿˜è¦æ˜¯ä¸ºandroidè¿›è¡Œæµ‹è¯•ï¼Œå¥½ä¸å®¹æ˜“æ‰¾åˆ°äº†ä¸€äº›ï¼Œå‘ç°å¤§å®¶éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä¸çŸ¥é“æ˜¯è°æŠ„è°ã€‚å…³é”®æ˜¯ä½ æŠ„æ¥æŠ„å»ï¼ŒæŠ„çš„å‡€æ˜¯äº›é”™è¯¯å†…å®¹â€¦â€¦ è‡ªå·±é€”ä¸­é‡åˆ°ä¸€äº›æ›²æŠ˜ï¼Œè®°å½•å¦‚ä¸‹ ç†è§£Appiumæ‰€ä½¿ç”¨çš„client-server-appçš„ç»“æ„ï¼Œclientçš„ä»£ç ä¸åº”è¯¥å†™åœ¨appé‡Œæˆ‘æ˜¯è¿™ä¹ˆå¤„ç†çš„ï¼š clientï¼šmavené¡¹ç›®ï¼Œç”¨IntelliJç¼–å†™ï¼Œæµ‹è¯•ä»£ç ä½äºtest/java/com.leili.demo.Demoï¼Œæ³¨æ„mavené¡¹ç›®è¦åœ¨pomé‡Œå¤„ç†å¥½ä¾èµ–ï¼ˆè§ä»£ç ï¼‰ serverï¼šAppiumçš„GUIç•Œé¢ï¼Œå®Œæˆé…ç½®å³å¯ä½¿ç”¨ï¼Œä¸éœ€äºŒæ¬¡å¼€å‘ appï¼šgradleé¡¹ç›®ï¼Œç”¨AndroidStudioç¼–å†™ï¼Œä¸å«æµ‹è¯•ä»£ç  é…ç½®ANDROID_HOMEæ—¶ï¼Œè®°å¾—é…è‡³åˆ°ç³»ç»Ÿé»˜è®¤çš„bashé…ç½®æ–‡ä»¶ä¸­ã€‚åˆšå¼€å§‹æ—¶è‡ªå·±åªå†™åˆ°äº†~/.zshrcé‡Œï¼ˆå› ä¸ºå¹³æ—¶ç”¨çš„æ˜¯zshï¼‰ï¼Œç»“æœè¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶æŠ¥é”™æ‰¾ä¸åˆ°ANDROID_HOMEï¼Œä¸Šç½‘æŸ¥æ‰¾åä¹Ÿæ²¡æœ‰ç»“æœï¼ˆbaiduæ£€ç´¢å‡ºçš„ä¸­æ–‡åšå®¢å¤§å¤šæ˜¯è®²è·¯å¾„ä¸­ä¸è¦æœ‰ç©ºæ ¼â€¦ï¼‰ï¼Œæœ€åé†é†çŒé¡¶æç„¶å¤§æ‚Ÿï¼Œæ”¹äº†~/.bash_profileï¼Œæ‰ç”Ÿæ•ˆ åœ¨å†™Appiumæµ‹è¯•ç”¨ä¾‹ï¼ˆJavaï¼‰æ—¶ï¼Œåœ¨EditTextè¿›è¡Œè¾“å…¥ï¼Œç›´æ¥element.sendKeys(&quot;foooooo&quot;)å³å¯ï¼Œä¸è¦æƒ³å½“ç„¶åœ¨å‰é¢åŠ ä¸Šelement.click()ï¼Œå¦åˆ™ä¼šæœ‰å¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿ mavenä¾èµ– 123456789101112131415161718192021222324252627282930313233343536373839&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt; &lt;artifactId&gt;selenium-java&lt;/artifactId&gt; &lt;version&gt;2.48.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt; &lt;artifactId&gt;httpclient&lt;/artifactId&gt; &lt;version&gt;4.5.1&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;io.appium&lt;/groupId&gt; &lt;artifactId&gt;java-client&lt;/artifactId&gt; &lt;version&gt;3.3.0&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;commons-logging&lt;/groupId&gt; &lt;artifactId&gt;commons-logging&lt;/artifactId&gt; &lt;version&gt;1.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.14&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; å¯åŠ¨ Activityç”±äºAppiumç›®å‰åªèƒ½ç”¨åŒ…åï¼‹ç±»åçš„æ–¹å¼å¯åŠ¨ï¼Œä¸æ”¯æŒé€šè¿‡intentå¯åŠ¨Activityã€‚å¦‚æœéœ€è¦åœ¨å¯åŠ¨ä¸­æºå¸¦å‚æ•°ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼šåœ¨debugé¢æ¿ä¸­é€šè¿‡schemeç›´æ¥è¿›å…¥ç›®æ ‡Activityã€‚è¿™ç§åšæ³•è¿‡äºä¾èµ–Debugé¢æ¿ï¼Œå…¶å®å¹¶ä¸æ˜¯ä¸€ç§å¥½çš„å®ç°æ–¹å¼ã€‚ å¸Œæœ›Appiumå›¢é˜Ÿèƒ½å¤Ÿåœ¨åç»­æ›´æ–°ä¸­æä¾›æ›´å¤šçš„å¯åŠ¨Activityé€”å¾„ã€‚ Appiumä¸­å¯åŠ¨Activityçš„æ–¹æ³•ï¼Œä»£ç ä½äºAndroidDriver.java 123456789101112131415161718/** * @param appPackage * The package containing the activity. [Required] * @param appActivity * The activity to start. [Required] * @param appWaitPackage * Automation will begin after this package starts. [Optional] * @param appWaitActivity * Automation will begin after this activity starts. [Optional] * @param stopApp * If true, target app will be stopped. [Optional] * @example driver.startActivity(\"com.foo.bar\", \".MyActivity\", null, null, true); * * @see StartsActivity#startActivity(String, String, String, String) */public void startActivity(String appPackage, String appActivity, String appWaitPackage, String appWaitActivity, boolean stopApp) throws IllegalArgumentException; æµ‹è¯•æ•°æ®å­˜å–å¯¹äºå¦‚ä½•è¯»å–mockæ•°æ®ï¼Œæœ‰ä¸¤ç§æ€è·¯ æ‰‹æœº/æ¨¡æ‹Ÿå™¨è¿æ¥mockæœåŠ¡å™¨åï¼Œåœ¨mockæœåŠ¡å™¨ä¸Šé…ç½®ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚ä¼šå‘é€å‡ºå»ï¼Œä½†ä¸æ˜¯å‘é€åˆ°çœŸå®çš„apiåç«¯ï¼Œè€Œæ˜¯å‘é€åˆ°mockæœåŠ¡å™¨ appä»£ç æ— éœ€å˜åŠ¨ å®ç°ç®€å• android/iOSä¸¤ä¸ªå¹³å°å¯ä»¥å…±ç”¨åŒä¸€å¥—æ•°æ®ã€åŒä¸€ä¸ªmockæœåŠ¡å™¨ ä¾èµ–mockæœåŠ¡å™¨ï¼Œç”šè‡³å¯èƒ½éœ€è¦è‡ªå·±æ­å»ºmockæœåŠ¡å™¨ è¦è€ƒè™‘å¦‚ä½•ä½¿æ¨¡æ‹Ÿå™¨åœ¨mockæœåŠ¡å™¨ä¸Šè¿›è¡Œæ³¨å†Œã€‚å·²æœ‰çš„æ‰«äºŒç»´ç æ–¹å¼æ˜¾ç„¶ä¸ç°å® å°†mockæ•°æ®å­˜å…¥æ‰‹æœº/æ¨¡æ‹Ÿå™¨ï¼Œæœ¬åœ°è¯»å– ä¸ä¾èµ–mockæœåŠ¡å™¨ éœ€è¦appå†…éƒ¨æ”¯æŒï¼Œå®ç°DBã€Serviceç­‰åŠŸèƒ½ï¼Œè¾ƒå¤æ‚ android/iOSå„è‡ªéƒ½éœ€è¦æ”¹åŠ¨åº•å±‚ä»£ç ä»¥è¿›è¡Œæ”¯æŒ ä»ç„¶éœ€è¦è€ƒè™‘æ­£å¸¸å¼€å¯çš„appå¦‚ä½•è‡ªåŠ¨åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼ æ¯”è¾ƒåï¼Œé€‰ç”¨1ä½œä¸ºæœ€åçš„å®ç°æ–¹å¼ï¼ŒåŒæ—¶åŸºäºmobile-httpwatchæ­å»ºäº†è‡ªå·±çš„mockæœåŠ¡å™¨ï¼Œæä¾›é¢„åŠ è½½é…ç½®çš„æ¥å£ã€‚ Show Timeä¸»æµç¨‹æµ‹è¯•ç”¨ä¾‹ï¼ˆé¢„è®¢ï¼‰ï¼štest case è¿™æ¡ç”¨ä¾‹çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠåˆ°è°ƒç”¨ä»¥ä¸‹3ä¸ªæ¥å£: getbookingcontext.yyï¼Œè·å–å•†æˆ·é¢„è®¢é…ç½® getbookingholidays.yyï¼Œè·å–èŠ‚å‡æ—¥ä¿¡æ¯ï¼ˆå•†æˆ·æ— å…³ï¼‰ book.yyï¼Œä¸‹è®¢å• å‡ºäºç®€åŒ–çš„è€ƒè™‘ï¼Œæˆ‘ä»¬æœ¬æ¬¡åªå¯¹æ¥å£3è¿›è¡Œmockã€‚ æˆªå›¾åº”å¦‚ä¸‹æ‰€ç¤ºï¼š è¾“å…¥ è¾“å‡º Q: é¢„è®¾çš„mockæ•°æ®è¦ä¿å­˜åœ¨TestCaseä¸­è¿˜æ˜¯ä¿å­˜åœ¨Serveré‡Œï¼Ÿæœ‰ä¸¤ç§æ–¹æ¡ˆ mock data ä¿å­˜åœ¨ TestCase ä¾§ï¼Œæ¯æ¬¡ç”¨ä¾‹æ‰§è¡Œå‰ï¼ŒTestCase æŠŠæ•°æ®ä¼ ç»™ Serverï¼ˆè¿™ç§æ–¹æ¡ˆæ¯æ¬¡ä¼ é€’æ•°æ®é‡è¿‡å¤§ï¼‰ mock data ä¿å­˜åœ¨ Server ä¾§ï¼Œæ¯æ¬¡ç”¨ä¾‹æ‰§è¡Œå‰ï¼ŒTestCase æŠŠ mock data id ä¼ ç»™ Server æ¯ä¸ª case å¯¹åº”ä¸€å¥— mock data ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…å¤šä¸ªæ¥å£çš„æ•°æ®ã€‚ åŠŸèƒ½ç‚¹å¼€å‘è¿›åº¦è¡¨||çŠ¶æ€|åŠŸèƒ½ç‚¹|å¤‡æ³¨||1|done|test engine å‘é€ pre-req ï¼Œå‘ŠçŸ¥ server caseid|||2|done|server æ”¶åˆ°è¯·æ±‚|||3|done|server è§£æè¯·æ±‚ä¸­çš„ caseid|||4|done|server æ ¹æ® caseid ï¼ŒåŠ è½½æœ¬åœ°å¯¹åº” mock data ï¼ŒåŠ è½½å®Œæˆåå‘ŠçŸ¥ test engine|||5|done|test engine é©±åŠ¨ client è¿›è¡Œæ³¨å†Œ|||6|done|test engine é©±åŠ¨ client å‘é€çœŸå®è¯·æ±‚|||7|done|server æ ¹æ®çœŸå®è¯·æ±‚ï¼Œè¿”å›å·²ç»å‡†å¤‡å¥½çš„ mock data|||8|done|client è·å¾— mock data|||9|done|test engine è¿›è¡Œè‡ªåŠ¨åŒ– UI æ£€éªŒ|||10||test engine UI æ ¡éªŒå®Œæˆåï¼Œå‘é€ post-reqï¼Œå‘ŠçŸ¥ server æ¸…é™¤ mock data|å¯é€‰||11||server æ¥æ”¶åˆ° post-req åï¼Œæ¸…é™¤ mock data|å¯é€‰| ä¸€äº›nodejså‡½æ•°æ–¹æ³•å¤„ç†getè¯·æ±‚ 123456&lt;!-- http://appmock.dp/mockconfig.do?caseid=1024 --&gt;console.log(url.parse(request.url, true).query.caseid); // log '1024' hereresponse.writeHead(200, &#123; \"Content-Type\": \"text/plain;charset=utf-8\"&#125;);response.end(); å¤„ç†postè¯·æ±‚ 1234567891011121314var postData = \"\";request.addListener(\"data\", function(postDataChunk) &#123; postData += postDataChunk;&#125;);request.addListener(\"end\", function () &#123; console.log('æ•°æ®æ¥æ”¶å®Œæ¯•'); var params = querystring.parse(postData); console.log(params); console.log(params[\"num\"]); /// &#123;num=1024, name=lilei&#125;, log '1024' here response.writeHead(500, &#123; \"Content-Type\": \"text/plain;charset=utf-8\" &#125;); response.end(\"æ•°æ®æäº¤å®Œæ¯•\");&#125;); è¯»å–æ–‡ä»¶ï¼ˆåŒæ­¥ï¼‰ 123var content = fs.readFileSync('/Users/leili/Downloads/7');config = parseJson(content);user.setMockConfig(config); è¯»å–æ–‡ä»¶ï¼ˆå¼‚æ­¥ï¼‰ 1234567fs = require(\"fs\");fs.readFile('/Users/leili/Downloads/2', 'utf8', function(err, data) &#123; if (err) &#123; return console.log(err); &#125; console.log(data);&#125;); é‡åˆ°çš„é—®é¢˜ é¢„è®¢å¯èƒ½å¯¹å·²è¿‡æ—¶é—´æœ‰ä¸€äº›åˆ¤æ–­ï¼Œå¯¼è‡´åœ¨çº¿é¢„è®¢é¡µæ— æ³•ä½¿ç”¨mockæ•°æ®ï¼ŒåŸå› æœªæ˜ åè¿‡æ¥ï¼Œä¸€äº›æ€è€ƒ çœŸçš„éœ€è¦è‡ªåŠ¨åŒ–å—ï¼ŸUI æœ¬èº«åšçš„é€»è¾‘å°±å¾ˆå°‘ï¼Œå¦‚æœè¿”å›æ•°æ®æ˜¯æ­£ç¡®çš„ï¼ŒUI æ˜¾ç¤ºä¹Ÿå‡ ä¹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä¸ºä½•è¦å¦‚æ­¤å¤šç²¾åŠ›æ¥å†™è‡ªåŠ¨åŒ– case å‡†ç¡®åº¦ï¼šæ¯ä¸€ä¸ªæ§ä»¶ï¼Œå±•ç¤ºä»€ä¹ˆå†…å®¹ï¼Ÿ æ•°é‡ï¼šcase æ•°é‡å¤§ï¼Œè®°ä¸ä½ æŠ•å…¥åˆ°ç”Ÿäº§ä¸­ï¼Œä¼šé‡åˆ°çš„é—®é¢˜ å‰æœŸå‡†å¤‡é‡å¤§ï¼šæ‰’æµ‹è¯•æ•°æ®ï¼Œé€ å„ç§caseï¼ˆå®šé‡‘ã€é¢„è®¢æˆåŠŸã€å¤±è´¥ï¼Œå•†å®¶è¥ä¸šä¸­ã€æš‚æœªè¥ä¸šç­‰å„ç§çŠ¶æ€ï¼‰ éš¾ä»¥å¯¹å¸ƒå±€ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ã€ç¼©è¿›ç­‰è¿›è¡Œæµ‹è¯• å³ä½¿æ˜¯ä½¿ç”¨Appiumè¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¹Ÿæ˜¯éœ€è¦rdåšæ”¯æŒçš„ï¼Œqaå¿…é¡»ä»rdå¤„äº†è§£åˆ°è¯¸å¦‚æ§ä»¶idç­‰å±æ€§ï¼Œæ–¹å¯ä»¥å®šä½åˆ°ç›®æ ‡æ§ä»¶è¿›è¡Œæ“ä½œã€‚ è§†è§‰ä¸Šçœ‹æ˜¯ä¸€ä¸ªTextViewï¼Œè€Œå®é™…ä¸Šæ˜¯ä¸¤ä¸ªTextViewï¼Œä½œä¸ºQAéš¾ä»¥åˆ¤æ–­ï¼ˆå¯èƒ½è¦æ±‚ç†è§£åŠŸèƒ½å…·ä½“å®ç°ï¼‰ mobile-httpwatch é¡¹ç›®é˜…è¯»ç¬”è®°è®°å½•çš„å†…å®¹æ¯”è¾ƒçç¢ web.js æ³¨å†Œï¼Œè®¾ç½®mockæ•°æ®mockconfig.js mockè®¾ç½®ç•Œé¢User.js ç”¨æˆ·æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªç”¨æˆ·æœ‰ä¸€ä¸ªMockConfigmock_config.js é»˜è®¤çš„mockæ•°å€¼html5 çš„ localStorageProxyFactory.js mock ruleï¼Œé‡ç‚¹çœ‹handleProxyRequestå’ŒmockResponseä¸¤ä¸ªæ–¹æ³•mockConfig = user.getMockRuleForUrl(req.url)Utils.js å‚è€ƒèµ„æ–™http://www.cnblogs.com/lori/p/3437562.htmlhttp://www.mkyong.com/java/how-to-send-http-request-getpost-in-java ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"},{"name":"è‡ªåŠ¨åŒ–æµ‹è¯•","slug":"è‡ªåŠ¨åŒ–æµ‹è¯•","permalink":"https://lilei.pro/tags/è‡ªåŠ¨åŒ–æµ‹è¯•/"}]},{"title":"æºç¨‹åŠ¨æ€åŠ è½½å®è·µDynamicAPKé¡¹ç›®å­¦ä¹ ","date":"2016-01-18T14:40:33.000Z","path":"2016/01/18/æºç¨‹åŠ¨æ€åŠ è½½å®è·µDynamicAPKé¡¹ç›®å­¦ä¹ /","text":"æœ¯è¯­å®¿ä¸»ï¼šHost Apkï¼Œæ‰“åŒ…è¿è¡Œçš„æ€»é¡¹ç›®ï¼Œç”¨äºé›†æˆå„ä¸ªå­å·¥ç¨‹ï¼Œç›¸å½“äºandroid-novaå£³ï¼Œåªæœ‰ä¸€ä¸ª æ’ä»¶ï¼šPluginï¼Œå­å·¥ç¨‹ï¼Œç”±å„ä¸ªä¸šåŠ¡çº¿ç‹¬ç«‹å¼€å‘ï¼Œå¯ä»¥ä¾èµ–å®¿ä¸»æä¾›çš„èµ„æºï¼Œä¸€ä¸ªå®¿ä¸»èƒ½å¤Ÿæ‹¥æœ‰å¤šä¸ªæ’ä»¶ Andoroid Build æµç¨‹ Resource Filesï¼šé¡¹ç›®resè·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼ŒåŒ…å«animã€drawableã€layoutã€rawç­‰ Source Filesï¼šé¡¹ç›®srcè·¯å¾„ä¸‹(å¯¹äºandroid-novaæ˜¯src/main/java)çš„æ–‡ä»¶ aapt: å°†.xmlæ–‡ä»¶è½¬æ¢ä¸ºjavaç±»å‹ Generated Source Filesï¼šç”±aaptå·¥å…·ç”Ÿæˆï¼Œå­˜å‚¨åœ¨/genç›®å½• javacï¼šjavaç¼–è¯‘å™¨ï¼Œç”Ÿæˆ.classæ–‡ä»¶ dxï¼šå°†.classæ–‡ä»¶è½¬æ¢ä¸ºDVMå¯è¯†åˆ«çš„dexæ–‡ä»¶ apkbuilderï¼šå°†æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…è¿›apkä¸­ zipalignï¼šå°†apkä¸­æœªç»å‹ç¼©è¿‡çš„æ–‡ä»¶è¿›è¡Œ4å­—èŠ‚å¯¹é½ï¼Œä»¥å‡å°‘è¿è¡Œæ—¶RAMæ¶ˆè€— ååŒå¼€å‘ä¸å¼•ç”¨aaræä¾›çš„å…¬ç”¨UIç»„ä»¶ä¹‹é—´çš„è”ç³»ä¸åŒºåˆ« æœ¬è´¨ä¸Šéƒ½æ˜¯classes.dexä¸res/ç­‰æ–‡ä»¶çš„é›†åˆ ä¾èµ–å…³ç³»ä¸åŒ æ˜¯å¦åŒ…å«ä¸šåŠ¡é€»è¾‘ æœ€é‡è¦çš„ä¸€ç‚¹ï¼ŒActivityæ³¨å†Œ æ’ä»¶å¼•ç”¨å®¿ä¸»èµ„æº åœ¨javaä»£ç ä¸­ç›´æ¥ç”¨ 12345678910111213public class MainActivity extends Activity &#123; // demo2 @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.demo2_activity_main); TextView textView=(TextView)findViewById(R.id.demo2_textView3); textView.setText(R.string.sample_text); // å®¿ä¸»èµ„æº ImageView imageView=(ImageView)findViewById(R.id.demo2_imageView2); imageView.setImageResource(R.drawable.sample); // å®¿ä¸»èµ„æº &#125;&#125; åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å¼•ç”¨å®¿ä¸»èµ„æºï¼Œç¼–è¯‘æ—¶ä¼šæŠ¥é”™ 12/Users/leili/Documents/idea_workspace/BeQuietLee/DynamicAPK/demo2/res/layout/demo2_activity_main.xml:40: error: Error: No resource found that matches the given name (at 'src' with value '@drawable/sample'). å®¿ä¸»è°ƒèµ·æ’ä»¶ å®¿ä¸»AndroidMainifest.xmléœ€è¦å¯¹æ‰€æœ‰æ’ä»¶Activityè¿›è¡Œæ³¨å†Œ 123456789101112131415161718192021222324252627282930313233&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\" package=\"ctrip.android.sample\" &gt; &lt;application android:name=\"ctrip.android.sample.BundleBaseApplication\" android:allowBackup=\"true\" android:icon=\"@mipmap/ic_launcher\" android:label=\"@string/app_name\" &gt; &lt;activity android:name=\".MainActivity\" android:label=\"@string/app_name\" &gt; &lt;intent-filter&gt; &lt;action android:name=\"android.intent.action.MAIN\" /&gt; &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;activity android:name=\"ctrip.android.demo1.MainActivity\" &gt; &lt;/activity&gt; &lt;activity android:name=\"ctrip.android.demo2.MainActivity\" &gt; &lt;/activity&gt; &lt;/application&gt;&lt;/manifest&gt; startActivityæ—¶éœ€è¦å†™æ˜ç±»çš„å®Œæ•´è·¯å¾„ 1startActivity(new Intent(getApplicationContext(), Class.forName(\"ctrip.android.demo1.MainActivity\"))); å¯¹aaptå·¥å…·çš„æ”¹é€ ä¸ºaaptå¢åŠ --apk-moduleå‚æ•° å¦‚å‰æ‰€è¿°ï¼Œèµ„æºIDå…¶å®æœ‰ä¸€ä¸ªPackageIDçš„å†…éƒ¨å­—æ®µã€‚æˆ‘ä»¬ä¸ºæ¯ä¸ªæ’ä»¶å·¥ç¨‹æŒ‡å®šç‹¬ç‰¹çš„PackageIDå­—æ®µï¼Œè¿™æ ·æ ¹æ®èµ„æºIDå°±å¾ˆå®¹æ˜“åˆ¤æ˜ï¼Œæ­¤èµ„æºéœ€è¦ä»å“ªä¸ªæ’ä»¶apkä¸­å»æŸ¥æ‰¾å¹¶åŠ è½½äº†ã€‚åœ¨åæ–‡çš„èµ„æºåŠ è½½éƒ¨åˆ†ä¼šæœ‰è¿›ä¸€æ­¥é˜è¿°ã€‚ é€šå¸¸é¡¹ç›®ä¸­ç”Ÿæˆçš„R.javaï¼Œä¼šåŒ…å«ç”±aaptç”Ÿæˆçš„æ‰€æœ‰èµ„æºçš„idï¼Œä»¥0x7få¼€å¤´ 1234567891011121314151617181920212223242526package com.dianping.hui;public final class R &#123; public static final class anim &#123; public static int activity_exit=0x7f040000; public static int back_enter=0x7f040001; public static int back_exit=0x7f040002; public static int booking_push_up_out=0x7f040003; public static int fade_light_out=0x7f040004; public static int gradient_enter=0x7f040005; public static int grow_from_bottom=0x7f040006; // ... &#125; public static final class color &#123; public static int actionbar_title_color=0x7f0b0000; // ... &#125; public static final class dimen &#123; public static int action_button_height=0x7f0700a6; public static int action_button_margin_between=0x7f0700a7; // ... &#125; // ...&#125; 0x7fæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Œçœ‹ä¸€ä¸‹åŸæ±åŸå‘³çš„aaptä¸­çš„é€»è¾‘ 1234567891011121314151617181920ResourceTable::ResourceTable(Bundle* bundle, const String16&amp; assetsPackage, ResourceTable::PackageType type)ssize_t packageId = -1;switch (mPackageType) &#123; case App: case AppFeature: packageId = 0x7f; break; case System: packageId = 0x01; break; case SharedLibrary: packageId = 0x00; break; default: assert(0); break;&#125; DynamicAPKä¸­æ”¹åŠ¨åçš„ç”ŸæˆpackageIdçš„é€»è¾‘ï¼Œä½äºResourceTable.cpp 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103ResourceTable::ResourceTable(Bundle* bundle, const String16&amp; assetsPackage, ResourceTable::PackageType type) : mAssetsPackage(assetsPackage) , mPackageType(type) , mTypeIdOffset(0) , mNumLocal(0) , mBundle(bundle)&#123; ssize_t packageId = -1; switch (mPackageType) &#123; case App: case AppFeature: packageId = 0x7f; break; case System: packageId = 0x01; break; case SharedLibrary: packageId = 0x00; break; // case Voice:// packageId = 0x34;// break;// case Call:// packageId = 0x35;// break;// case Search:// packageId = 0x36;// break;// case Schedule:// packageId = 0x37;// break;// case Train:// packageId = 0x38;// break;// case Destination:// packageId = 0x44;// break;// case Chat:// packageId = 0x46;// break;// case Flight:// packageId = 0x52;// break;// case MyCtrip:// packageId = 0x54;// break;// case Pay:// packageId = 0x55;// break;// case Foundation:// packageId = 0x56;// break;// case Hotel:// packageId = 0x58;// break;// case Container:// packageId = 0x61;// break;// case CustomerService:// packageId = 0x62;// break;// case ThirdParty:// packageId = 0x63;// break;// case Extend1:// packageId = 0x64;// break;// case Extend2:// packageId = 0x65;// break;// case Extend3:// packageId = 0x66;// break;// case Extend4:// packageId = 0x67;// break;// case Extend5:// packageId = 0x68;// break;// case Extend6:// packageId = 0x69;// break; default: assert(0); break; &#125; if(!bundle-&gt;getApkModule().isEmpty())&#123; android::String8 apkmoduleVal=bundle-&gt;getApkModule(); packageId=apkStringToInt(apkmoduleVal); &#125; sp&lt;Package&gt; package = new Package(mAssetsPackage, packageId); mPackages.add(assetsPackage, package); mOrderedPackages.add(package); // Every resource table always has one first entry, the bag attributes. const SourcePos unknown(String8(\"????\"), 0); getType(mAssetsPackage, String16(\"attr\"), unknown);&#125; å¦‚æ­¤ä¸€æ¥ï¼Œä¸åŒä¸šåŠ¡çš„èµ„æºè¢«èµ‹äºˆäº†ä¸åŒçš„idï¼Œåœ¨åŠ è½½æ—¶ï¼Œä¾¿è¿›å…¥åˆ°å„ä¸ªä¸šåŠ¡æ‰“å‡ºçš„æ’ä»¶åŒ…é‡Œå¯»æ‰¾èµ„æº. åœ¨sub-project-build.gradleä¸­ï¼Œç»„è£…--apk-moduleå‚æ•° 1234...argv &lt;&lt; '--apk-module'argv &lt;&lt; \"$resourceId\"... åŠ¨æ€åŠ è½½è¿è¡Œæ—¶åŠ è½½èµ„æºï¼Œéœ€è¦çŸ¥é“èµ„æºä»å“ªä¸ªæ’ä»¶ä¸­è·å–ã€‚æ‰€æœ‰æ’ä»¶ä½äºå‹ç¼©åŒ…çš„assets/baseres/è·¯å¾„ä¸‹ã€‚åœ¨è¿è¡Œæ—¶ä¼šåœ¨/data/data/ctrip.android.sample/files/storage/{num}ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶å¤¹ã€‚ 1ã€2åˆ†åˆ«å¯¹åº”äº†demo1ã€demo2 metaè®°å½•äº†ä¸‹ä¸€ä¸ªå¯ç”¨idï¼Œå³3 1/metaä¸­ä¿å­˜åŒ…åctrip.android.demo1 1/version_1/bundle.zipå°±æ˜¯assets/baseres/ctrip_android_demo1.soï¼Œå¯ä»¥è§£å‹ç¼©è§‚å¯Ÿ 1/version_1/bundle.dexå…¶å®ä¸bundle.zipè§£å‹ç¼©æ‹¿åˆ°çš„dexæ˜¯ä¸€æ ·çš„ 1/version_1/metaæ— ç”¨ï¼ˆå†…å®¹ä¸ºfile:ï¼‰ è¿™éƒ¨åˆ†ç›®å½•ä¸æ–‡ä»¶çš„ç®¡ç†ï¼Œæ˜¯é€šè¿‡Bundleã€Archiveæ¥å£å®Œæˆçš„ï¼Œversion_1ã€version_2â€¦version_nåˆ†åˆ«å¯¹åº”ä¸€ä¸ªBundleArchiveRevisionï¼Œå®ƒä»¬ç»Ÿä¸€ç”±BundleAchiveç®¡ç†ã€‚BundleArchiveç”±BundleImplç®¡ç†ã€‚å›¾ä¸­æœ‰demo1ã€demo2ï¼Œå¯¹åº”ç€å°±æœ‰2ä¸ªBundleImplã€‚å„ä¸ªBundleçš„å¯åŠ¨ï¼Œæ›´æ–°ï¼Œå¸è½½ï¼Œç”±Framework.javaç®¡ç†ã€‚ å¯¹åº”å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š çƒ­ä¿®å¤DynamicAPKä¸­ï¼Œä»…ä»…æä¾›äº†åˆ†åŒ…ã€èµ„æºåŠ è½½çš„demoï¼ŒæœªåŒ…å«hotfixåŠŸèƒ½ã€‚è™½ç„¶å¯ä»¥çœ‹åˆ°HotPatchManager.javaï¼Œä½†å¹¶æ²¡æœ‰çœŸæ­£è¿è¡Œã€‚è¿™é‡Œæˆ‘ä»¬è‡ªå·±æ¥å±±å¯¨ä¸€æ¬¡hotfixçš„è¿‡ç¨‹ã€‚ é¦–å…ˆäº†è§£ä¸€ä¸‹apkå®‰è£…ä»¥åŠè¿è¡Œæ—¶ä¼šæ“ä½œçš„å‡ ä¸ªç›®å½•ã€‚ä¸‹è½½å¥½çš„apkåœ¨è¿›è¡Œå®‰è£…æ—¶ï¼Œä¼šå¯¹ç³»ç»Ÿä¸­ä»¥ä¸‹å‡ ä¸ªç›®å½•è¿›è¡Œæ“ä½œ /data/appï¼šapkå®‰è£…æ—¶ä¼šè¢«å¤åˆ¶åˆ°è¯¥ç›®å½• /data/dalvik-cacheï¼šå®‰è£…dexæ–‡ä»¶çš„çœŸæ­£ä½ç½®ï¼Œåç»­appå¯åŠ¨å‡ä»æ­¤å¤„è¿›è¡Œload /data/dataï¼šæ–°å»ºä»¥packageNameå‘½åçš„æ–‡ä»¶å¤¹ï¼Œåªæœ‰appè‡ªå·±èƒ½è®¿é—®ï¼Œç”¨äºç®¡ç†æ•°æ® åœ¨æ²¡æœ‰rootè¿‡çš„è®¾å¤‡ä¸Šï¼Œåº”ç”¨ç¨‹åºæœ‰æƒé™æ“ä½œçš„ç›®å½•ä»…ä»…æ˜¯/data/data/com.foo.fooï¼Œæƒ³æ›´æ”¹/data/dalvik-cacheä¸­çš„dexæ–‡ä»¶æ˜¯ä¸å¯èƒ½çš„ã€‚ä½†æ˜¯ï¼Œç»“åˆä¸Šé¢å®Œæˆçš„åŠ¨æ€åŠ è½½å·¥ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ–°demo1ã€demo2çš„dexæ–‡ä»¶ï¼Œä»è€Œè¾¾åˆ°çƒ­ä¿®å¤çš„ç›®çš„ã€‚ è¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºä¸€ä¸ªæ›´æ¢æ–‡æ¡ˆçš„demoï¼Œå°†demo2é‡Œé¢textViewé¢„è®¾çš„æ–‡æ¡ˆç”±This is sample resource:æ¢æˆä¸‹å›¾æ¥è‡ªäºå®¿ä¸»èµ„æºã€‚é¦–å…ˆéœ€è¦æŠŠæ”¹å¥½çš„é¡¹ç›®è¿›è¡Œç¼–è¯‘ï¼Œå–å‡ºbundle.dexä¸bundle.zipï¼ˆè¿™ä¸¤ä¸ªæ–‡ä»¶çš„æ¥æºï¼Œå‰æ–‡å·²ç»æè¿‡ï¼‰ã€‚ç„¶åæŠŠå®ƒä»¬ä¸Šä¼ åˆ°/data/data/com.ctrip.sample/files/storage/2/version_2ã€‚ä¸Šä¼ å®Œæˆåï¼Œä¸‹æ¬¡å¯åŠ¨å°±ä¼šåŠ è½½æˆ‘ä»¬ä¿®æ”¹åçš„dexæ–‡ä»¶ï¼Œå±•ç¤ºæ–°çš„å†…å®¹ã€‚ è¿™é‡Œç›´æ¥ç”¨monitoræ¥æ¨¡æ‹Ÿhotfixæ–‡ä»¶ä¸‹è½½è¿‡ç¨‹ã€‚ 1234567891011121314public class MainActivity extends Activity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.demo2_activity_main); TextView textView=(TextView)findViewById(R.id.demo2_textView3);// textView.setText(R.string.sample_text); // å®¿ä¸»èµ„æº textView.setText(\"ä¸‹å›¾æ¥è‡ªäºå®¿ä¸»èµ„æº\"); ImageView imageView=(ImageView)findViewById(R.id.demo2_imageView2); imageView.setImageResource(R.drawable.sample); // å®¿ä¸»èµ„æº &#125;&#125; hotfixä¹‹å‰ hotfixä¹‹å é™„ä¸€ï¼šæ›´å®Œæ•´çš„ç¼–è¯‘æµç¨‹å›¾ é™„äºŒï¼šæ¨èé˜…è¯» AndroidåŠ¨æ€åŠ è½½æŠ€æœ¯ ç³»åˆ—ç´¢å¼• ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"é¡¹ç›®äº¤æ¥é‚£ç‚¹äº‹å„¿","date":"2016-01-15T09:01:24.000Z","path":"2016/01/15/é¡¹ç›®äº¤æ¥é‚£ç‚¹äº‹å„¿/","text":"æºæ–‡æ¡£é“¾æ¥ by æå…¨æ°‘(BigFootprint) 2015å¹´æœ«ï¼Œæˆ‘å»åŒ—äº¬ç¾å›¢æ€»éƒ¨è¿›è¡ŒBç«¯Androidæ’å·APPäº¤æ¥ï¼Œå†æ—¶2ä¸ªç¤¼æ‹œã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å•ç‹¬æ‰¿æ¥ä¸€æ•´ä¸ªå®¢æˆ·ç«¯é¡¹ç›®çš„äº¤æ¥ï¼ŒåŠ ä¸Šè¿™è¿˜æ˜¯æ¯•ä¸š3å¹´ä»¥æ¥é¦–æ¬¡å‡ºå·®ï¼Œè¿‡ç¨‹ä¸­çŠ¯äº†ä¸€äº›é”™è¯¯ï¼Œä¹Ÿèµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚åŒæ—¶ï¼Œä¸Šæµ·çš„å°ä¼™ä¼´ä»¬åœ¨ä¸ç¾å›¢åŒäº‹è¿›è¡Œç¾å›¢appçš„äº¤æ¥ã€‚äº¤æ¥ç»“æŸåï¼Œå¤§å®¶æ€»ç»“äº†æœ¬æ¬¡é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼ŒåŒæ—¶è¯¦ç»†åˆ—å‡ºäº†ä¸€æ¬¡æˆåŠŸçš„äº¤æ¥åº”è¯¥å®Œæˆå“ªäº›ä»»åŠ¡ã€‚ ä»¥ä¸‹è¡¨æ ¼æ˜¯ç»¼åˆTeamæ‰€å¯¹æ¥çš„æ‰€æœ‰é¡¹ç›®åˆ—å‡ºçš„å¯¹æ¥é¡¹ï¼Œå®é™…å¯¹æ¥é¡¹ç›®çš„æ—¶å€™å¯èƒ½ä¸ä¼šæ¶‰åŠåˆ°æ‰€æœ‰çš„å†…å®¹ï¼Œå¡«å†™çš„æ—¶å€™è¯·æ³¨æ„ï¼š ä¸è¦ç©ºå•å…ƒï¼Œå¦‚æœæ²¡æœ‰ç›¸åº”çš„å¯¹æ¥é¡¹æˆ–è€…ä¸èƒ½ç¡®å®šçš„å†…å®¹ï¼Œè¯·æ³¨æ˜ï¼Œæ¯”å¦‚â€œæ— â€ã€â€œå¾…ç¡®å®šâ€ï¼Œä»¥ä¾¿äºCheckæ•´ä½“æƒ…å†µï¼› æ‰€æœ‰çš„Itemï¼Œå¦‚æœéœ€è¦å®è·µçš„ï¼Œè¯·å¯¹æ¥äººå®è·µåˆ°ä½ï¼Œå¹¶å°†æƒé™ç”³è¯·ã€è”ç³»è´£ä»»äººç­‰è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼› è¡¨æ ¼æœ¬èº«å†…å®¹æœ‰é™ï¼Œä¸»è¦æ‰®æ¼”æ±‡æ€»è§’è‰²ï¼Œç®€çŸ­çš„å†…å®¹å¯ç›´æ¥å†™åœ¨è¡¨æ ¼ä¸­ï¼Œè¾ƒé•¿çš„å†…å®¹å»ºè®®æ•´ç†æˆæ–‡æ¡£ï¼Œä»¥é“¾æ¥çš„å½¢å¼è®°å½•åœ¨è¡¨æ ¼å†…ï¼› äº¤æ¥è¿‡ç¨‹ä¸­è¯·éšæ—¶æ³¨æ„è¡¨æ ¼ä¸­çš„ä¸è¶³ä¹‹å¤„å¹¶åŠæ—¶è¡¥è¶³ï¼› äº¤æ¥ä¸€å¼€å§‹å°±å¤åˆ¶è¯¥è¡¨æ ¼ï¼Œæ–°å»ºæ–‡æ¡£è¿›è¡Œå¡«å†™ï¼› å‡†å¤‡ å¯¹æ¥äºº äº¤æ¥å†…å®¹ äº¤æ¥å®Œæˆæ ‡å‡† äº¤æ¥å®Œæˆæ—¶é—´ç‚¹ è¿›åº¦ï¼ˆæ³¨æ„å®šæœŸåé¦ˆï¼‰ é¡¹ç›® é¡¹ç›®æ¼”ç¤º é¡¹ç›®å…¥å£ é¡¹ç›®ä½¿ç”¨ä¸»æµç¨‹ é¡¹ç›®è¿è¡Œéœ€è¦çš„é…ç½® é¡¹ç›®æ‰¿è½½çš„ä¸šåŠ¡ï¼ˆè¯¦ç»†ï¼‰ é¡¹ç›®ç»“æ„ ä½¿ç”¨çš„æŠ€æœ¯ å¼€æºæ¡†æ¶ Hybridæ¡†æ¶ JNIï¼ˆæ³¨æ˜æ”¯æŒæ¶æ„ï¼‰ æŠ€æœ¯é€‰å‹åŸå›  æ¨¡å—åˆ’åˆ† åˆ’åˆ†æ ‡å‡† æ¨¡å—åŠŸèƒ½ æ¨¡å—è´Ÿè´£äºº ä»£ç  å‘ï¼ˆå¸¦æœ‰Bugçš„åœ°æ–¹ï¼Œæè¿°è¯·å§”å©‰ä¸€ç‚¹ï¼‰ é€»è¾‘å¤æ‚ | å®ç°å¤æ‚çš„åœ°æ–¹ å»ºè®®é‡æ„çš„åœ°æ–¹ æäº¤ åˆ†æ”¯ç®¡ç† åˆ†æ”¯å‘½å commitæäº¤è§„èŒƒ åˆ†æ”¯åˆå¹¶æ–¹å¼ æ–‡æ¡£ ç›¸å…³æ–‡æ¡£ æ›´æ–°é¢‘ç‡ï¼ˆè§„èŒƒï¼‰ ç¡¬ä»¶èµ„æº è§„æ ¼ å¦‚ä½•ä½¿ç”¨ ç”³è¯·æµç¨‹ è®¾å¤‡ä½¿ç”¨æƒ…å†µï¼ˆå¤šå°‘å°åœ¨ä½¿ç”¨ä¸­ï¼‰ å¼€å‘æµç¨‹ è¿­ä»£çš„é‡è¦æ—¶é—´èŠ‚ç‚¹ä»¥åŠèŠ‚ç‚¹ä»»åŠ¡ è¶…å‡ºèŠ‚ç‚¹æœªå®Œæˆä»»åŠ¡è¡¥æ•‘æªæ–½ å‡ºäº†ç´§æ€¥é—®é¢˜å¦‚ä½•å¤„ç†ï¼ˆä¸»è¦æ˜¯çº¿ä¸ŠCrashï¼‰ Storyä»æå‡ºåˆ°ä¸Šçº¿çš„è¿‡ç¨‹ POå¦‚ä½•æå‡ºStory æ¥å£å¦‚ä½•å®šä¹‰ è”è°ƒæ–¹å¼ å¦‚ä½•ææµ‹ Bugç®¡ç† ç‹¬ç«‹APP ç­¾å å‘å¸ƒæµç¨‹ ç‰ˆæœ¬å‡çº§æ–¹å¼å’Œè§„èŒƒ å·¥å…· Appæœ¬èº«çš„Debugå·¥å…· æ‰“åŒ…å¹³å°çš„é…ç½®ä½¿ç”¨ åŒ…ç®¡ç†å¹³å°ï¼ˆMVNä»“åº“åœ°å€ï¼‰ æµ‹è¯•å·¥å…·ã€è´¦å· é¡¹ç›®ç›‘æµ‹ CrashLog å¦‚ä½•æŸ¥è¯¢ æ‰“ç‚¹ æ”¶é›†ä¸Šä¼ è§„åˆ™ åˆ’åˆ†ç»´åº¦ï¼ˆè¯¸å¦‚ï¼šæ˜¯å¦åŒºåˆ†çº¿ä¸Šå’Œbetaç¯å¢ƒï¼‰ å­—æ®µå«ä¹‰ æŸ¥è¯¢æ–¹å¼ ç›‘æµ‹æ•°æ®æœ‰æ— æŠ¥è¡¨ï¼Œå¦‚ä½•æ·»åŠ  é¡¹ç›®å½“å‰é‡è¦æ•°æ®ï¼ˆè¯·ä»”ç»†æ•´ç†ï¼Œä½œä¸ºé¡¹ç›®å½“å‰çŠ¶æ€çš„å¿«ç…§ï¼Œä»¥ä¾›æ—¥åè¿›è¡Œå¯¹æ¯”ï¼‰ åˆä½œèµ„æº QA åç«¯ UED PO ç›¸å…³é¡¹ç›®è´Ÿè´£äººï¼ˆæ¯”å¦‚å¹³å°ï¼‰ å…¶ä½™ æœ‰æ²¡æœ‰åˆ«çš„éœ€è¦æ³¨æ„çš„ç‚¹ è§„åˆ’ æ‰¾POäº†è§£åæœŸè§„åˆ’ ç¬¬ä¸€æœŸStoryçš„å¼€å‘æ—¶é—´ ä¸€æ®µæ—¶é—´å†…éœ€è¦çš„äººåŠ› é¡¹ç›®åæœŸè§„åˆ’ ===Ending===","tags":[{"name":"æŠ€æœ¯æµ","slug":"æŠ€æœ¯æµ","permalink":"https://lilei.pro/tags/æŠ€æœ¯æµ/"}]},{"title":"åšå®¢å·¥å…·","date":"2016-01-14T13:00:29.000Z","path":"2016/01/14/åšå®¢å·¥å…·/","text":"ä¸€äº›æé«˜ç½‘ç«™ä¸åšå®¢ç¼–è¾‘ã€æµè§ˆæ•ˆç‡çš„å·¥å…· Markdownç¼–è¾‘å·¥å…·dillinger.io åœ¨çº¿mdç¼–è¾‘å™¨ï¼Œæ‰€è§å³æ‰€å¾— hexoçš„å‘titleä¸­ä¸å¯ä»¥åŒ…å«è‹±æ–‡çš„[ ] *å­—ç¬¦ï¼Œå…¶ä½™ç¦å¿Œå­—ç¬¦ç›®å‰å°šæœªé‡åˆ° é¦–é¡µæ–‡ç« â€œå±•å¼€æ›´å¤šâ€é»˜è®¤æƒ…å†µä¸‹é¦–é¡µæ–‡ç« æ˜¯å…¨æ–‡å±•ç¤ºçš„ï¼Œå¾ˆä¸å‹å¥½ã€‚ åœ¨æ–‡ä»¶ä¸­å¢åŠ &lt;!--more--&gt;æ ‡ç­¾ï¼Œå³å¯å®ç°â€œå±•å¼€æ›´å¤šâ€åŠŸèƒ½ã€‚ å˜æ›´å†å² 2016.02.26 ä¿®æ”¹themes/landscape/source/css/_partial/article.stylä¸­çš„.article-entryä¸‹é¢img, videoçš„max-widthï¼Œä»100%æ”¹ä¸º70% ===Never Ending===","tags":[{"name":"å·¥ä½œæ•ˆç‡","slug":"å·¥ä½œæ•ˆç‡","permalink":"https://lilei.pro/tags/å·¥ä½œæ•ˆç‡/"}]},{"title":"åŠå¹´æ¥æˆ‘åƒè¿‡çš„é‚£äº›è›‹ç™½ç²‰","date":"2016-01-14T12:49:23.000Z","path":"2016/01/14/åŠå¹´æ¥æˆ‘åƒè¿‡çš„é‚£äº›è›‹ç™½ç²‰/","text":"ç»ƒèº«ä½“çš„äººå¤§å¤šä¼šç»å†ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š åˆæ¬¡åŠå¡ï¼Œæ²¡è¯·è¿‡æ•™ç»ƒï¼Œè‡ªå·±åœ¨å¥èº«æˆ¿é‡Œæ¼«æ— ç›®çš„åœ°ä¹±ç© æœ‰ç›®çš„æœ‰è®¡åˆ’åœ°è¿›è¡Œç‹¬ç«‹è®­ç»ƒ æ³¨é‡æ—¥å¸¸é¥®é£Ÿä¸­è›‹ç™½è´¨çš„è¡¥å……ï¼Œä¸€èˆ¬ä¼šä»æ°´ç…®è›‹å¼€å§‹ï¼Œè¿›é˜¶çš„ä¼šé€‰æ‹©é¸¡èƒ¸è‚‰ æ¥è§¦å¹¶ä½¿ç”¨è›‹ç™½ç²‰ è¿›ä¸€æ­¥æ¥è§¦è‚Œé…¸ã€æ°®æ³µã€BCAAsï¼ˆæ”¯é“¾æ°¨é…¸ï¼‰ã€è°·æ°¨é…°èƒºä¹ƒè‡³ä¿ƒç¾ç­‰ å·²ç»è¶…å‡ºäº†ç¬”è€…ç›®å‰è®¤çŸ¥é˜¶æ®µ ç”±äºè‡ªå·±ä»ä½¿ç”¨è¡¥å‰‚ä»¥æ¥ï¼Œé™†ç»­å°è¯•è¿‡äº†å¸‚é¢ä¸Šå‡ ç§å¸¸è§çš„å“ç‰Œå’Œå£å‘³ï¼Œè¿™é‡Œæ•´ç†å‡ºæ¥ï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åå¯¹æ¯”é€‰æ‹©ï¼Œä¹Ÿå¸Œæœ›ä¸ºå°šæœªæ¥è§¦è¡¥å‰‚çš„æœ‹å‹æä¾›ä¸€äº›åˆçº§çš„çŸ¥è¯†ã€‚ ä¸‹é¢ä¸€ä¸€ç»†æ•°ï¼Œå°±ä»·æ ¼ã€å£å‘³ã€è›‹ç™½è´¨å«é‡ã€æ€§ä»·æ¯”ç­‰å‡ ä¸ªæ–¹é¢ï¼Œå¯¹æ¯”ä¸€ä¸‹è¿™å‡ ç§ç²‰ã€‚ è¡¨æ ¼ä¸­åˆ—å‡ºçš„æ¯ä¸€ç§ç²‰ï¼Œå‡ä¸ºç¬”è€…äº²èº«ä½¿ç”¨è¿‡ã€‚ å›¾ç‰‡ã€ä»·æ ¼å‡æ¥è‡ªäºwww.iherb.comï¼Œæˆªå–æ—¶é—´ä¸º2016.1.17ã€‚è®¡ä»·æœªåŠ å…¥æ–°äººä¼˜æƒ ã€èŠ‚å‡æ—¥ä¿ƒé”€ç­‰å› ç´ ã€‚ åç§° ä»·æ ¼ é‡é‡ æ¯æ¡¶ä»½æ•° æ¯ä»½è›‹ç™½è´¨å«é‡/g æ¯ä»½æ”¯é“¾æ°¨é…¸å«é‡/g æ¯ä»½è°·æ°¨é…°èƒºå«é‡/g å£å‘³ Optimum/æ¬§æ™®ç‰¹è’™ $65 5ç£… 74 24 5.5 4 Double Rich Chocolate Bio-X $65 5ç£… 65 27 æœªçŸ¥ æœªçŸ¥ Chocolate Dymatize/è¿ªé©¬æ³°å…¹ $58 5ç£… 62 25 5.6 4.4 Chocolate Fudge MRM $59 5ç£… 73 22 4.6 4.88 Strawberry BSN Syntha-6/å…­é‡çŸ©é˜µ $60 5ç£… 48 22 æœªçŸ¥ æœªçŸ¥ Vanilla Ice Cream Optimum/æ¬§æ™®ç‰¹è’™ é‡‘ç‰Œä¹³æ¸…è›‹ç™½ bodybuilding.comä¸Šæ’åç¬¬ä¸€çš„ä¹³æ¸…è›‹ç™½ è›‹ç™½è´¨çº¯åº¦é«˜ï¼Œæ„å‘³ç€åŒæ ·æ˜¯5ç£…ï¼Œå¯ä»¥æä¾›æ›´å¤šçš„ä»½æ•° å£å‘³æ¸…æ·¡ï¼Œå®¹æ˜“æ‘‡åŒ€ iherbè´­ä¹°é“¾æ¥ Bio-X Power Whey Complex å¤åˆä¹³æ¸…è›‹ç™½ ç¬”è€…å°è¯•çš„ç¬¬ä¸€æ¡¶è›‹ç™½ç²‰ï¼Œ@é¡¾è€å¸ˆæ¨è æ·˜å®è´­ä¹°ï¼Œæ®å–å®¶è¡¨ç¤ºæ˜¯æ¥è‡ªé¦™æ¸¯bcshopä»£è´­ iherbä¸å”®å– å› è´­ä¹°é€”å¾„å•ä¸€ï¼Œä¸”ä½¿ç”¨è€…å°‘ï¼Œä¸æ¨è Dymatizeï¼è¿ªé©¬æ³°å…¹ Eliteç²¾è‹±ä¹³æ¸…è›‹ç™½ æ€§ä»·æ¯”é«˜ å£å‘³æ¸…æ·¡ï¼Œå®¹æ˜“æ‘‡åŒ€ ç›¸è¾ƒäºå…¶å®ƒè›‹ç™½ç²‰ï¼ŒDymatizeçš„ç²‰åƒäº†ä¹‹åä¼šæœ‰å¼ºçƒˆçš„å±æ„â€¦ iherbè´­ä¹°é“¾æ¥ MRM æ€§ä»·æ¯”é«˜ è‰è“å£å‘³ï¼Œé‡Œé¢å±…ç„¶æœ‰è‰è“ç²’ï¼ï¼ï¼å£æ„Ÿå¾®ç”œï¼Œæœ‰ç‚¹è‰è“å¥¶æ˜”çš„æ„Ÿè§‰ï¼ˆï¼‹è„±è„‚ç‰›å¥¶ï¼‰ã€‚ ç”¨æ‘‡æ¯æ‘‡åŒ€æ—¶ï¼Œæ³¡æ²«éå¸¸å¤šï¼Œå°¤å…¶æ˜¯æ­é…è„±è„‚ç‰›å¥¶è€Œéçº¯å‡€æ°´ã€‚å¯¼è‡´æ¸…æ´—æ¯å­å¾ˆéº»çƒ¦ iherbè´­ä¹°é“¾æ¥ BSN Syntha-6 å…­é‡çŸ©é˜µ ä¸¥æ ¼åœ°è¯´è¿™æ˜¯å¤§ä¼—æ‰€è°“çš„â€œå¢è‚Œç²‰â€ï¼Œå¹¶éä¹³æ¸…è›‹ç™½ç²‰ ç¢³æ°´åŒ–åˆç‰©å«é‡é«˜ï¼Œçƒ­é‡é«˜ æ—¥å¸¸ç”¨é‡å¤§ï¼Œæ¯æ¡¶åªèƒ½åƒ25å¤©å·¦å³ é¦™è‰å£å‘³å¾ˆç”œï¼Œå£æ„Ÿæœ€æ£’ iherbè´­ä¹°é“¾æ¥ ä»¥ä¸Šå°±æ˜¯ç¬”è€…ç›®å‰ä¸ºæ­¢ä½¿ç”¨è¿‡çš„ä¹³æ¸…è›‹ç™½äº†ï¼Œé™¤äº†Optimumçš„åƒäº†ä¸¤æ¡¶ï¼ˆä¸€æ¡¶æ¥è‡ªäº¬ä¸œï¼Œä¸€æ¡¶æ¥è‡ªiherbï¼‰ï¼Œå…¶å®ƒå“ç‰Œéƒ½æ˜¯ä¸€æ¡¶ã€‚åœ¨è¿™é‡Œå†ä¸€æ¬¡æ¨èè¡¥å‰‚æµ·æ·˜ç½‘ç«™iherbï¼Œç»å¸¸ä¸å®šæœŸæ¨å‡ºæŠ˜æ‰£æ´»åŠ¨ï¼Œæ¯”å¦‚æ–°äººå‡$10ä¼˜æƒ ã€é»‘äº”æŠ˜ä¸Š8æŠ˜ä¼˜æƒ ï¼Œè€Œä¸”é¡ºä¸°å¿«é€’æ»¡Â¥40æ˜¯å…å›½é™…ä¸å›½å†…é‚®è´¹çš„ï¼Œå³ä½¿ä¸å…é‚®ï¼Œé¡ºä¸°çš„é‚®è´¹ä¹Ÿåªæœ‰$2ã€‚ä¸å…¶åœ¨æ·˜å®ã€äº¬ä¸œä¸Šæå¿ƒåŠèƒ†åœ°ä¹°ä»£è´­ï¼Œè¿˜ä¸å¦‚è‡ªå·±æµ·æ·˜æ¥çš„åˆ’ç®—ã€‚ è¿™é‡Œæä¾›ä¸€ä¸‹æˆ‘çš„iherbä¼˜æƒ ç ï¼šLSH141ï¼Œåœ¨æ”¶é“¶å°ç»“è´¦æ—¶å¡«å†™è¿›å»ï¼Œä¼šæœ‰-$5~$10ä¸ç­‰çš„ä¼˜æƒ ï¼Œæˆ‘å½“æ—¶é¦–å•å‡äº†$10ï¼Œç°åœ¨è²Œä¼¼ä¼˜æƒ åŠ›åº¦é™ä½äº†ã€‚è€Œä¸”ä¸€æ—¦ä½ ä½¿ç”¨è¿™ä¸ªä¼˜æƒ ç è´­ä¹°æˆåŠŸï¼Œæˆ‘ä¹Ÿå°†è·å¾—ä¸€å®šè¡¥è´´é‡‘é¢è¿›å…¥è´¦æˆ·ï¼Œä¸¤å…¨å…¶ç¾ã€‚ æœ€åè®²è®²è‚Œè‚‰ç§‘æŠ€ï¼ˆMuscleTechï¼‰è¿™ä¸ªç‰Œå­ã€‚é¦–å…ˆä»çŸ¥ååº¦ä¸Šæ¥è¯´ï¼Œè‚Œè‚‰ç§‘æŠ€åœ¨å›½å†…å¤§æ¦‚å¤„äºæ•°ä¸€æ•°äºŒçš„åœ°ä½ã€‚è€Œä¸”é‚€è¯·åˆ°äº†è²å°”è¥¿æ–¯ä»£è¨€ï¼ŒçœŸæ˜¯æ•¢ç ¸é’±å•Šã€‚ç¬”è€…æ²¡æœ‰å°è¯•è¿‡è‚Œè‚‰ç§‘æŠ€çš„è›‹ç™½ç²‰ï¼Œä½†ä»ç¬”è€…è´­ä¹°è¿‡å®ƒçš„å¤åˆè‚Œé…¸ä¸Šæ¥çœ‹ï¼ŒåŒ…è£…æ¯”èµ·å…¶å®ƒå‡ ä¸ªå“ç‰Œç•¥æ˜¾ç®€é™‹ã€‚æ€»çš„çœ‹æ¥ä¸Dymatizeã€MRMè¿™äº›ä½ä»·äº§å“æ¯”èµ·æ¥ï¼Œæ€§ä»·æ¯”ä¸é«˜ï¼›è›‹ç™½è´¨å«é‡åˆæ¯”ä¸è¿‡Optimumã€‚è‡³äºè´­ä¸è´­ä¹°ï¼Œå°±çœ‹ä½ å¯¹è¿™ä¸ªå“ç‰Œçš„ä¿¡ä»°ç¨‹åº¦äº†ã€‚ ===Ending===","tags":[{"name":"å¤§ä¿å¥","slug":"å¤§ä¿å¥","permalink":"https://lilei.pro/tags/å¤§ä¿å¥/"}]},{"title":"Hello World","date":"2016-01-10T13:00:29.000Z","path":"2016/01/10/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment ===Ending===","tags":[{"name":"å·¥ä½œæ•ˆç‡","slug":"å·¥ä½œæ•ˆç‡","permalink":"https://lilei.pro/tags/å·¥ä½œæ•ˆç‡/"}]}]