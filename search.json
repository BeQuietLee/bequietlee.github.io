[{"title":"Kotlin åç¨‹åŸºç¡€è¯¾ 02.suspendå‡½æ•°","url":"https://lilei.pro/2019/12/10/kotlin-coroutines-02/","content":"<blockquote>\n<p>è¿™æ˜¯ã€ŠKotlin åç¨‹åŸºç¡€è¯¾ã€‹çš„ç¬¬2ç¯‡æ–‡ç« ã€‚</p>\n</blockquote>\n<blockquote>\n<p>Everyone must choose one of two pains: The pain of discipline or the pain of regret. Choose WISELY.</p>\n</blockquote>\n<p>åœ¨ä¸Šç¯‡æ–‡ç« é‡Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•é€šè¿‡åç¨‹ç®€åŒ–è€—æ—¶æ“ä½œçš„å†™æ³•ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªå…³é”®å­—<code>suspend</code>ï¼Œç”¨äºåœ¨å®šä¹‰å‡½æ•°æ—¶è¿›è¡Œå£°æ˜ã€‚æœ¬ç¯‡æ–‡ç« å°†å¯¹suspendè¿›è¡Œè¿›ä¸€æ­¥ä»‹ç»ï¼Œæ—¨åœ¨å­¦ä¼šå®ƒçš„å«ä¹‰å’Œç”¨æ³•ã€‚</p>\n<h1 id=\"suspendé™å®šè¯çš„å«ä¹‰\"><a href=\"#suspendé™å®šè¯çš„å«ä¹‰\" class=\"headerlink\" title=\"suspendé™å®šè¯çš„å«ä¹‰\"></a>suspendé™å®šè¯çš„å«ä¹‰</h1><p><strong>suspend</strong>ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯<strong>ä¸­æ–­ï¼ŒæŒ‚èµ·</strong>ï¼Œè·Ÿ<strong>publicã€static</strong>ç­‰å…³é”®å­—ç›¸åŒï¼Œç”¨åœ¨å‡½æ•°å£°æ˜å‰ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªâ€œæŒ‚èµ·å‡½æ•°â€ã€‚</p>\n<p>æŒ‚èµ·å‡½æ•°åªèƒ½åœ¨åç¨‹æˆ–å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ä¸­è¢«è°ƒç”¨ï¼Œå¦‚æœä½ åœ¨éåç¨‹ä¸­ä½¿ç”¨åˆ°äº†æŒ‚èµ·å‡½æ•°ï¼Œä¼šçœ‹åˆ°ç¼–è¯‘å™¨æœ‰å¦‚ä¸‹æŠ¥é”™ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Error: Kotlin: Suspend functions are only allowed to be called from a coroutine or another suspend function</span><br></pre></td></tr></table></figure>\n<p>å‰é¢ç”¨åˆ°çš„<code>delay</code>å°±æ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ã€‚<strong>suspend</strong>å…³é”®å­—è¡¨æ˜å‡½æ•°å†…éƒ¨è¿›è¡Œäº†è€—æ—¶æ“ä½œï¼Œå¯ä»¥æ˜¯è®¡ç®—å¯†é›†å‹çš„CPUä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥æ˜¯ç½‘ç»œã€ç£ç›˜æ“ä½œå¯†é›†å‹çš„IOä»»åŠ¡ã€‚åŸºæœ¬ä¸Šå¯ä»¥çœ‹åšâ€œä½†å‡¡ç”¨callbackå®ç°çš„å›è°ƒå‡½æ•°ï¼Œéƒ½èƒ½ç”¨ä¸€ä¸ªç›¸å¯¹åº”çš„æŒ‚èµ·å‡½æ•°å®ç°â€ã€‚</p>\n<p>æ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<strong>suspend</strong>å…³é”®å­—çš„æ—¶æœºå°±éå¸¸æ˜ç¡®äº†ï¼šå½“å‡½æ•°è¦è¿›è¡Œè€—æ—¶æ“ä½œæ—¶ï¼Œå°±æŠŠå®ƒå£°æ˜ä¸º<code>suspend</code>ã€‚</p>\n<h1 id=\"suspendåšäº†ä»€ä¹ˆäº‹\"><a href=\"#suspendåšäº†ä»€ä¹ˆäº‹\" class=\"headerlink\" title=\"suspendåšäº†ä»€ä¹ˆäº‹\"></a>suspendåšäº†ä»€ä¹ˆäº‹</h1><p><em>æ–¹ä¾¿èµ·è§ï¼Œåç»­ç”¨â€œæŒ‚èµ·â€æŒ‡ä»£â€œsuspendâ€ã€‚</em></p>\n<p>ä½œä¸ºåŠç‰©åŠ¨è¯ï¼Œâ€œæŒ‚èµ·â€åº”å½“æœ‰ä¸€ä¸ªå®¾è¯­ï¼Œè¿™é‡Œâ€œæŒ‚èµ·â€çš„å¯¹è±¡æ˜¯<strong>åç¨‹</strong>ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹æŒ‚èµ·çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆä¸€æ¢ç©¶ç«Ÿï¼Œè®°ä½ä¸‹é¢è¿™å¥è¯ï¼š</p>\n<p><strong>â€œæŒ‚èµ·â€æ˜¯æŒ‡åç¨‹ä»å®ƒå½“å‰çº¿ç¨‹è„±ç¦»ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªçº¿ç¨‹è¿è¡Œã€‚</strong>å½“çº¿ç¨‹è¿è¡Œåˆ°<code>suspend</code>å‡½æ•°æ—¶ï¼Œä¼šæš‚æ—¶æŒ‚èµ·è¿™ä¸ªå‡½æ•°åŠåç»­ä»£ç çš„æ‰§è¡Œã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªè§’è‰²ï¼šçº¿ç¨‹å’Œåç¨‹ã€‚</p>\n<h2 id=\"çº¿ç¨‹çš„è¡Œä¸º\"><a href=\"#çº¿ç¨‹çš„è¡Œä¸º\" class=\"headerlink\" title=\"çº¿ç¨‹çš„è¡Œä¸º\"></a>çº¿ç¨‹çš„è¡Œä¸º</h2><p>å½“çº¿ç¨‹è¿è¡Œåˆ°â€œæŒ‚èµ·â€ä»£ç å—æ—¶ï¼Œä¼šè·³å‡ºå½“å‰çš„ä»£ç å—ï¼Œä¸å†æ‰§è¡Œåç»­ä»£ç ã€‚æ¥ä¸‹æ¥çº¿ç¨‹ä¼šåšä»€ä¹ˆå‘¢ï¼Ÿ</p>\n<p>å¦‚æœå®ƒæ˜¯ä¸€ä¸ªåå°çº¿ç¨‹ï¼š</p>\n<ul>\n<li>è¦ä¹ˆæ— äº‹å¯åšï¼Œè¢«ç³»ç»Ÿå›æ”¶</li>\n<li>è¦ä¹ˆè¢«è°ƒåº¦æ‰§è¡Œåˆ«çš„åå°ä»»åŠ¡</li>\n</ul>\n<p>è·ŸJavaçº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹åœ¨å·¥ä½œç»“æŸä¹‹åçš„è¡¨ç°å®Œå…¨ä¸€æ ·ï¼š<strong>å›æ”¶æˆ–è€…å†åˆ©ç”¨</strong>ã€‚</p>\n<p>å¦‚æœå®ƒæ˜¯Androidä¸»çº¿ç¨‹ï¼š</p>\n<ul>\n<li>ç»§ç»­UIåˆ·æ–°å·¥ä½œ</li>\n</ul>\n<h2 id=\"åç¨‹çš„è¡Œä¸º\"><a href=\"#åç¨‹çš„è¡Œä¸º\" class=\"headerlink\" title=\"åç¨‹çš„è¡Œä¸º\"></a>åç¨‹çš„è¡Œä¸º</h2><p>ä¸Šé¢è®²åˆ°çº¿ç¨‹è¿è¡Œåˆ°æŒ‚èµ·ä»£ç å—æ—¶ï¼Œä¼šæš‚æ—¶é€€å‡ºå½“å‰ä»£ç å—çš„æ‰§è¡Œã€‚é‚£ä¹ˆï¼Œå‰©ä½™çš„åç¨‹ä»£ç åœ¨å“ªé‡Œå¾—åˆ°æ‰§è¡Œå‘¢ï¼Ÿç­”æ¡ˆå°±åœ¨æŒ‚èµ·å‡½æ•°çš„å®ç°ä¸­â€”â€”å³æˆ‘ä»¬ä¸ºæŒ‚èµ·å‡½æ•°æŒ‡å®šçš„çº¿ç¨‹ã€‚</p>\n<p><code>withContext</code>å‡½æ•°å¯ä»¥æŒ‡å®šåç¨‹ä»£ç çš„è¿è¡Œçº¿ç¨‹ï¼Œå¸¸è§çš„Dispatcheræœ‰Mainã€IOã€Defaultã€‚åç¨‹ä»æŒ‚èµ·çš„åœ°æ–¹å¼€å§‹ï¼Œåˆ‡æ¢åˆ°è¿™äº›çº¿ç¨‹ä¹‹ä¸­çš„ä¸€ä¸ªç»§ç»­è¿è¡Œï¼Œå½“è¿è¡Œå®Œæ¯•æ—¶ï¼Œä¼š<strong>è‡ªåŠ¨åˆ‡æ¢å›åŸçº¿ç¨‹æ‰§è¡Œ</strong>ã€‚</p>\n<p>åœ¨åç¨‹çš„æºç é‡Œï¼Œâ€œè‡ªåŠ¨åˆ‡æ¢å›æ¥â€æ˜¯é€šè¿‡<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.coroutines.experimental/-continuation/resume.html\" target=\"_blank\" rel=\"noopener\">resume</a>å®ç°çš„ã€‚æŒ‚èµ·å‡½æ•°ä¹‹æ‰€ä»¥å¿…é¡»åœ¨åç¨‹ä¸­è°ƒç”¨ï¼Œå°±æ˜¯å› ä¸ºåç¨‹æ¡†æ¶ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†è¿™ä¸ªè‡ªåŠ¨åˆ‡æ¢çš„è¿‡ç¨‹ã€‚</p>\n<h2 id=\"suspend-ä¸ä¼šçœŸæ­£æ“ä½œæŒ‚èµ·\"><a href=\"#suspend-ä¸ä¼šçœŸæ­£æ“ä½œæŒ‚èµ·\" class=\"headerlink\" title=\"suspend ä¸ä¼šçœŸæ­£æ“ä½œæŒ‚èµ·\"></a>suspend ä¸ä¼šçœŸæ­£æ“ä½œæŒ‚èµ·</h2><p>å¹¶ä¸æ˜¯å£°æ˜äº†<code>suspend</code>åï¼Œçº¿ç¨‹è¿è¡Œåˆ°è¯¥ä½ç½®ï¼Œå°±è‡ªåŠ¨è¿›è¡ŒæŒ‚èµ·åˆ‡æ¢çš„ï¼Œå‚ç…§ä¸‹é¢ä¸€ä¸ªä¾‹å­ï¼ŒæŒ‚èµ·å‡½æ•°ä»ç„¶è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­ã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰åˆ‡æ¢çº¿ç¨‹ï¼Ÿå› ä¸ºç¼–è¯‘å™¨æ ¹æœ¬ä¸çŸ¥é“è¦å¾€å“ªé‡Œåˆ‡ï¼Œéœ€è¦æˆ‘ä»¬åœ¨ç¼–ç æ—¶æ˜ç¡®å‘Šè¯‰å®ƒï¼Œè¿™ä¸ªæŒ‚èµ·å‡½æ•°è¦åˆ‡æ¢åˆ°å“ªä¸€ä¸ªçº¿ç¨‹ç»§ç»­è¿è¡Œã€‚æˆ‘ä»¬å¯ä»¥ç”¨<code>withContext</code>æŒ‡æ˜å¾…åˆ‡æ¢çš„çº¿ç¨‹ã€‚åœ¨å®ç°ä¸€ä¸ªæŒ‚èµ·å‡½æ•°æ—¶ï¼Œä»…ä»…åŠ ä¸Š<code>suspend</code>å…³é”®å­—æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»åœ¨å‡½æ•°å†…éƒ¨ç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨åç¨‹æ¡†æ¶è‡ªå¸¦çš„<code>suspend</code>å‡½æ•°ã€‚</p>\n<p><code>suspend</code>åªæ˜¯ä¸€ä¸ªæé†’ï¼Œå®ƒåªæœ‰ä¸€ä¸ªæ•ˆæœï¼Œå°±æ˜¯é™åˆ¶å‡½æ•°åªèƒ½åœ¨åç¨‹é‡Œè°ƒç”¨ï¼Œå¦‚æœåœ¨éåç¨‹é‡Œä½¿ç”¨äº†<code>suspend</code>å‡½æ•°ï¼Œåˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä»ç„¶è¿è¡Œåœ¨Main</span></span><br><span class=\"line\">suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">suspendingPrint</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">  println(<span class=\"string\">\"Thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">I/System.<span class=\"keyword\">out</span>: Thread: main</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è¿è¡Œåœ¨IO</span></span><br><span class=\"line\">suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">suspendingPrint</span><span class=\"params\">()</span></span> = withContext(Dispatchers.IO) &#123;</span><br><span class=\"line\">  println(<span class=\"string\">\"Thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"å¦‚ä½•å†™ä¸€ä¸ªsuspendå‡½æ•°\"><a href=\"#å¦‚ä½•å†™ä¸€ä¸ªsuspendå‡½æ•°\" class=\"headerlink\" title=\"å¦‚ä½•å†™ä¸€ä¸ªsuspendå‡½æ•°\"></a>å¦‚ä½•å†™ä¸€ä¸ªsuspendå‡½æ•°</h1><p>æœ€ç®€å•çš„æ–¹å¼æ˜¯ï¼š</p>\n<ol>\n<li>å£°æ˜å‡½æ•°ä¸º<code>suspend</code></li>\n<li>ä½¿ç”¨<code>withContext</code>æŒ‡å®šç›®æ ‡çº¿ç¨‹ï¼Œæˆ–è€…åœ¨å‡½æ•°å†…éƒ¨è°ƒç”¨å¦ä¸€ä¸ª<code>suspend</code>å‡½æ•°</li>\n</ol>\n<h1 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h1><p>æœ¬æ–‡ä»‹ç»äº†åç¨‹ä¸­æœ€å¸¸è§çš„å…³é”®å­—<code>suspend</code>çš„å«ä¹‰å’Œç”¨æ³•ï¼Œé˜…è¯»å®Œæœ¬æ–‡åä½ åº”å½“æŒæ¡ï¼š</p>\n<ul>\n<li>æŒ‚èµ·å‡½æ•°è¿è¡Œæ—¶çš„è¡¨ç°</li>\n<li>ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨æŒ‚èµ·å‡½æ•°</li>\n<li>å¦‚ä½•å†™ä¸€ä¸ªç®€å•çš„æŒ‚èµ·å‡½æ•°</li>\n</ul>\n<h1 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h1><ul>\n<li><a href=\"https://juejin.im/post/5da81352f265da5b774fc39d\" target=\"_blank\" rel=\"noopener\">æ˜é‡‘-æ‰”ç‰©çº¿</a></li>\n</ul>\n","categories":[],"tags":["Kotlin"]},{"title":"Kotlin åç¨‹åŸºç¡€è¯¾ 01.åç¨‹çš„åŸºæœ¬æ¦‚å¿µä¸ç”¨æ³•","url":"https://lilei.pro/2019/11/17/kotlin-coroutines-01/","content":"<blockquote>\n<p>è¿™æ˜¯ã€ŠKotlin åç¨‹åŸºç¡€è¯¾ã€‹çš„ç¬¬1ç¯‡æ–‡ç« ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æ­£å› ä¸ºå¥¹è§‰å¾—ä¸€åˆ‡éƒ½æ— æ‰€è°“ï¼Œæ‰€ä»¥ç”Ÿæ´»ç»™å¥¹ä»€ä¹ˆï¼Œå¥¹ä¾¿æ¥å—ä»€ä¹ˆã€‚å°‘å¹´æ—¶ä»£ï¼Œå¥¹è§‰å¾—é€‰æ‹©ä¸ºæ—¶è¿‡æ—©ï¼Œè€Œç°åœ¨å·²æ˜¯é’å¹´ï¼Œå¥¹åˆè§‰å¾—æ”¹å˜ä¸ºæ—¶è¿‡æ™šã€‚</p>\n</blockquote>\n<h1 id=\"ç³»åˆ—åŸºç¡€è¯¾å‰è¨€\"><a href=\"#ç³»åˆ—åŸºç¡€è¯¾å‰è¨€\" class=\"headerlink\" title=\"ç³»åˆ—åŸºç¡€è¯¾å‰è¨€\"></a>ç³»åˆ—åŸºç¡€è¯¾å‰è¨€</h1><p>å¯¹äºKotlinå­¦ä¹ è€Œè¨€ï¼Œè¦æƒ³ä»â€œå…¥é—¨â€èµ°åˆ°â€œç²¾é€šâ€ï¼Œåç¨‹ï¼ˆCoroutinesï¼‰æ˜¯å¿…é¡»è¿ˆè¿‡å»çš„ä¸€é“åã€‚æ¥ä¸‹æ¥ä¸€å‘¨æ—¶é—´ï¼Œæˆ‘ä¼šåœ¨ä¹‹å‰é›¶æ•£å­¦ä¹ çš„åŸºç¡€ä¸Šï¼Œæ€»ç»“æˆä¸€ç³»åˆ—åŸºç¡€è¯¾æ–‡ç« ï¼Œä½œä¸ºå¯¹åç¨‹çš„é˜¶æ®µæ€§å­¦ä¹ å°ç»“ã€‚æ–‡ç« ç›®å½•å¦‚ä¸‹ï¼š</p>\n<ul>\n<li>01.åç¨‹çš„åŸºæœ¬æ¦‚å¿µä¸ç”¨æ³•</li>\n<li>02.éé˜»å¡å¼æŒ‚èµ·ï¼ˆsuspendï¼‰å‡½æ•°</li>\n<li>03.ç†è§£åç¨‹çš„åŸŸï¼ˆScopeï¼‰å’Œè°ƒåº¦å™¨ï¼ˆDispatcherï¼‰</li>\n<li>04.ç”¨AAC&amp;åç¨‹ä¼˜åŒ–Androidæ¶æ„è®¾è®¡</li>\n</ul>\n<h1 id=\"ä»€ä¹ˆæ˜¯åç¨‹\"><a href=\"#ä»€ä¹ˆæ˜¯åç¨‹\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åç¨‹\"></a>ä»€ä¹ˆæ˜¯åç¨‹</h1><p>ä½†å‡¡å­¦ä¸€é—¨æ–°çŸ¥è¯†ï¼Œæ€»æ˜¯ç¦»ä¸å¼€5w1hã€‚è¯´èµ·â€œåç¨‹â€ï¼Œå¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯2å·çº¿åŒ—æ–°æ³¾é‚£å®¶åšæ—…æ¸¸çš„äº’è”ç½‘å…¬å¸ï¼Œä¸è¿‡ï¼Œæ­¤â€œåç¨‹â€éå½¼â€œæºç¨‹â€ï¼Œåç¨‹ï¼ˆCoroutinesï¼‰å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œå®ƒçš„å¹´çºªè¦æ¯”Kotlinè¯­è¨€å¤§å¾—å¤šã€‚â€œåç¨‹ Coroutinesâ€æºè‡ª Simula å’Œ Modula-2 è¯­è¨€ï¼Œè¿™ä¸ªæœ¯è¯­æ—©åœ¨ 1958 å¹´å°±è¢« Melvin Edward Conway å‘æ˜å¹¶ç”¨äºæ„å»ºæ±‡ç¼–ç¨‹åºï¼Œè¯´æ˜åç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œå¹¶ä¸å±€é™äºç‰¹å®šçš„è¯­è¨€ã€‚ç›®å‰å¾ˆå¤šç°ä»£è¯­è¨€éƒ½æœ‰åç¨‹çš„å®ç°ï¼Œæ¯”å¦‚Goã€JavaScriptã€C#ç­‰ã€‚</p>\n<p>åç¨‹ä½œä¸ºä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç›®çš„æ˜¯ç®€åŒ–å¹¶è¡Œä»£ç ç¼–å†™ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä»¥åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥é€»è¾‘ã€‚å¯¹äºKotlinè€Œè¨€ï¼Œâ€œåç¨‹â€ä¸€è¯æ˜¯æŒ‡å®ç°äº†åç¨‹æ€æƒ³çš„ä¸€ç³»åˆ—APIçš„æ€»ç§°ã€‚Kotlinåç¨‹çš„åº•å±‚å®ç°æ˜¯çº¿ç¨‹ã€‚</p>\n<h1 id=\"æ²¡æœ‰åç¨‹çš„æ—¥å­é‡Œ\"><a href=\"#æ²¡æœ‰åç¨‹çš„æ—¥å­é‡Œ\" class=\"headerlink\" title=\"æ²¡æœ‰åç¨‹çš„æ—¥å­é‡Œ\"></a>æ²¡æœ‰åç¨‹çš„æ—¥å­é‡Œ</h1><p>ç”±äºAndroidæ˜¯å•ä¸€UIçº¿ç¨‹çš„æ¡†æ¶ï¼ŒåŠ¿å¿…è¦è¿›è¡Œå¾ˆå¤šUIçº¿ç¨‹ä»¥å¤–çš„è€—æ—¶æ“ä½œï¼Œåœ¨åç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨è¿™äº›æŠ€æœ¯æ¥å®ç°è¯¸å¦‚ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“è¯»å†™ç­‰åŠŸèƒ½ï¼š</p>\n<ul>\n<li>AsyncTaskï¼šæ˜¯AndroidåŸç”Ÿçš„å¼‚æ­¥ä»»åŠ¡å†™æ³•ï¼Œå†™è¿‡çš„äººå°±çŸ¥é“å®ƒæœ‰å¤šéš¾ç”¨ï¼Œä¸šåŠ¡é€»è¾‘è¢«åˆ†æ•£åœ¨å‰ä¸­åä¸‰ä¸ªæ–¹æ³•é‡Œï¼Œå†—é•¿çš„boilerplateä»£ç ã€‚æ›´æœ‰ç”šè€…ï¼Œä¸€æ—¦å‘ç”ŸåµŒå¥—ï¼Œå…‰æ˜¯ä¸€å±‚å±‚å›è°ƒå°±èƒ½æŠŠäººæç–¯æ‰ã€‚</li>\n<li>Threadï¼šç›´æ¥å¼€çº¿ç¨‹å¹¶ä¸æ˜¯ä¸€ç§å¥½çš„è®¾è®¡ï¼Œåªæœ‰æ–°æ‰‹æ‰è¿™ä¹ˆå¹²ã€‚</li>\n<li>ThreadPool or ExecutorServiceï¼šè¿™æ¯”<code>new Thread</code>å¥½ä¸€äº›ï¼Œä½†åŒæ ·è¦å¤„ç†UIã€å·¥ä½œçº¿ç¨‹åˆ‡æ¢çš„é—®é¢˜ï¼Œä»¥åŠæ— æ³•é¿å…çš„å›è°ƒã€‚</li>\n<li>Handlerï¼šä¸€ä¸ªå·¥ä½œçº¿ç¨‹çš„Handlerç”¨æ¥å¤„ç†è€—æ—¶ä»»åŠ¡ï¼Œå¤„ç†å®Œæˆåä¸¢ç»™ä¸»çº¿ç¨‹Handlerï¼Œç®€å•ã€ç›´æ¥ã€æœ´å®æ— åã€‚</li>\n</ul>\n<p>è¿™æ—¶åç¨‹ï¼ˆCoroutinesï¼‰æ¥äº†ï¼Œä¸ºæˆ‘ä»¬æ¨ç¿»å›è°ƒåœ°ç‹±ã€æ ·æ¿ä»£ç ã€å†…å­˜æ³„æ¼ã€çº¿ç¨‹åˆ‡æ¢å‡ åº§å¤§å±±ï¼ŒAndroidå¼€å‘è€…ç»ˆäºç¿»èº«å†œå¥´æŠŠæ­Œå”±ï¼Œæ•¢å«æ—¥æœˆæ¢æ–°å¤©ã€‚</p>\n<h1 id=\"ç¬¬ä¸€ä¸ªåç¨‹Demo\"><a href=\"#ç¬¬ä¸€ä¸ªåç¨‹Demo\" class=\"headerlink\" title=\"ç¬¬ä¸€ä¸ªåç¨‹Demo\"></a>ç¬¬ä¸€ä¸ªåç¨‹Demo</h1><h2 id=\"ç”¨Thread-sleepæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\"><a href=\"#ç”¨Thread-sleepæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\" class=\"headerlink\" title=\"ç”¨Thread.sleepæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\"></a>ç”¨Thread.sleepæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</h2><p>åœ¨æœ¬æ–‡æˆ‘ä»¬æš‚ä¸”ä¸è°ˆAndroidç¯å¢ƒï¼Œåœ¨æ›´é€šç”¨çš„ç¯å¢ƒä¸‹å±•ç°åç¨‹çš„ç”¨æ³•ã€‚é¦–å…ˆæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªè€—æ—¶æ“ä½œä¸éè€—æ—¶æ“ä½œæ··åˆçš„åœºæ™¯ï¼Œçœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼Œå®ƒåœ¨<code>main</code>å‡½æ•°é‡Œä¾æ¬¡æ‰“å°<code>one two three</code>ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">main</span><span class=\"params\">(args: <span class=\"type\">Array</span>&lt;<span class=\"type\">String</span>&gt;)</span></span> &#123;</span><br><span class=\"line\">    println(<span class=\"string\">\"one\"</span>)</span><br><span class=\"line\">    println(<span class=\"string\">\"two\"</span>)</span><br><span class=\"line\">    println(<span class=\"string\">\"three\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åŒæ—¶æœ‰å¦ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šè€—æ—¶3såï¼Œæ‰“å°å‡ºå‚æ•°åœ¨æ§åˆ¶å°ã€‚æˆ‘ä»¬ç”¨ç›´ç™½çš„<code>Thread.sleep</code>æ¥è¿›è¡Œå»¶æ—¶æ¨¡æ‹Ÿã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">printDelayed</span><span class=\"params\">(msg: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    Thread.sleep(<span class=\"number\">3000</span>)</span><br><span class=\"line\">    println(msg)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åå°†ä¸»ç¨‹åºçš„<code>print(two)</code>æ”¹ä¸ºè€—æ—¶ä»»åŠ¡ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">main</span><span class=\"params\">(args: <span class=\"type\">Array</span>&lt;<span class=\"type\">String</span>&gt;)</span></span> &#123;</span><br><span class=\"line\">    println(<span class=\"string\">\"one\"</span>)</span><br><span class=\"line\">    printDelayed(<span class=\"string\">\"two\"</span>)</span><br><span class=\"line\">    println(<span class=\"string\">\"three\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿è¡Œåï¼Œè¾“å‡ºå¦‚ä¸‹ï¼Œéå¸¸ç¬¦åˆé¢„æœŸã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">one</span><br><span class=\"line\">three</span><br><span class=\"line\">// è¿™é‡Œç­‰å¾…3s</span><br><span class=\"line\">two</span><br></pre></td></tr></table></figure>\n<h2 id=\"ç”¨delayæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\"><a href=\"#ç”¨delayæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\" class=\"headerlink\" title=\"ç”¨delayæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ\"></a>ç”¨delayæ¨¡æ‹Ÿè€—æ—¶æ“ä½œ</h2><p>Kotlinçš„åç¨‹åº“æä¾›äº†å¦ä¸€ç§å»¶æ—¶çš„APIï¼Œ<code>delay</code>ï¼Œæˆ‘ä»¬æŠŠåŸæ¥çš„<code>Thread.sleep</code>æ›¿æ¢ä¸º<code>delay</code>ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">printDelayed</span><span class=\"params\">(msg: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    delay(<span class=\"number\">3000</span>L)</span><br><span class=\"line\">    println(msg)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤æ—¶Android Studioä¼šåœ¨<code>delay</code>å¤„æç¤ºé”™è¯¯ï¼š<em>suspend function delay should be called only from a coroutine or another suspend function</em>ã€‚ç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œdelayæ˜¯ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ï¼Œå®ƒåªèƒ½åœ¨åç¨‹ä¸­ã€æˆ–è€…å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°é‡Œé¢è¢«è°ƒç”¨â€ã€‚æˆ‘ä»¬æŠŠç¨‹åºæ•´ä½“æ”¹å†™ä¸€ä¸‹ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">printDelayed</span><span class=\"params\">(msg: <span class=\"type\">String</span>)</span></span> &#123;</span><br><span class=\"line\">    delay(<span class=\"number\">3000</span>L)</span><br><span class=\"line\">    println(msg)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">print123Blocking</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">    println(<span class=\"string\">\"one\"</span>)</span><br><span class=\"line\">    printDelayed(<span class=\"string\">\"two\"</span>)</span><br><span class=\"line\">    println(<span class=\"string\">\"three\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">main</span><span class=\"params\">(args: <span class=\"type\">Array</span>&lt;<span class=\"type\">String</span>&gt;)</span></span> &#123;</span><br><span class=\"line\">    print123Blocking()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿è¡Œåå‘ç°ç¨‹åºçš„è¾“å‡ºä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">one</span><br><span class=\"line\">// ç­‰å¾…3s</span><br><span class=\"line\">two</span><br><span class=\"line\">three</span><br></pre></td></tr></table></figure>\n<p>ä¸ºä»€ä¹ˆä¸æ˜¯132è€Œæ˜¯123å‘¢ï¼Œè¦ä»<code>runBlocking</code>çš„å®šä¹‰è¯´èµ·ã€‚å®ƒä¼šâ€œæ–°èµ·ä¸€ä¸ªåç¨‹è¿è¡Œåç»­ä»£ç ï¼Œå¹¶ä¸”åœ¨è¯¥åç¨‹çš„è¿è¡Œè¿‡ç¨‹ä¸­é˜»å¡åŸçº¿ç¨‹ï¼ˆåœ¨demoä¸­æ˜¯ä¸»çº¿ç¨‹ï¼‰ï¼Œç›´è‡³åç¨‹è¿è¡Œç»“æŸâ€ã€‚è€Œåœ¨åç¨‹è¿è¡Œæ—¶æ˜¯æŒ‰ç…§ä»£ç é¡ºåºé€è¡Œè¿è¡Œçš„ã€‚æ‰€ä»¥æ‰“å°å‡ºæ¥çš„æ˜¯123è€Œé132ã€‚</p>\n<h2 id=\"ä¸ºrunBlockingæŒ‡å®šè¿è¡Œçº¿ç¨‹\"><a href=\"#ä¸ºrunBlockingæŒ‡å®šè¿è¡Œçº¿ç¨‹\" class=\"headerlink\" title=\"ä¸ºrunBlockingæŒ‡å®šè¿è¡Œçº¿ç¨‹\"></a>ä¸ºrunBlockingæŒ‡å®šè¿è¡Œçº¿ç¨‹</h2><p>æˆ‘ä»¬åœ¨<code>print123blocking</code>æ–¹æ³•é‡Œæ‰“å°å‡ºå½“å‰çº¿ç¨‹åã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">print123Blocking</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">    println(<span class=\"string\">\"one - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    printDelayed(<span class=\"string\">\"two - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    println(<span class=\"string\">\"three - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">one - in thread: main @coroutine#1</span><br><span class=\"line\">two - in thread: main @coroutine#1</span><br><span class=\"line\">three - in thread: main @coroutine#1</span><br></pre></td></tr></table></figure>\n<p>å¯è§è¿™ä¸ªæ–¹æ³•æ˜¯åœ¨å½“å‰ï¼ˆmainï¼‰çº¿ç¨‹é‡Œè¿è¡Œçš„ï¼Œå¹¶ä¸”åŒå±äº<code>@coroutine#1</code>ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥ä¸º<code>runBlocking</code>æŒ‡å®šè¿è¡Œçš„çº¿ç¨‹ï¼Œåœ¨åç¨‹çš„è¯­è¨€é‡Œï¼Œä½¿ç”¨<code>Dispatcher</code>æ¥è¡¨æ˜è¿™ä¸€æ¦‚å¿µã€‚æˆ‘ä»¬æ”¹å†™ä¸€ä¸‹<code>print123Blocking</code>æ–¹æ³•ï¼Œä½¿ç”¨<code>Dispatcher.Default</code>æ‰“å°1å’Œ2ã€‚æ ·ä¾‹ä»£ç ä¸ç³»ç»Ÿè¾“å‡ºå¦‚ä¸‹ï¼Œå¯è§æˆ‘ä»¬ä¸ºå…¶æŒ‡å®šäº†Dispatcherçš„ä»£ç æ®µè¿è¡Œåœ¨å¦ä¸€ä¸ªçº¿ç¨‹é‡Œï¼Œä¸”æ‰“å°é¡ºåºä»ç„¶ä¸º123ï¼Œè¿™å°±æ˜¯<strong>Blocking</strong>çš„å‰å®³ä¹‹å¤„ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">print123Blocking</span><span class=\"params\">()</span></span> &#123;</span><br><span class=\"line\">    runBlocking(Dispatchers.Default) &#123;</span><br><span class=\"line\">        println(<span class=\"string\">\"one - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">        printDelayed(<span class=\"string\">\"two - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    println(<span class=\"string\">\"three - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ§åˆ¶å°è¾“å‡ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">one - in thread: DefaultDispatcher-worker-1 @coroutine#1</span><br><span class=\"line\">two - in thread: DefaultDispatcher-worker-1 @coroutine#1</span><br><span class=\"line\">// æ­¤å¤„ç­‰å¾…3s</span><br><span class=\"line\">three - in thread: main</span><br></pre></td></tr></table></figure>\n<h2 id=\"å¦‚ä½•åˆ©ç”¨åç¨‹æ‰“å°å‡º132\"><a href=\"#å¦‚ä½•åˆ©ç”¨åç¨‹æ‰“å°å‡º132\" class=\"headerlink\" title=\"å¦‚ä½•åˆ©ç”¨åç¨‹æ‰“å°å‡º132\"></a>å¦‚ä½•åˆ©ç”¨åç¨‹æ‰“å°å‡º132</h2><h3 id=\"å…¨å±€åå°çº¿ç¨‹ï¼šGlobalScope-launch\"><a href=\"#å…¨å±€åå°çº¿ç¨‹ï¼šGlobalScope-launch\" class=\"headerlink\" title=\"å…¨å±€åå°çº¿ç¨‹ï¼šGlobalScope.launch\"></a>å…¨å±€åå°çº¿ç¨‹ï¼šGlobalScope.launch</h3><p>å¯ä»¥åœ¨blockingåŸŸä¸­ä½¿ç”¨<code>GlobalScope.launch{ ... }</code>æ¥æŒ‡å®šåå°çº¿ç¨‹è¿è¡Œä»»åŠ¡ï¼Œæˆ‘ä»¬åŸºäºæ­¤å°†åŸæœ‰ä»£ç æ”¹é€ ä¸€ä¸‹ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">print123Blocking</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">    GlobalScope.launch &#123;</span><br><span class=\"line\">        println(<span class=\"string\">\"one - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">        printDelayed(<span class=\"string\">\"two - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    println(<span class=\"string\">\"three - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™æ®µä»£ç çš„è¾“å‡ºæ˜¯ä¸å¯çŸ¥çš„ï¼Œæœ‰å¯èƒ½æ˜¯ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼Œåªæ‰“å°3æˆ–è€…æ‰“å°31ï¼Œè¿™æ˜¯ä»€ä¹ˆåŸå› å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨åå°å…¨å±€çº¿ç¨‹ä¸­å¯åŠ¨çš„â€œæ‰“å°12ä»»åŠ¡â€ï¼Œåå°çº¿ç¨‹æ˜¯ä¸ä¼šé˜»æ­¢ä¸»çº¿ç¨‹è¿è¡Œç»“æŸçš„ï¼Œæ‰€ä»¥2æ˜¯è‚¯å®šæ‰“ä¸å‡ºæ¥ï¼Œè€Œ1èƒ½å¦æ‰“å°å‡ºæ¥å°±çœ‹è¿è¡Œæ—¶çº¿ç¨‹è°ƒåº¦æƒ…å†µäº†ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// case 1</span><br><span class=\"line\">three - in thread: main @coroutine#1</span><br><span class=\"line\">one - in thread: DefaultDispatcher-worker-1 @coroutine#2</span><br><span class=\"line\">// case 2</span><br><span class=\"line\">three - in thread: main @coroutine#1</span><br></pre></td></tr></table></figure>\n<h3 id=\"ç­‰å¾…ä»»åŠ¡å®Œæˆ\"><a href=\"#ç­‰å¾…ä»»åŠ¡å®Œæˆ\" class=\"headerlink\" title=\"ç­‰å¾…ä»»åŠ¡å®Œæˆ\"></a>ç­‰å¾…ä»»åŠ¡å®Œæˆ</h3><p>æˆ‘ä»¬å¯ä»¥ç®€å•ç²—æš´åœ°ä½¿ç”¨<code>delay</code>æ¥ç­‰å¾…åå°ä»»åŠ¡å®Œæˆã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">print123Blocking</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">    GlobalScope.launch &#123;</span><br><span class=\"line\">        println(<span class=\"string\">\"one - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">        printDelayed(<span class=\"string\">\"two - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    println(<span class=\"string\">\"three - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    delay(<span class=\"number\">4000</span>L) <span class=\"comment\">// å› ä¸ºæˆ‘ä»¬çŸ¥é“printDelayedä¼šå»¶è¿Ÿ3ç§’ï¼Œæ•…è¿™é‡Œç­‰å¾…4ç§’</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ§åˆ¶å°è¾“å‡ºä¸ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">three - in thread: main @coroutine#1</span><br><span class=\"line\">one - in thread: DefaultDispatcher-worker-1 @coroutine#2</span><br><span class=\"line\">two - in thread: DefaultDispatcher-worker-1 @coroutine#2</span><br></pre></td></tr></table></figure>\n<p>ä½†æ˜¯è¿™ç§å¤„ç†æ–¹æ³•éå¸¸ä¸‘é™‹ï¼Œè€Œä¸”è¿™ä¸ª<code>delay</code>çš„æ—¶é•¿å¾ˆéš¾è®¾ç½®ï¼Œè®¾ç½®é•¿äº†å§ï¼Œä¼šå¯¼è‡´æ— ç”¨çš„ç­‰å¾…æµªè´¹æ—¶é—´ï¼›è®¾ç½®çŸ­äº†å§ï¼Œæœ‰å¯èƒ½åœ¨åå°çº¿ç¨‹è¾“å‡ºä¹‹å‰å°±ç»“æŸä»»åŠ¡ï¼Œæœ‰æ²¡æœ‰æ›´ä¼˜é›…çš„å†™æ³•å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ï¼Œ<code>job.join()</code>ä¸ºæˆ‘ä»¬æä¾›äº†ç­‰å¾…ä»»åŠ¡å®Œæˆçš„åŠŸèƒ½ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">print123Blocking</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> job = GlobalScope.launch &#123;</span><br><span class=\"line\">        println(<span class=\"string\">\"one - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">        printDelayed(<span class=\"string\">\"two - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    println(<span class=\"string\">\"three - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    job.join()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"è‡ªå®šä¹‰Dispatcher\"><a href=\"#è‡ªå®šä¹‰Dispatcher\" class=\"headerlink\" title=\"è‡ªå®šä¹‰Dispatcher\"></a>è‡ªå®šä¹‰Dispatcher</h2><p>Dispatcherä¸ºåç¨‹çš„è¿è¡ŒæŒ‡å®šäº†çº¿ç¨‹ï¼Œå¸¸è§Dispatcherså¦‚ä¸‹ï¼š</p>\n<ul>\n<li>Dispatcher.IOï¼šè¿›è¡ŒIOå¯†é›†å‹æ“ä½œï¼Œå¦‚æ•°æ®åº“è¯»å†™ã€æ–‡ä»¶è¯»å†™ã€ç½‘ç»œäº¤äº’</li>\n<li>Dispatcher.Defaultï¼šè¿›è¡ŒCPUå¯†é›†å‹æ“ä½œï¼Œå¦‚åˆ—è¡¨æ’åºã€JSONè§£æã€DiffUtils</li>\n<li>Dispatcher.Mainï¼šä»…å­˜åœ¨äºAndroidæ¡†æ¶ï¼Œè°ƒç”¨<code>suspend</code>æ–¹æ³•ã€è¿›è¡ŒUIæ“ä½œã€æ›´æ–°LiveData</li>\n</ul>\n<p>çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½å·²ç»ç†è§£äº†ï¼ŒDispatcherå…¶å®å°±æ˜¯çº¿ç¨‹çš„å¦ä¸€ç§è¡¨ç°å½¢å¼ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªDispatcherï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">print123Blocking</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">    println(<span class=\"string\">\"one - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">val</span> customDispatcher = Executors.newFixedThreadPool(<span class=\"number\">2</span>).asCoroutineDispatcher()</span><br><span class=\"line\">    launch(customDispatcher) &#123;</span><br><span class=\"line\">        printDelayed(<span class=\"string\">\"two - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    println(<span class=\"string\">\"three - in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">    (customDispatcher.executor <span class=\"keyword\">as</span> ExecutorService).shutdown() <span class=\"comment\">// ï¼ä¸»åŠ¨åœæ­¢ï¼Œå¦åˆ™çº¿ç¨‹ä¼šä¸€ç›´è¿è¡Œä¸‹å»</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼ˆåœ¨play.kotlinä¸Šé¢æ€»æ˜¯è¶…æ—¶ä¸çŸ¥é“ä¸ºå•¥ï¼‰ï¼Œæ„å‘³ç€æˆ‘ä»¬å®Œå…¨å¯ä»¥é«˜åº¦å®šåˆ¶Dispatcherçš„å®ç°ï¼Œè™½ç„¶å¤§éƒ¨åˆ†æ—¶é—´ä½¿ç”¨é»˜è®¤çš„Dispatcherå°±å·²è¶³å¤Ÿã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">one - from thread main</span><br><span class=\"line\">three - from thread main</span><br><span class=\"line\">two - from thread pool-1-thread-1</span><br></pre></td></tr></table></figure>\n<h2 id=\"æœ‰è¿”å›å€¼çš„suspendå‡½æ•°\"><a href=\"#æœ‰è¿”å›å€¼çš„suspendå‡½æ•°\" class=\"headerlink\" title=\"æœ‰è¿”å›å€¼çš„suspendå‡½æ•°\"></a>æœ‰è¿”å›å€¼çš„suspendå‡½æ•°</h2><p>æœ€åä¸€éƒ¨åˆ†å†…å®¹æ˜¯è·ŸAndroidå¼€å‘å¯†åˆ‡ç›¸å…³çš„ï¼Œå¤§éƒ¨åˆ†æ—¶é—´æˆ‘ä»¬éœ€è¦é€šè¿‡ç½‘ç»œã€æ•°æ®åº“è¿›è¡Œä¸€äº›è¯»å–æ•°æ®è€—æ—¶æ“ä½œï¼Œå‡½æ•°ä¼šæœ‰è¿”å›å€¼ï¼Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç½‘ç»œæ“ä½œï¼Œå®ƒè¯»å–ä¸€ä¸ª<code>startNum</code>å‚æ•°ï¼Œç­‰å¾…1så»¶æ—¶åï¼Œè¿”å›<code>startNum * 10</code>ã€‚é€šè¿‡ <code>async { ... }.await()</code> å¯ä»¥è·å–è€—æ—¶å‡½æ•°çš„è¿”å›å€¼ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// æ¨¡æ‹Ÿ1så»¶æ—¶ç½‘ç»œæ“ä½œ</span></span><br><span class=\"line\">suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">calculateHardThings</span><span class=\"params\">(startNum: <span class=\"type\">Int</span>)</span></span>: <span class=\"built_in\">Int</span> &#123;</span><br><span class=\"line\">  delay(<span class=\"number\">1000</span>)</span><br><span class=\"line\">  println(<span class=\"string\">\"result: <span class=\"subst\">$&#123;result&#125;</span>, in thread: <span class=\"subst\">$&#123;Thread.currentThread().name&#125;</span>\"</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> startNum * <span class=\"number\">10</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// è°ƒç”¨å»¶æ—¶æ“ä½œï¼Œåˆ†åˆ«awaitï¼Œè€—æ—¶å…±3s</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">exampleAsyncAwait</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> startTime = System.currentTimeMillis()</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred1 = async &#123; calculateHardThings(<span class=\"number\">10</span>) &#125;.await()</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred2 = async &#123; calculateHardThings(<span class=\"number\">20</span>) &#125;.await()</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred3 = async &#123; calculateHardThings(<span class=\"number\">30</span>) &#125;.await()</span><br><span class=\"line\">  <span class=\"keyword\">val</span> sum = deferred1 + deferred2 + deferred3</span><br><span class=\"line\">  <span class=\"keyword\">val</span> endTime = System.currentTimeMillis()</span><br><span class=\"line\">  println(<span class=\"string\">\"sum = <span class=\"variable\">$sum</span>, time = <span class=\"subst\">$&#123;endTime - startTime&#125;</span>\"</span>) <span class=\"comment\">// sum = 600, time = 3030</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"å¹¶å‘è¿›è¡Œè€—æ—¶æ“ä½œ\"><a href=\"#å¹¶å‘è¿›è¡Œè€—æ—¶æ“ä½œ\" class=\"headerlink\" title=\"å¹¶å‘è¿›è¡Œè€—æ—¶æ“ä½œ\"></a>å¹¶å‘è¿›è¡Œè€—æ—¶æ“ä½œ</h3><p>å› ä¸ºæ˜¯3ä¸ªè€—æ—¶1sæ“ä½œå¹¶å‘ï¼Œæˆ‘ä»¬è‡ªç„¶è€Œç„¶å¸Œæœ›å®ƒä»¬åŒæ—¶è¿è¡Œï¼Œæ€»è€—æ—¶1sè€Œä¸æ˜¯3sï¼Œè¦å¦‚ä½•å®ç°å‘¢ï¼ŸæŠŠæ‰€æœ‰çš„<code>await()</code>è°ƒç”¨å†™å…¥åŒä¸€ä¸ªè¯­å¥ï¼Œç¼–è¯‘å™¨ä¼šä¼˜åŒ–å®ƒä»¬ï¼Œä½¿å…¶åŒæ—¶è¿è¡Œã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è°ƒç”¨å»¶æ—¶æ“ä½œï¼ŒåŒæ—¶awaitï¼Œè€—æ—¶å…±1s</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">exampleAsyncAwait</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> startTime = System.currentTimeMillis()</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred1 = async &#123; calculateHardThings(<span class=\"number\">10</span>) &#125;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred2 = async &#123; calculateHardThings(<span class=\"number\">20</span>) &#125;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred3 = async &#123; calculateHardThings(<span class=\"number\">30</span>) &#125;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> sum = deferred1.await() + deferred2.await() + deferred3.await()</span><br><span class=\"line\">  <span class=\"keyword\">val</span> endTime = System.currentTimeMillis()</span><br><span class=\"line\">  println(<span class=\"string\">\"sum = <span class=\"variable\">$sum</span>, time = <span class=\"subst\">$&#123;endTime - startTime&#125;</span>\"</span>) <span class=\"comment\">// sum = 600, time = 1065</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ä½¿ç”¨withContextçš„ç®€åŒ–å†™æ³•\"><a href=\"#ä½¿ç”¨withContextçš„ç®€åŒ–å†™æ³•\" class=\"headerlink\" title=\"ä½¿ç”¨withContextçš„ç®€åŒ–å†™æ³•\"></a>ä½¿ç”¨withContextçš„ç®€åŒ–å†™æ³•</h3><p>async/await ä¼šè¿è¡Œåœ¨å½“å‰çº¿ç¨‹ä¸­ï¼Œå¯¹äºç½‘ç»œæ“ä½œä¸€èˆ¬çš„åšé¥­æ˜¯è®©å…¶åœ¨IOçº¿ç¨‹è¿è¡Œï¼Œå¯¹äºè®¡ç®—å¯†é›†å‹æ“ä½œåˆ™æ˜¯åœ¨CPUï¼ˆDefaultï¼‰çº¿ç¨‹è¿è¡Œï¼Œä½¿ç”¨<code>withContext</code>å¯ä»¥åŒæ—¶å®Œæˆ<code>async/await</code>çš„æ“ä½œï¼Œä½†ç¼ºç‚¹æ˜¯è¿™ä¸‰ä¸ªæ“ä½œåªèƒ½ç›¸ç»§è¿è¡Œï¼Œæ— æ³•åŒæ—¶è¿è¡Œã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è°ƒç”¨å»¶æ—¶æ“ä½œ</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">exampleWithContext</span><span class=\"params\">()</span></span> = runBlocking &#123;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> startTime = System.currentTimeMillis()</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred1 = withContext(Dispatchers.Default) &#123; calculateHardThings(<span class=\"number\">10</span>) &#125;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred2 = withContext(Dispatchers.Default) &#123; calculateHardThings(<span class=\"number\">20</span>) &#125;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> deferred3 = withContext(Dispatchers.Default) &#123; calculateHardThings(<span class=\"number\">30</span>) &#125;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> sum = deferred1 + deferred2 + deferred3</span><br><span class=\"line\">  <span class=\"keyword\">val</span> endTime = System.currentTimeMillis()</span><br><span class=\"line\">  println(<span class=\"string\">\"sum = <span class=\"variable\">$sum</span>, time = <span class=\"subst\">$&#123;endTime - startTime&#125;</span>\"</span>) <span class=\"comment\">// sum = 600, time = 3029</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h1><p>æœ¬æ–‡ä»‹ç»äº†åç¨‹çš„åŸºæœ¬ç”¨æ³•ï¼Œåœ¨é˜…è¯»å®Œæœ¬æ–‡åï¼Œä½ åº”å½“æŒæ¡ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š</p>\n<ul>\n<li>å£°æ˜è€—æ—¶å‡½æ•°ï¼Œä»¥åŠåœ¨åç¨‹ä»£ç å—é‡Œè°ƒç”¨è€—æ—¶å‡½æ•°</li>\n<li>åˆ‡æ¢è¿è¡Œç¯å¢ƒ</li>\n<li>ç­‰å¾…ä»»åŠ¡å®Œæˆ</li>\n<li>å¹¶è¡Œè¿›è¡Œè€—æ—¶æ“ä½œï¼Œè·å–æ“ä½œç»“æœ</li>\n</ul>\n<h1 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h1><ul>\n<li><a href=\"https://www.youtube.com/watch?v=jYuK1qzFrJg\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=jYuK1qzFrJg</a></li>\n</ul>\n","categories":[],"tags":["Kotlin"]},{"title":"ã€è½¬ã€‘Android Studio Debug çš„ 9 ä¸ªå°æŠ€å·§","url":"https://lilei.pro/2019/11/11/android-studio-debug-skills/","content":"<blockquote>\n<p>Pain is inevitable. Suffering is optional. ç—›æ¥šéš¾ä»¥é¿å…ï¼Œè€Œç£¨éš¾å¯ä»¥é€‰æ‹©ã€‚</p>\n</blockquote>\n<p>è¿™æ˜¯ä¸€ç¯‡è½¬è½½çš„æ–‡ç« ã€‚</p>\n<ul>\n<li>ä½œè€…ï¼šwanbo</li>\n<li>é“¾æ¥ï¼š<a href=\"https://juejin.im/post/5dbf8036f265da4d4b5fe7c2\" target=\"_blank\" rel=\"noopener\">https://juejin.im/post/5dbf8036f265da4d4b5fe7c2</a></li>\n<li>æ¥æºï¼šæ˜é‡‘</li>\n</ul>\n<hr>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/dev_summit_19.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>å‘¨æœ«çœ‹ Android Dev Summit â€˜19 çš„è§†é¢‘çš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€ç« å…³äº Android Studio Debug çš„ä»‹ç»ï¼Œæœ‰å¾ˆå¤šæ—¥å¸¸éå¸¸æœ‰ç”¨çš„å°æŠ€å·§ï¼Œå­¦ä¹ äº†è¿™äº›å°æŠ€å·§èƒ½å¾ˆå¤§ç¨‹åº¦çš„é™ä½æˆ‘ä»¬ Debug çš„æˆæœ¬ï¼Œå¿«é€Ÿå®šä½é—®é¢˜çš„æœ¬è´¨ï¼Œä»Šå¤©å°±å‘å¤§å®¶ä»‹ç»ä¸€ä¸‹ Android Studio Debug çš„ 9 ä¸ªå°æŠ€å·§ã€‚</p>\n<p>æ²¡å…³æ³¨çš„å°ä¼™ä¼´è®°å¾—å…³æ³¨è®¢é˜…ğŸ˜ï¼Œå¦‚æœè§‰å¾—è¿™äº›æ–‡ç« æœ‰ç‚¹æ„æ€ï¼Œè®°å¾—åˆ†äº«è½¬å‘è¯„è®ºç‚¹èµğŸ˜ï¼</p>\n<h2 id=\"Log-è¿‡æ»¤å’ŒæŠ˜å \"><a href=\"#Log-è¿‡æ»¤å’ŒæŠ˜å \" class=\"headerlink\" title=\"Log è¿‡æ»¤å’ŒæŠ˜å \"></a>Log è¿‡æ»¤å’ŒæŠ˜å </h2><p>æœ‰æ—¶å€™ Logcat ä¸­ log çš„ä¿¡æ¯å¾ˆé•¿ï¼ŒåŒæ—¶è¿˜æœ‰äº›æˆ‘ä»¬ä¸éœ€è¦çš„ä¿¡æ¯ä¹Ÿæ‰“å°å‡ºæ¥ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­çš„ã€æ—¶é—´+çº¿ç¨‹ IDã€‘ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/log_filter_0.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ç‚¹å‡» Logcat çª—å£ä¸Šçš„ã€è®¾ç½®ã€‘æŒ‰é’®ï¼Œè®¾ç½®ä¸€æ¡ Log éœ€è¦æ˜¾ç¤ºå“ªäº›å…³é”®ä¿¡æ¯ï¼Œå¯è®¾ç½®çš„é¡¹æœ‰ï¼šæ—¶é—´ã€çº¿ç¨‹IDã€åŒ…åã€Tag nameã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ§åˆ¶æ˜¾ç¤ºï¼Œå¹¶ä¸”ä¸‹é¢è¿˜ä¼šæœ‰ä¸€æ¡ Sample Log æä¾›è®¾ç½®åçš„é¢„è§ˆæ•ˆæœï¼Œå°±åƒä¸‹å›¾ä¸­è¿™æ ·ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/log_filter_1.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>æ—¥å¸¸å¼€å‘çš„æ—¶å€™æˆ‘ä»¬è¿˜ä¼šé‡åˆ°å¦ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚æ ¹æ®å½“å‰ UI çš„æ¸²æŸ“æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦æ—¶åˆ»æ‰“å° UI çš„æŸä¸ªå€¼ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬è§‚å¯Ÿ UIï¼ŒåŒæ—¶å½“åˆ°è¾¾æŸç§æ¡ä»¶çš„æ—¶å€™ï¼Œè¾“å…¥ä¸€æ¡æˆ‘ä»¬å¾—åˆ°çš„ã€ç»“æœ logã€‘ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨è·å¾—æˆ‘ä»¬çš„ã€ç»“æœ logã€‘ä¹‹å‰ä¼šæœ‰å¾ˆå¤šæ²¡ç”¨ä½†æ˜¯åˆå¿…é¡»æ‰“å°çš„ logï¼Œè¿™æ ·å½“æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ã€ç»“æœ logã€‘çš„æ—¶å€™å°±ä¼šéå¸¸éº»çƒ¦ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/log_filter_2.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>å°±åƒä¸Šå›¾ä¸­è¿™æ ·ï¼Œæˆ‘ä»¬çš„ã€ç»“æœ logã€‘è¢«ä¸Šä¸‹ã€å¾ªç¯æ‰“å° logã€‘åŒ…å›´äº†ï¼Œå¾ˆéš¾ä¸€ä¸‹å­æ‰¾å‡ºæ¥ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰å…³é”®å­—ã€å³é”®ã€‘ï¼Œé€‰æ‹©ã€Fold Lines Like Thisã€‘ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/log_filter_3.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>è¿™æ ·æˆ‘ä»¬ç›¸åŒå…³é”®å­—çš„ log å°±ä¼šè¢«æŠ˜å ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å±•å¼€æŸ¥çœ‹è¯¦ç»† logã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/log_filter_4.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"è‡ªå®šä¹‰æ–­ç‚¹æ‰§è¡Œæ¡ä»¶\"><a href=\"#è‡ªå®šä¹‰æ–­ç‚¹æ‰§è¡Œæ¡ä»¶\" class=\"headerlink\" title=\"è‡ªå®šä¹‰æ–­ç‚¹æ‰§è¡Œæ¡ä»¶\"></a>è‡ªå®šä¹‰æ–­ç‚¹æ‰§è¡Œæ¡ä»¶</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/custom_break_0.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>æˆ‘ä»¬æ¥çœ‹ä¸Šé¢è¿™æ®µä»£ç ï¼Œé€šè¿‡å­—é¢æ„æ€æˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼šè¿™æ˜¯ä¸€ä¸ªç‚¹å‡»äº‹ä»¶æ‰§è¡Œçš„æ–¹æ³•ï¼Œç‚¹å‡»å‘ç”Ÿåé€šè¿‡ NavController ä»å½“å‰ HomeFragment è·³è½¬åˆ° EmailFragmentã€‚ç„¶åæˆ‘ä»¬åœ¨ç¬¬ä¸€è¡Œæ‰“äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œæˆ‘ä»¬å·²ç»å¾—çŸ¥å½“ email çš„ subject åŒ…å« ã€Bonjourã€‘å…³é”®å­—çš„æ—¶å€™ï¼Œè¿™æ®µä»£ç ä¼šå‘ç”Ÿå´©æºƒï¼Œåä¹‹ä¸åŒ…å«åˆ™ä¸ä¼šå‘ç”Ÿå´©æºƒï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æ¯æ¬¡æ–­ç‚¹éƒ½ç”Ÿæ•ˆã€‚</p>\n<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥å³é”®æ–­ç‚¹ï¼Œåœ¨ Condition é‡Œè¾“å…¥æˆ‘ä»¬çš„æ¡ä»¶åˆ¤æ–­è¯­å¥ï¼Œå½“æ¡ä»¶å…è®¸çš„æ—¶å€™ï¼Œæ–­ç‚¹æ‰ç”Ÿæ•ˆã€‚æ¡ä»¶è¯­å¥çš„ä»£ç æ”¯æŒ Kotlin å’Œ Java ä¸¤ç§è¯­è¨€çš„å†™æ³•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/custom_break_1.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>ç„¶åå¦‚æœæˆ‘ä»¬æƒ³åœ¨è·³è½¬åˆ° EmailFragment ä¹‹åè¿›ä¸€æ­¥å»è¿½è¸ªé—®é¢˜ï¼Œäºæ˜¯æˆ‘åœ¨ EmailFragment çš„ onCreate æ–¹æ³•æ‰“äº†ä¸€ä¸ªæ–­ç‚¹ï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œç„¶åè¿™é‡Œè¿˜ä¼šé‡åˆ°æˆ‘ä»¬ä¹‹å‰è¯´çš„é—®é¢˜ï¼šä¸ç¬¦åˆæ¡ä»¶çš„æ—¶å€™æ–­ç‚¹ä¹Ÿä¼šç”Ÿæ•ˆï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/custom_break_2.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–­ç‚¹ä¸Šé¢ï¼Œå³é”®ã€ç‚¹å‡»æ›´å¤šã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/custom_break_3.png\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>å·¦è¾¹é€‰æ‹©å½“å‰æ–­ç‚¹ä¹‹åï¼Œåœ¨å³è¾¹ç‚¹å‡»ã€Disable until breakpoint hitã€‘ï¼Œé€‰æ‹©æˆ‘ä»¬ä¹‹å‰æœ‰æ¡ä»¶åˆ¤æ–­çš„æ–­ç‚¹ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–°çš„æ–­ç‚¹ä¼šåœ¨å®ƒæ‰€è·Ÿéšçš„æ–­ç‚¹ç”Ÿæ•ˆä¹‹åæ‰ä¼šç”Ÿæ•ˆã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/custom_break_4.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"æŒ‚èµ·çº¿ç¨‹\"><a href=\"#æŒ‚èµ·çº¿ç¨‹\" class=\"headerlink\" title=\"æŒ‚èµ·çº¿ç¨‹\"></a>æŒ‚èµ·çº¿ç¨‹</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/suspend.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>å½“æˆ‘ä»¬å³é”®ä»»æ„ä¸€ä¸ªæ–­ç‚¹çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€ä¸ª Suspend é€‰é¡¹ã€Allã€Threadã€‘ï¼ŒAll ä¹Ÿå°±æ„å‘³ç€å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªå¤šçº¿ç¨‹çš„åº”ç”¨ä¸­ debug é—®é¢˜çš„æ—¶å€™ï¼Œä¸€æ—¦è¿™ä¸ªæ–­ç‚¹ç”Ÿæ•ˆï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½ä¼šè¢«æŒ‚èµ·ï¼ŒThread è¡¨ç¤ºåªæŒ‚èµ·å½“å‰çº¿ç¨‹ã€‚æ‰€ä»¥å½“æˆ‘ä»¬åœ¨æŸä¸ªåå°çº¿ç¨‹ä¸­ debug é—®é¢˜çš„æ—¶å€™å°±å¯ä»¥é€‰æ‹© Threadï¼Œè¿™æ ·å°±ä¸ä¼šåœ¨ debug çš„æ—¶å€™é˜»å¡ä¸»çº¿ç¨‹çš„æ­£å¸¸åŠŸèƒ½ã€‚</p>\n<p>è¿˜æœ‰ä¸€ä¸ªæ‰“å¼€å…³é—­æ–­ç‚¹çš„å¿«æ·é”®ä¹Ÿåˆ†äº«ä¸€ä¸‹ï¼šWindows ç”¨æˆ· Alt + Click ï¼ŒMac Option + Click ã€‚</p>\n<h2 id=\"åŠ¨æ€æ‰“å°\"><a href=\"#åŠ¨æ€æ‰“å°\" class=\"headerlink\" title=\"åŠ¨æ€æ‰“å°\"></a>åŠ¨æ€æ‰“å°</h2><p>è¯¦ç»†å¾ˆå¤šäººåŒ…æ‹¬æˆ‘ä¹‹å‰åœ¨ debug çš„æ—¶å€™ï¼Œéƒ½ä¼šåœ¨éœ€è¦ debug çš„åœ°æ–¹å¢åŠ  print è¾“å‡ºä¸€ä¸‹ä¿¡æ¯ä¾›è‡ªå·±æ’æŸ¥é”™è¯¯ï¼Œè¿™é‡Œæä¾›ä¸€ç§å¿«æ·æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥æ—¢ä¸æ±¡æŸ“æˆ‘ä»¬çš„ä»£ç ï¼Œåˆå¯ä»¥éšæ—¶è¾“å‡ºä»»æ„ä¿¡æ¯ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/eval_and_log.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œåœ¨éœ€è¦æ‰“å°çš„åœ°æ–¹å¢åŠ æ–­ç‚¹ï¼Œç„¶åå–æ¶ˆæ‰€æœ‰çº¿ç¨‹çš„æŒ‚èµ·ï¼Œé€‰æ‹©ã€Evaluate and logã€‘ï¼Œå±äºæˆ‘ä»¬éœ€è¦æ‰“å°çš„è¯­å¥ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°æ–­ç‚¹çš„æ—¶å€™ï¼Œä¸ä¼šæš‚åœï¼Œè€Œä¼šæ ¹æ®æˆ‘ä»¬è®¾ç½®çš„æ‰“å°ä¿¡æ¯è¾“å‡º logï¼Œæ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Ÿ</p>\n<h2 id=\"æ–­ç‚¹åˆ†ç»„\"><a href=\"#æ–­ç‚¹åˆ†ç»„\" class=\"headerlink\" title=\"æ–­ç‚¹åˆ†ç»„\"></a>æ–­ç‚¹åˆ†ç»„</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/group.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>é€šå¸¸é‡åˆ°ä¸€ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ å¾ˆå¤šæ–­ç‚¹å»è¿½è¸ªé—®é¢˜çš„åŸå› ï¼Œå½“é—®é¢˜è§£å†³ä¹‹åï¼Œå¾€å¾€ä¼šå¿˜è®°å–æ¶ˆè¿™äº›æ–­ç‚¹ï¼Œå¯¼è‡´åœ¨æŸæ¬¡è°ƒè¯•çš„æ—¶å€™ï¼Œè®¾å¤‡ä¼šè¢«ä¹‹å‰çš„æ–­ç‚¹æ‰€æš‚åœï¼Œä¼šè®©æˆ‘ä»¬å¾ˆæ— è¯­ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥ debug çš„æ—¶å€™åœ¨æŸä¸ªæ–­ç‚¹ä¸Šï¼šå³é”®ã€æ›´å¤šï¼Œç„¶åé€‰æ‹©è¿™ä¸ªé—®é¢˜æ‰€æœ‰ç›¸å…³çš„æ–­ç‚¹ï¼Œå°†å®ƒä»¬åˆ†åˆ°åŒä¸€ä¸ª Group é‡Œé¢ï¼Œé‚£ä¹ˆè¿™ä¸€ä¸ªç»„çš„æ–­ç‚¹å°±å¯ä»¥ç»Ÿä¸€å¼€å…³ã€ç»Ÿä¸€åˆ é™¤ã€‚</p>\n<h2 id=\"æ–­ç‚¹ä¸Šä¸€æ­¥\"><a href=\"#æ–­ç‚¹ä¸Šä¸€æ­¥\" class=\"headerlink\" title=\"æ–­ç‚¹ä¸Šä¸€æ­¥\"></a>æ–­ç‚¹ä¸Šä¸€æ­¥</h2><p>è¯´åˆ°è¿™ä¸ªçœŸçš„å¾ˆç—›å¿ƒï¼Œå¸¸å¸¸å› ä¸ºè‡ªå·±åœ¨ debug çš„æ—¶å€™ï¼Œç”±äºä¸‹ä¸€æ­¥ç‚¹å‡»çš„å¤ªå¿«äº†è€Œé”™è¿‡äº†é—®é¢˜å…³é”®è¡Œï¼Œåªèƒ½é‡æ–°è¿è¡Œä¸€æ¬¡ä»£ç ï¼Œé‡æ–° debug ç„¶åè‡ªå·±ä¸€æ¬¡æ¬¡ç‚¹å‡»ä¸‹ä¸€æ­¥ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/drop_frame.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>åœ¨è¿è¡Œ Android 10 çš„è®¾å¤‡ä¸Šï¼Œdebug ç•Œé¢ä¸­æä¾›äº†ä¸€ä¸ªå«ã€Drop frameã€‘çš„æŒ‰é’®ï¼Œå¯ä»¥ä¾›æˆ‘ä»¬è·³å‡ºå½“å‰æ–¹æ³•æ ˆï¼Œè¿”å›ä¸Šä¸€æ­¥ï¼Œè¿™æ ·å°±ä¼šé¿å…æˆ‘ä»¬å› ä¸ºé”™è¿‡æ–­ç‚¹è€Œä¸å¾—ä¸é‡æ–°è¿è¡Œä»£ç ã€‚</p>\n<h2 id=\"è§‚å¯Ÿå¯¹è±¡\"><a href=\"#è§‚å¯Ÿå¯¹è±¡\" class=\"headerlink\" title=\"è§‚å¯Ÿå¯¹è±¡\"></a>è§‚å¯Ÿå¯¹è±¡</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/mark_obj_0.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>å½“æˆ‘ä»¬ debug çš„æ—¶å€™ï¼Œå¯ä»¥ä» debug çª—å£ä¸­è§‚å¯Ÿå½“å‰ä½œç”¨åŸŸä¸­çš„å¯¹è±¡ä»¥åŠå¯¹è±¡çš„å±æ€§ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šè§‚å¯Ÿåœ¨ä¸åŒé¡µé¢æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¹‹å‰æˆ‘çš„åšæ³•å¾ˆç²—æš´â€¦å°±æ˜¯æ‰¾å¼ çº¸ï¼ŒæŠŠè¿™ä¸ªå¯¹è±¡çš„ ID è®°ä¸‹æ¥ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªé¡µé¢ debug çœ‹ ID æ˜¯å¦ä¸€è‡´ğŸ˜‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/mark_obj_1.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥åœ¨å¯¹è±¡ä¸Šå³é”®ã€é€‰æ‹©ã€Mark Objectã€‘ä¹‹åä¼šè®©ä½ è‡ªå®šä¹‰ä¸€ä¸ª Labelï¼Œç„¶ååœ¨æ•´ä¸ª debug æœŸé—´ï¼Œç›¸åŒçš„å¯¹è±¡ä¼šä»¥ä½ è®¾ç½®çš„ Label ä¸º name å‡ºç°ï¼Œå¸®åŠ©æˆ‘ä»¬æ–¹ä¾¿çš„åˆ†ææ˜¯å¦æ˜¯ç»Ÿä¸€å¯¹è±¡ã€‚</p>\n<p>é¡ºä¾¿æä¸€ä¸‹ï¼Œåœ¨ä»»æ„ä¸€æ®µä»£ç ä¸Šï¼Œç‚¹å‡»è¡Œå·ï¼Œå¯ä»¥ä»å½“å‰æ–­ç‚¹å¿«é€Ÿæ‰§è¡Œåˆ°ç›®æ ‡è¡Œå¹¶æš‚åœï¼Œè¿™ä¸ªæˆ‘çœŸæ˜¯ç¬¬ä¸€æ¬¡çŸ¥é“ï¼Œæ„Ÿè§‰ä¹‹å‰ Android Studio éƒ½ç™½ç”¨äº†ğŸ˜­</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/mark_obj_2.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>è€Œä¸”åœ¨ debug çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥é€‰æ‹© debug çª—å£ä¸­çš„ã€Evaluate expressionã€‘æŒ‰é’®æ¥åŠ¨æ€è§‚å¯Ÿå¯¹è±¡ï¼Œç‚¹å‡»ä¹‹åä¼šå¼¹å‡ºä¸€ä¸ªè®¡ç®—æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ä»»æ„å½“å‰ä½œç”¨åŸŸä¸­çš„å¯¹è±¡ä»¥åŠå±æ€§è§‚å¯Ÿã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/mark_obj_3.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>ä¸å¾—ä¸è¯´è¿™ä¸ªçœŸçš„å¾ˆæ–¹ä¾¿ï¼Œä»¥å‰é‡åˆ°è¿™ç§æƒ…å†µæˆ‘åªæœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯ï¼šprint ğŸ˜‚ï¼Œå½“ç„¶è¿™é‡Œä¸ä»…ä»…æ˜¯è§‚å¯Ÿå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä»»æ„ä»£ç è§‚å¯Ÿæˆ‘ä»¬æƒ³è¦çš„å€¼ï¼Œå°±åƒä¸‹å›¾è¿™æ ·ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/mark_obj_4.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h2 id=\"å¢é‡æ›´æ–°\"><a href=\"#å¢é‡æ›´æ–°\" class=\"headerlink\" title=\"å¢é‡æ›´æ–°\"></a>å¢é‡æ›´æ–°</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/hot_reload.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>æˆ‘è¯•äº†ä¸€ä¸‹ï¼Œè¿™ä¸¤ä¸ªæŒ‰é’®æ˜¯çœŸçš„å¾ˆå¥½ç”¨å•Šï¼Œæ¯”é‡æ–°å…¨é‡è¿è¡Œåº”ç”¨çœŸæ˜¯å¿«äº†ä¸å°‘ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>\n<h2 id=\"é”™è¯¯æ ˆåˆ†æ\"><a href=\"#é”™è¯¯æ ˆåˆ†æ\" class=\"headerlink\" title=\"é”™è¯¯æ ˆåˆ†æ\"></a>é”™è¯¯æ ˆåˆ†æ</h2><p>é€šå¸¸æˆ‘ä»¬ App ä¸­ä¼šç»§æ‰¿ä¸€ä¸‹çº¿ä¸Š bug åé¦ˆçš„ SDK æ¯”å¦‚ buglyï¼Œåœ¨ bugly æˆ‘ä»¬ä¼šå¾—åˆ°å´©æºƒçš„å¼‚å¸¸æ ˆä¿¡æ¯ï¼Œç±»ä¼¼ä¸‹å›¾è¿™æ ·ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/analyze_stack_0.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>æˆ‘ä»¬å¯ä»¥å…¨é€‰å¤åˆ¶ï¼Œæ‰“å¼€æˆ‘ä»¬çš„ Android Studioï¼Œé€‰æ‹© Analyze â†’ Analyze Stack Trace or Thread Dumpï¼Œç„¶åæŠŠå¼‚å¸¸æ ˆä¿¡æ¯ç²˜è´´è¿›å»ï¼Œç‚¹å‡»ç¡®å®šã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/analyze_stack_1.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>Android Studio ä¼šåœ¨æ§åˆ¶å°æ˜¾ç¤ºè¿™æ®µå¼‚å¸¸æ ˆä¿¡æ¯ï¼Œå¹¶ä¸”ä¸ç°æœ‰ä»£ç  Link åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»è·³è½¬åˆ°é—®é¢˜æ‰€åœ¨è¡Œã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191111_as_debug_skills/analyze_stack_2.webp\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<p>å¥½äº†è¿™å°±æ˜¯ä»Šå¤©è¦åˆ†äº«çš„å…¨éƒ¨å†…å®¹ï¼Œå…³äºæ›´å¤šè¯¦ç»†çš„å†…å®¹ï¼Œå¤§å®¶å¯ä»¥ç‚¹å‡»ã€é˜…è¯»åŸæ–‡ã€‘åœ¨æ²¹ç®¡ä¸ŠæŸ¥çœ‹ï¼ŒçœŸå¸Œæœ›æœ‰å¤§ä½¬å¯ä»¥å‡ºä¸€ä¸ªã€Android Studio ä½¿ç”¨å…¨æ”»ç•¥ã€‘ï¼Œæ„Ÿè§‰è‡ªå·±å¯¹ AS çœŸçš„åªæ˜¯ä¼šç”¨ï¼Œä½†è¿˜æœ‰å¾ˆå¤šä¸œè¥¿éœ€è¦å»å­¦ä¹ å’Œæ¢ç´¢ã€‚ğŸ˜‚</p>\n<p>æˆ‘æ˜¯ wanbo å¤§å®¶åŠ æ²¹ï¼</p>\n","categories":[],"tags":["Android","Android Studio"]},{"title":"KotlinåŸŸå‡½æ•°å°ç»“","url":"https://lilei.pro/2019/10/28/kotlin-scope-functions/","content":"<blockquote>\n<p>å¹¶éæ„å¿—åšå¼ºå°±å¯ä»¥æ— æ‰€ä¸èƒ½ï¼Œäººä¸–ä¸æ˜¯é‚£ä¹ˆå•çº¯çš„ã€‚è€å®è¯´ï¼Œæˆ‘ç”šè‡³è§‰å¾—æ¯å¤©åšæŒè·‘æ­¥åŒæ„å¿—å¼ºå¼±å¹¶æ²¡æœ‰å¤ªå¤§å…³è”ã€‚æˆ‘èƒ½å¤ŸåšæŒè·‘äºŒåå¹´ï¼Œææ€•è¿˜æ˜¯å› ä¸ºåˆä¹æˆ‘çš„æ€§æƒ…ï¼Œè‡³å°‘â€œä¸è§‰å¾—é‚£ä¹ˆç—›è‹¦â€ã€‚äººç”Ÿæ¥å¦‚æ­¤ï¼Œå–œæ¬¢çš„äº‹è‡ªç„¶å¯ä»¥åšæŒä¸‹å»ï¼Œä¸å–œæ¬¢çš„äº‹æ€ä¹ˆä¹ŸåšæŒä¸äº†ã€‚ â€”â€”<strong>å½“æˆ‘è°ˆè·‘æ­¥æ—¶æˆ‘è°ˆäº›ä»€ä¹ˆ</strong></p>\n</blockquote>\n<p>æƒ³è¦æŒæ¡Kotlinï¼ŒåŸŸå‡½æ•°æ˜¯ä¸å¾—ä¸è¿ˆè¿‡çš„ä¸€é“åã€‚</p>\n<h1 id=\"æ‰€è°“â€œåŸŸå‡½æ•°â€\"><a href=\"#æ‰€è°“â€œåŸŸå‡½æ•°â€\" class=\"headerlink\" title=\"æ‰€è°“â€œåŸŸå‡½æ•°â€\"></a>æ‰€è°“â€œåŸŸå‡½æ•°â€</h1><p>ä¸€å¥è¯ï¼ŒåŸŸå‡½æ•°ï¼ˆscope functionsï¼‰æ˜¯ä¸ºç»™å®šçš„å¯¹è±¡åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„åŸŸï¼Œåœ¨è¿™ä¸ªåŸŸä¸­æ‰§è¡Œä¸€äº›æ“ä½œã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„å¯¹è±¡-å‡½æ•°è°ƒç”¨å†™æ³•ï¼ŒåŸŸå‡½æ•°åœ¨å‡å°‘ä»£ç é‡çš„åŒæ—¶ï¼Œè¿˜å¯ä»¥è®©ç¼–ç åœ¨é€»è¾‘ä¸Šçœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤ã€‚</p>\n<p>å¯¹æ¯”ä¸€ä¸‹åŸŸå‡½æ•°å†™æ³•ä¸æ™®é€šå†™æ³•ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// åŸŸå‡½æ•°å†™æ³•</span></span><br><span class=\"line\">Person(<span class=\"string\">\"Alice\"</span>, <span class=\"number\">20</span>, <span class=\"string\">\"Amsterdam\"</span>).let &#123;</span><br><span class=\"line\">    println(it)</span><br><span class=\"line\">    it.moveTo(<span class=\"string\">\"London\"</span>)</span><br><span class=\"line\">    it.incrementAge()</span><br><span class=\"line\">    println(it)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ™®é€šå†™æ³•</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> alice = Person(<span class=\"string\">\"Alice\"</span>, <span class=\"number\">20</span>, <span class=\"string\">\"Amsterdam\"</span>)</span><br><span class=\"line\">println(alice)</span><br><span class=\"line\">alice.moveTo(<span class=\"string\">\"London\"</span>)</span><br><span class=\"line\">alice.incrementAge()</span><br><span class=\"line\">println(alice)</span><br></pre></td></tr></table></figure>\n<p>åŸŸå‡½æ•°è¦ç»“åˆlambdaè¡¨è¾¾å¼ä½¿ç”¨ã€‚Kotlinä¸­ä¸€å…±æœ‰äº”ä¸ªåŸŸå‡½æ•°ï¼š<code>let</code>, <code>run</code>, <code>with</code>, <code>apply</code>, <code>also</code>ã€‚è¿™äº›åŸŸå‡½æ•°æœ‰ä¸¤ä¸ªåŒºåˆ«ç‚¹ã€‚</p>\n<ul>\n<li>åŸŸå‡½æ•°ä¸­å¦‚ä½•å¼•ç”¨ä¸Šä¸‹æ–‡å¯¹è±¡</li>\n<li>åŸŸå‡½æ•°è¿”å›å€¼</li>\n</ul>\n<h1 id=\"åŒºåˆ«ç‚¹ï¼šä¸Šä¸‹æ–‡å¯¹è±¡\"><a href=\"#åŒºåˆ«ç‚¹ï¼šä¸Šä¸‹æ–‡å¯¹è±¡\" class=\"headerlink\" title=\"åŒºåˆ«ç‚¹ï¼šä¸Šä¸‹æ–‡å¯¹è±¡\"></a>åŒºåˆ«ç‚¹ï¼šä¸Šä¸‹æ–‡å¯¹è±¡</h1><p>åŸŸå‡½æ•°ä¸­ç”¨<code>this</code>æˆ–è€…<code>it</code>æŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p>\n<h2 id=\"this\"><a href=\"#this\" class=\"headerlink\" title=\"this\"></a>this</h2><p><code>run</code>, <code>with</code>å’Œ<code>apply</code>åœ¨lambdaè¡¨è¾¾å¼ä¸­ç”¨<code>this</code>æŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå°±å¥½åƒlambdaè¡¨è¾¾å¼æ˜¯åœ¨å¯¹è±¡å†…éƒ¨è°ƒç”¨çš„ä¸€æ ·ï¼Œ<code>this</code>æ˜¯å¯ä»¥çœç•¥çš„ã€‚å¯¹äºè°ƒç”¨å¯¹è±¡å†…éƒ¨æ–¹æ³•ã€å±æ€§çš„ä»£ç ï¼Œåº”å½“é€‰æ‹©ä½¿ç”¨<code>this</code>æŒ‡ä»£çš„åŸŸå‡½æ•°ã€‚å¦‚æœåœ¨åŸŸå†…è¦è°ƒç”¨å…¶ä»–å¯¹è±¡çš„å‡½æ•°ï¼Œä¸è¦é€‰æ‹©<code>this</code>æŒ‡ä»£ï¼Œå› ä¸ºå®¹æ˜“å¼„æ··ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> adam = Person(<span class=\"string\">\"Adam\"</span>).apply &#123;</span><br><span class=\"line\">  age = <span class=\"number\">20</span> <span class=\"comment\">// same as this.age = 20</span></span><br><span class=\"line\">  city = <span class=\"string\">\"Hangzhou\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"it\"><a href=\"#it\" class=\"headerlink\" title=\"it\"></a>it</h2><p><code>let</code>, <code>also</code>åœ¨lambdaè¡¨è¾¾å¼ä¸­ç”¨<code>it</code>æŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä¸<code>this</code>ä¸åŒï¼Œåœ¨è®¿é—®æ–¹æ³•å’Œå¯¹è±¡æ—¶<code>it</code>æ˜¯ä¸èƒ½çœç•¥çš„ã€‚å½“ä¸Šä¸‹æ–‡å¯¹è±¡éœ€è¦åœ¨åŸŸå†…å……å½“å‡½æ•°å‚æ•°æ—¶ï¼Œå°±é€‰ç”¨<code>it</code>ç±»å‹çš„åŸŸå‡½æ•°ã€‚å¦ä¸€ä¸ªä¾¿æ·ä¹‹å¤„åœ¨äºï¼Œå¯ä»¥ä¸º<code>it</code>æŒ‡ä»£åˆ«åã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getRandomInt</span><span class=\"params\">()</span></span>: <span class=\"built_in\">Int</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Random.nextInt(<span class=\"number\">100</span>).also &#123;</span><br><span class=\"line\">        writeToLog(<span class=\"string\">\"getRandomInt() generated value <span class=\"variable\">$it</span>\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">val</span> i = getRandomInt()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä¸ºitæŒ‡ä»£åˆ«å</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getRandomInt</span><span class=\"params\">()</span></span>: <span class=\"built_in\">Int</span> &#123; value -&gt;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Random.nextInt(<span class=\"number\">100</span>).also &#123;</span><br><span class=\"line\">        writeToLog(<span class=\"string\">\"getRandomInt() generated value <span class=\"variable\">$value</span>\"</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"åŒºåˆ«ç‚¹ï¼šè¿”å›å€¼\"><a href=\"#åŒºåˆ«ç‚¹ï¼šè¿”å›å€¼\" class=\"headerlink\" title=\"åŒºåˆ«ç‚¹ï¼šè¿”å›å€¼\"></a>åŒºåˆ«ç‚¹ï¼šè¿”å›å€¼</h1><h2 id=\"Lambdaè¡¨è¾¾å¼ç»“æœ\"><a href=\"#Lambdaè¡¨è¾¾å¼ç»“æœ\" class=\"headerlink\" title=\"Lambdaè¡¨è¾¾å¼ç»“æœ\"></a>Lambdaè¡¨è¾¾å¼ç»“æœ</h2><p><code>let</code>, <code>run</code>å’Œ<code>with</code>è¿”å›lambdaè¡¨è¾¾å¼çš„ç»“æœï¼ˆæœ€åä¸€è¡Œï¼‰ï¼Œå¯ä»¥ç”¨è¿™äº›åŸŸå‡½æ•°æ¥è¿›è¡Œèµ‹å€¼ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// èµ‹å€¼</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> numbers = mutableListOf(<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">val</span> countEndsWithE = numbers.run &#123; </span><br><span class=\"line\">    add(<span class=\"string\">\"four\"</span>)</span><br><span class=\"line\">    add(<span class=\"string\">\"five\"</span>)</span><br><span class=\"line\">    count &#123; it.endsWith(<span class=\"string\">\"e\"</span>) &#125; <span class=\"comment\">// è¿”å›countæ•°</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">println(<span class=\"string\">\"There are <span class=\"variable\">$countEndsWithE</span> elements that end with e.\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ— è§†è¿”å›å€¼ï¼Œåªæ˜¯æ‰§è¡ŒåŸŸå‡½æ•°å†…éƒ¨æ“ä½œ</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> numbers = mutableListOf(<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>)</span><br><span class=\"line\">with(numbers) &#123; <span class=\"comment\">// withæ˜¯thisæŒ‡ä»£ï¼Œå¯çœç•¥</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> firstItem = first()</span><br><span class=\"line\">    <span class=\"keyword\">val</span> lastItem = last()        </span><br><span class=\"line\">    println(<span class=\"string\">\"First item: <span class=\"variable\">$firstItem</span>, last item: <span class=\"variable\">$lastItem</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ä¸Šä¸‹æ–‡å¯¹è±¡\"><a href=\"#ä¸Šä¸‹æ–‡å¯¹è±¡\" class=\"headerlink\" title=\"ä¸Šä¸‹æ–‡å¯¹è±¡\"></a>ä¸Šä¸‹æ–‡å¯¹è±¡</h2><p><code>also</code>, <code>apply</code>è¿”å›ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå¯ä»¥ç»§ç»­å¯¹æ­¤è¿›è¡Œé“¾å¼è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¿”å›ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é“¾å¼è°ƒç”¨</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> numberList = mutableListOf&lt;<span class=\"built_in\">Double</span>&gt;()</span><br><span class=\"line\">numberList.also &#123; println(<span class=\"string\">\"Populating the list\"</span>) &#125;</span><br><span class=\"line\">    .apply &#123; <span class=\"comment\">// æ³¨æ„applyä½¿ç”¨thisæŒ‡ä»£ï¼ˆçœç•¥æ‰ï¼‰</span></span><br><span class=\"line\">        add(<span class=\"number\">2.71</span>)</span><br><span class=\"line\">        add(<span class=\"number\">3.14</span>)</span><br><span class=\"line\">        add(<span class=\"number\">1.0</span>)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    .also &#123; println(<span class=\"string\">\"Sorting the list\"</span>) &#125;</span><br><span class=\"line\">    .sort()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä½œä¸ºè¿”å›å€¼</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getRandomInt</span><span class=\"params\">()</span></span>: <span class=\"built_in\">Int</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> Random.nextInt(<span class=\"number\">100</span>).also &#123;</span><br><span class=\"line\">        writeToLog(<span class=\"string\">\"getRandomInt() generated value <span class=\"variable\">$it</span>\"</span>) <span class=\"comment\">// itæŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">val</span> i = getRandomInt()</span><br></pre></td></tr></table></figure>\n<h1 id=\"é€ä¸ªå‡½æ•°è®²è§£\"><a href=\"#é€ä¸ªå‡½æ•°è®²è§£\" class=\"headerlink\" title=\"é€ä¸ªå‡½æ•°è®²è§£\"></a>é€ä¸ªå‡½æ•°è®²è§£</h1><h2 id=\"let\"><a href=\"#let\" class=\"headerlink\" title=\"let\"></a>let</h2><p><strong>ä¸Šä¸‹æ–‡å¯¹è±¡</strong>æ˜¯<code>it</code>ï¼Œ<strong>è¿”å›å€¼</strong>æ˜¯lambdaè¡¨è¾¾å¼è®¡ç®—ç»“æœï¼ˆæœ€åä¸€è¡Œï¼‰ã€‚</p>\n<p><code>let</code>å¯ä»¥ä½œä¸ºé“¾å¼è°ƒç”¨ä¸­çš„ä¸€ç¯æ¥ä½¿ç”¨ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// é“¾å¼è°ƒç”¨</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> numbers = mutableListOf(<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>, <span class=\"string\">\"four\"</span>, <span class=\"string\">\"five\"</span>)</span><br><span class=\"line\">numbers.map &#123; it.length &#125;.filter &#123; it &gt; <span class=\"number\">3</span> &#125;.let &#123; </span><br><span class=\"line\">    println(it)</span><br><span class=\"line\">    <span class=\"comment\">// and more function calls if needed</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// æ›´åŠ ç²¾ç®€</span></span><br><span class=\"line\">numbers.map &#123; it.length &#125;.filter &#123; it &gt; <span class=\"number\">3</span> &#125;.let(::println)</span><br></pre></td></tr></table></figure>\n<p><code>let</code>ç»å¸¸ç”¨æ¥åœ¨éç©ºå¯¹è±¡ä¸Šæ‰§è¡Œä¸€ç³»åˆ—æ“ä½œã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> str: String? = <span class=\"string\">\"Hello\"</span>   </span><br><span class=\"line\"><span class=\"comment\">//processNonNullString(str)       // compilation error: str can be null</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> length = str?.let &#123; </span><br><span class=\"line\">    println(<span class=\"string\">\"let() called on <span class=\"variable\">$it</span>\"</span>)        </span><br><span class=\"line\">    processNonNullString(it)      <span class=\"comment\">// OK: 'it' is not null inside '?.let &#123; &#125;'</span></span><br><span class=\"line\">    it.length</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>let</code>å¦ä¸€ä¸ªç”¨æ³•æ˜¯ä¸ºå˜é‡<code>it</code>åˆ›å»ºåˆ«åï¼Œä»¥å¢å¼ºä»£ç å¯é˜…è¯»æ€§ã€‚å€ŸåŠ©äºIDEï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥çœ‹åˆ°<code>it</code>æŒ‡ä»£çš„æ˜¯ä»€ä¹ˆå¯¹è±¡ï¼Œå¯¹è¿™ä¸ªç”¨æ³•çš„éœ€æ±‚å¹¶éååˆ†å¼ºçƒˆã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> numbers = listOf(<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>, <span class=\"string\">\"four\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">val</span> modifiedFirstItem = numbers.first().let &#123; firstItem -&gt;</span><br><span class=\"line\">    println(<span class=\"string\">\"The first item of the list is '<span class=\"variable\">$firstItem</span>'\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (firstItem.length &gt;= <span class=\"number\">5</span>) firstItem <span class=\"keyword\">else</span> <span class=\"string\">\"!\"</span> + firstItem + <span class=\"string\">\"!\"</span></span><br><span class=\"line\">&#125;.toUpperCase()</span><br><span class=\"line\">println(<span class=\"string\">\"First item after modifications: '<span class=\"variable\">$modifiedFirstItem</span>'\"</span>)</span><br></pre></td></tr></table></figure>\n<h2 id=\"with\"><a href=\"#with\" class=\"headerlink\" title=\"with\"></a>with</h2><p><code>with</code>ä¸æ˜¯æ‰©å±•å‡½æ•°ï¼Œå®ƒæ¥æ”¶<strong>ä¸Šä¸‹æ–‡å¯¹è±¡</strong>ä½œä¸ºå‡½æ•°å‚æ•°ï¼Œåœ¨lambdaè¡¨è¾¾å¼ä¸­ç”¨<code>this</code>æŒ‡ä»£ï¼Œè¿”å›ç»“æœæ˜¯lambdaè¡¨è¾¾å¼çš„å€¼ã€‚</p>\n<p>å»ºè®®åœ¨ä½¿ç”¨<code>with</code>æ—¶ä¸è¦å¤„ç†å®ƒçš„è¿”å›ç»“æœï¼Œè¿™æ ·<code>with</code>å°±å¯ä»¥æ ¹æ®å­—é¢å«ä¹‰ç®€å•çš„ç†è§£æˆâ€œåœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè¿›è¡Œå¦‚ä¸‹æ“ä½œâ€ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> numbers = mutableListOf(<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>)</span><br><span class=\"line\">with(numbers) &#123;</span><br><span class=\"line\">    println(<span class=\"string\">\"'with' is called with argument <span class=\"variable\">$this</span>\"</span>)</span><br><span class=\"line\">    println(<span class=\"string\">\"It contains <span class=\"variable\">$size</span> elements\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦ä¸€ç§ç”¨æ³•æ˜¯åˆ›å»ºä¸€ä¸ªè¾…åŠ©å¯¹è±¡ï¼Œå®ƒçš„å±æ€§æˆ–è€…æ–¹æ³•å¯ä»¥ç”¨æ¥è®¡ç®—å‡ºæŸä¸ªå€¼ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> numbers = mutableListOf(<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">val</span> firstAndLast = with(numbers) &#123; <span class=\"comment\">// ç›¸å½“äºå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å‡½æ•°</span></span><br><span class=\"line\">    <span class=\"string\">\"The first element is <span class=\"subst\">$&#123;first()&#125;</span>,\"</span> +</span><br><span class=\"line\">    <span class=\"string\">\" the last element is <span class=\"subst\">$&#123;last()&#125;</span>\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">println(firstAndLast)</span><br></pre></td></tr></table></figure>\n<h2 id=\"run\"><a href=\"#run\" class=\"headerlink\" title=\"run\"></a>run</h2><p>ä½¿ç”¨<code>this</code>æŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›ç»“æœæ˜¯lambdaè¡¨è¾¾å¼å€¼ã€‚</p>\n<p><code>run</code>åœ¨å«ä¹‰ä¸Šä¸<code>with</code>ä¸€è‡´ï¼Œåœ¨è°ƒç”¨æ–¹å¼ä¸Šä¸<code>let</code>ä¸€è‡´ã€‚å½“éœ€è¦è¿›è¡Œå¯¹è±¡åˆå§‹åŒ–ã€å¹¶åŒæ—¶è¦è¿”å›ä¸€ä¸ªè®¡ç®—ç»“æœæ—¶ï¼Œåº”å½“ä½¿ç”¨<code>run</code>ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> service = MultiportService(<span class=\"string\">\"https://example.kotlinlang.org\"</span>, <span class=\"number\">80</span>)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">val</span> result = service.run &#123;</span><br><span class=\"line\">    port = <span class=\"number\">8080</span></span><br><span class=\"line\">    query(prepareRequest() + <span class=\"string\">\" to port <span class=\"variable\">$port</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// the same code written with let() function:</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> letResult = service.let &#123;</span><br><span class=\"line\">    it.port = <span class=\"number\">8080</span></span><br><span class=\"line\">    it.query(it.prepareRequest() + <span class=\"string\">\" to port <span class=\"subst\">$&#123;it.port&#125;</span>\"</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é™¤äº†åœ¨æ¥æ”¶è€…å¯¹è±¡ä¸Šè°ƒç”¨ä»¥å¤–ï¼Œ<code>run</code>è¿˜å¯ä»¥è®©æˆ‘ä»¬åœ¨éœ€è¦ä¸€ä¸ªè¡¨è¾¾å¼çš„åœ°æ–¹ä¼ å…¥ä¸€ä¸ªä»£ç å—ï¼ˆè¿™ç§ç”¨æ³•ç•¥å¤æ‚ï¼‰ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> hexNumberRegex = run &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> digits = <span class=\"string\">\"0-9\"</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> hexDigits = <span class=\"string\">\"A-Fa-f\"</span></span><br><span class=\"line\">    <span class=\"keyword\">val</span> sign = <span class=\"string\">\"+-\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">    Regex(<span class=\"string\">\"[<span class=\"variable\">$sign</span>]?[<span class=\"variable\">$digits</span><span class=\"variable\">$hexDigits</span>]+\"</span>)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (match <span class=\"keyword\">in</span> hexNumberRegex.findAll(<span class=\"string\">\"+1234 -FFFF not-a-number\"</span>)) &#123; <span class=\"comment\">// findAllæ­£åˆ™åŒ¹é…</span></span><br><span class=\"line\">    println(match.value)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * output: </span></span><br><span class=\"line\"><span class=\"comment\"> * +1234</span></span><br><span class=\"line\"><span class=\"comment\"> * -FFFF</span></span><br><span class=\"line\"><span class=\"comment\"> * -a</span></span><br><span class=\"line\"><span class=\"comment\"> * be</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"apply\"><a href=\"#apply\" class=\"headerlink\" title=\"apply\"></a>apply</h2><p>ä½¿ç”¨<code>this</code>æŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡æœ¬èº«ã€‚</p>\n<p><code>apply</code>é€‚ç”¨çš„åœºæ™¯æ˜¯ä¸éœ€è¦è¿”å›å€¼ï¼Œä¸”ä¸»è¦æ˜¯æ“ä½œå¯¹è±¡æˆå‘˜çš„è¿‡ç¨‹ã€‚å¸¸è§çš„å°±æ˜¯å¯¹è±¡é…ç½®ï¼Œâ€œåœ¨å¯¹è±¡ä¸Šè¿›è¡Œå¦‚ä¸‹æ“ä½œâ€ã€‚</p>\n<p><code>apply</code>å¯ä»¥å¾ˆå®¹æ˜“åœ°å˜æˆé“¾å¼æ“ä½œã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> adam = Person(<span class=\"string\">\"Adam\"</span>).apply &#123;</span><br><span class=\"line\">    age = <span class=\"number\">32</span></span><br><span class=\"line\">    city = <span class=\"string\">\"London\"</span>        </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"also\"><a href=\"#also\" class=\"headerlink\" title=\"also\"></a>also</h2><p>ä½¿ç”¨<code>it</code>æŒ‡ä»£ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œè¿”å›å€¼æ˜¯ä¸Šä¸‹æ–‡å¯¹è±¡æœ¬èº«ã€‚</p>\n<p><code>also</code>çš„ä½¿ç”¨åœºæ™¯æ˜¯å°†å¯¹è±¡ä½œä¸ºä¸€ç³»åˆ—æ“ä½œçš„å‚æ•°ï¼Œåœ¨è¿™äº›æ“ä½œä¸­<strong>ä¸åº”è¯¥å¯¹å‚æ•°äº§ç”Ÿå‰¯ä½œç”¨</strong>ï¼Œå› æ­¤ä½ å¯ä»¥åœ¨ä¸€ä¸ªé“¾å¼è°ƒç”¨ä¸­å¾ˆæ–¹ä¾¿åœ°åŠ ä¸Š<code>also</code>ï¼Œæˆ–è€…ä»é“¾å¼è°ƒç”¨ä¸­æŠŠ<code>also</code>æ‘˜æ‰ï¼Œä¸”ä¸å½±å“åŸæœ‰é€»è¾‘ã€‚</p>\n<p>å½“ä½ åœ¨ä»£ç ä¸­çœ‹åˆ°<code>also</code>æ—¶ï¼Œå¯ä»¥å°†å…¶ç†è§£ä¸ºâ€œè¿˜éœ€è¦åšè¿™äº›äº‹æƒ…â€ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">val</span> numbers = mutableListOf(<span class=\"string\">\"one\"</span>, <span class=\"string\">\"two\"</span>, <span class=\"string\">\"three\"</span>)</span><br><span class=\"line\">numbers</span><br><span class=\"line\">    .also &#123; println(<span class=\"string\">\"The list elements before adding new one: <span class=\"variable\">$it</span>\"</span>) &#125;</span><br><span class=\"line\">    .add(<span class=\"string\">\"four\"</span>)</span><br></pre></td></tr></table></figure>\n<h1 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h1><p>ç”¨ä¸€å¼ è¡¨æ ¼åˆ—å‡ºå‡½æ•°çš„å¯¹è±¡å¼•ç”¨ä¸è¿”å›å€¼ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>Function</th>\n<th>Object reference</th>\n<th>Return value</th>\n<th>Is extension function</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>let</td>\n<td>it</td>\n<td>Lambda result</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>run</td>\n<td>it</td>\n<td>Lambda result</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>run</td>\n<td>-</td>\n<td>Lambda result</td>\n<td>No: called without the context object</td>\n</tr>\n<tr>\n<td>with</td>\n<td>this</td>\n<td>Lambda result</td>\n<td>No: takes the context object as an argument</td>\n</tr>\n<tr>\n<td>apply</td>\n<td>this</td>\n<td>Context object</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>also</td>\n<td>it</td>\n<td>Context object</td>\n<td>Yes</td>\n</tr>\n</tbody>\n</table>\n<p>ä¸€ä¸ªç®€å•çš„å‡½æ•°é€‰ç”¨æŒ‡å—å¦‚ä¸‹ï¼Œå®ƒä»¬çš„åº”ç”¨åœºæ™¯æœ‰é‡å çš„éƒ¨åˆ†ï¼Œä½¿ç”¨æ—¶åº”å½“å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚</p>\n<ul>\n<li>åœ¨éç©ºå¯¹è±¡ä¸Šè°ƒç”¨lambdaè¡¨è¾¾å¼ï¼š<code>let</code></li>\n<li>åœ¨åŸŸå†…å°†è¡¨è¾¾å¼æŠ½è±¡æˆä¸€ä¸ªå˜é‡ï¼š<code>let</code></li>\n<li>å¯¹è±¡é…ç½®ï¼š<code>apply</code></li>\n<li>å¯¹è±¡é…ç½®å¹¶è®¡ç®—ç»“æœï¼š<code>run</code></li>\n<li>æ‰§è¡Œä¸€ç³»åˆ—è¡¨è¾¾å¼ï¼Œéæ‰©å±•å‡½æ•°ï¼š<code>run</code></li>\n<li>é™„åŠ æ•ˆæœï¼š<code>also</code></li>\n<li>å°†å¯¹äºæŸä¸ªå¯¹è±¡çš„å‡½æ•°è°ƒç”¨ç»„åˆï¼š<code>with</code></li>\n</ul>\n<p>å°½ç®¡ä½œç”¨åŸŸå‡½æ•°åŠŸèƒ½å¼ºå¤§ï¼Œåœ¨ä½¿ç”¨æ—¶åº”å½“è°¨æ…ï¼Œé¿å…å‡ºé”™ï¼Œå°¤å…¶æ˜¯åµŒå¥—çš„æƒ…å†µåº”å½“è¶Šå°‘è¶Šå¥½ï¼›å½“ä½ åœ¨å†™é“¾å¼è°ƒç”¨æ—¶ï¼Œä¸€å®šè¦å°å¿ƒåˆ†è¾¨å½“å‰çš„ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚</p>\n<h1 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h1><ul>\n<li><a href=\"https://kotlinlang.org/docs/reference/scope-functions.html\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹æ–‡æ¡£</a></li>\n</ul>\n","categories":[],"tags":["Android","Kotlin"]},{"title":"ç§»åŠ¨è®¾å¤‡IDé‚£äº›äº‹","url":"https://lilei.pro/2019/10/12/unique-device-id/","content":"<h2 id=\"ä¸ºä»€ä¹ˆéœ€è¦è®¾å¤‡ID\"><a href=\"#ä¸ºä»€ä¹ˆéœ€è¦è®¾å¤‡ID\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆéœ€è¦è®¾å¤‡ID\"></a>ä¸ºä»€ä¹ˆéœ€è¦è®¾å¤‡ID</h2><p>â€œè®¾å¤‡IDâ€å³ç”¨äºæ ‡è¯†è®¾å¤‡å”¯ä¸€èº«ä»½çš„IDï¼Œå³ Unique Device Identifierã€‚åŸºäºä»¥ä¸‹åŸå› ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†è®¾å¤‡IDç›¸å…³åŠŸèƒ½ï¼š</p>\n<ol>\n<li>ç»Ÿè®¡éœ€æ±‚ã€‚DAUï¼ŒMAUï¼Œè½¬åŒ–ç‡ï¼Œç”¨æˆ·è¡Œä¸ºç­‰ç»Ÿè®¡ã€‚</li>\n<li>ä¸šåŠ¡éœ€æ±‚ã€‚ä¸ªæ€§åŒ–æ¨èï¼Œæ—¥å¿—æ”¶é›†ï¼Œç°åº¦å‘å¸ƒï¼ŒAB Testç­‰ä¸šåŠ¡ä¾§éœ€æ±‚ã€‚</li>\n<li>é£æ§éœ€æ±‚ã€‚é˜²åˆ·å•ï¼Œåä½œå¼Šç­‰ã€‚</li>\n</ol>\n<h2 id=\"è®¾å¤‡IDçš„ç‰¹å¾\"><a href=\"#è®¾å¤‡IDçš„ç‰¹å¾\" class=\"headerlink\" title=\"è®¾å¤‡IDçš„ç‰¹å¾\"></a>è®¾å¤‡IDçš„ç‰¹å¾</h2><p>ä¸ºäº†æ»¡è¶³ä»¥ä¸Šéœ€æ±‚ï¼Œä¸€ä¸ªè‰¯å¥½çš„è®¾å¤‡IDæ–¹æ¡ˆåº”å½“å…·æœ‰â€œå”¯ä¸€æ€§â€å’Œâ€œç¨³å®šæ€§â€ä¸¤ä¸ªç‰¹å¾ã€‚</p>\n<ul>\n<li>å”¯ä¸€æ€§ï¼šç³»ç»Ÿä¸­çš„ä»»æ„ä¸¤å°è®¾å¤‡ï¼Œå®ƒä»¬çš„è®¾å¤‡IDåº”å½“ä¸åŒã€‚</li>\n<li>ç¨³å®šæ€§ï¼šåŒä¸€å°è®¾å¤‡åœ¨é‡å¯ã€æ¸…ç©ºåº”ç”¨æ•°æ®ã€å¸è½½åº”ç”¨é‡è£…ã€ç³»ç»Ÿå‡çº§ã€Android ç‰ˆæœ¬å‡çº§ã€åˆ·æœºç­‰æƒ…å†µä¸‹ï¼Œè®¾å¤‡IDåº”å½“ä¿æŒä¸å˜ã€‚</li>\n</ul>\n<p>é—æ†¾çš„æ˜¯ï¼ŒAndroid å¹³å°å¹¶æ²¡æœ‰ç¨³å®šçš„APIå¯ä»¥æä¾›å…·æœ‰ä¸Šé¢ä¸¤ç‚¹ç‰¹å¾çš„IDã€‚</p>\n<h2 id=\"å¯é€‰æ–¹æ¡ˆåŠé™åˆ¶\"><a href=\"#å¯é€‰æ–¹æ¡ˆåŠé™åˆ¶\" class=\"headerlink\" title=\"å¯é€‰æ–¹æ¡ˆåŠé™åˆ¶\"></a>å¯é€‰æ–¹æ¡ˆåŠé™åˆ¶</h2><p>å…³äºAndroidè®¾å¤‡IDï¼Œå¸¸è§çš„æ–¹æ¡ˆæœ‰IMEIã€MACåœ°å€ã€Serialã€AndroidIDç­‰ï¼Œä¸‹é¢é€ä¸€ä»‹ç»å®ƒä»¬æ˜¯ä»€ä¹ˆï¼Œä»¥åŠä¸ºä½•æ— æ³•æ‰¿æ‹…å”¯ä¸€IDçš„èŒè´£ã€‚</p>\n<h3 id=\"IMEI\"><a href=\"#IMEI\" class=\"headerlink\" title=\"IMEI\"></a>IMEI</h3><p>æ˜¯ <strong>å›½é™…è®¾å¤‡è¯†åˆ«ç ï¼ˆImternational Mobile Equipment Identityï¼‰</strong> çš„ç¼©å†™ï¼Œå³é€šå¸¸æ‰€è¯´çš„æ‰‹æœºä¸²å·ï¼Œç”¨äºåœ¨ç§»åŠ¨ç”µè¯ç½‘ç»œä¸­è¯†åˆ«æ¯ä¸€éƒ¨ç‹¬ç«‹çš„æ‰‹æœºç­‰ç§»åŠ¨é€šä¿¡è®¾å¤‡ï¼Œå…±15~17ä½æ•°å­—ã€‚åœ¨æ‹¨å·é”®ç›˜è¾“å…¥<code>*#06#</code>å³å¯æŸ¥çœ‹ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯»å–IMEIçš„æ ·ä¾‹ä»£ç ï¼Œéœ€è¦ READ_PHONE_STATE æƒé™</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getIMEI</span><span class=\"params\">()</span></span>: String &#123;</span><br><span class=\"line\">    <span class=\"keyword\">val</span> tm = getSystemService(Context.TELEPHONY_SERVICE) <span class=\"keyword\">as</span> TelephonyManager</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tm.deviceId</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨æ—©äº›æ—¶å€™ï¼ŒIMEIæ˜¯å¾ˆå¤šåº”ç”¨é‡‡å–çš„è®¾å¤‡IDæ–¹æ¡ˆï¼Œå› ä¸ºå®ƒè¯»å–æ–¹ä¾¿ï¼Œä¸”åŒæ—¶å…·å¤‡å”¯ä¸€æ€§å’Œç¨³å®šæ€§çš„ç‰¹å¾ã€‚ç„¶è€Œè‡ªä»Android 6å¼€å§‹ï¼Œ<code>READ_PHONE_STATE</code>è¢«åˆ—å…¥<code>dangerous</code>çš„ä¿æŠ¤çº§åˆ«ï¼Œæ„å‘³ç€æˆ‘ä»¬ä¸ä»…è¦åœ¨<code>AndroidManifest.xml</code>æ–‡ä»¶é‡Œç”³è¯·ï¼Œè¿˜åº”å½“åœ¨åº”ç”¨åˆ°è¿™ä¸ªæƒé™ä¹‹å‰åŠ¨æ€ç”³è¯·ã€‚å°¤å…¶åœ¨ä¸­æ–‡çš„å®‰å“ç³»ç»Ÿä¸Šï¼Œå¼¹çª—é‡Œçš„æ–‡å­—æç¤ºæ˜¯â€œç”³è¯·ç”µè¯è®¾å¤‡ä¿¡æ¯â€ï¼Œå¾ˆå®¹æ˜“è®©äººè¯¯ä»¥ä¸ºè¿™æ˜¯è¦è·å–ç”µè¯å·ç ã€çŸ­ä¿¡å†…å®¹ç­‰æ•æ„Ÿä¿¡æ¯ã€‚</p>\n<p>å¦‚æœè¯´Android 6åªæ˜¯æé«˜äº†ä½¿ç”¨IMEIä½œä¸ºè®¾å¤‡IDçš„é—¨æ§›ï¼ŒAndroid 10åˆ™æ˜¯å®Œå…¨å µæ­»äº†è¿™æ¡è·¯ã€‚åœ¨Android 10çš„ç³»ç»Ÿé‡Œï¼Œå³ä½¿ç”³è¯·äº†<code>READ_PHONE_STATE</code>æƒé™ï¼Œä¹Ÿæ— æ³•è·å–IMEIï¼Œä¼šæŠ›å‡º<code>SecurityException</code>å¼‚å¸¸æˆ–è€…è¿”å›nullã€‚</p>\n<h3 id=\"MACåœ°å€\"><a href=\"#MACåœ°å€\" class=\"headerlink\" title=\"MACåœ°å€\"></a>MACåœ°å€</h3><p>MACåœ°å€ï¼ˆMedia Access Control Addressï¼‰ï¼Œç”¨äºæ ‡è¯†å¯ä¸Šç½‘è®¾å¤‡çš„å”¯ä¸€åœ°å€ï¼Œè®¾å¤‡æœ‰å‡ å¼ ç½‘å¡ï¼Œå°±ä¼šæœ‰å‡ ä¸ªMACåœ°å€ã€‚åœ¨OSIä¸ƒå±‚æ¨¡å‹ä¸­ï¼ŒMACåœ°å€ä½äºç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚ã€‚çœ‹åˆ°è¿™é‡Œä½ ä¹Ÿè®¸ä»¥ä¸ºMACåœ°å€æ˜¯ä½œä¸ºè®¾å¤‡IDè§£å†³æ–¹æ¡ˆçš„æœ€ä½³é€‰æ‹©ï¼Œå®åˆ™ä¸ç„¶ï¼Œé¦–å…ˆï¼ŒMACåœ°å€çš„è·å–æ–¹æ³•å†ç»å¤šæ¬¡ä¿®æ”¹ï¼Œè¶³è§Googleæ­£æ¬²æ”¶ç´§MACåœ°å€æƒé™ï¼Œä»¥åå®Œå…¨å µæ­»ä¹Ÿå¹¶éä¸å¯èƒ½ã€‚</p>\n<p>åœ¨ (?, 6.0)ï¼Œ[6.0, 7.0)ï¼Œ[7.0, ?) ä¸‰ç§ä¸åŒçš„Androidç‰ˆæœ¬ä¸‹ï¼Œæœ‰ç€ä¸åŒçš„è·å–MACåœ°å€æ–¹å¼ï¼Œå¯ä»¥å‚è€ƒç®€ä¹¦è¿™ç¯‡æ–‡ç«  <a href=\"https://www.jianshu.com/p/16d4ff4c4cbe\" target=\"_blank\" rel=\"noopener\">ã€ŠAndroid ç‰ˆæœ¬å…¼å®¹ â€” Android 6.0 å’Œ 7.0åè·å–Macåœ°å€ã€‹</a>ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è·å–MACåœ°å€ï¼Œé€‚ç”¨äºç›®å‰Androidå…¨ç‰ˆæœ¬ï¼Œä¸ä¿è¯ä»¥åç»§ç»­é€‚ç”¨ï¼ˆå¾ˆå¤§å¯èƒ½ä¸å†é€‚ç”¨ï¼‰</span></span><br><span class=\"line\"><span class=\"comment\">// éœ€è¦ android.permission.INTERNET æƒé™ï¼Œä¸ºédangerousæƒé™ï¼Œå¯ä»¥åœ¨AndroidManifst.xmlä¸­ç›´æ¥ç”³è¯·</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getMAC</span><span class=\"params\">()</span></span>: String &#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">val</span> enumeration = getNetworkInterfaces() ?: <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span></span><br><span class=\"line\">        <span class=\"keyword\">while</span> (enumeration.hasMoreElements()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">val</span> netInterface = enumeration.nextElement()</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (netInterface.name == <span class=\"string\">\"wlan0\"</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> addr = netInterface.hardwareAddress</span><br><span class=\"line\">                <span class=\"keyword\">val</span> result = StringBuilder()</span><br><span class=\"line\">                <span class=\"keyword\">for</span> (b <span class=\"keyword\">in</span> addr) &#123;</span><br><span class=\"line\">                    result.append(String.format(<span class=\"string\">\"%02X:\"</span>, b))</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">if</span> (result.isNotEmpty()) &#123;</span><br><span class=\"line\">                    result.deleteCharAt(result.length - <span class=\"number\">1</span>)</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> result.toString()</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (e: Exception) &#123;</span><br><span class=\"line\">        Log.e(<span class=\"string\">\"tag\"</span>, e.message, e)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"\"</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Serial\"><a href=\"#Serial\" class=\"headerlink\" title=\"Serial\"></a>Serial</h3><p>ä½•ä¸ºSerialï¼ŸSerialå³â€œè®¾å¤‡åºåˆ—å·â€ï¼Œæ˜¯è®¾å¤‡å‚å•†æä¾›çš„è®¾å¤‡å”¯ä¸€ä¸²å·ï¼Œå”¯ä¸€æ€§ç”±å„å‚å•†ä¿è¯ã€‚æ‹¿vivoä¸¾ä¾‹ï¼Œå®ƒä¼šä¿è¯è‡ªå·±ç”Ÿäº§çš„æ¯ä¸€å°è®¾å¤‡åºåˆ—å·éƒ½æ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯ä¸æ˜¯ä¸OPPOçš„ä¹Ÿä¸ä¸€æ ·å‘¢ï¼Ÿè¿™å°±æ— æ³•ä¿è¯äº†ã€‚ä¸€ä¸ªæ–¹æ¡ˆæ˜¯ç”¨<code>å‚å•†ID_è®¾å¤‡å‹å·_åºåˆ—å·</code>æ‹¼æ¥èµ·æ¥ï¼Œä½œä¸ºè®¾å¤‡IDï¼Œè¿™æ ·å¯ä»¥é¿å…ä¸åŒå‚å•†è®¾å¤‡å…·æœ‰ç›¸åŒSerialçš„é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¹¶éæ‰€æœ‰å‚å•†éƒ½ä¼šä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªè§„å®šæ¥åšã€‚æˆ‘æ›¾ç»åœ¨RK3399çš„å¼€å‘æ¿ä¸Šåšè¿‡å¼€å‘ï¼Œè¯•è¿‡å¾ˆå¤šå¼ æ¿å­ï¼Œå®ƒä»¬çš„Serialéƒ½æ˜¯0123456789ï¼Œè®©äººå“­ç¬‘ä¸å¾—ã€‚</p>\n<p>æ›´ç³Ÿç³•çš„æ˜¯ï¼ŒAndroid 10åˆå µæ­»äº†è·å–Serialçš„è·¯ï¼Œä¼šç›´æ¥æŠ›å‡º<code>SecurityException</code>ï¼Œé™¤éåº”ç”¨æ˜¯ç³»ç»Ÿç­¾åä¸”å…·å¤‡<code>android.Manifest.permission.READ_PRIVILEGED_PHONE_STATE</code>æƒé™ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯»å–Serialï¼Œéœ€è¦ READ_PHONE_STATE æƒé™</span></span><br><span class=\"line\"><span class=\"comment\">// Android 10 å¼‚å¸¸ </span></span><br><span class=\"line\"><span class=\"comment\">// java.lang.SecurityException: getSerial: The user 10236 does not meet the requirements to access device identifiers.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getSerial</span><span class=\"params\">()</span></span> = android.os.Build.getSerial()</span><br></pre></td></tr></table></figure>\n<h3 id=\"AndroidID\"><a href=\"#AndroidID\" class=\"headerlink\" title=\"AndroidID\"></a>AndroidID</h3><p>AndroidIDæ˜¯SDKæä¾›çš„è·å–IDæ–¹æ³•ï¼Œå®ƒä¸éœ€è¦ç”³æ˜ä»»ä½•æƒé™ï¼Œå…·æœ‰64bitçš„å–å€¼èŒƒå›´ï¼Œä¸”å”¯ä¸€æ€§ä¹Ÿè¿˜ä¸é”™ã€‚ä½†æ˜¯ï¼Œå®ƒæœ€å¤§çš„ç¡¬ä¼¤åœ¨äºæ— æ³•æ»¡è¶³ç¨³å®šæ€§ï¼š</p>\n<ul>\n<li>åˆ·æœºã€rootã€æ¢å¤å‡ºå‚è®¾ç½®åéƒ½ä¼šå˜åŒ–</li>\n<li>å¯¹å®‰è£…åœ¨8.0ç³»ç»Ÿçš„åº”ç”¨æ¥è¯´ï¼ŒAndroidIDå–å†³äºåº”ç”¨ç­¾å+è®¾å¤‡ä¸¤è€…çš„ç»„åˆ</li>\n<li>åœ¨8.0ä¹‹å‰å®‰è£…çš„åº”ç”¨ï¼Œå¦‚æœåœ¨ç³»ç»Ÿå‡çº§åˆ°8.0åï¼Œå¸è½½é‡è£…è¯¥åº”ç”¨ï¼Œè¯»å–åˆ°çš„AndroidIDä¼šå˜åŒ–</li>\n</ul>\n<p>ç”±äºä»¥ä¸ŠåŸå› ï¼Œåœ¨ä¸€äº›è¦æ±‚ä¸ä¸¥æ ¼çš„åœºæ™¯ä¸­ï¼Œå¯ä»¥é‡‡ç”¨AndroidIDä½œä¸ºè®¾å¤‡IDï¼Œæ¯”å¦‚è®°å½•æ¿€æ´»æ•°ã€æ›å…‰æ•°æ®ç­‰ã€‚ä½†æ˜¯åœ¨ä¸¥æ ¼çš„åœºæ™¯ä¸­å°±ä¸èƒ½ç”¨AndroidIDäº†ï¼Œå¦‚ä»¥è®¾å¤‡IDæ ‡è¯†ç”¨æˆ·èº«ä»½ï¼Œæä¾›ç›¸åº”æœåŠ¡çš„åœºæ™¯ã€‚</p>\n<p>è¯»å–AndroidIDçš„æ ·ä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// è¯»å–AndroidIDï¼Œä¸éœ€è¦é¢å¤–ç”³è¯·ä»»ä½•æƒé™</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getAndroidID</span><span class=\"params\">()</span></span> = Settings.Secure.getString(contentResolver, Settings.Secure.ANDROID_ID)</span><br></pre></td></tr></table></figure>\n<h2 id=\"å¯é€‰æ–¹æ¡ˆæ€»ç»“\"><a href=\"#å¯é€‰æ–¹æ¡ˆæ€»ç»“\" class=\"headerlink\" title=\"å¯é€‰æ–¹æ¡ˆæ€»ç»“\"></a>å¯é€‰æ–¹æ¡ˆæ€»ç»“</h2><p>ç”¨ä¸€å¼ è¡¨æ ¼æ€»ç»“ä¸Šè¿°æ–¹æ¡ˆï¼š</p>\n<table>\n<thead>\n<tr>\n<th>æ–¹æ¡ˆ</th>\n<th>æ¦‚è¿°</th>\n<th>é™åˆ¶</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>IMEI</td>\n<td>å…·å¤‡å”¯ä¸€æ€§å’Œç¨³å®šæ€§ï¼Œè¿‡å»çš„æœ€ä½³é€‰æ‹©</td>\n<td>Android10å µæ­»ï¼Œæ— æ³•è·å–</td>\n</tr>\n<tr>\n<td>MAC</td>\n<td>ç½‘å¡åœ°å€ï¼Œå”¯ä¸€ä¸”ç¨³å®š</td>\n<td>æƒé™é€æ¸æ”¶ç´§ï¼Œæœªæ¥ææœ‰å¯èƒ½å…³é—­</td>\n</tr>\n<tr>\n<td>Serial</td>\n<td>æ‰‹æœºå‚å•†æä¾›çš„è®¾å¤‡åºåˆ—å·</td>\n<td>ä¸ä¿è¯å”¯ä¸€æ€§ï¼ŒAndroid10å µæ­»</td>\n</tr>\n<tr>\n<td>AndroidID</td>\n<td>Android SDK æä¾›ï¼Œä¸éœ€è¦ç”³è¯·æƒé™ï¼Œå”¯ä¸€æ€§è¾ƒå¥½</td>\n<td>ä¸å…·å¤‡ç¨³å®šæ€§</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"è®¾è®¡ä¸€ä¸ªæ–°æ–¹æ¡ˆ\"><a href=\"#è®¾è®¡ä¸€ä¸ªæ–°æ–¹æ¡ˆ\" class=\"headerlink\" title=\"è®¾è®¡ä¸€ä¸ªæ–°æ–¹æ¡ˆ\"></a>è®¾è®¡ä¸€ä¸ªæ–°æ–¹æ¡ˆ</h2><p>ä¸Šè¿°å››ä¸ªæ–¹æ¡ˆé‡Œï¼Œæ²¡æœ‰å“ªä¸€ä¸ªæ˜¯è§£å†³è®¾å¤‡IDé—®é¢˜çš„ç»ˆææ­¦å™¨ï¼ˆé“¶å¼¹ï¼‰ï¼Œåªæœ‰å„ç§æ–¹æ³•ç»¼åˆè¿ç”¨ï¼Œæ‰æ˜¯è§£å†³ä¹‹é“ã€‚ä¸‹é¢æå‡ºä¸€ç§è®¾å¤‡IDæ–¹æ¡ˆï¼Œç»¼åˆä½¿ç”¨å¤šä¸ªç¡¬ä»¶IDï¼Œå€ŸåŠ©æœåŠ¡å™¨ç”Ÿæˆå”¯ä¸€è™šæ‹Ÿè®¾å¤‡IDï¼ˆVDIDï¼‰ï¼Œå¯ä»¥æœ€å¤§é™åº¦åœ°ä¿è¯å”¯ä¸€æ€§å’Œç¨³å®šæ€§ã€‚</p>\n<h3 id=\"ç¨³å®šæ€§ï¼šæ‹œå åº­å®¹é”™\"><a href=\"#ç¨³å®šæ€§ï¼šæ‹œå åº­å®¹é”™\" class=\"headerlink\" title=\"ç¨³å®šæ€§ï¼šæ‹œå åº­å®¹é”™\"></a>ç¨³å®šæ€§ï¼šæ‹œå åº­å®¹é”™</h3><p>ç¨³å®šæ€§è¦æ±‚å½“è·å–ä¸åˆ°æŸç§IDï¼Œæˆ–è€…æŸç§IDå‘ç”Ÿå˜åŒ–æ—¶ï¼Œç³»ç»Ÿèƒ½å¤Ÿè¾¨è¯†å‡ºè¿™ä¸ªè®¾å¤‡ã€‚å€ŸåŠ©â€œæ‹œå åº­å®¹é”™â€å¯ä»¥è§£å†³ç¨³å®šæ€§çš„é—®é¢˜ã€‚</p>\n<p>æ‹œå åº­å®¹é”™æœºåˆ¶æºäºå¤è€ <strong>æ‹œå åº­å°†å†›ï¼ˆByzantine failuresï¼‰</strong> é—®é¢˜ã€‚ç”¨ç®€å•çš„è¯­è¨€è§£é‡Šï¼š <strong>å¦‚æœç³»ç»Ÿä¸­æœ‰nä¸ªæ•…éšœèŠ‚ç‚¹ï¼Œç³»ç»Ÿè¦æƒ³æ­£ç¡®è¿è¡Œï¼Œå¿…é¡»è‡³å°‘è¦æœ‰2n+1ä¸ªæ­£å¸¸èŠ‚ç‚¹ã€‚</strong> ã€‚ä½†å¯¹äºAndroidè®¾å¤‡IDï¼Œæˆ‘ä»¬é‡‡ç”¨å¼±åŒ–çš„æ‹œå åº­å®¹é”™æœºåˆ¶ï¼Œå³å®¢æˆ·ç«¯æ¯æ¬¡ä¸Šä¼ 4ä¸ªIDï¼ˆIMEIã€MACã€Serialã€AndroidIDï¼‰ï¼ŒæœåŠ¡å™¨æ ¹æ®è¿™4ä¸ªIDç”Ÿæˆä¸€ä¸ªéšæœºçš„å”¯ä¸€IDå³VDIDã€‚åç»­å®¢æˆ·ç«¯å†è¯·æ±‚æ—¶ï¼Œå¯ä»¥ä½¿ç”¨VDIDï¼Œæˆ–è€…å†æ¬¡ä½¿ç”¨4ä¸ªIDï¼Œç”±æœåŠ¡å™¨æ‹¿è¿™4ä¸ªIDåœ¨æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥æ‰¾VDIDï¼Œè‹¥æ‰¾åˆ°åˆ™è¿”å›ï¼Œè‹¥æœªæ‰¾åˆ°ï¼Œå†ä½¿ç”¨4ä¸ªIDä¸­çš„3ä¸ªè¿›è¡ŒæŸ¥æ‰¾ï¼Œ3ä¸ªä¸è¡Œåˆ™ç”¨2ä¸ªï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>\n<h3 id=\"è·å–VDIDçš„æ—¶åºå›¾\"><a href=\"#è·å–VDIDçš„æ—¶åºå›¾\" class=\"headerlink\" title=\"è·å–VDIDçš„æ—¶åºå›¾\"></a>è·å–VDIDçš„æ—¶åºå›¾</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/20191012_unique_device_id/vdid_sequence.png\" alt=\"vdid_sequence\" title=\"\">\n                </div>\n                <div class=\"image-caption\">vdid_sequence</div>\n            </figure>\n<h3 id=\"å”¯ä¸€æ€§ï¼šVDIDçš„ç”Ÿæˆæ–¹å¼ä¸å–å€¼èŒƒå›´\"><a href=\"#å”¯ä¸€æ€§ï¼šVDIDçš„ç”Ÿæˆæ–¹å¼ä¸å–å€¼èŒƒå›´\" class=\"headerlink\" title=\"å”¯ä¸€æ€§ï¼šVDIDçš„ç”Ÿæˆæ–¹å¼ä¸å–å€¼èŒƒå›´\"></a>å”¯ä¸€æ€§ï¼šVDIDçš„ç”Ÿæˆæ–¹å¼ä¸å–å€¼èŒƒå›´</h3><p>è¦å®ç°VDIDçš„å”¯ä¸€æ€§ï¼Œæœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥è€ƒè™‘ï¼š</p>\n<h4 id=\"æ–¹æ¡ˆä¸€ï¼šè‡ªå¢ä¸»é”®ID\"><a href=\"#æ–¹æ¡ˆä¸€ï¼šè‡ªå¢ä¸»é”®ID\" class=\"headerlink\" title=\"æ–¹æ¡ˆä¸€ï¼šè‡ªå¢ä¸»é”®ID\"></a>æ–¹æ¡ˆä¸€ï¼šè‡ªå¢ä¸»é”®ID</h4><p>è‡ªå¢ã€åˆ†æ­¥è‡ªå¢ã€åˆ†æ®µæ„é€ ã€Redisåˆ†å¸ƒå¼IDç­‰æ–¹æ³•ï¼Œå¯ä»¥ä¿è¯å”¯ä¸€æ€§ã€‚ä½†æ˜¯åœ¨ä¼ è¾“æ­¤ç±»IDæ—¶ï¼Œåº”å½“è¿›è¡Œhashæ“ä½œï¼Œä¸”ä¿è¯hashåçš„IDä¸å¯ç¢°æ’ã€‚</p>\n<p>è‡ªå¢IDçš„ä¼˜ç‚¹æ˜¯å¯ä½œä¸ºç´¢å¼•ï¼Œæ£€ç´¢é€Ÿåº¦å¿«ï¼›ç¼ºç‚¹æ˜¯ç”Ÿæˆè§„åˆ™å­˜åœ¨è¢«ç ´è§£çš„é£é™©ã€‚</p>\n<h4 id=\"æ–¹æ¡ˆäºŒï¼šéšæœºç”ŸæˆID\"><a href=\"#æ–¹æ¡ˆäºŒï¼šéšæœºç”ŸæˆID\" class=\"headerlink\" title=\"æ–¹æ¡ˆäºŒï¼šéšæœºç”ŸæˆID\"></a>æ–¹æ¡ˆäºŒï¼šéšæœºç”ŸæˆID</h4><p>è¿™æ˜¯å¦ä¸€ç§ç”Ÿæˆå”¯ä¸€IDçš„æ–¹æ³•ï¼Œå½“ä½æ•°è¶³å¤Ÿå¤šæ—¶ï¼Œå¯ä»¥è®¤ä¸ºç¢°æ’æ¦‚ç‡è¶‹è¿‘äº0ã€‚é¦–å…ˆçœ‹ä¸€ä¸‹è¿™å¼ è¡¨ï¼Œå®ƒæè¿°äº†éšæœºæ•°ä½æ•°ä¸å‘ç”Ÿç¢°æ’çš„æ¦‚ç‡ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/20191012_unique_device_id/random_collision.png\" alt=\"random_collision\" title=\"\">\n                </div>\n                <div class=\"image-caption\">random_collision</div>\n            </figure>\n<p>å‡è®¾æˆ‘ä»¬åº”ç”¨çš„æ´»è·ƒç”¨æˆ·æ•°ä¸º20,000,000ï¼Œå³ä¸¤åƒä¸‡ã€‚å¯ä»¥çœ‹åˆ°è‡³å°‘è¦æœ‰128Bitsï¼Œæ‰èƒ½åœ¨2*10^7ï¼ˆä¸¤åƒä¸‡ï¼‰çš„æ•°é‡çº§æœ‰æå°çš„ç¢°æ’æ¦‚ç‡ï¼Œç¬¦åˆæˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ã€‚</p>\n<p>éšæœºIDçš„ä¼˜ç‚¹æ˜¯å…·æœ‰éšè”½æ€§ï¼Œç¼ºç‚¹æ˜¯æ£€ç´¢æ•ˆç‡ä¸€èˆ¬ã€‚</p>\n<h3 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h3><p>æœ¬æ–‡æ˜¯ç¬”è€…é˜…è¯»éƒ­éœ–å…¬ä¼—å·æ¨æ–‡<a href=\"https://mp.weixin.qq.com/s?__biz=MzA5MzI3NjE2MA==&amp;mid=2650247428&amp;idx=1&amp;sn=9d52f7b3262622f9ad25af8af167fcd8&amp;chksm=8863606bbf14e97deb5ecd030ff02ee76f6d320f1c0f586034e442903d00ff79dd7fc5bb3d91&amp;mpshare=1&amp;scene=1&amp;srcid=&amp;sharer_sharetime=1570535190224&amp;sharer_shareid=50472349a2a49142535b8b535dc7dac9&amp;key=042d6afab53eaf2ecfd1c244abe072a53b13e46580bd8c41a7ed57b6b5f3360221dd5c5a4ea8dc0fcde4b6632ba630de39d070bbd64a7e4f24155cec02abb5dc1e36d0ecbc6e250d6f3f87c039ad1407&amp;ascene=1&amp;uin=OTUwMTI1NjEw&amp;devicetype=Windows+10&amp;version=62060833&amp;lang=zh_CN&amp;pass_ticket=hOoinQFE6HGs3U8dFKy9YsMWbVerXZqDJCY6dO0Rh4aIO4VWSduOo5tRbTZkwcN3\" target=\"_blank\" rel=\"noopener\">ã€Šæ¼«è°ˆè®¾å¤‡å”¯ä¸€IDçš„é‚£äº›ç§˜å¯†ã€‹</a>åçš„æ€»ç»“å½’çº³ï¼Œæ­¤å¤„å‘åŸä½œè€…@å‘¼å•¸é•¿é£è‡´è°¢ã€‚ç„¶è€Œä½œè€…åŸæ–‡ä¸­æœ‰ä¸€å¤„çº°æ¼ï¼Œè®¾å¤‡åºåˆ—å·ï¼ˆSERIALï¼‰åœ¨Android 10ä¸ŠåŸºæœ¬æ˜¯æ— æ³•è·å–çš„ï¼Œè¿™ä¹Ÿä¼šå½±å“åŸä½œè€…æå‡ºçš„è§£å†³æ–¹æ¡ˆã€‚ç¬”è€…å·²ç»åœ¨Githubä¸Šå¯¹æ­¤æäº†<a href=\"https://github.com/No89757/Udid/issues/1\" target=\"_blank\" rel=\"noopener\">issue</a>ã€‚</p>\n<p>å‡ºäºå¯¹ç”¨æˆ·éšç§çš„ä¿æŠ¤ï¼ŒGoogleä¸€ç›´è¯•å›¾æ”¶ç´§çš„è®¾å¤‡IDçš„è·å–æƒé™ã€‚è€Œç”±äºâ€œè´¦æˆ·â€çš„æ¦‚å¿µåœ¨å›½å†…å¸‚åœºå¹¶ä¸æ™®éï¼Œå†åŠ ä¸Šå„å¤§OEMç¢ç‰‡åŒ–ä¸¥é‡ï¼Œå›½å†…çš„å„ç§ä¸šåŠ¡ä¸å¾—ä¸ä¾èµ–äºè®¾å¤‡IDè¿›è¡Œå±•å¼€ã€‚è¿™ä¹Ÿæ˜¯å¼€å‘è€…è¿‘å¹´æ¥ä¸å¾—ä¸é¢å¯¹çš„é—®é¢˜ï¼Œå¸Œæœ›æœªæ¥å›½å†…çš„Androidç”Ÿæ€å¯ä»¥æ›´åŠ ç»Ÿä¸€ï¼Œä¹Ÿå¸Œæœ›Googleä¹Ÿå¯¹æ­¤ç±»éœ€æ±‚æä¾›æ›´å¥½çš„æƒé™æ–¹æ¡ˆï¼Œèƒ½è®©å¼€å‘è€…å¯ä»¥ä¸å¿…ä¸ºæ­¤å¤´ç—›ã€‚</p>\n","categories":[],"tags":["Android"]},{"title":"Flash Boys è¯»ä¹¦ç¬”è®°","url":"https://lilei.pro/2019/10/11/flash-boys/","content":"<h2 id=\"å‰è¨€-èƒŒæ™¯ä¸åŠ¨æœº\"><a href=\"#å‰è¨€-èƒŒæ™¯ä¸åŠ¨æœº\" class=\"headerlink\" title=\"å‰è¨€-èƒŒæ™¯ä¸åŠ¨æœº\"></a>å‰è¨€-èƒŒæ™¯ä¸åŠ¨æœº</h2><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191011_flashboys/cover.jpg\" alt=\"cover\" title=\"\">\n                </div>\n                <div class=\"image-caption\">cover</div>\n            </figure>\n<p>Flash Boysï¼Œä¸­è¯‘ã€Šé«˜é¢‘äº¤æ˜“å‘˜ã€‹ï¼Œæ˜¯é‡‘èç•…é”€ä¹¦ä½œå®¶è¿ˆå…‹å°”åˆ˜æ˜“æ–¯ 2015 å¹´çš„ä½œå“ï¼Œä½œè€…ä¹‹å‰å‡ºç‰ˆè¿‡ã€Šå¤§ç©ºå¤´ã€‹ã€ã€Šè¯´è°è€…çš„æ‰‘å…‹ç‰Œã€‹ç­‰åå°”è¡—é¢†åŸŸçš„æµè¡Œä½œå“ã€‚åœ¨è¿™æœ¬ä¹¦ä¸­ï¼Œåˆ˜æ˜“æ–¯å€ŸåŠ©â€œèƒœå±±â€çš„è§’è‰²ï¼Œè®²è§£äº†ä¸€äº› HFT çš„åŸºç¡€çŸ¥è¯†ï¼Œå¯ä»¥ç»™æˆ‘ç­‰å°ç™½ç”¨æ¥å…¥é—¨ HFTã€‚</p>\n<p>ä¹¦çš„å‰ 2/3 å€¼å¾—ç»†è¯»ï¼Œå 1/3 åŸºæœ¬ä¸Šéƒ½æ˜¯ç»™ IEX åšå¹¿å‘Šï¼Œä¸€æ‰«è€Œè¿‡å³å¯ã€‚</p>\n<h2 id=\"å®šä¹‰ï¼šä½•ä¸º-HFTï¼ˆé«˜é¢‘äº¤æ˜“ï¼‰\"><a href=\"#å®šä¹‰ï¼šä½•ä¸º-HFTï¼ˆé«˜é¢‘äº¤æ˜“ï¼‰\" class=\"headerlink\" title=\"å®šä¹‰ï¼šä½•ä¸º HFTï¼ˆé«˜é¢‘äº¤æ˜“ï¼‰\"></a>å®šä¹‰ï¼šä½•ä¸º HFTï¼ˆé«˜é¢‘äº¤æ˜“ï¼‰</h2><p>çŸ­çº¿äº¤æ˜“æ˜¯ç»å…¸åŠ›å­¦ï¼Œç ”ç©¶å¯¹è±¡ä¸ºæ¯ä¸ªå‘¨æœŸçš„æˆäº¤ä»·æ ¼ï¼Œæœ€çŸ­ 6 ç§’ã€‚</p>\n<p>é«˜é¢‘äº¤æ˜“æ˜¯é‡å­åŠ›å­¦ï¼Œ6ç§’å†…å¯ä»¥å‘ç”Ÿä¸Šç™¾æ¬¡äº¤æ˜“ï¼Œæœ€ç»ˆæˆäº¤ä»·åªæ˜¯æœ€åä¸€ç¬”è®¢å•çš„ä»·æ ¼ã€‚</p>\n<p>äº¤æ˜“æ‰€ä¿ç•™æ•°æ®çš„é¢‘åº¦æ˜¯ç§’ï¼ŒäºŒå¸‚åœºä¸­é«˜é¢‘äº¤æ˜“ä¸»ä½“çš„æ•°æ®é¢‘åº¦æ˜¯çº³ç§’çº§ï¼Œ1ç§’=10äº¿çº³ç§’ã€‚</p>\n<p><strong>é«˜é¢‘äº¤æ˜“ï¼ˆHigh-Frequency Tradingï¼‰</strong>æ˜¯æŠ•èµ„é“¶è¡Œã€å¯¹å†²åŸºé‡‘å’Œä¸“ä¸šäº¤æ˜“å…¬å¸ç­‰åˆ©ç”¨é«˜é€Ÿè®¡ç®—æœºè¿›è¡Œç¨‹åºåŒ–è¯åˆ¸äº¤æ˜“çš„æŠ•èµ„ç­–ç•¥çš„æ€»ç§°ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ç­–ç•¥ï¼š</p>\n<ul>\n<li>æµåŠ¨æ€§å›æ‰£äº¤æ˜“ï¼ˆLiquidity Rebate Tradingï¼‰</li>\n<li>çŒç‰©ç®—æ³•äº¤æ˜“ï¼ˆPredatory Algorithmic Tradingï¼‰</li>\n<li>è‡ªåŠ¨åšå¸‚å•†äº¤æ˜“ï¼ˆAutomated Market Maker Trading, AMMsï¼‰</li>\n<li>é—ªç”µè®¢å•ï¼ˆFlash Orderï¼‰</li>\n<li>æš—æ± ï¼ˆDark Poolï¼‰</li>\n</ul>\n<h2 id=\"ç†è§£ï¼šé«˜é¢‘äº¤æ˜“ä½•ä»¥èµšé’±\"><a href=\"#ç†è§£ï¼šé«˜é¢‘äº¤æ˜“ä½•ä»¥èµšé’±\" class=\"headerlink\" title=\"ç†è§£ï¼šé«˜é¢‘äº¤æ˜“ä½•ä»¥èµšé’±\"></a>ç†è§£ï¼šé«˜é¢‘äº¤æ˜“ä½•ä»¥èµšé’±</h2><p>å‡è®¾æŸæ”¯è‚¡ç¥¨ä»·æ ¼åœ¨400~500å…ƒä¹‹é—´æ³¢åŠ¨ï¼Œè‚¡æ°‘è€ç‹ä¸‹äº†ä¸€ä¸ªå•ï¼šå½“è‚¡ç¥¨ä»·æ ¼ä½äº450å…ƒæ—¶ï¼Œä¹°å…¥100è‚¡ã€‚å½“è¿™ä¸ªè®¢å•åœ¨äº¤æ˜“æ‰€ä¹‹é—´ä¼ é€’æ—¶ï¼ˆç¾å›½æœ‰åå‡ å®¶äº¤æ˜“æ‰€ï¼Œçº½äº¤æ‰€ã€çº³æ–¯è¾¾å…‹æ˜¯å…¶ä¸­æœ€è€³ç†Ÿèƒ½è¯¦çš„ï¼‰ï¼Œéœ€è¦å‡ åæ¯«ç§’çš„å»¶è¿Ÿæ—¶é—´ï¼Œé«˜é¢‘äº¤æ˜“å‘˜å°±æ˜¯åœ¨è¿™å‡ åæ¯«ç§’é‡Œåšæ–‡ç« ã€‚</p>\n<p>å½“è‚¡æ°‘è€ç‹çš„è®¢å•ä»äº¤æ˜“æ‰€Aä¼ é€’ç»™äº¤æ˜“æ‰€Bæ—¶ï¼Œå€ŸåŠ©äºé«˜é€Ÿç½‘ç»œï¼Œé«˜é¢‘äº¤æ˜“å‘˜å…ˆäºäº¤æ˜“æ‰€Bå¾—åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œå³â€œæœ‰ä¸€ä¸ªè®¢å•æ˜¯å½“è‚¡ç¥¨ä»·æ ¼ä½äº450å…ƒæ—¶ä¹°100è‚¡â€ï¼Œæ­¤æ—¶å¦‚æœäº¤æ˜“æ‰€Bçš„è‚¡ç¥¨ä»·æ ¼ä½äº450ï¼Œæ¯”å¦‚è¯´æ˜¯440ï¼Œäº¤æ˜“å‘˜å°±ä¼šä¹°å…¥å®ƒï¼Œå†è½¬æ‰‹ä»¥450å…ƒçš„ä»·æ ¼å±¥è¡Œåˆšæ‰å¾—åˆ°çš„è®¢å•ã€‚åœ¨è¿™ç¬”äº¤æ˜“ä¸­ï¼Œé«˜é¢‘äº¤æ˜“å‘˜è·åˆ©1000å…ƒï¼Œè‚¡æ°‘è€ç‹ä¹Ÿä»¥é¢„æœŸçš„450å…ƒä»·æ ¼è´­å…¥äº†ç›®æ ‡è‚¡ç¥¨ã€‚</p>\n<blockquote>\n<p>2013å¹´å¹´åˆï¼Œæœ€å¤§çš„é«˜é¢‘äº¤æ˜“å…¬å¸ä¹‹ä¸€Virtu Financialå…¬å¼€ç§°ï¼Œåœ¨å…¶5å¹´åŠçš„äº¤æ˜“ä¸­å¿ƒä»…æœ‰ä¸€å¤©æ²¡æœ‰èµšåˆ°é’±ï¼Œé‚£ä¸€å¤©è¿˜æ˜¯å› ä¸ºå‡ºç°äº†â€œäººä¸ºè¯¯å·®â€ã€‚</p>\n</blockquote>\n<p>ä¸€ä¸ªé«˜é¢‘äº¤æ˜“å…¬å¸å¯ä»¥åœ¨å¸‚åœºä¸Šç–¯ç‹‚äº¤æ˜“è€Œä¸å¸¦æ¥ä»»ä½•é™„åŠ ä»·å€¼ï¼Œè€Œä¸”å¯ä»¥ä¸æ‰¿æ‹…ä»»ä½•é£é™©ï¼Œå½“å®ƒä¹°å…¥æ—¶ï¼Œå®ƒçŸ¥é“æœ‰ç¡®åˆ‡çš„å–å®¶ï¼Œå½“å®ƒå–å‡ºæ—¶ï¼Œå®ƒçŸ¥é“è‚¯å®šæœ‰äººä¹°ã€‚åœ¨æ¯ä¸ªäº¤æ˜“æ—¥ç»“æŸæ—¶ï¼Œå®ƒåœ¨ä»»ä½•å¸‚åœºéƒ½å®Œå…¨ä¸æŒæœ‰å¤´å¯¸ã€‚</p>\n<p>é«˜é¢‘äº¤æ˜“å…¬å¸æ¯å¤©é—­å¸‚æ—¶éƒ½æ˜¯å¹³ä»“çš„ï¼Œä»–ä»¬ä½œä¸ºä¹°å–åŒæ–¹æ¡¥æ¢çš„æ—¶é—´æçŸ­ï¼Œä»¥è‡³äºæ ¹æœ¬æ²¡æœ‰äººçŸ¥é“å…¶å­˜åœ¨ã€‚</p>\n<h2 id=\"é«˜é¢‘äº¤æ˜“çš„åˆ†ç±»\"><a href=\"#é«˜é¢‘äº¤æ˜“çš„åˆ†ç±»\" class=\"headerlink\" title=\"é«˜é¢‘äº¤æ˜“çš„åˆ†ç±»\"></a>é«˜é¢‘äº¤æ˜“çš„åˆ†ç±»</h2><h3 id=\"ç”µå­æŠ¢å…ˆäº¤æ˜“ï¼ˆelectronic-frontrunningï¼‰\"><a href=\"#ç”µå­æŠ¢å…ˆäº¤æ˜“ï¼ˆelectronic-frontrunningï¼‰\" class=\"headerlink\" title=\"ç”µå­æŠ¢å…ˆäº¤æ˜“ï¼ˆelectronic frontrunningï¼‰\"></a>ç”µå­æŠ¢å…ˆäº¤æ˜“ï¼ˆelectronic frontrunningï¼‰</h3><p>åœ¨ä¸€ä¸ªåœ°æ–¹æ¢çŸ¥æŠ•èµ„è€…çš„äº¤æ˜“ä¿¡æ¯åï¼Œåœ¨å¦ä¸€ä¸ªåœ°æ–¹æŠ¢åœ¨æŠ•èµ„è€…ä¹‹å‰é€šè¿‡ä¸€ç³»åˆ—è®¢å•æ¨é«˜æˆ–æ‹‰ä½ä»·æ ¼ï¼Œå¹¶ä»ä¸­è·åˆ©</p>\n<h3 id=\"å›æ‰£å¥—åˆ©ï¼ˆrebate-arbitrageï¼‰\"><a href=\"#å›æ‰£å¥—åˆ©ï¼ˆrebate-arbitrageï¼‰\" class=\"headerlink\" title=\"å›æ‰£å¥—åˆ©ï¼ˆrebate arbitrageï¼‰\"></a>å›æ‰£å¥—åˆ©ï¼ˆrebate arbitrageï¼‰</h3><p>äº¤æ˜“æ‰€é€šå¸¸ä¼šä¸ºåˆ›é€ æµåŠ¨æ€§çš„åˆ¸å•†æä¾›ä¸€å®šçš„äº¤æ˜“è´¹ç”¨å›æ‰£ï¼Œé«˜é¢‘äº¤æ˜“è€…åˆ©ç”¨é€Ÿåº¦ä¼˜åŠ¿åˆ›é€ è™šå‡æµåŠ¨æ€§ï¼Œéª—å–äº¤æ˜“æ‰€çš„å›æ‰£</p>\n<h3 id=\"æ…¢å¸‚åœºå¥—åˆ©ï¼ˆslow-market-arbitrageï¼‰\"><a href=\"#æ…¢å¸‚åœºå¥—åˆ©ï¼ˆslow-market-arbitrageï¼‰\" class=\"headerlink\" title=\"æ…¢å¸‚åœºå¥—åˆ©ï¼ˆslow market arbitrageï¼‰\"></a>æ…¢å¸‚åœºå¥—åˆ©ï¼ˆslow market arbitrageï¼‰</h3><p>é«˜é¢‘äº¤æ˜“è€…åœ¨ä¸€ä¸ªäº¤æ˜“æ‰€æ¢çŸ¥åˆ°è‚¡ç¥¨ä»·æ ¼å˜åŠ¨ä¹‹åï¼Œå†åˆ©ç”¨é€Ÿåº¦ä¼˜åŠ¿åœ¨å¦ä¸€ä¸ªäº¤æ˜“æ‰€ååº”è¿‡æ¥ä¹‹å‰è¿›è¡Œä¹°å–æ“ä½œã€‚è¿™å¯èƒ½æ˜¯ä½¿ç”¨æœ€å¹¿çš„</p>\n<h2 id=\"ç–‘é—®ï¼šèµ¢å®¶æ‹¿èµ°ä¸€åˆ‡\"><a href=\"#ç–‘é—®ï¼šèµ¢å®¶æ‹¿èµ°ä¸€åˆ‡\" class=\"headerlink\" title=\"ç–‘é—®ï¼šèµ¢å®¶æ‹¿èµ°ä¸€åˆ‡\"></a>ç–‘é—®ï¼šèµ¢å®¶æ‹¿èµ°ä¸€åˆ‡</h2><p>åœ¨é«˜é¢‘äº¤æ˜“çš„æˆ˜åœºä¸Šï¼Œæ˜¯å¦æ„å‘³ç€â€œèµ¢å®¶æ‹¿èµ°ä¸€åˆ‡â€ï¼Ÿå¦‚æœç”²çš„ç®—æ³•/çº¿è·¯æ¯”ä¹™å¿«10%ï¼Œæœ€ç»ˆç”²ä¼šè·å–æ‰€æœ‰çš„è®¢å•å¹¶å®Œæˆäº¤æ˜“ï¼Œä¹™ä¸€åˆ†é’±éƒ½æ‹¿ä¸åˆ°ï¼Ÿ</p>\n","categories":[],"tags":["é«˜é¢‘äº¤æ˜“"]},{"title":"æ¶æ„å­¦ä¹ ä¹‹ master-v2","url":"https://lilei.pro/2019/10/11/architecture-master-v2/","content":"<blockquote>\n<p>Move stones, not mountains.</p>\n</blockquote>\n<p>Google å®˜æ–¹çš„ <a href=\"https://github.com/googlesamples/android-architecture\" target=\"_blank\" rel=\"noopener\">Android Architecture Blueprints</a> æ¨å‡ºäº† v2 ç‰ˆæœ¬ï¼Œç›¸æ¯”äºä¹‹å‰çš„ v1 ç‰ˆæœ¬ï¼Œv2 é‡‡å–äº†æ›´å…ˆè¿›çš„è®¾è®¡æ€æƒ³ä¸ç»„ä»¶ï¼š</p>\n<ul>\n<li>é‡‡ç”¨ Kotlin Coroutines å¤„ç†åå°æ“ä½œ</li>\n<li>å•ä¸€ Activity ç»“æ„ï¼Œç”¨ <a href=\"https://developer.android.com/guide/navigation/navigation-getting-started\" target=\"_blank\" rel=\"noopener\">Navigation component</a> å¤„ç†Fragment ä¹‹é—´è·³è½¬</li>\n<li>ç”± Fragment(View) å’Œ ViewModel ç»„æˆçš„ Presentation å±‚ï¼Œå³ <strong>MVVM</strong> æ¨¡å¼</li>\n<li>åŸºäº LiveData å’Œ DataBinding çš„å“åº”å¼ï¼ˆReactiveï¼‰UI</li>\n<li>data å±‚ä½¿ç”¨ä¸€ä¸ª Repository å’Œä¸¤ä¸ª Datasourceï¼ˆæœ¬åœ°æ•°æ®ã€è¿œç«¯æ•°æ®ï¼‰ï¼Œé‡‡ç”¨ç›´è§‚çš„è°ƒç”¨æ–¹å¼ï¼ˆéå›è°ƒã€é data streamï¼‰</li>\n<li>ä¸¤ä¸ª product flavorï¼Œåˆ†åˆ«æ˜¯<code>mock</code>å’Œ<code>prod</code>ï¼Œå¯¹åº”ç€æµ‹è¯•ä¸å¼€å‘ç¯å¢ƒ</li>\n<li>ä¸€ç³»åˆ—å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ä»¥åŠç«¯åˆ°ç«¯æµ‹è¯•</li>\n</ul>\n<p>æ¥ä¸‹æ¥ä»æºç è§’åº¦è§£æ master åˆ†æ”¯å·¥ç¨‹ï¼Œçœ‹çœ‹ v2 ç©¶ç«Ÿå¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆä¾¿åˆ©ã€‚</p>\n<hr>\n<h2 id=\"ç¨‹åºå…¥å£\"><a href=\"#ç¨‹åºå…¥å£\" class=\"headerlink\" title=\"ç¨‹åºå…¥å£\"></a>ç¨‹åºå…¥å£</h2><p>å…¥å£åœ¨<code>TasksActivity.java</code>ï¼Œæ³¨æ„åˆ°è¿™æ˜¯ä¸€ä¸ªâ€œSPAâ€ï¼Œå³ Single Page Applicationï¼Œåœ¨<code>AndroidManifest.xml</code>ä¸­åªå£°æ˜äº†è¿™ä¸€ä¸ª Activityã€‚<code>TasksActivity</code>å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªå£³é¡µé¢ï¼Œåªå¤„ç†äº† Navigationã€ActionBarã€NavigationDrawer ç­‰åŸºç¡€åŠŸèƒ½ã€‚å®ƒåœ¨<code>onCreate</code>é‡Œè¿›è¡Œè¿™äº›åˆå§‹åŒ–ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> drawerLayout: DrawerLayout</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">lateinit</span> <span class=\"keyword\">var</span> appBarConfiguration: AppBarConfiguration</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreate</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.onCreate(savedInstanceState)</span><br><span class=\"line\">    setContentView(R.layout.tasks_act)</span><br><span class=\"line\">    setupNavigationDrawer()</span><br><span class=\"line\">    setSupportActionBar(findViewById(R.id.toolbar))</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">val</span> navController: NavController = findNavController(R.id.nav_host_fragment)</span><br><span class=\"line\">    appBarConfiguration =</span><br><span class=\"line\">        AppBarConfiguration.Builder(R.id.tasks_fragment_dest, R.id.statistics_fragment_dest)</span><br><span class=\"line\">            .setDrawerLayout(drawerLayout)</span><br><span class=\"line\">            .build()</span><br><span class=\"line\">    setupActionBarWithNavController(navController, appBarConfiguration)</span><br><span class=\"line\">    findViewById&lt;NavigationView&gt;(R.id.nav_view)</span><br><span class=\"line\">        .setupWithNavController(navController)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¯¥åº”ç”¨é‡‡ç”¨ Navigation component ç®¡ç†é¡µé¢è·³è½¬ï¼Œè·³è½¬å…³ç³»åœ¨<code>nav_graph.xml</code>æ–‡ä»¶ä¸­ä»¥å¯è§†åŒ–çš„æ–¹å¼å‘ˆç°ã€‚æˆ‘ä»¬è¿™é‡Œä¸éœ€è¦å…³å¿ƒè·³è½¬ç»„ä»¶çš„å…·ä½“ç”¨æ³•ï¼Œ åªè¦çŸ¥é“å®ƒå¯ä»¥å¯åŠ¨æˆ‘ä»¬è¦åˆ†æçš„<code>TasksFragment</code>å°±å¯ä»¥äº†ã€‚</p>\n<h2 id=\"æ•°æ®\"><a href=\"#æ•°æ®\" class=\"headerlink\" title=\"æ•°æ®\"></a>æ•°æ®</h2><p>æˆ‘ä¹ æƒ¯ä»æ•°æ®å¼€å§‹åˆ†æä»£ç èµ°å‘ï¼Œçœ‹ä¸€ä¸‹<code>data</code>ç›®å½•çš„ç»“æ„ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Î» tree data</span><br><span class=\"line\">data</span><br><span class=\"line\">|-- Result.kt</span><br><span class=\"line\">|-- Task.kt</span><br><span class=\"line\">`-- <span class=\"built_in\">source</span></span><br><span class=\"line\">    |-- DefaultTasksRepository.kt</span><br><span class=\"line\">    |-- TasksDataSource.kt</span><br><span class=\"line\">    |-- TasksRepository.kt</span><br><span class=\"line\">    `-- <span class=\"built_in\">local</span></span><br><span class=\"line\">        |-- TasksDao.kt</span><br><span class=\"line\">        |-- TasksLocalDataSource.kt</span><br><span class=\"line\">        `-- ToDoDatabase.kt</span><br></pre></td></tr></table></figure>\n<h3 id=\"Result-kt-ä¸-Task-kt\"><a href=\"#Result-kt-ä¸-Task-kt\" class=\"headerlink\" title=\"Result.kt ä¸ Task.kt\"></a>Result.kt ä¸ Task.kt</h3><p><code>Result.kt</code>æ˜¯ä¸€ä¸ªæ•°æ®è¯·æ±‚çš„ç»“æœå°è£…ç±»ï¼Œä¸šåŠ¡å±‚å¯¹æ•°æ®çš„è¯·æ±‚å‡æ˜¯é€šè¿‡ Result å¯¹è±¡è¿›è¡Œå°è£…ã€‚è¿™ä¸ªç±»ä½¿ç”¨åˆ°äº†å¤šä¸ª Kotlin ç‰¹æ€§ï¼Œå®¹æˆ‘åœ¨æ³¨é‡Šé‡Œä¸€ä¸€è¯´æ˜ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">sealed</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Result</span>&lt;<span class=\"type\">out R</span>&gt; </span>&#123; <span class=\"comment\">// å¯†å°ç±»ï¼Œå°†ç»§æ‰¿é™åˆ¶åœ¨ç±»å†…éƒ¨ï¼›out ç±»å‹ï¼Œåå˜ï¼Œä¿ç•™å­ç±»å‹åŒ–å…³ç³»</span></span><br><span class=\"line\">    <span class=\"keyword\">data</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Success</span>&lt;<span class=\"type\">out T</span>&gt;</span>(<span class=\"keyword\">val</span> <span class=\"keyword\">data</span>: T) : Result&lt;T&gt;() <span class=\"comment\">// data ç±»ï¼Œåå˜ç±»å‹Tå¯ä»¥ç”¨ä½œæ„é€ å‚æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">data</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Error</span></span>(<span class=\"keyword\">val</span> exception: Exception) : Result&lt;<span class=\"built_in\">Nothing</span>&gt;() <span class=\"comment\">// Nothingç±»å‹ï¼Œæ°¸ä¸è¿”å›</span></span><br><span class=\"line\">    <span class=\"keyword\">object</span> Loading : Result&lt;<span class=\"built_in\">Nothing</span>&gt;() <span class=\"comment\">// objectç›´æ¥åˆ›å»ºå¯¹è±¡</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">toString</span><span class=\"params\">()</span></span>: String &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">when</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">is</span> Success&lt;*&gt; -&gt; <span class=\"string\">\"Success[data=<span class=\"variable\">$data</span>]\"</span> <span class=\"comment\">// *è¡¨ç¤ºä¸å…³å¿ƒå…·ä½“ç±»å‹</span></span><br><span class=\"line\">            <span class=\"keyword\">is</span> Error -&gt; <span class=\"string\">\"Error[exception=<span class=\"variable\">$exception</span>]\"</span></span><br><span class=\"line\">            Loading -&gt; <span class=\"string\">\"Loading\"</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * `true` if [Result] is of type [Success] &amp; holds non-null [Success.data].</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> Result&lt;*&gt;.succeeded <span class=\"comment\">// æ‰©å±•å±æ€§ï¼Œæ³¨æ„å‘½åä¸æ˜¯isSuccessï¼ˆChinglishï¼‰</span></span><br><span class=\"line\">  <span class=\"keyword\">get</span>() = <span class=\"keyword\">this</span> <span class=\"keyword\">is</span> Success &amp;&amp; <span class=\"keyword\">data</span> != <span class=\"literal\">null</span></span><br></pre></td></tr></table></figure>\n<p><code>Task.kt</code>æè¿°äº†ä»»åŠ¡å¯¹è±¡ï¼Œç”±<code>title</code>ã€<code>description</code>ã€<code>completed</code>å’Œ<code>id</code>å››ä¸ªå­—æ®µæ„æˆï¼ŒåŒæ—¶å€ŸåŠ© Room ç»„ä»¶è‡ªåŠ¨å…³è”åˆ°åä¸º<strong>tasks</strong>çš„æ•°æ®è¡¨ã€‚</p>\n<h3 id=\"æ•°æ®æ¥å£ï¼šTasksDataSource-kt-ä¸-TasksRepository-kt\"><a href=\"#æ•°æ®æ¥å£ï¼šTasksDataSource-kt-ä¸-TasksRepository-kt\" class=\"headerlink\" title=\"æ•°æ®æ¥å£ï¼šTasksDataSource.kt ä¸ TasksRepository.kt\"></a>æ•°æ®æ¥å£ï¼šTasksDataSource.kt ä¸ TasksRepository.kt</h3><p><code>TasksDataSource.kt</code>å’Œ<code>TasksRepository.kt</code>æ˜¯ä¸¤ä¸ªæ¥å£ç±»ï¼Œå†…å®¹ååˆ†ç›¸ä¼¼ï¼š</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TasksDataSource.kt</span></span><br><span class=\"line\"><span class=\"comment\">// Main entry point for accessing tasks data.</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">TasksDataSource</span> </span>&#123;</span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getTasks</span><span class=\"params\">()</span></span>: Result&lt;List&lt;Task&gt;&gt;</span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>)</span></span>: Result&lt;Task&gt;</span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">saveTask</span><span class=\"params\">(task: <span class=\"type\">Task</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">completeTask</span><span class=\"params\">(task: <span class=\"type\">Task</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">completeTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">activateTask</span><span class=\"params\">(task: <span class=\"type\">Task</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">activateTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">clearCompletedTasks</span><span class=\"params\">()</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">deleteAllTasks</span><span class=\"params\">()</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">deleteTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>)</span></span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// TasksRepository.kt</span></span><br><span class=\"line\"><span class=\"comment\">// Interface to the data layer.</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">TasksRepository</span> </span>&#123;</span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getTasks</span><span class=\"params\">(forceUpdate: <span class=\"type\">Boolean</span> = <span class=\"literal\">false</span>)</span></span>: Result&lt;List&lt;Task&gt;&gt;</span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">getTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>, forceUpdate: <span class=\"type\">Boolean</span> = <span class=\"literal\">false</span>)</span></span>: Result&lt;Task&gt;</span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">saveTask</span><span class=\"params\">(task: <span class=\"type\">Task</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">completeTask</span><span class=\"params\">(task: <span class=\"type\">Task</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">completeTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">activateTask</span><span class=\"params\">(task: <span class=\"type\">Task</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">activateTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>)</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">clearCompletedTasks</span><span class=\"params\">()</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">deleteAllTasks</span><span class=\"params\">()</span></span></span><br><span class=\"line\">    suspend <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">deleteTask</span><span class=\"params\">(taskId: <span class=\"type\">String</span>)</span></span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°ä¸¤è€…çš„æ–¹æ³•å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼šåå­—å’Œæ•°é‡ç›¸åŒï¼ŒåŒºåˆ«ä»…ä»…åœ¨äº<code>TasksRepository</code>ä¸­çš„ä¸ªåˆ«æ–¹æ³•å¤šäº†<code>forceUpdate</code>å‚æ•°ã€‚ä¸è¿‡ï¼Œè¿™ä¸¤ä¸ªæ¥å£åœ¨è¯­ä¹‰ä¸Šæ˜¯ä¸åŒçš„ã€‚</p>\n<ul>\n<li><code>TasksDatasource</code>æ˜¯åº•å±‚æ•°æ®å°è£…ï¼Œæ•°æ®å¯èƒ½æ¥è‡ªç½‘ç»œï¼Œä¹Ÿå¯èƒ½æ¥è‡ªäºæ–‡ä»¶ã€æ•°æ®åº“ã€‚</li>\n<li><code>TasksRepository</code>æ˜¯æ•°æ®å±‚å¯¹å¤–çš„æ¥å£ï¼Œä¸šåŠ¡ä»£ç é€šè¿‡è¯¥æ¥å£å¯¹æ•°æ®è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚<code>forceUpdate</code>å‚æ•°ä½œç”¨äºæ¥å£å®ç°ç±»å†…éƒ¨çš„ç¼“å­˜ã€‚</li>\n<li><code>suspend</code>å…³é”®å­—è¯´æ˜å®ƒä»¬å‡ä¸º Coroutines æ¥å£ã€‚</li>\n</ul>\n<p>ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹å¯¹å¤–çš„æ¥å£æ˜¯å¦‚ä½•ç»™åˆ°ä½¿ç”¨è€…çš„ã€‚<code>TodoApplication</code>ç±»ç»§æ‰¿è‡ª<code>Application</code>ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡<code>taskRepository</code>ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TodoApplication.kt</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> taskRepository: TasksRepository</span><br><span class=\"line\">    <span class=\"keyword\">get</span>() = ServiceLocator.provideTasksRepository(<span class=\"keyword\">this</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">// ServiceLocator.kt</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">provideTasksRepository</span><span class=\"params\">(context: <span class=\"type\">Context</span>)</span></span>: TasksRepository &#123;</span><br><span class=\"line\">    synchronized(<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> tasksRepository ?: tasksRepository ?: createTasksRepository(context)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">createTasksRepository</span><span class=\"params\">(context: <span class=\"type\">Context</span>)</span></span>: TasksRepository &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> DefaultTasksRepository(FakeTasksRemoteDataSource, createTaskLocalDataSource(context))</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">// TodoApplication.taskRepository é€šè¿‡ Fragment çš„æ‰©å±•æ–¹æ³•ç»™åˆ°å„ä¸ª Fragment</span></span><br><span class=\"line\"><span class=\"comment\">// FragmentExt.kt</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> Fragment.<span class=\"title\">getViewModelFactory</span><span class=\"params\">()</span></span>: ViewModelFactory &#123;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> repository = (requireContext().applicationContext <span class=\"keyword\">as</span> TodoApplication).taskRepository</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ViewModelFactory(repository)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"local-ç›®å½•ï¼šæœ¬åœ°æ•°æ®å®ç°\"><a href=\"#local-ç›®å½•ï¼šæœ¬åœ°æ•°æ®å®ç°\" class=\"headerlink\" title=\"local ç›®å½•ï¼šæœ¬åœ°æ•°æ®å®ç°\"></a>local ç›®å½•ï¼šæœ¬åœ°æ•°æ®å®ç°</h3><p>local ç›®å½•ä¸‹æ˜¯<code>TasksDatasource</code>çš„æœ¬åœ°å®ç°ï¼Œä¸æ­¤ç›¸å¯¹çš„ï¼Œè‹¥æ•°æ®æ¥æºäºç½‘ç»œï¼Œåˆ™è¿˜åº”å½“æœ‰ä¸€ä¸ª remote ç›®å½•ã€‚</p>\n<ul>\n<li><code>ToDoDatabase</code> æ˜¯æ•°æ®åº“å£°æ˜</li>\n<li><code>TasksDao</code> å£°æ˜ tasks è¡¨çš„ CRUD æ“ä½œ</li>\n<li><code>TasksLocalDataSource</code> æ˜¯<code>TasksDataSource</code>çš„æœ¬åœ°å®ç°ï¼Œä½¿ç”¨<code>Dispatchers.IO</code>ä½œä¸ºåç¨‹ä¸Šä¸‹æ–‡ï¼Œè°ƒç”¨<code>TasksDao</code>å®Œæˆæ•°æ®æ“ä½œ</li>\n</ul>\n<h3 id=\"æ•°æ®å±‚æ€»ç»“\"><a href=\"#æ•°æ®å±‚æ€»ç»“\" class=\"headerlink\" title=\"æ•°æ®å±‚æ€»ç»“\"></a>æ•°æ®å±‚æ€»ç»“</h3><p>ç›¸æ¯”äºæ›¾ç»åˆ†æè¿‡çš„<strong>todo-mvp</strong>å’Œ<strong>todo-mvp-clean</strong>ï¼Œæœ€ç›´è§‚çš„æ„Ÿå—æ˜¯ï¼Œv2åœ¨ä¿è¯æ•°æ®æ¥å£è¯­ä¹‰ä¸å˜çš„å‰æä¸‹ï¼Œå€ŸåŠ© Coroutines ç®€åŒ–äº†åŸæœ‰çš„å›è°ƒå†™æ³•ï¼Œç”¨åŒæ­¥çš„æ–¹å¼å†™å¼‚æ­¥çš„ä»£ç ã€‚æ­¤å¤–ï¼Œåƒä½¿ç”¨ Room åš ORMã€local/remote ä¸¤å¥—æ•°æ®å®ç°ç­‰ï¼Œä¸ä¹‹å‰çš„é¡¹ç›®å¹¶æ— ä¸åŒã€‚</p>\n<hr>\n<h2 id=\"ViewModel\"><a href=\"#ViewModel\" class=\"headerlink\" title=\"ViewModel\"></a>ViewModel</h2><h3 id=\"èƒŒæ™¯çŸ¥è¯†ï¼šViewModel-ä¸-LiveData\"><a href=\"#èƒŒæ™¯çŸ¥è¯†ï¼šViewModel-ä¸-LiveData\" class=\"headerlink\" title=\"èƒŒæ™¯çŸ¥è¯†ï¼šViewModel ä¸ LiveData\"></a>èƒŒæ™¯çŸ¥è¯†ï¼šViewModel ä¸ LiveData</h3><p>ViewModel ä¸ LiveData éƒ½æ˜¯ Android Jetpack ä¸­çš„æ¶æ„ç»„ä»¶ï¼Œå®ƒä»¬é€šå¸¸ç»„åˆä½¿ç”¨ï¼Œè¾¾åˆ°å°†æ•°æ®å’Œè§†å›¾è§£è€¦çš„ç›®çš„ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191011_architecture_master_v2/jetpack.png\" alt=\"jetpack\" title=\"\">\n                </div>\n                <div class=\"image-caption\">jetpack</div>\n            </figure>\n<p><strong>ViewModel</strong></p>\n<ul>\n<li>é¿å…å±å¹•æ—‹è½¬ç­‰äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œä¿å­˜åœ¨ Activity ä¸­çš„æ•°æ®è¢«é”€æ¯å¹¶é‡å»º</li>\n<li>å¼‚æ­¥å›è°ƒæ—¶é˜²æ­¢å†…å­˜æ³„æ¼ã€Context ä¸º Null</li>\n<li>å°†æ•°æ®å’Œè§†å›¾è§£è€¦ï¼Œé˜²æ­¢å‡ºç° God Activities å’Œ God Fragments</li>\n</ul>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/191011_architecture_master_v2/viewmodel.png\" alt=\"viewmodel\" title=\"\">\n                </div>\n                <div class=\"image-caption\">viewmodel</div>\n            </figure>\n<p><strong>LiveData</strong></p>\n<ul>\n<li>DataBinding æ€æƒ³çš„ä¸€ç§å®ç°ï¼Œæ•°æ®/è§†å›¾åŒå‘ç»‘å®š</li>\n<li>ä¸ç”Ÿå‘½å‘¨æœŸå…³è”ï¼Œé¡µé¢é”€æ¯åè‡ªåŠ¨å°†å…¶ä»è®¢é˜…è€…åˆ—è¡¨å»é™¤</li>\n</ul>\n<h3 id=\"ViewModelFactory\"><a href=\"#ViewModelFactory\" class=\"headerlink\" title=\"ViewModelFactory\"></a>ViewModelFactory</h3><p>ViewModel çš„åˆ›å»ºé‡‡ç”¨å·¥å‚æ¨¡å¼è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ViewModelFactory.kt</span></span><br><span class=\"line\"><span class=\"meta\">@Suppress(<span class=\"meta-string\">\"UNCHECKED_CAST\"</span>)</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewModelFactory</span> <span class=\"keyword\">constructor</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> tasksRepository: TasksRepository</span><br><span class=\"line\">) : ViewModelProvider.NewInstanceFactory() &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"type\">&lt;T : ViewModel&gt;</span> <span class=\"title\">create</span><span class=\"params\">(modelClass: <span class=\"type\">Class</span>&lt;<span class=\"type\">T</span>&gt;)</span></span> =</span><br><span class=\"line\">        with(modelClass) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">when</span> &#123;</span><br><span class=\"line\">                isAssignableFrom(StatisticsViewModel::<span class=\"class\"><span class=\"keyword\">class</span>.<span class=\"title\">java</span>) -&gt;</span></span><br><span class=\"line\">                    StatisticsViewModel(tasksRepository)</span><br><span class=\"line\">                isAssignableFrom(TaskDetailViewModel::<span class=\"class\"><span class=\"keyword\">class</span>.<span class=\"title\">java</span>) -&gt;</span></span><br><span class=\"line\">                    TaskDetailViewModel(tasksRepository)</span><br><span class=\"line\">                isAssignableFrom(AddEditTaskViewModel::<span class=\"class\"><span class=\"keyword\">class</span>.<span class=\"title\">java</span>) -&gt;</span></span><br><span class=\"line\">                    AddEditTaskViewModel(tasksRepository)</span><br><span class=\"line\">                isAssignableFrom(TasksViewModel::<span class=\"class\"><span class=\"keyword\">class</span>.<span class=\"title\">java</span>) -&gt;</span></span><br><span class=\"line\">                    TasksViewModel(tasksRepository)</span><br><span class=\"line\">                <span class=\"keyword\">else</span> -&gt;</span><br><span class=\"line\">                    <span class=\"keyword\">throw</span> IllegalArgumentException(<span class=\"string\">\"Unknown ViewModel class: <span class=\"subst\">$&#123;modelClass.name&#125;</span>\"</span>)</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">as</span> T</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿˜è®°å¾—ä¸Šæ–‡æåˆ°è¿‡ä¸º Fragment å¢åŠ çš„æ‰©å±•å‡½æ•°å—ï¼Ÿåœ¨æ¯ä¸€ä¸ªé¡µé¢ï¼ˆFragmentï¼‰é‡Œé€šè¿‡è¿™ä¸ªæ‰©å±•å‡½æ•°è·å–åˆ°å·¥å‚ç±»ï¼Œè¿›è€Œè·å¾—å¯¹åº” ViewModel ç±»çš„å®ä¾‹ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// FragmentExt.kt</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">fun</span> Fragment.<span class=\"title\">getViewModelFactory</span><span class=\"params\">()</span></span>: ViewModelFactory &#123;</span><br><span class=\"line\">  <span class=\"keyword\">val</span> repository = (requireContext().applicationContext <span class=\"keyword\">as</span> TodoApplication).taskRepository</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ViewModelFactory(repository)</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// TasksFragment.kt</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TasksFragment</span> : <span class=\"type\">Fragment</span></span>() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> viewModel <span class=\"keyword\">by</span> viewModels&lt;TasksViewModel&gt; &#123; getViewModelFactory() &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥æ˜¯ ViewModel ç±»ï¼Œå®ƒæ‰¿æ‹…äº†ä¸ Presenter ç±»ä¼¼çš„èŒè´£ï¼Œæ˜¯å¤„ç†ä¸šåŠ¡é€»è¾‘çš„åœ°æ–¹ã€‚å¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ª Domain å±‚ï¼Œè´Ÿè´£æå–å‡ºæ¥çš„ä¸šåŠ¡é€»è¾‘ï¼ˆUse casesï¼‰ï¼Œæä¾›å¤ç”¨ï¼Œè¿™æ ·å°±å˜æˆäº† <a href=\"https://github.com/googlesamples/android-architecture/tree/usecases\" target=\"_blank\" rel=\"noopener\">MVVM-Clean</a> æ¨¡å¼ã€‚åœ¨ master åˆ†æ”¯ä¸Šè¿˜æ²¡æœ‰ domain å±‚ã€‚</p>\n<h3 id=\"TasksViewModel\"><a href=\"#TasksViewModel\" class=\"headerlink\" title=\"TasksViewModel\"></a>TasksViewModel</h3><p>ViewModel æ¥å—ä¸€ä¸ª TasksRepository å‚æ•°ï¼Œç”¨ä½œæ•°æ®å±‚æ¥å£ã€‚ï¼ˆåœ¨cleanæ¶æ„é‡Œï¼Œè¿™é‡Œä¼ å…¥çš„ä¸æ˜¯Repositoryï¼Œè€Œæ˜¯UseCasesï¼‰ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TasksViewModel</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> tasksRepository: TasksRepository</span><br><span class=\"line\">) : ViewModel() &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>éšåå£°æ˜äº†ä¸€ç³»åˆ—å˜é‡ä½œä¸ºé¡µé¢æ•°æ®&amp;çŠ¶æ€ï¼Œè¿™é‡Œé‡‡ç”¨â€œä¸€ä¸ªå¯¹è±¡ï¼Œä¸¤ä¸ªå˜é‡â€çš„æˆå¯¹å†™æ³•ï¼Œç•¥æ˜¾ç¹çï¼Œä¸çŸ¥é“æœ‰æ²¡æœ‰æ›´ä¼˜ç¾çš„å¤„ç†æ–¹æ³•ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯æŠŠå¯¹å˜é‡çš„ä¿®æ”¹å…³é—­ï¼Œå¯¹å¤–ï¼ˆå³LiveDataï¼‰ä»…æä¾›è¯»å–å˜é‡çš„æ¥å£ï¼Œåªå¯ä»¥åœ¨ ViewModel å†…éƒ¨ä¿®æ”¹å˜é‡ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _items = MutableLiveData&lt;List&lt;Task&gt;&gt;().apply &#123; value = emptyList() &#125; <span class=\"comment\">// ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„ä¸ºç§æœ‰å˜é‡ï¼Œapply å’Œ with çš„ç”¨æ³•è¦åˆ†æ¸…ï¼Œç›¸å½“äºè°ƒç”¨ _items.setValue(emptyList()); return _items;</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> items: LiveData&lt;List&lt;Task&gt;&gt; = _items</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _dataLoading = MutableLiveData&lt;<span class=\"built_in\">Boolean</span>&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> dataLoading: LiveData&lt;<span class=\"built_in\">Boolean</span>&gt; = _dataLoading</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _currentFilteringLabel = MutableLiveData&lt;<span class=\"built_in\">Int</span>&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> currentFilteringLabel: LiveData&lt;<span class=\"built_in\">Int</span>&gt; = _currentFilteringLabel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _noTasksLabel = MutableLiveData&lt;<span class=\"built_in\">Int</span>&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> noTasksLabel: LiveData&lt;<span class=\"built_in\">Int</span>&gt; = _noTasksLabel</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _noTaskIconRes = MutableLiveData&lt;<span class=\"built_in\">Int</span>&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> noTaskIconRes: LiveData&lt;<span class=\"built_in\">Int</span>&gt; = _noTaskIconRes</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _tasksAddViewVisible = MutableLiveData&lt;<span class=\"built_in\">Boolean</span>&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> tasksAddViewVisible: LiveData&lt;<span class=\"built_in\">Boolean</span>&gt; = _tasksAddViewVisible</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _snackbarText = MutableLiveData&lt;Event&lt;<span class=\"built_in\">Int</span>&gt;&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> snackbarText: LiveData&lt;Event&lt;<span class=\"built_in\">Int</span>&gt;&gt; = _snackbarText</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">var</span> _currentFiltering = TasksFilterType.ALL_TASKS   <span class=\"comment\">// Not used at the moment private val isDataLoadingError = MutableLiveData&lt;Boolean&gt;()</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _openTaskEvent = MutableLiveData&lt;Event&lt;String&gt;&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> openTaskEvent: LiveData&lt;Event&lt;String&gt;&gt; = _openTaskEvent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">val</span> _newTaskEvent = MutableLiveData&lt;Event&lt;<span class=\"built_in\">Unit</span>&gt;&gt;()</span><br><span class=\"line\"><span class=\"keyword\">val</span> newTaskEvent: LiveData&lt;Event&lt;<span class=\"built_in\">Unit</span>&gt;&gt; = _newTaskEvent</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// This LiveData depends on another so we can use a transformation.</span></span><br><span class=\"line\"><span class=\"keyword\">val</span> empty: LiveData&lt;<span class=\"built_in\">Boolean</span>&gt; = Transformations.map(_items) &#123;</span><br><span class=\"line\"> it.isEmpty()</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥è¯´ç®¡ç†ä¸Šé¢è¿™äº›æ•°æ®æ˜¯ ViewModel æœ€ä¸»è¦çš„èŒè´£äº†ï¼Œä»åŠŸèƒ½ä¸ŠåŒºåˆ†ï¼Œè¿™äº›æ•°æ®å¯ä»¥åˆ†æˆ<strong>3ç§</strong>ã€‚</p>\n<ol>\n<li>ä¸šåŠ¡å®ä½“å¦‚ itemsï¼ˆä»»åŠ¡å¯¹è±¡åˆ—è¡¨ï¼‰ï¼ŒViewModel é€šè¿‡ä¿®æ”¹è¿™ç±»å¯¹è±¡ï¼Œå€ŸåŠ©äº DataBinding æ›´æ–° UI</li>\n<li>æ•°æ®çŠ¶æ€å¯¹è±¡å¦‚ dataLoadingï¼ˆæ˜¯å¦æ­£åœ¨åŠ è½½æ•°æ®ï¼‰ã€currentFilteringLabelï¼ˆå½“å‰çš„è¿‡æ»¤å™¨æ–‡å­—ï¼‰ã€noTasksLabelï¼ˆæ²¡æœ‰ä»»åŠ¡çš„æ–‡å­—ï¼‰ã€snackbarTextï¼ˆæç¤ºæ æ–‡å­—ï¼‰ï¼Œè¿™ä¸€ç±»å¯¹è±¡ä¸è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ï¼Œä½†æ˜¯ä¹Ÿä¼šå½±å“åˆ° UI æ˜¾ç¤º</li>\n<li>äº‹ä»¶åŒ…è£…å¯¹è±¡å¦‚ openTaskEventï¼ˆæ‰“å¼€æŸä¸ªä»»åŠ¡ï¼Œåœ¨ç‚¹å‡»åˆ—è¡¨ä¸­çš„ä»»åŠ¡æ—¶è§¦å‘ï¼‰ã€newTaskEventï¼ˆåˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œåœ¨ç‚¹å‡»+æ—¶è§¦å‘ï¼‰ï¼Œå®ƒä»¬è´Ÿè´£é€šçŸ¥é¡µé¢è¿›è¡Œè·³è½¬â€”â€”è¿™éƒ¨åˆ†è®¾è®¡å¾—ä¸ä½³ï¼Œä¸ºäº† DataBinding è€Œå¼ºè¡Œ DataBinding</li>\n</ol>\n<p>æ€»ä¹‹è´¯å½»çš„æ€æƒ³æ˜¯ï¼šä¸€åˆ‡å˜åŠ¨éƒ½æ˜¯æ•°æ®å˜åŠ¨ï¼Œæ•°æ®å˜åŠ¨é€šè¿‡ DataBinding è‡ªåŠ¨æŠ•å°„åˆ° UIã€‚</p>\n<hr>\n<h2 id=\"è§†å›¾\"><a href=\"#è§†å›¾\" class=\"headerlink\" title=\"è§†å›¾\"></a>è§†å›¾</h2><p>è§†å›¾ä¹Ÿå°±æ˜¯<code>TasksFragment.kt</code>ç±»ï¼Œè´Ÿè´£åˆå§‹åŒ–å¸ƒå±€ï¼Œè§¦å‘ ViewModel è¿›è¡Œé¦–æ¬¡åŠ è½½ã€‚è¿™é‡Œçš„ Fragment ç»§æ‰¿è‡ª androidx ä¸­çš„ Fragmentã€‚</p>\n<p>åœ¨<code>onCreateView</code>é‡Œåˆå§‹åŒ– DataBindingï¼ˆæ•°æ®ï¼‰ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onCreateView</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    inflater: <span class=\"type\">LayoutInflater</span>, container: <span class=\"type\">ViewGroup</span>?,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">  savedInstanceState: <span class=\"type\">Bundle</span>?</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">)</span></span>: View? &#123;</span><br><span class=\"line\">    viewDataBinding = TasksFragBinding.inflate(inflater, container, <span class=\"literal\">false</span>).apply &#123;</span><br><span class=\"line\">    viewmodel = viewModel</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  setHasOptionsMenu(<span class=\"literal\">true</span>)</span><br><span class=\"line\">  <span class=\"keyword\">return</span> viewDataBinding.root</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨<code>onActivityCreated</code>é‡Œåˆå§‹åŒ– UIï¼ˆè§†å›¾ï¼‰ï¼Œåˆå§‹åŒ–å®Œæˆåå¯åŠ¨åŠ è½½ï¼ˆä»£ç æœ€åä¸€è¡Œï¼‰ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">override</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">onActivityCreated</span><span class=\"params\">(savedInstanceState: <span class=\"type\">Bundle</span>?)</span></span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.onActivityCreated(savedInstanceState)</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Set the lifecycle owner to the lifecycle of the view</span></span><br><span class=\"line\">    viewDataBinding.lifecycleOwner = <span class=\"keyword\">this</span>.viewLifecycleOwner</span><br><span class=\"line\">    setupSnackbar()</span><br><span class=\"line\">    setupListAdapter()</span><br><span class=\"line\">    setupRefreshLayout(viewDataBinding.refreshLayout, viewDataBinding.tasksList)</span><br><span class=\"line\">    setupNavigation()</span><br><span class=\"line\">    setupFab()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Always reloading data for simplicity. Real apps should only do this on first load and</span></span><br><span class=\"line\">    <span class=\"comment\">// when navigating back to this destination. <span class=\"doctag\">TODO:</span> https://issuetracker.google.com/79672220</span></span><br><span class=\"line\">    viewModel.loadTasks(<span class=\"literal\">true</span>)</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ­¤å¤–ï¼ŒFragment ä¸­è¿˜ä¼šè¿›è¡Œè®¾ç½® OnClickListenerã€Adapter ç­‰æ“ä½œï¼Œæ¯”è¾ƒç®€å•ï¼Œä¸èµ˜è¿°ã€‚</p>\n<hr>\n<h2 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h2><p>v2 çš„é¡¹ç›®è®¾è®¡æ—¶é‡‡å–äº† MVVM æ€æƒ³ï¼Œæ—¨åœ¨è§£å†³ MVP æ¨¡å¼ä¸‹Presenter å±‚è¿‡äºåºå¤§çš„é—®é¢˜ã€‚å…¶å® MVP-Clean æ¨¡å¼å·²ç»å¯¹æ­¤æœ‰ä¸€äº›ç¼“è§£ã€‚è€Œ MVVM åšçš„æ›´å½»åº•ï¼Œå¹²è„†æŠŠæ•°æ®å¯¹ UI çš„æ§åˆ¶å®Œå…¨äº¤ç»™æ¡†æ¶è‡ªåŠ¨è¿›è¡Œã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œä½†ä¹Ÿå¹¶ä¸æ˜¯æ²¡æœ‰ç¼ºç‚¹ï¼Œæ¯”å¦‚ä¸€æ—¦å‡ºäº†é—®é¢˜ï¼Œå¦‚æœæ²¡æœ‰æŒæ¡ä¸ªä¸­åŸç†ï¼Œè°ƒè¯•æ—¶å¿…å®šæ‘¸ä¸æ¸…å¤´ç»ªã€‚æ€»è€Œè¨€ä¹‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå€¼å¾—å­¦ä¹ ä¸å°è¯•çš„æ¶æ„è®¾è®¡ã€‚</p>\n<hr>\n<h2 id=\"Bonusï¼šusecases\"><a href=\"#Bonusï¼šusecases\" class=\"headerlink\" title=\"Bonusï¼šusecases\"></a>Bonusï¼šusecases</h2><p><a href=\"https://github.com/googlesamples/android-architecture/tree/usecases\" target=\"_blank\" rel=\"noopener\">usecases</a> æ˜¯ v2 ä¸­çš„ä¸€ä¸ª Stable<br> åˆ†æ”¯ï¼ˆå¦ä¸€ä¸ªæ˜¯<a href=\"https://github.com/googlesamples/android-architecture/tree/dagger-android\" target=\"_blank\" rel=\"noopener\">dagger-android</a>)ã€‚usecases ä»¥è§£è€¦ã€æŠ½è±¡ã€å•å‘ä¾èµ–ä¸ºæ ¸å¿ƒè®¾è®¡ç†å¿µï¼Œè¿™ä¹Ÿæ˜¯ Clean æ¶æ„çš„æ ¸å¿ƒæ€æƒ³ã€‚</p>\n<ul>\n<li>è¡¨ç°å±‚åªèƒ½è®¿é—®åˆ°é¢†åŸŸå±‚/ç”¨ä¾‹å±‚ï¼Œä¸çŸ¥é“æ•°æ®å±‚çš„å­˜åœ¨</li>\n<li>é¢†åŸŸå±‚/ç”¨ä¾‹å±‚åªèƒ½è®¿é—®åˆ°æ•°æ®å±‚ï¼Œæ— æ³•è®¿é—®è¡¨ç°å±‚</li>\n<li>æ•°æ®å±‚æ— æ³•è®¿é—®è¡¨ç°å±‚å’Œé¢†åŸŸå±‚</li>\n</ul>\n<p>é¢†åŸŸå±‚ï¼ˆæˆ–è€…å«ç”¨ä¾‹å±‚ï¼‰ï¼Œå³ Domain Layerï¼Œæ˜¯ç”±å¤šä¸ª UseCase ç»„æˆçš„ï¼Œæ¯ä¸€ä¸ª UseCase å¯¹åº”ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ã€‚ä»¥â€œåŠ è½½å•ä¸ªTaskâ€ä¸ºä¾‹ï¼Œå¯ä»¥çœ‹åˆ° UseCase é‡Œç›´æ¥å°†è¯·æ±‚è½¬å‘ç»™ TasksRepository æ¥å¤„ç†ï¼Œé€»è¾‘ååˆ†ç®€å•ã€‚</p>\n<p>åœ¨åˆ†æå…·ä½“å·®åˆ«ä¹‹å‰ï¼Œå¯ä»¥å…ˆçœ‹ä¸€é usecase åˆ†æ”¯ä¸ master åˆ†æ”¯çš„ diffï¼š<a href=\"https://github.com/googlesamples/android-architecture/compare/usecases#files_bucket\" target=\"_blank\" rel=\"noopener\">https://github.com/googlesamples/android-architecture/compare/usecases#files_bucket</a></p>\n<p><strong>GetTaskUseCase.kt</strong></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GetTaskUseCase</span></span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> tasksRepository: TasksRepository</span><br><span class=\"line\">  ) &#123;</span><br><span class=\"line\">    suspend <span class=\"keyword\">operator</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">invoke</span><span class=\"params\">(taskId: <span class=\"type\">String</span>, forceUpdate: <span class=\"type\">Boolean</span> = <span class=\"literal\">false</span>)</span></span>: Result&lt;Task&gt; &#123;</span><br><span class=\"line\">    wrapEspressoIdlingResource &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> tasksRepository.getTask(taskId, forceUpdate)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;    </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è€Œè·å– Tasks åˆ—è¡¨çš„ Usecase ç›¸å¯¹å¤æ‚ä¸€äº›ï¼ŒåŒ…æ‹¬äº†åŸæœ¬åœ¨ TasksViewModel ä¸­å¤„ç†çš„è¿‡æ»¤é€»è¾‘ï¼Œä»å¦ä¸€ä¸ªè§’åº¦çœ‹ï¼Œè¿™ç›¸å½“äºå‡è½»äº† ViewModel çš„è´Ÿæ‹…ã€‚</p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GetTasksUseCase</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> tasksRepository: TasksRepository</span><br><span class=\"line\">) &#123;</span><br><span class=\"line\">    suspend <span class=\"keyword\">operator</span> <span class=\"function\"><span class=\"keyword\">fun</span> <span class=\"title\">invoke</span><span class=\"params\">(</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        forceUpdate: <span class=\"type\">Boolean</span> = <span class=\"literal\">false</span>,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        currentFiltering: <span class=\"type\">TasksFilterType</span> = ALL_TASKS</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">    )</span></span>: Result&lt;List&lt;Task&gt;&gt; &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        wrapEspressoIdlingResource &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">val</span> tasksResult = tasksRepository.getTasks(forceUpdate)</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Filter tasks</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (tasksResult <span class=\"keyword\">is</span> Success &amp;&amp; currentFiltering != ALL_TASKS) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">val</span> tasks = tasksResult.<span class=\"keyword\">data</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"keyword\">val</span> tasksToShow = mutableListOf&lt;Task&gt;()</span><br><span class=\"line\">                <span class=\"comment\">// We filter the tasks based on the requestType</span></span><br><span class=\"line\">                <span class=\"keyword\">for</span> (task <span class=\"keyword\">in</span> tasks) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">when</span> (currentFiltering) &#123;</span><br><span class=\"line\">                        ACTIVE_TASKS -&gt; <span class=\"keyword\">if</span> (task.isActive) &#123;</span><br><span class=\"line\">                            tasksToShow.add(task)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        COMPLETED_TASKS -&gt; <span class=\"keyword\">if</span> (task.isCompleted) &#123;</span><br><span class=\"line\">                            tasksToShow.add(task)</span><br><span class=\"line\">                        &#125;</span><br><span class=\"line\">                        <span class=\"keyword\">else</span> -&gt; NotImplementedError()</span><br><span class=\"line\">                    &#125;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">return</span> Success(tasksToShow)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> tasksResult</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è‡³äº ViewModel é‡Œï¼Œå°†åŸæ¥çš„ Repository å‚æ•°æ”¹ä¸ºå½“å‰ ViewModel ç”¨åˆ°çš„ UseCase å‚æ•°å³å¯ï¼Œæ‰€æœ‰å¤„ç†æ•°æ®çš„è¯·æ±‚éƒ½æœ‰ UseCase æ¥æ¥ç®¡ã€‚</p>\n<p><strong>TasksViewModel.kt</strong></p>\n<figure class=\"highlight kotlin\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TasksViewModel</span></span>(</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> getTasksUseCase: GetTasksUseCase,</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> clearCompletedTasksUseCase: ClearCompletedTasksUseCase,</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> completeTaskUseCase: CompleteTaskUseCase,</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">val</span> activateTaskUseCase: ActivateTaskUseCase</span><br><span class=\"line\">) : ViewModel() &#123;</span><br><span class=\"line\"><span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Over~</p>\n","categories":[],"tags":["æ¶æ„"]},{"title":"ã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹å‹˜è¯¯è¡¨ 2019-08-27","url":"https://lilei.pro/2019/08/27/jcip-errata/","content":"<p>Java Concurrency in Practice æ˜¯ä¸€æœ¬è®²è§£ JVM ä¸‹å¹¶å‘ç¼–ç¨‹çŸ¥è¯†çš„ç»å…¸ä½œå“ï¼Œå»ºè®®æœ‰å¿—äºèµ„æ·±çš„ Java å·¥ç¨‹å¸ˆå°†å…¶çº³å…¥è‡ªå·±çš„è¯»ä¹¦è®¡åˆ’ä¸­ï¼Œç›¸ä¿¡ä¸€å®šä¼šå¤§æœ‰è£¨ç›Šã€‚</p>\n<p>åœ¨é˜…è¯»è¿™æœ¬ä¹¦çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°ä¸­æ–‡ç‰ˆæœ¬æœ‰å¾ˆå¤šæ˜¾è€Œæ˜“è§çš„é”™è¯¯ï¼Œå°¤å…¶æ˜¯ä»£ç é‡Œæ¡ä»¶åˆ¤æ–­æœ‰æ—¶æ ¹æœ¬æ˜¯åç€æ¥çš„ï¼ˆæœ¬åº”æ˜¯<code>&gt;=</code>çš„æ¡ä»¶ï¼Œä¹¦é‡Œé¢å´æ˜¯<code>&lt;</code>ï¼‰ã€‚Google æœç´¢ä¹‹åå‘ç°åœ¨ <a href=\"http://jcip.net/errata.html\" target=\"_blank\" rel=\"noopener\">http://jcip.net/errata.html</a> æœ‰è‹±æ–‡åŸç‰ˆçš„å‹˜è¯¯è¡¨ï¼Œç”±äºä¸­æ–‡ç‰ˆæœ¬æ²¡æœ‰å‹˜è¯¯è¡¨ï¼Œæ•…ç¿»è¯‘åœ¨æ­¤ï¼Œå¸Œæœ›å¯ä»¥æœ‰æ‰€å¸®åŠ©ã€‚</p>\n<p>ä½¿ç”¨ä¹‹å‰è¯·ç¡®è®¤è‡ªå·±æ‰‹ä¸­çš„ä¹¦ç±ç‰ˆæœ¬æ˜¯å¦ç›¸ç¬¦ã€‚</p>\n<h1 id=\"æœ¬æ–‡é€‚ç”¨çš„ä¸­æ–‡ç‰ˆæœ¬\"><a href=\"#æœ¬æ–‡é€‚ç”¨çš„ä¸­æ–‡ç‰ˆæœ¬\" class=\"headerlink\" title=\"æœ¬æ–‡é€‚ç”¨çš„ä¸­æ–‡ç‰ˆæœ¬\"></a>æœ¬æ–‡é€‚ç”¨çš„ä¸­æ–‡ç‰ˆæœ¬</h1><ul>\n<li>ä¹¦åï¼šã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ï¼ŒJava Concurrency in Practice</li>\n<li>ä½œè€…ï¼šBrain Goetz, Tim Peierls ç­‰</li>\n<li>è¯‘è€…ï¼šç«¥äº‘å…° ç­‰</li>\n<li>ISBNï¼š978-7-111-37004-8</li>\n<li>å‡ºç‰ˆç¤¾ï¼šæœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾</li>\n<li>å‡ºç‰ˆæ—¶é—´ï¼š2012.2 ç¬¬ä¸€ç‰ˆï¼Œ2018.9 é‡å°</li>\n<li>å®šä»·ï¼š69 å…ƒ</li>\n<li>è±†ç“£é“¾æ¥ï¼š<a href=\"https://book.douban.com/subject/10484692/\" target=\"_blank\" rel=\"noopener\">https://book.douban.com/subject/10484692/</a></li>\n</ul>\n<h1 id=\"å‹˜è¯¯æ•°æ®æ¥æº\"><a href=\"#å‹˜è¯¯æ•°æ®æ¥æº\" class=\"headerlink\" title=\"å‹˜è¯¯æ•°æ®æ¥æº\"></a>å‹˜è¯¯æ•°æ®æ¥æº</h1><p><a href=\"http://jcip.net/errata.html\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹å‹˜è¯¯è¡¨</a></p>\n<h1 id=\"ä¸­æ–‡ç‰ˆå‹˜è¯¯è¡¨\"><a href=\"#ä¸­æ–‡ç‰ˆå‹˜è¯¯è¡¨\" class=\"headerlink\" title=\"ä¸­æ–‡ç‰ˆå‹˜è¯¯è¡¨\"></a>ä¸­æ–‡ç‰ˆå‹˜è¯¯è¡¨</h1><table>\n<thead>\n<tr>\n<th>é¡µç </th>\n<th>å‹˜è¯¯</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>p.5</td>\n<td>ç¨‹åºæ¸…å• 1-1 ä¸‹é¢çš„ç¬¬ä¸€æ®µï¼Œ<code>someVariable++</code>åº”ä¸º<code>value++</code></td>\n</tr>\n<tr>\n<td>p.6</td>\n<td>ç¨‹åºæ¸…å• 1-2ï¼Œ<code>Value</code>åº”ä¸º<code>value</code></td>\n</tr>\n<tr>\n<td>p.53</td>\n<td>4.3 èŠ‚ä¸Šé¢çš„æœ€åä¸€æ®µï¼Œ<code>getLocation</code>åº”ä¸º<code>getLocations</code></td>\n</tr>\n<tr>\n<td>p.58</td>\n<td>ç¨‹åºæ¸…å• 4-11ï¼Œ<code>SafePoint(int x, int y)</code>æ„é€ å‡½æ•°çš„å‡½æ•°ä½“å¯ä»¥ç²¾ç®€ä¸º<code>set(x, y)</code></td>\n</tr>\n<tr>\n<td>p.62</td>\n<td>ç¨‹åºæ¸…å• 4-16ï¼Œ<code>if(contains)</code>åº”ä¸º<code>if(!contains)</code></td>\n</tr>\n<tr>\n<td>p.75</td>\n<td>5.3.1 ç¬¬ä¸€æ®µï¼Œ<code>DiskCrawler</code>åº”ä¸º<code>FileCrawler</code></td>\n</tr>\n<tr>\n<td>p.100</td>\n<td>ç¨‹åºæ¸…å• 6-7 ä¸‹é¢ç¬¬äºŒæ®µï¼Œ<code>åœ¨ ExcutorService å…³é—­åæäº¤çš„ä»»åŠ¡å°†ç”±â€œæ‹’ç»æ‰§è¡Œå¤„ç†å™¨ï¼ˆRejected Execution Handlerï¼‰æ¥å¤„ç†</code>è¡¨è¿°æœ‰è¯¯ï¼Œ<code>Rejected Execution Handler</code>æ˜¯ä»…åœ¨<code>ThreadPoolExecutor</code>å®ç°ä¸­æä¾›çš„ï¼Œå¹¶éæ‰€æœ‰çš„<code>ExecutorService</code>å®ç°éƒ½å…·å¤‡æ­¤åŠŸèƒ½</td>\n</tr>\n<tr>\n<td>p.122</td>\n<td>ç¬¬äºŒè¡Œï¼Œ<code>é‚£ä¹ˆè°ƒç”¨ close æˆ– wakeup æ–¹æ³•ä¼šä½¿çº¿ç¨‹æŠ›å‡º ClosedSelectorException</code>ï¼Œåªæœ‰<code>close</code>æ–¹æ³•ä¼šæŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œ<code>wakeup</code>æ–¹æ³•ä¸ä¼š</td>\n</tr>\n<tr>\n<td>p.163</td>\n<td>ç¨‹åºæ¸…å• 9-6ï¼Œç¬¬ä¸€ä¸ª<code>if(runningTask != null)</code>åˆ¤æ–­æ¡ä»¶åº”ä¸º<code>(runningTask == null)</code></td>\n</tr>\n<tr>\n<td>p.214</td>\n<td>ç¨‹åºæ¸…å• 12-9ï¼Œ<code>Executors.newFixedThreadPool(MAX_SIZE)</code>æ–¹æ³•è°ƒç”¨åº”è¯¥å¢åŠ ç¬¬äºŒä¸ªå‚æ•°<code>threadFactory</code></td>\n</tr>\n<tr>\n<td>p.229</td>\n<td>ç¨‹åºæ¸…å• 13-3ï¼Œä»£ç å€’æ•°ç¬¬ä¸‰è¡Œ<code>if (System.nanoTime() &lt; stopTime)</code>åˆ¤æ–­æ¡ä»¶é‡Œçš„<code>&lt;</code>åº”ä¸º<code>&gt;=</code></td>\n</tr>\n</tbody>\n</table>\n<p>ä»¥ä¸Šå°±æ˜¯ä¸­æ–‡ç‰ˆã€ŠJava å¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹çš„å‹˜è¯¯è¡¨ï¼Œå¦‚æœ‰é—æ¼ï¼Œæ¬¢è¿é€šè¿‡æ–‡æœ«ç•™è¨€è”ç³»æˆ‘è¿›è¡Œè¡¥å……ã€‚</p>\n","categories":[],"tags":["Java"]},{"title":"æ¶æ„å­¦ä¹ ä¹‹ mvp-clean","url":"https://lilei.pro/2019/08/21/architecture-todo-mvp-clean/","content":"<blockquote>\n<p>I am the STORM!!!</p>\n</blockquote>\n<p>ä¸Šä¸€ç¯‡æ–‡ç« ä»‹ç»äº† MVP æ¨¡å¼ï¼Œä½œä¸º Android æœ€æœ´å®çš„æ¶æ„ï¼ŒMVP è¶³ä»¥åº”å¯¹å¤æ‚åº¦è¾ƒä½çš„ä¸šåŠ¡åœºæ™¯ï¼Œå›æƒ³ 2014~2015 å¹´åœ¨ DP åšé¢„è®¢é—ªæƒ çš„æ—¥å­ï¼Œç”¨çš„ä¾¿æ˜¯ MVPã€‚</p>\n<p>ç„¶è€Œéšç€ä¸šåŠ¡å¤æ‚åº¦å¢åŠ ï¼ŒPresenter å±‚çš„é€»è¾‘ä¼šéšä¹‹å˜é‡ï¼Œå¯¼è‡´çš„ç»“æœä¾¿æ˜¯ Presenter ç±»è¿‡å¤§ï¼ŒåŠ¨è¾„ä¸€ä¸¤åƒè¡Œä»£ç ï¼Œå®åœ¨æ˜¯ä¸‘é™‹ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼ŒClean æ¶æ„æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p>\n<h2 id=\"å…³äº-Clean\"><a href=\"#å…³äº-Clean\" class=\"headerlink\" title=\"å…³äº Clean\"></a>å…³äº Clean</h2><h3 id=\"ä»€ä¹ˆæ˜¯-Clean\"><a href=\"#ä»€ä¹ˆæ˜¯-Clean\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯ Clean\"></a>ä»€ä¹ˆæ˜¯ Clean</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp_clean/CleanArchitecture.jpg\" alt=\"CleanArchitecture\" title=\"\">\n                </div>\n                <div class=\"image-caption\">CleanArchitecture</div>\n            </figure>\n<p>Clean æ¶æ„æœ€åˆå¹¶ä¸æ˜¯ä¸ºäº†é’ˆå¯¹ Android å¹³å°çš„é—®é¢˜è€Œæå‡ºï¼Œè€Œæ˜¯ä½œä¸º<strong>è½¯ä»¶ç³»ç»Ÿ</strong>çš„é€šç”¨æ¶æ„è¢«è®¾è®¡å‡ºæ¥ï¼Œå¦‚ä¸Šé¢çš„åŒå¿ƒåœ†æ‰€ç¤ºï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>The Dependency Ruleï¼ˆå•å‘ä¾èµ–åŸåˆ™ï¼‰</strong>ï¼Œå³åªèƒ½ä»å¤–å±‚å‘å†…å±‚ä¾èµ–ï¼Œå†…å±‚å¯¹å¤–å±‚ä¸€æ— æ‰€çŸ¥ï¼Œå¤–å±‚çš„å˜åŠ¨ä¸åº”å½“å½±å“åˆ°å†…å±‚ã€‚</p>\n<p>å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µæ˜¯<strong>Use Caseï¼ˆç”¨ä¾‹ï¼‰</strong>ï¼Œ<strong>ç”¨ä¾‹</strong>æ˜¯ä¸šåŠ¡é€»è¾‘çš„æœ€å°æŠ½è±¡å•å…ƒï¼Œå®ƒè°ƒç”¨æ•°æ®æ¨¡å—çš„æ¥å£ï¼Œå‘ä¸Šï¼ˆPresenterï¼‰æä¾›ä¸šåŠ¡é€»è¾‘æ“ä½œå…¥å£ã€‚</p>\n<h3 id=\"Android-Clean\"><a href=\"#Android-Clean\" class=\"headerlink\" title=\"Android Clean\"></a>Android Clean</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp_clean/mvp-clean.png\" alt=\"mvp-clean\" title=\"\">\n                </div>\n                <div class=\"image-caption\">mvp-clean</div>\n            </figure>\n<p>Android å¹³å°åœ¨ Presenter å’Œ Model ä¹‹é—´å®šä¹‰äº†<strong>Domain Layerï¼ˆåŸŸå±‚ï¼‰</strong>ï¼Œç”¨äºæ‰¿è½½<strong>Use Case</strong>ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒUse Case çš„èƒŒåæ˜¯ä¸šåŠ¡é€»è¾‘ã€‚Domain Layer è„±èƒäº MVP çš„ Presenterï¼Œè¿™æ ·å¯ä»¥é¿å…ç›¸åŒçš„ä¸šåŠ¡é€»è¾‘ä»£ç å‡ºç°åœ¨ä¸¤ä¸ª Presenter ä¸­çš„é—®é¢˜ã€‚</p>\n<h4 id=\"Use-Cases-å¼‚æ­¥æ€§\"><a href=\"#Use-Cases-å¼‚æ­¥æ€§\" class=\"headerlink\" title=\"Use Cases å¼‚æ­¥æ€§\"></a>Use Cases å¼‚æ­¥æ€§</h4><p>é‰´äº Domain Layer æ˜¯ UI æ— å…³çš„ï¼Œè¿™é‡Œå¯ä»¥ç»Ÿä¸€å°† Use Case æ”¾å…¥å·¥ä½œçº¿ç¨‹è¿è¡Œï¼Œé€šè¿‡å¼‚æ­¥å›è°ƒè¿›è¡Œé€šä¿¡ã€‚è‡³äºæ›´åº•å±‚çš„æ•°æ®åº“/ç½‘ç»œæ“ä½œï¼Œå‡ºäºç®€åŒ–çš„ç›®çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨åŒæ­¥æ¥å£ã€‚</p>\n<h4 id=\"ä¸åŒ-Layer-æ˜¯å¦éœ€è¦å®šä¹‰å„è‡ªçš„-Model\"><a href=\"#ä¸åŒ-Layer-æ˜¯å¦éœ€è¦å®šä¹‰å„è‡ªçš„-Model\" class=\"headerlink\" title=\"ä¸åŒ Layer æ˜¯å¦éœ€è¦å®šä¹‰å„è‡ªçš„ Model\"></a>ä¸åŒ Layer æ˜¯å¦éœ€è¦å®šä¹‰å„è‡ªçš„ Model</h4><p>æ ‡å‡†çš„åšæ³•æ˜¯åœ¨è§†å›¾å±‚ï¼ˆView Layerï¼‰ã€åŸŸå±‚ï¼ˆDomain Layerï¼‰å’Œæ•°æ®å±‚ï¼ˆData/Model Layerï¼‰åˆ†åˆ«ä½¿ç”¨ä¸åŒçš„å¯¹è±¡ï¼Œå¦‚ VOã€BOã€DO ç­‰ã€‚è¿™æ ·å¸¦æ¥çš„é—®é¢˜æ˜¯é‡å¤æ€§å¢åŠ ã€‚å¦‚æœå¯¹è±¡æ˜¯ä¸å¯å˜çš„ï¼Œåœ¨å„å±‚ä¹‹é—´å…·æœ‰ç›¸åŒçš„å±æ€§å’Œæ–¹æ³•ï¼Œåˆ™å¯ä»¥åªå®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå…±é€šä½¿ç”¨ã€‚</p>\n<p>å¦‚æœè§†å›¾å±‚å¯¹è±¡åŒ…å« Android ç›¸å…³çš„æ–¹æ³•æˆ–å±æ€§ï¼Œåˆ™åº”å½“ä¸ºå…¶å•ç‹¬å®šä¹‰ä¸€ä¸ªç±»ï¼Œç„¶åä½¿ç”¨<code>Mapper</code>åœ¨ä¸åŒå±‚ä¹‹é—´è¿›è¡Œå¯¹è±¡è½¬æ¢ã€‚</p>\n<h2 id=\"å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯\"><a href=\"#å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯\" class=\"headerlink\" title=\"å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯\"></a>å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯</h2><p>è¿™é‡Œæˆ‘ä»¬å°† Clean æ¨¡å¼åº”ç”¨åœ¨ todo-app ä¸Šï¼Œæƒ³æƒ³è¿˜æœ‰ç‚¹å°æ¿€åŠ¨ã€‚</p>\n<h3 id=\"Use-Cases-amp-Domain-Layer\"><a href=\"#Use-Cases-amp-Domain-Layer\" class=\"headerlink\" title=\"Use Cases &amp; Domain Layer\"></a>Use Cases &amp; Domain Layer</h3><p>æŠŠ Use Case çš„å£°æ˜å’Œè¿è¡Œæœºåˆ¶æ‹†å¼€ï¼Œæ˜¯ä¸æ˜¯è·Ÿ Runnable + Executor çš„æœºåˆ¶å¾ˆåƒï¼Ÿæ²¡é”™ï¼Œè¿™å°±æ˜¯è®¾è®¡æ¨¡å¼ä¸­çš„<strong>å‘½ä»¤æ¨¡å¼</strong>ã€‚è®¾è®¡æ¨¡å¼ä¸æ˜¯å½¼æ­¤å­¤ç«‹çš„ï¼Œä¸€ä¸ªé¡¹ç›®é‡Œå¯ä»¥æ•´ä½“é‡‡ç”¨ Clean æ¶æ„ï¼Œä¸åŒçš„å­æ¨¡å—ï¼Œåº”ç”¨ä¸åŒçš„è®¾è®¡æ¨¡å¼ã€‚è®¾è®¡æ¨¡å¼æ˜¯æ­»çš„ï¼Œäººæ˜¯æ´»çš„ã€‚</p>\n<p>æŠ½è±¡ç±»<code>UseCase</code>å³æ˜¯<strong>å‘½ä»¤</strong>ï¼ŒåŒ…å«å…¥å‚ã€å‡ºå‚ã€å›è°ƒé€šçŸ¥å¯¹è±¡ã€è¿è¡Œçš„æŠ½è±¡è¿‡ç¨‹ï¼ˆè¿™é‡Œåˆå‡ºç°äº†<strong>æ¨¡ç‰ˆæ¨¡å¼</strong>ï¼‰ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UseCase</span>&lt;<span class=\"title\">Q</span> <span class=\"keyword\">extends</span> <span class=\"title\">UseCase</span>.<span class=\"title\">RequestValues</span>, <span class=\"title\">P</span> <span class=\"keyword\">extends</span> <span class=\"title\">UseCase</span>.<span class=\"title\">ResponseValue</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Q mRequestValues;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> UseCaseCallback&lt;P&gt; mUseCaseCallback; <span class=\"comment\">// ä»»åŠ¡å®Œæˆåï¼ˆæˆåŠŸorå¤±è´¥ï¼‰çš„å›è°ƒ</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"comment\">// set and get</span></span><br><span class=\"line\">  <span class=\"comment\">//..</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">// Executor è¿è¡Œå…¥å£</span></span><br><span class=\"line\">    executeUseCase(mRequestValues);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">abstract</span> voi8d <span class=\"title\">executeUseCase</span><span class=\"params\">(Q requestValues)</span></span>; <span class=\"comment\">// å­ç±»å¿…éœ€å®ä½“åŒ–è¿™ä¸ªæ–¹æ³•</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">RequestValues</span> </span>&#123;&#125;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ResponseValues</span> </span>&#123;&#125; <span class=\"comment\">// æ¥å£çº¦æŸ</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UseCaseCallback</span>&lt;<span class=\"title\">R</span>&gt; </span>&#123; <span class=\"comment\">// ä»»åŠ¡å®Œæˆåçš„å›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(R response)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åé€‰å–ä¸€ä¸ªâ€œåŠ è½½å…¨éƒ¨ä»»åŠ¡â€çš„åœºæ™¯ä¸ºä¾‹ï¼Œçœ‹å®ƒæ˜¯å¦‚ä½•å®ç°æŠ½è±¡ç±»çš„ï¼Œä»¥ä¸‹æ˜¯<code>GetTask.java</code>çš„éƒ¨åˆ†ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GetTasks</span> <span class=\"keyword\">extends</span> <span class=\"title\">UseCase</span>&lt;<span class=\"title\">GetTasks</span>.<span class=\"title\">RequestValues</span>, <span class=\"title\">GetTasks</span>.<span class=\"title\">ResponseValues</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> TasksRepository mTasksRepository; <span class=\"comment\">// æ›´åº•å±‚çš„æ•°æ®æºå¯¹è±¡</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> FilterFactory mFilterFactory; <span class=\"comment\">// è¿‡æ»¤å™¨å·¥å‚ç±»</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GetTasks</span><span class=\"params\">(@NonNull TaskRepository tasksRepository, @NonNull FilterFactory filterFactory)</span> </span>&#123; <span class=\"comment\">// æ„é€ æ—¶ä¼ å…¥æ•°æ®æºå¯¹è±¡å’Œè¿‡æ»¤å™¨å·¥å‚</span></span><br><span class=\"line\">    mTasksRepository = checkNotNull(tasksRepository, <span class=\"string\">\"tasksRepository cannot be null!\"</span>);</span><br><span class=\"line\">    mFilterFactory = checkNotNull(filterFactory, <span class=\"string\">\"filterFactory cannot be null!\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">executeUseCase</span><span class=\"params\">(<span class=\"keyword\">final</span> RequestValues values)</span> </span>&#123; <span class=\"comment\">// åˆ©ç”¨æ³›å‹çº¦æŸï¼Œåœ¨ä¸åŒUseCaseå®ç°ç±»é‡Œä½¿ç”¨ä¸åŒå‚æ•°</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (values.isForceUpdate()) &#123;</span><br><span class=\"line\">      mTasksRepository.refreshTasks();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    mTasksRepository.getTasks(<span class=\"keyword\">new</span> TasksDataSource.LoadTasksCallback() &#123; <span class=\"comment\">// è°ƒç”¨æ•°æ®æºå¼‚æ­¥æ–¹æ³•</span></span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onTasksLoaded</span><span class=\"params\">(List&lt;Task&gt; tasks)</span> </span>&#123;</span><br><span class=\"line\">        TasksFilterType currentFiltering = values.getCurrentFiltering();</span><br><span class=\"line\">        TaskFilter taskfilter = mFilterFactory.create(currentFiltering);</span><br><span class=\"line\"></span><br><span class=\"line\">        List&lt;Task&gt; tasksFiltered = taskFilter.filter(tasks);</span><br><span class=\"line\">        ResponseValue responseValue = <span class=\"keyword\">new</span> ResponseValue(tasksFiltered);</span><br><span class=\"line\">        getUseCaseCallback().onSuccess(responseValue);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDataNotAvailable</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        getUseCallback().onError();</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RequestValues</span> <span class=\"keyword\">implements</span> <span class=\"title\">UseCase</span>.<span class=\"title\">RequestValues</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> TasksFilterType mCurrentFiltering;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> mForceUpdate;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">    <span class=\"comment\">// constructor, get and set</span></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ResponseValues</span> <span class=\"keyword\">implements</span> <span class=\"title\">UseCase</span>.<span class=\"title\">ResponseValues</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> List&lt;Task&gt; mTasks;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘åœ¨ä¸Šè¿°ä»£ç çš„æ³¨é‡Šé‡Œå¢åŠ äº†ä¸€äº›è¯´æ˜ï¼Œæ­¤å¤–ï¼Œæœ‰å‡ å¤„éœ€è¦é¢å¤–çš„æ³¨æ„ï¼š</p>\n<ol>\n<li>Use Case æ„é€ å‡½æ•°é‡Œéœ€è¦ä¼ å…¥åº•å±‚æ•°æ®æºå¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä¸å¯ä»¥åœ¨ Presenter å±‚ç›´æ¥æ„é€  Use Caseï¼Œå› ä¸º Presenter ä¸åº”å½“è·¨è¿‡ Domain Layer ç›´æ¥è®¿é—®æ•°æ®æºã€‚â€”â€” æƒ³æƒ³å¦‚ä½•å®ç°ï¼ŸIOCï¼ŒDIï¼ŒBingoï¼</li>\n<li>åœ¨ Use Case çš„ç±»å†…éƒ¨ï¼Œä»¥é™æ€ç±»çš„æ–¹å¼å£°æ˜<code>RequestValues</code>å’Œ<code>ResponseValues</code>ï¼Œä»£ç é›†ä¸­ï¼Œæ˜“äºç®¡ç†ã€‚<code>UseCase.java</code>åŸºç±»ä¸­æä¾›çš„ç©ºæ¥å£ä¹Ÿåˆ©äºä¸åŒçš„å­ç±»å£°æ˜å„è‡ªä¸åŒçš„å‚æ•°ç±»å‹ã€‚åœ¨æ¨¡ç‰ˆæ–¹æ³•<code>executeUseCase</code>é‡Œåˆ†åˆ«è¿›è¡Œè°ƒç”¨ï¼ŒåŒ–å…ƒå½’ä¸€ã€‚</li>\n</ol>\n<h3 id=\"Executorï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶\"><a href=\"#Executorï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶\" class=\"headerlink\" title=\"Executorï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶\"></a>Executorï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶</h3><p><strong>å‘½ä»¤æ¨¡å¼</strong>ç”±å‘½ä»¤ä¸æ‰§è¡Œæœºåˆ¶ä¸¤éƒ¨åˆ†ç»„æˆï¼ŒJava ä¸­çš„<code>Executor</code>æ¡†æ¶å°±æ˜¯ä¸€ç§å…¸å‹åº”ç”¨ã€‚è™½ç„¶<code>Executor</code>åªæ˜¯ä¸€ä¸ªç®€å•çš„æ¥å£ï¼Œä½†å®ƒå´ä¸ºçµæ´»è€Œå¼ºå¤§çš„å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ¡†æ¶æä¾›äº†åŸºç¡€ï¼Œè¯¥æ¡†æ¶èƒ½æ”¯æŒå¤šç§ä¸åŒç±»å‹çš„ä»»åŠ¡æ‰§è¡Œç­–ç•¥ã€‚å®ƒæä¾›äº†ä¸€ç§æ ‡å‡†çš„æ–¹æ³•å°†ä»»åŠ¡çš„æäº¤è¿‡ç¨‹å’Œæ‰§è¡Œè¿‡ç¨‹è§£è€¦å¼€æ¥ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Java ä¸­çš„ Executorï¼Œä¸è´Ÿè´£è¿è¡Œç»“æœé€šçŸ¥</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Executor</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable command)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é¡¹ç›®é‡Œä½¿ç”¨åŒæ ·çš„æœºåˆ¶ä½œä¸º<code>UseCase</code>çš„è¿è¡Œæ¡†æ¶ã€‚</p>\n<p><code>UseCaseScheduler.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">UseCaseScheduler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// todo-mvp-clean ä¸­çš„ Executor</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable runnable)</span></span>;</span><br><span class=\"line\">  <span class=\"comment\">// å¢åŠ ç»“æœé€šçŸ¥å›è°ƒ</span></span><br><span class=\"line\">  &lt;V extends UseCase.ResponseValue&gt; <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">notifyResponse</span><span class=\"params\">(<span class=\"keyword\">final</span> V response, <span class=\"keyword\">final</span> UseCase.UseCaseCallback&lt;V&gt; useCaseCallback)</span></span>;</span><br><span class=\"line\">  &lt;V extends UseCase.ResponseValue&gt; <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(<span class=\"keyword\">final</span> UseCase.UseCaseCallback&lt;V&gt; useCaseCallback)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å®ƒçš„å®ç°ç±»é‡‡ç”¨çº¿ç¨‹æ± æ–¹å¼å®ç°ï¼š</p>\n<p><code>UseCaseThreadPoolScheduler.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UseCaseThreadPoolScheduler</span> <span class=\"keyword\">implements</span> <span class=\"title\">UseCaseScheduler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Handler mHandler = <span class=\"keyword\">new</span> Handler(); <span class=\"comment\">// å°†è¿ç®—ç»“æœé€šçŸ¥ä¸»çº¿ç¨‹</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> POOL_SIZE = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> MAX_POOL_SIZE = <span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TIMEOUT = <span class=\"number\">30</span>;</span><br><span class=\"line\">  ThreadPoolExecutor mThreadPoolExecutor; <span class=\"comment\">// ä½¿ç”¨çº¿ç¨‹æ± æä¾›å¤ç”¨</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">UseCaseThreadPoolScheduler</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    mThreadPoolExecutor = <span class=\"keyword\">new</span> ThreadPoolExecutor(POOL_SIZE, MAX_POOL_SIZE, TIMEOUT, TimeUnit.SECONDS, <span class=\"keyword\">new</span> ArrayBlockingQueue&lt;Runnable&gt;(POOL_SIZE));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Runnable runnable)</span> </span>&#123;</span><br><span class=\"line\">    mThreadPoolExecutor.execute(runnable); <span class=\"comment\">// ä»»åŠ¡æäº¤ç»™çº¿ç¨‹æ± å¤„ç†</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> &lt;V extends UseCase.ResponseValue&gt; <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">notifyResponse</span><span class=\"params\">(<span class=\"keyword\">final</span> V response, <span class=\"keyword\">final</span> UseCase.UseCaseCallback&lt;V&gt; useCaseCallback)</span> </span>&#123;</span><br><span class=\"line\">    mHandler.post(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        useCaseCallback.onSuccess(response); <span class=\"comment\">// ä¸»çº¿ç¨‹å¤„ç†ç»“æœ</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> &lt;V extends UseCase.ResponseValue&gt; <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">(<span class=\"keyword\">final</span> UseCase.UseCaseCallback&lt;V&gt; useCaseCallback)</span> </span>&#123;</span><br><span class=\"line\">    mHandler.post(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        useCaseCallback.onError(); <span class=\"comment\">// ä¸»çº¿ç¨‹å¤„ç†ç»“æœ</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"UseCaseHandlerï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶åŒ…è£…\"><a href=\"#UseCaseHandlerï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶åŒ…è£…\" class=\"headerlink\" title=\"UseCaseHandlerï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶åŒ…è£…\"></a>UseCaseHandlerï¼šä»»åŠ¡æ‰§è¡Œæœºåˆ¶åŒ…è£…</h3><p>ä¸Šæ–‡ä»‹ç»äº†é¡¹ç›®é‡Œé‡‡ç”¨<code>Executor</code>ä½œä¸ºå‘½ä»¤çš„è¿è¡Œæ¡†æ¶ï¼Œ<code>Executor</code>æ¥æ”¶çš„æ˜¯<code>Runnable</code>ç±»å‹çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€å±‚<strong>UseCaseå¤„ç†å™¨</strong>ï¼Œç”¨äºå°†<code>UseCase</code>å°è£…æˆ<code>Runnable</code>ï¼Œå¹¶ä¸”å¤„ç†ä»»åŠ¡çš„è¿”å›å€¼ã€‚<code>UseCaseHandler</code>å°±æ˜¯è´Ÿè´£å¤„ç†<code>UseCase</code>çš„ç»„ä»¶ã€‚</p>\n<p><code>UseCaseHandler.java</code>ï¼Œçœç•¥éƒ¨åˆ†ä»£ç ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UseCaseHandler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> UseCaseHandler INSTANCE; <span class=\"comment\">// å•ä¾‹æ¨¡å¼ï¼Œé¥¿æ±‰</span></span><br><span class=\"line\">  <span class=\"keyword\">public</span> &lt;T extends UseCase.RequestValues, R extends UseCase.ResponseValue&gt; <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(<span class=\"keyword\">final</span> UseCase&lt;T, R&gt; useCase, T values, UseCase.UseCaseCallback&lt;R&gt; callback)</span> </span>&#123;</span><br><span class=\"line\">    useCase.setRequestValues(values);</span><br><span class=\"line\">    useCase.setUseCaseCallback(<span class=\"keyword\">new</span> UiCallbackWrapper(callback, <span class=\"keyword\">this</span>));</span><br><span class=\"line\">    mUseCaseScheduler.execute(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        useCase.run();</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// UIå›è°ƒåŒ…è£…å™¨ç±»ï¼Œå°†æˆåŠŸ/å¤±è´¥äº‹ä»¶äº¤ç»™UIçº¿ç¨‹å¤„ç†</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">UiCallbackWrapper</span>&lt;<span class=\"title\">V</span> <span class=\"keyword\">extends</span> <span class=\"title\">UseCase</span>.<span class=\"title\">ResponseValue</span>&gt; <span class=\"keyword\">implements</span> <span class=\"title\">UseCase</span>.<span class=\"title\">UseCaseCallback</span>&lt;<span class=\"title\">V</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> UseCase.UseCaseCallback&lt;V&gt; mCallback;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> UseCaseHandler mUseCaseHandler;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">UiCallbackWrapper</span><span class=\"params\">(UseCase.UseCaseCallback&lt;V&gt; callback, UseCaseHandler useCaseHandler)</span> </span>&#123;</span><br><span class=\"line\">      mCallback = callback;</span><br><span class=\"line\">      mUseCaseHandler = useCaseHandler;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onSuccess</span><span class=\"params\">(V response)</span> </span>&#123;</span><br><span class=\"line\">      mUseCaseHandler.notifyResponse(response, mCallback);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onError</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      mUseCaseHandler.notifyError(mCallback);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>\n<p><code>UseCaseHandler</code>éšè—äº†ä»»åŠ¡çš„æ‰§è¡Œæœºåˆ¶ï¼Œå¯¹å¤–æš´éœ²å‡ºé€šè¿‡<code>UseCase</code>æäº¤å‘½ä»¤çš„æ¥å£ï¼Œæ­¤æ—¶ Presenter å°±å¯ä»¥å€ŸåŠ©<code>UseCaseHandler</code>æ¥æäº¤å„é¡¹å¼‚æ­¥ä»»åŠ¡ï¼Œå¹¶ä¸”è·å–å›è°ƒã€‚æ³¨æ„åˆ°å›è°ƒæ˜¯åœ¨ UI çº¿ç¨‹å‘ç”Ÿçš„ï¼Œæ„å‘³ç€ Presenter å¯ä»¥åœ¨å›è°ƒä¸­ç›´æ¥æ“ä½œ UI å…ƒç´ ã€‚</p>\n<h3 id=\"Activityï¼šç©¿é’ˆå¼•çº¿çš„ç»„ç»‡è€…\"><a href=\"#Activityï¼šç©¿é’ˆå¼•çº¿çš„ç»„ç»‡è€…\" class=\"headerlink\" title=\"Activityï¼šç©¿é’ˆå¼•çº¿çš„ç»„ç»‡è€…\"></a>Activityï¼šç©¿é’ˆå¼•çº¿çš„ç»„ç»‡è€…</h3><p>ä¸ MVP æ¶æ„ä¸€æ ·ï¼Œåœ¨ MVP clean æ¶æ„ä¸­ï¼ŒActivity åŒæ ·æ‹…ä»»åˆå§‹åŒ– Fragmentã€Presenter çš„èŒè´£ã€‚Activity ç±»æ˜¯ååˆ†ç®€å•çš„ï¼Œ80% çš„é€»è¾‘éƒ½å†™åœ¨<code>onCreate</code>å½“ä¸­ã€‚</p>\n<p><code>TaskActivity.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">  setContentView(R.layout.tasks_act);    <span class=\"comment\">// Set up the toolbar.</span></span><br><span class=\"line\">  <span class=\"comment\">// åˆå§‹åŒ– ActionBar</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"comment\">// åˆå§‹åŒ– DrawerLayout</span></span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">  <span class=\"comment\">// FragmentManagerä¸Activityæ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæ‰€ä»¥è¿™é‡Œé€šè¿‡R.id.contentFrameè·å–Fragmentï¼Œåœ¨Activity Bä¸­ä¹Ÿå¯ä»¥ç”¨R.id.contentFrameè·å–Bå½“ä¸­çš„Fragmentï¼Œä¸ç”¨æ‹…å¿ƒé‡å¤</span></span><br><span class=\"line\">  TasksFragment tasksFragment = (TasksFragment) getSupportFragmentManager().findFragmentById(R.id.contentFrame);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (tasksFragment == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// Create the fragment</span></span><br><span class=\"line\">    tasksFragment = TasksFragment.newInstance();</span><br><span class=\"line\">    ActivityUtils.addFragmentToActivity(getSupportFragmentManager(), tasksFragment, R.id.contentFrame);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// å°†ä½¿ç”¨åˆ°çš„Taskç”¨ä½œæ„é€ å‚æ•°ï¼Œåˆ›å»ºPresenter</span></span><br><span class=\"line\">  mTasksPresenter = <span class=\"keyword\">new</span> TasksPresenter(</span><br><span class=\"line\">    Injection.provideUseCaseHandler(),</span><br><span class=\"line\">    tasksFragment,</span><br><span class=\"line\">    Injection.provideGetTasks(getApplicationContext()),</span><br><span class=\"line\">    Injection.provideCompleteTasks(getApplicationContext()),</span><br><span class=\"line\">    Injection.provideActivateTask(getApplicationContext()),</span><br><span class=\"line\">    Injection.provideClearCompleteTasks(getApplicationContext())</span><br><span class=\"line\">  );</span><br><span class=\"line\">  <span class=\"comment\">// Load previously saved state, if available.</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (savedInstanceState != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">    TasksFilterType currentFiltering = (TasksFilterType) savedInstanceState.getSerializable(CURRENT_FILTERING_KEY);</span><br><span class=\"line\">  mTasksPresenter.setFiltering(currentFiltering);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>éšååœ¨<code>View.onResume</code>ä¸­ä¼šè°ƒç”¨<code>Presenter.start</code>æ¥é¦–æ¬¡åŠ è½½æ•°æ®ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResume</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">super</span>.onResume();</span><br><span class=\"line\">  mPresenter.start();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è‡³æ­¤ï¼ŒMVP-clean æ¶æ„çš„è®¾è®¡æ€è·¯å°±è¢«æˆ‘ä»¬åˆ†æé€å½»äº†ï¼Œå¯ä»¥çœ‹å‡ºï¼Œç›¸æ¯”äº MVPï¼Œclean æ¶æ„æŠ½è±¡å‡ºæ¥ Domain å±‚ï¼Œä½¿å…·ä½“çš„ä¸šåŠ¡æ“ä½œç‹¬ç«‹å¯å¤ç”¨ï¼Œä¸”å‡è½»äº† Presenter ç±»çš„è´Ÿæ‹…ã€‚</p>\n<p>è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯æ¯ä¸€ä¸ª Use Case éƒ½æ˜¯å¯æµ‹è¯•çš„ï¼Œå•å…ƒæµ‹è¯•ç²’åº¦è¢«ç»†åŒ–ï¼Œæ›´å®¹æ˜“å®šä½é—®é¢˜ï¼Œä»è€Œé’ˆå¯¹æ€§è§£å†³ã€‚å…³äºæµ‹è¯•æˆ‘è®²çš„ä¸å¤šï¼Œå¯ä»¥ç›´æ¥å‚è€ƒ<a href=\"https://github.com/googlesamples/android-architecture/tree/todo-mvp-clean\" target=\"_blank\" rel=\"noopener\">æºç </a>è¿›è¡Œç†è§£ã€‚</p>\n<h2 id=\"ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç±»å›¾\"><a href=\"#ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç±»å›¾\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç±»å›¾\"></a>ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç±»å›¾</h2><p>æœ€åï¼Œæˆ‘ä»¬å°† todo app çš„ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç»˜åˆ¶æˆç±»å›¾ï¼ŒåŠ æ·±ç†è§£ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp_clean/mvp-clean-%E7%B1%BB%E5%9B%BE.png\" alt=\"mvp-clean-ç±»å›¾\" title=\"\">\n                </div>\n                <div class=\"image-caption\">mvp-clean-ç±»å›¾</div>\n            </figure>\n","categories":[],"tags":["æ¶æ„"]},{"title":"æ¶æ„å­¦ä¹ ä¹‹ mvp","url":"https://lilei.pro/2019/08/21/architecture-todo-mvp/","content":"<blockquote>\n<p>Life doesnâ€™t give you what your want, it gives you what you DESERVE!</p>\n</blockquote>\n<h1 id=\"0x00-åºè¨€\"><a href=\"#0x00-åºè¨€\" class=\"headerlink\" title=\"0x00 åºè¨€\"></a>0x00 åºè¨€</h1><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp/aab-logov2.png\" alt=\"Android Architecture Blueprints\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Android Architecture Blueprints</div>\n            </figure>\n<p>Google å®˜æ–¹åœ¨ GitHub æ¨å‡ºçš„<a href=\"https://github.com/googlesamples/android-architecture\" target=\"_blank\" rel=\"noopener\">Android æ¶æ„ Demo</a>é¡¹ç›®éå¸¸å€¼å¾—å­¦ä¹ ï¼Œé€šè¿‡ TODO app çš„ä¾‹å­ï¼Œè®²è§£å„ç§åº”ç”¨æ¶æ„æ¨¡å¼å¦‚ä½•åœ¨å®ç°éœ€æ±‚çš„åŸºç¡€ä¸Šï¼Œè¾¾åˆ°å¯ç»´æŠ¤æ€§ã€æ‰©å±•æ€§ã€å¯æµ‹è¯•æ€§çš„ä¼˜ç§€è®¾è®¡ã€‚</p>\n<p>æœ¬ç³»åˆ—åšå®¢æ–‡ç« èšç„¦äºä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ol>\n<li>ç®€æ˜æ‰¼è¦ä»‹ç»å„ä¸ªæ¶æ„çš„æ€æƒ³ä¸åŸºç¡€æ¨¡å‹</li>\n<li>åœ¨è¯¥æ¶æ„æ¨¡å¼ä¸‹å¦‚ä½•å¯¹ TODO App çš„å„ä¸ªæ¨¡å—è¿›è¡Œåˆ’åˆ†ï¼Œä»¥åŠåˆ’åˆ†çš„ä¾æ®</li>\n<li>å–ä¸€ä¸ªé¡µé¢ä¸ºä¾‹ï¼Œä½œå‡ºç±»å›¾ï¼Œè§£æä»£ç </li>\n</ol>\n<p><strong>Talk is cheap, show me the code.</strong></p>\n<h1 id=\"0x01-ä¸šåŠ¡é€»è¾‘\"><a href=\"#0x01-ä¸šåŠ¡é€»è¾‘\" class=\"headerlink\" title=\"0x01 ä¸šåŠ¡é€»è¾‘\"></a>0x01 ä¸šåŠ¡é€»è¾‘</h1><p>å»ºè®® clone ä»£ç åçœŸæœºè¿è¡Œä½“éªŒï¼Œç”¨ä¸€å¼ å›¾æ¦‚æ‹¬å¦‚ä¸‹ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp/é¡µé¢æµç¨‹å›¾.png\" alt=\"é¡µé¢æµç¨‹å›¾\" title=\"\">\n                </div>\n                <div class=\"image-caption\">é¡µé¢æµç¨‹å›¾</div>\n            </figure>\n<p>Google ä¹Ÿç»™å‡ºäº†ä¸€ä¸ª<a href=\"https://github.com/googlesamples/android-architecture/wiki/To-do-app-specification\" target=\"_blank\" rel=\"noopener\">wiki é¡µé¢</a>è¯´æ˜ TODO app çš„ç‰¹æ€§ã€‚è‡³äºä¸ºä»€ä¹ˆé€‰æ‹©è¿™æ ·ä¸€ä¸ªåº”ç”¨ä½œä¸º demoï¼Œå®˜æ–¹ç»™å‡ºçš„è§£é‡Šå¦‚ä¸‹ï¼š</p>\n<blockquote>\n<p>å®ƒå¿…é¡»è¶³å¤Ÿç®€å•ï¼Œä¾¿äºä½ å¾ˆå¿«åœ°ç†è§£å…¶åŠŸèƒ½ï¼›åŒæ—¶ä¹Ÿè¦è¶³å¤Ÿå¤æ‚ï¼Œè¿™æ ·æ‰èƒ½å±•ç°ä¸åŒè®¾è®¡çš„å†³ç­–ä»¥åŠæä¾›æµ‹è¯•åœºæ™¯ã€‚</p>\n</blockquote>\n<h1 id=\"0x02-todo-mvp\"><a href=\"#0x02-todo-mvp\" class=\"headerlink\" title=\"0x02 todo-mvp\"></a>0x02 todo-mvp</h1><h2 id=\"å…³äº-MVP\"><a href=\"#å…³äº-MVP\" class=\"headerlink\" title=\"å…³äº MVP\"></a>å…³äº MVP</h2><p>MVP è„±èƒäºå¤§åé¼é¼çš„ MVCï¼ˆModel-View-Controllerï¼‰ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp/mvc.png\" alt=\"mvc\" title=\"\">\n                </div>\n                <div class=\"image-caption\">mvc</div>\n            </figure>\n<p>ä½†å‡¡åšè½¯ä»¶å¼€å‘çš„äººåº”è¯¥å¯¹ MVC éƒ½ä¸æ„Ÿåˆ°é™Œç”Ÿï¼Œå®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†æ•°æ®ã€è§†å›¾ã€æ§åˆ¶é€»è¾‘æ‹†åˆ†ã€‚è¿™ä¸‰éƒ¨åˆ†å¯ä»¥è‡ªç”±è¿›è¡Œæ›¿æ¢ï¼Œæ¯”å¦‚åœ¨ä¸æ”¹å˜æ•°æ®æ¥å£çš„æƒ…å†µä¸‹ï¼Œæ›¿æ¢æ•°æ®æ¥æºï¼›æˆ–è€…æ˜¯è°ƒæ•´ UI æ˜¾ç¤ºï¼Œè€Œæ— éœ€æ”¹åŠ¨ä¸šåŠ¡é€»è¾‘ã€‚</p>\n<p>MVC æ˜¯ä¸€ä¸ªå…·æœ‰å†å²æ„ä¹‰çš„æ¶æ„æ¨¡å¼ï¼Œå®ƒå¯¹å¤©é©¬è¡Œç©ºã€ä¸€å›¢ä¹±éº»çš„è½¯ä»¶è®¾è®¡è¿›è¡Œè§„çº¦ï¼Œä½¿åç»­å¯¹ç¨‹åºçš„ä¿®æ”¹å’Œæ‰©å±•ç®€åŒ–ï¼Œå¹¶ä¸”ä½¿é‡ç”¨æˆä¸ºå¯èƒ½ã€‚ä½†æ˜¯ï¼Œå®ƒå¹¶ä¸æ˜¯æœ€é€‚åˆ Android å¼€å‘çš„æ¶æ„æ¨¡å¼ã€‚</p>\n<h3 id=\"MVC-ä¸ºä»€ä¹ˆä¸é€‚åˆ-Android-å¼€å‘\"><a href=\"#MVC-ä¸ºä»€ä¹ˆä¸é€‚åˆ-Android-å¼€å‘\" class=\"headerlink\" title=\"MVC ä¸ºä»€ä¹ˆä¸é€‚åˆ Android å¼€å‘\"></a>MVC ä¸ºä»€ä¹ˆä¸é€‚åˆ Android å¼€å‘</h3><p>MVC çš„æ ¸å¿ƒæ€æƒ³æ˜¯è§£è€¦ï¼Œå•ä¸€èŒè´£ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œä¸ä½¿ç”¨ MVC çš„ä¸»è¦åŸå› æ˜¯ Activity çš„èŒè´£å¤ªé‡ï¼Œå¾€å¾€è¦åŒæ—¶æ‰¿æ‹… View å’Œ Controller çš„å·¥ä½œï¼Œè¿™ä¼šé€ æˆ Activity ç±»éå¸¸åºå¤§ï¼ŒUI ä»£ç å’Œé€»è¾‘ä»£ç äº¤ç»‡ï¼Œè€¦åˆä¸¥é‡ã€‚</p>\n<h3 id=\"MVP-ä¸ºä»€ä¹ˆé€‚åˆ-Android-å¼€å‘\"><a href=\"#MVP-ä¸ºä»€ä¹ˆé€‚åˆ-Android-å¼€å‘\" class=\"headerlink\" title=\"MVP ä¸ºä»€ä¹ˆé€‚åˆ Android å¼€å‘\"></a>MVP ä¸ºä»€ä¹ˆé€‚åˆ Android å¼€å‘</h3><p>MVP çš„æ¶æ„å¦‚ä¸‹å›¾ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp/mvp.png\" alt=\"MVP\" title=\"\">\n                </div>\n                <div class=\"image-caption\">MVP</div>\n            </figure>\n<p>å®ƒå•ç‹¬æŠ½å‡ºäº† Presenter å¯¹è±¡ï¼Œå®ç°äº†ä¸šåŠ¡é€»è¾‘ï¼Œç”¨äºæ§åˆ¶ View çš„æ˜¾ç¤ºå˜åŒ–ï¼Œä»¥åŠä¸ Model è¿›è¡Œæ•°æ®äº¤äº’ã€‚Presenter å’Œ View äº’ç›¸æŒæœ‰ï¼ŒModel ä»…è¢« Presenter æŒæœ‰ã€‚</p>\n<p>åœ¨ç†æƒ³çŠ¶æ€ä¸‹ï¼ŒPresenter å’Œ Model ä»…åŒ…å« Java ä»£ç ï¼Œä¸å« Android SDK å†…å®¹ã€‚MVP æ¶æ„è§£å†³äº† MVC ä¸­ Activity èŒè´£è¿‡å¤šçš„é—®é¢˜ï¼Œå°† UI åŠŸèƒ½åˆ†é…ç»™ View å•ç‹¬ç®¡ç†ï¼ŒView çš„æ¥å£ä»…å‘ Presenter å¼€æ”¾ï¼Œç›¸æ¯” MVCï¼Œæ›´å¥½åœ°å®ç°äº†èŒè´£å•ä¸€ã€è§£è€¦çš„éœ€æ±‚ã€‚</p>\n<h2 id=\"å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯\"><a href=\"#å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯\" class=\"headerlink\" title=\"å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯\"></a>å¦‚ä½•æŠ½è±¡ä¸šåŠ¡åœºæ™¯</h2><h3 id=\"Model\"><a href=\"#Model\" class=\"headerlink\" title=\"Model\"></a>Model</h3><p>è®¾è®¡ä»æ•°æ®å±‚å¼€å§‹ï¼Œæ•°æ®å±‚è¦æ‰¿æ‹…ä»€ä¹ˆèŒè´£å‘¢ï¼Ÿå…¶å®å°±æ˜¯<strong>CRUD</strong>ï¼š</p>\n<ul>\n<li>ä¿å­˜æ–°å»ºçš„ä»»åŠ¡</li>\n<li>æŸ¥è¯¢å·²åˆ›å»ºä»»åŠ¡</li>\n<li>æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼ˆæœªå®Œæˆ -&gt; å·²å®Œæˆï¼‰</li>\n<li>åˆ é™¤ä»»åŠ¡</li>\n</ul>\n<p>æ•°æ®çš„æŒä¹…åŒ–æ–¹å¼ï¼Œæ•°æ®æ“ä½œç»“æœé‡‡ç”¨åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Œè¿™äº›é—®é¢˜ä¹Ÿæ˜¯è®¾è®¡è¿‡ç¨‹ä¸­è¦è€ƒè™‘çš„ã€‚</p>\n<h4 id=\"åŸºæœ¬çš„ä»»åŠ¡å¯¹è±¡ï¼šTask\"><a href=\"#åŸºæœ¬çš„ä»»åŠ¡å¯¹è±¡ï¼šTask\" class=\"headerlink\" title=\"åŸºæœ¬çš„ä»»åŠ¡å¯¹è±¡ï¼šTask\"></a>åŸºæœ¬çš„ä»»åŠ¡å¯¹è±¡ï¼šTask</h4><p>é¦–å…ˆè®¾è®¡ä¸€ä¸ª<code>Task.java</code>ç±»ï¼Œè¡¨ç¤ºä»»åŠ¡å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…¸å‹çš„ Java Beanã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å°† Task è®¾è®¡æˆä¸€ä¸ªä¸å¯å˜çš„å¯¹è±¡ã€‚åœ¨ä¸€ä¸ªä»»åŠ¡ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå®Œæˆâ€çŠ¶æ€æ—¶ï¼Œå¹¶ä¸æ˜¯ä¿®æ”¹åŸå¯¹è±¡ï¼Œè€Œæ˜¯ä¸¢å¼ƒæ‰åŸå¯¹è±¡ï¼Œå†ä»¥ç›¸åŒ<code>id</code>é‡æ–°åˆ›å»ºä¸€ä¸ªå®ŒæˆçŠ¶æ€çš„å¯¹è±¡ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯é€»è¾‘ç®€å•ï¼Œä¸å¯å˜å¯¹è±¡çº¿ç¨‹ç»å¯¹å®‰å…¨ã€‚ç¼ºç‚¹æ˜¯å½“å¯¹è±¡åˆ›å»ºã€é”€æ¯æˆæœ¬é«˜çš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿæ€§èƒ½æŸå¤±ã€‚åœ¨å®é™…ä¸šåŠ¡ä¸­åº”å½“é…Œæƒ…é€‰æ‹©é‡ç”¨æˆ–è€…èˆå¼ƒã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Task</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String mId;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String mTitle;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> String mDescription;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> mCompleted;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"Model-å±‚å¯¹å¤–æš´éœ²çš„æ¥å£ï¼šTasksDataSource\"><a href=\"#Model-å±‚å¯¹å¤–æš´éœ²çš„æ¥å£ï¼šTasksDataSource\" class=\"headerlink\" title=\"Model å±‚å¯¹å¤–æš´éœ²çš„æ¥å£ï¼šTasksDataSource\"></a>Model å±‚å¯¹å¤–æš´éœ²çš„æ¥å£ï¼šTasksDataSource</h4><p>æœ¬ç€é¢å‘æ¥å£ç¼–ç¨‹çš„åŸåˆ™ï¼Œéšè—æ•°æ®æ“ä½œå…·ä½“å®ç°ä»£ç ï¼Œæš´éœ²å‡ºç®¡ç†ä»»åŠ¡çš„æ¥å£ï¼ˆåŒ…å«å›è°ƒï¼‰ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">TasksDataSource</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">LoadTasksCallback</span> </span>&#123; <span class=\"comment\">// åŠ è½½å¤æ•°ä»»åŠ¡å›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onTasksLoaded</span><span class=\"params\">(List&lt;Task&gt; tasks)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onDataNotAvailable</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">GetTaskCallback</span> </span>&#123; <span class=\"comment\">// åŠ è½½å•æ¡ä»»åŠ¡å›è°ƒ</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onTaskLoaded</span><span class=\"params\">(Task task)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onDataNotAvailable</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getTasks</span><span class=\"params\">(@NonNull LoadTasksCallback callback)</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">getTask</span><span class=\"params\">(@NonNull String taskId, @NonNull GetTaskCallback callback)</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">saveTask</span><span class=\"params\">(@NonNull Task task)</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">completeTask</span><span class=\"params\">(@NonNull Task task)</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">completeTask</span><span class=\"params\">(@NonNull String taskId)</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">activateTask</span><span class=\"params\">(@NonNull Task task)</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">activateTask</span><span class=\"params\">(@NonNull String taskId)</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">clearCompletedTasks</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">refreshTasks</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">deleteAllTasks</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">deleteTask</span><span class=\"params\">(@NonNull String taskId)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ªæ¥å£é‡Œæœ‰ä¸¤å¤„ä¸æˆ‘çš„ç¼–ç¨‹æ€è·¯æœ‰å‡ºå…¥ã€‚é¦–å…ˆæ˜¯åŠ è½½ä»»åŠ¡å›è°ƒï¼Œæˆ‘è®¤ä¸ºå¯ä»¥ä»…ä¿ç•™å¤æ•°ä»»åŠ¡çš„æ¥å£ï¼Œå¯¹äºåŠ è½½å•æ¡ä»»åŠ¡çš„éœ€æ±‚ï¼Œè¿”å›ä¸€ä¸ªé•¿åº¦ä¸º 1 çš„åˆ—è¡¨å°±å¯ä»¥äº†ã€‚å…¶æ¬¡ï¼Œåœ¨å‘½åä¸Šï¼Œæˆ‘ä¹ æƒ¯äºå°†åŒæ­¥æ¥å£ä»¥<code>getXXX</code>ï¼Œå¼‚æ­¥æ¥å£ä»¥<code>loadXXX</code>æ¥å£°æ˜ã€‚</p>\n<p>æœ‰äº†è¿™ä¸ªæ¥å£ï¼Œå°±å¯ä»¥æä¾›ç»™ä»»åŠ¡è¯¦æƒ…ã€ä»»åŠ¡åˆ—è¡¨ç­‰é¡µé¢ä½¿ç”¨ã€‚æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ªæ¥å£å®ç°ç±»ï¼Œè¿™ä¸ªç±»å¯¹å¤–çš„èŒè´£æ˜¯å®ç°æ•°æ®æ“ä½œæ¥å£ï¼Œå¯¹å†…çš„èŒè´£æ˜¯éšè—ä¸¤ç§å…·ä½“çš„æ•°æ®æ“ä½œå®ç°ï¼ˆå†…å­˜ç¼“å­˜ã€æ•°æ®åº“ã€ç½‘ç»œï¼‰ã€‚</p>\n<p>æ•°æ®æºå…±æœ‰ä¸‰çº§ç¼“å­˜ï¼š</p>\n<ul>\n<li>In-memory cache - Fast</li>\n<li>Disk (SQLiteDb) - Slow</li>\n<li>Network - Very slow</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TasksRepository</span> <span class=\"keyword\">implements</span> <span class=\"title\">TasksDataSource</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> TasksDatasource mTasksRemoteDataSource; <span class=\"comment\">// ç½‘ç»œæ•°æ®æº</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> TasksDatasource mTasksLocalDataSource; <span class=\"comment\">// æœ¬åœ°æ•°æ®æº</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¯»å†™æ•°æ®ç­–ç•¥å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œä¾æ¬¡è¯»ï¼Œå…¨éƒ¨å†™â€ï¼Œæ‹¬å·é‡Œæ˜¯æˆ‘è¡¥å……çš„å†…å®¹ï¼š</p>\n<ul>\n<li><p>In every <code>get</code>operation:</p>\n<ul>\n<li>Return cache if available, or</li>\n<li>return local copy if it exists (and update cache) , or</li>\n<li>return remote copy ( and update local copy &amp; cache)</li>\n</ul>\n</li>\n<li><p>Every <code>write</code>/<code>delete</code>operation will simply:</p>\n<ul>\n<li>Update cache</li>\n<li>Update local</li>\n<li>Update remote</li>\n</ul>\n</li>\n</ul>\n<p>å…·ä½“çš„ç½‘ç»œæ•°æ®æºã€æœ¬åœ°æ•°æ®åº“è®¾è®¡ä¸ºå¸¸è§å†™æ³•ï¼Œä¸èµ˜è¿°ã€‚</p>\n<h3 id=\"Fragment-å³æ˜¯-View\"><a href=\"#Fragment-å³æ˜¯-View\" class=\"headerlink\" title=\"Fragment å³æ˜¯ View\"></a>Fragment å³æ˜¯ View</h3><p>å¤„ç†æ‰€æœ‰ UI å˜åŒ–äº‹ä»¶ï¼Œæ¯”å¦‚æ˜¾ç¤º loadingã€æ˜¾ç¤ºä»»åŠ¡åˆ—è¡¨ã€æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…ã€æ˜¾ç¤ºä»»åŠ¡çŠ¶æ€å˜æ›´ SnackBar ç­‰ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯é¡µé¢è·³è½¬æ“ä½œä¹Ÿå±äº UI å˜åŒ–ï¼Œæ˜¯åœ¨ Fragment é‡Œé¢å®ç°çš„ã€‚ä¸å¦¨æ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆâ€œè·³è½¬â€ä¸æ”¾åœ¨ Presenter ä¸­è¿›è¡Œï¼Ÿä¸€ä¸ªåŸå› æ˜¯ Presenter ä¸ Android SDK æ— å…³ï¼Œè€Œè·³è½¬éœ€è¦ Context å¯¹è±¡ï¼Œè¿èƒŒäº†è¿™ä¸€åŸåˆ™ã€‚æ¯”å¦‚ä»â€œä»»åŠ¡åˆ—è¡¨â€è·³è½¬åˆ°â€œä»»åŠ¡è¯¦æƒ…â€æ—¶ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// TasksFragment.java</span></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">showAddTask</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  Intent intent = <span class=\"keyword\">new</span> Intent(getContext(), AddEditTaskActivity.class);</span><br><span class=\"line\">  startActivityForResult(intent, AddEditTaskActivity.REQUEST_ADD_TASK);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>View é‡Œé¢æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œä¸»è¦å¤„ç†ä»¥ä¸‹äº‹ä»¶ï¼š</p>\n<ul>\n<li>åŠ è½½ä¸­ã€åŠ è½½æˆåŠŸã€å¤±è´¥é¡µé¢å±•ç¤º</li>\n<li>å±•ç° Toastã€SnackBar ç­‰æç¤º</li>\n<li>å¤„ç†æŒ‰é’®ã€èœå•ç‚¹å‡»äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯å°†å…¶ç”©ç»™ Presenter å¤„ç†ï¼‰</li>\n<li>å¤„ç†é¡µé¢è·³è½¬</li>\n<li>å£°æ˜ Adapter</li>\n<li>åœ¨<code>onResume</code>æ—¶è°ƒç”¨ Presenter çš„<code>start</code>æ–¹æ³•ï¼Œå¯åŠ¨é¡µé¢</li>\n<li>æä¾›<code>isActive</code>æ–¹æ³•ï¼Œä¾› Presenter åœ¨å¼‚æ­¥å›è°ƒè¿”å›æ—¶åˆ¤æ–­é¡µé¢æ˜¯å¦å­˜æ´»</li>\n</ul>\n<p>æœ€åä¸€ç‚¹æ˜¯å®¹æ˜“æ¼æ‰çš„ï¼Œå¦‚æœå¼‚æ­¥è¯·æ±‚å›è°ƒæ—¶é¡µé¢è¢«é”€æ¯ï¼Œä¼šå¯¼è‡´å„ç§éš¾ä»¥é¢„æ–™çš„é—®é¢˜ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isActive</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> isAdded();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"Presenter-ä¸šåŠ¡é€»è¾‘è½½ä½“\"><a href=\"#Presenter-ä¸šåŠ¡é€»è¾‘è½½ä½“\" class=\"headerlink\" title=\"Presenter - ä¸šåŠ¡é€»è¾‘è½½ä½“\"></a>Presenter - ä¸šåŠ¡é€»è¾‘è½½ä½“</h3><p>æ‰¿æ‹…äº†ä¸šåŠ¡é€»è¾‘å®ç°çš„èŒè´£ï¼Œæœ‰æ—¶ä¸šåŠ¡é€»è¾‘è¿‡äºå¤æ‚ä¼šå¯¼è‡´ Presenter ç±»å¤ªå¤§ï¼Œæ­¤æ—¶è¦è€ƒè™‘æ‹†åˆ†ä¸šåŠ¡é€»è¾‘åˆ°å•ç‹¬çš„ç±»ä¸­ï¼Œå°±å˜æˆäº†<code>mvp-clean</code>æ¶æ„ï¼Œclean æ¶æ„ä¸­ä½¿ç”¨<code>Use Caseï¼ˆç”¨ä¾‹ï¼‰</code>å¤„ç†ç»†åˆ†çš„ä¸šåŠ¡é€»è¾‘ã€‚</p>\n<p>Presenter ç”± Activity æ„é€ ï¼Œå¹¶ä¸”æä¾›æ–¹æ³•ç»™ Activity ä»¥åŠ Viewï¼ˆFragmentï¼‰ä½¿ç”¨ã€‚</p>\n<h3 id=\"Activity-å°†ä¸€åˆ‡ç²˜åˆåˆ°ä¸€èµ·\"><a href=\"#Activity-å°†ä¸€åˆ‡ç²˜åˆåˆ°ä¸€èµ·\" class=\"headerlink\" title=\"Activity - å°†ä¸€åˆ‡ç²˜åˆåˆ°ä¸€èµ·\"></a>Activity - å°†ä¸€åˆ‡ç²˜åˆåˆ°ä¸€èµ·</h3><p>ç°åœ¨æˆ‘ä»¬æœ‰äº† Modelã€Viewã€Presenter å„ä¸ªéƒ¨åˆ†ï¼Œè€Œ Android åº”ç”¨çš„é¡µé¢å…¥å£æ˜¯ Activity ç±»ï¼Œæˆ‘ä»¬åœ¨ Activity ä¸­åˆ›å»º Fragmentï¼ˆViewï¼‰åŠ Presenterï¼Œåœ¨è¿™ä¸¤è€…ä¹‹é—´å»ºç«‹å…³è”ã€‚åŒæ—¶è¿˜è¦å¤„ç†ä¸€äº›å¿…é¡»æ”¾åœ¨ Activity ä¸­è¿›è¡Œçš„æ“ä½œï¼Œæ¯”å¦‚<code>onSaveInstanceState</code>ã€<code>onOptionsItemSelected</code> ç­‰ç­‰ã€‚</p>\n<h2 id=\"ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½å®ç°\"><a href=\"#ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½å®ç°\" class=\"headerlink\" title=\"ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½å®ç°\"></a>ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½å®ç°</h2><p>ç”¨ç±»å›¾æ¥è¡¨ç¤º MVP æ¨¡å¼ä¸‹çš„ä»»åŠ¡åˆ—è¡¨åŠŸèƒ½ç›¸å…³ç±»ï¼š</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190821_todo_mvp/mvpç±»å›¾.png\" alt=\"mvp\" title=\"\">\n                </div>\n                <div class=\"image-caption\">mvp</div>\n            </figure>\n","categories":[],"tags":["æ¶æ„"]},{"title":"ACE-PTM ç¬¬ II éƒ¨åˆ† é¢†å¯¼å’Œå®æ–½","url":"https://lilei.pro/2019/07/14/ace-cpt-part-2/","content":"<h1 id=\"ç¬¬-2-ç« -æ¿€åŠ±å’ŒåšæŒåŸåˆ™\"><a href=\"#ç¬¬-2-ç« -æ¿€åŠ±å’ŒåšæŒåŸåˆ™\" class=\"headerlink\" title=\"ç¬¬ 2 ç«  - æ¿€åŠ±å’ŒåšæŒåŸåˆ™\"></a>ç¬¬ 2 ç«  - æ¿€åŠ±å’ŒåšæŒåŸåˆ™</h1><p>åªæœ‰çº¦20%çš„ç¾å›½æˆäººåŒæ—¶ç¬¦åˆæœ‰æ°§æ´»åŠ¨å’Œè‚Œè‚‰å¼ºåŒ–æŒ‡å—è¦æ±‚ã€‚å¥èº«ä¸“ä¸šäººå‘˜é¢ä¸´ç€ä¸¤å¤§æŒ‘æˆ˜ï¼š<strong>è®©äººä»¬ç§¯æå¼€å§‹</strong>ä»¥åŠä¹‹å<strong>åšæŒè¿åŠ¨è®¡åˆ’</strong>ã€‚æœ¬ç« é‡ç‚¹æ˜¯æé«˜äººä»¬åœ¨å¼€å§‹ä¹‹ååšæŒè®¡åˆ’çš„å¯èƒ½æ€§ã€‚</p>\n<p>æ¿€åŠ±äººå¼€å§‹é”»ç‚¼çš„å› ç´ ä¸ä¸€å®šæ˜¯ä½¿ä»–ä»¬é•¿æœŸå‚ä¸è¿åŠ¨è®¡åˆ’çš„å› ç´ ã€‚å¥åº·å’Œå¥èº«è¡Œä¸šçš„çœŸæ­£æŒ‘æˆ˜æ˜¯åˆ›é€ å‡ºé€‚å®œçš„è®¡åˆ’å’Œè¿åŠ¨ç¯å¢ƒï¼Œä½¿äººä»¬å°½å¯èƒ½æé«˜åšæŒè®¡åˆ’å¹¶é€‰æ‹©ç§¯æç”Ÿæ´»æ–¹å¼çš„å¯èƒ½æ€§ã€‚</p>\n<h2 id=\"äº†è§£æ¿€åŠ±\"><a href=\"#äº†è§£æ¿€åŠ±\" class=\"headerlink\" title=\"äº†è§£æ¿€åŠ±\"></a>äº†è§£æ¿€åŠ±</h2><p>ç”¨äºè¯„ä¼°æ¿€åŠ±çš„ä¸¤ç§æœ€å¸¸è®¨è®ºæ–¹æ³•æ˜¯<strong>å†…åœ¨ä¸å¤–åœ¨æ¿€åŠ±</strong>å’Œ<strong>è‡ªæˆ‘æ•ˆèƒ½</strong>ã€‚</p>\n<h3 id=\"å†…åœ¨å’Œå¤–åœ¨æ¿€åŠ±\"><a href=\"#å†…åœ¨å’Œå¤–åœ¨æ¿€åŠ±\" class=\"headerlink\" title=\"å†…åœ¨å’Œå¤–åœ¨æ¿€åŠ±\"></a>å†…åœ¨å’Œå¤–åœ¨æ¿€åŠ±</h3><p>åœ¨è¿åŠ¨èƒŒæ™¯ä¸‹ï¼Œè¦å®ç°å†…åœ¨æ¿€åŠ±ï¼Œæ„å‘³ç€ä¸€ä¸ªäººæ˜¯å› ä¸ºå‚ä¸æœ¬èº«æ‰€å¸¦æ¥çš„å†…åœ¨æ„‰æ‚¦å’Œä½“éªŒè€Œä»äº‹è¿åŠ¨æ´»åŠ¨ã€‚</p>\n<p>ä¸å…¶è®¤ä¸ºéœ€è¦è®©è‡ªå·±çš„å®¢æˆ·å—åˆ°æ›´å¤šçš„å†…åœ¨æ¿€åŠ±ï¼Œç§äººæ•™ç»ƒåº”æ›´åŠªåŠ›å¢åŠ å‚ä¸è®¡åˆ’æ‰€å¸¦æ¥çš„æ„‰æ‚¦æ„Ÿå’Œæˆå°±æ„Ÿã€‚ç§äººæ•™ç»ƒé€šè¿‡é¼“åŠ±å®¢æˆ·<strong>æ‹¥æœ‰å¹¶å‚ä¸è®¡åˆ’ä»¥åŠæ•™æˆè‡ªè¶³æ€§å’Œè‡ªä¸»æ€§</strong>ï¼Œå¯ä»¥å¸®åŠ©ä¿ƒè¿›å†…åœ¨æ¿€åŠ±çš„å½¢æˆã€‚</p>\n<h3 id=\"è‡ªæˆ‘æ•ˆèƒ½\"><a href=\"#è‡ªæˆ‘æ•ˆèƒ½\" class=\"headerlink\" title=\"è‡ªæˆ‘æ•ˆèƒ½\"></a>è‡ªæˆ‘æ•ˆèƒ½</h3><p>åœ¨è¿åŠ¨èƒŒæ™¯ä¸‹ï¼Œè‡ªæˆ‘æ•ˆèƒ½å®šä¹‰ä¸ºä¸ªä½“å¯¹è‡ªèº«æˆåŠŸå‚ä¸ä½“åŠ›æ´»åŠ¨è®¡åˆ’çš„èƒ½åŠ›å’Œä¿¡å¿µã€‚è‡ªæˆ‘æ•ˆèƒ½ä¸æ¿€åŠ±å‘ˆæ­£ç›¸å…³ã€‚</p>\n<p>è®¸å¤šå¥èº«ä¸“ä¸šäººå‘˜æ‰€çŠ¯çš„ä¸€ä¸ªé‡å¤§é”™è¯¯æ˜¯å®‰æ’æ•´å ‚è¯¾è¿›è¡Œè¯„ä¼°ï¼Œä¸è¦è®©å®¢æˆ·æ„Ÿè§‰åƒåœ¨åšæµ‹è¯•ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”šè‡³ä¸è¦è®©å®¢æˆ·çŸ¥é“ä½ åœ¨æ”¶é›†è¯„ä¼°ä¿¡æ¯ã€‚</p>\n<h2 id=\"ç”¨äºä¿æŒå®¢æˆ·æ¿€åŠ±çš„ç­–ç•¥\"><a href=\"#ç”¨äºä¿æŒå®¢æˆ·æ¿€åŠ±çš„ç­–ç•¥\" class=\"headerlink\" title=\"ç”¨äºä¿æŒå®¢æˆ·æ¿€åŠ±çš„ç­–ç•¥\"></a>ç”¨äºä¿æŒå®¢æˆ·æ¿€åŠ±çš„ç­–ç•¥</h2><p>ç§äººæ•™ç»ƒåº”å½“å‘ŠçŸ¥å®¢æˆ·å¯èƒ½ä¼šå‡ºç°å›å¤åŸæ€å¹¶ä½¿å…¶æå‰åšå¥½å‡†å¤‡ï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿåœ¨å›å¤åŸæ€åç«‹å³é‡æ–°åšæŒæ´»åŠ¨è®¡åˆ’ã€‚ç¬¬ä¸€æ­¥æ˜¯<strong>å®£æ•™</strong>ï¼Œç¬¬äºŒæ­¥æ˜¯<strong>æ”¯æŒ</strong>ã€‚</p>\n<h3 id=\"ç¤¾ä¼šæ”¯æŒ\"><a href=\"#ç¤¾ä¼šæ”¯æŒ\" class=\"headerlink\" title=\"ç¤¾ä¼šæ”¯æŒ\"></a>ç¤¾ä¼šæ”¯æŒ</h3><p>å¼€å‘å’Œç»´æŠ¤è¿åŠ¨çš„ç¤¾ä¼šæ”¯æŒç½‘ç»œã€‚æ•™ç»ƒåº”å½“å°½é‡å¤šåˆ©ç”¨å›¢ä½“å‚ä¸å’Œç¤¾äº¤äº’åŠ¨çš„æœºä¼šï¼Œè®©å®¢æˆ·æ„Ÿè§‰è‡ªå·±å±äºè¯¥è®¡åˆ’ï¼Œå¹¶ä¸”æ˜¯å…·æœ‰å…±åŒå…´è¶£å’Œç›®æ ‡çš„æˆå‘˜æ‰€ç»„æˆå›¢é˜Ÿçš„ä¸€éƒ¨åˆ†ã€‚</p>\n<h3 id=\"è‡ªæˆ‘è‚¯å®š\"><a href=\"#è‡ªæˆ‘è‚¯å®š\" class=\"headerlink\" title=\"è‡ªæˆ‘è‚¯å®š\"></a>è‡ªæˆ‘è‚¯å®š</h3><p>æ•™å¯¼å®¢æˆ·è¿›è¡Œè‡ªæˆ‘è‚¯å®šã€‚</p>\n<h3 id=\"è‡ªæˆ‘è°ƒèŠ‚\"><a href=\"#è‡ªæˆ‘è°ƒèŠ‚\" class=\"headerlink\" title=\"è‡ªæˆ‘è°ƒèŠ‚\"></a>è‡ªæˆ‘è°ƒèŠ‚</h3><p>æ•™å¯¼å®¢æˆ·æˆä¸ºæœ‰æ•ˆçš„è‡ªå¾‹è€…ï¼Œè‡ªæˆ‘ç›‘ç£è¡Œä¸ºã€æ—¥ç¨‹ã€æ—¶é—´å’Œä¼˜å…ˆäº‹é¡¹ã€‚</p>\n<h3 id=\"é«˜é£é™©æƒ…å†µ\"><a href=\"#é«˜é£é™©æƒ…å†µ\" class=\"headerlink\" title=\"é«˜é£é™©æƒ…å†µ\"></a>é«˜é£é™©æƒ…å†µ</h3><p>æ—¶é—´ç®¡ç†æŠ€èƒ½ä¸ä½³ã€ç¼ºä¹ç¤¾ä¼šæ”¯æŒæˆ–æ—¥ç¨‹ç¹å¿™çš„ä¸ªäººæœ€æœ‰å¯èƒ½å›å¤åœ†å°ã€‚ç§äººæ•™ç»ƒå¿…é¡»ä¸æ–­äº†è§£å¹¶è§‚å¯Ÿå®¢æˆ·æ˜¯å¦å‡ºç°å—æ‰“å‡»ã€æ²®ä¸§æˆ–ç–²æƒ«çš„è¿¹è±¡ã€‚</p>\n<h2 id=\"å½±å“è¿åŠ¨å‚ä¸å’ŒåšæŒåº¦çš„å› ç´ \"><a href=\"#å½±å“è¿åŠ¨å‚ä¸å’ŒåšæŒåº¦çš„å› ç´ \" class=\"headerlink\" title=\"å½±å“è¿åŠ¨å‚ä¸å’ŒåšæŒåº¦çš„å› ç´ \"></a>å½±å“è¿åŠ¨å‚ä¸å’ŒåšæŒåº¦çš„å› ç´ </h2><p>ä½“åŠ›æ´»åŠ¨çš„æ½œåœ¨å†³å®šå› ç´ å¯åˆ†ä¸ºä¸‰ç±»ï¼š</p>\n<ul>\n<li>ä¸ªäººç‰¹è´¨</li>\n<li>ç¯å¢ƒå› ç´ </li>\n<li>ä½“åŠ›æ´»åŠ¨å› ç´ </li>\n</ul>\n<h3 id=\"ä¸ªäººç‰¹è´¨\"><a href=\"#ä¸ªäººç‰¹è´¨\" class=\"headerlink\" title=\"ä¸ªäººç‰¹è´¨\"></a>ä¸ªäººç‰¹è´¨</h3><h4 id=\"äººå£ç»Ÿè®¡å˜é‡\"><a href=\"#äººå£ç»Ÿè®¡å˜é‡\" class=\"headerlink\" title=\"äººå£ç»Ÿè®¡å˜é‡\"></a>äººå£ç»Ÿè®¡å˜é‡</h4><h4 id=\"å¥åº·çŠ¶å†µ\"><a href=\"#å¥åº·çŠ¶å†µ\" class=\"headerlink\" title=\"å¥åº·çŠ¶å†µ\"></a>å¥åº·çŠ¶å†µ</h4><h4 id=\"è¿‡å¾€çš„è¿åŠ¨ç»éªŒ\"><a href=\"#è¿‡å¾€çš„è¿åŠ¨ç»éªŒ\" class=\"headerlink\" title=\"è¿‡å¾€çš„è¿åŠ¨ç»éªŒ\"></a>è¿‡å¾€çš„è¿åŠ¨ç»éªŒ</h4><h4 id=\"å¿ƒç†ç‰¹è´¨\"><a href=\"#å¿ƒç†ç‰¹è´¨\" class=\"headerlink\" title=\"å¿ƒç†ç‰¹è´¨\"></a>å¿ƒç†ç‰¹è´¨</h4><h4 id=\"è®¤è¯†ã€æ€åº¦å’Œä¿¡å¿µ\"><a href=\"#è®¤è¯†ã€æ€åº¦å’Œä¿¡å¿µ\" class=\"headerlink\" title=\"è®¤è¯†ã€æ€åº¦å’Œä¿¡å¿µ\"></a>è®¤è¯†ã€æ€åº¦å’Œä¿¡å¿µ</h4><h3 id=\"ç¯å¢ƒå› ç´ \"><a href=\"#ç¯å¢ƒå› ç´ \" class=\"headerlink\" title=\"ç¯å¢ƒå› ç´ \"></a>ç¯å¢ƒå› ç´ </h3><h4 id=\"è®¾æ–½ä¾¿åˆ©æ€§\"><a href=\"#è®¾æ–½ä¾¿åˆ©æ€§\" class=\"headerlink\" title=\"è®¾æ–½ä¾¿åˆ©æ€§\"></a>è®¾æ–½ä¾¿åˆ©æ€§</h4><h4 id=\"æ—¶é—´\"><a href=\"#æ—¶é—´\" class=\"headerlink\" title=\"æ—¶é—´\"></a>æ—¶é—´</h4><h4 id=\"ç¤¾ä¼šæ”¯æŒ-1\"><a href=\"#ç¤¾ä¼šæ”¯æŒ-1\" class=\"headerlink\" title=\"ç¤¾ä¼šæ”¯æŒ\"></a>ç¤¾ä¼šæ”¯æŒ</h4><h3 id=\"ä½“åŠ›æ´»åŠ¨å› ç´ \"><a href=\"#ä½“åŠ›æ´»åŠ¨å› ç´ \" class=\"headerlink\" title=\"ä½“åŠ›æ´»åŠ¨å› ç´ \"></a>ä½“åŠ›æ´»åŠ¨å› ç´ </h3><h4 id=\"å¼ºåº¦\"><a href=\"#å¼ºåº¦\" class=\"headerlink\" title=\"å¼ºåº¦\"></a>å¼ºåº¦</h4><h4 id=\"æŸä¼¤\"><a href=\"#æŸä¼¤\" class=\"headerlink\" title=\"æŸä¼¤\"></a>æŸä¼¤</h4><h2 id=\"åé¦ˆ\"><a href=\"#åé¦ˆ\" class=\"headerlink\" title=\"åé¦ˆ\"></a>åé¦ˆ</h2><ul>\n<li>å¤–éƒ¨åé¦ˆï¼šç§äººæ•™ç»ƒä¸ºå®¢æˆ·æä¾›çš„å¼ºåŒ–ã€çº é”™å’Œé¼“åŠ±ã€‚</li>\n<li>å†…éƒ¨åé¦ˆï¼šå®¢æˆ·æ ¹æ®è‡ªå·±çš„æ„Ÿè§‰ç³»ç»Ÿï¼ˆæ„Ÿå—åˆ°ã€çœ‹åˆ°æˆ–å¬åˆ°çš„å†…å®¹ï¼‰ä¸ºè‡ªå·±æä¾›çš„ç›¸åº”ä¿¡æ¯ã€‚é•¿æœŸè®¡åˆ’åšæŒåº¦å–å†³äºå®¢æˆ·æä¾›è‡ªæˆ‘åé¦ˆçš„èƒ½åŠ›ã€‚</li>\n</ul>\n<h2 id=\"é¢†å¯¼ç‰¹è´¨\"><a href=\"#é¢†å¯¼ç‰¹è´¨\" class=\"headerlink\" title=\"é¢†å¯¼ç‰¹è´¨\"></a>é¢†å¯¼ç‰¹è´¨</h2><p>å¯¹å®¢æˆ·çš„è¿›å±•è¡¨ç°å‡ºæŒç»­ä¸æ–­åœ°å…³å¿ƒå’Œå…´è¶£æ˜¯è´¯ç©¿ç§æ•™èŒä¸šç”Ÿæ¶¯çš„ä¸€éƒ¨åˆ†ã€‚ç§äººæ•™ç»ƒä½¿ç”¨ç³»ç»Ÿæ€§ç›®æ ‡è®¾å®šä»¥åŠæ•™æˆå›å¤åŸæ€é¢„é˜²æŠ€å·§çš„ç›®çš„æ˜¯ï¼Œå‘Šè¯‰å®¢æˆ·ä»–ä»¬å¯¹å®¢æˆ·çš„å…³å¿ƒè¿œè¿œè¶…å‡ºè¿™ä¸€å°æ—¶è¯¾ç¨‹çš„èŒƒå›´ã€‚</p>\n<h2 id=\"ç§äººæ•™ç»ƒçˆ±å»ºç«‹åšæŒåº¦ä¸­çš„ä½œç”¨\"><a href=\"#ç§äººæ•™ç»ƒçˆ±å»ºç«‹åšæŒåº¦ä¸­çš„ä½œç”¨\" class=\"headerlink\" title=\"ç§äººæ•™ç»ƒçˆ±å»ºç«‹åšæŒåº¦ä¸­çš„ä½œç”¨\"></a>ç§äººæ•™ç»ƒçˆ±å»ºç«‹åšæŒåº¦ä¸­çš„ä½œç”¨</h2><h3 id=\"è®¡åˆ’è®¾è®¡\"><a href=\"#è®¡åˆ’è®¾è®¡\" class=\"headerlink\" title=\"è®¡åˆ’è®¾è®¡\"></a>è®¡åˆ’è®¾è®¡</h3><p>ç§äººæ•™ç»ƒå¿…é¡»èƒ½å¤Ÿé’ˆå¯¹æ¯ä¸ªå®¢æˆ·çš„åå¥½ã€æ—¶é—´è¡¨ã€ç»éªŒã€é¡¾è™‘å’Œçº¦æŸæ¡ä»¶ï¼ˆä¾‹å¦‚ï¼Œé’±ã€ä¾¿åˆ©æ€§å’Œæ—¶é—´ï¼‰è®¾è®¡è®¡åˆ’ã€‚</p>\n<h3 id=\"è§’è‰²æ¸…æ™°åº¦\"><a href=\"#è§’è‰²æ¸…æ™°åº¦\" class=\"headerlink\" title=\"è§’è‰²æ¸…æ™°åº¦\"></a>è§’è‰²æ¸…æ™°åº¦</h3><p>åœ¨ä¸€æ®µå…³ç³»ä¸­åˆ†æ­§å’Œå†²çªäº§ç”Ÿçš„å¸¸è§åŸå› æ˜¯è§’è‰²æ¨¡ç³Šã€‚</p>\n<h3 id=\"ç›®æ ‡è®¾å®š\"><a href=\"#ç›®æ ‡è®¾å®š\" class=\"headerlink\" title=\"ç›®æ ‡è®¾å®š\"></a>ç›®æ ‡è®¾å®š</h3><p>ç›®æ ‡è®¾å®šåº”å½“éµå¾ª<em>SMART</em>åŸåˆ™ã€‚</p>\n<ul>\n<li>é¿å…è®¾å®šè¿‡å¤šç›®æ ‡</li>\n<li>é¿å…è®¾å®šè´Ÿå‘ç›®æ ‡</li>\n<li>è®¾å®šçŸ­æœŸå’Œé•¿æœŸç›®æ ‡ä»¥åŠè¿‡ç¨‹ç›®æ ‡å’Œæˆç»©ç›®æ ‡</li>\n<li>å®šæœŸé‡å®¡ç›®æ ‡</li>\n</ul>\n<h3 id=\"åˆåŒ-åè®®\"><a href=\"#åˆåŒ-åè®®\" class=\"headerlink\" title=\"åˆåŒ/åè®®\"></a>åˆåŒ/åè®®</h3><p>ä½¿ç”¨è¡Œä¸ºåˆçº¦å’Œä¹¦é¢åè®®ã€‚</p>\n<h2 id=\"ç¬¬-2-ç« -ä¹ é¢˜é›†\"><a href=\"#ç¬¬-2-ç« -ä¹ é¢˜é›†\" class=\"headerlink\" title=\"ç¬¬ 2 ç«  - ä¹ é¢˜é›†\"></a>ç¬¬ 2 ç«  - ä¹ é¢˜é›†</h2><h3 id=\"1-å¯¹äºåˆšå¼€å§‹å‚åŠ è¿åŠ¨æ–¹æ¡ˆçš„ä¸ªä½“è€Œè¨€ï¼Œæœ€é‡è¦çš„å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ\"><a href=\"#1-å¯¹äºåˆšå¼€å§‹å‚åŠ è¿åŠ¨æ–¹æ¡ˆçš„ä¸ªä½“è€Œè¨€ï¼Œæœ€é‡è¦çš„å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ\" class=\"headerlink\" title=\"1. å¯¹äºåˆšå¼€å§‹å‚åŠ è¿åŠ¨æ–¹æ¡ˆçš„ä¸ªä½“è€Œè¨€ï¼Œæœ€é‡è¦çš„å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ\"></a>1. å¯¹äºåˆšå¼€å§‹å‚åŠ è¿åŠ¨æ–¹æ¡ˆçš„ä¸ªä½“è€Œè¨€ï¼Œæœ€é‡è¦çš„å› ç´ æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol>\n<li>å®¶åº­å’Œæœ‹å‹çš„å¤§åŠ›æ”¯æŒ</li>\n<li>è¿åŠ¨è®¾æ–½çš„ä¾¿åˆ©æ€§</li>\n<li>ä¸è¿åŠ¨æœ‰å…³çš„è¡Œä¸ºæ”¹å˜æ„æ„¿åº¦</li>\n<li>ä¸ç§äººæ•™ç»ƒè”ç»œ</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ3ï¼‰ã€‚çœŸæ­£çš„åŠ¨æœºéƒ½æ¥æºäºå†…å¿ƒã€‚</p>\n<h3 id=\"4-ä¸ºäº†ç¡®ä¿å®¢æˆ·åšæŒå‚åŠ è®­ç»ƒï¼Œç§äººæ•™ç»ƒæœ€å¥½é‡‡ç”¨ä¸‹åˆ—å“ªç§ç­–ç•¥ï¼Ÿ\"><a href=\"#4-ä¸ºäº†ç¡®ä¿å®¢æˆ·åšæŒå‚åŠ è®­ç»ƒï¼Œç§äººæ•™ç»ƒæœ€å¥½é‡‡ç”¨ä¸‹åˆ—å“ªç§ç­–ç•¥ï¼Ÿ\" class=\"headerlink\" title=\"4. ä¸ºäº†ç¡®ä¿å®¢æˆ·åšæŒå‚åŠ è®­ç»ƒï¼Œç§äººæ•™ç»ƒæœ€å¥½é‡‡ç”¨ä¸‹åˆ—å“ªç§ç­–ç•¥ï¼Ÿ\"></a>4. ä¸ºäº†ç¡®ä¿å®¢æˆ·åšæŒå‚åŠ è®­ç»ƒï¼Œç§äººæ•™ç»ƒæœ€å¥½é‡‡ç”¨ä¸‹åˆ—å“ªç§ç­–ç•¥ï¼Ÿ</h3><ol>\n<li>ä¸ºå®¢æˆ·è®¾è®¡è¿åŠ¨æ–¹æ¡ˆï¼Œè¿™æ ·å®¢æˆ·å°±åªè®­ç»ƒï¼Œè€Œä¸ä¼šå¯¹è¿åŠ¨æœ¬èº«æƒ³å¤ªå¤š</li>\n<li>é€šè¿‡å†…åœ¨åŠ¨æœºå› ç´ å¯¹å®¢æˆ·è¿›è¡Œæ¿€åŠ±ï¼Œä»¥æå‡å…¶è‡ªæˆ‘æ•ˆèƒ½</li>\n<li>é¼“åŠ±å®¢æˆ·ç‹¬ç«‹å®‰æ’è¿åŠ¨æ–¹æ¡ˆï¼Œä»è€Œä¿ƒè¿›å®¢æˆ·æå‡å†…åœ¨åŠ¨æœº</li>\n<li>ä¸»è¦é€šè¿‡æŒ‡å¼•ï¼ˆè€Œéæ•™è‚²ï¼‰å»ºç«‹è‡ªå·±çš„è¿åŠ¨æ•™å­¦é£æ ¼</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ2ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ3ï¼‰ã€‚æ•™ç»ƒä¸æ˜¯é€šè¿‡â€œå†…åœ¨åŠ¨æœºâ€å¯¹å®¢æˆ·è¿›è¡Œæ¿€åŠ±çš„ã€‚æ•™ç»ƒçš„ç›®çš„æ˜¯<strong>æå‡å†…åœ¨åŠ¨æœº</strong>ã€‚</p>\n<h3 id=\"9-åœ¨ç›‘ç£å¼ç¯å¢ƒä¸­è¿åŠ¨ï¼Œæœ€å¯èƒ½ä¸è¿åŠ¨åšæŒæ°´å¹³æ— å…³çš„å› ç´ æ˜¯ï¼Ÿ\"><a href=\"#9-åœ¨ç›‘ç£å¼ç¯å¢ƒä¸­è¿åŠ¨ï¼Œæœ€å¯èƒ½ä¸è¿åŠ¨åšæŒæ°´å¹³æ— å…³çš„å› ç´ æ˜¯ï¼Ÿ\" class=\"headerlink\" title=\"9. åœ¨ç›‘ç£å¼ç¯å¢ƒä¸­è¿åŠ¨ï¼Œæœ€å¯èƒ½ä¸è¿åŠ¨åšæŒæ°´å¹³æ— å…³çš„å› ç´ æ˜¯ï¼Ÿ\"></a>9. åœ¨ç›‘ç£å¼ç¯å¢ƒä¸­è¿åŠ¨ï¼Œæœ€å¯èƒ½ä¸è¿åŠ¨åšæŒæ°´å¹³æ— å…³çš„å› ç´ æ˜¯ï¼Ÿ</h3><ol>\n<li>æ•™è‚²</li>\n<li>å¹´é¾„</li>\n<li>æ”¶å…¥</li>\n<li>æ€§åˆ«</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚å…¶ä½™å‡ ä¸ªé€‰é¡¹éƒ½æœ‰ç›¸å…³ã€‚</p>\n<h3 id=\"11-åšæŒçš„å®šä¹‰ä¸ºï¼šä¸€ç§å°†è¡Œä¸ºèµ‹äºˆæ–¹å‘å’Œç›®çš„çš„å¿ƒç†é©±åŠ¨åŠ›ã€‚\"><a href=\"#11-åšæŒçš„å®šä¹‰ä¸ºï¼šä¸€ç§å°†è¡Œä¸ºèµ‹äºˆæ–¹å‘å’Œç›®çš„çš„å¿ƒç†é©±åŠ¨åŠ›ã€‚\" class=\"headerlink\" title=\"11. åšæŒçš„å®šä¹‰ä¸ºï¼šä¸€ç§å°†è¡Œä¸ºèµ‹äºˆæ–¹å‘å’Œç›®çš„çš„å¿ƒç†é©±åŠ¨åŠ›ã€‚\"></a>11. åšæŒçš„å®šä¹‰ä¸ºï¼šä¸€ç§å°†è¡Œä¸ºèµ‹äºˆæ–¹å‘å’Œç›®çš„çš„å¿ƒç†é©±åŠ¨åŠ›ã€‚</h3><ol>\n<li>æ­£ç¡®</li>\n<li>é”™è¯¯</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚<strong>åšæŒ</strong>æ˜¯ç§¯æä¸»åŠ¨åœ°å‚åŠ è¿åŠ¨æ–¹æ¡ˆï¼›<strong>æ¿€åŠ±</strong>åˆ™æ˜¯å¿ƒç†é©±åŠ¨åŠ›ã€‚</p>\n<h3 id=\"13-èº«ä½“æ´»åŠ¨çš„ä¸‰ç§ä¸»è¦æ½œåœ¨å†³å®šå› ç´ ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ\"><a href=\"#13-èº«ä½“æ´»åŠ¨çš„ä¸‰ç§ä¸»è¦æ½œåœ¨å†³å®šå› ç´ ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ\" class=\"headerlink\" title=\"13. èº«ä½“æ´»åŠ¨çš„ä¸‰ç§ä¸»è¦æ½œåœ¨å†³å®šå› ç´ ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ\"></a>13. èº«ä½“æ´»åŠ¨çš„ä¸‰ç§ä¸»è¦æ½œåœ¨å†³å®šå› ç´ ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ</h3><ol>\n<li>ä¸ªäººç‰¹è´¨</li>\n<li>èº«ä½“ç‰¹è´¨</li>\n<li>ç¯å¢ƒå› ç´ </li>\n<li>ä½“è‚²æ´»åŠ¨å› ç´ </li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚å…¶ä¸­1ã€3ã€4æ˜¯ä½“è‚²æ´»åŠ¨çš„æ½œåœ¨å†³å®šå› ç´ ã€‚</p>\n<h3 id=\"18-ä¸‹åˆ—æœ¯è¯­ç§ï¼Œå“ªä¸€é¡¹çš„å®šä¹‰ä¸ºï¼šç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›æˆåŠŸå¼€å§‹å¹¶åšæŒæŸç§è¡Œä¸ºï¼Ÿ\"><a href=\"#18-ä¸‹åˆ—æœ¯è¯­ç§ï¼Œå“ªä¸€é¡¹çš„å®šä¹‰ä¸ºï¼šç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›æˆåŠŸå¼€å§‹å¹¶åšæŒæŸç§è¡Œä¸ºï¼Ÿ\" class=\"headerlink\" title=\"18. ä¸‹åˆ—æœ¯è¯­ç§ï¼Œå“ªä¸€é¡¹çš„å®šä¹‰ä¸ºï¼šç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›æˆåŠŸå¼€å§‹å¹¶åšæŒæŸç§è¡Œä¸ºï¼Ÿ\"></a>18. ä¸‹åˆ—æœ¯è¯­ç§ï¼Œå“ªä¸€é¡¹çš„å®šä¹‰ä¸ºï¼šç›¸ä¿¡è‡ªå·±æœ‰èƒ½åŠ›æˆåŠŸå¼€å§‹å¹¶åšæŒæŸç§è¡Œä¸ºï¼Ÿ</h3><ol>\n<li>å†…åœ¨æ¿€åŠ±</li>\n<li>è‡ªæˆ‘æ•ˆèƒ½</li>\n<li>å¤–åœ¨æ¿€åŠ±</li>\n<li>å¿ƒé‡Œæ§åˆ¶æº</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ1ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚æ³¨æ„è¿™æ˜¯â€œæ•ˆèƒ½â€çš„å®šä¹‰ã€‚</p>\n<hr>\n<h1 id=\"ç¬¬-3-ç« -æ²Ÿé€šå’Œæ•™å­¦æŠ€å·§\"><a href=\"#ç¬¬-3-ç« -æ²Ÿé€šå’Œæ•™å­¦æŠ€å·§\" class=\"headerlink\" title=\"ç¬¬ 3 ç«  - æ²Ÿé€šå’Œæ•™å­¦æŠ€å·§\"></a>ç¬¬ 3 ç«  - æ²Ÿé€šå’Œæ•™å­¦æŠ€å·§</h1><h1 id=\"ç¬¬-4-ç« -è¡Œä¸ºæ”¹å˜ä¸å¥åº·å¿ƒç†å­¦åŸºç¡€\"><a href=\"#ç¬¬-4-ç« -è¡Œä¸ºæ”¹å˜ä¸å¥åº·å¿ƒç†å­¦åŸºç¡€\" class=\"headerlink\" title=\"ç¬¬ 4 ç«  - è¡Œä¸ºæ”¹å˜ä¸å¥åº·å¿ƒç†å­¦åŸºç¡€\"></a>ç¬¬ 4 ç«  - è¡Œä¸ºæ”¹å˜ä¸å¥åº·å¿ƒç†å­¦åŸºç¡€</h1>","categories":[],"tags":["å¥èº«","ACE-CPT"]},{"title":"ACE-PTM ç¬¬ I éƒ¨åˆ† ç®€ä»‹","url":"https://lilei.pro/2019/07/14/ace-cpt-part-1/","content":"<h1 id=\"ç¬”è®°å‰è¨€\"><a href=\"#ç¬”è®°å‰è¨€\" class=\"headerlink\" title=\"ç¬”è®°å‰è¨€\"></a>ç¬”è®°å‰è¨€</h1><blockquote>\n<p>ä½œä¸ºå­¦ä¹  <a href=\"https://www.acefitness.org/\" target=\"_blank\" rel=\"noopener\">ACE-CPT</a> çš„è¯»ä¹¦ç¬”è®°ï¼Œè¿™ä¸€ç³»åˆ—å°†æŒ‰ç« èŠ‚åˆ†ä¸ºä¸ƒä¸ªéƒ¨åˆ†ã€‚</p>\n</blockquote>\n<h2 id=\"ç¬¬-I-éƒ¨åˆ†-ç®€ä»‹\"><a href=\"#ç¬¬-I-éƒ¨åˆ†-ç®€ä»‹\" class=\"headerlink\" title=\"ç¬¬ I éƒ¨åˆ† - ç®€ä»‹\"></a>ç¬¬ I éƒ¨åˆ† - ç®€ä»‹</h2><p>ä»‹ç»ç§äººæ•™ç»ƒçš„è§’è‰²å®šä½ä¸æ‰§ä¸šèŒƒå›´ï¼Œå“ªäº›äº‹æƒ…åº”è¯¥åšï¼Œå“ªäº›äº‹æƒ…å¯ä»¥åšï¼Œå“ªäº›äº‹æƒ…ä¸èƒ½åšã€‚</p>\n<h2 id=\"ç¬¬-II-éƒ¨åˆ†-é¢†å¯¼å’Œå®æ–½\"><a href=\"#ç¬¬-II-éƒ¨åˆ†-é¢†å¯¼å’Œå®æ–½\" class=\"headerlink\" title=\"ç¬¬ II éƒ¨åˆ† - é¢†å¯¼å’Œå®æ–½\"></a>ç¬¬ II éƒ¨åˆ† - é¢†å¯¼å’Œå®æ–½</h2><p>ä»æ²Ÿé€šã€æ¿€åŠ±ä¼šå‘˜è§’åº¦ç»™å‡ºæŒ‡å¯¼æ„è§ï¼Œæ˜¯è´¯å½»æ‰§æ•™è¿‡ç¨‹å§‹ç»ˆçš„ä¸­å¿ƒæ€æƒ³ï¼Œå¸®åŠ©æ•™ç»ƒä¸ä¼šå‘˜å»ºç«‹ç›¸äº’ä¿¡èµ–çš„å…³ç³»ã€‚</p>\n<h2 id=\"ç¬¬-III-éƒ¨åˆ†-ACE-æ•´åˆå¼å¥èº«è®­ç»ƒæ¨¡å¼\"><a href=\"#ç¬¬-III-éƒ¨åˆ†-ACE-æ•´åˆå¼å¥èº«è®­ç»ƒæ¨¡å¼\" class=\"headerlink\" title=\"ç¬¬ III éƒ¨åˆ† - ACE æ•´åˆå¼å¥èº«è®­ç»ƒæ¨¡å¼\"></a>ç¬¬ III éƒ¨åˆ† - ACE æ•´åˆå¼å¥èº«è®­ç»ƒæ¨¡å¼</h2><p>å³ ACE-IFT è®­ç»ƒæ¨¡å¼ï¼Œæ˜¯ ACE ç‹¬å®¶çš„è®­ç»ƒè®¡åˆ’ä¸æ¨¡å¼ï¼Œå…ˆè¯„ä¼°ï¼Œç„¶ååœ¨ç¨³å®šæ€§ã€æŠ—é˜»ã€å¿ƒè‚ºç­‰å¤šæ–¹é¢åˆ†åˆ«ç»™å‡ºæŒ‡å¯¼ã€‚</p>\n<h2 id=\"ç¬¬-IV-éƒ¨åˆ†-ç‰¹æ®Šè¿åŠ¨è®¡åˆ’åˆ¶å®šä¸»é¢˜\"><a href=\"#ç¬¬-IV-éƒ¨åˆ†-ç‰¹æ®Šè¿åŠ¨è®¡åˆ’åˆ¶å®šä¸»é¢˜\" class=\"headerlink\" title=\"ç¬¬ IV éƒ¨åˆ† - ç‰¹æ®Šè¿åŠ¨è®¡åˆ’åˆ¶å®šä¸»é¢˜\"></a>ç¬¬ IV éƒ¨åˆ† - ç‰¹æ®Šè¿åŠ¨è®¡åˆ’åˆ¶å®šä¸»é¢˜</h2><p>è®²è§£èº«å¿ƒè¿åŠ¨ä»¥åŠç‰¹æ®Šäººç¾¤çš„è¿åŠ¨æ–¹æ³•ã€‚</p>\n<h2 id=\"ç¬¬-V-éƒ¨åˆ†-æŸä¼¤é¢„é˜²å’Œæ€¥æ•‘\"><a href=\"#ç¬¬-V-éƒ¨åˆ†-æŸä¼¤é¢„é˜²å’Œæ€¥æ•‘\" class=\"headerlink\" title=\"ç¬¬ V éƒ¨åˆ† - æŸä¼¤é¢„é˜²å’Œæ€¥æ•‘\"></a>ç¬¬ V éƒ¨åˆ† - æŸä¼¤é¢„é˜²å’Œæ€¥æ•‘</h2><p>å¸¸è§æŸä¼¤å¯¹è¿åŠ¨è¿‡ç¨‹çš„å½±å“ï¼Œä»¥åŠé­é‡æŸä¼¤æ—¶å€™çš„ç´§æ€¥ç¨‹åºã€‚</p>\n<h2 id=\"ç¬¬-VI-éƒ¨åˆ†-èŒä¸šå’Œæ³•å¾‹è´£ä»»ä»¥åŠä¸šåŠ¡ç­–ç•¥\"><a href=\"#ç¬¬-VI-éƒ¨åˆ†-èŒä¸šå’Œæ³•å¾‹è´£ä»»ä»¥åŠä¸šåŠ¡ç­–ç•¥\" class=\"headerlink\" title=\"ç¬¬ VI éƒ¨åˆ† - èŒä¸šå’Œæ³•å¾‹è´£ä»»ä»¥åŠä¸šåŠ¡ç­–ç•¥\"></a>ç¬¬ VI éƒ¨åˆ† - èŒä¸šå’Œæ³•å¾‹è´£ä»»ä»¥åŠä¸šåŠ¡ç­–ç•¥</h2><p>ç§äººæ•™ç»ƒèŒä¸šçš„æ³•å¾‹æŒ‡å—ã€‚</p>\n<h2 id=\"ç¬¬-VII-éƒ¨åˆ†-è¡¥å……\"><a href=\"#ç¬¬-VII-éƒ¨åˆ†-è¡¥å……\" class=\"headerlink\" title=\"ç¬¬ VII éƒ¨åˆ† - è¡¥å……\"></a>ç¬¬ VII éƒ¨åˆ† - è¡¥å……</h2><p>æ¶µç›–ä¸å±äºä¸Šè¿°ç« èŠ‚çš„å†…å®¹ã€‚</p>\n<hr>\n<h1 id=\"ç¬¬-1-ç« -ç§äººæ•™ç»ƒçš„è§’è‰²å’Œæ‰§ä¸šèŒƒå›´\"><a href=\"#ç¬¬-1-ç« -ç§äººæ•™ç»ƒçš„è§’è‰²å’Œæ‰§ä¸šèŒƒå›´\" class=\"headerlink\" title=\"ç¬¬ 1 ç«  - ç§äººæ•™ç»ƒçš„è§’è‰²å’Œæ‰§ä¸šèŒƒå›´\"></a>ç¬¬ 1 ç«  - ç§äººæ•™ç»ƒçš„è§’è‰²å’Œæ‰§ä¸šèŒƒå›´</h1><h2 id=\"å¥åº·ç…§æŠ¤è”ç›Ÿ\"><a href=\"#å¥åº·ç…§æŠ¤è”ç›Ÿ\" class=\"headerlink\" title=\"å¥åº·ç…§æŠ¤è”ç›Ÿ\"></a>å¥åº·ç…§æŠ¤è”ç›Ÿ</h2><p>å¥åº·ç…§æŠ¤è”ç›Ÿç”±åŒ»ç–—ä¿å¥ä¸“ä¸šäººå‘˜ç»„æˆï¼Œä»–ä»¬é€šè¿‡æ‰§ç…§ã€æ³¨å†Œå’Œ/æˆ–è®¸å¯è¯è·å¾—è®¤å¯ï¼Œå¹¶æä¾›ç›¸å…³æœåŠ¡ä»¥è¯†åˆ«ã€é¢„é˜²å’Œæ²»ç–—ç–¾ç—…å’Œç—…ç—‡ã€‚</p>\n<p>å›¢é˜Ÿæˆå‘˜æ„æˆå¦‚ä¸‹ï¼š</p>\n<ul>\n<li>é’ˆç¸å¸ˆ</li>\n<li>è„Šæ¤æŒ‰æ‘©å¸ˆ</li>\n<li>è¥å…»å¸ˆ</li>\n<li>è‡ªç„¶ç–—æ³•åŒ»ç”Ÿ</li>\n<li>æŠ¤å£«</li>\n<li>åŒ»ç”Ÿ</li>\n<li>è¡Œä¸ºåŒ»å¸ˆ</li>\n<li>ç‰©ç†æ²»ç–—å¸ˆ</li>\n<li>èŒä¸šç‰©ç†æ²»ç–—å¸ˆ</li>\n<li>è¿åŠ¨æ•™ç»ƒ</li>\n</ul>\n<h2 id=\"ACE-ç§äººæ•™ç»ƒè®¤è¯\"><a href=\"#ACE-ç§äººæ•™ç»ƒè®¤è¯\" class=\"headerlink\" title=\"ACE ç§äººæ•™ç»ƒè®¤è¯\"></a>ACE ç§äººæ•™ç»ƒè®¤è¯</h2><p>ä¸“ä¸šèƒ½åŠ›é—¨æ§›è¢«ç§°ä¸ºä»äº‹æŸç§è¡Œä¸šæ‰€éœ€çš„â€œ<strong>æœ€ä½èƒ½åŠ›</strong>â€ã€‚å¯¹äºä¸“ä¸šäººå‘˜è€Œè¨€ï¼Œæ‰§ç…§å¯ä»¥å°†å…¶ä¸æœªè¯æ˜è‡ªå·±å¤„äºåŒä¸€èƒ½åŠ›æ°´å¹³çš„äººåŒºåˆ†å¼€ã€‚é€šè¿‡è·å¾— ACE ç§äººæ•™ç»ƒè®¤è¯ï¼Œä¸“ä¸šäººå‘˜è¯æ˜äº†å…¶åœ¨ä»¥ä¸‹æ–¹é¢çš„èƒ½åŠ›ï¼šåº”ç”¨ç›¸å…³çŸ¥è¯†åœ¨å„ç§å®é™…æƒ…å†µä¸‹åšå‡ºå®‰å…¨æœ‰æ•ˆçš„è¿åŠ¨è®¡åˆ’å†³ç­–ï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘å®¢æˆ·é£é™©å’Œä¼¤å®³ã€‚</p>\n<h3 id=\"â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰\"><a href=\"#â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰\" class=\"headerlink\" title=\"â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰\"></a>â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰</h3><h3 id=\"ACE-è®¤è¯çš„ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´\"><a href=\"#ACE-è®¤è¯çš„ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´\" class=\"headerlink\" title=\"ACE è®¤è¯çš„ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´\"></a>ACE è®¤è¯çš„ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´</h3><p>æ ¹æ® <strong>IDEA ç§äººå¥èº«æ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´</strong> è¡¨æ ¼ï¼Œç§äººæ•™ç»ƒä¸å¯ä»¥åšä»¥ä¸‹äº‹æƒ…ï¼š</p>\n<ul>\n<li>è¿›è¡Œè¯Šæ–­</li>\n<li>å¼€å¤„æ–¹</li>\n<li>ä¸ºå®¢æˆ·è§„å®šé¥®é£Ÿæˆ–æ¨èå…·ä½“çš„è¡¥å……å‰‚</li>\n<li>æ²»ç–—ä¼¤å®³æˆ–ç–¾ç—…</li>\n<li>ç›‘ç£åŒ»ç–—è½¬ä»‹ç»å®¢æˆ·çš„è¿›å±•</li>\n<li>æä¾›åº·å¤æœåŠ¡</li>\n<li>æä¾›å’¨è¯¢</li>\n<li>ä¸æ‚£è€…åˆä½œ</li>\n</ul>\n<h3 id=\"ACE-è®¤è¯çš„ç§äººæ•™ç»ƒçš„çŸ¥è¯†ã€æŠ€èƒ½å’Œèƒ½åŠ›\"><a href=\"#ACE-è®¤è¯çš„ç§äººæ•™ç»ƒçš„çŸ¥è¯†ã€æŠ€èƒ½å’Œèƒ½åŠ›\" class=\"headerlink\" title=\"ACE è®¤è¯çš„ç§äººæ•™ç»ƒçš„çŸ¥è¯†ã€æŠ€èƒ½å’Œèƒ½åŠ›\"></a>ACE è®¤è¯çš„ç§äººæ•™ç»ƒçš„çŸ¥è¯†ã€æŠ€èƒ½å’Œèƒ½åŠ›</h3><p>ACE ç§äººæ•™ç»ƒè€ƒè¯•åŒ…æ‹¬ä»¥ä¸‹é¢†åŸŸ</p>\n<ul>\n<li>å®¢æˆ·é¢è°ˆå’Œè¯„ä¼° - 31%</li>\n<li>è®¡åˆ’è®¾è®¡å’Œæ‰§è¡Œ - 33%</li>\n<li>è¿›é˜¶å’Œè°ƒæ•´ - 19%</li>\n<li>ä¸“ä¸šè¡Œä¸ºã€å®‰å…¨æ€§å’Œé£é™©ç®¡ç† - 17%</li>\n</ul>\n<h4 id=\"æ•™è‚²å’Œç»éªŒ\"><a href=\"#æ•™è‚²å’Œç»éªŒ\" class=\"headerlink\" title=\"æ•™è‚²å’Œç»éªŒ\"></a>æ•™è‚²å’Œç»éªŒ</h4><p>å»ºè®®åº”è¯•è€…æµå‡ºå¹³å‡ä¸‰è‡³å››ä¸ªæœˆçš„å­¦ä¹ æ—¶é—´æ¥å……åˆ†å‡†å¤‡ç§äººæ•™ç»ƒè®¤è¯è€ƒè¯•ã€‚</p>\n<h3 id=\"æ‰§ä¸šè´£ä»»å’Œé“å¾·è§„èŒƒ\"><a href=\"#æ‰§ä¸šè´£ä»»å’Œé“å¾·è§„èŒƒ\" class=\"headerlink\" title=\"æ‰§ä¸šè´£ä»»å’Œé“å¾·è§„èŒƒ\"></a>æ‰§ä¸šè´£ä»»å’Œé“å¾·è§„èŒƒ</h3><p>ACE åˆ¶å®šäº†<strong>ACE é“å¾·å‡†åˆ™</strong>ï¼Œæ‰€æœ‰ ACE è®¤è¯çš„ä¸“ä¸šäººå‘˜å’Œåº”è¯•è€…éƒ½å¿…é¡»ç†Ÿæ‚‰å¹¶éµå®ˆé“å¾·å‡†åˆ™å’Œä¸“ä¸šæ—¶é—´å’Œçºªå¾‹ç¨‹åºã€‚</p>\n<h4 id=\"ACE-ä¸“ä¸šå®è·µå’Œçºªå¾‹ç¨‹åº\"><a href=\"#ACE-ä¸“ä¸šå®è·µå’Œçºªå¾‹ç¨‹åº\" class=\"headerlink\" title=\"ACE ä¸“ä¸šå®è·µå’Œçºªå¾‹ç¨‹åº\"></a>ACE ä¸“ä¸šå®è·µå’Œçºªå¾‹ç¨‹åº</h4><h4 id=\"æ‰§ç…§æœŸå’Œç»­æœŸ\"><a href=\"#æ‰§ç…§æœŸå’Œç»­æœŸ\" class=\"headerlink\" title=\"æ‰§ç…§æœŸå’Œç»­æœŸ\"></a>æ‰§ç…§æœŸå’Œç»­æœŸ</h4><p>ACE è®¤è¯æœ‰æ•ˆæœŸä¸º<strong>ä¸¤å¹´</strong>ï¼Œä»è·å¾—è®¤è¯ä¹‹æ—¥èµ·å¼€å§‹è®¡ç®—ï¼Œäºå½“æœˆæœ€åä¸€å¤©åˆ°æœŸã€‚ç»­æœŸåˆ™éœ€è¦å®Œæˆè‡³å°‘ 20 å°æ—¶çš„æŒç»­æ•™è‚²å­¦åˆ†ï¼ˆ2.0 CECï¼‰ï¼Œå¹¶æŒæœ‰å½“å‰çš„<strong>å¿ƒè‚ºå¤è‹ï¼ˆCPRï¼‰</strong>è¯ä¹¦ã€‚å¦‚æœæŒè¯äººç”Ÿæ´»åœ¨åŒ—ç¾ï¼Œåˆ™å¿…é¡»èƒ½å¤Ÿæ­£ç¡®ä½¿ç”¨<strong>è‡ªåŠ¨å¤–éƒ¨é™¤é¢¤å™¨ï¼ˆAEDï¼‰</strong>ã€‚</p>\n<p>ACE ä¸ºè¶…è¿‡æˆªæ­¢æœŸé™çš„ä¸“ä¸šäººå‘˜çš„ç»­æœŸç•™å‡ºå…­ä¸ªæœˆçš„å»¶é•¿æœŸé™ã€‚</p>\n<h4 id=\"å®¢æˆ·éšç§\"><a href=\"#å®¢æˆ·éšç§\" class=\"headerlink\" title=\"å®¢æˆ·éšç§\"></a>å®¢æˆ·éšç§</h4><h4 id=\"è½¬ä»‹ç»\"><a href=\"#è½¬ä»‹ç»\" class=\"headerlink\" title=\"è½¬ä»‹ç»\"></a>è½¬ä»‹ç»</h4><h4 id=\"è¡¥å……å‰‚å’Œå…¶ä»–è¥å…»ç›¸å…³é—®é¢˜\"><a href=\"#è¡¥å……å‰‚å’Œå…¶ä»–è¥å…»ç›¸å…³é—®é¢˜\" class=\"headerlink\" title=\"è¡¥å……å‰‚å’Œå…¶ä»–è¥å…»ç›¸å…³é—®é¢˜\"></a>è¡¥å……å‰‚å’Œå…¶ä»–è¥å…»ç›¸å…³é—®é¢˜</h4><p>è¡¥å……å‰‚<strong>ä¸å—ç¾å›½é£Ÿå“å’Œè¯ç‰©ç®¡ç†å±€ï¼ˆFDAï¼‰ç®¡åˆ¶ï¼Œå› æ­¤æ— æ³•ä¿è¯èµ·å¼ºåº¦ã€çº¯åº¦ã€å®‰å…¨æ€§å’Œæ•ˆæœã€‚</strong>ç§äººæ•™ç»ƒä»…ä»…æœ‰èµ„æ ¼å‘å®¢æˆ·æ¨èè¡¥å……å‰‚ï¼Œè€Œæ²¡æœ‰èµ„æ ¼æ¨èè¯ç‰©æˆ–å¼€å…·è¯ç‰©ã€‚</p>\n<h4 id=\"æ‰€æä¾›æœåŠ¡è¶…å‡ºæ‰§ä¸šèŒƒå›´çš„åæœ\"><a href=\"#æ‰€æä¾›æœåŠ¡è¶…å‡ºæ‰§ä¸šèŒƒå›´çš„åæœ\" class=\"headerlink\" title=\"æ‰€æä¾›æœåŠ¡è¶…å‡ºæ‰§ä¸šèŒƒå›´çš„åæœ\"></a>æ‰€æä¾›æœåŠ¡è¶…å‡ºæ‰§ä¸šèŒƒå›´çš„åæœ</h4><h2 id=\"ç”±-NCCA-è¿›è¡Œçš„å¥åº·ç…§æŠ¤è”ç›Ÿèµ„æ ¼è¯ä¹¦è®¤è¯\"><a href=\"#ç”±-NCCA-è¿›è¡Œçš„å¥åº·ç…§æŠ¤è”ç›Ÿèµ„æ ¼è¯ä¹¦è®¤è¯\" class=\"headerlink\" title=\"ç”± NCCA è¿›è¡Œçš„å¥åº·ç…§æŠ¤è”ç›Ÿèµ„æ ¼è¯ä¹¦è®¤è¯\"></a>ç”± NCCA è¿›è¡Œçš„å¥åº·ç…§æŠ¤è”ç›Ÿèµ„æ ¼è¯ä¹¦è®¤è¯</h2><h3 id=\"å¥èº«ä¸å¥åº·è¡Œä¸šçš„è®¤å¯\"><a href=\"#å¥èº«ä¸å¥åº·è¡Œä¸šçš„è®¤å¯\" class=\"headerlink\" title=\"å¥èº«ä¸å¥åº·è¡Œä¸šçš„è®¤å¯\"></a>å¥èº«ä¸å¥åº·è¡Œä¸šçš„è®¤å¯</h3><h3 id=\"æ•™è‚²ç•Œçš„è®¤å¯\"><a href=\"#æ•™è‚²ç•Œçš„è®¤å¯\" class=\"headerlink\" title=\"æ•™è‚²ç•Œçš„è®¤å¯\"></a>æ•™è‚²ç•Œçš„è®¤å¯</h3><p>ACE æ•™è‚²ä¼™ä¼´è®¡åˆ’æä¾›å››é—¨ç‹¬ç«‹çš„å¤§å­¦è¯¾ç¨‹ï¼š</p>\n<ul>\n<li>ç§æ•™</li>\n<li>å›¢ä½“è¿åŠ¨</li>\n<li>å¥åº·æ•™ç»ƒ</li>\n<li>ç‰¹æ®Šäººç¾¤è¿åŠ¨è¯¾ç¨‹</li>\n</ul>\n<h3 id=\"åŠ³å·¥éƒ¨çš„è®¤å¯\"><a href=\"#åŠ³å·¥éƒ¨çš„è®¤å¯\" class=\"headerlink\" title=\"åŠ³å·¥éƒ¨çš„è®¤å¯\"></a>åŠ³å·¥éƒ¨çš„è®¤å¯</h3><h2 id=\"èŒä¸šå‘å±•\"><a href=\"#èŒä¸šå‘å±•\" class=\"headerlink\" title=\"èŒä¸šå‘å±•\"></a>èŒä¸šå‘å±•</h2><h3 id=\"æŒç»­æ•™è‚²\"><a href=\"#æŒç»­æ•™è‚²\" class=\"headerlink\" title=\"æŒç»­æ•™è‚²\"></a>æŒç»­æ•™è‚²</h3><h4 id=\"é«˜çº§çŸ¥è¯†\"><a href=\"#é«˜çº§çŸ¥è¯†\" class=\"headerlink\" title=\"é«˜çº§çŸ¥è¯†\"></a>é«˜çº§çŸ¥è¯†</h4><h4 id=\"ä¸“ä¸šåŒ–\"><a href=\"#ä¸“ä¸šåŒ–\" class=\"headerlink\" title=\"ä¸“ä¸šåŒ–\"></a>ä¸“ä¸šåŒ–</h4><h3 id=\"å­¦ä½\"><a href=\"#å­¦ä½\" class=\"headerlink\" title=\"å­¦ä½\"></a>å­¦ä½</h3><h3 id=\"é¢å¤–çš„å¥èº«æ‰§ç…§\"><a href=\"#é¢å¤–çš„å¥èº«æ‰§ç…§\" class=\"headerlink\" title=\"é¢å¤–çš„å¥èº«æ‰§ç…§\"></a>é¢å¤–çš„å¥èº«æ‰§ç…§</h3><h3 id=\"å¥åº·ç…§æŠ¤è”ç›Ÿçš„æ–°ä¸“ä¸šé¢†åŸŸ\"><a href=\"#å¥åº·ç…§æŠ¤è”ç›Ÿçš„æ–°ä¸“ä¸šé¢†åŸŸ\" class=\"headerlink\" title=\"å¥åº·ç…§æŠ¤è”ç›Ÿçš„æ–°ä¸“ä¸šé¢†åŸŸ\"></a>å¥åº·ç…§æŠ¤è”ç›Ÿçš„æ–°ä¸“ä¸šé¢†åŸŸ</h3><hr>\n<h1 id=\"ç¬¬-1-ç« -ä¹ é¢˜é›†\"><a href=\"#ç¬¬-1-ç« -ä¹ é¢˜é›†\" class=\"headerlink\" title=\"ç¬¬ 1 ç«  - ä¹ é¢˜é›†\"></a>ç¬¬ 1 ç«  - ä¹ é¢˜é›†</h1><h2 id=\"6-ä¸‹åˆ—å“ªä¸€é¡¹å±äº-ACE-è®¤è¯ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´ï¼Ÿ\"><a href=\"#6-ä¸‹åˆ—å“ªä¸€é¡¹å±äº-ACE-è®¤è¯ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´ï¼Ÿ\" class=\"headerlink\" title=\"6. ä¸‹åˆ—å“ªä¸€é¡¹å±äº ACE è®¤è¯ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´ï¼Ÿ\"></a>6. ä¸‹åˆ—å“ªä¸€é¡¹å±äº ACE è®¤è¯ç§äººæ•™ç»ƒçš„æ‰§ä¸šèŒƒå›´ï¼Ÿ</h2><ol>\n<li>å¸®åŠ©å®¢æˆ·æ›´å¥½åœ°äº†è§£é£Ÿç‰©åˆ†é‡ä¸å¥åº·é£Ÿå“ï¼Œä»è€Œå¸®åŠ©ä»–ä»¬åšå‡ºæ›´æ˜æ™ºçš„é€‰æ‹©</li>\n<li>ä¸ºå®¢æˆ·æä¾› 4 å‘¨é£Ÿè°±ä¸è´­ç‰©æ¸…å•ï¼Œå¸®åŠ©ä»–ä»¬èµ°ä¸Šå¥åº·é¥®é£Ÿçš„æ­£è½¨</li>\n<li>å›é¡¾è¿‡å» 24 å°æ—¶çš„é¥®é£Ÿæƒ…å†µï¼Œå¸®åŠ©å®¢æˆ·äº†è§£è‡ªå·±ç¼ºå°‘å“ªäº›å¾®é‡å…ƒç´ </li>\n<li>å°±æƒŠå–œä»£è°¢ç‡ï¼ˆRMRï¼‰ä»¥åŠçƒ­é‡æ‘„å…¥è¦å°äº RMR ç­‰çŸ¥è¯†å¯¹å®¢æˆ·è¿›è¡Œæ•™è‚²ï¼Œå¸®åŠ©å®¢æˆ·å‡è½»ä½“é‡</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ4ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ1ï¼‰ã€‚å…³é”®ç‚¹åœ¨äºé€‰æ‹©æƒç”±å®¢æˆ·æŒæœ‰ï¼Œè€Œéç§äººæ•™ç»ƒåšå‡ºé€‰æ‹© or å†³å®šã€‚</p>\n<h2 id=\"9-å…³äºç§äººæ•™ç»ƒå‘å®¢æˆ·æ¨èè¥å…»è¡¥å……å‰‚ï¼Œä¸‹åˆ—å™è¿°æœ€æ°å½“çš„ä¸€é¡¹æ˜¯\"><a href=\"#9-å…³äºç§äººæ•™ç»ƒå‘å®¢æˆ·æ¨èè¥å…»è¡¥å……å‰‚ï¼Œä¸‹åˆ—å™è¿°æœ€æ°å½“çš„ä¸€é¡¹æ˜¯\" class=\"headerlink\" title=\"9. å…³äºç§äººæ•™ç»ƒå‘å®¢æˆ·æ¨èè¥å…»è¡¥å……å‰‚ï¼Œä¸‹åˆ—å™è¿°æœ€æ°å½“çš„ä¸€é¡¹æ˜¯\"></a>9. å…³äºç§äººæ•™ç»ƒå‘å®¢æˆ·æ¨èè¥å…»è¡¥å……å‰‚ï¼Œä¸‹åˆ—å™è¿°æœ€æ°å½“çš„ä¸€é¡¹æ˜¯</h2><ol>\n<li>åªèƒ½å‘å®¢æˆ·æ¨èè‡ªå·±å·²æŠ•èŒä¸šè´£ä»»é™©çš„è¡¥å……å‰‚</li>\n<li>å¦‚æœç§äººæ•™ç»ƒæœªæŒæœ‰æ³¨å†Œè¥å…»å¸ˆæˆ–åŒ»å­¦åšå£«å­¦ä½ç­‰å…¶ä»–å¸§æ•°ï¼Œåˆ™ä¸å…·æœ‰å‘ä»–äººæ¨èè¡¥å……å‰‚çš„åˆæ³•èµ„è´¨</li>\n<li>ç§äººæ•™ç»ƒåº”æ¥å—ä¸“é—¨çš„çŸ¥è¯†åŸ¹è®­åæ‰èƒ½å‘å®¢æˆ·æ¨èè¥å…»è¡¥å……å‰‚</li>\n<li>ç”±äºæœç”¨è¡¥å……å‰‚ä¸å…¶ä»–è¯ç‰©å¯èƒ½ä¼šå¼•èµ·å¹¶å‘ç—‡ï¼Œç§äººæ•™ç»ƒåªèƒ½å‘å®¢æˆ·æ¨èæ¤ç‰©æ€§è¡¥å……å‰‚</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚â€œä¸“é—¨çš„çŸ¥è¯†åŸ¹è®­â€ä¸å¤Ÿç²¾ç¡®ã€‚</p>\n<h2 id=\"15-â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ\"><a href=\"#15-â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ\" class=\"headerlink\" title=\"15. â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ\"></a>15. â€œæ‰§ä¸šèŒƒå›´â€çš„å®šä¹‰ä¸åŒ…æ‹¬å“ªä¸€é¡¹ï¼Ÿ</h2><ol>\n<li>ä¸“ä¸šå¥èº«äººå‘˜åœ¨ç‰¹å®šé¢†åŸŸå¯æä¾›çš„åˆæ³•æœåŠ¡èŒƒå›´</li>\n<li>åœ¨å·¥ä½œåœºæ‰€å¿…é¡»éµå®ˆçš„èŒä¸šé“å¾·å‡†åˆ™</li>\n<li>å¯ä»¥ä¾›ç§æ•™æœåŠ¡çš„åœºæ‰€</li>\n<li>å¿…é¡»éµå®ˆçš„æŒ‡å—æˆ–å‚æ•°æ ‡å‡†</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ2ï¼‰ã€‚é“å¾·æ˜¯é“å¾·ï¼Œä¸šåŠ¡æ˜¯ä¸šåŠ¡ã€‚</p>\n<h2 id=\"20-å¦‚æœå®¢æˆ·æåˆ°è‡ªå·±å‚åŠ å‘¨æœ«ç½‘çƒæ¯”èµ›åè‚Œè‚‰é…¸ç—›ï¼Œæ•™ç»ƒç»™äºˆçš„æœ€æ°å½“çš„å›åº”æ˜¯ï¼Ÿ\"><a href=\"#20-å¦‚æœå®¢æˆ·æåˆ°è‡ªå·±å‚åŠ å‘¨æœ«ç½‘çƒæ¯”èµ›åè‚Œè‚‰é…¸ç—›ï¼Œæ•™ç»ƒç»™äºˆçš„æœ€æ°å½“çš„å›åº”æ˜¯ï¼Ÿ\" class=\"headerlink\" title=\"20. å¦‚æœå®¢æˆ·æåˆ°è‡ªå·±å‚åŠ å‘¨æœ«ç½‘çƒæ¯”èµ›åè‚Œè‚‰é…¸ç—›ï¼Œæ•™ç»ƒç»™äºˆçš„æœ€æ°å½“çš„å›åº”æ˜¯ï¼Ÿ\"></a>20. å¦‚æœå®¢æˆ·æåˆ°è‡ªå·±å‚åŠ å‘¨æœ«ç½‘çƒæ¯”èµ›åè‚Œè‚‰é…¸ç—›ï¼Œæ•™ç»ƒç»™äºˆçš„æœ€æ°å½“çš„å›åº”æ˜¯ï¼Ÿ</h2><ol>\n<li>æ¨èå®¢æˆ·æœç”¨æŠ—ç‚ç±»éå¤„æ–¹è¯</li>\n<li>å»ºè®®å®¢æˆ·åœ¨ä¸‹æ¬¡æ¯”èµ›å‰æœç”¨è‚Œé…¸è¡¥å……å‰‚</li>\n<li>å¯¹æ·±å±‚ç»„ç»‡è¿›è¡ŒæŒ‰æ‘©å¤„ç†ï¼Œå¸®åŠ©ç¼“è§£è‚Œè‚‰é…¸ç—›</li>\n<li>ä¸å®¢æˆ·æ¢è®¨å¯¹æ‚£å¤„è¿›è¡Œå†·æ•·çš„æ­£ç¡®æ–¹æ³•</li>\n</ol>\n<p>é”™è¯¯é€‰é¡¹ï¼ˆ3ï¼‰ï¼Œæ­£ç¡®ç­”æ¡ˆï¼ˆ4ï¼‰ã€‚å…¶ä½™é€‰é¡¹è¶…å‡ºæ‰§ä¸šèŒƒå›´ã€‚</p>\n","categories":[],"tags":["å¥èº«","ACE-CPT"]},{"title":"ACE-CPT è€ƒè¯•ä¿¡æ¯æ±‡æ€»","url":"https://lilei.pro/2019/07/14/ace-cpt-qualification/","content":"<p><a href=\"https://zhuanlan.zhihu.com/p/64605617\" target=\"_blank\" rel=\"noopener\">å›½å†…è‡ªè€ƒACE-CPTå¿ƒå¾—ï¼ˆä¸€ï¼‰è€ƒè¯•æµç¨‹</a></p>\n<p><a href=\"https://zhuanlan.zhihu.com/p/67532892\" target=\"_blank\" rel=\"noopener\">å›½å†…è‡ªè€ƒACE-CPTå¿ƒå¾—ï¼ˆäºŒï¼‰è¯»è€…é—®ç­”</a></p>\n<p><a href=\"https://www.zhihu.com/question/54711544\" target=\"_blank\" rel=\"noopener\">æ•™æå“ªé‡Œä¹°</a></p>\n<h2 id=\"å››å¤§è®¤è¯\"><a href=\"#å››å¤§è®¤è¯\" class=\"headerlink\" title=\"å››å¤§è®¤è¯\"></a>å››å¤§è®¤è¯</h2><ul>\n<li>ACSM</li>\n<li>NSCA</li>\n<li>ACE</li>\n<li>NASM</li>\n</ul>\n<h2 id=\"æ•™æ\"><a href=\"#æ•™æ\" class=\"headerlink\" title=\"æ•™æ\"></a>æ•™æ</h2><p>1000é¡µæ•™æï¼Œéœ€è¦100hå­¦ä¹ æ—¶é—´ã€‚</p>\n<ul>\n<li>å®˜ç½‘è‹±æ–‡ç‰ˆ</li>\n<li>å®˜ç½‘ç¿»è¯‘ç‰ˆ</li>\n<li>åŸ¹è®­æœºæ„ç¿»è¯‘ç‰ˆ</li>\n</ul>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190714_acecpt/æ•™æ.jpg\" alt=\"æ•™æ\" title=\"\">\n                </div>\n                <div class=\"image-caption\">æ•™æ</div>\n            </figure>\n<ol>\n<li>Personal Trainer Manual â€”â€” ä¸»è¦æ•™æï¼Œ80%è€ƒé¢˜æ¥æºäºæ­¤</li>\n<li>Essential of Exercise Science â€”â€” è¾…åŠ©ææ–™ï¼Œè§£å‰–ã€è¥å…»ã€ç”Ÿç†ç­‰</li>\n<li>Study Companion â€”â€” è¯¾åä¹ é¢˜</li>\n<li>å®£ä¼ æ‰‹å†Œ â€”â€” æ²¡ç”¨</li>\n</ol>\n<p>å®˜ç½‘æœ‰åœ¨çº¿æ¨¡æ‹Ÿé¢˜ã€‚</p>\n<p>è€ƒé¢˜åˆ†å¸ƒã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190714_acecpt/è€ƒé¢˜åˆ†å¸ƒ.jpg\" alt=\"è€ƒé¢˜åˆ†å¸ƒ\" title=\"\">\n                </div>\n                <div class=\"image-caption\">è€ƒé¢˜åˆ†å¸ƒ</div>\n            </figure>\n<h2 id=\"è€ƒè¯•\"><a href=\"#è€ƒè¯•\" class=\"headerlink\" title=\"è€ƒè¯•\"></a>è€ƒè¯•</h2><p>æºå¸¦èº«ä»½è¯ã€é©¾ç…§ã€æŠ¤ç…§ã€CPRè¯ã€‚</p>\n<p>3å°æ—¶ï¼Œ150é“å•é€‰é¢˜ï¼Œ125é¢˜è®¡å…¥æ€»åˆ†ã€‚æ¯é“é¢˜éƒ½æœ‰è‹±æ–‡åŸæ–‡å’Œä¸­æ–‡ç¿»è¯‘ã€‚å¼€è€ƒå‰ä¼šæä¾›çº¸ç¬”ã€‚</p>\n<p>ç”µè„‘ä¸Šæœ‰å·¥å…·ï¼š</p>\n<ul>\n<li>é¢˜ç›®æ ‡è®°</li>\n<li>æœªç­”é¢˜æ•°é‡</li>\n<li>è®¡ç®—å™¨</li>\n</ul>\n<p>è€ƒè¯•æäº¤åç«‹é©¬å‡ºåˆ†æ•°ã€‚æ€»åˆ†800åˆ†ï¼Œè¶…è¿‡500åˆ†åŠæ ¼ã€‚</p>\n<h2 id=\"æŠ¥å\"><a href=\"#æŠ¥å\" class=\"headerlink\" title=\"æŠ¥å\"></a>æŠ¥å</h2><p>å®˜ç½‘æŠ¥åã€‚399åˆ€ã€‚</p>\n<p>æå‰ä¸€ä¸ªæœˆç”³è¯·è€ƒåœºã€‚</p>\n<p>æ€¥æ•‘åŸ¹è®­ï¼šCPR or AEDï¼Œåœ¨å½“åœ°çº¢åå­—ä¼šæŠ¥åï¼Œä¸€å‘¨æœ«æ‹¿è¯ã€‚</p>\n<h2 id=\"ç»§ç»­æ•™è‚²\"><a href=\"#ç»§ç»­æ•™è‚²\" class=\"headerlink\" title=\"ç»§ç»­æ•™è‚²\"></a>ç»§ç»­æ•™è‚²</h2><p>ä¸¤å¹´å†… 2.0 å­¦åˆ† + CPR</p>\n","categories":[],"tags":["å¥èº«","ACE-CPT"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬å››éƒ¨åˆ† ä¹ æƒ¯ä¸ƒ ä¸æ–­æ›´æ–°â€”â€”å¹³è¡¡çš„è‡ªæˆ‘æ›´æ–°çš„åŸåˆ™","url":"https://lilei.pro/2019/04/07/Seven-Habbits-10/","content":"<p>äººç”Ÿæœ€å€¼å¾—çš„æŠ•èµ„å°±æ˜¯é”»ç‚¼è‡ªå·±ï¼Œå› ä¸ºç”Ÿæ´»ä¸æœåŠ¡äººç¾¤éƒ½å¾—é è‡ªå·±ï¼Œè¿™æ˜¯æœ€çœŸè´µçš„å·¥å…·ã€‚</p>\n<p>å·¥ä½œæœ¬èº«å¹¶ä¸èƒ½å¸¦æ¥ç»æµä¸Šçš„å®‰å…¨æ„Ÿï¼Œå…·å¤‡è‰¯å¥½çš„æ€è€ƒã€å­¦ä¹ ã€åˆ›é€ ä¸é€‚åº”èƒ½åŠ›ï¼Œæ‰èƒ½ç«‹äºä¸è´¥ä¹‹åœ°ã€‚æ‹¥æœ‰è´¢å¯Œï¼Œå¹¶ä¸ä»£è¡¨ç»æµç‹¬ç«‹ï¼Œæ‹¥æœ‰åˆ›é€ è´¢å¯Œçš„èƒ½åŠ›æ‰çœŸæ­£å¯é ã€‚</p>\n<h1 id=\"è‡ªæˆ‘æå‡å’Œå®Œå–„çš„å››ä¸ªå±‚é¢\"><a href=\"#è‡ªæˆ‘æå‡å’Œå®Œå–„çš„å››ä¸ªå±‚é¢\" class=\"headerlink\" title=\"è‡ªæˆ‘æå‡å’Œå®Œå–„çš„å››ä¸ªå±‚é¢\"></a>è‡ªæˆ‘æå‡å’Œå®Œå–„çš„å››ä¸ªå±‚é¢</h1><p>ä¹ æƒ¯ä¸ƒå°±æ˜¯ä¸ªäººäº§èƒ½ã€‚å®ƒä¿æŠ¤å¹¶ä¼˜åŒ–ä½ æ‰€æ‹¥æœ‰çš„æœ€é‡è¦çš„èµ„äº§â€”â€”ä½ è‡ªå·±ã€‚å®ƒä»å››ä¸ªå±‚é¢æ›´æ–°ä½ çš„å¤©æ€§ï¼Œé‚£å°±æ˜¯ï¼šèº«ä½“ã€ç²¾ç¥ã€æ™ºåŠ›ã€ç¤¾ä¼š/æƒ…æ„Ÿã€‚</p>\n<h2 id=\"èº«ä½“å±‚é¢\"><a href=\"#èº«ä½“å±‚é¢\" class=\"headerlink\" title=\"èº«ä½“å±‚é¢\"></a>èº«ä½“å±‚é¢</h2><p>èº«ä½“å±‚é¢æŒ‡æœ‰æ•ˆå‘µæŠ¤æˆ‘ä»¬çš„èº«ä½“â€”â€”å¥åº·é¥®é£Ÿï¼Œå……è¶³ä¼‘æ¯ä»¥åŠå®šæœŸé”»ç‚¼ã€‚</p>\n<p>é”»ç‚¼å±äºç¬¬äºŒç±»äº‹åŠ¡ï¼Œä½†æ˜¯ç”±äºä¸å…·ç´§è¿«æ€§ï¼Œæ‰€ä»¥å¾ˆå°‘äººèƒ½åšæŒä¸æ‡ˆï¼Œç»“æœç»ˆæœ‰ä¸€å¤©æˆ‘ä»¬ä¼šå‘ç°è‡ªå·±é™·å…¥äº†ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œä¸å¾—ä¸é¢å¯¹å¥åº·é—®é¢˜å’Œå±æœºï¼Œè€ŒåŸå› æ­£æ˜¯ä¹‹å‰å¯¹é”»ç‚¼çš„å¿½è§†ã€‚</p>\n<p>é”»ç‚¼çš„æ‰€æœ‰å¥½å¤„å‡ ä¹éƒ½äº§ç”Ÿäºæœ€åé˜¶æ®µã€‚æˆ‘æƒ³å¢å¼ºåŠ›é‡ï¼Œå°±å¿…é¡»ç­‰åˆ°è‚Œè‚‰çº¤ç»´æ’•è£‚ï¼Œç¥ç»çº¤ç»´æ„Ÿåˆ°ç–¼ç—›æ‰è¡Œï¼Œå› ä¸ºè¿™æ—¶å€™è‡ªç„¶æœºåˆ¶æ‰ä¼šäºˆä»¥è¿‡åº¦è¡¥å¿ï¼Œçº¤ç»´åœ¨ 48 å°æ—¶åä¼šå˜å¾—æ›´åŠ åšéŸ§ã€‚</p>\n<p>æƒ…æ„Ÿâ€œè‚Œè‚‰â€ï¼ˆæ¯”å¦‚è€å¿ƒï¼‰ä¹Ÿæ˜¯ä¸€æ ·ã€‚å½“å¯¹è€å¿ƒçš„ç£¨ç»ƒè¶…è¶Šè¿‡å»çš„è®°å½•æ—¶ï¼Œæƒ…æ„Ÿçº¤ç»´å°±ä¼šæ–­è£‚ï¼Œè‡ªç„¶æœºåˆ¶å°±ä¼šäºˆä»¥è¿‡åº¦è¡¥å¿ï¼Œä¸‹ä¸€æ¬¡çº¤ç»´å°±ä¼šæ›´åŠ åšéŸ§ã€‚</p>\n<p>åˆšå¼€å§‹æ—¶ä¹Ÿè®¸ä½ å¹¶ä¸å–œæ¬¢é”»ç‚¼ï¼Œç”šè‡³è¿˜å¾ˆåŒæ¶ï¼Œä½†æ˜¯ä¸€å®šè¦ç§¯æä¸€ç‚¹ï¼ŒåšæŒä¸‹å»ã€‚åœ¨ä½ æ‰§è¡Œæ…¢è·‘è®¡åˆ’æœŸé—´ï¼Œå³ä½¿æ¸…æ™¨æœ‰é›¨ï¼Œä¹Ÿä¸èƒ½æ”¾å¼ƒã€‚è€Œæ˜¯è¦æƒ³å¤ªå¥½äº†ï¼ä¸‹é›¨äº†ï¼æˆ‘å¯ä»¥åœ¨é”»ç‚¼èº«ä½“çš„åŒæ—¶ç£¨ç»ƒæ„å¿—ã€‚</p>\n<h2 id=\"ç²¾ç¥å±‚é¢\"><a href=\"#ç²¾ç¥å±‚é¢\" class=\"headerlink\" title=\"ç²¾ç¥å±‚é¢\"></a>ç²¾ç¥å±‚é¢</h2><p>ç²¾ç¥å±‚é¢çš„æ›´æ–°ä¸ºä½ æŒ‡å¼•äººç”Ÿçš„æ–¹å‘ï¼Œä¸ä¹ æƒ¯äºŒå¯†åˆ‡ç›¸å…³ã€‚</p>\n<p>æœ‰äº›äººæ˜¯é€šè¿‡æ¬£èµä¼˜ç§€çš„æ–‡å­¦æˆ–éŸ³ä¹ä½œå“æ¥å®ç°ç²¾ç¥å±‚é¢çš„æ›´æ–°ï¼Œè¿˜æœ‰äº›äººæ˜¯é€šè¿‡ä¸è‡ªç„¶äº¤æµæ¥è¾¾åˆ°åŒæ ·ç›®çš„ã€‚æˆ‘çš„åšæ³•æ˜¯æ¯å¤©è®¤çœŸé˜…è¯»å’Œæ€è€ƒã€Šåœ£ç»ã€‹ã€‚</p>\n<p>å¤§è‡ªç„¶ä¼šèµç¦ç»™å“ªäº›æ²‰æµ¸åœ¨è‡ªç„¶ä¸­çš„äººã€‚å½“ä½ è¿œç¦»åŸå¸‚çš„å–§åš£ä¸æ··ä¹±ï¼Œå°½æƒ…äº«å—è¿‡å¤§è‡ªç„¶çš„å’Œè°ä¸éŸµå¾‹ï¼Œå†å›åˆ°åŸå¸‚æ—¶ä¼šæ„Ÿåˆ°è€³ç›®ä¸€æ–°ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œæ²¡æœ‰ä»€ä¹ˆèƒ½å¤Ÿå¹²æ‰°ä½ æˆ–è®©ä½ æƒŠæ…Œå¤±æªï¼Œç›´åˆ°å¤–ç•Œçš„å–§åš£æ··ä¹±å†æ¬¡ä¾µèš€åˆ°ä½ å†…å¿ƒçš„é™è°§å’Œå®‰è¯¦ã€‚</p>\n<p>ä¸ªäººçš„ä½¿å‘½å®£è¨€è‡³å…³é‡è¦ã€‚ä¸€æ—¦æ·±åˆ»ç†è§£äº†ç”Ÿæ´»çš„ä¸­å¿ƒå’Œç›®æ ‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸æ–­åæ€ï¼ŒæŒä¹‹ä»¥æ’ï¼Œåœ¨æ›´æ–°ç²¾ç¥å±‚é¢çš„è¿‡ç¨‹ä¸­ï¼Œå°±å¯ä»¥æŠ±ç€åšå®šçš„ä¿¡å¿µï¼Œæ„æƒ³å¹¶å®è·µæ¯ä¸€å¤©çš„æ´»åŠ¨ã€‚</p>\n<p>ä»”ç»†è†å¬ï¼Œè®¾æ³•å›å¤´ï¼Œæ£€è®¨åŠ¨æœºï¼ŒæŠŠå¿§æ„åŸ‹è¿›æ²™å­é‡Œã€‚</p>\n<h2 id=\"æ™ºåŠ›å±‚é¢\"><a href=\"#æ™ºåŠ›å±‚é¢\" class=\"headerlink\" title=\"æ™ºåŠ›å±‚é¢\"></a>æ™ºåŠ›å±‚é¢</h2><p>æˆ‘ä»¬å¤§å¤šæ•°äººçš„æ™ºåŠ›å‘è‚²å’Œå­¦ä¹ ä¹ æƒ¯éƒ½æºè‡ªæ­£è§„æ•™è‚²ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦è„±ç¦»äº†å­¦æ ¡çš„è®­å¯¼ï¼Œè®¸å¤šäººçš„å¤´è„‘å°±ä¼šé€€åŒ–ï¼šä¸å†è®¤çœŸè¯»ä¹¦ï¼Œä¸å†æ¢ç´¢èº«å¤–çš„æ–°ä¸–ç•Œï¼Œä¸å†ç”¨å¿ƒæ€è€ƒï¼Œä¹Ÿä¸å†å†™ä½œï¼Œè‡³å°‘æ˜¯ä¸å†é‡è§†å†™ä½œï¼Œä¸å†æŠŠå®ƒå½“ä½œè€ƒéªŒæˆ‘ä»¬å‡†ç¡®ã€æ‰¼è¦è¡¨è¾¾è‡ªå·±çš„èƒ½åŠ›çš„æ–¹å¼ã€‚ç›¸åï¼Œæˆ‘ä»¬æŠŠæ—¶é—´èŠ±åœ¨äº†çœ‹ç”µè§†ï¼ˆæˆ–è€…æ˜¯ç½‘ä¸Šå†²æµªï¼‰ä¸­ã€‚</p>\n<p>ç”µè§†çš„ç¡®è®©ç”Ÿæ´»å˜å¾—ä¸°å¯Œå¤šå½©ï¼Œä½†æ˜¯ï¼Œè¿˜æœ‰å¾ˆå¤šç”µè§†èŠ‚ç›®å®Œå…¨æ˜¯åœ¨æµªè´¹æˆ‘ä»¬çš„æ—¶é—´å’Œå¤´è„‘ã€‚</p>\n<p>å…»æˆå®šæœŸé˜…è¯»ä¼˜ç§€æ–‡å­¦ä½œå“çš„ä¹ æƒ¯æ˜¯æ‹“å±•æ€ç»´çš„æœ€ä½³æ–¹å¼ã€‚å¯ä»¥ä»æ¯ä¸ªæœˆè¯»ä¸€æœ¬ä¹¦å¼€å§‹ï¼Œç„¶åæ¯ä¸¤å‘¨è¯»ä¸€æœ¬ä¹¦ï¼Œæ¥ç€æ˜¯æ¯å‘¨è¯»ä¸€æœ¬ä¹¦ã€‚</p>\n<p>ç£¨ç ºå¿ƒå¿—çš„å¦ä¸€ç§æœ‰æ•ˆæ–¹å¼æ˜¯å†™ä½œã€‚å¦‚æœèƒ½å¤Ÿåœ¨å†™ä¿¡çš„æ—¶å€™ä¸ä»–äººæ·±å…¥äº¤æµæ€æƒ³ã€æ„Ÿå—å’Œç†å¿µï¼Œè€Œä¸æ˜¯è‚¤æµ…åœ°åœç•™åœ¨äº‹ç‰©è¡¨é¢ï¼Œä¹Ÿæœ‰åŠ©äºæˆ‘ä»¬æé«˜æ€è€ƒã€æ¨ç†å’Œè·å–ä»–äººç†è§£çš„èƒ½åŠ›ã€‚</p>\n<h2 id=\"ç¤¾ä¼š-æƒ…æ„Ÿå±‚é¢\"><a href=\"#ç¤¾ä¼š-æƒ…æ„Ÿå±‚é¢\" class=\"headerlink\" title=\"ç¤¾ä¼š/æƒ…æ„Ÿå±‚é¢\"></a>ç¤¾ä¼š/æƒ…æ„Ÿå±‚é¢</h2><p>ç¤¾ä¼š/æƒ…æ„Ÿå±‚é¢çš„æ›´æ–°å¹¶ä¸åƒå…¶å®ƒå±‚é¢çš„æ›´æ–°é‚£æ ·éœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸ä»–äººçš„æ—¥å¸¸äº¤å¾€ä¸­å®Œæˆè¿™é¡¹å·¥ä½œï¼Œä½†ç»ƒä¹ è¿˜æ˜¯å¿…è¦çš„ã€‚ä¹ æƒ¯å››ã€äº”ã€å…­æ˜¯ä½ åœ¨ç»ƒä¹ å½“ä¸­éœ€è¦æ—¶æ—¶å…³æ³¨çš„åœ°æ–¹ï¼Œè¿™äº›ä¹ æƒ¯æˆåŠŸçš„å…³é”®ä¸æ˜¯æ™ºåŠ›é—®é¢˜ï¼Œè€Œæ˜¯æƒ…æ„Ÿé—®é¢˜ï¼Œä¸æˆ‘ä»¬ä¸ªäººçš„å®‰å…¨æ„Ÿå¯†åˆ‡ç›¸å…³ã€‚</p>\n<h1 id=\"æ”¹å˜ä»–äºº\"><a href=\"#æ”¹å˜ä»–äºº\" class=\"headerlink\" title=\"æ”¹å˜ä»–äºº\"></a>æ”¹å˜ä»–äºº</h1><p>åæ¥ï¼Œå½“å¥¹åˆè¦æ¢å¤åˆ°æ—§æœ‰çš„è¡Œä¸ºæ¨¡å¼æ—¶ï¼Œç”Ÿå‘½å‚å±çš„éª‘å£«æŠŠå¥¹å«åˆ°ç—…åºŠå‰ï¼Œå”±èµ·äº†é‚£æ›²åŠ¨äººçš„ã€Šæ— æ³•å®ç°çš„æ¢¦ã€‹ï¼ˆThe Impossible Dreamï¼‰ã€‚ä»–å‡è§†å¥¹çš„åŒçœ¼ï¼Œè½»å£°è¯´ï¼šâ€œæ°¸è¿œä¸è¦å¿˜è®°ï¼Œä½ æ˜¯æœå°”è¥¿å†…å¨…â€ã€‚</p>\n<p>æˆ‘ä»¬å¯ä»¥é€‰æ‹©æ¸…æ™°è€ŒçœŸå®åœ°åæ˜ å‡ºä»–äººçš„å½¢è±¡ï¼Œè‚¯å®šä»–ä»¬çš„ç§¯ææ€§å’Œè´£ä»»å¿ƒï¼Œå¸®åŠ©ä»–ä»¬æ”¹å˜è¡Œä¸ºæ¨¡å¼ï¼Œæˆä¸ºè®²åŸåˆ™ï¼Œæ‡‚åˆ¤æ–­ï¼Œç‹¬ç«‹è‡ªä¸»ï¼Œæœ‰ä»·å€¼çš„ä¸ªä½“ã€‚çŸ¥è¶³å¿ƒæ€è®©æˆ‘ä»¬æ„è¯†åˆ°ï¼Œåæ˜ ä»–äººçš„æ­£é¢å½¢è±¡å¹¶ä¸ä¼šè´¬ä½æˆ‘ä»¬è‡ªå·±ï¼Œè€Œä¼šä½¿æˆ‘ä»¬æ›´å¼ºå¤§ï¼Œå› ä¸ºå®ƒå¢åŠ äº†æˆ‘ä»¬ä¸å…¶ä»–ç§¯æä¸»åŠ¨è€…æœ‰æ•ˆäº¤å¾€çš„æœºä¼šã€‚</p>\n<p>æ­Œå¾·ï¼ˆGoetheï¼‰è¯´ï¼šâ€œä»¥ä¸€ä¸ªäººçš„ç°æœ‰è¡¨ç°æœŸè®¸ä¹‹ï¼Œä»–ä¸ä¼šæœ‰æ‰€é•¿è¿›ã€‚ä»¥ä»–çš„æ½œèƒ½å’Œåº”æœ‰æˆå°±æœŸè®¸ä¹‹ï¼Œä»–å®šèƒ½ä¸è´Ÿæ‰€æœ›ã€‚â€</p>\n<h1 id=\"å¹³è¡¡æ›´æ–°\"><a href=\"#å¹³è¡¡æ›´æ–°\" class=\"headerlink\" title=\"å¹³è¡¡æ›´æ–°\"></a>å¹³è¡¡æ›´æ–°</h1><p>è‡ªæˆ‘æå‡å’Œå®Œå–„çš„è¿‡ç¨‹å¿…é¡»åŒ…æ‹¬å¤©æ€§ä¸­çš„æ‰€æœ‰å››ä¸ªå±‚é¢ï¼šèº«ä½“ã€ç²¾ç¥ã€æ™ºåŠ›ã€ç¤¾ä¼š/æƒ…æ„Ÿã€‚</p>\n<p>ä¼ä¸šåŠ›äº‰ä¸Šæ¸¸çš„é“ç†ä¹Ÿæ˜¯è¿™æ ·ã€‚è°‹åˆ©å›ºç„¶æ˜¯ä¼ä¸šç»è¥çš„åŸºæœ¬ç›®çš„ï¼Œä½†å¹¶éä¼ä¸šå­˜åœ¨çš„å”¯ä¸€ç›®çš„ã€‚çŠ¹å¦‚ç”Ÿå‘½å°‘ä¸äº†é£Ÿç‰©ï¼Œä½†äººç»éä¸ºåƒè€Œæ´»ã€‚</p>\n<h1 id=\"æ›´æ–°ä¸­çš„ç»Ÿåˆç»¼æ•ˆ\"><a href=\"#æ›´æ–°ä¸­çš„ç»Ÿåˆç»¼æ•ˆ\" class=\"headerlink\" title=\"æ›´æ–°ä¸­çš„ç»Ÿåˆç»¼æ•ˆ\"></a>æ›´æ–°ä¸­çš„ç»Ÿåˆç»¼æ•ˆ</h1><p>äººç”Ÿçš„å››ä¸ªå±‚é¢ä¼‘æˆšç›¸å…³ï¼šèº«ä½“å¥å…¨æœ‰åŠ©äºå¿ƒæ™ºå‘å±•ï¼Œç²¾ç¥æå‡æœ‰ç›Šäºäººé™…å…³ç³»çš„åœ†æ»¡ã€‚å› æ­¤ï¼Œå¹³è¡¡æ‰èƒ½äº§ç”Ÿæœ€ä½³çš„æ•´ä½“æ•ˆæœã€‚</p>\n<p>èº«ä½“å±‚é¢çš„è‡ªæˆ‘æ›´æ–°ç­‰åŒäºå¼ºåŒ–ä¸ªäººæ„¿æ™¯ï¼ˆä¹ æƒ¯ä¸€ï¼‰ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬å¢å¼ºç§¯ææ€§ã€è‡ªæˆ‘æ„è¯†å’Œç‹¬ç«‹æ„å¿—ï¼Œè®©æˆ‘ä»¬çŸ¥é“è‡ªå·±æ˜¯è‡ªç”±çš„ï¼Œä¸éœ€è¦è¢«åŠ¨åœ°æ‰¿å—ä»–äººçš„è¡Œä¸ºåæœï¼Œè¿™ä¹Ÿè®¸æ˜¯é”»ç‚¼èº«ä½“çš„æœ€å¤§å¥½å¤„ã€‚</p>\n<p>ç²¾ç¥å±‚é¢çš„æ›´æ–°ç­‰åŒäºå¼ºåŒ–è‡ªæˆ‘é¢†å¯¼ï¼ˆä¹ æƒ¯äºŒï¼‰ã€‚å®ƒå¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°æŒ‰ç…§æƒ³è±¡å’Œè‰¯çŸ¥ï¼ˆè€Œä¸åªæ˜¯å›å¿†ï¼‰è¡Œäº‹ï¼Œæ·±å…¥ç†è§£ä¸ªäººæ€ç»´å’Œä»·å€¼è§‚ï¼Œç¡®å®šæ ¸å¿ƒçš„æ­£ç¡®åŸåˆ™ï¼Œæ˜ç¡®è‡ªå·±åœ¨ç”Ÿæ´»ä¸­çš„ç‹¬ç‰¹ä½¿å‘½ï¼Œæ”¹å˜æ€ç»´å’Œè¡Œä¸ºæ¨¡å¼ï¼Œä»¥åŠåšæŒæ­£ç¡®åŸåˆ™å¹¶åˆ©ç”¨ä¸ªäººçš„èµ„æºä¼˜åŠ¿ã€‚</p>\n<p>ç²¾ç¥å±‚é¢çš„æ›´æ–°è®©ä¸ªäººçš„ç”Ÿæ´»å˜å¾—æ›´åŠ ä¸°å¯Œã€‚</p>\n<p>æ™ºåŠ›å±‚é¢çš„æ›´æ–°ç­‰åŒäºå¼ºåŒ–è‡ªæˆ‘ç®¡ç†ï¼ˆä¹ æƒ¯ä¸‰ï¼‰ã€‚å®ƒå¸®åŠ©ä½ åœ¨åšè®¡åˆ’çš„æ—¶å€™ç¡®å®šç¬¬äºŒç±»äº‹åŠ¡çš„é‡è¦æ´»åŠ¨ï¼Œä¼˜å…ˆèƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨æ—¶é—´å’Œç²¾åŠ›çš„ç›®æ ‡ä¸æ´»åŠ¨ï¼Œç„¶åå›´ç»•è¿™äº›ç»„ç»‡å¹¶å±•å¼€æ´»åŠ¨ã€‚ä¸æ–­æ¥å—æ•™è‚²å¸®åŠ©ä½ å·©å›ºçŸ¥è¯†åŸºç¡€ï¼Œå¢åŠ é€‰æ‹©èŒƒå›´ã€‚ç¨³å®šçš„ç»æµåŸºç¡€å¹¶éæ¥è‡ªäºå·¥ä½œï¼Œè€Œæ˜¯æ¥è‡ªäº<strong>ä¸ªäººçš„äº§èƒ½</strong>ï¼ˆæ€è€ƒã€å­¦ä¹ ã€åˆ›é€ ã€è°ƒæ•´ï¼‰ã€‚<strong>çœŸæ­£çš„ç»æµç‹¬ç«‹æŒ‡çš„ä¸æ˜¯å®¶è´¢ä¸‡è´¯ï¼Œè€Œæ˜¯æ‹¥æœ‰åˆ›é€ è´¢å¯Œçš„èƒ½åŠ›</strong>ï¼Œè¿™æ˜¯å†…åœ¨çš„ã€‚</p>\n<p>â€œæ¯å¤©çš„ä¸ªäººé¢†åŸŸçš„æˆåŠŸâ€ï¼ˆæ¯å¤©è‡³å°‘ç”¨ä¸€ä¸ªå°æ—¶å®ç°èº«ä½“ã€ç²¾ç¥å’Œæ™ºåŠ›å±‚é¢çš„æ›´æ–°ï¼‰æ˜¯åŸ¹å…»ä¸ƒä¸ªä¹ æƒ¯çš„å…³é”®ï¼Œå®Œå…¨åœ¨ä¸ªäººçš„å½±å“åœˆèŒƒå›´å†…ã€‚</p>\n<h1 id=\"èºæ—‹å¼ä¸Šå‡\"><a href=\"#èºæ—‹å¼ä¸Šå‡\" class=\"headerlink\" title=\"èºæ—‹å¼ä¸Šå‡\"></a>èºæ—‹å¼ä¸Šå‡</h1><p>è‰¯çŸ¥æ˜¯äººç±»ç‹¬ç‰¹çš„å¤©èµ‹ï¼Œå¸®åŠ©æˆ‘ä»¬åˆ¤æ–­è‡ªå·±æ˜¯å¦èƒŒç¦»äº†æ­£ç¡®çš„åŸåˆ™ï¼Œç„¶åå¼•å¯¼æˆ‘ä»¬å‘è¿™äº›åŸåˆ™é æ‹¢ã€‚</p>\n<p>åƒåœ¾é£Ÿå“å’Œç¼ºä¹é”»ç‚¼ä¼šæ¯æ‰è¿åŠ¨å‘˜çš„å¥åº·ã€‚åŒæ ·ï¼Œæ·«ç§½ã€ç²—ä¿—æˆ–è‰²æƒ…çš„ä¸œè¥¿ä¼šä½¿æˆ‘ä»¬çš„çµé­‚é™·å…¥é»‘æš—ä¹‹ä¸­ï¼Œå‰Šå¼±æˆ‘ä»¬çš„åˆ¤æ–­èƒ½åŠ›ï¼Œä¸å†å…³å¿ƒæ˜¯éå¯¹é”™ï¼ˆè‡ªç„¶è€Œç¥åœ£çš„è‰¯çŸ¥ï¼‰ï¼Œåªåœ¨ä¹è‡ªå·±æ˜¯å¦ä¼šè¢«æ­å‘â€œç¤¾ä¼šè‰¯çŸ¥â€ã€‚</p>\n<p>å“ˆé©¬èˆå°”å¾·ï¼ˆDag Hammarskjoldï¼Œå‰è”åˆå›½ç§˜ä¹¦é•¿ï¼‰è¯´è¿‡ï¼šæŠŠç©å†…å¿ƒå…½æ€§çš„äººï¼Œæ—©æ™šä¼šå˜æˆçœŸæ­£çš„é‡å…½ï¼›æ•´å¤©å¼„è™šä½œå‡çš„äººï¼Œç»ˆå°†å¤±å»è·å¾—çœŸç†çš„æƒåˆ©ï¼›æš´è™æˆæ€§çš„äººï¼Œå¤´è„‘çš„åˆ¤æ–­åŠ›ä¼šæ—¥ç›Šå‡é€€ã€‚å¦‚æœçœŸçš„è¦ä¿æŒèŠ±å›­æ•´æ´ï¼Œå°±ä¸èƒ½è®©æ‚è‰æœ‰ç«‹è¶³ä¹‹åœ°ã€‚</p>\n<p>è¦å®ç°è¿™ä¸ªè‰¯æ€§å¾ªç¯ï¼Œå°±å¿…é¡»å­¦ä¹ ã€åšæŒã€å®è·µï¼Œå¹¶æ²¿ç€èºæ—‹å¼ä¸Šå‡çš„è·¯çº¿ä¸æ–­æé«˜å®è·µçš„å±‚æ¬¡ã€‚å¦‚æœä»¥ä¸ºåšåˆ°ä¸€é¡¹å°±å·²è¶³å¤Ÿï¼Œå®Œå…¨æ˜¯åœ¨è‡ªæ¬ºæ¬ºäººã€‚</p>\n<h1 id=\"ä»˜è¯¸è¡ŒåŠ¨\"><a href=\"#ä»˜è¯¸è¡ŒåŠ¨\" class=\"headerlink\" title=\"ä»˜è¯¸è¡ŒåŠ¨\"></a>ä»˜è¯¸è¡ŒåŠ¨</h1><ol>\n<li>å†™å‡ºæœ‰åŠ©äºä¿æŒè‰¯å¥½çš„èº«ä½“çŠ¶æ€ï¼Œç¬¦åˆä½ çš„ç”Ÿæ´»æ–¹å¼ï¼Œèƒ½è®©ä½ ä»ä¸­å¾—åˆ°ä¹è¶£çš„æ´»åŠ¨æ¸…å•ã€‚</li>\n<li>æŒ‘é€‰å…¶ä¸­ä¸€é¡¹æ´»åŠ¨ï¼ŒæŠŠå®ƒåˆ—ä¸ºä½ ä¸‹å‘¨çš„ä¸ªäººæ´»åŠ¨çš„ç›®æ ‡ã€‚</li>\n<li>åˆ°ä¸€å‘¨ç»“æŸæ—¶ï¼Œè¯„ä¼°è‡ªå·±çš„è¡¨ç°ï¼Œå¦‚æœæ²¡æœ‰å®ç°ç›®æ ‡ï¼Œå°±æ€è€ƒä¸€ä¸‹åŸå› ï¼Œæ˜¯å› ä¸ºä½ æ›´çœ‹é‡ä¸€ç§æ›´é«˜å°šçš„ä»·å€¼è§‚ï¼Œè¿˜æ˜¯å› ä¸ºä½ æœªèƒ½éµå¾ªè‡ªå·±çš„ä»·å€¼è§‚è¡Œäº‹ã€‚</li>\n<li>åˆ—å‡ºåœ¨ç²¾ç¥å’Œæ™ºåŠ›å±‚é¢è‡ªæˆ‘æå‡å’Œå®Œå–„çš„æ´»åŠ¨æ¸…å•ï¼Œåœ¨ç¤¾ä¼šã€æƒ…æ„Ÿå±‚é¢å¸Œæœ›æ”¹å–„çš„äººé™…å…³ç³»ä»¥åŠèƒ½ä¾é å…¬ä¼—æˆåŠŸæ¥æé«˜æ•ˆèƒ½çš„å…·ä½“é¢†åŸŸã€‚åœ¨æ¯ä¸ªå±‚é¢ä¸­æŒ‘é€‰ä¸€é¡¹æ´»åŠ¨ï¼Œåˆ—ä¸ºæœ¬å‘¨ç›®æ ‡ï¼Œä»˜è¯¸å®æ–½å¹¶åŠ ä»¥è¯„ä¼°ã€‚</li>\n<li>åšæŒæ¯å‘¨å†™ä¸‹æ‰€æœ‰å››ä¸ªå±‚é¢çš„å…·ä½“â€œç£¨åˆ€â€è¡ŒåŠ¨ï¼Œä»˜è¯¸å®æ–½å¹¶è¯„ä¼°è‡ªå·±çš„è¡¨ç°å’Œæ•ˆæœã€‚</li>\n</ol>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸‰éƒ¨åˆ† ä¹ æƒ¯å›› åŒèµ¢æ€ç»´â€”â€”äººé™…é¢†å¯¼çš„åŸåˆ™","url":"https://lilei.pro/2019/04/07/Seven-Habbits-6/","content":"<h1 id=\"äººé™…äº¤å¾€çš„å…­ä¸ªæ¨¡å¼\"><a href=\"#äººé™…äº¤å¾€çš„å…­ä¸ªæ¨¡å¼\" class=\"headerlink\" title=\"äººé™…äº¤å¾€çš„å…­ä¸ªæ¨¡å¼\"></a>äººé™…äº¤å¾€çš„å…­ä¸ªæ¨¡å¼</h1><ul>\n<li>åˆ©äººåˆ©å·±ï¼ˆåŒèµ¢ï¼‰</li>\n<li>æŸäººåˆ©å·±ï¼ˆèµ¢/è¾“ï¼‰</li>\n<li>èˆå·±ä¸ºäººï¼ˆè¾“/èµ¢ï¼‰</li>\n<li>ä¸¤è´¥ä¿±ä¼¤ï¼ˆè¾“/è¾“ï¼‰</li>\n<li>ç‹¬å–„å…¶èº«ï¼ˆèµ¢ï¼‰</li>\n<li>å¥½èšå¥½æ•£ï¼ˆæ— äº¤æ˜“ï¼‰</li>\n</ul>\n<h2 id=\"åˆ©äººåˆ©å·±ï¼ˆåŒèµ¢ï¼‰\"><a href=\"#åˆ©äººåˆ©å·±ï¼ˆåŒèµ¢ï¼‰\" class=\"headerlink\" title=\"åˆ©äººåˆ©å·±ï¼ˆåŒèµ¢ï¼‰\"></a>åˆ©äººåˆ©å·±ï¼ˆåŒèµ¢ï¼‰</h2><p>åŒèµ¢è€…æŠŠç”Ÿæ´»çœ‹ä½œåˆä½œçš„èˆå°ï¼Œè€Œä¸æ˜¯ç«æŠ€åœºã€‚ä½†æ˜¯å¤§å¤šæ•°äººéƒ½ç”¨ä¸¤åˆ†æ³•çœ‹é—®é¢˜ï¼Œéå¼ºå³å¼±ï¼Œä¸èƒœåˆ™è´¥ã€‚å®é™…ä¸Šè¿™ç§æƒ³æ³•æ˜¯ç«™ä¸ä½è„šçš„ï¼Œå®ƒä»¥åŠ›é‡å’Œåœ°ä½ï¼Œè€ŒéåŸåˆ™ä¸ºå‡†ç»³ã€‚</p>\n<h2 id=\"æŸäººåˆ©å·±ï¼ˆèµ¢-è¾“ï¼‰\"><a href=\"#æŸäººåˆ©å·±ï¼ˆèµ¢-è¾“ï¼‰\" class=\"headerlink\" title=\"æŸäººåˆ©å·±ï¼ˆèµ¢/è¾“ï¼‰\"></a>æŸäººåˆ©å·±ï¼ˆèµ¢/è¾“ï¼‰</h2><p>å¤§å¤šæ•°äººä»å°å°±è¢«è¿™ç§æ¨¡å¼æµ¸æŸ“ã€‚å­¦æ ¡ã€èµ›åœºã€æ³•å¾‹æŠŠäººåˆ†ä¸ºæ•Œå¯¹åŒæ–¹ï¼Œä¸æ˜¯ä½ æ­»ï¼Œå°±æ˜¯æˆ‘æ´»ã€‚è¯šç„¶ï¼Œåœ¨ç«äº‰æ¿€çƒˆå’Œä¿¡ä»»è–„å¼±çš„ç¯å¢ƒé‡Œï¼Œæˆ‘ä»¬éœ€è¦èµ¢/è¾“æ¨¡å¼ã€‚ä½†æ˜¯ç«äº‰åœ¨ç”Ÿæ´»ä¸­åªå±…å°‘æ•°ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ¯å¤©éƒ½å’Œé…å¶ã€å­©å­ã€åŒäº‹ã€é‚»å±…ã€æœ‹å‹ç«äº‰ã€‚ç°å®ç”Ÿæ´»éœ€è¦äº’ç›¸ä¾èµ–ï¼Œè€Œä¸æ˜¯å•æªåŒ¹é©¬ï¼Œä½ çš„å¾ˆå¤šæ¢¦æƒ³éƒ½éœ€è¦é€šè¿‡ä¸å…¶ä»–äººåˆä½œæ‰èƒ½å®ç°ï¼Œè€Œèµ¢/è¾“æ¨¡å¼æ˜¯è¿™ç§åˆä½œæœ€å¤§çš„éšœç¢ã€‚</p>\n<h2 id=\"èˆå·±ä¸ºäººï¼ˆè¾“-èµ¢ï¼‰\"><a href=\"#èˆå·±ä¸ºäººï¼ˆè¾“-èµ¢ï¼‰\" class=\"headerlink\" title=\"èˆå·±ä¸ºäººï¼ˆè¾“/èµ¢ï¼‰\"></a>èˆå·±ä¸ºäººï¼ˆè¾“/èµ¢ï¼‰</h2><p>æœ‰äº›äººåˆ™æ­£å¥½ç›¸åï¼Œä»–ä»¬ä¿¡å¥‰è¾“/èµ¢æ¨¡å¼ã€‚</p>\n<ul>\n<li>â€œæˆ‘è®¤è¾“ï¼Œä½ èµ¢äº†ã€‚â€</li>\n<li>â€œå°±è¿™æ ·å§ï¼Œæˆ‘å¬ä½ çš„ã€‚â€</li>\n<li>â€œæˆ‘æ˜¯ä¸ªå’Œäº‹ä½¬ï¼Œåªè¦èƒ½æ¯äº‹å®äººï¼Œæˆ‘åšä»€ä¹ˆéƒ½è¡Œã€‚â€</li>\n</ul>\n<p>è¿™ç§äººæ²¡æœ‰æ ‡å‡†ï¼Œæ²¡æœ‰è¦æ±‚ï¼Œæ²¡æœ‰æœŸæœ›ï¼Œä¹Ÿæ²¡æœ‰å°†æ¥ã€‚ä»–ä»¬é€šå¸¸å–œæ¬¢å–æ‚¦ä»–äººï¼Œå–œæ¬¢æ»¡è¶³ä»–äººçš„å¸Œæœ›ã€‚åˆ«äººçš„è®¤åŒå’Œæ¥å—èƒ½å¤Ÿç»™ä»–ä»¬åŠ›é‡ï¼Œä»–ä»¬æ²¡æœ‰å‹‡æ°”è¡¨è¾¾è‡ªå·±çš„æ„Ÿå—å’Œä¿¡å¿µï¼Œæ€»æ˜¯æœä»åˆ«äººçš„æ„å¿—ã€‚</p>\n<p>åœ¨è°ˆåˆ¤æ—¶ï¼Œä»–ä»¬å¸¸å¸¸ä¸æ˜¯æ”¾å¼ƒå°±æ˜¯é€€è®©ï¼Œå¦‚æœæˆä¸ºé¢†å¯¼ï¼Œä¹Ÿå¯¹ä¸‹å±å«‰å¦’çºµå®¹ã€‚èµ¢/è¾“æ¨¡å¼æ„å‘³ç€åšå¥½äººï¼Œç„¶è€Œ<strong>å¥½äººä¸é•¿å‘½</strong>ã€‚</p>\n<p>å¯æ˜¯è¢«å‹æŠ‘çš„æƒ…æ„Ÿå¹¶ä¸ä¼šæ¶ˆå¤±ï¼Œç´¯ç§¯åˆ°ä¸€å®šç¨‹åº¦åï¼Œåè€Œä»¥æ›´ä¸‘æ¶çš„æ–¹å¼çˆ†å‘å‡ºæ¥ï¼Œæœ‰äº›ç²¾ç¥ç–¾ç—…å°±æ˜¯è¿™æ ·å½¢æˆçš„ã€‚</p>\n<p>èµ¢/è¾“æ¨¡å¼å’Œè¾“/èµ¢æ¨¡å¼éƒ½å­˜åœ¨äººæ ¼ç¼ºé™·ã€‚çŸ­æœŸæ¥çœ‹ï¼Œèµ¢/è¾“æ¨¡å¼çš„äººè¾ƒæœ‰æ•ˆç‡ï¼Œå› ä¸ºä»–ä»¬é€šå¸¸åœ¨èƒ½åŠ›å’Œæ™ºåŠ›æ–¹é¢é«˜äººä¸€ç­¹ï¼Œè€Œè¾“/èµ¢æ¨¡å¼è‡ªå§‹è‡³ç»ˆéƒ½å±…äºåŠ£åŠ¿ã€‚</p>\n<h2 id=\"ä¸¤è´¥ä¿±ä¼¤ï¼ˆè¾“-è¾“ï¼‰\"><a href=\"#ä¸¤è´¥ä¿±ä¼¤ï¼ˆè¾“-è¾“ï¼‰\" class=\"headerlink\" title=\"ä¸¤è´¥ä¿±ä¼¤ï¼ˆè¾“/è¾“ï¼‰\"></a>ä¸¤è´¥ä¿±ä¼¤ï¼ˆè¾“/è¾“ï¼‰</h2><p>ä¸ºäº†æŠ¥å¤ï¼Œä¸æƒœç‰ºç‰²è‡ªèº«çš„åˆ©ç›Šï¼Œå´ä¸é—®æ˜¯å¦å€¼å¾—ï¼›åªæœ‰ä¸å¤Ÿæˆç†Ÿã€æŒæ¡ä¸äº†äººç”Ÿæ–¹å‘çš„äººï¼Œæ‰ä¼šè¿™æ ·ã€‚</p>\n<h2 id=\"ç‹¬å–„å…¶èº«ï¼ˆèµ¢ï¼‰\"><a href=\"#ç‹¬å–„å…¶èº«ï¼ˆèµ¢ï¼‰\" class=\"headerlink\" title=\"ç‹¬å–„å…¶èº«ï¼ˆèµ¢ï¼‰\"></a>ç‹¬å–„å…¶èº«ï¼ˆèµ¢ï¼‰</h2><p>å½“ç«äº‰å’Œå¯¹æŠ—æ„ä¹‰ä¸å¤§çš„æ—¶å€™ï¼Œç‹¬å–„å…¶èº«çš„æ¨¡å¼æ˜¯å¤šæ•°äººçš„å¤„äº‹æ–¹æ³•ï¼Œä»–ä»¬åªåœ¨æ„è‡ªå·±çš„åˆ©ç›Šæ— æŸï¼Œåˆ«äººçš„å°±ç•™ç»™ä»–ä»¬è‡ªå·±å»ä¿æŠ¤å§ã€‚</p>\n<h2 id=\"å“ªä¸€ç§æœ€å¥½\"><a href=\"#å“ªä¸€ç§æœ€å¥½\" class=\"headerlink\" title=\"å“ªä¸€ç§æœ€å¥½\"></a>å“ªä¸€ç§æœ€å¥½</h2><p>é•¿è¿œæ¥çœ‹ï¼Œä¸æ˜¯åŒèµ¢ï¼Œå°±ä¸€å®šæ˜¯ä¸¤è´¥ä¿±ä¼¤ã€‚</p>\n<p>å¦‚æœçœŸçš„æŠ±ç€åŒèµ¢çš„æ€åº¦ï¼Œå°±ä¼šå¤šä¸ä¸šä¸»äº¤æµï¼Œå¬å–æ„è§ï¼Œå¹¶æœ‰å‹‡æ°”è¡¨è¾¾è‡ªå·±çš„è§‚ç‚¹ï¼Œç›´åˆ°ç»“æœè®©åŒæ–¹éƒ½æ»¡æ„ã€‚</p>\n<h1 id=\"ä¸èƒ½åŒèµ¢å°±å¥½èšå¥½æ•£\"><a href=\"#ä¸èƒ½åŒèµ¢å°±å¥½èšå¥½æ•£\" class=\"headerlink\" title=\"ä¸èƒ½åŒèµ¢å°±å¥½èšå¥½æ•£\"></a>ä¸èƒ½åŒèµ¢å°±å¥½èšå¥½æ•£</h1><p>å¦‚æœå®åœ¨æ— æ³•è¾¾æˆå…±è¯†ï¼Œå®ç°åŒèµ¢ï¼Œå°±ä¸å¦‚å¥½èšå¥½æ•£ï¼ˆæ”¾å¼ƒäº¤æ˜“ï¼‰ã€‚</p>\n<p>åœ¨ç›¸äº’ä¾èµ–çš„ç¯å¢ƒé‡Œï¼Œä»»ä½•éåŒèµ¢çš„è§£å†³æ–¹æ¡ˆéƒ½ä¸æ˜¯æœ€å¥½çš„ï¼Œå› ä¸ºä»–ä»¬ç»ˆå°†å¯¹é•¿è¿œå…³ç³»äº§ç”Ÿè¿™æ ·é‚£æ ·çš„ä¸åˆ©å½±å“ï¼Œä½ å¿…é¡»æ…é‡å¯¹å¾…è¿™äº›å½±å“çš„ä»£ä»·ã€‚å¦‚æœä½ æ— æ³•åŒå¯¹æ–¹è¾¾æˆåŒèµ¢çš„åè®®ï¼Œé‚£ä¹ˆæœ€å¥½é€‰æ‹©æ”¾å¼ƒã€‚</p>\n<h1 id=\"åŒèµ¢æ€ç»´çš„äº”ä¸ªè¦é¢†\"><a href=\"#åŒèµ¢æ€ç»´çš„äº”ä¸ªè¦é¢†\" class=\"headerlink\" title=\"åŒèµ¢æ€ç»´çš„äº”ä¸ªè¦é¢†\"></a>åŒèµ¢æ€ç»´çš„äº”ä¸ªè¦é¢†</h1><p>åŒèµ¢çš„åŸåˆ™æ˜¯æ‰€æœ‰äººé™…äº¤å¾€çš„åŸºç¡€ï¼ŒåŒ…æ‹¬äº”ä¸ªç‹¬ç«‹çš„æ–¹é¢ï¼š<strong>åŒèµ¢å“å¾·</strong>æ˜¯åŸºç¡€ï¼Œæ¥ç€å»ºç«‹èµ·<strong>åŒèµ¢å…³ç³»</strong>ï¼Œç”±æ­¤è¡ç”Ÿå‡º<strong>åŒèµ¢åè®®</strong>ï¼Œéœ€è¦<strong>åŒèµ¢ä½“ç³»ï¼ˆç»“æ„ï¼‰</strong>ä½œä¸ºåŸ¹è‚²ç¯å¢ƒï¼Œé€šè¿‡åŒèµ¢çš„<strong>åŒèµ¢è¿‡ç¨‹</strong>æ¥å®Œæˆã€‚</p>\n<h2 id=\"åŒèµ¢å“å¾·\"><a href=\"#åŒèµ¢å“å¾·\" class=\"headerlink\" title=\"åŒèµ¢å“å¾·\"></a>åŒèµ¢å“å¾·</h2><p>åŒèµ¢å“å¾·æœ‰ä¸‰ä¸ªåŸºæœ¬ç‰¹å¾ã€‚</p>\n<ul>\n<li>è¯šä¿¡ã€‚æœ‰æ˜ç¡®çš„ä»·å€¼è§‚ï¼Œä¿¡å®ˆæ‰¿è¯ºã€‚</li>\n<li>æˆç†Ÿã€‚æˆç†Ÿå°±æ˜¯åœ¨è¡¨è¾¾è‡ªå·±çš„æƒ…æ„Ÿå’Œä¿¡å¿µçš„åŒæ—¶åˆèƒ½ä½“è°…ä»–äººçš„æƒ³æ³•å’Œæ„Ÿå—çš„èƒ½åŠ›ã€‚</li>\n<li>çŸ¥è¶³ã€‚å³ç›¸ä¿¡èµ„æºå……è¶³ï¼Œäººäººæœ‰ä»½ã€‚å…¬ä¼—é¢†åŸŸçš„æˆåŠŸçš„æ„æ€ä¸æ˜¯å‹å€’æ—äººï¼Œè€Œæ˜¯é€šè¿‡æˆåŠŸçš„æœ‰æ•ˆäº¤å¾€è®©æ‰€æœ‰çš„å‚ä¸è€…è·åˆ©ï¼Œå¤§å®¶ä¸€èµ·å·¥ä½œï¼Œä¸€èµ·æ¢è®¨ï¼Œä¸€èµ·å®ç°å•æªåŒ¹é©¬æ— æ³•å®Œæˆçš„ç†æƒ³ï¼Œè¿™ç§æˆåŠŸè¦ä»¥çŸ¥è¶³å¿ƒæ€ä¸ºåŸºç¡€ã€‚</li>\n</ul>\n<h2 id=\"åŒèµ¢å…³ç³»\"><a href=\"#åŒèµ¢å…³ç³»\" class=\"headerlink\" title=\"åŒèµ¢å…³ç³»\"></a>åŒèµ¢å…³ç³»</h2><p>åŒèµ¢çš„ç²¾é«“å°±æ˜¯ä¿¡ç”¨ï¼Œå³æƒ…æ„Ÿè´¦æˆ·ã€‚å¦‚æœæƒ…æ„Ÿè´¦æˆ·å‚¨è“„å……è¶³ï¼Œä¿¡ç”¨å°±ä¸å†æ˜¯é—®é¢˜ï¼Œå·²æœ‰çš„æŠ•å…¥è®©æˆ‘ä»¬ç›¸çŸ¥ç›¸æ•¬ï¼Œæˆ‘ä»¬å¯ä»¥å…¨ç¥è´¯æ³¨äºé—®é¢˜æœ¬èº«ï¼Œè€Œä¸æ˜¯æ€§æ ¼æˆ–è€…ç«‹åœºã€‚</p>\n<p>ä½ å¯¹åŒèµ¢çš„æ€åº¦è¶ŠåšæŒï¼Œè¶ŠçœŸè¯šï¼Œè¶Šç§¯æï¼Œè¶ŠæŠ•å…¥ï¼Œä½ å¯¹ä»–äººçš„å½±å“åŠ›å°±è¶Šå¤§ã€‚</p>\n<h2 id=\"åŒèµ¢åè®®\"><a href=\"#åŒèµ¢åè®®\" class=\"headerlink\" title=\"åŒèµ¢åè®®\"></a>åŒèµ¢åè®®</h2><p>å…³ç³»ç¡®ç«‹ä¹‹åï¼Œå°±éœ€è¦æœ‰åè®®æ¥è¯´æ˜åŒèµ¢çš„å®šä¹‰å’Œæ–¹å‘ï¼Œè¿™ç§åè®®æœ‰æ—¶è¢«ç§°ä¸ºâ€œç»©æ•ˆåè®®â€æˆ–â€œåˆä½œåè®®â€ï¼Œå®ƒè®©çºµå‘äº¤å¾€è½¬ä¸ºæ°´å¹³äº¤å¾€ï¼Œä»å±å…³ç³»è½¬ä¸ºåˆä½œå…³ç³»ï¼Œä¸Šçº§ç›‘ç£è½¬ä¸ºè‡ªæˆ‘ç›‘ç£ã€‚</p>\n<p>åœ¨åŒèµ¢åè®®ä¸­ï¼Œå¯¹ä»¥ä¸‹äº”ä¸ªè¦ç´ åº”è¯¥æœ‰æ˜ç¡®çš„è§„å®šï¼š</p>\n<ul>\n<li>é¢„æœŸç»“æœï¼šç¡®è®¤ç›®æ ‡å’Œæ—¶é™ï¼Œæ–¹æ³•ä¸è®¡ã€‚</li>\n<li>æŒ‡å¯¼æ–¹é’ˆï¼šç¡®è®¤å®ç°ç›®æ ‡çš„åŸåˆ™ã€æ–¹é’ˆå’Œè¡Œä¸ºé™åº¦ã€‚</li>\n<li>å¯ç”¨èµ„æºï¼šåŒ…æ‹¬äººåŠ›ã€è´¢åŠ›ã€æŠ€æœ¯æˆ–è€…ç»„ç»‡èµ„æºã€‚</li>\n<li>ä»»åŠ¡è€ƒæ ¸ï¼šå»ºç«‹ä¸šç»©è¯„ä¼°æ ‡å‡†å’Œæ—¶é—´ã€‚</li>\n<li>å¥–æƒ©åˆ¶åº¦ï¼šæ ¹æ®ä»»åŠ¡è€ƒæ ¸ç¡®å®šå¥–æƒ©çš„æ„ä¹‰ã€‚</li>\n</ul>\n<h3 id=\"åŒèµ¢çš„ç®¡ç†åŸ¹è®­\"><a href=\"#åŒèµ¢çš„ç®¡ç†åŸ¹è®­\" class=\"headerlink\" title=\"åŒèµ¢çš„ç®¡ç†åŸ¹è®­\"></a>åŒèµ¢çš„ç®¡ç†åŸ¹è®­</h3><p>â€¦â€¦åŸ¹è®­ä¹‹å‰ï¼Œå‘å—è®­è€…è¯­è¨€è¿™æ¬¡åŸ¹è®­ä¸ä¼šä¸€å¸†é£é¡ºï¼Œé˜»åŠ›ä¸€å®šä¼šå­˜åœ¨ã€‚</p>\n<h3 id=\"åŒèµ¢ç»©æ•ˆåè®®\"><a href=\"#åŒèµ¢ç»©æ•ˆåè®®\" class=\"headerlink\" title=\"åŒèµ¢ç»©æ•ˆåè®®\"></a>åŒèµ¢ç»©æ•ˆåè®®</h3><p>ç®¡ç†å“²å­¦å®¶å…¼é¡¾é—®å½¼å¾—Â·å¾·é²å…‹ï¼ˆPeter Druckerï¼‰å»ºè®®ï¼Œç»ç†å’Œå‘˜å·¥ä¹‹é—´å¯ä»¥ç”¨â€œç»™ç»ç†çš„ä¿¡â€è¿™ç§å½¢å¼æ¥è¡¨è¿°ç»©æ•ˆåè®®çš„è¦ç‚¹ã€‚é¦–å…ˆå°±é¢„æœŸç»“æœã€æŒ‡å¯¼æ–¹é’ˆå’Œå¯ç”¨èµ„æºæ·±å…¥æ¢è®¨ï¼Œä¿è¯å…¶ä¸ç»„ç»‡çš„æ€»ç›®æ ‡ä¸€è‡´ï¼Œç„¶åå†™åœ¨â€œç»™ç»ç†çš„ä¿¡â€ä¸­ï¼Œå¹¶æè®®ä¸‹ä¸€æ¬¡ç»©æ•ˆè®¡åˆ’å’Œè®¨è®ºçš„æ—¶é—´ã€‚</p>\n<p>æœ‰å››ç§ç®¡ç†è€…æˆ–å®¶é•¿éƒ½å¯ä»¥æŒæ§çš„å¥–æƒ©æ–¹æ³•ï¼š<strong>é‡‘é’±ã€ç²¾ç¥ã€æœºä¼š</strong>ä»¥åŠ<strong>è´£ä»»</strong>ã€‚</p>\n<h2 id=\"åŒèµ¢ä½“ç³»\"><a href=\"#åŒèµ¢ä½“ç³»\" class=\"headerlink\" title=\"åŒèµ¢ä½“ç³»\"></a>åŒèµ¢ä½“ç³»</h2><p>åŒèµ¢å¿…é¡»æœ‰ç›¸åº”ä½“ç³»æ”¯æ’‘ï¼ŒåŒ…æ‹¬åŸ¹è®­ã€è§„åˆ’ã€äº¤æµã€é¢„ç®—ã€ä¿¡æ¯ã€è–ªé…¬ç­‰ï¼Œè€Œä¸”æ‰€æœ‰ä½“ç³»éƒ½è¦å»ºç«‹åœ¨åŒèµ¢åŸåˆ™çš„åŸºç¡€ä¸Šã€‚</p>\n<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œé—®é¢˜éƒ½æºäºä½“ç³»ï¼Œè€Œä¸æ˜¯äººã€‚å†å¥½çš„äººç½®èº«äºä¸€ä¸ªç³Ÿç³•çš„ä½“ç³»ä¸­ï¼Œä¹Ÿä¸ä¼šæœ‰å¥½ç»“æœã€‚</p>\n<h2 id=\"åŒèµ¢è¿‡ç¨‹\"><a href=\"#åŒèµ¢è¿‡ç¨‹\" class=\"headerlink\" title=\"åŒèµ¢è¿‡ç¨‹\"></a>åŒèµ¢è¿‡ç¨‹</h2><p>æˆ‘å»ºè®®ä¸åŒçš„äººå’Œæœºæ„é‡‡ç”¨ä»¥ä¸‹å››ä¸ªæ­¥éª¤å®ŒæˆåŒèµ¢è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>é¦–å…ˆï¼Œä»å¯¹æ–¹çš„è§’åº¦çœ‹é—®é¢˜ã€‚çœŸæ­£ç†è§£å¯¹æ–¹çš„æƒ³æ³•ã€éœ€è¦å’Œé¡¾è™‘ï¼Œæœ‰æ—¶ç”šè‡³æ¯”å¯¹æ–¹ç†è§£çš„æ›´ä¸ºé€å½»ã€‚</li>\n<li>å…¶æ¬¡ï¼Œè®¤æ¸…ä¸»è¦é—®é¢˜å’Œé¡¾è™‘ï¼ˆè€Œéç«‹åœºï¼‰ã€‚</li>\n<li>ç¬¬ä¸‰ï¼Œç¡®å®šå¤§å®¶éƒ½èƒ½æ¥å—çš„ç»“æœã€‚</li>\n<li>ç¬¬å››ï¼Œå®ç°è¿™ç§ç»“æœçš„å„ç§å¯èƒ½é€”å¾„ã€‚</li>\n</ol>\n<h1 id=\"ä»˜è¯¸è¡ŒåŠ¨\"><a href=\"#ä»˜è¯¸è¡ŒåŠ¨\" class=\"headerlink\" title=\"ä»˜è¯¸è¡ŒåŠ¨\"></a>ä»˜è¯¸è¡ŒåŠ¨</h1><ol>\n<li>è®¤çœŸæƒ³ä¸€ä¸‹ä½ æœ€è¿‘éœ€è¦æ‰“äº¤é“çš„äººæˆ–è€…æƒ³è¦è§£å†³çš„é—®é¢˜ï¼Œåœ¨æ•¢ä½œæ•¢ä¸ºå’Œå–„è§£äººæ„é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚</li>\n<li>åˆ—å‡ºæœ€èƒ½å¦¨ç¢åŒèµ¢æ¨¡å¼çš„å› ç´ ï¼Œè®¾æ³•æ¸…é™¤åœ¨ä¸ªäººå½±å“åœˆå†…çš„é‚£ä¸€éƒ¨åˆ†ã€‚</li>\n<li>é€‰æ‹©ä¸€ä¸ªä½ æƒ³ç­¾è®¢åŒèµ¢åè®®çš„äººé™…å…³ç³»ï¼›å°½é‡è®¾èº«å¤„åœ°ä¸ºå¯¹æ–¹ç€æƒ³ï¼Œè®°ä¸‹ä½ è®¤ä¸ºå¯¹æ–¹ä¼šæ¥å—çš„ç»“æœï¼›ä»è‡ªå·±çš„è§’åº¦å‡ºå‘ï¼Œåˆ—å‡ºå¯¹è‡ªå·±æœ‰åˆ©çš„ç»“æœï¼›è¯¢é—®å¯¹æ–¹æ˜¯å¦æ„¿æ„å°±è¿™ä¸ªé—®é¢˜è¿›è¡Œäº¤æµï¼›ä¸€èµ·å•†è®¨ä¸¤å…¨å…¶ç¾çš„å¯¹ç­–ã€‚</li>\n<li>åˆ—å‡ºä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„ä¸‰ä¸ªäººé™…å…³ç³»ï¼Œä¼°ç®—ä¸€ä¸‹ä¸è¿™äº›äººçš„æƒ…æ„Ÿè´¦æˆ·ä½™é¢ï¼Œè®°ä¸‹æœ‰åŠ©äºå¢åŠ å­˜æ¬¾çš„æ„Ÿæƒ…æŠ•èµ„ã€‚</li>\n<li>åçœè‡ªå·±çš„äº¤å¾€æ¨¡å¼ï¼Œæ˜¯èµ¢/è¾“å¼çš„å—ï¼Ÿè¿™ç§æ¨¡å¼å¯¹ä½ äºä»–äººçš„äº¤å¾€æœ‰ä»€ä¹ˆå½±å“ï¼Ÿå½¢æˆè¿™ç§æ¨¡å¼çš„ä¸»è¦åŸå› æ˜¯ä»€ä¹ˆï¼Ÿè¿™ç§æ¨¡å¼å¯¹ä½ æœ‰ä½•åŠ©ç›Šï¼Ÿ</li>\n<li>æ‰¾åˆ°ä¸€ä¸ªåŒèµ¢æ¨¡å¼çš„æ¦œæ ·ï¼Œä¹Ÿå°±æ˜¯å³ä½¿èº«å¤„å›°å¢ƒä¹Ÿä¸å¿˜åŒèµ¢çš„äººï¼Œä»”ç»†è§‚å¯Ÿå¹¶å‘ä»–å­¦ä¹ ã€‚</li>\n</ol>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ ç¬¬ä¸‰éƒ¨åˆ† ä¹ æƒ¯äº” çŸ¥å½¼è§£å·±â€”â€”ç§»æƒ…æ²Ÿé€šçš„åŸåˆ™","url":"https://lilei.pro/2019/04/07/Seven-Habbits-7/","content":"<h1 id=\"ä½ çœŸçš„å¬æ‡‚äº†å—\"><a href=\"#ä½ çœŸçš„å¬æ‡‚äº†å—\" class=\"headerlink\" title=\"ä½ çœŸçš„å¬æ‡‚äº†å—\"></a>ä½ çœŸçš„å¬æ‡‚äº†å—</h1><p>å¦‚æœä½ è¦å’Œæˆ‘äº¤å¾€ï¼Œæƒ³å¯¹æˆ‘æœ‰å½±å“åŠ›ï¼Œä½ é¦–å…ˆè¦äº†è§£æˆ‘ï¼Œè€Œåšåˆ°è¿™ä¸€ç‚¹ä¸èƒ½åªé æŠ€å·§ã€‚å¦‚æœæˆ‘è§‰å¯Ÿåˆ°ä½ åœ¨ä½¿ç”¨æŸç§æŠ€å·§ï¼Œå°±ä¼šæœ‰å—éª—å’Œè¢«æ“çºµçš„æ„Ÿè§‰ã€‚æˆ‘ä¸çŸ¥é“ä½ ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œæœ‰ä»€ä¹ˆåŠ¨æœºã€‚</p>\n<p>ä½ çš„å½±å“åŠ›åœ¨äºä½ çš„æ¦œæ ·ä½œç”¨å’Œå¼•å¯¼èƒ½åŠ›ï¼Œå‰è€…æºäºä½ çš„å“å¾·ï¼Œæ˜¯ä½ çš„çœŸæˆ‘ï¼Œåˆ«äººçš„è¯„è®ºæˆ–è€…ä½ å¸Œæœ›åˆ«äººå¦‚ä½•çœ‹ä½ éƒ½æ²¡æœ‰æ„ä¹‰ï¼Œæˆ‘åœ¨åŒä½ çš„äº¤å¾€ä¸­å·²ç»æ¸…æ¥šäº†è§£äº†ä½ ã€‚</p>\n<p>ä½ çš„å“å¾·æ—¶åˆ»å‘æŒ¥ç€å½±å“åŠ›ï¼Œå¹¶èµ·ç€æ²Ÿé€šçš„ä½œç”¨ã€‚ä¹…è€Œä¹…ä¹‹ï¼Œæˆ‘å°±ä¼šæœ¬èƒ½åœ°ä¿¡ä»»æˆ–è€…ä¸ä¿¡ä»»ä½ è¿™ä¸ªäººä»¥åŠä½ å¯¹æˆ‘æ‰€åšçš„äº‹æƒ…ã€‚</p>\n<h1 id=\"ç§»æƒ…è†å¬\"><a href=\"#ç§»æƒ…è†å¬\" class=\"headerlink\" title=\"ç§»æƒ…è†å¬\"></a>ç§»æƒ…è†å¬</h1><p>â€œçŸ¥å½¼â€æ˜¯äº¤å¾€æ¨¡å¼çš„ä¸€å¤§è½¬å˜ï¼Œå› ä¸ºæˆ‘ä»¬é€šå¸¸æŠŠè®©åˆ«äººç†è§£è‡ªå·±æ”¾åœ¨é¦–ä½ã€‚å¤§éƒ¨åˆ†äººåœ¨è†å¬æ—¶å¹¶ä¸æ˜¯æƒ³ç†è§£å¯¹æ–¹ï¼Œè€Œæ˜¯ä¸ºäº†åšå‡ºå›åº”ã€‚è¿™ç§äººè¦ä¹ˆè¯´è¯ï¼Œè¦ä¹ˆå‡†å¤‡è¯´è¯ï¼Œä¸æ–­åœ°ç”¨è‡ªå·±çš„æ¨¡å¼è¿‡æ»¤ä¸€åˆ‡ï¼Œç”¨è‡ªå·±çš„ç»å†ç†è§£åˆ«äººçš„ç”Ÿæ´»ã€‚</p>\n<p>äº‹å®ä¸Šï¼Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯è¿™ä¹ˆè‡ªä»¥ä¸ºæ˜¯ã€‚æˆ‘ä»¬çš„è†å¬é€šå¸¸æœ‰å±‚æ¬¡ä¹‹åˆ†ã€‚ä¸€æ˜¯å……è€³ä¸é—»ï¼Œå‹æ ¹å°±ä¸å¬åˆ«äººè¯´è¯ï¼›äºŒæ˜¯è£…æ¨¡ä½œæ ·ï¼Œâ€œæ˜¯çš„ï¼å—¯ï¼æ²¡é”™ï¼â€ä¸‰æ˜¯é€‰æ‹©æ¥å—ï¼Œåªå¬ä¸€éƒ¨åˆ†ï¼Œé€šå¸¸å­¦é¾„å‰å„¿ç«¥å–‹å–‹ä¸ä¼‘ä¼šè®©æˆ‘ä»¬é‡‡å–è¿™ç§æ–¹å¼ï¼›å››æ˜¯èšç²¾ä¼šç¥ï¼ŒåŠªåŠ›å¬åˆ°æ¯ä¸€ä¸ªå­—ï¼Œä½†æ˜¯ï¼Œå¾ˆå°‘æœ‰äººä¼šè¾¾åˆ°ç¬¬äº”ä¸ªå±‚æ¬¡ï¼Œå³æœ€é«˜å±‚æ¬¡â€”â€”ç§»æƒ…è†å¬ã€‚</p>\n<p><strong>ç§»æƒ…è†å¬</strong>æ˜¯æŒ‡ä»¥ç†è§£ä¸ºç›®çš„çš„è†å¬ï¼Œè¦æ±‚å¬è€…ç«™åœ¨è¯´è¯è€…çš„è§’åº¦ç†è§£ä»–ä»¬çš„æ€ç»´æ¨¡å¼å’Œæ„Ÿå—ã€‚</p>\n<p>ç§»æƒ…ï¼ˆEmpathyï¼‰ä¸æ˜¯åŒæƒ…ï¼ˆSympathyï¼‰ã€‚åè€…æ˜¯ä¸€ç§è®¤åŒå’Œåˆ¤æ–­å½¢å¼ï¼Œæ›´é€‚åˆç”¨æ¥è¡¨è¾¾æ„Ÿæƒ…å’Œåšå‡ºå›åº”ï¼Œå´å®¹æ˜“å…»æˆå¯¹æ–¹çš„ä¾èµ–æ€§ã€‚ç§»æƒ…è†å¬çš„æœ¬è´¨ä¸æ˜¯ä½ è¦èµåŒå¯¹æ–¹ï¼Œè€Œæ˜¯è¦åœ¨æƒ…æ„Ÿå’Œç†æ™ºä¸Šå……åˆ†è€Œæ·±å…¥åœ°ç†è§£å¯¹æ–¹ã€‚</p>\n<p>æ®ä¸“å®¶ä¼°è®¡ï¼Œäººé™…æ²Ÿé€šä»…æœ‰10%é€šè¿‡è¯­è¨€æ¥è¿›è¡Œï¼Œ30%å–å†³äºè¯­è°ƒä¸å£°éŸ³ï¼Œå…¶ä½™60%åˆ™å¾—é è‚¢ä½“è¯­è¨€ã€‚æ‰€ä»¥åœ¨ç§»æƒ…è†å¬çš„è¿‡ç¨‹ä¸­ï¼Œä¸ä»…è¦è€³åˆ°ï¼Œè¿˜è¦çœ¼åˆ°ã€å¿ƒåˆ°ï¼›ç”¨çœ¼ç›å»è§‚å¯Ÿï¼Œç”¨å¿ƒçµå»ä½“ä¼šã€‚</p>\n<h1 id=\"å¿ƒç†ç©ºæ°”\"><a href=\"#å¿ƒç†ç©ºæ°”\" class=\"headerlink\" title=\"å¿ƒç†ç©ºæ°”\"></a>å¿ƒç†ç©ºæ°”</h1><p>é™¤äº†ç‰©è´¨ï¼Œäººç±»æœ€å¤§çš„ç”Ÿå­˜éœ€æ±‚æºè‡ªå¿ƒç†ï¼Œå³è¢«äººç†è§£ã€è‚¯å®šã€è®¤å¯å’Œæ¬£èµã€‚</p>\n<p>ç§»æƒ…è†å¬æ˜¯æœ‰é£é™©çš„ã€‚åªæœ‰å½“ä½ åšå¥½äº†è¢«å¯¹æ–¹å½±å“çš„å‡†å¤‡ï¼Œæ‰èƒ½æ·±å…¥åˆ°ç§»æƒ…è†å¬çš„é˜¶æ®µï¼Œè€Œè¿™æ˜¯éœ€è¦è¶³å¤Ÿçš„å®‰å…¨æ„Ÿçš„ï¼Œå› ä¸ºè¿™æ—¶å€™çš„ä½ ä¼šå˜å¾—å¾ˆè„†å¼±ã€‚ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œè¿™å¾ˆçŸ›ç›¾ï¼Œå› ä¸ºåœ¨å½±å“å¯¹æ–¹ä¹‹å‰ï¼Œä½ å¿…é¡»å…ˆè¢«å½±å“ï¼Œå³çœŸæ­£ç†è§£å¯¹æ–¹ã€‚</p>\n<h1 id=\"å…ˆè¯Šæ–­åå¼€æ–¹\"><a href=\"#å…ˆè¯Šæ–­åå¼€æ–¹\" class=\"headerlink\" title=\"å…ˆè¯Šæ–­åå¼€æ–¹\"></a>å…ˆè¯Šæ–­åå¼€æ–¹</h1><p>å¹³åº¸çš„ä¸šåŠ¡å‘˜æ¨é”€äº§å“ï¼Œæ°å‡ºçš„ä¸šåŠ¡å‘˜é”€å”®è§£å†³é—®é¢˜ã€æ»¡è¶³éœ€æ±‚ä¹‹é“ã€‚ä¸‡ä¸€äº§å“ä¸ç¬¦åˆå®¢æˆ·éœ€è¦ï¼Œä¹Ÿè¦å‹‡äºæ‰¿è®¤ã€‚</p>\n<h1 id=\"å››ç§è‡ªä¼ å¼å›åº”\"><a href=\"#å››ç§è‡ªä¼ å¼å›åº”\" class=\"headerlink\" title=\"å››ç§è‡ªä¼ å¼å›åº”\"></a>å››ç§è‡ªä¼ å¼å›åº”</h1><p>æˆ‘ä»¬åœ¨å¬åˆ«äººè®²è¯æ—¶æ€»æ˜¯ä¼šè”ç³»æˆ‘ä»¬è‡ªå·±çš„ç»ç†ï¼Œå› æ­¤è‡ªä»¥ä¸ºæ˜¯çš„äººå¾€å¾€ä¼šæœ‰å››ç§â€œè‡ªä¼ å¼å›åº”â€ï¼ˆAutobiographical Responseï¼‰çš„å€¾å‘ï¼š</p>\n<ul>\n<li>ä»·å€¼åˆ¤æ–­â€”â€”å¯¹æ—äººçš„æ„è§åªæœ‰æ¥å—æˆ–ä¸æ¥å—ã€‚</li>\n<li>è¿½æ ¹ç©¶åº•â€”â€”ä¾è‡ªå·±çš„ä»·å€¼è§‚æ¢æŸ¥åˆ«äººçš„éšç§ã€‚</li>\n<li>å¥½ä¸ºäººå¸ˆâ€”â€”ä»¥è‡ªå·±çš„ç»éªŒæä¾›å¿ å‘Šã€‚</li>\n<li>è‡ªä»¥ä¸ºæ˜¯â€”â€”æ ¹æ®è‡ªå·±çš„è¡Œä¸ºä¸åŠ¨æœºè¡¡é‡åˆ«äººçš„è¡Œä¸ºä¸åŠ¨æœºã€‚</li>\n</ul>\n<h1 id=\"è¡¨è¾¾ä¹Ÿè¦è®²æŠ€å·§\"><a href=\"#è¡¨è¾¾ä¹Ÿè¦è®²æŠ€å·§\" class=\"headerlink\" title=\"è¡¨è¾¾ä¹Ÿè¦è®²æŠ€å·§\"></a>è¡¨è¾¾ä¹Ÿè¦è®²æŠ€å·§</h1><p>å¤å¸Œè…Šäººæœ‰ä¸€ç§å¾ˆç»å…¸çš„å“²å­¦è§‚ç‚¹ï¼Œå³å“å¾·ç¬¬ä¸€ï¼Œæ„Ÿæƒ…ç¬¬äºŒï¼Œç†æ€§ç¬¬ä¸‰ã€‚æˆ‘è®¤ä¸ºè¿™ä¸‰ä¸ªè¯é›†ä¸­ä½“ç°äº†è®©ä»–äººç†è§£è‡ªå·±ä»¥åŠæœ‰æ•ˆè¡¨è¾¾è‡ªå·±çš„ç²¾é«“ã€‚</p>\n<p>å“å¾·æŒ‡çš„æ˜¯ä½ ä¸ªäººçš„å¯ä¿¡åº¦ï¼Œæ˜¯äººä»¬å¯¹ä½ çš„è¯šä¿¡å’Œèƒ½åŠ›çš„è®¤å¯ï¼Œæ˜¯äººä»¬å¯¹ä½ çš„ä¿¡ä»»ï¼Œæ˜¯ä½ çš„æƒ…æ„Ÿè´¦æˆ·ã€‚æ„Ÿæƒ…æŒ‡çš„æ˜¯ä½ çš„ç§»æƒ…èƒ½åŠ›ï¼Œæ˜¯æ„Ÿæ€§çš„ï¼Œè¯´æ˜ä½ èƒ½é€šè¿‡äº¤æµè¿…é€Ÿç†è§£ä»–äººçš„æƒ…æ„Ÿã€‚ç†æ€§æ˜¯ä½ çš„é€»è¾‘èƒ½åŠ›ï¼Œå³åˆç†è¡¨è¾¾è‡ªå·±çš„èƒ½åŠ›ã€‚</p>\n<h1 id=\"ä¸€å¯¹ä¸€æ²Ÿé€š\"><a href=\"#ä¸€å¯¹ä¸€æ²Ÿé€š\" class=\"headerlink\" title=\"ä¸€å¯¹ä¸€æ²Ÿé€š\"></a>ä¸€å¯¹ä¸€æ²Ÿé€š</h1><p>ä½ ç°åœ¨å°±å¯ä»¥ç»ƒä¹ ä¹ æƒ¯äº”ã€‚ä¸‹æ¬¡åŒåˆ«äººäº¤æµçš„æ—¶å€™ï¼Œä½ å¯ä»¥è¯•ç€æŠ›å¼€è‡ªå·±çš„ç»éªŒï¼Œå°½åŠ›çœŸæ­£äº†è§£å¯¹æ–¹ã€‚ä½ åº”è¯¥ç¿æ™ºã€æ•æ„Ÿè€Œåˆå¤´è„‘æ¸…æ¥šã€‚ä¸è®ºåœ¨åŠå…¬å®¤æˆ–è€…å®¶ä¸­ï¼Œæ•å¼€èƒ¸æ€€ï¼Œå‡ç¥å€¾å¬ã€‚ä¸è¦æ€¥åŠŸè¿‘åˆ©ï¼Œå³ä½¿çŸ­æœŸå†…æœªè·å›é¦ˆä¹Ÿç»ä¸æ°”é¦ã€‚</p>\n<p>å¦‚æœä½ çœŸæ­£çˆ±ä¸€ä¸ªäººï¼Œé‚£ä¹ˆèŠ±æ—¶é—´äº†è§£å¯¹æ–¹å°†æœ‰ç›Šäºä»Šåçš„å¦è¯šç›¸å¾…ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå¾ˆå¤šå›°æ‰°å®¶åº­å’Œå©šå§»çš„é—®é¢˜éƒ½å°†è¢«æ‰¼æ€åœ¨èŒèŠ½çŠ¶æ€ï¼Œæ²¡æœ‰å‘å±•å£®å¤§çš„æœºä¼šï¼Œå³ä¾¿æœ‰è¿™æ ·çš„æœºä¼šï¼Œå……è¶³çš„æƒ…æ„Ÿè´¦æˆ·å‚¨è“„ä¹Ÿä¼šè®©é—®é¢˜è¿åˆƒè€Œè§£ã€‚</p>\n<p>å…ˆç†è§£åˆ«äººã€‚åœ¨é—®é¢˜å‡ºç°ä¹‹å‰ï¼Œåœ¨è¯„ä¼°å’Œåˆ¤æ–­ä¹‹å‰ï¼Œåœ¨ä½ è¡¨è¾¾ä¸ªäººè§‚ç‚¹ä¹‹å‰ï¼Œå…ˆç†è§£åˆ«äººï¼Œè¿™æ˜¯æœ‰æ•ˆçš„ç›¸äº’ä¾èµ–å…³ç³»ä¸­æœ€æœ‰ç”¨çš„ä¹ æƒ¯ã€‚</p>\n<h1 id=\"ä»˜è¯¸è¡ŒåŠ¨\"><a href=\"#ä»˜è¯¸è¡ŒåŠ¨\" class=\"headerlink\" title=\"ä»˜è¯¸è¡ŒåŠ¨\"></a>ä»˜è¯¸è¡ŒåŠ¨</h1><ol>\n<li>é€‰æ‹©ä¸€ä¸ªæƒ…æ„Ÿè´¦æˆ·å‡ºç°èµ¤å­—çš„äººé™…å…³ç³»ï¼Œè¯•ç€ä»å¯¹æ–¹çš„è§’åº¦ç†è§£å¹¶è®°ä¸‹ä»–çš„å¤„å¢ƒã€‚ä¸‹ä¸€æ¬¡è§é¢æ—¶ï¼Œé€šè¿‡è†å¬æ¥ç†è§£å¯¹æ–¹ï¼Œå°†ç°åœ¨å¬åˆ°çš„å’Œä»¥å‰è®°ä¸‹çš„åšä¸€ä¸ªæ¯”è¾ƒã€‚çœ‹çœ‹ä½ çš„æƒ³æ³•æ˜¯å¦å‡†ç¡®ï¼Ÿâ€”â€”ä½ çœŸçš„ç†è§£å¯¹æ–¹çš„ç«‹åœºå’Œè§‚ç‚¹ä¹ˆï¼Ÿ</li>\n<li>ä¸ä¸€ä¸ªäº²è¿‘çš„äººåˆ†äº«ç§»æƒ…è¿™ä¸ªæ¦‚å¿µï¼Œå‘Šè¯‰ä»–ä½ æƒ³è¦åšåˆ°çœŸæ­£çš„ç§»æƒ…è†å¬ï¼Œå¹¶è®©ä»–åœ¨ä¸€ä¸ªæ˜ŸæœŸä¹‹åæä¾›åé¦ˆæ„è§ã€‚â€”â€”ä½ åšçš„æ€ä¹ˆæ ·ï¼Ÿé‚£ä¸ªäººæœ‰ä»€ä¹ˆæ„Ÿè§‰ï¼Ÿ</li>\n<li>ä¸‹æ¬¡æœ‰æœºä¼šæ—è§‚ä»–äººäº¤æµçš„æ—¶å€™ï¼Œæ‚ä½è‡ªå·±çš„è€³æœµï¼Œåªç”¨çœ¼ç›è§‚å¯Ÿã€‚å“ªäº›æƒ…æ„Ÿä¸æ˜¯ç”¨è¯­è¨€è¡¨è¾¾å‡ºæ¥çš„ï¼Ÿ</li>\n<li>ä¸‹æ¬¡å‘ç°ä½ è¡¨ç°å‡ºä¸æ°å½“çš„è‡ªä¼ å¼å›åº”çš„æ—¶å€™ï¼Œç«‹å³æ‰¿è®¤é”™è¯¯ï¼Œå°½åŠ›æ‰­è½¬å±€é¢ï¼Œå°†æƒ…æ„Ÿè´¦æˆ·çš„æ”¯å‡ºå˜æˆå­˜å…¥ã€‚ï¼ˆâ€œå¯¹ä¸èµ·ï¼Œæˆ‘åˆšæ‰å¹¶ä¸æ˜¯çœŸçš„åŠªåŠ›å»ç†è§£ä½ ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¥ä¸€æ¬¡å—ï¼Ÿâ€ï¼‰</li>\n<li>ä¸‹æ¬¡è¡¨è¾¾è‡ªå·±è§‚ç‚¹çš„æ—¶å€™ï¼Œé¦–å…ˆåšåˆ°ç§»æƒ…ã€‚è¦èƒ½å¤Ÿå’Œå¯¹æ–¹çš„åŒä¼´ä¸€æ ·ï¼ˆç”šè‡³æ›´å¥½åœ°ï¼‰æè¿°å¯¹æ–¹çš„è§‚ç‚¹ï¼Œç„¶åç«™åœ¨å¯¹æ–¹çš„ç«‹åœºä¸Šï¼Œäº‰å–è®©è‡ªå·±çš„è§‚ç‚¹å¾—åˆ°ç†è§£ã€‚</li>\n</ol>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸‰éƒ¨åˆ† ä¹ æƒ¯å…­ ç»Ÿåˆç»¼æ•ˆâ€”â€”åˆ›é€ æ€§åˆä½œçš„åŸåˆ™","url":"https://lilei.pro/2019/04/07/Seven-Habbits-8/","content":"<p>ç»Ÿåˆç»¼æ•ˆçš„åŸºæœ¬æ€åº¦æ˜¯å¦‚æœä»¥ä¸ºå…·æœ‰ç›¸å½“èªæ˜æ‰æ™ºçš„äººè·Ÿæˆ‘æ„è§ä¸åŒï¼Œé‚£ä¹ˆå¯¹æ–¹çš„ä¸»å¼ å¿…å®šæœ‰æˆ‘å°šæœªä½“ä¼šçš„å¥¥å¦™ï¼Œå€¼å¾—åŠ ä»¥äº†è§£ã€‚</p>\n<p>ä¸äººåˆä½œæœ€é‡è¦çš„æ˜¯ï¼Œé‡è§†ä¸åŒä¸ªä½“çš„ä¸åŒå¿ƒç†ã€æƒ…ç»ªä¸æ™ºèƒ½ï¼Œä»¥åŠä¸ªäººçœ¼ä¸­æ‰€è§åˆ°çš„ä¸åŒä¸–ç•Œã€‚å‡å¦‚ä¸¤äººæ„è§ç›¸åŒï¼Œå…¶ä¸­ä¸€äººå¿…å±å¤šä½™ã€‚ä¸æ‰€è§ç•¥åŒçš„äººæ²Ÿé€šï¼Œæ¯«æ— ç›Šå¤„ï¼Œè¦æœ‰åˆ†æ­§æ‰æœ‰æ”¶è·ã€‚</p>\n<p>ç»Ÿåˆç»¼æ•ˆçš„ç²¾é«“æ˜¯åˆ¤æ–­å’Œå°Šé‡å·®å¼‚ï¼Œå–é•¿è¡¥çŸ­ã€‚</p>\n<h1 id=\"æ•å¼€èƒ¸æ€€ï¼Œåšé‡‡ä¼—è®®\"><a href=\"#æ•å¼€èƒ¸æ€€ï¼Œåšé‡‡ä¼—è®®\" class=\"headerlink\" title=\"æ•å¼€èƒ¸æ€€ï¼Œåšé‡‡ä¼—è®®\"></a>æ•å¼€èƒ¸æ€€ï¼Œåšé‡‡ä¼—è®®</h1><p>æ‰€è°“ç»Ÿåˆç»¼æ•ˆçš„æ²Ÿé€šï¼Œæ˜¯æŒ‡æ•å¼€èƒ¸æ€€ã€æ¥çº³ä¸€åˆ‡å¥‡æ€ªçš„æƒ³æ³•ï¼ŒåŒæ—¶ä¹Ÿè´¡çŒ®è‡ªå·±çš„æµ…è§ã€‚</p>\n<p>å‡¡æ˜¯åˆ›æ–°å°±å¾—æ‰¿æ‹…ï¼Œä¸æ€•å¤±è´¥ï¼Œä¸æ–­å°è¯•é”™è¯¯ã€‚åªæ„¿ç¨³æ‰ç¨³æ‰“çš„äººï¼Œç»ä¸èµ·æ­¤ç§ç…ç†¬ã€‚</p>\n<h1 id=\"æ²Ÿé€šä¸‰å±‚æ¬¡\"><a href=\"#æ²Ÿé€šä¸‰å±‚æ¬¡\" class=\"headerlink\" title=\"æ²Ÿé€šä¸‰å±‚æ¬¡\"></a>æ²Ÿé€šä¸‰å±‚æ¬¡</h1><p>ä½å±‚æ¬¡çš„æ²Ÿé€šæºè‡ªä½åº¦ä¿¡ä»»ï¼Œå…¶ç‰¹ç‚¹æ˜¯äººä¸äººä¹‹é—´äº’ç›¸æé˜²ï¼Œæ­¥æ­¥ä¸ºè¥ï¼Œç»å¸¸å€ŸåŠ©æ³•å¾‹è¯´è¯ï¼Œä¸ºæƒ…å†µæ¶åŒ–ä½œæ‰“ç®—ï¼Œå…¶ç»“æœåªèƒ½æ˜¯èµ¢/è¾“æˆ–è€…è¾“/èµ¢ï¼Œè€Œä¸”æ¯«æ— æ•ˆç‡å¯è¨€ï¼Œå³äº§å‡º/äº§èƒ½ä¸å¹³è¡¡ï¼Œç»“æœåªèƒ½æ˜¯è®©äººä»¬æ›´æœ‰ç†ç”±è¿›è¡Œè‡ªæˆ‘é˜²å¾¡å’Œä¿æŠ¤ã€‚</p>\n<p>ä¸­é—´ä¸€å±‚æ˜¯å½¼æ­¤å°Šé‡çš„äº¤æµæ–¹å¼ï¼Œå”¯æœ‰ç›¸å½“æˆç†Ÿçš„äººæ‰åŠå¾—åˆ°ã€‚ä½†æ˜¯ä¸ºäº†é¿å…å†²çªï¼ŒåŒæ–¹éƒ½ä¿æŒç¤¼è²Œï¼Œå´ä¸ä¸€å®šä¸ºå¯¹æ–¹è®¾æƒ³ã€‚åœ¨ç›¸äº’ä¾èµ–çš„ç¯å¢ƒä¸­ï¼Œæœ€å¸¸ç”¨çš„æ€åº¦æ˜¯<strong>å¦¥å</strong>ã€‚</p>\n<p>ç»Ÿåˆç»¼æ•ˆæ„å‘³ç€1+1ç­‰äº8æˆ–è€…16ï¼Œç”šè‡³1600ã€‚æºè‡ªé«˜åº¦ä¿¡ä»»æ²Ÿé€šçš„å±‚æ¬¡ã€‚</p>\n<h1 id=\"å¯»æ±‚ç¬¬ä¸‰æ¡é“è·¯\"><a href=\"#å¯»æ±‚ç¬¬ä¸‰æ¡é“è·¯\" class=\"headerlink\" title=\"å¯»æ±‚ç¬¬ä¸‰æ¡é“è·¯\"></a>å¯»æ±‚ç¬¬ä¸‰æ¡é“è·¯</h1><p>é«˜ä½™é¢çš„æƒ…æ„Ÿè´¦æˆ·ã€åŒèµ¢æ¨¡å¼ã€å…ˆç†è§£åˆ«äººçš„åŸåˆ™ï¼Œæ‰€æœ‰è¿™äº›åŠ åœ¨ä¸€èµ·ï¼Œå°±æ˜¯å®ç°åˆ›é€ æ€§ç»Ÿåˆç»¼æ•ˆçš„ç†æƒ³ç¯å¢ƒã€‚</p>\n<h1 id=\"æ¶ˆæåä½œå‡æ•ˆ\"><a href=\"#æ¶ˆæåä½œå‡æ•ˆ\" class=\"headerlink\" title=\"æ¶ˆæåä½œå‡æ•ˆ\"></a>æ¶ˆæåä½œå‡æ•ˆ</h1><p>äººé™…å…³ç³»æœ€å¯è´µçš„åœ°æ–¹å°±æ˜¯èƒ½æ¥è§¦åˆ°ä¸åŒçš„æ¨¡å¼ã€‚ç›¸åŒä¸æ˜¯ç»Ÿä¸€ï¼Œä¸€è‡´ä¹Ÿä¸ç­‰äºå›¢ç»“ï¼Œç»Ÿä¸€å’Œå›¢ç»“æ„å‘³ç€äº’è¡¥ï¼Œè€Œä¸æ˜¯ç›¸åŒã€‚ç›¸åŒæ¯«æ— åˆ›é€ æ€§å¯è¨€ï¼Œè€Œä¸”æ²‰é—·ä¹å‘³ã€‚ç»Ÿåˆç»¼æ•ˆçš„ç²¾é«“å°±æ˜¯å°Šé‡å·®å¼‚ã€‚</p>\n<h1 id=\"å°Šé‡å·®å¼‚\"><a href=\"#å°Šé‡å·®å¼‚\" class=\"headerlink\" title=\"å°Šé‡å·®å¼‚\"></a>å°Šé‡å·®å¼‚</h1><p>è‡ªä»¥ä¸ºæ˜¯çš„äººæ€»ä»¥ä¸ºè‡ªå·±æœ€å¯è§‚ï¼Œåˆ«äººéƒ½æœ‰æ‰€åé¢‡ï¼Œå…¶å®è¿™æ‰æ˜¯ç”»åœ°ä¸ºç‰¢ã€‚åä¹‹ï¼Œè™šæ€€è‹¥è°·çš„äººæ‰¿è®¤è‡ªå·±æœ‰ä¸è¶³ä¹‹å¤„ï¼Œè€Œä¹äºåœ¨ä¸äººäº¤å¾€ä¹‹ä¸­æ±²å–ä¸°å¯Œçš„çŸ¥è¯†è§è§£ï¼Œé‡è§†ä¸åŒçš„æ„è§ï¼Œå› è€Œå¢å¹¿è§é—»ã€‚</p>\n<h1 id=\"åŒ–é˜»åŠ›ä¸ºåŠ¨åŠ›\"><a href=\"#åŒ–é˜»åŠ›ä¸ºåŠ¨åŠ›\" class=\"headerlink\" title=\"åŒ–é˜»åŠ›ä¸ºåŠ¨åŠ›\"></a>åŒ–é˜»åŠ›ä¸ºåŠ¨åŠ›</h1><p>åœ¨äº’èµ–å…³ç³»ä¸­ï¼Œç»Ÿåˆç»¼æ•ˆæ˜¯å¯¹ä»˜é˜»æŒ æˆé•¿ä¸æ”¹å˜çš„æœ€æœ‰åŠ›é€”å¾„ã€‚</p>\n<p>åŠ¨åŠ›é€šå¸¸æ˜¯ç§¯æã€åˆç†ã€è‡ªè§‰ã€ç¬¦åˆç»æµæ•ˆç›Šçš„åŠ›é‡ï¼›ç›¸ååœ°ï¼Œé˜»åŠ›å¤šåŠæ¶ˆæã€è´Ÿé¢ã€ä¸åˆé€»è¾‘ã€æƒ…ç»ªåŒ–ã€ä¸è‡ªè§‰ï¼Œå…·ç¤¾ä¼šæ€§ä¸å¿ƒç†æ€§å› ç´ ã€‚è¿™ä¸¤ç»„ä½œç”¨åŠ›éƒ½æ˜¯çœŸå®å­˜åœ¨çš„ï¼Œåœ¨åº”å˜æ—¶éƒ½è¦è€ƒè™‘å‘¨å…¨ã€‚</p>\n<p>ä¸æ¶‰æ³•å‰Šå‡é˜»åŠ›ï¼Œåªä¸€å‘³å¢åŠ æ¨åŠ›ï¼Œå°±ä»¿ä½›æ–½åŠ›äºå¼¹ç°§ä¸Šï¼Œç»ˆæœ‰ä¸€å¤©å¼•èµ·åå¼¹ã€‚</p>\n<p>è¿™å¹¶ä¸æ„å‘³ç€æ‹’ç»é‡‡å–æ³•å¾‹æ‰‹æ®µï¼Œæœ‰äº›æ—¶å€™æ³•å¾‹æ‰‹æ®µæ—¶ç»å¯¹å¿…è¦çš„ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºå®ƒåªåº”è¯¥åœ¨æœ€åå…³å¤´å‘æŒ¥ä½œç”¨ï¼Œè€Œä¸æ˜¯é—®é¢˜åˆšä¸€å‡ºç°çš„æ—¶å€™ï¼Œè¿‡æ—©ä½¿ç”¨åªä¼šè®©ææƒ§å¿ƒç†å’Œæ³•å¾‹æ¨¡å¼åˆ¶çº¦äº†ç»Ÿåˆç»¼æ•ˆçš„å¯èƒ½æ€§ã€‚</p>\n<h1 id=\"è‡ªç„¶ç•Œæ˜¯ç»Ÿåˆç»¼æ•ˆçš„æœ€ä½³å…¸èŒƒ\"><a href=\"#è‡ªç„¶ç•Œæ˜¯ç»Ÿåˆç»¼æ•ˆçš„æœ€ä½³å…¸èŒƒ\" class=\"headerlink\" title=\"è‡ªç„¶ç•Œæ˜¯ç»Ÿåˆç»¼æ•ˆçš„æœ€ä½³å…¸èŒƒ\"></a>è‡ªç„¶ç•Œæ˜¯ç»Ÿåˆç»¼æ•ˆçš„æœ€ä½³å…¸èŒƒ</h1><p>ä½ åº”è¯¥å°Šé‡è‡ªå·±å–„äºåˆ†æçš„ä¸€é¢å’Œå¯Œæœ‰åˆ›é€ åŠ›çš„ä¸€é¢ï¼Œå°Šé‡å®ƒä»¬çš„å·®å¼‚ä¼šå‚¬ç”Ÿä½ çš„åˆ›é€ åŠ›ã€‚</p>\n<p>å³ä½¿å¤„äºä¸åˆ©å¢ƒåœ°ï¼Œä¹Ÿä¸åº”è¯¥æ”¾å¼ƒè¿½æ±‚ç»Ÿåˆç»¼æ•ˆã€‚ä¸è¦åœ¨æ„åˆ«äººçš„æ— ç¤¼è¡Œå¾„ï¼Œé¿å¼€é‚£äº›æ¶ˆæåŠ›é‡ï¼Œå‘ç°å¹¶åˆ©ç”¨åˆ«äººçš„ä¼˜åŠ¿ï¼Œæé«˜è‡ªå·±çš„è®¤è¯†ï¼Œæ‰©å±•è‡ªå·±çš„è§†é‡ã€‚ä½ åº”è¯¥åœ¨ç›¸äº’ä¾èµ–çš„ç¯å¢ƒä¸­å‹‡æ•¢è€Œå¦ç‡åœ°è¡¨è¾¾è‡ªå·±çš„è§‚ç‚¹ã€æƒ…æ„Ÿå’Œç»å†ï¼Œå€Ÿæ­¤é¼“åŠ±ä»–äººåŒæ ·åœ°å¦è¯šç›¸å¾…ã€‚</p>\n<p>å°Šé‡äººä¸äººä¹‹é—´çš„å·®å¼‚ï¼Œå½“æœ‰äººä¸åŒæ„ä½ çš„è§‚ç‚¹çš„æ—¶å€™ï¼Œä½ åº”è¯¥è¯´ï¼šâ€œä½ è·Ÿæˆ‘æœ‰ä¸ä¸€æ ·çš„çœ‹æ³•ï¼Œè¿™å¾ˆå¥½ã€‚â€</p>\n<h1 id=\"ä»˜è¯¸è¡ŒåŠ¨\"><a href=\"#ä»˜è¯¸è¡ŒåŠ¨\" class=\"headerlink\" title=\"ä»˜è¯¸è¡ŒåŠ¨\"></a>ä»˜è¯¸è¡ŒåŠ¨</h1><ol>\n<li>æƒ³ä¸€æƒ³è°æ€»æ˜¯è·Ÿä½ çš„çœ‹æ³•ä¸ä¸€æ ·ï¼Œç”¨ä»€ä¹ˆæ–¹æ³•å¯ä»¥æŠŠè¿™äº›å·®å¼‚å˜æˆé€šå¾€ç¬¬ä¸‰æ¡é“è·¯çš„é˜¶æ¢¯ã€‚å¯ä»¥å°±å½“å‰çš„æŸä¸ªé¡¹ç›®æˆ–è€…æŸä¸ªé—®é¢˜è¯·æ•™è¿™ä¸ªäººçš„æ„è§ï¼Œçæƒœè¿™äº›ä¸åŒçš„è§è§£ã€‚</li>\n<li>åˆ—ä¸€å¼ åå•ï¼Œå†™ä¸Šè®©ä½ è§‰å¾—ä¸å¿«çš„äººçš„åå­—ã€‚å¦‚æœä½ å†…å¿ƒæœ‰æ›´å……è¶³çš„å®‰å…¨æ„Ÿï¼Œèƒ½å¤Ÿåšåˆ°å°Šé‡å·®å¼‚ï¼Œä½ æ˜¯å¦ä¼šè§‰å¾—è¿™äº›äººä»£è¡¨äº†ä¸åŒæ„è§ï¼Œè€Œä½ å¯å€Ÿæ­¤å®ç°ä¸ä»–ä»¬çš„ç»Ÿåˆç»¼æ•ˆï¼Ÿ</li>\n<li>æƒ³ä¸€æƒ³åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½ æ›´éœ€è¦ç»Ÿåˆç»¼æ•ˆï¼Ÿç»Ÿåˆç»¼æ•ˆéœ€è¦å“ªäº›æ¡ä»¶æ¥æ”¯æŒï¼Ÿæ€æ ·æ‰èƒ½åˆ›é€ å‡ºè¿™äº›æ¡ä»¶ï¼Ÿ</li>\n<li>ä¸‹ä¸€æ¬¡å½“ä½ åŒæŸäººæ„è§ç›¸å·¦æˆ–è€…å‘ç”Ÿå†²çªçš„æ—¶å€™ï¼Œå°½é‡ç†è§£ä»–çš„ç«‹åœºå’Œé¡¾è™‘ï¼Œä»¥åˆ›é€ æ€§çš„ã€äº’æƒ äº’åˆ©çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚</li>\n</ol>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬äºŒéƒ¨åˆ† ä¹ æƒ¯ä¸‰ è¦äº‹ç¬¬ä¸€","url":"https://lilei.pro/2019/04/07/Seven-Habbits-4/","content":"<h1 id=\"å›ç­”ä¸¤ä¸ªé—®é¢˜\"><a href=\"#å›ç­”ä¸¤ä¸ªé—®é¢˜\" class=\"headerlink\" title=\"å›ç­”ä¸¤ä¸ªé—®é¢˜\"></a>å›ç­”ä¸¤ä¸ªé—®é¢˜</h1><ul>\n<li>åœ¨ä½ ç›®å‰çš„ç”Ÿæ´»ä¸­ï¼Œæœ‰å“ªäº›äº‹æƒ…èƒ½å¤Ÿå½»åº•æ”¹è§‚ä½ çš„ä¸ªäººç”Ÿæ´»ï¼Œä½†æ˜¯ä½ ä¸€ç›´æ²¡æœ‰å»åšï¼Ÿ</li>\n<li>åœ¨ä½ ç›®å‰çš„ç”Ÿæ´»ä¸­ï¼Œæœ‰å“ªäº›äº‹æƒ…èƒ½å¤Ÿå½»åº•æ”¹è§‚ä½ çš„å·¥ä½œå±€é¢ï¼Œä½†æ˜¯ä½ ä¸€ç›´æ²¡æœ‰å»åšï¼Ÿ</li>\n</ul>\n<p>ä¹ æƒ¯ä¸‰æ˜¯ä¹ æƒ¯ä¸€ã€äºŒçš„å…·ä½“å®è·µã€‚ä¹ æƒ¯ä¸€å‘Šè¯‰ä½ ï¼Œä½ æ˜¯åˆ›é€ è€…ï¼Œä½ æŒæ§è‡ªå·±çš„äººç”Ÿï¼Œå…¶åŸºç¡€æ˜¯äººç±»ç‰¹æœ‰çš„å››å¤§å¤©èµ‹ï¼šæƒ³è±¡åŠ›ã€è‰¯çŸ¥ã€ç‹¬ç«‹æ„å¿—ã€è‡ªæˆ‘æ„è¯†ã€‚</p>\n<p>ä¹ æƒ¯äºŒæ˜¯å…³äºç¬¬ä¸€æ¬¡çš„åˆ›é€ æˆ–è€…æ™ºåŠ›ä¸Šçš„åˆ›é€ çš„ä¹ æƒ¯ï¼Œå…¶åŸåˆ™åŸºç¡€æ˜¯<strong>æƒ³è±¡åŠ›</strong>å’Œ<strong>è‰¯çŸ¥</strong>è¿™ä¸¤å¤§å¤©èµ‹ã€‚</p>\n<p>ä¹ æƒ¯ä¸‰æ˜¯å…³äºç¬¬äºŒæ¬¡çš„åˆ›é€ æˆ–è€…ä½“åŠ›ä¸Šçš„åˆ›é€ çš„ä¹ æƒ¯ï¼Œæ˜¯å¯¹å‰é¢ä¸¤ä¸ªä¹ æƒ¯çš„å®æ–½ã€æ‰§è¡Œå’Œè‡ªç„¶è¡¨ç°ã€‚</p>\n<p>å·¦è„‘è¿›è¡Œç®¡ç†ï¼Œå³è„‘è¿›è¡Œé¢†å¯¼ã€‚</p>\n<p>æœ‰æ•ˆçš„ç®¡ç†æŒ‡çš„å°±æ˜¯è¦äº‹ç¬¬ä¸€ï¼Œå…ˆåšæœ€é‡è¦çš„äº‹æƒ…ã€‚é¢†å¯¼è€…é¦–å…ˆè¦å†³å®šçš„ï¼Œå°±æ˜¯å“ªäº›äº‹æƒ…æ˜¯é‡è¦çš„ï¼›è€Œä½œä¸ºç®¡ç†è€…ï¼Œå°±æ˜¯è¦å°†è¿™äº›é‡è¦çš„äº‹åŠ¡ä¼˜å…ˆå®‰æ’ã€‚è‡ªæˆ‘ç®¡ç†çš„å®è´¨å°±æ˜¯è‡ªå¾‹å’Œæ¡ç†ï¼Œæ˜¯å¯¹è®¡åˆ’çš„å®æ–½ã€‚</p>\n<p>ã€ŠæˆåŠŸçš„æ™®éå…±æ€§ã€‹ä¸€æ–‡çš„ä½œè€…æ ¼é›·ï¼ˆE.M.Grayï¼‰è¯´ï¼šâ€œ<strong>æˆåŠŸè€…èƒ½ä¸ºå¤±è´¥è€…æ‰€ä¸èƒ½ä¸ºï¼Œçºµä½¿å¹¶éå¿ƒç”˜æƒ…æ„¿ï¼Œä½†ä¸ºäº†ç†æƒ³ä¸ç›®æ ‡ï¼Œä»å¯ä»¥å‡­æ¯…åŠ›å…‹æœå¿ƒç†éšœç¢ã€‚</strong>â€</p>\n<h1 id=\"å››ä»£æ—¶é—´ç®¡ç†ç†è®ºçš„æ¼”è¿›\"><a href=\"#å››ä»£æ—¶é—´ç®¡ç†ç†è®ºçš„æ¼”è¿›\" class=\"headerlink\" title=\"å››ä»£æ—¶é—´ç®¡ç†ç†è®ºçš„æ¼”è¿›\"></a>å››ä»£æ—¶é—´ç®¡ç†ç†è®ºçš„æ¼”è¿›</h1><p>å¦‚ä½•åˆ†è¾¨è½»é‡ç¼“æ€¥ä¸åŸ¹å…»ç»„ç»‡èƒ½åŠ›ï¼Œæ˜¯æ—¶é—´ç®¡ç†çš„ç²¾é«“ã€‚</p>\n<ol>\n<li>ç¬¬ä¸€ä»£ç†è®ºç€é‡åˆ©ç”¨ä¾¿æ¡ä¸å¤‡å¿˜å½•ï¼Œåœ¨å¿™ç¢Œä¸­è°ƒé…æ—¶é—´ä¸ç²¾åŠ›</li>\n<li>ç¬¬äºŒä»£ç†è®ºå¼ºè°ƒè¡Œäº‹å†ä¸æ—¥ç¨‹è¡¨ï¼Œåæ˜ å‡ºæ—¶é—´ç®¡ç†å·²ç»æ³¨æ„åˆ°è§„åˆ’æœªæ¥çš„é‡è¦ã€‚</li>\n<li>ç¬¬ä¸‰ä»£æ˜¯è®²æ±‚ä¼˜å…ˆé¡ºåºçš„æ¦‚å¿µï¼Œä¾æ®è½»é‡ç¼“æ€¥è®¾å®šçŸ­ä¸­é•¿æœŸç›®æ ‡ã€‚</li>\n<li>ç¬¬å››ä»£ç†è®ºä»æ ¹æœ¬å¦å®šâ€œæ—¶é—´ç®¡ç†â€ï¼Œä¸»å¼ å…³é”®åœ¨äºâ€œä¸ªäººç®¡ç†â€ï¼Œé‡å¿ƒåº”å½“æ”¾åœ¨ç»´æŒäº§å‡ºä¸äº§èƒ½å¹³è¡¡ä¸Šã€‚</li>\n</ol>\n<h1 id=\"åˆ«è®©çåŠ¡ç‰µç€é¼»å­èµ°\"><a href=\"#åˆ«è®©çåŠ¡ç‰µç€é¼»å­èµ°\" class=\"headerlink\" title=\"åˆ«è®©çåŠ¡ç‰µç€é¼»å­èµ°\"></a>åˆ«è®©çåŠ¡ç‰µç€é¼»å­èµ°</h1><p>ç¬¬å››ä»£æ—¶é—´ç®¡ç†ç†è®ºä»é‡è¦æ€§å’Œç´§æ€¥ç¨‹åº¦ä¸¤ä¸ªç»´åº¦å¯¹äº‹åŠ¡è¿›è¡Œåˆ’åˆ†ã€‚é‡è¦æ€§ä¸ç›®æ ‡æœ‰å…³ï¼Œå‡¡æœ‰ä»·å€¼ã€æœ‰åˆ©äºå®ç°ä¸ªäººç›®æ ‡çš„å°±æ˜¯è¦äº‹ã€‚ç´§æ€¥ç¨‹åº¦ä¸æ—¶é—´ç´§è¿«æ€§æœ‰å…³ï¼Œç´§è¿«ä¹‹äº‹é€šå¸¸éƒ½æ˜¾è€Œæ˜“è§ï¼Œæ¨è¯¿ä¸å¾—ã€‚</p>\n<h2 id=\"ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œé‡è¦ä¸”ç´§æ€¥\"><a href=\"#ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œé‡è¦ä¸”ç´§æ€¥\" class=\"headerlink\" title=\"ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œé‡è¦ä¸”ç´§æ€¥\"></a>ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œé‡è¦ä¸”ç´§æ€¥</h2><p>åœ¨çŸ©é˜µä¸­ï¼Œç¬¬ä¸€ç±»äº‹åŠ¡é€šå¸¸æ—¢ç´§è¿«åˆé‡è¦ï¼Œéœ€è¦ç«‹å³å¤„ç†ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€œå±æœºâ€æˆ–è€…â€œé—®é¢˜â€ã€‚å¦‚æœä½ è¿‡åˆ†æ³¨é‡ç¬¬ä¸€ç±»äº‹åŠ¡ï¼Œå®ƒä»¬çš„èŒƒå›´ä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ï¼Œæœ€ç»ˆå æ®ä½ å…¨éƒ¨çš„æ—¶é—´å’Œç²¾åŠ›ã€‚</p>\n<p>å¤§éƒ¨åˆ†æ—¶é—´ç²¾åŠ›éƒ½ç”¨äºå¤„ç†å±æœºçš„äººï¼ˆç¬¬ä¸€ç±»äº‹åŠ¡ï¼‰</p>\n<ul>\n<li>å‹åŠ›å¤§</li>\n<li>ç²¾ç–²åŠ›å°½</li>\n<li>è¢«å±æœºç‰µç€é¼»å­èµ°</li>\n<li>å¿™äºæ”¶æ‹¾æ®‹å±€</li>\n</ul>\n<h2 id=\"ç¬¬ä¸‰ç±»äº‹åŠ¡ï¼Œç´§æ€¥ä¸é‡è¦\"><a href=\"#ç¬¬ä¸‰ç±»äº‹åŠ¡ï¼Œç´§æ€¥ä¸é‡è¦\" class=\"headerlink\" title=\"ç¬¬ä¸‰ç±»äº‹åŠ¡ï¼Œç´§æ€¥ä¸é‡è¦\"></a>ç¬¬ä¸‰ç±»äº‹åŠ¡ï¼Œç´§æ€¥ä¸é‡è¦</h2><p>è¿™äº›äººå°†æ—¶é—´è‡´åŠ›äºç´§æ€¥ä¸é‡è¦çš„ç¬¬ä¸‰ç±»äº‹åŠ¡ï¼Œå´è‡ªä»¥ä¸ºåœ¨å¤„ç†ç¬¬ä¸€ç±»äº‹åŠ¡ã€‚æ®Šä¸çŸ¥ç´§è¿«ä¹‹äº‹å¾€å¾€æ˜¯åˆ«äººçš„ä¼˜å…ˆï¼Œå¯¹åˆ«äººå¾ˆé‡è¦ï¼Œå¯¹è‡ªå·±å´ä¸ç„¶ã€‚</p>\n<ul>\n<li>æ€¥åŠŸè¿‘åˆ©</li>\n<li>è¢«å±æœºç‰µç€é¼»å­èµ°</li>\n<li>è¢«è§†ä¸ºå·§è¨€ä»¤è‰²</li>\n<li>è½»è§†ç›®æ ‡å’Œè®¡åˆ’</li>\n<li>è®¤ä¸ºè‡ªå·±æ˜¯å—å®³è€…ï¼Œç¼ºä¹è‡ªåˆ¶åŠ›</li>\n<li>äººé™…å…³ç³»è‚¤æµ…ï¼Œç”šè‡³ç ´è£‚</li>\n</ul>\n<h2 id=\"ç¬¬å››ç±»äº‹åŠ¡ï¼Œæ—¢ä¸é‡è¦ä¹Ÿä¸ç´§æ€¥\"><a href=\"#ç¬¬å››ç±»äº‹åŠ¡ï¼Œæ—¢ä¸é‡è¦ä¹Ÿä¸ç´§æ€¥\" class=\"headerlink\" title=\"ç¬¬å››ç±»äº‹åŠ¡ï¼Œæ—¢ä¸é‡è¦ä¹Ÿä¸ç´§æ€¥\"></a>ç¬¬å››ç±»äº‹åŠ¡ï¼Œæ—¢ä¸é‡è¦ä¹Ÿä¸ç´§æ€¥</h2><p>æœ‰äº›ä¸è´Ÿè´£ä»»çš„äººï¼Œå°†æ—¶é—´éƒ½èŠ±åœ¨ç¬¬ä¸‰å’Œç¬¬å››ç±»äº‹åŠ¡ä¸Š</p>\n<ul>\n<li>å®Œå…¨ä¸è´Ÿè´£ä»»</li>\n<li>è¢«ç‚’é±¿é±¼</li>\n<li>åŸºæœ¬ç”Ÿæ´»éƒ½éœ€è¦ä¾èµ–ä»–äººæˆ–ç¤¾ä¼šæœºæ„</li>\n</ul>\n<h2 id=\"ç¬¬äºŒç±»äº‹åŠ¡ï¼Œé‡è¦ä¸ç´§æ€¥\"><a href=\"#ç¬¬äºŒç±»äº‹åŠ¡ï¼Œé‡è¦ä¸ç´§æ€¥\" class=\"headerlink\" title=\"ç¬¬äºŒç±»äº‹åŠ¡ï¼Œé‡è¦ä¸ç´§æ€¥\"></a>ç¬¬äºŒç±»äº‹åŠ¡ï¼Œé‡è¦ä¸ç´§æ€¥</h2><p>åŒ…æ‹¬å»ºç«‹äººé™…å…³ç³»ã€æ’°å†™ä½¿å‘½å®£è¨€ã€è§„åˆ’é•¿æœŸç›®æ ‡ã€é˜²æ‚£äºæœªç„¶ç­‰ç­‰ã€‚é«˜æ•ˆèƒ½äººå£«é¿å…é™·å…¥ç¬¬ä¸‰å’Œç¬¬å››ç±»äº‹åŠ¡ï¼Œé€šè¿‡èŠ±è´¹æ›´å¤šæ—¶é—´åœ¨ç¬¬äºŒç±»äº‹åŠ¡æ¥å‡å°‘ç¬¬ä¸€ç±»äº‹åŠ¡çš„æ•°é‡ã€‚</p>\n<ul>\n<li>æ„¿æ™¯ï¼Œè¿œè§</li>\n<li>å¹³è¡¡</li>\n<li>è‡ªå¾‹</li>\n<li>è‡ªåˆ¶</li>\n<li>å¾ˆå°‘å‘ç”Ÿå±æœº</li>\n</ul>\n<h1 id=\"å‹‡æ•¢è¯´â€œä¸â€\"><a href=\"#å‹‡æ•¢è¯´â€œä¸â€\" class=\"headerlink\" title=\"å‹‡æ•¢è¯´â€œä¸â€\"></a>å‹‡æ•¢è¯´â€œä¸â€</h1><p>è‹¥è¦é›†ä¸­ç²¾åŠ›äºå½“æ€¥çš„è¦åŠ¡ï¼Œå°±å¾—æ’é™¤æ¬¡è¦äº‹åŠ¡çš„ç‰µç»Šï¼Œæ­¤æ—¶éœ€è¦æœ‰è¯´â€œä¸â€çš„å‹‡æ°”ã€‚</p>\n<blockquote>\n<p>æˆ‘æ›¾è˜ç”¨ä¸€ä½ææœ‰æ‰ååˆç‹¬ç«‹è‡ªä¸»çš„ä¸“å‘˜ï¼Œæœ‰ä¸€å¤©æœ‰ä»¶æ€¥äº‹æƒ³æ‹œæ‰˜ä»–ã€‚ä»–è¯´ï¼šâ€œä½ è¦æˆ‘åšä»€ä¹ˆéƒ½å¯ä»¥ï¼Œä¸è¿‡è¯·å…ˆäº†è§£ç›®å‰çš„çŠ¶å†µã€‚â€ä»–æŒ‡ç€å¢™å£ä¸Šçš„å·¥ä½œè®¡åˆ’è¡¨ï¼Œæ˜¾ç¤ºè¶…è¿‡ 20 ä¸ªè®¡åˆ’æ­£åœ¨è¿›è¡Œï¼Œè¿™æ˜¯æˆ‘ä¿©æ—©å·²è°ˆå¦¥çš„ã€‚ç„¶åä»–è¯´ï¼šâ€œè¿™ä»¶æ€¥äº‹è‡³å°‘å å»å‡ å¤©æ—¶é—´ï¼Œä½ å¸Œæœ›æˆ‘æ”¾ä¸‹æˆ–å–æ¶ˆå“ªä¸ªè®¡åˆ’æ¥ç©ºå‡ºæ—¶é—´ï¼Ÿâ€</p>\n</blockquote>\n<p>å¾ˆå¤šäººå¦é™ˆè‡ªå·±â€œç¼ºä¹è‡ªåˆ¶åŠ›â€ï¼Œå®é™…ä¸Šï¼Œè¿™æ˜¯â€œç¡®è®¤ç›®æ ‡â€çš„åŠŸå¤«è¿˜ä¸åˆ°å®¶ï¼Œè€Œä¸”ä¸èƒ½ç”±è¡·æ¥æ”¶â€œäº‹æœ‰è½»é‡ç¼“æ€¥â€çš„è§‚å¿µï¼Œè‡ªç„¶å®¹æ˜“åŠé€”è€ŒåºŸã€‚</p>\n<h1 id=\"é›†å¤§æˆçš„æ—¶é—´ç®¡ç†ç†è®º\"><a href=\"#é›†å¤§æˆçš„æ—¶é—´ç®¡ç†ç†è®º\" class=\"headerlink\" title=\"é›†å¤§æˆçš„æ—¶é—´ç®¡ç†ç†è®º\"></a>é›†å¤§æˆçš„æ—¶é—´ç®¡ç†ç†è®º</h1><p>ç¬¬ä¸€ä»£çš„æ—¶é—´ç®¡ç†ç†è®ºä¸æ¯«æ²¡æœ‰â€œä¼˜å…ˆâ€çš„æ¦‚å¿µã€‚å›ºç„¶åšå®Œå¤‡å¿˜å½•ä¸Šçš„ä¸€ä»¶äº‹ï¼Œä¼šå¸¦ç»™äººæˆå°±æ„Ÿï¼Œå¯æ˜¯è¿™ç§æˆå°±ä¸ä¸€å®šç¬¦åˆäººç”Ÿå¤§ç›®æ ‡ã€‚å› æ­¤ï¼Œæ‰€å®Œæˆçš„åªæ˜¯å¿…è¦è€Œéé‡è¦çš„äº‹ã€‚</p>\n<p>ç„¶è€Œå¥½æ­¤é“è€…ä¸åœ¨å°‘æ•°ï¼Œå› ä¸ºé˜»åŠ›æœ€å°ï¼Œç—›è‹¦ä¸å‹åŠ›ä¹Ÿæœ€å°‘ã€‚</p>\n<p>æ›´ä½•å†µï¼Œæ ¹æ®å¤–åœ¨è¦æ±‚ä¸è§„å¾‹è¡Œäº‹ï¼Œå®¹æ˜“æ¨å¸è´£ä»»ã€‚è¿™ç±»äººç¼ºä¹æ•ˆç‡ï¼Œç¼ºä¹è‡ªåˆ¶åŠ›ä¸è‡ªå°Šã€‚</p>\n<p>ç¬¬å››ä»£ç†è®ºå¼ºè°ƒä»¥åŸåˆ™ä¸ºé‡å¿ƒï¼Œé…åˆä¸ªäººå¯¹ä½¿å‘½çš„è®¤çŸ¥ï¼Œå…¼é¡¾é‡è¦æ€§ä¸æ€¥è¿«æ€§ï¼›å¼ºè°ƒäº§å‡ºä¸äº§èƒ½é½å¤´å¹¶è¿›ï¼Œç€é‡ç¬¬äºŒç±»äº‹åŠ¡çš„å®Œæˆã€‚</p>\n<h1 id=\"ç®¡ç†æ–¹æ³•å…­æ ‡å‡†\"><a href=\"#ç®¡ç†æ–¹æ³•å…­æ ‡å‡†\" class=\"headerlink\" title=\"ç®¡ç†æ–¹æ³•å…­æ ‡å‡†\"></a>ç®¡ç†æ–¹æ³•å…­æ ‡å‡†</h1><ol>\n<li>å’Œè°ä¸€è‡´ã€‚</li>\n<li>å¹³è¡¡åŠŸèƒ½ã€‚</li>\n<li>å›´ç»•ä¸­å¿ƒç†æƒ³çš„ç®¡ç†æ–¹æ³•ã€‚</li>\n<li>ä»¥äººä¸ºæœ¬ã€‚</li>\n<li>çµæ´»å˜é€šã€‚</li>\n<li>ä¾¿äºæºå¸¦çš„ç®¡ç†å·¥å…·ã€‚</li>\n</ol>\n<h1 id=\"ä¸ªäººç®¡ç†å››æ­¥éª¤\"><a href=\"#ä¸ªäººç®¡ç†å››æ­¥éª¤\" class=\"headerlink\" title=\"ä¸ªäººç®¡ç†å››æ­¥éª¤\"></a>ä¸ªäººç®¡ç†å››æ­¥éª¤</h1><h2 id=\"ç¬¬ä¸€æ­¥-ç¡®è®¤è§’è‰²\"><a href=\"#ç¬¬ä¸€æ­¥-ç¡®è®¤è§’è‰²\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ ç¡®è®¤è§’è‰²\"></a>ç¬¬ä¸€æ­¥ ç¡®è®¤è§’è‰²</h2><p>å†™å‡ºä½ è‡ªå·±çš„å…³é”®è§’è‰²ï¼Œåœ¨å®¶åº­ä¸­ã€å·¥ä½œä¸­ä¹ƒè‡³æ•™ä¼šå’Œç¤¾åŒºäº‹åŠ¡ä¸­çš„è§’è‰²ã€‚åˆ—ä¸¾è‡ªå·±æƒ³è¦æŒç»­æŠ•å…¥æ—¶é—´å’Œç²¾åŠ›å»åšçš„ä¸€äº›äº‹æƒ…ã€‚</p>\n<h2 id=\"ç¬¬äºŒæ­¥-é€‰å®šå‘¨ç›®æ ‡\"><a href=\"#ç¬¬äºŒæ­¥-é€‰å®šå‘¨ç›®æ ‡\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ é€‰å®šå‘¨ç›®æ ‡\"></a>ç¬¬äºŒæ­¥ é€‰å®šå‘¨ç›®æ ‡</h2><p>æ€è€ƒä¸‹ä¸€ä¸ªå‘¨è®¡åˆ’ä¸­æ¯ä¸€ä¸ªä»»åŠ¡æ ä¸‹ä½ æœ€æƒ³åšçš„ä¸€ä¸¤ä»¶è¦äº‹ï¼Œä½œä¸ºä½ é€‰å®šçš„ç›®æ ‡ã€‚è¿™äº›ç›®æ ‡ä¸­ä¸€å®šè¦æœ‰å‡ ä¸ª<strong>ç¬¬äºŒç±»äº‹åŠ¡</strong>ï¼Œæ ¹æ®è‡ªå·±çš„æ„Ÿè§‰åˆ¤æ–­æ¯ä¸ªè§’è‰²ä¸­å“ªäº›äº‹æƒ…æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œå¹¶ä¸ºæ¯ä¸ªè§’è‰²ç¡®ç«‹ä¸€ä¸ªæˆ–ä¸¤ä¸ªç›®æ ‡ã€‚</p>\n<h2 id=\"ç¬¬ä¸‰æ­¥-å®‰æ’è¿›åº¦\"><a href=\"#ç¬¬ä¸‰æ­¥-å®‰æ’è¿›åº¦\" class=\"headerlink\" title=\"ç¬¬ä¸‰æ­¥ å®‰æ’è¿›åº¦\"></a>ç¬¬ä¸‰æ­¥ å®‰æ’è¿›åº¦</h2><p>ä¸ºæ¯ä¸€é¡¹ç›®æ ‡å®‰æ’å…·ä½“çš„å®æ–½æ—¶é—´ã€‚æœ‰äº›ç›®æ ‡éœ€è¦åœ¨å·¥ä½œæ—¥å®Œæˆï¼Œæœ‰äº›ç›®æ ‡éœ€è¦åœ¨å‘¨æœ«å®Œæˆã€‚ç¡®ä¿è‡ªå·±æœ‰å……åˆ†çš„è‡ªç”±å’Œçµæ´»æ€§ä»¥åº”ä»˜çªå‘äº‹ä»¶ï¼Œè®©ä½ äº«å—åˆ°è‡ªå‘çš„ä¹è¶£ã€‚ä½ ä¼šæ„Ÿè§‰å¾ˆè¸å®ï¼Œå› ä¸ºä½ çŸ¥é“è‡ªå·±å·²ç»å®‰æ’å¥½äº†ä¸€å‘¨çš„è¦åŠ¡ï¼Œç…§é¡¾åˆ°äº†å·¥ä½œç”Ÿæ´»ä¸­çš„æ¯ä¸€ä¸ªé‡è¦é¢†åŸŸã€‚</p>\n<h2 id=\"ç¬¬å››éƒ¨-æ¯æ—¥è°ƒæ•´\"><a href=\"#ç¬¬å››éƒ¨-æ¯æ—¥è°ƒæ•´\" class=\"headerlink\" title=\"ç¬¬å››éƒ¨ æ¯æ—¥è°ƒæ•´\"></a>ç¬¬å››éƒ¨ æ¯æ—¥è°ƒæ•´</h2><p>æ ¹æ®çªå‘äº‹ä»¶ã€äººé™…å…³ç³»çš„æ„å¤–å‘å±•åŠå´­æ–°æœºä¼šå¯¹æ¯å¤©çš„è¦åŠ¡å®‰æ’è¿›è¡Œé€‚å½“è°ƒæ•´ã€‚</p>\n<p>åœ¨æ¯å¤©æ—©æ™¨å®¡è§†è‡ªå·±ä¸€å¤©çš„æ—¥ç¨‹å®‰æ’ã€‚</p>\n<h1 id=\"ä»˜è¯¸å®è·µ\"><a href=\"#ä»˜è¯¸å®è·µ\" class=\"headerlink\" title=\"ä»˜è¯¸å®è·µ\"></a>ä»˜è¯¸å®è·µ</h1><p>è¯šå¿ƒæ­£æ„ï¼Œå¯¹äººä¸å¯è®²æ•ˆç‡ï¼Œæ•ˆç‡æ˜¯å¯¹äº‹è€Œè¨€çš„ï¼Œå¯¹äººåº”å½“è®²<strong>æ•ˆç”¨</strong>ã€‚ç¬¬å››ä»£ä¸ªäººç®¡ç†ç†è®ºçš„ç‰¹ç‚¹åœ¨äºæ‰¿è®¤äººæ¯”äº‹æ›´é‡è¦ã€‚</p>\n<h1 id=\"ç¬¬å››ä»£æ—¶é—´ç®¡ç†æ–¹æ³•çš„ä¼˜ç‚¹\"><a href=\"#ç¬¬å››ä»£æ—¶é—´ç®¡ç†æ–¹æ³•çš„ä¼˜ç‚¹\" class=\"headerlink\" title=\"ç¬¬å››ä»£æ—¶é—´ç®¡ç†æ–¹æ³•çš„ä¼˜ç‚¹\"></a>ç¬¬å››ä»£æ—¶é—´ç®¡ç†æ–¹æ³•çš„ä¼˜ç‚¹</h1><p>ç¬¬å››ä»£æ—¶é—´ç®¡ç†æ–¹æ³•æ¯”å‰ä¸‰ä»£æ›´åŠ å…ˆè¿›ï¼Œè¿™ç§å…ˆè¿›ä½“ç°åœ¨äº”ä¸ªæ–¹é¢</p>\n<ol>\n<li>ä»¥åŸåˆ™ä¸ºåŸºç¡€ï¼Œåˆ‡å®åœ°åˆ›é€ å‡ºä¸€ä¸ªæ ¸å¿ƒæ¨¡å¼ï¼Œè®©ä½ èƒ½å¤Ÿåœ¨ä¸€ä¸ªæ›´å¤§çš„èŒƒå›´å†…åˆ†é…è‡ªå·±çš„æ—¶é—´ï¼Œçœ‹æ¸…æ¥šä»€ä¹ˆæ˜¯çœŸæ­£é‡è¦å’Œæœ‰æ•ˆçš„ã€‚</li>\n<li>æ¥å—ä½ å†…å¿ƒè‰¯çŸ¥çš„æŒ‡å¯¼ï¼Œè®©ä½ æœ‰æœºä¼šæ›´å¥½åœ°å®‰æ’è‡ªå·±çš„ç”Ÿæ´»ï¼Œå¹¶ä¸”æœ€å¤§é™åº¦åœ°åŒä½ çš„ä»·å€¼è§‚ä¿æŒä¸€è‡´ã€‚åŒæ—¶ç»™ä½ è‡ªç”±å’Œå˜é€šï¼Œè®©ä½ åœ¨ç‰ºç‰²æ—¢å®šæ—¥ç¨‹å®‰æ’ï¼Œæœä»æ›´é‡è¦çš„ä»·å€¼è§‚çš„æ—¶å€™å¿ƒå¹³æ°”å’Œï¼Œæ¯«ä¸å†…ç–šã€‚</li>\n<li>è¿™ç§æ–¹æ³•ç¡®è®¤äº†ä½ çš„ä¸ªäººä½¿å‘½ï¼ŒåŒ…æ‹¬ä»·å€¼è§‚å’Œé•¿æœŸç›®æ ‡ã€‚</li>\n<li>è¿™ç§æ–¹æ³•å¸®åŠ©ä½ æ˜ç¡®è‡ªå·±çš„è§’è‰²ï¼Œå¹³è¡¡è‡ªå·±ç”Ÿæ´»ä¸­çš„å„ä¸ªæ–¹é¢ã€‚æ¯ä¸ªæ˜ŸæœŸä¸ºæ¯ä¸ªå…³é”®è§’è‰²ç¡®ç«‹è¦è¾¾åˆ°çš„ç›®æ ‡ï¼Œå¹¶ä½œå‡ºå…·ä½“çš„æ—¥ç¨‹å®‰æ’ã€‚</li>\n<li>ä»¥ä¸€ä¸ªæ˜ŸæœŸä¸ºå•ä½è®¡åˆ’ç”Ÿæ´»ï¼Œä¸å¿…å±€é™äºçŸ­æš‚çš„ä¸€å¤©æ—¶é—´ã€‚é€šè¿‡å®¡è§†è‡ªå·±çš„ä¸»è¦è§’è‰²è€Œè®©è‡ªå·±ä¿æŒæ¸…é†’ï¼Œç»å¸¸æƒ³åˆ°è‡ªå·±å†…å¿ƒæ·±å¤„çš„ä»·å€¼è§‚ã€‚</li>\n</ol>\n<p>æœ‰ä¸€æ¡ä¸»çº¿è´¯ç©¿è¿™äº”ä¸ªæ–¹é¢ï¼Œé‚£å°±æ˜¯å°†äººé™…å…³ç³»å’Œæ•ˆæœæ”¾åœ¨ç¬¬ä¸€ä½ï¼Œå°†æ—¶é—´æ”¾åœ¨ç¬¬äºŒä½ã€‚</p>\n<h1 id=\"é«˜æ•ˆèƒ½çš„ç§˜è¯€â€”â€”æˆæƒ\"><a href=\"#é«˜æ•ˆèƒ½çš„ç§˜è¯€â€”â€”æˆæƒ\" class=\"headerlink\" title=\"é«˜æ•ˆèƒ½çš„ç§˜è¯€â€”â€”æˆæƒ\"></a>é«˜æ•ˆèƒ½çš„ç§˜è¯€â€”â€”æˆæƒ</h1><p>æŠŠè´£ä»»åˆ†é…ç»™å…¶ä»–æˆç†Ÿè€ç»ƒçš„å‘˜å·¥ï¼Œæ‰æœ‰ä½™åŠ›ä»äº‹æ›´é«˜å±‚æ¬¡çš„æ´»åŠ¨ã€‚æˆæƒæ˜¯äº‹å¿…èº¬äº²ä¸ç®¡ç†ä¹‹é—´çš„æœ€å¤§åˆ†é‡ï¼Œäº‹å¿…èº¬äº²è€…å‡¡äº‹ä¸å‡å¤–æ±‚ã€‚åä¹‹ï¼Œç®¡ç†è€…æ³¨é‡å»ºç«‹åˆ¶åº¦ï¼Œç„¶åæ±‡é›†ç¾¤åŠ›å…±åŒå®Œæˆå·¥ä½œã€‚</p>\n<p>æˆæƒå¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š<strong>æŒ‡ä»¤å‹æˆæƒ</strong>å’Œ<strong>è´£ä»»å‹æˆæƒ</strong>ã€‚</p>\n<h2 id=\"æŒ‡ä»¤å‹æˆæƒ\"><a href=\"#æŒ‡ä»¤å‹æˆæƒ\" class=\"headerlink\" title=\"æŒ‡ä»¤å‹æˆæƒ\"></a>æŒ‡ä»¤å‹æˆæƒ</h2><p>æŒ‡ä»¤å‹æˆæƒå…³æ³¨é‡ç‚¹æ˜¯<strong>æ–¹æ³•</strong>ï¼Œç®¡ç†è€…è‡ªå·±ä¸ºæœ€åçš„ç»“æœè´Ÿè´£ã€‚</p>\n<h2 id=\"è´£ä»»å‹æˆæƒ\"><a href=\"#è´£ä»»å‹æˆæƒ\" class=\"headerlink\" title=\"è´£ä»»å‹æˆæƒ\"></a>è´£ä»»å‹æˆæƒ</h2><p>è´£ä»»å‹æˆæƒçš„å…³æ³¨é‡ç‚¹æ˜¯<strong>æœ€ç»ˆç»“æœ</strong>ï¼Œå®ƒç»™äººä»¬è‡ªç”±ï¼Œå…è®¸è‡ªè¡Œé€‰æ‹©åšäº‹çš„å…·ä½“æ–¹æ³•ï¼Œå¹¶ä¸ºæœ€ç»ˆçš„ç»“æœè´Ÿè´£ã€‚èµ·åˆï¼Œè¿™ç§æˆæƒæ–¹å¼è´¹æ—¶è´¹åŠ›ï¼Œä½†å´ååˆ†å€¼å¾—ã€‚é€šè¿‡è´£ä»»å‹æˆæƒï¼Œå¯ä»¥å°†æ æ†çš„æ”¯ç‚¹å‘å³ç§»åŠ¨ï¼Œæé«˜æ æ†çš„ä½œç”¨ã€‚</p>\n<p>è´£ä»»å‹æˆæƒè¦æ±‚åŒæ–¹å°±ä»¥ä¸‹<strong>äº”ä¸ªæ–¹é¢</strong>è¾¾æˆæ¸…æ™°ã€å¦è¯šçš„å…±è¯†ï¼Œå¹¶ä½œå‡ºæ‰¿è¯ºã€‚</p>\n<ol>\n<li>é¢„æœŸç»“æœã€‚åŒæ–¹éƒ½è¦æ˜ç¡®å¹¶ä¸”å®Œå…¨ç†è§£æœ€ç»ˆæƒ³è¦çš„ç»“æœã€‚è¦ä»¥â€œç»“æœâ€è€Œä¸æ˜¯ä»¥â€œæ–¹æ³•â€ä¸ºä¸­å¿ƒã€‚è¦æœ‰å…·ä½“çš„æ—¥ç¨‹ï¼Œæ˜ç¡®æˆªæ­¢æœŸé™ã€‚</li>\n<li>æŒ‡å¯¼æ–¹é’ˆã€‚ç¡®è®¤é€‚ç”¨çš„è¯„ä¼°æ ‡å‡†ï¼Œé¿å…æˆä¸ºæŒ‡ä»¤å‹æˆæƒã€‚ä½†æ˜¯ä¸€å®šè¦æœ‰æ˜ç¡®çš„é™åˆ¶æ€§è§„å®šã€‚</li>\n<li>å¯ç”¨èµ„æºã€‚å‘Šè¯‰ä»–ä»¬å¯ä»¥ä½¿ç”¨å“ªäº›äººåŠ›ã€è´¢åŠ¡ã€æŠ€æœ¯æˆ–è€…ç»„ç»‡èµ„æºæ¥å–å¾—ç¼©é¢„æœŸçš„æˆæœã€‚</li>\n<li>è´£ä»»å½’å±ã€‚åˆ¶å®šä¸šç»©æ ‡å‡†ï¼Œå¹¶ç”¨è¿™äº›æ ‡å‡†æ¥è¯„ä¼°ä»–ä»¬çš„æˆæœã€‚åˆ¶å®šå…·ä½“çš„æ—¶é—´è¡¨ï¼Œè¯´æ˜ä½•æ—¶æäº¤ä¸šç»©æŠ¥å‘Šï¼Œä½•æ—¶è¿›è¡Œè¯„ä¼°ã€‚</li>\n<li>æ˜ç¡®å¥–æƒ©ã€‚æ˜ç¡®åœ°å‘Šè¯‰ä»–ä»¬è¯„ä¼°å¯èƒ½å¯¼è‡´çš„ç»“æœï¼Œå¥½çš„å’Œä¸å¥½çš„åæœéƒ½è¦å‘Šè¯‰ä»–ä»¬ã€‚</li>\n</ol>\n<p>ä¿¡ä»»æ˜¯ä¿ƒä½¿äººè¿›æ­¥çš„æœ€å¤§åŠ¨åŠ›ï¼Œå› ä¸ºä¿¡ä»»èƒ½å¤Ÿè®©äººè¡¨ç°å‡ºè‡ªå·±æœ€å¥½çš„ä¸€é¢ã€‚</p>\n<p>æˆæƒçš„å¤§åŸåˆ™ä¸å˜ï¼Œæƒé™å´å› äººè€Œå¼‚ã€‚å¯¹ä¸å¤Ÿæˆç†Ÿçš„äººï¼Œç›®æ ‡ä¸å¿…è®¢å¾—å¤ªé«˜ï¼ŒæŒ‡ç¤ºè¦è¯¦å°½ï¼Œå¹¶ä¸”å……åˆ†æä¾›èµ„æºï¼›ç›‘ç£è€ƒæ ¸åˆ™è¾ƒé¢‘ç¹ï¼Œå¥–æƒ©ä¹Ÿæ›´ç›´æ¥ã€‚å¯¹æˆç†Ÿçš„äººï¼Œå¯åˆ†é…æŒ‘æˆ˜æ€§é«˜çš„ä»»åŠ¡ï¼Œç²¾ç®€æŒ‡ç¤ºï¼Œå‡å°‘ç›‘ç£è€ƒæ ¸çš„æ¬¡æ•°ï¼Œè€ƒè¯„æ ‡å‡†åˆ™è¾ƒä¸ºæŠ½è±¡ã€‚</p>\n<h1 id=\"ä»˜è¯¸è¡ŒåŠ¨\"><a href=\"#ä»˜è¯¸è¡ŒåŠ¨\" class=\"headerlink\" title=\"ä»˜è¯¸è¡ŒåŠ¨\"></a>ä»˜è¯¸è¡ŒåŠ¨</h1><ol>\n<li>æ‰¾å‡ºä¸€é¡¹å¹³æ—¶è¢«ä½ å¿½ç•¥çš„ç¬¬äºŒç±»äº‹åŠ¡ã€‚</li>\n<li>ç”»å‡ºä¸€ä¸ªæ—¶é—´ç®¡ç†çŸ©é˜µï¼ŒæŒ‰ç…§ç™¾åˆ†æ¯”å°†ä½ çš„æ—¶é—´åˆ†é…ç»™æ¯ä¸€ç±»äº‹åŠ¡ã€‚ç„¶åä»¥åäº”åˆ†é’Ÿä¸ºè®¡æ—¶å•ä½è¿ç»­è®°å½•è‡ªå·±ä¸‰å¤©çš„æ´»åŠ¨çŠ¶å†µã€‚å¯¹ç…§ä¸€ä¸‹è‡ªå·±çš„è®¡åˆ’ï¼Œçœ‹æ˜¯å¦æœ‰å¾ˆå¤§çš„å‡ºå…¥ã€‚</li>\n<li>å°†ä½ è®¤ä¸ºå¯ä»¥æˆæƒç»™ä»–äººä½œçš„äº‹æƒ…åˆ—åœ¨ä¸€å¼ çº¸ä¸Šï¼Œç„¶ååˆ—å‡ºä½ è®¤ä¸ºå¯ä»¥åšè¿™äº›å·¥ä½œçš„äººé€‰æˆ–è€…é€šè¿‡åŸ¹è®­å¯ä»¥èƒœä»»çš„å·¥ä½œäººé€‰ã€‚æ€è€ƒä¸€ä¸‹åº”è¯¥å¦‚ä½•å¼€å§‹æˆæƒç¨‹åºæˆ–è€…å¼€å±•åŸ¹è®­å·¥ä½œã€‚</li>\n<li>è®¡åˆ’ä½ çš„ä¸‹å‘¨æ´»åŠ¨ï¼Œä½ çš„è®¡åˆ’åº”å½“èƒ½å¤Ÿä½“ç°ä½ çš„äººç”Ÿç›®æ ‡å’Œä¸»å¯¼ä»·å€¼è§‚ã€‚å¹¶åœ¨æ˜ŸæœŸç»“æŸçš„æ—¶å€™è¿›è¡Œæ€»ç»“ã€‚</li>\n<li>æ‰¿è¯ºä»¥åæ¯å‘¨éƒ½åˆ¶å®šä¸€ä¸ªå‘¨è®¡åˆ’ï¼Œå¹¶è§„å®šä¸€ä¸ªå…·ä½“çš„æ—¶é—´ä¸“é—¨åšè¿™ä»¶äº‹æƒ…ã€‚</li>\n<li>å°†ç›®å‰ä½¿ç”¨çš„æ—¶é—´ç®¡ç†å·¥å…·å‡çº§ä¸ºç¬¬å››ä»£æ—¶é—´ç®¡ç†å·¥å…·ã€‚</li>\n<li>é˜…è¯»é™„å½•äºŒâ€”â€”é«˜æ•ˆèƒ½äººå£«çš„ä¸€å¤©ã€‚</li>\n</ol>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬å››éƒ¨åˆ† å†è®ºç”±å†…è€Œå¤–é€ å°±è‡ªå·±","url":"https://lilei.pro/2019/04/07/Seven-Habbits-11/","content":"<h1 id=\"åˆ©ç”¨åˆºæ¿€ä¸å›åº”ä¹‹é—´çš„è·ç¦»\"><a href=\"#åˆ©ç”¨åˆºæ¿€ä¸å›åº”ä¹‹é—´çš„è·ç¦»\" class=\"headerlink\" title=\"åˆ©ç”¨åˆºæ¿€ä¸å›åº”ä¹‹é—´çš„è·ç¦»\"></a>åˆ©ç”¨åˆºæ¿€ä¸å›åº”ä¹‹é—´çš„è·ç¦»</h1><p>ä¸Šå¸è¡Œäº‹ç”±å†…è€Œå¤–ï¼Œå°˜ä¸–è¡Œäº‹ç”±å¤–è€Œå†…ï¼›å°˜ä¸–è®©ä¸–äººæ‘†è„±è´«ç©·ï¼Œè€¶ç¨£åˆ™å…ˆè®©ä¸–äººæ‘†è„±å†…å¿ƒçš„è´«ç©·ï¼Œç„¶åç”±ä»–ä»¬è‡ªå·±æ‘†è„±è´«ç©·ï¼›å°˜ä¸–é€šè¿‡æ”¹å˜ç¯å¢ƒæ¥é€ å°±äººï¼Œè€¶ç¨£åˆ™é€šè¿‡æ”¹å˜äººæ¥é€ å°±ç¯å¢ƒï¼šå°˜ä¸–å¡‘é€ äººçš„è¡Œä¸ºï¼Œè€Œè€¶ç¨£æ”¹å˜äººçš„æœ¬è´¨ã€‚</p>\n<p>åˆºæ¿€ä¸å›åº”ä¹‹é—´å­˜åœ¨ä¸€æ®µè·ç¦»ï¼Œæˆé•¿å’Œå¹¸ç¦çš„å…³é”®å°±åœ¨äºæˆ‘ä»¬å¦‚ä½•åˆ©ç”¨è¿™æ®µè·ç¦»ã€‚</p>\n<p>æˆ‘ä»¬ç”¨æ–°é¢–è€Œæœ‰è¶£çš„æ–¹å¼åˆ©ç”¨åˆºæ¿€ä¸å›åº”ä¹‹é—´çš„é‚£æ®µè·ç¦»ï¼Œæ€è€ƒè‡ªå·±å¦‚ä½•å˜æˆäº†ä»Šå¤©çš„è‡ªå·±ä»¥åŠè¿™äº›è¿‡ç¨‹å¦‚ä½•å†³å®šäº†æˆ‘ä»¬çš„ä¸–ç•Œè§‚ã€‚</p>\n<p>ä»ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±æåŠ›äº’ç›¸æ”¯æŒã€é¼“åŠ±å’Œä½“è°…ï¼Œè¿™è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´è¿›ä¸€æ­¥åœ°æ¢ç´¢å½¼æ­¤çš„å†…å¿ƒä¸–ç•Œï¼Œè€Œæˆ‘ä»¬ä¹‹é—´çš„å…³ç³»ä¹Ÿå¾—åˆ°æ»‹å…»ã€‚</p>\n<p>æˆ‘ä»¬é€æ¸æœ‰äº†ä¸¤é¡¹å¿ƒç…§ä¸å®£çš„åŸºæœ¬è§„åˆ™ã€‚ä¸€æ˜¯â€œä¸è¦åˆ¨æ ¹é—®åº•â€ï¼šæ— è®ºå“ªä¸ªäººéœ²å‡ºäº†å†…å¿ƒæœ€è„†å¼±çš„ä¸€é¢ï¼Œå¦ä¸€äººéƒ½ä¸å¾—è¿½æ ¹ç©¶åº•ï¼Œè€Œæ˜¯è¦å°½åŠ›ä½“è°…å¯¹æ–¹ï¼Œå¦åˆ™å°±æ˜¾å¾—å¤ªè¿‡å’„å’„é€¼äººã€éœ¸é“å’Œåˆ»æ¿ã€‚äºŒæ˜¯åœ¨è¯é¢˜è¿‡äºå°–é”æˆ–ç—›è‹¦çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦åŠæ—¶æ‰“ä½ï¼Œæ™šäº›æ—¶å€™æˆ–è€…ç­‰åˆ°ç¬¬äºŒå¤©å†è¯´ï¼Œç›´åˆ°å½“äº‹äººæ„¿æ„å†æ¬¡å¼€å£ã€‚</p>\n<p>æˆ‘ä»¬å‘ç°ï¼Œçœ‹ä¼¼çç¢çš„å°äº‹ï¼Œå¾€å¾€ä¹Ÿæºè‡ªé“­å¿ƒåˆ»éª¨çš„æƒ…æ„Ÿç»å†ï¼Œå¦‚æœåªçœ‹è¡¨é¢ï¼Œè€Œæ²¡æœ‰æŒ–æ˜æ·±å±‚çš„æ•æ„Ÿé—®é¢˜ï¼Œæ— å¼‚äºåœ¨è·µè¸å¯¹æ–¹å¿ƒä¸­çš„åœ£åœŸã€‚</p>\n<p>çˆ±æƒ…ä¿é²œçš„ç§˜è¯€å°±æ˜¯äº¤è°ˆï¼Œç‰¹åˆ«æ˜¯è®¨è®ºå½¼æ­¤çš„æ„Ÿå—ã€‚</p>\n<h1 id=\"ä»£é™…ä¼ æ‰¿\"><a href=\"#ä»£é™…ä¼ æ‰¿\" class=\"headerlink\" title=\"ä»£é™…ä¼ æ‰¿\"></a>ä»£é™…ä¼ æ‰¿</h1><p>æˆ‘ä»¬çš„è¡Œä¸ºæ¨¡å¼ä¼šå¯¹å­å¥³çš„ç”Ÿæ´»äº§ç”Ÿéš¾ä»¥ç½®ä¿¡çš„å½±å“ï¼Œå°±å¥½åƒæˆ‘ä»¬çš„çˆ¶æ¯å½±å“äº†æˆ‘ä»¬ä¸€æ ·ã€‚ä»–ä»¬ä¸ä»…è®©æˆ‘ä»¬äº†è§£äº†è‡ªå·±æ˜¯ä»€ä¹ˆæ ·å­çš„äººï¼Œè€Œä¸”è®©æˆ‘ä»¬çŸ¥é“è‡ªå·±é€šè¿‡åŠªåŠ›å¯ä»¥æˆä¸ºä»€ä¹ˆæ ·çš„äººã€‚</p>\n<p>ä¸€ä¸ªå…³ç³»ç´§å¯†ã€å‡ ä»£åŒå ‚çš„å¤§å®¶åº­å¾€å¾€æœ‰ä¸€ç§è¶…å¸¸çš„åŠ›é‡ï¼Œèƒ½å¸®äººä»¬ç¡®è®¤è‡ªæˆ‘ã€‚è®©å­©å­ä»¬åœ¨è¿™æ ·çš„â€œéƒ¨è½â€ä¸­æ‰¾åˆ°è‡ªå·±çš„ä½ç½®ï¼Œæ—¶æ—¶æ„Ÿåˆ°è¢«å…³æ€€ã€‚å‡ ä»£åŒå ‚çš„å’Œç¦å®¶åº­å¯èƒ½è•´å«ç€æœ€å¯Œæœ‰æˆæ•ˆï¼Œå›æŠ¥æœ€é«˜ï¼Œæœ€ä»¤äººæ»¡æ„çš„ç›¸äº’ä¾èµ–å…³ç³»ï¼Œè®¸å¤šäººéƒ½èƒ½æ„Ÿè§‰åˆ°è¿™ç§å…³ç³»çš„é‡è¦æ€§ã€‚</p>\n<h1 id=\"æˆä¸ºè½¬å‹è€…\"><a href=\"#æˆä¸ºè½¬å‹è€…\" class=\"headerlink\" title=\"æˆä¸ºè½¬å‹è€…\"></a>æˆä¸ºè½¬å‹è€…</h1><p>åœ¨ä½ çš„å®¶æ—ä¸­å·²ç»å»¶ç»­æ•°ä»£çš„è¶‹åŠ¿å¯ä»¥åœ¨ä½ è¿™é‡Œç”»ä¸€ä¸ªå¥å·ã€‚ä½ æ˜¯ä¸€ä¸ªè½¬å‹è€…ï¼Œè¿æ¥ç€è¿‡å»å’Œæœªæ¥ï¼Œä½ è‡ªèº«çš„å˜åŒ–å¯ä»¥å½±å“åˆ°åä¸–çš„è®¸å¤šäººã€‚</p>\n<p>çœŸæ­£çš„å˜é©æ˜¯ç”±å†…å‘å¤–å®ç°çš„ï¼Œåªæ˜¯åˆ©ç”¨æ€§æ ¼é­…åŠ›çš„æŠ€å·§ï¼Œåœ¨æ€åº¦å’Œè¡Œä¸ºæ–¹é¢åšäº›è¡¨é¢åŠŸå¤«æ ¹æœ¬ä¸è¡Œï¼Œä¸€å®šè¦ä»æ ¹æœ¬ä¸Šæ”¹å˜é‚£äº›å†³å®šäº†æˆ‘ä»¬çš„äººæ ¼å’Œä¸–ç•Œè§‚çš„æ€æƒ³æ„é€ å’Œè¡Œä¸ºæ¨¡å¼æ‰è¡Œã€‚</p>\n<p>å†æ¬¡å¼•ç”¨è‰¾é»˜ç”Ÿï¼ˆEmersonï¼‰çš„åè¨€ï¼šâ€œåœ¨æˆ‘ä»¬çš„ä¸æ‡ˆåŠªåŠ›ä¸‹ï¼Œäº‹æƒ…å˜å¾—å¯ä»¥è¿åˆƒè€Œè§£ï¼Œè¿™å¹¶ä¸æ˜¯å› ä¸ºä»»åŠ¡çš„æ€§è´¨å‘ç”Ÿäº†å˜åŒ–ï¼Œè€Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„èƒ½åŠ›å¢å¼ºäº†ã€‚â€</p>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸‰éƒ¨åˆ† å…¬ä¼—é¢†åŸŸçš„æˆåŠŸ","url":"https://lilei.pro/2019/04/07/Seven-Habbits-5/","content":"<ul>\n<li>ä¹ æƒ¯ä¸€ï¼šç§¯æä¸»åŠ¨</li>\n<li>ä¹ æƒ¯äºŒï¼šä»¥ç»ˆä¸ºå§‹</li>\n<li>ä¹ æƒ¯ä¸‰ï¼šè¦äº‹ç¬¬ä¸€</li>\n</ul>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬å››éƒ¨åˆ† è‡ªæˆ‘æå‡å’Œå®Œå–„","url":"https://lilei.pro/2019/04/07/Seven-Habbits-9/","content":"<ul>\n<li>ä¹ æƒ¯ä¸ƒï¼šä¸æ–­æ›´æ–°</li>\n</ul>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬äºŒéƒ¨åˆ† ä¹ æƒ¯äºŒ ä»¥ç»ˆä¸ºå§‹","url":"https://lilei.pro/2019/04/07/Seven-Habbits-3/","content":"<h1 id=\"ç¬¬å››ç« -ä¹ æƒ¯äºŒ-ä»¥ç»ˆä¸ºå§‹â€”â€”è‡ªæˆ‘é¢†å¯¼çš„åŸåˆ™\"><a href=\"#ç¬¬å››ç« -ä¹ æƒ¯äºŒ-ä»¥ç»ˆä¸ºå§‹â€”â€”è‡ªæˆ‘é¢†å¯¼çš„åŸåˆ™\" class=\"headerlink\" title=\"ç¬¬å››ç«  ä¹ æƒ¯äºŒ ä»¥ç»ˆä¸ºå§‹â€”â€”è‡ªæˆ‘é¢†å¯¼çš„åŸåˆ™\"></a>ç¬¬å››ç«  ä¹ æƒ¯äºŒ ä»¥ç»ˆä¸ºå§‹â€”â€”è‡ªæˆ‘é¢†å¯¼çš„åŸåˆ™</h1><h2 id=\"è®¾æƒ³ä¸€æ®µæ‚¼è¯\"><a href=\"#è®¾æƒ³ä¸€æ®µæ‚¼è¯\" class=\"headerlink\" title=\"è®¾æƒ³ä¸€æ®µæ‚¼è¯\"></a>è®¾æƒ³ä¸€æ®µæ‚¼è¯</h2><p>è¯·æ‰¾ä¸ªåƒ»é™çš„è§’è½ï¼ŒæŠ›å¼€ä¸€åˆ‡æ‚å¿µï¼Œæ•å¼€å¿ƒæ‰‰ï¼Œè·Ÿç€æˆ‘èµ°è¿‡è¿™æ®µå¿ƒçµä¹‹æ—…ã€‚</p>\n<p>å‡è®¾ä½ æ­£åœ¨å‰å¾€æ®¡ä»ªé¦†çš„è·¯ä¸Šï¼Œè¦å»å‚åŠ ä¸€ä½è‡³äº²çš„è‘¬ç¤¼ã€‚æŠµè¾¾ä¹‹åï¼Œå±…ç„¶å‘ç°äº²æœ‹å¥½å‹é½èšä¸€å ‚ï¼Œæ˜¯ä¸ºäº†å‘ä½ å‘Šåˆ«ã€‚å§‘ä¸”å‡å®šè¿™æ—¶äº²æ—ä»£è¡¨ã€å‹äººã€åŒäº‹æˆ–ç¤¾å›¢ä¼™ä¼´ï¼Œå³å°†ä¸Šå°è¿½è¿°ä½ çš„ç”Ÿå¹³ã€‚è¯·ä½ è®¤çœŸæƒ³ä¸€æƒ³</p>\n<ul>\n<li>ä½ å¸Œæœ›äººä»¬å¯¹ä½ ä»¥åŠä½ çš„ç”Ÿæ´»æœ‰ä»€ä¹ˆæ ·çš„è¯„ä»·ï¼Ÿ</li>\n<li>ä½ å¸Œæœ›ä»–ä»¬æ€æ ·è¯„ä»·ä½ çš„äººæ ¼ï¼Ÿ</li>\n<li>ä½ å¸Œæœ›ä»–ä»¬å›å¿†èµ·ä½ çš„å“ªäº›æˆå°±å’Œè´¡çŒ®ï¼Ÿ</li>\n<li>ä½ å¸Œæœ›å¯¹å‘¨å›´äººçš„ç”Ÿæ´»æ–½åŠ è¿‡ä»€ä¹ˆæ ·çš„å½±å“ï¼Ÿ</li>\n</ul>\n<h2 id=\"ä»¥ç»ˆä¸ºå§‹çš„å®šä¹‰\"><a href=\"#ä»¥ç»ˆä¸ºå§‹çš„å®šä¹‰\" class=\"headerlink\" title=\"ä»¥ç»ˆä¸ºå§‹çš„å®šä¹‰\"></a>ä»¥ç»ˆä¸ºå§‹çš„å®šä¹‰</h2><p>ä»¥ä½ çš„äººç”Ÿç›®æ ‡ä½œä¸ºè¡¡é‡ä¸€åˆ‡çš„æ ‡å‡†ï¼Œä½ çš„ä¸€è¨€ä¸€è¡Œã€ä¸€ä¸¾ä¸€åŠ¨ï¼Œæ— è®ºå‘ç”Ÿåœ¨ä½•æ—¶ï¼Œéƒ½å¿…é¡»éµå¾ªè¿™ä¸€åŸåˆ™ï¼Œå³ç”±ä¸ªäººæœ€å¿ å®çš„æœŸè®¸æˆ–ä»·å€¼è§‚æ¥å†³å®šä¸€åˆ‡ã€‚</p>\n<p>ä½ å¸Œæœ›åœ¨ç›–æ£ºå®šè®ºæ—¶è·å¾—çš„è¯„ä»·ï¼Œæ‰æ˜¯ä½ å¿ƒç›®ä¸­çœŸæ­£æ¸´æœ›çš„æˆåŠŸã€‚</p>\n<h2 id=\"ä»»ä½•äº‹ç‰©éƒ½éœ€è¦ä¸¤æ¬¡åˆ›é€ \"><a href=\"#ä»»ä½•äº‹ç‰©éƒ½éœ€è¦ä¸¤æ¬¡åˆ›é€ \" class=\"headerlink\" title=\"ä»»ä½•äº‹ç‰©éƒ½éœ€è¦ä¸¤æ¬¡åˆ›é€ \"></a>ä»»ä½•äº‹ç‰©éƒ½éœ€è¦ä¸¤æ¬¡åˆ›é€ </h2><h3 id=\"ç¬¬ä¸€æ¬¡åˆ›é€ \"><a href=\"#ç¬¬ä¸€æ¬¡åˆ›é€ \" class=\"headerlink\" title=\"ç¬¬ä¸€æ¬¡åˆ›é€ \"></a>ç¬¬ä¸€æ¬¡åˆ›é€ </h3><p>åœ¨å¤´è„‘ä¸­æ„æ€ï¼Œå³æ™ºåŠ›ä¸Šçš„ç¬¬ä¸€æ¬¡åˆ›é€ ï¼ˆMental/First Creationï¼‰</p>\n<h3 id=\"ç¬¬äºŒæ¬¡åˆ›é€ \"><a href=\"#ç¬¬äºŒæ¬¡åˆ›é€ \" class=\"headerlink\" title=\"ç¬¬äºŒæ¬¡åˆ›é€ \"></a>ç¬¬äºŒæ¬¡åˆ›é€ </h3><p>ä»˜è¯¸å®è·µï¼Œä½“åŠ›ä¸Šçš„ç¬¬äºŒæ¬¡åˆ›é€ ï¼ˆPhysical/Second Creationï¼‰</p>\n<h2 id=\"ä¸»åŠ¨è®¾è®¡è¿˜æ˜¯è¢«åŠ¨æ¥å—\"><a href=\"#ä¸»åŠ¨è®¾è®¡è¿˜æ˜¯è¢«åŠ¨æ¥å—\" class=\"headerlink\" title=\"ä¸»åŠ¨è®¾è®¡è¿˜æ˜¯è¢«åŠ¨æ¥å—\"></a>ä¸»åŠ¨è®¾è®¡è¿˜æ˜¯è¢«åŠ¨æ¥å—</h2><p>â€œä»»ä½•äº‹ç‰©éƒ½æ˜¯ä¸¤æ¬¡åˆ›é€ è€Œæˆâ€æ˜¯ä¸ªå®¢è§‚åŸåˆ™ï¼Œä½†â€œç¬¬ä¸€æ¬¡çš„åˆ›é€ â€æœªå¿…éƒ½æ˜¯æœ‰æ„çš„è®¾è®¡ã€‚æœ‰äº›äººè‡ªæˆ‘æ„è¯†è–„å¼±ï¼Œä¸æ„¿ä¸»åŠ¨è®¾è®¡è‡ªå·±çš„ç”Ÿæ´»ï¼Œç»“æœå°±è®©å½±å“åœˆå¤–çš„äººæˆ–äº‹æ§åˆ¶äº†è‡ªå·±ã€‚è¿™ç§äººçš„äººç”Ÿæ–¹å‘å¤§å¤šæºè‡ªä¸ªäººå–œå¥½ï¼Œä¸ç¬¦åˆå®¢è§‚åŸåˆ™ï¼Œä¹‹æ‰€ä»¥ä¼šè¢«æ¥æ”¶ï¼Œæ˜¯å› ä¸ºæŸäº›äººå†…å¿ƒè„†å¼±ï¼Œä¾èµ–å¿ƒç†è¿‡é‡ï¼Œæ¸´æœ›è¢«æ¥çº³å’Œè·å¾—å½’å±æ„Ÿï¼Œå‘å¾€ä»–äººçš„å…³æ€€å’Œçˆ±æŠ¤ï¼Œè€Œä¸”ä¸€å®šè¦åˆ«äººæ¥è‚¯å®šè‡ªå·±ä»·å€¼å’Œé‡è¦æ€§ã€‚</p>\n<h2 id=\"é¢†å¯¼ä¸ç®¡ç†ï¼šä¸¤æ¬¡åˆ›é€ \"><a href=\"#é¢†å¯¼ä¸ç®¡ç†ï¼šä¸¤æ¬¡åˆ›é€ \" class=\"headerlink\" title=\"é¢†å¯¼ä¸ç®¡ç†ï¼šä¸¤æ¬¡åˆ›é€ \"></a>é¢†å¯¼ä¸ç®¡ç†ï¼šä¸¤æ¬¡åˆ›é€ </h2><p>â€œä»¥ç»ˆä¸ºå§‹â€çš„å¦ä¸€ä¸ªåŸåˆ™åŸºç¡€æ˜¯è‡ªæˆ‘é¢†å¯¼ï¼Œä½†é¢†å¯¼ï¼ˆLeadershiï¼‰ä¸åŒäºç®¡ç†ï¼ˆManagementï¼‰ã€‚é¢†å¯¼æ˜¯ç¬¬ä¸€æ¬¡çš„åˆ›é€ ï¼Œå¿…éœ€å…ˆäºç®¡ç†ï¼›ç®¡ç†æ˜¯ç¬¬äºŒæ¬¡çš„åˆ›é€ ã€‚</p>\n<p>é¢†å¯¼ä¸ç®¡ç†å°±å¥½æ¯”æ€æƒ³ä¸è¡Œä¸ºã€‚ç®¡ç†å…³æ³¨åŸºå±‚ï¼Œæ€è€ƒçš„æ˜¯â€œæ€æ ·æ‰èƒ½æœ‰æ•ˆåœ°æŠŠäº‹æƒ…åšå¥½â€ï¼›é¢†å¯¼å…³æ³¨é«˜å±‚ï¼Œæ€è€ƒçš„æ˜¯â€œæˆ‘æƒ³æˆå°±çš„æ˜¯ä»€ä¹ˆäº‹ä¸šâ€ã€‚é¢†å¯¼æ˜¯â€œåšæ­£ç¡®çš„äº‹â€ï¼Œç®¡ç†æ˜¯â€œæ­£ç¡®åœ°åšäº‹â€ã€‚ç®¡ç†æ˜¯æœ‰æ•ˆåœ°é¡ºç€æˆåŠŸçš„æ¢¯å­å¾€ä¸Šçˆ¬ï¼Œé¢†å¯¼åˆ™åˆ¤æ–­è¿™ä¸ªæ¢¯å­æ˜¯å¦æ­åœ¨æ­£ç¡®çš„å¢™ä¸Šã€‚</p>\n<p>ä¸ªäººç”Ÿæ´»ä¸­çš„é¢†å¯¼æ„è¯†æ›´ä¸ºåŒ®ä¹ï¼Œå¾ˆå¤šäººè¿è‡ªå·±çš„ä»·å€¼è§‚éƒ½æ²¡æœ‰ææ¸…æ¥šï¼Œå°±å¿™äºæé«˜æ•ˆç‡ï¼Œåˆ¶å®šç›®æ ‡æˆ–å®Œæˆä»»åŠ¡ã€‚</p>\n<h2 id=\"æ”¹å†™äººç”Ÿå‰§æœ¬ï¼šæˆä¸ºè‡ªå·±çš„ç¬¬ä¸€æ¬¡åˆ›é€ è€…\"><a href=\"#æ”¹å†™äººç”Ÿå‰§æœ¬ï¼šæˆä¸ºè‡ªå·±çš„ç¬¬ä¸€æ¬¡åˆ›é€ è€…\" class=\"headerlink\" title=\"æ”¹å†™äººç”Ÿå‰§æœ¬ï¼šæˆä¸ºè‡ªå·±çš„ç¬¬ä¸€æ¬¡åˆ›é€ è€…\"></a>æ”¹å†™äººç”Ÿå‰§æœ¬ï¼šæˆä¸ºè‡ªå·±çš„ç¬¬ä¸€æ¬¡åˆ›é€ è€…</h2><ul>\n<li>è‡ªæˆ‘æ„è¯†</li>\n<li>æƒ³è±¡åŠ›ï¼šåœ¨å¿ƒé‡Œæ¼”ç»ƒå“ªäº›å°šæœªé‡Šæ”¾çš„æ½œèƒ½</li>\n<li>è‰¯çŸ¥ï¼šéµå¾ªè‡ªç„¶æ³•åˆ™æˆ–åŸåˆ™</li>\n</ul>\n<h2 id=\"ä¸ªäººä½¿å‘½å®£è¨€\"><a href=\"#ä¸ªäººä½¿å‘½å®£è¨€\" class=\"headerlink\" title=\"ä¸ªäººä½¿å‘½å®£è¨€\"></a>ä¸ªäººä½¿å‘½å®£è¨€</h2><p>ä»¥ç»ˆä¸ºå§‹çš„æœ€æœ‰æ•ˆæ–¹æ³•ï¼Œå°±æ˜¯æ’°å†™ä¸€ä»½ä¸ªäººä½¿å‘½å®£è¨€ï¼Œå³äººç”Ÿå“²å­¦æˆ–åŸºæœ¬ä¿¡å¿µã€‚</p>\n<ul>\n<li>æƒ³æˆä¸ºæ€æ ·çš„äººï¼ˆå“å¾·ï¼‰</li>\n<li>æƒ³æˆå°±ä»€ä¹ˆæ ·çš„äº‹ä¸šï¼ˆè´¡çŒ®å’Œæˆå°±ï¼‰</li>\n<li>ä¸ºæ­¤å¥ åŸºçš„ä»·å€¼è§‚å’ŒåŸåˆ™</li>\n</ul>\n<p>å¯¹äºä¸ªäººæ¥è¯´ï¼ŒåŸºäºæ­£ç¡®åŸåˆ™çš„ä¸ªäººä½¿å‘½å®£è¨€ä¹ŸåŒæ ·æ˜¯è¯„ä»·ä¸€åˆ‡çš„æ ‡å‡†ï¼Œæˆä¸ºæˆ‘ä»¬ä»¥ä¸å˜åº”ä¸‡å˜çš„åŠ›é‡æºæ³‰ã€‚</p>\n<h2 id=\"æ ¸å¿ƒåŒº\"><a href=\"#æ ¸å¿ƒåŒº\" class=\"headerlink\" title=\"æ ¸å¿ƒåŒº\"></a>æ ¸å¿ƒåŒº</h2><p>åˆ¶å®šä¸ªäººä½¿å‘½å®£è¨€å¿…é¡»ä»å½±å“åœˆçš„æ ¸å¿ƒå¼€å§‹ï¼ŒåŸºæœ¬çš„æ€ç»´å®šå¼å°±åœ¨è¿™é‡Œï¼Œå³æˆ‘ä»¬ç”¨æ¥è§‚å¯Ÿä¸–ç•Œçš„â€œé€é•œâ€ã€‚å½“æˆ‘ä»¬ä¸“æ³¨äºè¿™ä¸ªæ ¸å¿ƒå¹¶å–å¾—ä¸°ç¡•æˆæœæ—¶ï¼Œå½±å“åœˆå°±ä¼šè¢«æ‰©å¤§ï¼Œè¿™æ˜¯æœ€é«˜æ°´å¹³çš„äº§èƒ½ï¼Œä¼šæå‡æˆ‘ä»¬åœ¨å„ç”Ÿæ´»é¢†åŸŸçš„æ•ˆèƒ½ã€‚</p>\n<ul>\n<li>å®‰å…¨æ„Ÿï¼šä»£è¡¨ä»·å€¼è§‚ã€è®¤åŒã€æƒ…æ„Ÿçš„å½’å±ã€è‡ªå°Šè‡ªé‡ä¸æ˜¯å¦æ‹¥æœ‰ä¸ªäººçš„åŸºæœ¬èƒ½åŠ›ã€‚</li>\n<li>äººç”Ÿæ–¹å‘ï¼šæ—¶â€œåœ°å›¾â€çš„å’Œå†…å¿ƒçš„å‡†ç»³ï¼Œäººç±»ä¸€æ¬¡ä¸ºè§£é‡Šå¤–ç•Œäº‹ç‰©çš„ç†æ®ä»¥åŠå†³ç­–ä¸è¡Œä¸ºçš„åŸåˆ™å’Œå†…åœ¨æ ‡å‡†ã€‚</li>\n<li>æ™ºæ…§ï¼šæ˜¯äººç±»å¯¹ç”Ÿå‘½çš„è®¤çŸ¥ã€å¯¹å¹³è¡¡çš„æ„ŸçŸ¥å’Œå¯¹äº‹ç‰©é—´è”ç³»çš„ç†è§£ï¼ŒåŒ…æ‹¬åˆ¤æ–­åŠ›ã€æ´å¯ŸåŠ›å’Œç†è§£åŠ›ï¼Œæ˜¯è¿™äº›èƒ½åŠ›çš„ç»Ÿä¸€ä½“ã€‚</li>\n<li>åŠ›é‡ï¼šé‡‡å–è¡ŒåŠ¨ã€è¾¾æˆç›®æ ‡çš„èƒ½åŠ›ï¼Œæ˜¯åšå‡ºé€‰æ‹©çš„å…³é”®æ€§åŠ›é‡ï¼Œä¹ŸåŒ…æ‹¬åŸ¹è‚²å‡ºæ›´æœ‰æ•ˆçš„ä¹ æƒ¯ä»¥æ›¿ä»£æ—§ä¹ æƒ¯çš„èƒ½åŠ›ã€‚</li>\n</ul>\n<h2 id=\"ä»¥åŸåˆ™ä¸ºä¸­å¿ƒ\"><a href=\"#ä»¥åŸåˆ™ä¸ºä¸­å¿ƒ\" class=\"headerlink\" title=\"ä»¥åŸåˆ™ä¸ºä¸­å¿ƒ\"></a>ä»¥åŸåˆ™ä¸ºä¸­å¿ƒ</h2><p>ä»¥åŸåˆ™ä¸ºä¸­å¿ƒçš„äººä¼šä¿æŒå†·é™å’Œå®¢è§‚ï¼Œä¸å—æƒ…ç»ªæˆ–å…¶å®ƒå› ç´ çš„å¹²æ‰°ï¼Œçºµè§‚å…¨å±€â€”â€”å·¥ä½œéœ€è¦ã€å®¶åº­éœ€è¦ã€å…¶ä»–ç›¸å…³å› ç´ ä»¥åŠä¸åŒå†³å®šçš„å¯èƒ½åæœï¼Œæ·±æ€ç†Ÿè™‘åæ‰åšå‡ºæ­£ç¡®é€‰æ‹©ã€‚</p>\n<h2 id=\"å–„ç”¨æ•´ä¸ªå¤§è„‘\"><a href=\"#å–„ç”¨æ•´ä¸ªå¤§è„‘\" class=\"headerlink\" title=\"å–„ç”¨æ•´ä¸ªå¤§è„‘\"></a>å–„ç”¨æ•´ä¸ªå¤§è„‘</h2><p>å·¦è„‘è´Ÿè´£é€»è¾‘æ€è€ƒä¸è¯­è¨€èƒ½åŠ›ï¼Œå³è„‘æ‰§æŒåˆ›é€ åŠ›ä¸ç›´è§‰ã€‚å·¦è„‘å¤„ç†æ–‡å­—ï¼Œå³è„‘æ“…é•¿å›¾åƒï¼›å·¦è„‘é‡å±€éƒ¨ä¸åˆ†æï¼Œå³è„‘é‡æ•´ä½“ä¸æ•´åˆã€‚</p>\n<p><strong>æ‹“å®½æ€è·¯</strong>å’Œ<strong>å¿ƒçµæ¼”ç»ƒ</strong>æ˜¯å¼€å‘å³è„‘çš„ä¸¤ä¸ªé€”å¾„ã€‚</p>\n<h3 id=\"æ‹“å®½æ€è·¯\"><a href=\"#æ‹“å®½æ€è·¯\" class=\"headerlink\" title=\"æ‹“å®½æ€è·¯\"></a>æ‹“å®½æ€è·¯</h3><p>æœ‰æ—¶ï¼Œäººä¼šå› ä¸ºæ„å¤–æ‰“å‡»è€Œåœ¨ç¬é—´ä»å·¦è„‘æ€ç»´å˜æˆå³è„‘æ€ç»´ï¼Œæ¯”å¦‚äº²äººç¦»ä¸–ã€ç½¹æ‚£é‡ç—…ã€ç»æµå±æœºæˆ–é™·å…¥å›°å¢ƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæ‰ªå¿ƒè‡ªé—®ï¼šä»€ä¹ˆæ‰æ˜¯æœ€é‡è¦çš„ï¼Ÿæˆ‘ä»¬ç©¶ç«Ÿåœ¨è¿½æ±‚ä»€ä¹ˆï¼Ÿ</p>\n<p>ç§¯æä¸»åŠ¨è€…ä¸éœ€è¦è¿™ç§åˆºæ¿€ï¼Œå°±èƒ½æ‹“å®½æ€è·¯ã€è‡ªè§‰è½¬æ¢æ€ç»´å®šå¼ã€‚æ¯”å¦‚è®¾æƒ³è‡ªå·±çš„è‘¬ç¤¼ï¼Œæˆ–è€…é“¶å©šåŠé‡‘å©šçºªå¿µæ—¥çš„æƒ…æ™¯ï¼Œé‚€è¯·ä½ çš„é…å¶ä¸ä½ ä¸€èµ·æ¥ç•…æƒ³ï¼Œä¸¤äººå…±åŒçš„ç†æƒ³å©šå§»å…³ç³»åº”å½“æ€æ ·ï¼Œæ€æ ·é€šè¿‡æ—¥å¸¸æ´»åŠ¨æ¥ä»˜è¯¸å®æ–½ï¼Ÿ</p>\n<p>ä½ ä¹Ÿå¯ä»¥è®¾æƒ³è‡ªå·±é€€ä¼‘åçš„æƒ…å½¢ï¼Œé‚£æ—¶è‡ªå·±æœ‰æ€æ ·çš„è´¡çŒ®å’Œæˆå°±ï¼Œé€€ä¼‘ååˆæœ‰ä»€ä¹ˆè®¡åˆ’ï¼Œæ˜¯å¦æƒ³äºŒæ¬¡åˆ›ä¸šï¼Ÿ</p>\n<h3 id=\"å¿ƒçµæ¼”ç»ƒ\"><a href=\"#å¿ƒçµæ¼”ç»ƒ\" class=\"headerlink\" title=\"å¿ƒçµæ¼”ç»ƒ\"></a>å¿ƒçµæ¼”ç»ƒ</h3><p>å¿ƒçµæ¼”ç»ƒä¸ç¡®è®¤æ–½è¡Œè‡ªæˆ‘é¢†å¯¼ä¸æ˜¯åªè¦æ’°å†™ä¸€ä¸ªä½¿å‘½å®£è¨€å°±å®Œæˆäº†ï¼Œä»–æ˜¯ä¸€ä¸ªç¡®ç«‹æ„¿æ™¯å’Œä»·å€¼è§‚ï¼Œå¹¶è®©è‡ªå·±çš„ç”Ÿæ´»éµä»è¿™äº›é‡è¦åŸåˆ™çš„è¿‡ç¨‹ã€‚å³è„‘ä¼šåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å¸®åŠ©ä½ è¿›è¡Œå¿ƒçµæ¼”ç»ƒï¼ˆVisualizationï¼‰ï¼Œå¹¶å¯¹æ­£ç¡®è¡Œä¸ºåŠ ä»¥ç¡®è®¤ï¼ˆAffirmationï¼‰ã€‚è¿™ä¼šè®©ä½ çš„ç”Ÿæ´»æ›´ç¬¦åˆä½¿å‘½å®£è¨€ã€‚</p>\n<p>ç¡®è®¤åº”è¯¥åŒ…æ‹¬äº”ä¸ªåŸºæœ¬è¦ç´ ï¼šä¸ªäººã€ç§¯æã€æœæ–­ã€å¯è§†ã€æƒ…æ„Ÿã€‚ä¾‹å¦‚â€œå‘ç°å­å¥³è¡Œä¸ºä¸å½“æ—¶ï¼Œæˆ‘ï¼ˆä¸ªäººï¼‰èƒ½ä»¥æ™ºæ…§ã€çˆ±å¿ƒã€åšå®šçš„ç«‹åœºä¸è‡ªåˆ¶åŠ›ï¼ˆç§¯æï¼‰åŠæ—¶åº”å¯¹ï¼ˆæœæ–­ï¼‰ï¼Œç»“æœè®©æˆ‘æ·±æ„Ÿæ¬£æ…°ï¼ˆæƒ…æ„Ÿï¼‰ã€‚â€</p>\n<h2 id=\"ç¡®å®šè§’è‰²å’Œç›®æ ‡\"><a href=\"#ç¡®å®šè§’è‰²å’Œç›®æ ‡\" class=\"headerlink\" title=\"ç¡®å®šè§’è‰²å’Œç›®æ ‡\"></a>ç¡®å®šè§’è‰²å’Œç›®æ ‡</h2><p>åœ¨æ’°å†™ä½¿å‘½å®£è¨€æ—¶ï¼Œä¸å¦¨åˆ†å¼€ä¸åŒçš„è§’è‰²é¢†åŸŸï¼Œä¸€ä¸€è®¢ç«‹ç›®æ ‡ã€‚äº‹ä¸šã€ç”Ÿæ´»ã€æ”¿æ²»ã€ä¿¡ä»°ç­‰ã€‚</p>\n<h2 id=\"å®¶åº­çš„ä½¿å‘½å®£è¨€\"><a href=\"#å®¶åº­çš„ä½¿å‘½å®£è¨€\" class=\"headerlink\" title=\"å®¶åº­çš„ä½¿å‘½å®£è¨€\"></a>å®¶åº­çš„ä½¿å‘½å®£è¨€</h2><p>æ¯ä¸ªå®¶åº­éƒ½æœ‰å…±åŒçš„ä»·å€¼è§‚åŠç†å¿µï¼Œä½œä¸ºç”Ÿæ´»çš„é‡å¿ƒï¼Œæ’°å†™å®¶åº­ä½¿å‘½å®£è¨€æ­£å¯ä»¥å‡¸æ˜¾è¿™ä¸ªç”Ÿæ´»ä¸­å¿ƒï¼Œæ—¶å…¨å®¶äººå›¢ç»“åœ¨å…±åŒçš„ç›®æ ‡ä¸‹ã€‚</p>\n<h2 id=\"ç»„ç»‡çš„ä½¿å‘½å®£è¨€\"><a href=\"#ç»„ç»‡çš„ä½¿å‘½å®£è¨€\" class=\"headerlink\" title=\"ç»„ç»‡çš„ä½¿å‘½å®£è¨€\"></a>ç»„ç»‡çš„ä½¿å‘½å®£è¨€</h2><p>ä¸€ä¸ªçœŸæ­£åæ˜ æ¯éš”æˆå‘˜çš„å…±åŒæ„¿æ™¯å’Œä»·å€¼è§‚çš„ä½¿å‘½å®£è¨€ï¼Œèƒ½è°ƒåŠ¨ä»–ä»¬çš„åˆ›é€ åŠ›å’Œå¥‰çŒ®ç²¾ç¥ï¼Œä½¿ä»–ä»¬ä¸å†éœ€è¦æ—äººçš„æŒ‡å¯¼ã€ç›‘ç£å’Œæ‰¹è¯„ï¼Œå› ä¸ºä»–ä»¬å·²ç»æ¥å—äº†ä¸å˜çš„æ ¸å¿ƒåŸåˆ™ï¼Œæ¥å—äº†ä¼ä¸šä¸ºä¹‹å¥‹æ–—çš„å…±åŒç›®æ ‡ã€‚</p>\n<h2 id=\"ä»˜è¯¸è¡ŒåŠ¨\"><a href=\"#ä»˜è¯¸è¡ŒåŠ¨\" class=\"headerlink\" title=\"ä»˜è¯¸è¡ŒåŠ¨\"></a>ä»˜è¯¸è¡ŒåŠ¨</h2><ol>\n<li>æŠŠä½ å‚åŠ è‘¬ç¤¼å¿ƒçµæ¼”ç»ƒæ—¶çš„å¿ƒå¾—åˆ—è¡¨æ•´ç†ã€‚</li>\n<li>æ ¹æ®ç›®å‰ç†è§£ï¼Œå†™ä¸‹è‡ªå·±çš„äººç”Ÿè§’è‰²ã€‚æ£€è®¨ä½ å¯¹ç›®å‰æ‰®æ¼”çš„è§’è‰²å’Œè‡ªå·±çš„ç”Ÿæ´»æ˜¯å¦æ»¡æ„ã€‚</li>\n<li>æ¯å¤©æŠ½ç©ºæ’°å†™ä¸ªäººä½¿å‘½å®£è¨€ã€‚</li>\n<li>é˜…è¯»å„ç§ç”Ÿæ´»ä¸­å¿ƒï¼Œçœ‹ä½ çš„è¡Œä¸ºç¬¦åˆå…¶ä¸­å“ªç§ç±»å‹ï¼Ÿä»–ä»¬æ˜¯å¦è®©ä½ çš„æ—¥å¸¸è¡Œä¸ºæœ‰äº†ä¸€å®šä¾æ®ï¼Ÿä½ æ˜¯å¦æ»¡æ„ï¼Ÿ</li>\n<li>ä¸ºç¼–å†™ä½¿å‘½å®£è¨€è€Œæ‰‹æœºç¬”è®°ã€å¼•è¨€ã€æƒ³æ³•ä»¥åŠå¯èƒ½æœ‰ç”¨çš„å„ç§èµ„æ–™ã€‚</li>\n<li>è®¾æƒ³è¿‘æœŸå†…å¯èƒ½ä¼šä»äº‹çš„æŸä¸ªé¡¹ç›®ï¼Œç”¨å¿ƒçµæ¼”ç»ƒçš„åŸåˆ™ï¼Œå†™ä¸‹ä½ å¸Œæœ›è·å¾—çš„ç»“æœä¸åº”é‡‡å–çš„æ­¥éª¤ã€‚</li>\n<li>å‘å®¶äººå‘¢æˆ–åŒäº‹è®²è¿°æœ¬ç« çš„ç²¾åï¼Œå¹¶å»ºè®®å¤§å®¶å…±åŒæ‹Ÿå®šå®¶åº­æˆ–å›¢é˜Ÿçš„ä½¿å‘½å®£è¨€ã€‚</li>\n</ol>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬äºŒéƒ¨åˆ† ä¹ æƒ¯ä¸€ ç§¯æä¸»åŠ¨","url":"https://lilei.pro/2019/04/07/Seven-Habbits-2/","content":"<h1 id=\"ç¬¬ä¸‰ç« -ä¹ æƒ¯ä¸€-ç§¯æä¸»åŠ¨â€”â€”ä¸ªäººæ„¿æ™¯çš„åŸåˆ™\"><a href=\"#ç¬¬ä¸‰ç« -ä¹ æƒ¯ä¸€-ç§¯æä¸»åŠ¨â€”â€”ä¸ªäººæ„¿æ™¯çš„åŸåˆ™\" class=\"headerlink\" title=\"ç¬¬ä¸‰ç«  ä¹ æƒ¯ä¸€ ç§¯æä¸»åŠ¨â€”â€”ä¸ªäººæ„¿æ™¯çš„åŸåˆ™\"></a>ç¬¬ä¸‰ç«  ä¹ æƒ¯ä¸€ ç§¯æä¸»åŠ¨â€”â€”ä¸ªäººæ„¿æ™¯çš„åŸåˆ™</h1><h2 id=\"è‡ªæˆ‘æ€ç»´ï¼ˆSelf-paradigmï¼‰\"><a href=\"#è‡ªæˆ‘æ€ç»´ï¼ˆSelf-paradigmï¼‰\" class=\"headerlink\" title=\"è‡ªæˆ‘æ€ç»´ï¼ˆSelf-paradigmï¼‰\"></a>è‡ªæˆ‘æ€ç»´ï¼ˆSelf-paradigmï¼‰</h2><blockquote>\n<p>è¡Œæœ‰ä¸å¾—ï¼Œåæ±‚è¯¸å·±</p>\n</blockquote>\n<p>è¯•ç€è·³å‡ºè‡ªæˆ‘çš„æ¡†æ¡†ï¼ŒæŠŠæ„è¯†è½¬ç§»åˆ°å±‹å­çš„æŸä¸ªè§’è½ï¼Œç„¶åç”¨å¿ƒå®¢è§‚åœ°å®¡è§†è‡ªå·±ï¼Œç«™åœ¨æ—è§‚æ³½çš„è§’åº¦è§‚å¯Ÿè‡ªå·±ï¼Œæè¿°ç°åœ¨çš„å¿ƒæƒ…ä¸ç²¾ç¥çŠ¶æ€ï¼Œæ€è€ƒä½ å¤´è„‘çš„å·¥ä½œæ–¹å¼ï¼Œå®ƒæ˜¯å¦ååº”çµæ•ã€‚</p>\n<h2 id=\"ç¤¾ä¼šä¹‹é•œï¼ˆSocial-Mirroï¼‰\"><a href=\"#ç¤¾ä¼šä¹‹é•œï¼ˆSocial-Mirroï¼‰\" class=\"headerlink\" title=\"ç¤¾ä¼šä¹‹é•œï¼ˆSocial Mirroï¼‰\"></a>ç¤¾ä¼šä¹‹é•œï¼ˆSocial Mirroï¼‰</h2><p>ç¤¾ä¼šè§‚ç‚¹è®¤ä¸ºï¼Œç¯å¢ƒä¸æ¡ä»¶å¯¹æˆ‘ä»¬èµ·ç€å†³å®šæ€§çš„ä½œç”¨ã€‚æˆ‘ä»¬ä¸å¦è®¤æ¡ä»¶ä½œç”¨çš„å½±å“å·¨å¤§ï¼Œä½†å¹¶ä¸ç­‰äºæ‰¿è®¤å®ƒå‡Œé©¾äºä¸€åˆ‡ä¹‹ä¸Šï¼Œç”šè‡³å¯ä»¥å†³å®šæˆ‘ä»¬çš„å‘½è¿ã€‚æ ¹æ®è¿™ç§çœ‹æ³•ç»˜åˆ¶çš„ç¤¾ä¼šåœ°å›¾å¯ä»¥åˆ†ä¸ºä¸‰ç§ï¼Œä¹Ÿè¢«ç§°ä½œæ­ç¤ºäººæ€§çš„ä¸‰ç§â€œå†³å®šè®ºâ€ï¼š</p>\n<ol>\n<li>åŸºå› å†³å®šè®ºï¼ˆGenetic Determinismï¼‰ï¼šäººçš„æœ¬æ€§ç”±DNAå†³å®šï¼Œè‡ªå…ˆç¥–é—ä¼ ä¸‹æ¥ã€‚</li>\n<li>å¿ƒç†å†³å®šè®ºï¼ˆPsychic Determinismï¼‰ï¼šäººçš„æœ¬æ€§ç”±çˆ¶æ¯çš„è¨€è¡Œå†³å®šï¼Œå³åŸç”Ÿå®¶åº­è®ºã€‚</li>\n<li>ç¯å¢ƒå†³å®šè®ºï¼ˆEnvironmental Determinismï¼‰ï¼šç¯å¢ƒå†³å®šäººçš„æœ¬æ€§ï¼Œå¦‚å‘¨é­çš„äººä¸äº‹ï¼Œä¾‹å¦‚è€æ¿ã€é…å¶ã€å­å¥³ä¹ƒè‡³è‡ªç„¶ç¯å¢ƒå’Œç»æµç¯å¢ƒã€‚</li>\n</ol>\n<p>è¿™ä¸‰ç§ç¤¾ä¼šåœ°å›¾éƒ½å·²â€œåˆºæ¿€-å›åº”â€ç†è®ºä¸ºåŸºç¡€ï¼Œæ¥æºäºå·´ç”«æ´›å¤«æ‰€åšçš„å…³äºç‹—çš„å®éªŒï¼ŒåŸºæœ¬è§‚ç‚¹è®¤ä¸ºæˆ‘ä»¬ä¼šå—æ¡ä»¶å·¦å³ï¼Œä»¥æŸä¸€ç‰¹å®šæ–¹å¼å›åº”æŸä¸€ç‰¹å®šåˆºæ¿€ã€‚</p>\n<h2 id=\"é€‰æ‹©çš„è‡ªç”±\"><a href=\"#é€‰æ‹©çš„è‡ªç”±\" class=\"headerlink\" title=\"é€‰æ‹©çš„è‡ªç”±\"></a>é€‰æ‹©çš„è‡ªç”±</h2><p>äººç±»çš„è‡ªæˆ‘æ„è¯†æ˜¯ç‹¬ç«‹çš„ï¼Œèƒ½å¤Ÿè¶…è„±è‚‰ä½“çš„æŸç¼šï¼Œä»¥æ—è§‚è€…çš„èº«ä»½å®¡è§†è‡ªå·±çš„é­é‡ã€‚ä»–å¯ä»¥å†³å®šå¤–ç•Œåˆºæ¿€å¯¹è‡ªå·±çš„å½±å“ç¨‹åº¦ï¼Œæˆ–è€…è¯´ï¼Œåœ¨é­é‡ï¼ˆåˆºæ¿€ï¼‰ä¸å¯¹é­é‡çš„å›åº”ä¹‹é—´ï¼Œä»–æœ‰é€‰æ‹©å›åº”æ–¹å¼çš„è‡ªç”±å’Œèƒ½åŠ›ã€‚</p>\n<p>å³ï¼Œåœ¨åˆºæ¿€ä¸å›åº”ä¹‹é—´ï¼Œäººç±»æœ‰é€‰æ‹©çš„è‡ªç”±ã€‚è¿™ä¾¿æ˜¯â€œç§¯æä¸»åŠ¨â€çš„ä»·å€¼ã€‚</p>\n<p>è´£ä»»æ„Ÿï¼ˆResponsibilityï¼‰ä»æ„è¯æ³•æ¥è¯´æ˜¯èƒ½å¤Ÿå›åº”ï¼ˆResponse-ableï¼‰çš„æ„æ€ï¼Œå³é€‰æ‹©å›åº”çš„èƒ½åŠ›ï¼Œäººç±»åº”å½“æœ‰è¥é€ æœ‰åˆ©çš„å¤–åœ¨ç¯å¢ƒçš„ç§¯ææ€§å’Œè´£ä»»æ„Ÿã€‚ç§¯æä¸»åŠ¨æ˜¯äººçš„å¤©æ€§ï¼Œå³ä½¿ç”Ÿæ´»å—åˆ°äº†å¤–ç•Œæ¡ä»¶çš„åˆ¶çº¦ï¼Œé‚£ä¹Ÿæ˜¯å› ä¸ºæˆ‘ä»¬æœ‰æ„æˆ–æ— æ„åœ°é€‰æ‹©äº†è¢«å¤–ç•Œæ¡ä»¶æ§åˆ¶ï¼Œè¿™ç§é€‰æ‹©æˆä¸ºæ¶ˆæè¢«åŠ¨ï¼ˆReactiveï¼‰ã€‚</p>\n<h2 id=\"é™¤éä½ æ„¿æ„ï¼Œå¦åˆ™æ²¡äººèƒ½ä¼¤å®³ä½ \"><a href=\"#é™¤éä½ æ„¿æ„ï¼Œå¦åˆ™æ²¡äººèƒ½ä¼¤å®³ä½ \" class=\"headerlink\" title=\"é™¤éä½ æ„¿æ„ï¼Œå¦åˆ™æ²¡äººèƒ½ä¼¤å®³ä½ \"></a>é™¤éä½ æ„¿æ„ï¼Œå¦åˆ™æ²¡äººèƒ½ä¼¤å®³ä½ </h2><p>ä¼¤å®³æˆ‘ä»¬çš„å¹¶éæ‚²æƒ¨é­é‡æœ¬èº«ï¼Œè€Œæ˜¯æˆ‘ä»¬å¯¹äºæ‚²æƒ¨é­é‡çš„å›åº”ã€‚å°½ç®¡è¿™äº›äº‹çš„ç¡®ä¼šè®©äººèº«å¿ƒå—åˆ›æˆ–è€…ç»æµå—æŸï¼Œä½†æ˜¯å“å¾·å’Œæœ¬æ€§å®Œå…¨å¯ä»¥ä¸å—å½±å“ã€‚äº‹å®ä¸Šæœˆç—›è‹¦çš„ç»å†ï¼Œè¶Šèƒ½ç£¨ç»ƒæ„å¿—ï¼Œå¼€å‘æ½œèƒ½ï¼Œæå‡è‡ªå¦‚åº”å¯¹å›°å¢ƒçš„èƒ½åŠ›ï¼Œç”šè‡³è¿˜å¯èƒ½æ„Ÿå¬ä»–äººäº‰å–åŒæ ·çš„è‡ªç”±ã€‚</p>\n<h2 id=\"è†å¬è‡ªå·±çš„è¯­è¨€\"><a href=\"#è†å¬è‡ªå·±çš„è¯­è¨€\" class=\"headerlink\" title=\"è†å¬è‡ªå·±çš„è¯­è¨€\"></a>è†å¬è‡ªå·±çš„è¯­è¨€</h2><p>æ¶ˆæè¢«åŠ¨çš„äººï¼Œè¨€è¯­ä¸­å¾€å¾€ä¼šæš´éœ²å‡ºæ¨å¸è´£ä»»çš„æ„å›¾ï¼Œä¾‹å¦‚ï¼š</p>\n<ul>\n<li>â€œæˆ‘å°±æ˜¯è¿™æ ·åšäº‹çš„ã€‚â€å¤©ç”Ÿå¦‚æ­¤ï¼Œçˆ±çœ‹ä¸çœ‹ã€‚</li>\n<li>â€œä»–æŠŠæˆ‘æ°”ç–¯äº†ï¼â€è´£ä»»ä¸åœ¨æˆ‘ï¼Œæ˜¯å¤–ç•Œå› ç´ æ§åˆ¶äº†æˆ‘çš„æƒ…ç»ªã€‚</li>\n<li>â€œæˆ‘æ ¹æœ¬æ²¡æ—¶é—´åšã€‚â€å¤–ç•Œå› ç´ â€”â€”æ—¶é—´æ‰¼ä½äº†æˆ‘çš„å’½å–‰ã€‚</li>\n<li>â€œæˆ‘åªèƒ½è¿™æ ·åšã€‚â€è¿«äºç¯å¢ƒï¼ˆå¤–ç•Œå› ç´ ï¼‰</li>\n</ul>\n<p>æ¨å¸è´£ä»»çš„è¨€è¯­å¾€å¾€ä¼šå¼ºåŒ–å®¿å‘½è®ºã€‚è¯´è€…ä¸€ééè¢«è‡ªå·±æ´—è„‘ï¼Œå˜å¾—æ›´åŠ è‡ªæ€¨è‡ªè‰¾ï¼Œæ€ªç½ªåˆ«äººå’Œç¯å¢ƒï¼Œç”šè‡³æŠŠæ˜Ÿåº§ä¹Ÿæ‰¯äº†è¿›å»ã€‚</p>\n<h2 id=\"å…³æ³¨åœˆä¸å½±å“åœˆ\"><a href=\"#å…³æ³¨åœˆä¸å½±å“åœˆ\" class=\"headerlink\" title=\"å…³æ³¨åœˆä¸å½±å“åœˆ\"></a>å…³æ³¨åœˆä¸å½±å“åœˆ</h2><p>ç§¯æä¸»åŠ¨çš„äººä¸“æ³¨äºâ€œå½±å“åœˆâ€ï¼Œä»–ä»¬ä¸“å¿ƒåšè‡ªå·±åŠ›æ‰€èƒ½åŠçš„äº‹ï¼Œä»–ä»¬çš„èƒ½é‡æ˜¯ç§¯æçš„ï¼Œèƒ½å¤Ÿä½¿å½±å“åœˆä¸æ–­æ‰©å¤§ã€æ‰©å¼ å’Œæˆé•¿ã€‚åªè¦æˆ‘ä»¬çš„ç„¦ç‚¹åœ¨å…³æ³¨æƒï¼Œå°±ç­‰äºæ˜¯å…è®¸è‡ªå·±å—åˆ¶äºå¤–ç•Œæ¡ä»¶ï¼Œè‡ªç„¶å°±ä¸ä¼šä¸»åŠ¨é‡‡å–å¿…è¦æªæ–½æ¥æ¨åŠ¨ç§¯æå˜åŒ–ã€‚</p>\n<p>ä¸€ä¸ªäººçš„å…³æ³¨åœˆå¯èƒ½ä¼šå°äºå½±å“åœˆï¼Œè¿™è¯´æ˜æ­¤äººç”±äºè‡ªå·±çš„ç¼˜æ•…ï¼Œåœ¨æƒ…æ„Ÿæ–¹é¢ç¼ºä¹è¿œè§å’Œåˆ¤æ–­åŠ›ï¼Œæ¶ˆæè€Œåˆè‡ªç§ï¼Œå…¨éƒ¨ç²¾åŠ›éƒ½æ”¾åœ¨å…³æ³¨åœˆå†…ã€‚</p>\n<h2 id=\"ä¸‰ç§é—®é¢˜\"><a href=\"#ä¸‰ç§é—®é¢˜\" class=\"headerlink\" title=\"ä¸‰ç§é—®é¢˜\"></a>ä¸‰ç§é—®é¢˜</h2><p>å¯ç›´æ¥æ§åˆ¶/å¯é—´æ¥æ§åˆ¶/æ— æ³•æ§åˆ¶</p>\n<blockquote>\n<p>ä¸Šå¸å•Šï¼Œè¯·èµæˆ‘å‹‡æ°”ï¼Œæ”¹å˜é‚£äº›æˆ‘èƒ½æ”¹å˜çš„ï¼›è¯·èµæˆ‘èƒ¸è¥Ÿï¼Œæ¥æ”¶é‚£äº›æˆ‘æ— æ³•æ”¹å˜çš„ï¼›è¯·èµæˆ‘æ…§çœ¼ï¼Œèƒ½å¤Ÿåˆ†è¾¨è¿™ä¸¤è€…ã€‚</p>\n</blockquote>\n<h2 id=\"â€œå¦‚æœâ€å’Œâ€œæˆ‘å¯ä»¥â€\"><a href=\"#â€œå¦‚æœâ€å’Œâ€œæˆ‘å¯ä»¥â€\" class=\"headerlink\" title=\"â€œå¦‚æœâ€å’Œâ€œæˆ‘å¯ä»¥â€\"></a>â€œå¦‚æœâ€å’Œâ€œæˆ‘å¯ä»¥â€</h2><p>ä¸å…³æ³¨åœˆç›¸å…³çš„è¯­å¥å¤šåŠå¸¦æœ‰å‡è®¾æ€§è´¨ï¼Œâ€œå¦‚æœâ€ï¼›ä¸å½±å“åœˆç›¸å…³çš„è¯­å¥å¤šåŠä½“ç°äº†è¿™ä¸ªäººçš„å“å¾·ä¿®å…»ï¼Œâ€œæˆ‘å¯ä»¥â€ã€‚</p>\n<h2 id=\"å¯¹å¾…é”™è¯¯çš„æ€åº¦\"><a href=\"#å¯¹å¾…é”™è¯¯çš„æ€åº¦\" class=\"headerlink\" title=\"å¯¹å¾…é”™è¯¯çš„æ€åº¦\"></a>å¯¹å¾…é”™è¯¯çš„æ€åº¦</h2><p>é©¬ä¸Šæ‰¿è®¤ï¼Œ æ”¹æ­£å¹¶ä»ä¸­å¸å–æ•™è®­ï¼Œè¿™æ ·æ‰èƒ½åè´¥ä¸ºèƒœã€‚å¦‚æœä¸è‚¯æ‰¿è®¤è€Œåæ”¹æ­£ï¼Œä¹Ÿä¸ä¸›ä¸­å¸å–æ•™è®­ï¼Œç­‰äºé”™ä¸ŠåŠ é”™ï¼Œè‡ªæ¬ºæ¬ºäººã€‚</p>\n<h2 id=\"ä¸¤ç§ç›´æ¥æŒæ§äººç”Ÿçš„é€”å¾„\"><a href=\"#ä¸¤ç§ç›´æ¥æŒæ§äººç”Ÿçš„é€”å¾„\" class=\"headerlink\" title=\"ä¸¤ç§ç›´æ¥æŒæ§äººç”Ÿçš„é€”å¾„\"></a>ä¸¤ç§ç›´æ¥æŒæ§äººç”Ÿçš„é€”å¾„</h2><p>ä¸€ã€ä½œå‡ºæ‰¿è¯ºï¼Œä¿¡å®ˆè¯ºè¨€<br>äºŒã€ç¡®ç«‹ç›®æ ‡ï¼Œä»˜è¯¸å®è·µ</p>\n<h2 id=\"ä»˜è¯¸è¡ŒåŠ¨\"><a href=\"#ä»˜è¯¸è¡ŒåŠ¨\" class=\"headerlink\" title=\"ä»˜è¯¸è¡ŒåŠ¨\"></a>ä»˜è¯¸è¡ŒåŠ¨</h2><ol>\n<li>ç”¨ä¸€æ•´å¤©çš„æ—¶é—´ï¼Œå¬è‡ªå·±å’Œå‘¨å›´çš„äººè¯´è¯ï¼Œæ³¨æ„çœ‹æ˜¯å¦å¸¸æœ‰â€œä½†æ„¿â€ã€â€œæˆ‘åŠä¸åˆ°â€ã€â€œæˆ‘ä¸å¾—ä¸â€ç­‰æ¶ˆæè¯­è¨€å‡ºç°</li>\n<li>æƒ³ä¸€æƒ³è¿‘æœŸæ˜¯å¦ä¼šå‘ç”Ÿä¸€äº›æŒ‰ç…§ä»¥å‰çš„ä¹ æƒ¯æ‹Ÿä¼šæ¶ˆæå¯¹å¾…çš„äº‹æƒ…ï¼Ÿä»–æ˜¯å¦åœ¨ä½ çš„å½±å“åœˆä¹‹å†…ï¼Ÿä½ åº”å¦‚ä½•ä»¥ç§¯æä¸»åŠ¨çš„åŸåˆ™åº”å¯¹ï¼Ÿåœ¨å¿ƒé‡Œæ¼”ç»ƒä¸€ä¸‹ç§¯æçš„åº”å¯¹æ–¹å¼ï¼›æé†’è‡ªå·±åˆºæ¿€ä¸å›åº”ä¹‹é—´å­˜åœ¨ç©ºé—´ï¼›æƒ³è‡ªå·±æ‰¿è¯ºï¼Œè¦æŠ“ä½é€‰æ‹©å›åº”çš„è‡ªç”±</li>\n<li>æ‰¾å‡ºä¸€ä¸ªå·¥ä½œæˆ–ç”Ÿæ´»ä¸­ä»¤ä½ å¤‡æ„ŸæŒ«æŠ˜çš„é—®é¢˜ï¼Œåˆ¤æ–­å®ƒå±äºç›´æ¥æ§åˆ¶ã€é—´æ¥æ§åˆ¶è¿˜æ˜¯æ— æ³•æ§åˆ¶çš„é—®é¢˜ï¼Œç„¶ååœ¨å½±å“åœˆå†…æ‰¾å‡ºè§£å†³é—®é¢˜çš„ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼Œå¹¶ä»˜è¯¸è¡ŒåŠ¨</li>\n<li>å®è¡Œç§¯æä¸»åŠ¨çš„åŸåˆ™30å¤©ï¼Œè§‚å¯Ÿè‡ªå·±çš„å½±å“åœˆæœ‰ä½•å˜åŒ–</li>\n</ol>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"ã€Šé«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯ã€‹ç¬¬ä¸€éƒ¨åˆ† é‡æ–°æ¢ç´¢è‡ªæˆ‘","url":"https://lilei.pro/2019/04/07/Seven-Habbits-1/","content":"<h1 id=\"ç¬¬ä¸€ç« -ç”±å†…è€Œå¤–å…¨é¢é€ å°±è‡ªå·±\"><a href=\"#ç¬¬ä¸€ç« -ç”±å†…è€Œå¤–å…¨é¢é€ å°±è‡ªå·±\" class=\"headerlink\" title=\"ç¬¬ä¸€ç«  ç”±å†…è€Œå¤–å…¨é¢é€ å°±è‡ªå·±\"></a>ç¬¬ä¸€ç«  ç”±å†…è€Œå¤–å…¨é¢é€ å°±è‡ªå·±</h1><h2 id=\"æœ¬ä¹¦è¦é˜è¿°çš„å†…å®¹\"><a href=\"#æœ¬ä¹¦è¦é˜è¿°çš„å†…å®¹\" class=\"headerlink\" title=\"æœ¬ä¹¦è¦é˜è¿°çš„å†…å®¹\"></a>æœ¬ä¹¦è¦é˜è¿°çš„å†…å®¹</h2><p>ä»¥åŸåˆ™ä¸ºä¸­å¿ƒï¼Œä»¥å“å¾·ä¸ºåŸºç¡€ï¼Œè¦æ±‚â€œç”±å†…è€Œå¤–â€åœ°å®ç°ä¸ªäººæ•ˆèƒ½å’Œäººé™…æ•ˆèƒ½ã€‚</p>\n<p>ç”±å†…è€Œå¤–çš„è§‚ç‚¹è®¤ä¸ºä¸ªäººé¢†åŸŸçš„æˆåŠŸå¿…éœ€å…ˆäºå…¬ä¼—é¢†åŸŸçš„æˆåŠŸï¼›åªæœ‰å…ˆä¿¡å®ˆå¯¹è‡ªå·±çš„æ‰¿è¯ºï¼Œæ‰èƒ½ä¿¡å®ˆå¯¹ä»–äººçš„æ‰¿è¯ºã€‚ç”±å†…è€Œå¤–æ˜¯ä¸€ä¸ªæŒç»­çš„æ›´æ–°è¿‡ç¨‹ï¼Œä»¥ä¸»å®°äººç±»æˆé•¿å’Œè¿›æ­¥çš„è‡ªç„¶æ³•åˆ™ä¸ºåŸºç¡€ï¼Œæ˜¯èºæ—‹å‘ä¸Šçš„ï¼Œå®ƒè®©æˆ‘ä»¬ä¸æ–­è¿›æ­¥ï¼Œç›´åˆ°å®ç°ç‹¬ç«‹è‡ªå¼ºä¸æœ‰æ•ˆçš„äº’èµ–ã€‚</p>\n<h1 id=\"ç¬¬äºŒç« -ä¸ƒä¸ªä¹ æƒ¯æ¦‚è®º\"><a href=\"#ç¬¬äºŒç« -ä¸ƒä¸ªä¹ æƒ¯æ¦‚è®º\" class=\"headerlink\" title=\"ç¬¬äºŒç«  ä¸ƒä¸ªä¹ æƒ¯æ¦‚è®º\"></a>ç¬¬äºŒç«  ä¸ƒä¸ªä¹ æƒ¯æ¦‚è®º</h1><h2 id=\"ä¹ æƒ¯çš„å¼•åŠ›\"><a href=\"#ä¹ æƒ¯çš„å¼•åŠ›\" class=\"headerlink\" title=\"ä¹ æƒ¯çš„å¼•åŠ›\"></a>ä¹ æƒ¯çš„å¼•åŠ›</h2><p>å®‡å®™é£èˆ¹å¿…é¡»å…ˆæ‘†è„±å¼ºå¤§çš„åœ°çƒå¼•åŠ›ï¼Œä¸ºæ­¤åœ¨åˆšå‘å°„çš„å‡ åˆ†é’Ÿï¼Œå³åˆšå‡ç©ºæ—¶çš„å‡ å…¬é‡Œæ¶ˆè€—çš„èƒ½é‡æ¯”ä¹‹åå‡ å¤©å‡ åä¸‡å…¬é‡Œæ—…ç¨‹æ¶ˆè€—çš„èƒ½é‡è¿˜è¦å¤šã€‚ä¹ æƒ¯ä¹Ÿä¸€æ ·æœ‰æå¤§çš„å¼•åŠ›ï¼Œåªæ˜¯è®¸å¤šäººä¸åŠ æ³¨æ„æˆ–ä¸è‚¯æ‰¿è®¤ç½¢äº†ã€‚è¦æ ¹é™¤æ ¹æ·±è’‚å›ºçš„ä¸è‰¯ä¹ æƒ¯ï¼Œä»…æœ‰ä¸€ç‚¹ç‚¹æ¯…åŠ›ï¼Œåªä½œä¸€ç‚¹ç‚¹æ”¹å˜æ˜¯ä¸å¤Ÿçš„ã€‚</p>\n<h2 id=\"ä¹ æƒ¯çš„å®šä¹‰\"><a href=\"#ä¹ æƒ¯çš„å®šä¹‰\" class=\"headerlink\" title=\"ä¹ æƒ¯çš„å®šä¹‰\"></a>ä¹ æƒ¯çš„å®šä¹‰</h2><p>ä¹ æƒ¯æ˜¯çŸ¥è¯†ã€æŠ€å·§ã€æ„æ„¿ç›¸äº’äº¤ç»‡çš„ç»“æœã€‚</p>\n<ul>\n<li>çŸ¥è¯†ï¼šç†è®ºèŒƒç•´ï¼ŒæŒ‡ç‚¹â€œåšä»€ä¹ˆâ€åŠâ€œä¸ºä½•åšâ€</li>\n<li>æŠ€å·§ï¼šå‘Šè¯‰â€œå¦‚ä½•åšâ€</li>\n<li>æ„æ„¿ï¼šä¿ƒä½¿â€œæƒ³è¦åšâ€</li>\n</ul>\n<h2 id=\"æˆç†Ÿæ¨¡å¼å›¾\"><a href=\"#æˆç†Ÿæ¨¡å¼å›¾\" class=\"headerlink\" title=\"æˆç†Ÿæ¨¡å¼å›¾\"></a>æˆç†Ÿæ¨¡å¼å›¾</h2><ul>\n<li>ä¾èµ–ï¼šä»¥â€œä½ â€ä¸ºæ ¸å¿ƒ</li>\n<li>ç‹¬ç«‹ï¼šä»¥â€œæˆ‘â€ä¸ºæ ¸å¿ƒ</li>\n<li>äº’èµ–ï¼šä»¥â€œæˆ‘ä»¬â€ä¸ºæ ¸å¿ƒ</li>\n</ul>\n<p>åªé‡ç‹¬ç«‹å¹¶ä¸é€‚äºäº’èµ–çš„ç°å®ç”Ÿæ´»ã€‚åªçŸ¥ç‹¬ç«‹å´ä¸æ‡‚äº’èµ–çš„äººåªèƒ½ç§°ä¸ºç‹¬ä¸ªçš„â€œç”Ÿäº§æ ‡å…µâ€ï¼Œå´ä¸â€œä¼˜ç§€é¢†å¯¼â€æˆ–â€œæœ€ä½³åˆä½œè€…â€ä¹‹ç±»çš„ç§°å‘¼æ— ç¼˜ï¼Œä¹Ÿä¸ä¼šæ‹¥æœ‰ç¾æ»¡çš„å®¶åº­ã€å©šå§»æˆ–é›†ä½“ç”Ÿæ´»ã€‚</p>\n<p>äº’èµ–æ˜¯ä¸€ä¸ªæ›´ä¸ºæˆç†Ÿå’Œé«˜çº§çš„æ¦‚å¿µã€‚ç”Ÿç†ä¸Šäº’èµ–çš„äººï¼Œå¯ä»¥è‡ªåŠ›æ›´ç”Ÿï¼Œä½†ä¹Ÿæ˜ç™½åˆä½œä¼šæ¯”å•å¹²æ›´æœ‰æˆæ•ˆï¼›æƒ…æ„Ÿä¸Šäº’èµ–çš„äººï¼Œèƒ½å……åˆ†è®¤è¯†è‡ªå·±çš„ä»·å€¼ï¼Œä½†ä¹ŸçŸ¥é“çˆ±å¿ƒã€å…³æ€€ä»¥åŠä»˜å‡ºçš„å¿…è¦æ€§ï¼›æ™ºåŠ›ä¸Šäº’èµ–çš„äººæ‡‚å¾—å–äººä¹‹é•¿ï¼Œè¡¥å·±ä¹‹çŸ­ã€‚</p>\n<h2 id=\"ä¸ƒä¸ªä¹ æƒ¯\"><a href=\"#ä¸ƒä¸ªä¹ æƒ¯\" class=\"headerlink\" title=\"ä¸ƒä¸ªä¹ æƒ¯\"></a>ä¸ƒä¸ªä¹ æƒ¯</h2><h3 id=\"ä¾èµ–-gt-ç‹¬ç«‹ï¼Œä¸ªäººé¢†åŸŸçš„æˆåŠŸ\"><a href=\"#ä¾èµ–-gt-ç‹¬ç«‹ï¼Œä¸ªäººé¢†åŸŸçš„æˆåŠŸ\" class=\"headerlink\" title=\"ä¾èµ– -&gt; ç‹¬ç«‹ï¼Œä¸ªäººé¢†åŸŸçš„æˆåŠŸ\"></a>ä¾èµ– -&gt; ç‹¬ç«‹ï¼Œä¸ªäººé¢†åŸŸçš„æˆåŠŸ</h3><ul>\n<li>ç§¯æä¸»åŠ¨</li>\n<li>ä»¥ç»ˆä¸ºå§‹</li>\n<li>è¦äº‹ç¬¬ä¸€</li>\n</ul>\n<h3 id=\"ç‹¬ç«‹-gt-äº’èµ–ï¼Œå…¬ä¼—é¢†åŸŸçš„æˆåŠŸ\"><a href=\"#ç‹¬ç«‹-gt-äº’èµ–ï¼Œå…¬ä¼—é¢†åŸŸçš„æˆåŠŸ\" class=\"headerlink\" title=\"ç‹¬ç«‹ -&gt; äº’èµ–ï¼Œå…¬ä¼—é¢†åŸŸçš„æˆåŠŸ\"></a>ç‹¬ç«‹ -&gt; äº’èµ–ï¼Œå…¬ä¼—é¢†åŸŸçš„æˆåŠŸ</h3><ul>\n<li>åŒèµ¢æ€ç»´</li>\n<li>çŸ¥å½¼è§£å·±</li>\n<li>ç»Ÿåˆç»¼æ•ˆ</li>\n</ul>\n<h3 id=\"èºæ—‹ä¸Šå‡\"><a href=\"#èºæ—‹ä¸Šå‡\" class=\"headerlink\" title=\"èºæ—‹ä¸Šå‡\"></a>èºæ—‹ä¸Šå‡</h3><ul>\n<li>ä¸æ–­æ›´æ–°</li>\n</ul>\n<h2 id=\"ä»€ä¹ˆæ˜¯é«˜æ•ˆèƒ½\"><a href=\"#ä»€ä¹ˆæ˜¯é«˜æ•ˆèƒ½\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯é«˜æ•ˆèƒ½\"></a>ä»€ä¹ˆæ˜¯é«˜æ•ˆèƒ½</h2><p><strong>äº§å‡ºä¸äº§èƒ½å¹³è¡¡çš„åŸåˆ™æ˜¯æ•ˆèƒ½çš„ç²¾é«“</strong>ï¼Œæ”¾ä¹‹å››æµ·è€Œçš†å‡†ï¼Œä¸ç®¡ä½ æ˜¯å¦éµä»ï¼Œå®ƒéƒ½ä¼šå­˜åœ¨ã€‚å®ƒæ˜¯æŒ‡å¯¼äººç”Ÿçš„ç¯å¡”ï¼Œæ˜¯æ•ˆèƒ½çš„å®šä¹‰å’Œæ¨¡å¼ï¼Œæ˜¯æœ¬ä¹¦ä¸­ä¸ƒä¸ªä¹ æƒ¯çš„åŸºç¡€ã€‚</p>\n","categories":[],"tags":["é«˜æ•ˆèƒ½äººå£«çš„ä¸ƒä¸ªä¹ æƒ¯"]},{"title":"å‹æƒ…é“¾æ¥","url":"https://lilei.pro/2019/03/10/links/","content":"<table>\n<thead>\n<tr>\n<th>Title</th>\n<th>Content</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"https://github.com/yscoder/hexo-theme-indigo\" target=\"_blank\" rel=\"noopener\">hexo-theme-indigo</a></td>\n<td>æœ¬åšå®¢ä½¿ç”¨çš„ Hexo ä¸»é¢˜</td>\n</tr>\n</tbody>\n</table>\n","categories":[],"tags":["å·¥å…·"]},{"title":"Java SE 8 Lambda å¿«é€Ÿå…¥é—¨","url":"https://lilei.pro/2018/11/01/java8-lambda/","content":"<blockquote>\n<p>æœ¬æ–‡æ˜¯å¯¹<a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/index.html\" target=\"_blank\" rel=\"noopener\">Java SE 8: Lambda Quick Start</a>çš„ç¿»è¯‘ï¼Œä¾›ä¸ªäººå­¦ä¹ Lambdaè¡¨è¾¾å¼ä¹‹ç”¨ã€‚æˆæ–‡æ—¥æœŸï¼š2018-11-01ï¼Œæ‰€æœ‰ä»¥å¼•æ–‡å‡ºç°çš„æ–‡å­—ä¸ºç¬”è€…é˜…è¯»è¿‡ç¨‹ä¸­æ·»åŠ ï¼ŒéåŸæ–‡å†…å®¹ã€‚<br>å¼ºçƒˆå»ºè®®CET4ä»¥ä¸Šçš„è¯»è€…é˜…è¯»åŸæ–‡ã€‚</p>\n</blockquote>\n<h1 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h1><h2 id=\"ç›®æ ‡\"><a href=\"#ç›®æ ‡\" class=\"headerlink\" title=\"ç›®æ ‡\"></a>ç›®æ ‡</h2><p>æœ¬æ–‡æ—¨åœ¨ä»‹ç»åœ¨ Java SE 8 ä¸­å¼•è¿›çš„ Lambda è¡¨è¾¾å¼ã€‚</p>\n<h2 id=\"é˜…è¯»æ—¶é—´\"><a href=\"#é˜…è¯»æ—¶é—´\" class=\"headerlink\" title=\"é˜…è¯»æ—¶é—´\"></a>é˜…è¯»æ—¶é—´</h2><p>å¤§çº¦ 1 å°æ—¶</p>\n<h2 id=\"ç®€ä»‹\"><a href=\"#ç®€ä»‹\" class=\"headerlink\" title=\"ç®€ä»‹\"></a>ç®€ä»‹</h2><p>Lambda è¡¨è¾¾å¼æ˜¯ Java SE 8 æ–°å¼•å…¥çš„é‡è¦ç‰¹æ€§ã€‚å®ƒæä¾›äº†é€šè¿‡ä¸€ä¸ªè¡¨è¾¾å¼è¡¨ç¤ºæŒ‡ä»£æ¥å£çš„ç®€æ´æ–¹æ³•ã€‚Lambda è¡¨è¾¾å¼ä¹Ÿåœ¨éå†ã€è¿‡æ»¤ã€ä»¥åŠè¯»å–æ•°æ®æ–¹é¢ä¼˜åŒ–äº†<code>Collection</code>ç±»çš„ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œæ–°çš„å¹¶å‘ç‰¹æ€§æå‡äº†å¤šæ ¸ç¯å¢ƒä¸‹çš„ç¨‹åºæ€§èƒ½ã€‚</p>\n<blockquote>\n<p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯ä¸‰ä¸ªä¼˜ç‚¹ï¼š1.æ›´ç®€æ´çš„åŒ¿åç±»å†™æ³•ï¼Œ2.æ›´ä¾¿åˆ©çš„é›†åˆç±»å¤„ç†ï¼Œ3.å¤šæ ¸ç¯å¢ƒæ€§èƒ½ä¼˜åŒ–ã€‚</p>\n</blockquote>\n<p>æœ¬æ–‡é¦–å…ˆæä¾›äº†å¯¹ Lambda è¡¨è¾¾å¼çš„ä»‹ç»è¯´æ˜ï¼Œç„¶åä»‹ç»åŒ¿åå†…éƒ¨å‡½æ•°ï¼Œæ¥ç€å¯¹å‡½æ•°å€Ÿå£å’Œæ–°çš„ Lambda è¯­æ³•è¿›è¡Œè®¨è®ºã€‚ç„¶ååˆ—ä¸¾å‡ºä¸€äº›å¸¸ç”¨ä½¿ç”¨æ–¹æ³•æ¨¡ç‰ˆã€‚</p>\n<p>ä¸‹èŠ‚é€šè¿‡å¯¹ä¸€ä¸ªæœç´¢åœºæ™¯çš„è®¨è®ºï¼Œå¼•ç”³å‡º Lambda è¡¨è¾¾å¼å¦‚ä½•ä¼˜åŒ–è¿™ç§åŠŸèƒ½å®ç°ã€‚ç„¶åä»‹ç»äº†ä¸€äº›<code>java.util.function</code>åŒ…é‡Œé¢å¸¸ç”¨çš„å‡½æ•°æ¥å£ï¼Œå¦‚<code>Predicate</code>å’Œ<code>Function</code>ï¼Œå¹¶ä¸¾äº†ä¸€äº›æ —å­ã€‚</p>\n<p>æ–‡æœ«ä»‹ç»å¦‚ä½•é€šè¿‡ Lambda ä¼˜åŒ–é›†åˆç±»ä½¿ç”¨ã€‚</p>\n<p>æä¾›æ‰€æœ‰æ ·ä¾‹æºç ã€‚</p>\n<h2 id=\"ç¡¬ä»¶å’Œè½¯ä»¶éœ€æ±‚\"><a href=\"#ç¡¬ä»¶å’Œè½¯ä»¶éœ€æ±‚\" class=\"headerlink\" title=\"ç¡¬ä»¶å’Œè½¯ä»¶éœ€æ±‚\"></a>ç¡¬ä»¶å’Œè½¯ä»¶éœ€æ±‚</h2><p>ä»¥ä¸‹æ˜¯ç¡¬ä»¶å’Œè½¯ä»¶éœ€æ±‚åˆ—è¡¨</p>\n<ul>\n<li>JDK 8</li>\n<li>NetBeans 7.4</li>\n</ul>\n<blockquote>\n<p>å¯ä»¥ç”¨IDEAä»£æ›¿NetBeans</p>\n</blockquote>\n<h2 id=\"ï¼ˆè¿è¡Œæ ·ä¾‹çš„ï¼‰å…ˆå†³æ¡ä»¶\"><a href=\"#ï¼ˆè¿è¡Œæ ·ä¾‹çš„ï¼‰å…ˆå†³æ¡ä»¶\" class=\"headerlink\" title=\"ï¼ˆè¿è¡Œæ ·ä¾‹çš„ï¼‰å…ˆå†³æ¡ä»¶\"></a>ï¼ˆè¿è¡Œæ ·ä¾‹çš„ï¼‰å…ˆå†³æ¡ä»¶</h2><p>è¦è¿è¡Œæ ·ä¾‹ï¼Œä½ çš„ç”µè„‘ä¸Šå¿…é¡»å®‰è£…æœ‰JDK 8å’ŒNetBeans 7.4æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä½ å¯ä»¥åœ¨<a href=\"http://openjdk.java.net/projects/lambda/\" target=\"_blank\" rel=\"noopener\">the main Lambda site</a>æ‰¾åˆ°ä¸‹è½½é“¾æ¥ã€‚æˆ–è€…å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„é“¾æ¥ã€‚</p>\n<ul>\n<li><a href=\"https://jdk8.java.net/download.html\" target=\"_blank\" rel=\"noopener\">Java Development Kit 8 (JDK8) Early Access</a></li>\n<li><a href=\"http://netbeans.org/\" target=\"_blank\" rel=\"noopener\">NetBeans 7.4 or later</a></li>\n</ul>\n<p><strong>æ³¨æ„ï¼š</strong> å®‰è£…åŒ…é€‚ç”¨äºæ‰€æœ‰ä¸»æµæ“ä½œç³»ç»Ÿã€‚æœ¬æ–‡åŸºäº Linux Mint 13ï¼ˆUbuntu/Debianï¼‰å®Œæˆã€‚</p>\n<p>å®‰è£…å®ŒæˆJDK8å’ŒNetBeansåã€‚å°†å®ƒä»¬çš„<code>bin</code>æ–‡ä»¶å¤¹æ·»åŠ åˆ°ä½ çš„ç¯å¢ƒå˜é‡<code>PATH</code>ä¸­ã€‚</p>\n<p><strong>æ³¨æ„ï¼š</strong> æœ¬æ–‡æœ€åæ›´æ–°äº 2013 å¹´åäºŒæœˆã€‚</p>\n<blockquote>\n<p>ç«Ÿç„¶æ˜¯5å¹´ä»¥å‰çš„æ–‡ç« äº†â€¦</p>\n</blockquote>\n<h1 id=\"èƒŒæ™¯çŸ¥è¯†\"><a href=\"#èƒŒæ™¯çŸ¥è¯†\" class=\"headerlink\" title=\"èƒŒæ™¯çŸ¥è¯†\"></a>èƒŒæ™¯çŸ¥è¯†</h1><h2 id=\"åŒ¿åå†…éƒ¨ç±»ï¼ˆAnonymous-Inner-Classï¼‰\"><a href=\"#åŒ¿åå†…éƒ¨ç±»ï¼ˆAnonymous-Inner-Classï¼‰\" class=\"headerlink\" title=\"åŒ¿åå†…éƒ¨ç±»ï¼ˆAnonymous Inner Classï¼‰\"></a>åŒ¿åå†…éƒ¨ç±»ï¼ˆAnonymous Inner Classï¼‰</h2><p>åœ¨ Java ä¸­ï¼ŒåŒ¿åå†…éƒ¨ç±»æä¾›ä¸€ç§å®ç°ä»…ä½¿ç”¨ä¸€æ¬¡çš„ç±»çš„é€”å¾„ã€‚ä¾‹å¦‚ï¼Œåœ¨æ ‡å‡†çš„ Swing æˆ–è€… JavaFX åº”ç”¨ä¸­ï¼Œéœ€è¦ç”¨ä¸€ç³»åˆ—çš„ handler æ¥å¤„ç†é”®ç›˜å’Œé¼ æ ‡äº‹ä»¶ã€‚é™¤äº†ä¸ºæ¯ä¸€ä¸ªäº‹ä»¶å•ç‹¬å†™ä¸€ä¸ªäº‹ä»¶å¤„ç†ç±»ï¼ˆè¯¥ç±»éœ€è¦å®ç° ActionListener æ¥å£ï¼‰è¿™ç§æ–¹å¼ï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹ä»£ç æ¥å®ç°ç±»ä¼¼éœ€æ±‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JButton testButton = <span class=\"keyword\">new</span> JButton(<span class=\"string\">\"Test Button\"</span>);</span><br><span class=\"line\">testButton.addActionListener(<span class=\"keyword\">new</span> ActionListener()&#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent ae)</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Click Detected by Anon Class\"</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>é™¤æ­¤ä¹‹å¤–ï¼Œä½ éœ€è¦ä¸ºæ¯ä¸€ä¸ªäº‹ä»¶éƒ½å†™ä¸‹ç±»ä¼¼çš„ä»£ç ï¼Œå®ƒä»¬éƒ½éœ€è¦å®ç°<code>ActionListener</code>æ¥å£ã€‚é€šè¿‡ä¸Šè¿°åŒ¿åå†…éƒ¨ç±»çš„å†™æ³•ï¼Œä»£ç ä¼¼ä¹å˜å¾—å®¹æ˜“é˜…è¯»ä¸€äº›ã€‚ç„¶è€Œè¿™ç§å†™æ³•å¾ˆä¸ä¼˜é›…ï¼Œå› ä¸ºæœ‰å¤ªå¤šæ— ç”¨çš„æ¨¡ç‰ˆä»£ç ï¼Œæˆ‘ä»¬éœ€è¦çš„å…¶å®åªæ˜¯â€œåœ¨å‡½æ•°é‡Œæˆ‘è¦åšä»€ä¹ˆäº‹â€è¿™ä¸ªä¿¡æ¯ã€‚</p>\n<h2 id=\"å‡½æ•°æ¥å£ï¼ˆFunctional-Interfacesï¼‰\"><a href=\"#å‡½æ•°æ¥å£ï¼ˆFunctional-Interfacesï¼‰\" class=\"headerlink\" title=\"å‡½æ•°æ¥å£ï¼ˆFunctional Interfacesï¼‰\"></a>å‡½æ•°æ¥å£ï¼ˆFunctional Interfacesï¼‰</h2><p>å®šä¹‰<code>ActionListener</code>çš„ç±»ä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> java.awt.event;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.EventListener;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ActionListener</span> <span class=\"keyword\">extends</span> <span class=\"title\">EventListener</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent e)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>ActionListener</code>çš„æ¢¨å­æ˜¯ä¸€ä¸ªåªå«æœ‰ä¸€ä¸ªå‡½æ•°å£°æ˜çš„æ¥å£ã€‚åœ¨ Java SE 8 ä¸­ï¼Œè¿™ç§æ¨¡å¼çš„æ¥å£è¢«ç§°ä¸ºâ€œå‡½æ•°æ¥å£â€ã€‚</p>\n<p><strong>æ³¨æ„ï¼š</strong> è¿™ç§æ¥å£ä¹‹å‰è¢«ç§°ä¸ºâ€œSingle Abstrace Method typeâ€ï¼ˆå•ä¸€æŠ½è±¡æ–¹æ³•ç±»å‹ï¼‰</p>\n<p>åœ¨ Java ä¸­ä½¿ç”¨åŒ¿åç±»å®ç°å‡½æ•°æ¥å£æ˜¯ä¸€ç§å¸¸è§å†™æ³•ã€‚é™¤äº†<code>EventListener</code>ç±»ä»¥å¤–ï¼Œåƒ<code>Runnable</code>å’Œ<code>Comparator</code>è¿™æ ·çš„æ¥å£ä¹Ÿæœ‰ä¸€æ ·çš„æ¨¡å¼ã€‚å› æ­¤ï¼Œå‡½æ•°å¼æ¥å£æ˜¯æˆ‘ä»¬ä½¿ç”¨ Lambda è¡¨è¾¾å¼çš„ä¸€ä¸ªé‡è¦åŸå› ã€‚</p>\n<h2 id=\"Lambda-è¡¨è¾¾å¼è¯­æ³•\"><a href=\"#Lambda-è¡¨è¾¾å¼è¯­æ³•\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼è¯­æ³•\"></a>Lambda è¡¨è¾¾å¼è¯­æ³•</h2><p>Lambda å¯ä»¥æŠŠåŒ¿åå†…éƒ¨ç±»çš„ä»£ç ä» 5 è¡Œç²¾ç®€åˆ° 1 è¡Œï¼Œæå¤§çš„ç¼©å‡äº†ä»£ç çš„å†—ä½™ã€‚å¦‚ä¸‹è¿™ç§â€œæ°´å¹³çš„â€è§£å†³æ–¹æ¡ˆè§£å†³äº†åŒ¿åå†…éƒ¨ç±»å¸¦æ¥çš„â€œå‚ç›´çš„â€é—®é¢˜ã€‚</p>\n<blockquote>\n<p>è¿™é‡Œâ€œæ°´å¹³â€å’Œâ€œå‚ç›´â€æ˜¯æŒ‡ä»£ç å—åœ¨é¡µé¢ä¸­å‘ˆç°çš„å½¢å¼</p>\n</blockquote>\n<p>ä¸€ä¸ª Lambda è¡¨è¾¾å¼ç”±ä¸‰éƒ¨åˆ†æ„æˆ</p>\n<table>\n<thead>\n<tr>\n<th>Argument List</th>\n<th>Arrow Token</th>\n<th>Body</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>(int x, int y)</td>\n<td>-&gt;</td>\n<td>x + y</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>è¿™ä¸‰ä¸ªéƒ¨åˆ†å¯ä»¥ç¿»è¯‘ä¸ºâ€œå‚æ•°åˆ—è¡¨â€ã€â€œç®­å¤´æ ‡å¿—â€ã€â€œå‡½æ•°ä½“â€ï¼Œä¸è¿‡ä¸‹æ–‡ä»ç„¶ä»¥è‹±æ–‡ç§°å‘¼ï¼Œä¸ºäº†åŠ æ·±è®°å¿†ã€‚</p>\n</blockquote>\n<p>Body éƒ¨åˆ†å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„è¡¨è¾¾å¼ï¼ˆexpressionï¼‰æˆ–è€…ä»£ç å—ï¼ˆstatement blockï¼‰ã€‚åœ¨ä¸Šé¢çš„æ¨¡ç‰ˆä¸­ï¼Œbody ä¸­è¿›è¡Œäº†ç®€å•çš„è®¡ç®—å’Œè¿”å›ã€‚åœ¨ä»£ç å—æ ¼å¼ä¸­ï¼Œbody å‘ˆç°å½¢å¼ä¸æ™®é€šå‡½æ•°å†™æ³•ä¸€æ ·ï¼ŒåŒæ ·éœ€è¦ä¸€ä¸ª return è¯­å¥æ¥è¿”å›ç»“æœç»™åŒ¿åå‡½æ•°çš„è°ƒç”¨è€…ã€‚<code>break</code>å’Œ<code>continue</code>å…³é”®å­—åœ¨æœ€å¤–å±‚æ˜¯ç¦æ­¢ä½¿ç”¨çš„ï¼Œä¸è¿‡å¦‚æœä»£ç é‡Œå­˜åœ¨å¾ªç¯ï¼ˆloopsï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ã€‚å¦‚æœ body éœ€è¦è¿”å›ä¸€ä¸ªç»“æœå€¼ï¼Œæ¯ä¸€æ¡æ§åˆ¶è·¯å¾„éƒ½å¿…éœ€æœ‰å€¼è¿”å›ï¼Œæˆ–è€…æŠ›å‡ºå¼‚å¸¸ã€‚</p>\n<p>çœ‹ä¸€ä¸‹è¿™äº›æ —å­ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(<span class=\"keyword\">int</span> x, <span class=\"keyword\">int</span> y) -&gt; x + y</span><br><span class=\"line\"></span><br><span class=\"line\">() -&gt; <span class=\"number\">42</span></span><br><span class=\"line\"></span><br><span class=\"line\">(String s) -&gt; &#123; System.out.println(s); &#125;</span><br></pre></td></tr></table></figure>\n<p>ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼è¯»å–ä¸¤ä¸ªæ•´å‹å‚æ•°ï¼Œ<code>x</code>å’Œ<code>y</code>ï¼Œç„¶åè¿”å›<code>x+y</code>çš„ç»“æœã€‚ç¬¬äºŒä¸ªè¡¨è¾¾å¼ä¸éœ€è¦å‚æ•°ï¼Œä½¿ç”¨â€œè¡¨è¾¾å¼â€æ ¼å¼çš„è¿”å›ç»“æœï¼Œå€¼ä¸º42ã€‚ç¬¬ä¸‰ä¸ªè¡¨è¾¾å¼è¯»å–å­—ç¬¦ä¸²å‚æ•°ï¼Œç„¶åå°†å®ƒæ‰“å°åœ¨æ§åˆ¶å°ï¼Œä¸è¿”å›ä»»ä½•ç»“æœã€‚</p>\n<p>æœ‰äº†ä¸Šé¢çš„åŸºç¡€çŸ¥è¯†ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€äº›æ ·ä¾‹ã€‚</p>\n<h1 id=\"Lambda-æ ·ä¾‹ï¼ˆLambda-Examplesï¼‰\"><a href=\"#Lambda-æ ·ä¾‹ï¼ˆLambda-Examplesï¼‰\" class=\"headerlink\" title=\"Lambda æ ·ä¾‹ï¼ˆLambda Examplesï¼‰\"></a>Lambda æ ·ä¾‹ï¼ˆLambda Examplesï¼‰</h1><p>è¿™é‡Œæ˜¯ä¸€äº›ä½¿ç”¨åˆ°ä¸Šé¢æåˆ°çš„æ —å­çš„å¸¸è§ç”¨æ³•ã€‚</p>\n<h2 id=\"Runnable-Lambda\"><a href=\"#Runnable-Lambda\" class=\"headerlink\" title=\"Runnable Lambda\"></a>Runnable Lambda</h2><p>ä½ å¯ä»¥ç”¨ Lambda æ¥å†™ä¸€ä¸ªå®ç°äº† Runnable æ¥å£çš„å¯¹è±¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RunnableTest</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"=== RunnableTest ===\"</span>);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Anonymous Runnable</span></span><br><span class=\"line\">    Runnable r1 = <span class=\"keyword\">new</span> Runnable()&#123;</span><br><span class=\"line\">      <span class=\"meta\">@Override</span></span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"Hello world one!\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Lambda Runnable</span></span><br><span class=\"line\">    Runnable r2 = () -&gt; System.out.println(<span class=\"string\">\"Hello world two!\"</span>);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Run em!</span></span><br><span class=\"line\">    r1.run();</span><br><span class=\"line\">    r2.run();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨ä¸¤ç§åœºæ™¯é‡Œï¼Œè¯·æ³¨æ„åˆ°æ¥å£ä¸éœ€è¦è¯»å–å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼ã€‚<code>Runnable</code>çš„ Lambda è¡¨è¾¾å¼ä½¿ç”¨äº†ä»£ç å—æ¨¡å¼ï¼Œå°† 5 è¡Œä»£ç æµ“ç¼©ä¸º 1 è¡Œã€‚</p>\n<blockquote>\n<p>â€œä»£ç å—â€åº”ä¸ºåŸä½œè€…ç¬”è¯¯ï¼Œå®é™…ä¸Šæ˜¯â€œè¡¨è¾¾å¼â€æ ¼å¼ã€‚</p>\n</blockquote>\n<h2 id=\"Comparator-Lambda\"><a href=\"#Comparator-Lambda\" class=\"headerlink\" title=\"Comparator Lambda\"></a>Comparator Lambda</h2><p><code>Comparator</code>ç±»åœ¨ Java ä¸­ç”¨äºç»™é›†åˆæ’åºã€‚åœ¨ä»¥ä¸‹çš„ä¾‹å­ä¸­ï¼Œä¸€ä¸ªç”±<code>Person</code>å¯¹è±¡æ„æˆçš„<code>ArrayList</code>è¢«æŒ‰ç…§<code>surName</code>è¿›è¡Œæ’åºã€‚ä»¥ä¸‹æ˜¯<code>Person</code>ç±»çš„æˆå‘˜å˜é‡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String givenName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String surName;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Gender gender;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String eMail;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String phone;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String address;</span><br></pre></td></tr></table></figure>\n<p>ä»¥ä¸‹ä»£ç åˆ†åˆ«ä½¿ç”¨äº†åŒ¿åå†…éƒ¨ç±»å’Œ Lambda è¡¨è¾¾å¼ä¸¤ç§æ–¹å¼ç”Ÿæˆ<code>Comparator</code>è¿›è¡Œæ’åºã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ComparatorTest</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">    List&lt;Person&gt; personList = Person.createShortList();</span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">// Sort with Inner Class</span></span><br><span class=\"line\">    Collections.sort(personList, <span class=\"keyword\">new</span> Comparator&lt;Person&gt;()&#123;</span><br><span class=\"line\">      <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">compare</span><span class=\"params\">(Person p1, Person p2)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> p1.getSurName().compareTo(p2.getSurName());</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"=== Sorted Asc SurName ===\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:personList)&#123;</span><br><span class=\"line\">      p.printName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Use Lambda instead</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Print Asc</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"=== Sorted Asc SurName ===\"</span>);</span><br><span class=\"line\">    Collections.sort(personList, (Person p1, Person p2) -&gt; p1.getSurName().compareTo(p2.getSurName()));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:personList)&#123;</span><br><span class=\"line\">      p.printName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Print Desc</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"=== Sorted Desc SurName ===\"</span>);</span><br><span class=\"line\">    Collections.sort(personList, (p1,  p2) -&gt; p2.getSurName().compareTo(p1.getSurName()));</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:personList)&#123;</span><br><span class=\"line\">      p.printName();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>ç”±äº Markdown ä¸æ”¯æŒä»£ç è¡Œæ•°è¡¨ç¤ºï¼Œè¿™é‡Œçš„è¡Œæ•°è¯·è‡ªè¡Œä½“ä¼šã€‚</p>\n</blockquote>\n<p>17 - 21 è¡Œçš„æ’åºè¯­å¥å¯ä»¥è¢« 32 è¡Œçš„ Lambda è¡¨è¾¾å¼ç²¾ç®€ã€‚æ³¨æ„åˆ°ç¬¬ä¸€ä¸ª Lambda è¡¨è¾¾å¼å£°æ˜äº†ä¼ è¿›æ¥çš„å‚æ•°ç±»å‹ã€‚ç¬¬äºŒä¸ª Lambda è¡¨è¾¾å¼åˆ™çœç•¥äº†ç±»å‹å£°æ˜ã€‚Lambda æ”¯æŒâ€œtarget typingâ€ï¼ˆç±»å‹è‡ªåŠ¨åŒ¹é…ï¼Ÿï¼‰ï¼Œæ„å‘³ç€å®ƒå¯ä»¥è‡ªåŠ¨ä»ä¸Šä¸‹æ–‡ä¸­è·å–åˆ°å¯¹è±¡ç±»å‹ä¿¡æ¯ã€‚å› ä¸ºæˆ‘ä»¬å°†<code>Comparator</code>åº”ç”¨äºæ³›å‹é›†åˆç±»ï¼ˆpersonListï¼‰ï¼Œç¼–è¯‘å™¨èƒ½å¤Ÿè‡ªåŠ¨åˆ¤æ–­å‚æ•°ç±»å‹ä¸º<code>Person</code>ã€‚</p>\n<h2 id=\"Listener-Lambda\"><a href=\"#Listener-Lambda\" class=\"headerlink\" title=\"Listener Lambda\"></a>Listener Lambda</h2><p>æœ€åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>ActionListener</code>çš„ä¾‹å­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ListenerTest</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        </span><br><span class=\"line\">    JButton testButton = <span class=\"keyword\">new</span> JButton(<span class=\"string\">\"Test Button\"</span>);</span><br><span class=\"line\">    testButton.addActionListener(<span class=\"keyword\">new</span> ActionListener()&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">actionPerformed</span><span class=\"params\">(ActionEvent ae)</span></span>&#123;</span><br><span class=\"line\">            System.out.println(<span class=\"string\">\"Click Detected by Anon Class\"</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    </span><br><span class=\"line\">    testButton.addActionListener(e -&gt; System.out.println(<span class=\"string\">\"Click Detected by Lambda Listner\"</span>));</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Swing stuff</span></span><br><span class=\"line\">    JFrame frame = <span class=\"keyword\">new</span> JFrame(<span class=\"string\">\"Listener Test\"</span>);</span><br><span class=\"line\">    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class=\"line\">    frame.add(testButton, BorderLayout.CENTER);</span><br><span class=\"line\">    frame.pack();</span><br><span class=\"line\">    frame.setVisible(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ³¨æ„ Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°è¢«ä¼ å…¥ã€‚ç±»å‹è‡ªåŠ¨åŒ¹é…å¯ä»¥åº”ç”¨åœ¨å¾ˆå¤šåœºæ™¯ä¸­ï¼Œä»¥ä¸‹ä¸¾ä¾‹è¯´æ˜ï¼š</p>\n<ul>\n<li>Variable declarationsï¼ˆå˜é‡å£°æ˜ï¼‰</li>\n<li>Assignmentsï¼ˆèµ‹å€¼ï¼‰</li>\n<li>Return statementsï¼ˆè¿”å›è¯­å¥ï¼‰</li>\n<li>Array initializersï¼ˆæ•°ç»„åˆå§‹åŒ–ï¼‰</li>\n<li>Method or constructor argumentsï¼ˆæ–¹æ³•æˆ–æ„é€ å™¨å‚æ•°ï¼‰</li>\n<li>Lambda expression bodiesï¼ˆLambda è¡¨è¾¾å¼ä½“ï¼‰</li>\n<li>Conditional expressions?:ï¼ˆä¸‰å…ƒè¿ç®—ç¬¦?:ï¼‰</li>\n<li>Cast expressionsï¼ˆç±»å‹è½¬æ¢è¯­å¥ï¼‰</li>\n</ul>\n<blockquote>\n<p>ç®€å•è¯´å°±æ˜¯æ‰€æœ‰ä¸º<code>expression</code>çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ Lambda è¡¨è¾¾å¼ï¼Œå®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ª expression/statementã€‚</p>\n</blockquote>\n<h2 id=\"èµ„æºä¸‹è½½\"><a href=\"#èµ„æºä¸‹è½½\" class=\"headerlink\" title=\"èµ„æºä¸‹è½½\"></a>èµ„æºä¸‹è½½</h2><p>æœ¬å°èŠ‚ä¸­çš„ NetBeans å·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ°</p>\n<p><a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/examples/LambdaExamples01.zip\" target=\"_blank\" rel=\"noopener\">LambdaExamples01.zip</a></p>\n<h1 id=\"é€šè¿‡-Lambda-è¡¨è¾¾å¼ä¼˜åŒ–ä»£ç \"><a href=\"#é€šè¿‡-Lambda-è¡¨è¾¾å¼ä¼˜åŒ–ä»£ç \" class=\"headerlink\" title=\"é€šè¿‡ Lambda è¡¨è¾¾å¼ä¼˜åŒ–ä»£ç \"></a>é€šè¿‡ Lambda è¡¨è¾¾å¼ä¼˜åŒ–ä»£ç </h1><p>åœ¨ä½ æŒæ¡äº†å‰é¢å±•ç¤ºçš„ä¾‹å­åï¼Œæœ¬èŠ‚å°†ä»‹ç»å¦‚ä½•å€ŸåŠ© Lambda æ”¹è¿›ä½ çš„ä»£ç ã€‚Lambda è¡¨è¾¾å¼å°†å¸®åŠ©ä½ è½»æ¾å®ç°â€œDonâ€™t Repeat Yourself(DRY)â€åŸåˆ™ï¼Œå¹¶ä¸”ä½¿ä½ çš„ä»£ç æ›´åŠ ç®€æ´æ˜“äºé˜…è¯»ã€‚</p>\n<h2 id=\"ä¸€ä¸ªæŸ¥è¯¢çš„-Case\"><a href=\"#ä¸€ä¸ªæŸ¥è¯¢çš„-Case\" class=\"headerlink\" title=\"ä¸€ä¸ªæŸ¥è¯¢çš„ Case\"></a>ä¸€ä¸ªæŸ¥è¯¢çš„ Case</h2><p>ä¸€ä¸ªå¸¸è§çš„åº”ç”¨ç¨‹åºåœºæ™¯æ˜¯ï¼Œä»ä¸€ä¸ªé›†åˆä¸­éå†ï¼Œæ‰¾å‡ºé‚£äº›ç¬¦åˆæŸç§è¿‡æ»¤æ¡ä»¶çš„æˆå‘˜ã€‚åœ¨ 2012 å¹´çš„ JavaOne å¤§ä¼šä¸Šï¼ŒStuart Marks å’Œ Mike Duigou é€šè¿‡æ ¼å¤–å‡ºè‰²çš„<a href=\"http://www.youtube.com/watch?v=bzO5GSujdqI\" target=\"_blank\" rel=\"noopener\">Jump-Starting Lambda</a>å±•ç¤ºäº†è¿™ç§åº”ç”¨åœºæ™¯ã€‚ç»™ä½ ä¸€ä¸ªåå•åˆ—è¡¨ä»¥åŠä¸€ç³»åˆ—ç­›é€‰æ¡ä»¶ï¼Œéœ€è¦æ‰¾å‡ºé‚£äº›ç¬¦åˆæ¡ä»¶çš„äººå¹¶ä¸”è‡ªåŠ¨å‘¼å«ä»–ä»¬ã€‚è¿™ä¸ªæŒ‡å—åœ¨æœ‰ä¸€äº›è½»å¾®å˜æ›´çš„æƒ…å†µä¸‹å®ç°äº†ä¸Šè¿°éœ€æ±‚ã€‚</p>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä»ä»¥ä¸‹ä¸‰ä¸ªç¾å›½ç¾¤ä½“ä¸­æå–å‡ºæ¶ˆæ¯ï¼š</p>\n<ul>\n<li><strong>å¸æœºï¼š</strong> å¹´é¾„å¤§äº 16 å²</li>\n<li><strong>å…¥ä¼äººå‘˜ï¼š</strong> ç”·æ€§ï¼Œ18 ~ 25 å²</li>\n<li><strong>é£è¡Œå‘˜ï¼ˆç‰¹æŒ‡å•†ä¸šé£è¡Œå‘˜ï¼‰ï¼š</strong> 23 ~ 65 å²</li>\n</ul>\n<p>æˆ‘ä»¬å°†è¦å®ç°ä¸Šè¿°éœ€æ±‚ï¼Œä¸è¿‡ä¸æ˜¯é€šè¿‡æ‰“ç”µè¯æˆ–è€…å‘é‚®ä»¶ï¼Œè€Œæ˜¯åœ¨æ§åˆ¶å°è¾“å‡ºä¿¡æ¯ã€‚ä¿¡æ¯å†…å®¹åŒ…æ‹¬å§“åã€å¹´é¾„å’Œè”ç³»æ–¹å¼ï¼ˆä¾‹å¦‚é‚®ä»¶åœ°å€æˆ–è€…ç”µè¯å·ç ï¼‰</p>\n<h2 id=\"Person-ç±»\"><a href=\"#Person-ç±»\" class=\"headerlink\" title=\"Person ç±»\"></a>Person ç±»</h2><p>å±æ€§å®šä¹‰å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Person</span> </span>&#123;</span><br><span class=\"line\"> <span class=\"keyword\">private</span> String givenName;</span><br><span class=\"line\"> <span class=\"keyword\">private</span> String surName;</span><br><span class=\"line\"> <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> age;</span><br><span class=\"line\"> <span class=\"keyword\">private</span> Gender gender;</span><br><span class=\"line\"> <span class=\"keyword\">private</span> String eMail;</span><br><span class=\"line\"> <span class=\"keyword\">private</span> String phone;</span><br><span class=\"line\"> <span class=\"keyword\">private</span> String address;</span><br><span class=\"line\"> </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Person</code>ç±»é€šè¿‡<code>Builder</code>æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œä½¿ç”¨<code>createShortList</code>æ¥åˆ›å»ºäººå‘˜åˆ—è¡¨ã€‚å¦‚ä¸‹æ–¹ä»£ç ç‰‡æ®µæ‰€ç¤ºã€‚<strong>æ³¨æ„ï¼š</strong> ä»¥ä¸‹æ‰€æœ‰æ ·ä¾‹ä»£ç éƒ½å¯ä»¥åœ¨æœ¬èŠ‚æœ«å°¾ç»™å‡ºçš„ NetBeans å·¥ç¨‹é‡Œæ‰¾åˆ°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> List&lt;Person&gt; <span class=\"title\">createShortList</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">  List&lt;Person&gt; people = <span class=\"keyword\">new</span> ArrayList&lt;&gt;();</span><br><span class=\"line\">  </span><br><span class=\"line\">  people.add(</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Person.Builder()</span><br><span class=\"line\">          .givenName(<span class=\"string\">\"Bob\"</span>)</span><br><span class=\"line\">          .surName(<span class=\"string\">\"Baker\"</span>)</span><br><span class=\"line\">          .age(<span class=\"number\">21</span>)</span><br><span class=\"line\">          .gender(Gender.MALE)</span><br><span class=\"line\">          .email(<span class=\"string\">\"bob.baker@example.com\"</span>)</span><br><span class=\"line\">          .phoneNumber(<span class=\"string\">\"201-121-4678\"</span>)</span><br><span class=\"line\">          .address(<span class=\"string\">\"44 4th St, Smallville, KS 12333\"</span>)</span><br><span class=\"line\">          .build() </span><br><span class=\"line\">    );</span><br><span class=\"line\">  </span><br><span class=\"line\">  people.add(</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Person.Builder()</span><br><span class=\"line\">          .givenName(<span class=\"string\">\"Jane\"</span>)</span><br><span class=\"line\">          .surName(<span class=\"string\">\"Doe\"</span>)</span><br><span class=\"line\">          .age(<span class=\"number\">25</span>)</span><br><span class=\"line\">          .gender(Gender.FEMALE)</span><br><span class=\"line\">          .email(<span class=\"string\">\"jane.doe@example.com\"</span>)</span><br><span class=\"line\">          .phoneNumber(<span class=\"string\">\"202-123-4678\"</span>)</span><br><span class=\"line\">          .address(<span class=\"string\">\"33 3rd St, Smallville, KS 12333\"</span>)</span><br><span class=\"line\">          .build() </span><br><span class=\"line\">    );</span><br><span class=\"line\">  </span><br><span class=\"line\">  people.add(</span><br><span class=\"line\">    <span class=\"keyword\">new</span> Person.Builder()</span><br><span class=\"line\">          .givenName(<span class=\"string\">\"John\"</span>)</span><br><span class=\"line\">          .surName(<span class=\"string\">\"Doe\"</span>)</span><br><span class=\"line\">          .age(<span class=\"number\">25</span>)</span><br><span class=\"line\">          .gender(Gender.MALE)</span><br><span class=\"line\">          .email(<span class=\"string\">\"john.doe@example.com\"</span>)</span><br><span class=\"line\">          .phoneNumber(<span class=\"string\">\"202-123-4678\"</span>)</span><br><span class=\"line\">          .address(<span class=\"string\">\"33 3rd St, Smallville, KS 12333\"</span>)</span><br><span class=\"line\">          .build()</span><br><span class=\"line\">  );</span><br></pre></td></tr></table></figure>\n<h2 id=\"ç¬¬ä¸€æ¬¡å°è¯•\"><a href=\"#ç¬¬ä¸€æ¬¡å°è¯•\" class=\"headerlink\" title=\"ç¬¬ä¸€æ¬¡å°è¯•\"></a>ç¬¬ä¸€æ¬¡å°è¯•</h2><p>æœ‰äº†ä¸Šé¢çš„<code>Person</code>ç±»ï¼ŒåŠ ä¸Šå®šä¹‰å¥½çš„æ£€ç´¢æ¡ä»¶ï¼Œä½ å¯ä»¥å†™ä¸€ä¸ª<code>RoboContact</code>ç±»ã€‚ä¸€ä¸ªå¯ä»¥å‚è€ƒçš„å†™æ³•ä¸­å®šä¹‰äº†æ¯ç§ä½¿ç”¨åœºæ™¯é‡Œçš„æ–¹æ³•ï¼š</p>\n<p><code>RoboContactMethods.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example.lambda;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> MikeW</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RoboContactMethods</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">callDrivers</span><span class=\"params\">(List&lt;Person&gt; pl)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p.getAge() &gt;= <span class=\"number\">16</span>)&#123;</span><br><span class=\"line\">        roboCall(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">emailDraftees</span><span class=\"params\">(List&lt;Person&gt; pl)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p.getAge() &gt;= <span class=\"number\">18</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">25</span> &amp;&amp; p.getGender() == Gender.MALE)&#123;</span><br><span class=\"line\">        roboEmail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">mailPilots</span><span class=\"params\">(List&lt;Person&gt; pl)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p.getAge() &gt;= <span class=\"number\">23</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">65</span>)&#123;</span><br><span class=\"line\">        roboMail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboCall</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Calling \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getPhone());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboEmail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"EMailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getEmail());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboMail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Mailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getAddress());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œä¸Šé¢åˆ—å‡ºçš„æ–¹æ³•è¯´æ˜äº†å¯¹ä¸åŒå¯¹è±¡é‡‡å–çš„è¡Œä¸ºï¼ˆæ‰“ç”µè¯ã€å‘ç”µå­é‚®ä»¶ã€å‘å®ä½“é‚®ä»¶ï¼‰ã€‚å¯ä»¥æ¸…æ¥šåœ°çœ‹å‡ºè¿‡æ»¤æ¡ä»¶å’Œé‡‡å–çš„è¡Œä¸ºã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡å­˜åœ¨ä¸€äº›ç¼ºé™·ï¼š</p>\n<ul>\n<li>æ²¡æœ‰è·µè¡Œ DRY åŸåˆ™<ul>\n<li>æ¯ä¸€ä¸ªæ–¹æ³•éƒ½æ˜¯é‡å¤çš„æ¨¡ç‰ˆ</li>\n<li>å¿…é¡»ä¸ºæ¯ä¸ªæ–¹æ³•é‡å†™è¿‡æ»¤æ¡ä»¶</li>\n</ul>\n</li>\n<li>æ¯ä¸ªç”¨æˆ·åœºæ™¯éƒ½éœ€è¦å®ç°å¤§é‡çš„æ–¹æ³•ï¼ˆæ¯”å¦‚ä»Šå¤©æ˜¯æ‰“ç”µè¯ç»™å…¥ä¼äººå‘˜ï¼Œå‘é‚®ä»¶ç»™é£è¡Œå‘˜ï¼›æ˜å¤©å¯èƒ½å°±æ˜¯æ‰“ç”µè¯ç»™é£è¡Œå‘˜ï¼Œå‘é‚®ä»¶ç»™å…¥ä¼äººå‘˜ï¼‰</li>\n<li>ä»£ç å‘†æ¿ã€‚å¦‚æœè¿‡æ»¤æ¡ä»¶å‘ç”Ÿæ”¹å˜ï¼Œä¸å¾—ä¸æ”¹åŠ¨å¤§é‡ä»£ç ã€‚å› æ­¤ï¼Œè¿™æ®µä»£ç æ˜¯éš¾ä»¥ç»´æŠ¤çš„ã€‚</li>\n</ul>\n<h2 id=\"é‡æ„è¿™äº›æ–¹æ³•\"><a href=\"#é‡æ„è¿™äº›æ–¹æ³•\" class=\"headerlink\" title=\"é‡æ„è¿™äº›æ–¹æ³•\"></a>é‡æ„è¿™äº›æ–¹æ³•</h2><p>å¦‚ä½•ä¿®å¤è¿™ä¸ªç±»ï¼Ÿå¯ä»¥ä»è¿‡æ»¤æ¡ä»¶å…¥æ‰‹ã€‚å¦‚æœå¯ä»¥æŠŠè¿‡æ»¤è°ƒä»·æå–å‡ºä¸€ä¸ªç‹¬ç«‹çš„æ–¹æ³•ï¼Œå°†ä¼šæœ‰ä¸€äº›æå‡ã€‚</p>\n<p><code>RoboContactMethods2.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example.lambda;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> MikeW</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RoboContactMethods2</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">callDrivers</span><span class=\"params\">(List&lt;Person&gt; pl)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isDriver(p))&#123;</span><br><span class=\"line\">        roboCall(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">emailDraftees</span><span class=\"params\">(List&lt;Person&gt; pl)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isDraftee(p))&#123;</span><br><span class=\"line\">        roboEmail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">mailPilots</span><span class=\"params\">(List&lt;Person&gt; pl)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (isPilot(p))&#123;</span><br><span class=\"line\">        roboMail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isDriver</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p.getAge() &gt;= <span class=\"number\">16</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isDraftee</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p.getAge() &gt;= <span class=\"number\">18</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">25</span> &amp;&amp; p.getGender() == Gender.MALE;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isPilot</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> p.getAge() &gt;= <span class=\"number\">23</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">65</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboCall</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Calling \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getPhone());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboEmail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"EMailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getEmail());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboMail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Mailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getAddress());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¯”èµ·ä¸Šä¸€ä¸ªä¾‹å­ï¼Œè¿™æ¬¡çš„è¿‡æ»¤æ¡ä»¶è¢«å°è£…åœ¨å•ç‹¬çš„æ–¹æ³•é‡Œã€‚è¿™äº›åˆ¤æ–­ç”¨çš„ä»£ç å¯ä»¥å¤ç”¨ï¼Œéœ€æ±‚å˜æ›´æ—¶ä¹Ÿé¿å…äº†åœ¨ç±»é‡Œé¢è¿›è¡Œå¤§èŒƒå›´çš„ä¿®æ”¹ã€‚ç„¶è€Œï¼Œä»ç„¶å­˜åœ¨ç€å¤§é‡é‡å¤ä»£ç ï¼Œä»¥åŠå¿…éœ€ä¸ºæ¯ç§è”ç³»æ–¹æ³•ï¼ˆæ‰“ç”µè¯ã€å‘ç”µå­é‚®ä»¶ã€å‘é‚®ä»¶ï¼‰å•ç‹¬å†™ä¸€ä¸ªæ–¹æ³•ã€‚æ˜¯å¦æœ‰æ›´å¥½çš„å°†è¿‡æ»¤æ¡ä»¶ä¼ é€’ç»™è¿™äº›è”ç³»æ–¹æ³•çš„æ–¹å¼ï¼Ÿ</p>\n<h1 id=\"åŒ¿åå†…éƒ¨ç±»\"><a href=\"#åŒ¿åå†…éƒ¨ç±»\" class=\"headerlink\" title=\"åŒ¿åå†…éƒ¨ç±»\"></a>åŒ¿åå†…éƒ¨ç±»</h1><p>åœ¨ Lambda è¡¨è¾¾å¼é—®ä¸–ä¹‹å‰ï¼Œå¯é‡‡ç”¨åŒ¿åå†…éƒ¨ç±»çš„æ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯å£°æ˜ä¸€ä¸ªå…·æœ‰è¿”å›å¸ƒå°”å€¼çš„<code>test</code>æ–¹æ³•çš„<code>MyTest.java</code>ç±»ã€‚æŠŠè¿‡æ»¤æ¡ä»¶åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">MyTest</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(T t)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ›´æ–°åçš„æ¨¡æ‹Ÿè”ç³»æ–¹å¼ç±»å¦‚ä¸‹ï¼š</p>\n<p><code>RobocontactAnon.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RoboContactAnon</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">phoneContacts</span><span class=\"params\">(List&lt;Person&gt; pl, MyTest&lt;Person&gt; aTest)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (aTest.test(p))&#123;</span><br><span class=\"line\">        roboCall(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">emailContacts</span><span class=\"params\">(List&lt;Person&gt; pl, MyTest&lt;Person&gt; aTest)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (aTest.test(p))&#123;</span><br><span class=\"line\">        roboEmail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">mailContacts</span><span class=\"params\">(List&lt;Person&gt; pl, MyTest&lt;Person&gt; aTest)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (aTest.test(p))&#123;</span><br><span class=\"line\">        roboMail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboCall</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Calling \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getPhone());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboEmail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"EMailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getEmail());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboMail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Mailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getAddress());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œæ— ç–‘æ˜¯æœ‰äº†ä¸€äº›ä¼˜åŒ–ï¼Œå› ä¸ºåªéœ€è¦ 3 ä¸ªç”¨äºè¿›è¡Œè”ç³»çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œåœ¨å®é™…è¿›è¡Œè°ƒç”¨æ—¶ï¼Œä»£ç ä¼šæœ‰ä¸€äº›ä¸‘é™‹ã€‚çœ‹ä¸‹é¢çš„æµ‹è¯•ä»£ç ï¼š</p>\n<p><code>RoboCallTest03.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example.lambda;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> MikeW</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RoboCallTest03</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    List&lt;Person&gt; pl = Person.createShortList();</span><br><span class=\"line\">    RoboContactAnon robo = <span class=\"keyword\">new</span> RoboContactAnon();</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n==== Test 03 ====\"</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Calling all Drivers ===\"</span>);</span><br><span class=\"line\">    robo.phoneContacts(pl, </span><br><span class=\"line\">        <span class=\"keyword\">new</span> MyTest&lt;Person&gt;()&#123;</span><br><span class=\"line\">          <span class=\"meta\">@Override</span></span><br><span class=\"line\">          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> p.getAge() &gt;=<span class=\"number\">16</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Emailing all Draftees ===\"</span>);</span><br><span class=\"line\">    robo.emailContacts(pl, </span><br><span class=\"line\">        <span class=\"keyword\">new</span> MyTest&lt;Person&gt;()&#123;</span><br><span class=\"line\">          <span class=\"meta\">@Override</span></span><br><span class=\"line\">          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> p.getAge() &gt;= <span class=\"number\">18</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">25</span> &amp;&amp; p.getGender() == Gender.MALE;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Mail all Pilots ===\"</span>);</span><br><span class=\"line\">    robo.mailContacts(pl, </span><br><span class=\"line\">        <span class=\"keyword\">new</span> MyTest&lt;Person&gt;()&#123;</span><br><span class=\"line\">          <span class=\"meta\">@Override</span></span><br><span class=\"line\">          <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> p.getAge() &gt;= <span class=\"number\">23</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">65</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™æ˜¯â€œå‚ç›´â€ä»£ç çš„ä¸€ä¸ªå…¸å‹æ¡ˆä¾‹ã€‚è¿™æ ·çš„ä»£ç éš¾ä»¥é˜…è¯»ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¿…é¡»ä¸ºæ¯ä¸€ç§ä½¿ç”¨åœºæ™¯å•ç‹¬å†™è‡ªå®šä¹‰çš„è¿‡æ»¤æ¡ä»¶ã€‚</p>\n<h2 id=\"Lambda-è¡¨è¾¾å¼è§£åƒæ„\"><a href=\"#Lambda-è¡¨è¾¾å¼è§£åƒæ„\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼è§£åƒæ„\"></a>Lambda è¡¨è¾¾å¼è§£åƒæ„</h2><p>Lambda è¡¨è¾¾å¼å¯ä»¥è§£å†³ç›®å‰ä¸ºæ­¢æˆ‘ä»¬é‡åˆ°çš„ä¸€åˆ‡é—®é¢˜ã€‚ä¸è¿‡ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ç‚¹åˆ«çš„ã€‚</p>\n<p><code>java.uitl.function</code></p>\n<p>åœ¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œ<code>MyTest</code>å‡½æ•°æ¥å£å°†åŒ¿åå†…éƒ¨ç±»ä¼ é€’ç»™æ–¹æ³•è°ƒç”¨ã€‚ç„¶è€Œï¼Œå†™ä¸€ä¸ªæ¥å£å¹¶ä¸æ˜¯å¿…éœ€çš„ã€‚Java SE 8 æä¾›äº†<code>java.util.function</code>åŒ…ï¼Œå…¶ä¸­æœ‰ä¸€ç³»åˆ—æ ‡å‡†çš„å‡½æ•°å€Ÿå£ã€‚åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œ<code>Predicate</code>æ¥å£ç¬¦åˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚</p>\n<blockquote>\n<p><code>Predict</code>æ„ä¸ºâ€œè°“è¯­ï¼Œæ–­è¨€â€ï¼Œå³åˆ¤æ–­æ¡ä»¶çš„æ„æ€</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Predicate</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">test</span><span class=\"params\">(T t)</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>test</code>æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ³›å‹ç±»ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„è¿‡æ»¤åœºæ™¯ã€‚ä¸‹é¢æ˜¯æ¨¡æ‹Ÿè”ç³»æ–¹å¼ç±»çš„æœ€ç»ˆç‰ˆæœ¬ã€‚</p>\n<p><code>RobocontactsLambda.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example.lambda;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.function.Predicate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> MikeW</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RoboContactLambda</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">phoneContacts</span><span class=\"params\">(List&lt;Person&gt; pl, Predicate&lt;Person&gt; pred)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (pred.test(p))&#123;</span><br><span class=\"line\">        roboCall(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">emailContacts</span><span class=\"params\">(List&lt;Person&gt; pl, Predicate&lt;Person&gt; pred)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (pred.test(p))&#123;</span><br><span class=\"line\">        roboEmail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">mailContacts</span><span class=\"params\">(List&lt;Person&gt; pl, Predicate&lt;Person&gt; pred)</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (pred.test(p))&#123;</span><br><span class=\"line\">        roboMail(p);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;  </span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboCall</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Calling \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getPhone());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboEmail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"EMailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getEmail());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">roboMail</span><span class=\"params\">(Person p)</span></span>&#123;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Mailing \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\" age \"</span> + p.getAge() + <span class=\"string\">\" at \"</span> + p.getAddress());</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨è¿™ç§å†™æ³•é‡Œï¼Œåªéœ€è¦ä¸‰ä¸ªæ–¹æ³•ç”¨æ¥æ¨¡æ‹Ÿè”ç³»å€™é€‰äººã€‚Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°è¢«ä¼ é€’ç»™æ–¹æ³•ï¼Œç”¨æ¥è¿‡æ»¤éœ€è¦è”ç³»çš„äººå‘˜ã€‚</p>\n<h2 id=\"å‚ç›´é—®é¢˜è¿åˆƒè€Œè§£\"><a href=\"#å‚ç›´é—®é¢˜è¿åˆƒè€Œè§£\" class=\"headerlink\" title=\"å‚ç›´é—®é¢˜è¿åˆƒè€Œè§£\"></a>å‚ç›´é—®é¢˜è¿åˆƒè€Œè§£</h2><p>Lambda è¡¨è¾¾å¼è§£å†³äº†å‚ç›´ä»£ç çš„é—®é¢˜ï¼Œå¹¶ä¸”æ›´å®¹æ˜“é‡ç”¨ã€‚æ¥çœ‹çœ‹æ–°çš„ä½¿ç”¨äº† Lambda è¡¨è¾¾å¼çš„æµ‹è¯•ç±»ã€‚</p>\n<p><code>RoboCallTest04.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example.lambda;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.List;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.function.Predicate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> MikeW</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RoboCallTest04</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span></span>&#123; </span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Person&gt; pl = Person.createShortList();</span><br><span class=\"line\">    RoboContactLambda robo = <span class=\"keyword\">new</span> RoboContactLambda();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Predicates</span></span><br><span class=\"line\">    Predicate&lt;Person&gt; allDrivers = p -&gt; p.getAge() &gt;= <span class=\"number\">16</span>;</span><br><span class=\"line\">    Predicate&lt;Person&gt; allDraftees = p -&gt; p.getAge() &gt;= <span class=\"number\">18</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">25</span> &amp;&amp; p.getGender() == Gender.MALE;</span><br><span class=\"line\">    Predicate&lt;Person&gt; allPilots = p -&gt; p.getAge() &gt;= <span class=\"number\">23</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">65</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n==== Test 04 ====\"</span>);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Calling all Drivers ===\"</span>);</span><br><span class=\"line\">    robo.phoneContacts(pl, allDrivers);</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Emailing all Draftees ===\"</span>);</span><br><span class=\"line\">    robo.emailContacts(pl, allDraftees);</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Mail all Pilots ===\"</span>);</span><br><span class=\"line\">    robo.mailContacts(pl, allPilots);</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Mix and match becomes easy</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Mail all Draftees ===\"</span>);</span><br><span class=\"line\">    robo.mailContacts(pl, allDraftees);  </span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Call all Pilots ===\"</span>);</span><br><span class=\"line\">    robo.phoneContacts(pl, allPilots);    </span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ä¸ºæ¯ç»„è”ç³»äººï¼ˆallDrivers, allDraftees, allPilotsï¼‰å£°æ˜äº†ä¸€ä¸ªæ–­è¨€ï¼ˆ<code>Predicate</code>ï¼‰ã€‚ä½ å¯ä»¥å°†ä»»ä½•ä¸€ä¸ªæ–­è¨€ä¼ ç»™æ¨¡æ‹Ÿè”ç³»çš„æ–¹æ³•ã€‚ä»£ç ç®€æ´æ˜“äºé˜…è¯»ï¼Œå¹¶ä¸”å‡å°‘äº†é‡å¤ä»£ç ã€‚</p>\n<h2 id=\"èµ„æºä¸‹è½½-1\"><a href=\"#èµ„æºä¸‹è½½-1\" class=\"headerlink\" title=\"èµ„æºä¸‹è½½\"></a>èµ„æºä¸‹è½½</h2><p>æœ¬å°èŠ‚ä¸­çš„ NetBeans å·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ°</p>\n<p><a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/examples/RoboCallExample.zip\" target=\"_blank\" rel=\"noopener\">RoboCallExample.zip</a></p>\n<h1 id=\"java-util-functionåŒ…\"><a href=\"#java-util-functionåŒ…\" class=\"headerlink\" title=\"java.util.functionåŒ…\"></a><code>java.util.function</code>åŒ…</h1><p>ä¸ŠèŠ‚ä»‹ç»çš„<code>Predicate</code>å¹¶ä¸æ˜¯ Java SE 8 æ‰€æä¾›çš„å”¯ä¸€å‡½æ•°æ¥å£ã€‚å¼€å‘è€…å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—çš„æ ‡å‡†æ¥å£å¸®åŠ©å¼€å‘ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/181101_lambda/6_heroes_more.jpg\" alt=\"åƒæˆ‘è¿™ä¹ˆåŠçš„\" title=\"\">\n                </div>\n                <div class=\"image-caption\">åƒæˆ‘è¿™ä¹ˆåŠçš„</div>\n            </figure>\n<ul>\n<li><code>Predicate</code>ï¼šå‚æ•°å¯¹è±¡çš„æŸä¸ªå±æ€§</li>\n<li><code>Consumer</code>ï¼šå¯¹å‚æ•°å¯¹è±¡æ‰§è¡Œçš„æŸç§æ“ä½œ</li>\n<li><code>Function</code>ï¼šæŠŠ T è½¬æ¢ä¸º U</li>\n<li><code>Supplieer</code>ï¼šæä¾›ä¸€ä¸ª T çš„å®ä¾‹ï¼ˆä¾‹å¦‚å·¥å‚ï¼‰</li>\n<li><code>UnaryOperator</code>ï¼šä¸€ä¸ªå•å…ƒè¿ç®—ç¬¦ï¼ŒT -&gt; T</li>\n<li><code>BinaryOperator</code>ï¼šä¸€ä¸ªåŒå…ƒè¿ç®—ç¬¦ï¼Œ(T, T) -&gt; T</li>\n</ul>\n<p>æ­¤å¤–ï¼Œå¾ˆå¤šæ¥å£éƒ½æœ‰åŸå§‹å½¢å¼ï¼ˆç±»ä¼¼ä¸Šæ–‡ä¸­çš„<code>Predicate</code>å’Œäººå·¥è¿‡æ»¤å™¨è¿™ç§æ¯”è¾ƒï¼‰ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£ Lambda è¡¨è¾¾å¼ã€‚</p>\n<h2 id=\"ä¸œæ–¹å–åæ³•ä»¥åŠæ–¹æ³•è°ƒç”¨\"><a href=\"#ä¸œæ–¹å–åæ³•ä»¥åŠæ–¹æ³•è°ƒç”¨\" class=\"headerlink\" title=\"ä¸œæ–¹å–åæ³•ä»¥åŠæ–¹æ³•è°ƒç”¨\"></a>ä¸œæ–¹å–åæ³•ä»¥åŠæ–¹æ³•è°ƒç”¨</h2><p>åœ¨å†™ä¸Šé¢ä¸€ä¸ªä¾‹å­æ—¶ï¼Œæˆ‘è®¤ä¸º<code>Person</code>ç±»åº”å½“å…·å¤‡ä¸€ä¸ªçµæ´»çš„è¾“å‡ºç³»ç»Ÿã€‚ä¸€ä¸ªéœ€æ±‚æ˜¯ä»¥è¥¿æ–¹å’Œä¸œæ–¹ä¸¤ç§å‘½åæ–¹å¼æ‰“å°å‡ºåå­—ã€‚åœ¨è¥¿æ–¹ï¼Œååœ¨å‰ï¼Œå§“åœ¨åã€‚åœ¨ä¸œæ–¹åˆ™æ°å¥½ç›¸åã€‚</p>\n<h2 id=\"è€å¼å†™æ³•çš„ä¾‹å­\"><a href=\"#è€å¼å†™æ³•çš„ä¾‹å­\" class=\"headerlink\" title=\"è€å¼å†™æ³•çš„ä¾‹å­\"></a>è€å¼å†™æ³•çš„ä¾‹å­</h2><p>è¿™æ˜¯åœ¨æœªä½¿ç”¨ Lambda è¡¨è¾¾å¼æ—¶çš„å†™æ³•</p>\n<p><code>Person.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printWesternName</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  System.out.println(<span class=\"string\">\"\\nName: \"</span> + <span class=\"keyword\">this</span>.getGivenName() + <span class=\"string\">\" \"</span> + <span class=\"keyword\">this</span>.getSurName() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">           <span class=\"string\">\"Age: \"</span> + <span class=\"keyword\">this</span>.getAge() + <span class=\"string\">\"  \"</span> + <span class=\"string\">\"Gender: \"</span> + <span class=\"keyword\">this</span>.getGender() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">           <span class=\"string\">\"EMail: \"</span> + <span class=\"keyword\">this</span>.getEmail() + <span class=\"string\">\"\\n\"</span> + </span><br><span class=\"line\">           <span class=\"string\">\"Phone: \"</span> + <span class=\"keyword\">this</span>.getPhone() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">           <span class=\"string\">\"Address: \"</span> + <span class=\"keyword\">this</span>.getAddress());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">printEasternName</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">  System.out.println(<span class=\"string\">\"\\nName: \"</span> + <span class=\"keyword\">this</span>.getSurName() + <span class=\"string\">\" \"</span> + <span class=\"keyword\">this</span>.getGivenName() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">           <span class=\"string\">\"Age: \"</span> + <span class=\"keyword\">this</span>.getAge() + <span class=\"string\">\"  \"</span> + <span class=\"string\">\"Gender: \"</span> + <span class=\"keyword\">this</span>.getGender() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">           <span class=\"string\">\"EMail: \"</span> + <span class=\"keyword\">this</span>.getEmail() + <span class=\"string\">\"\\n\"</span> + </span><br><span class=\"line\">           <span class=\"string\">\"Phone: \"</span> + <span class=\"keyword\">this</span>.getPhone() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">           <span class=\"string\">\"Address: \"</span> + <span class=\"keyword\">this</span>.getAddress());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä½ éœ€è¦ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ‰“å°è¥¿æ–¹å‘½åã€ä¸œæ–¹å‘½å</p>\n<h2 id=\"Functionæ¥å£\"><a href=\"#Functionæ¥å£\" class=\"headerlink\" title=\"Functionæ¥å£\"></a><code>Function</code>æ¥å£</h2><p><code>Function</code>æ¥å£é€‚ç”¨äºè¿™ä¸ªé—®é¢˜ã€‚å®ƒåªæœ‰ä¸€ä¸ªåä¸º<code>apply</code>çš„æ–¹æ³•ï¼Œæ–¹æ³•ç­¾åå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> R <span class=\"title\">apply</span><span class=\"params\">(T t)</span></span>&#123; &#125;</span><br></pre></td></tr></table></figure>\n<p>å®ƒæ¥æ”¶ä¸€ä¸ªæ³›å‹ T çš„å‚æ•°ï¼Œç„¶åè¿”å›ä¸€ä¸ª R çš„å¯¹è±¡ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œä¼ å…¥<code>Person</code>ç±»å‹ï¼Œè¿”å›<code>String</code>ç±»å‹ã€‚ä¸€ä¸ªæ›´åŠ çµæ´»çš„æ‰“å°æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p><code>Person.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">printCuston</span><span class=\"params\">(Function &lt;Person, String&gt; f)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> f.apply(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™å¯çœŸç®€å•ã€‚æ–¹æ³•æ¥æ”¶ä¸€ä¸ª<code>Function</code>å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚<code>apply</code>æ–¹æ³•é€šè¿‡ä¸€ä¸ª Lambda è¡¨è¾¾å¼è¿”å›<code>Person</code>å¯¹è±¡çš„ä¿¡æ¯ã€‚</p>\n<p><code>Function</code>æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Ÿå¦‚ä¸‹æ˜¯æµ‹è¯•çš„æ ·ä¾‹ä»£ç ã€‚</p>\n<p><code>NameTestNew.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NameTestNew</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n==== NameTestNew02 ===\"</span>);</span><br><span class=\"line\">    </span><br><span class=\"line\">    List&lt;Person&gt; list1 = Person.createShortList();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Print Custom First Name and e-mail</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"===Custom List===\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Person person:list1)&#123;</span><br><span class=\"line\">        System.out.println(</span><br><span class=\"line\">            person.printCustom(p -&gt; <span class=\"string\">\"Name: \"</span> + p.getGivenName() + <span class=\"string\">\" EMail: \"</span> + p.getEmail())</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Define Western and Eastern Lambdas</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    Function&lt;Person, String&gt; westernStyle = p -&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">\"\\nName: \"</span> + p.getGivenName() + <span class=\"string\">\" \"</span> + p.getSurName() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">             <span class=\"string\">\"Age: \"</span> + p.getAge() + <span class=\"string\">\"  \"</span> + <span class=\"string\">\"Gender: \"</span> + p.getGender() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">             <span class=\"string\">\"EMail: \"</span> + p.getEmail() + <span class=\"string\">\"\\n\"</span> + </span><br><span class=\"line\">             <span class=\"string\">\"Phone: \"</span> + p.getPhone() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">             <span class=\"string\">\"Address: \"</span> + p.getAddress();</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    </span><br><span class=\"line\">    Function&lt;Person, String&gt; easternStyle =  p -&gt; <span class=\"string\">\"\\nName: \"</span> + p.getSurName() + <span class=\"string\">\" \"</span> </span><br><span class=\"line\">            + p.getGivenName() + <span class=\"string\">\"\\n\"</span> + <span class=\"string\">\"Age: \"</span> + p.getAge() + <span class=\"string\">\"  \"</span> + </span><br><span class=\"line\">            <span class=\"string\">\"Gender: \"</span> + p.getGender() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">            <span class=\"string\">\"EMail: \"</span> + p.getEmail() + <span class=\"string\">\"\\n\"</span> + </span><br><span class=\"line\">            <span class=\"string\">\"Phone: \"</span> + p.getPhone() + <span class=\"string\">\"\\n\"</span> +</span><br><span class=\"line\">            <span class=\"string\">\"Address: \"</span> + p.getAddress();   </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Print Western List</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n===Western List===\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Person person:list1)&#123;</span><br><span class=\"line\">        System.out.println(</span><br><span class=\"line\">            person.printCustom(westernStyle)</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Print Eastern List</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n===Eastern List===\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Person person:list1)&#123;</span><br><span class=\"line\">        System.out.println(</span><br><span class=\"line\">            person.printCustom(easternStyle)</span><br><span class=\"line\">        );</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç¬¬ä¸€ä¸ªå¾ªç¯åªæ˜¯æ‰“å°å‡ºåå­—å’Œç”µå­é‚®ä»¶åœ°å€ã€‚ä¸è¿‡å¯ä»¥æŠŠä»»ä½•çš„è¡¨è¾¾å¼ä¼ ç»™<code>printCuston</code>æ–¹æ³•ã€‚ä¸œæ–¹å‘½åæ³•å’Œè¥¿æ–¹å‘½åæ³•ä½¿ç”¨ Lambda è¡¨è¾¾å¼å®šä¹‰ï¼Œå¹¶ä¸”ä¿å­˜åœ¨å˜é‡ä¸­ã€‚è¿™äº›å˜é‡æ¥ä¸‹æ¥è¢«ä¼ å…¥æœ€åçš„ä¸¤ä¸ªå¾ªç¯ã€‚å¯ä»¥å¾ˆå®¹æ˜“åœ°å°† Lambda<br>è¡¨è¾¾å¼åˆå¹¶æˆä¸º<code>Map</code>ï¼Œç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚Lambda è¡¨è¾¾å¼æä¾›äº†æ˜¾è‘—çš„çµæ´»æ€§ã€‚</p>\n<h2 id=\"æ ·ä¾‹è¾“å‡º\"><a href=\"#æ ·ä¾‹è¾“å‡º\" class=\"headerlink\" title=\"æ ·ä¾‹è¾“å‡º\"></a>æ ·ä¾‹è¾“å‡º</h2><p>ä¸‹é¢æ˜¯ç¨‹åºçš„æ ·ä¾‹è¾“å‡ºã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">==== NameTestNew02 ===</span><br><span class=\"line\">===Custom List===</span><br><span class=\"line\">Name: Bob EMail: bob.baker@example.com</span><br><span class=\"line\">Name: Jane EMail: jane.doe@example.com</span><br><span class=\"line\">Name: John EMail: john.doe@example.com</span><br><span class=\"line\">Name: James EMail: james.johnson@example.com</span><br><span class=\"line\">Name: Joe EMail: joebob.bailey@example.com</span><br><span class=\"line\">Name: Phil EMail: phil.smith@examp;e.com</span><br><span class=\"line\">Name: Betty EMail: betty.jones@example.com</span><br><span class=\"line\"></span><br><span class=\"line\">===Western List===</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Bob Baker</span><br><span class=\"line\">Age: 21  Gender: MALE</span><br><span class=\"line\">EMail: bob.baker@example.com</span><br><span class=\"line\">Phone: 201-121-4678</span><br><span class=\"line\">Address: 44 4th St, Smallville, KS 12333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Jane Doe</span><br><span class=\"line\">Age: 25  Gender: FEMALE</span><br><span class=\"line\">EMail: jane.doe@example.com</span><br><span class=\"line\">Phone: 202-123-4678</span><br><span class=\"line\">Address: 33 3rd St, Smallville, KS 12333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: John Doe</span><br><span class=\"line\">Age: 25  Gender: MALE</span><br><span class=\"line\">EMail: john.doe@example.com</span><br><span class=\"line\">Phone: 202-123-4678</span><br><span class=\"line\">Address: 33 3rd St, Smallville, KS 12333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: James Johnson</span><br><span class=\"line\">Age: 45  Gender: MALE</span><br><span class=\"line\">EMail: james.johnson@example.com</span><br><span class=\"line\">Phone: 333-456-1233</span><br><span class=\"line\">Address: 201 2nd St, New York, NY 12111</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Joe Bailey</span><br><span class=\"line\">Age: 67  Gender: MALE</span><br><span class=\"line\">EMail: joebob.bailey@example.com</span><br><span class=\"line\">Phone: 112-111-1111</span><br><span class=\"line\">Address: 111 1st St, Town, CA 11111</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Phil Smith</span><br><span class=\"line\">Age: 55  Gender: MALE</span><br><span class=\"line\">EMail: phil.smith@examp;e.com</span><br><span class=\"line\">Phone: 222-33-1234</span><br><span class=\"line\">Address: 22 2nd St, New Park, CO 222333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Betty Jones</span><br><span class=\"line\">Age: 85  Gender: FEMALE</span><br><span class=\"line\">EMail: betty.jones@example.com</span><br><span class=\"line\">Phone: 211-33-1234</span><br><span class=\"line\">Address: 22 4th St, New Park, CO 222333</span><br><span class=\"line\"></span><br><span class=\"line\">===Eastern List===</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Baker Bob</span><br><span class=\"line\">Age: 21  Gender: MALE</span><br><span class=\"line\">EMail: bob.baker@example.com</span><br><span class=\"line\">Phone: 201-121-4678</span><br><span class=\"line\">Address: 44 4th St, Smallville, KS 12333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Doe Jane</span><br><span class=\"line\">Age: 25  Gender: FEMALE</span><br><span class=\"line\">EMail: jane.doe@example.com</span><br><span class=\"line\">Phone: 202-123-4678</span><br><span class=\"line\">Address: 33 3rd St, Smallville, KS 12333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Doe John</span><br><span class=\"line\">Age: 25  Gender: MALE</span><br><span class=\"line\">EMail: john.doe@example.com</span><br><span class=\"line\">Phone: 202-123-4678</span><br><span class=\"line\">Address: 33 3rd St, Smallville, KS 12333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Johnson James</span><br><span class=\"line\">Age: 45  Gender: MALE</span><br><span class=\"line\">EMail: james.johnson@example.com</span><br><span class=\"line\">Phone: 333-456-1233</span><br><span class=\"line\">Address: 201 2nd St, New York, NY 12111</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Bailey Joe</span><br><span class=\"line\">Age: 67  Gender: MALE</span><br><span class=\"line\">EMail: joebob.bailey@example.com</span><br><span class=\"line\">Phone: 112-111-1111</span><br><span class=\"line\">Address: 111 1st St, Town, CA 11111</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Smith Phil</span><br><span class=\"line\">Age: 55  Gender: MALE</span><br><span class=\"line\">EMail: phil.smith@examp;e.com</span><br><span class=\"line\">Phone: 222-33-1234</span><br><span class=\"line\">Address: 22 2nd St, New Park, CO 222333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Jones Betty</span><br><span class=\"line\">Age: 85  Gender: FEMALE</span><br><span class=\"line\">EMail: betty.jones@example.com</span><br><span class=\"line\">Phone: 211-33-1234</span><br><span class=\"line\">Address: 22 4th St, New Park, CO 222333</span><br></pre></td></tr></table></figure>\n<h2 id=\"èµ„æºä¸‹è½½-2\"><a href=\"#èµ„æºä¸‹è½½-2\" class=\"headerlink\" title=\"èµ„æºä¸‹è½½\"></a>èµ„æºä¸‹è½½</h2><p>æœ¬å°èŠ‚ä¸­çš„ NetBeans å·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ°</p>\n<p><a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/examples/LambdaFunctionExamples.zip\" target=\"_blank\" rel=\"noopener\">LambdaFunctionExamples.zip</a></p>\n<h1 id=\"Lambda-è¡¨è¾¾å¼å’Œé›†åˆ\"><a href=\"#Lambda-è¡¨è¾¾å¼å’Œé›†åˆ\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼å’Œé›†åˆ\"></a>Lambda è¡¨è¾¾å¼å’Œé›†åˆ</h1><p>ä¸ŠèŠ‚ä»‹ç»äº†<code>Function</code>æ¥å£å’Œç¤ºä¾‹è¯­æ³•ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†çœ‹åˆ° Lambda è¡¨è¾¾å¼å¦‚ä½•æå‡<code>Collections</code>ç±»ã€‚</p>\n<h2 id=\"Lambda-è¡¨è¾¾å¼å’Œé›†åˆ-1\"><a href=\"#Lambda-è¡¨è¾¾å¼å’Œé›†åˆ-1\" class=\"headerlink\" title=\"Lambda è¡¨è¾¾å¼å’Œé›†åˆ\"></a>Lambda è¡¨è¾¾å¼å’Œé›†åˆ</h2><p>åˆ°ç›®å‰ä¸ºæ­¢çš„ä¾‹å­ä¸­ï¼Œé›†åˆç±»å‡ºç°çš„å¾ˆå°‘ã€‚ç„¶è€Œï¼Œç›¸å½“ä¸€éƒ¨åˆ† Lambda è¡¨è¾¾å¼çš„ç‰¹å¾æ”¹å˜äº†æˆ‘ä»¬ä½¿ç”¨é›†åˆç±»çš„æ–¹å¼ã€‚æœ¬èŠ‚ä»‹ç»å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>\n<h2 id=\"ç±»å¢å¼º\"><a href=\"#ç±»å¢å¼º\" class=\"headerlink\" title=\"ç±»å¢å¼º\"></a>ç±»å¢å¼º</h2><p>å¸æœºã€é£è¡Œå‘˜ã€å…¥ä¼äººå‘˜çš„è¿‡æ»¤æ¡ä»¶è¢«åŒ…è£…è¿›äº†<code>SearchCriteria</code>ç±»ã€‚</p>\n<p><code>SearchCriteria.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.example.lambda;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.HashMap;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.Map;</span><br><span class=\"line\"><span class=\"keyword\">import</span> java.util.function.Predicate;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@author</span> MikeW</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">SearchCriteria</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Map&lt;String, Predicate&lt;Person&gt;&gt; searchMap = <span class=\"keyword\">new</span> HashMap&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">SearchCriteria</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>();</span><br><span class=\"line\">    initSearchMap();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initSearchMap</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Predicate&lt;Person&gt; allDrivers = p -&gt; p.getAge() &gt;= <span class=\"number\">16</span>;</span><br><span class=\"line\">    Predicate&lt;Person&gt; allDraftees = p -&gt; p.getAge() &gt;= <span class=\"number\">18</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">25</span> &amp;&amp; p.getGender() == Gender.MALE;</span><br><span class=\"line\">    Predicate&lt;Person&gt; allPilots = p -&gt; p.getAge() &gt;= <span class=\"number\">23</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">65</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    searchMap.put(<span class=\"string\">\"allDrivers\"</span>, allDrivers);</span><br><span class=\"line\">    searchMap.put(<span class=\"string\">\"allDraftees\"</span>, allDraftees);</span><br><span class=\"line\">    searchMap.put(<span class=\"string\">\"allPilots\"</span>, allPilots);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Predicate&lt;Person&gt; <span class=\"title\">getCriteria</span><span class=\"params\">(String PredicateName)</span> </span>&#123;</span><br><span class=\"line\">    Predicate&lt;Person&gt; target;</span><br><span class=\"line\"></span><br><span class=\"line\">    target = searchMap.get(PredicateName);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (target == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      System.out.println(<span class=\"string\">\"Search Criteria not found... \"</span>);</span><br><span class=\"line\">      System.exit(<span class=\"number\">1</span>);</span><br><span class=\"line\">    </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">      </span><br><span class=\"line\">    <span class=\"keyword\">return</span> target;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> SearchCriteria <span class=\"title\">getInstance</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> SearchCriteria();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>æœ¬ä¾‹çš„ç¼–ç ä¸æ˜¯å¾ˆè§„èŒƒï¼Œä½œä¸ºå‚æ•°çš„<code>PredicateName</code>åº”è¯¥å†™ä¸º<code>predicateName</code>æ›´ä¸¥è°¨ã€‚</p>\n</blockquote>\n<p>è¿™ä¸ªç±»ä¿å­˜äº†åŸºäº<code>Predicate</code>çš„æœç´¢è¿‡æ»¤æ¡ä»¶ï¼Œä½ å¯ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ä½¿ç”¨å®ƒä»¬ã€‚</p>\n<h2 id=\"å¾ªç¯\"><a href=\"#å¾ªç¯\" class=\"headerlink\" title=\"å¾ªç¯\"></a>å¾ªç¯</h2><p>é¦–å…ˆç™»åœºçš„æ˜¯ä»»ä½•é›†åˆç±»éƒ½å¯ä»¥ä½¿ç”¨çš„<code>forEach</code>æ–¹æ³•ã€‚è¿™é‡Œæ˜¯ä¸€äº›æ‰“å°å‡º<code>Person</code>åˆ—è¡¨çš„ä¾‹å­ã€‚</p>\n<p><code>Test01ForEach.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test01ForEach</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    List&lt;Person&gt; pl = Person.createShortList();</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Western Phone List ===\"</span>);</span><br><span class=\"line\">    pl.forEach( p -&gt; p.printWesternName() );</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Eastern Phone List ===\"</span>);</span><br><span class=\"line\">    pl.forEach(Person::printEasternName);</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Custom Phone List ===\"</span>);</span><br><span class=\"line\">    pl.forEach(p -&gt; &#123; System.out.println(p.printCustom(r -&gt; <span class=\"string\">\"Name: \"</span> + r.getGivenName() + <span class=\"string\">\" EMail: \"</span> + r.getEmail())); &#125;);</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¾‹ 1 å±•ç¤ºäº†ä¸€ä¸ª Lambda è¡¨è¾¾å¼ï¼Œå®ƒè°ƒç”¨<code>printWesternName</code>æ–¹æ³•æ‰“å°å‡ºåˆ—è¡¨é‡Œæ¯ä¸ªäººçš„åå­—ã€‚ä¾‹ 2 å±•ç¤ºäº†ä¸€ä¸ª <strong>æ–¹æ³•è°ƒç”¨</strong>ã€‚å½“å·²ç»å­˜åœ¨å¯¹ç±»å¯¹è±¡æ“ä½œçš„æ–¹æ³•æ—¶ï¼Œè¿™ç§å†™æ³•å¯ä»¥ä»£æ›¿é€šç”¨ Lambda è¡¨è¾¾å¼çš„å†™æ³•ã€‚æœ€åï¼Œä¾‹ 3 å±•ç¤ºäº†<code>printCustom</code>æ–¹æ³•ä¹Ÿå¯ä»¥åœ¨è¿™ç§åœºæ™¯ä¸‹ä½¿ç”¨ã€‚æ³¨æ„ Lambda è¡¨è¾¾å¼åµŒå¥—æ—¶ï¼Œå˜é‡åçš„ç»†å°å·®åˆ«ã€‚</p>\n<p>ä½ å¯ä»¥ç”¨è¿™ç§æ–¹å¼éå†ä»»ä½•é›†åˆã€‚åŸºç¡€ç»“æ„ä¸å¢å¼ºå‹<code>for</code>è®­è¯ç±»ä¼¼ã€‚ç„¶è€Œï¼Œä¸€äº›å¢å¼ºå‹æœºåˆ¶èƒ½å¸¦æ¥å¾ˆå¤šå¥½å¤„ã€‚</p>\n<h2 id=\"é“¾å¼è°ƒç”¨ä¸è¿‡æ»¤å™¨\"><a href=\"#é“¾å¼è°ƒç”¨ä¸è¿‡æ»¤å™¨\" class=\"headerlink\" title=\"é“¾å¼è°ƒç”¨ä¸è¿‡æ»¤å™¨\"></a>é“¾å¼è°ƒç”¨ä¸è¿‡æ»¤å™¨</h2><p>é™¤äº†éå†é›†åˆå†…å…ƒç´ ï¼Œä½ è¿˜å¯ä»¥å°†æ–¹æ³•ç»„è£…æˆé“¾å¼ã€‚ç¬¬ä¸€ä¸ªè¦è®²è§£çš„æ–¹æ³•æ˜¯<code>filter</code>ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª<code>Predicate</code>ç±»å‹çš„å‚æ•°ã€‚</p>\n<p>ä¸‹é¢ä¾‹å­åœ¨è¿‡æ»¤å…ƒç´ åï¼Œéå†åˆ—è¡¨ã€‚</p>\n<p><code>Test02Filter.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test02Filter</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    List&lt;Person&gt; pl = Person.createShortList();</span><br><span class=\"line\">    </span><br><span class=\"line\">    SearchCriteria search = SearchCriteria.getInstance();</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Western Pilot Phone List ===\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    pl.stream().filter(search.getCriteria(<span class=\"string\">\"allPilots\"</span>))</span><br><span class=\"line\">      .forEach(Person::printWesternName);</span><br><span class=\"line\">    </span><br><span class=\"line\">   </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Eastern Draftee Phone List ===\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    pl.stream().filter(search.getCriteria(<span class=\"string\">\"allDraftees\"</span>))</span><br><span class=\"line\">      .forEach(Person::printEasternName);</span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå¾ªç¯å±•ç¤ºäº†<code>List</code>å¦‚ä½•åŸºäºè¿‡æ»¤æ¡ä»¶è¢«è¿‡æ»¤ã€‚æ§åˆ¶å°è¾“å‡ºå¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">=== Eastern Draftee Phone List ===</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Baker Bob</span><br><span class=\"line\">Age: 21  Gender: MALE</span><br><span class=\"line\">EMail: bob.baker@example.com</span><br><span class=\"line\">Phone: 201-121-4678</span><br><span class=\"line\">Address: 44 4th St, Smallville, KS 12333</span><br><span class=\"line\"></span><br><span class=\"line\">Name: Doe John</span><br><span class=\"line\">Age: 25  Gender: MALE</span><br><span class=\"line\">EMail: john.doe@example.com</span><br><span class=\"line\">Phone: 202-123-4678</span><br><span class=\"line\">Address: 33 3rd St, Smallville, KS 12333</span><br></pre></td></tr></table></figure>\n<h3 id=\"å·ç‚¹å„¿æ‡’\"><a href=\"#å·ç‚¹å„¿æ‡’\" class=\"headerlink\" title=\"å·ç‚¹å„¿æ‡’\"></a>å·ç‚¹å„¿æ‡’</h3><p>è¿™äº›ç‰¹å¾è™½ç„¶æœ‰ä»·å€¼ï¼Œä½†æ˜¯åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªå®Œç¾çš„<code>for</code>å¾ªç¯è¯­æ³•çš„æƒ…å†µä¸‹ï¼ŒæŠŠå®ƒä»¬å¼•å…¥é›†åˆç±»çš„æ„ä¹‰ä½•åœ¨ï¼Ÿé€šè¿‡å°†é›†åˆæ“ä½œå½’çº³æˆåº“ï¼ŒJava å¼€å‘è€…å¯ä»¥åœ¨ä»£ç ä¸Šè¿›è¡Œæ›´å¤šçš„ä¼˜åŒ–ã€‚é¦–å…ˆçœ‹ä¸€å¯¹åè¯è§£é‡Šã€‚</p>\n<ul>\n<li><strong>æ‡’æƒ°</strong>ï¼šåœ¨ç¼–ç¨‹é¢†åŸŸï¼Œæ‡’æƒ°æ„å‘³ç€åªå¤„ç†ä½ éœ€è¦å¤„ç†çš„å¯¹è±¡ã€‚åœ¨å…ˆå‰çš„ä¾‹å­ä¸­ï¼Œæœ€åä¸€ä¸ªå¾ªç¯æ˜¯â€œæ‡’æƒ°â€çš„ï¼Œå› ä¸ºå®ƒåªéå†äº†<code>List</code>è¢«è¿‡æ»¤å‡ºæ¥çš„ä¸¤ä¸ª<code>Person</code>å¯¹è±¡ã€‚è¿™æ ·çš„ä»£ç æ•ˆç‡æ›´é«˜ï¼Œå› ä¸ºæœ€ååªå¤„ç†äº†ä¸¤ä¸ªå¯¹è±¡ï¼Œï¼ˆè€Œéæ•´ä¸ªåˆ—è¡¨ï¼‰ã€‚</li>\n<li><strong>ä¸»åŠ¨æ€§</strong>ï¼šå¤„ç†åˆ—è¡¨ä¸­æ¯ä¸ªå…ƒç´ çš„ä»£ç è¢«ç§°ä¸ºâ€œä¸»åŠ¨æ€§å¼ºâ€çš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¢å¼ºå‹<code>for</code>å¾ªç¯éå†æ•´ä¸ªåˆ—è¡¨ï¼Œåªä¸ºå¤„ç† 2 ä¸ªå…ƒç´ ï¼Œè¿™ç§æ–¹å¼è¢«è®¤ä¸ºâ€œä¸»åŠ¨æ€§â€å¾ˆå¼ºã€‚</li>\n</ul>\n<h3 id=\"streamæ–¹æ³•\"><a href=\"#streamæ–¹æ³•\" class=\"headerlink\" title=\"streamæ–¹æ³•\"></a><code>stream</code>æ–¹æ³•</h3><p>åœ¨å…ˆå‰çš„ä»£ç æ ·ä¾‹ä¸­ï¼Œä½ ä¼šå‘ç°åœ¨å¯¹åˆ—è¡¨è¿›è¡Œè¿‡æ»¤å’Œéå†ä¹‹å‰ï¼Œæˆ‘ä»¬è°ƒç”¨äº†<code>stream</code>æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶<code>Collection</code>ç±»å‹çš„å‚æ•°ï¼Œè¿”å›<code>java.util.stream.Stream</code>ç±»å‹çš„ç»“æœã€‚ä¸€ä¸ª<code>Stream</code>å¯¹è±¡æ„å‘³ç€ä¸€ä¸ªå…ƒç´ åºåˆ—ï¼Œä½ å¯ä»¥åœ¨ä¸Šé¢è¿›è¡Œé“¾å¼æ“ä½œã€‚é»˜è®¤åœ°ï¼Œä¸€æ—¦å…ƒç´ è¢«æ¶ˆè´¹äº†ï¼Œä»–ä»¬å°±ä¸å†å¤„äº Stream ä¸­ã€‚æ­¤å¤–ï¼Œéšç€è°ƒç”¨æ–¹æ³•ä¸åŒï¼Œ<code>Stream</code>å¯ä»¥ç”¨åœ¨ä¸²è¡Œï¼ˆé»˜è®¤ï¼‰æˆ–è€…å¹¶è¡Œçš„åœºæ™¯ä¸­ã€‚æœ¬èŠ‚æœ«å°¾å°†ä»‹ç»ä¸€ä¸ªå¹¶è¡Œçš„åœºæ™¯ã€‚</p>\n<h2 id=\"å˜æ›´ä¸è¿ç®—ç»“æœ\"><a href=\"#å˜æ›´ä¸è¿ç®—ç»“æœ\" class=\"headerlink\" title=\"å˜æ›´ä¸è¿ç®—ç»“æœ\"></a>å˜æ›´ä¸è¿ç®—ç»“æœ</h2><p>å¦‚åˆšæ‰æ‰€æåˆ°çš„ï¼Œ<code>Stream</code>åœ¨ä½¿ç”¨å®Œæˆåå°±ä¼šè¢«ä¸¢å¼ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡<code>Stream</code>æ¥å¯¹åˆ—è¡¨ä¸­çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³è¦ä¿å­˜é“¾å¼å¤„ç†åçš„å…ƒç´ å‘¢ï¼Ÿä½ å¯ä»¥å°†å®ƒä»¬å­˜å…¥ä¸€ä¸ªæ–°çš„é›†åˆã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p>\n<p><code>Test03toList.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test03toList</span> </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    </span><br><span class=\"line\">    List&lt;Person&gt; pl = Person.createShortList();</span><br><span class=\"line\">    </span><br><span class=\"line\">    SearchCriteria search = SearchCriteria.getInstance();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Make a new list after filtering.</span></span><br><span class=\"line\">    List&lt;Person&gt; pilotList = pl</span><br><span class=\"line\">            .stream()</span><br><span class=\"line\">            .filter(search.getCriteria(<span class=\"string\">\"allPilots\"</span>))</span><br><span class=\"line\">            .collect(Collectors.toList());</span><br><span class=\"line\">    </span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n=== Western Pilot Phone List ===\"</span>);</span><br><span class=\"line\">    pilotList.forEach(Person::printWesternName);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>collect</code>æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯<code>Collector</code>ç±»ã€‚<code>Collector</code>ç±»ç”¨äºä»å¤„ç†æµçš„ç»“æœä¸­ç”Ÿæˆä¸€ä¸ª<code>List</code>æˆ–è€…<code>Set</code>ã€‚ä¸Šä¾‹ä»‹ç»äº†å¦‚ä½•å°†åˆ—è¡¨è¿‡æ»¤åçš„ç»“æœå­˜æˆ<code>List</code>ã€‚</p>\n<h2 id=\"ä½¿ç”¨mapè¿›è¡Œè®¡ç®—\"><a href=\"#ä½¿ç”¨mapè¿›è¡Œè®¡ç®—\" class=\"headerlink\" title=\"ä½¿ç”¨mapè¿›è¡Œè®¡ç®—\"></a>ä½¿ç”¨<code>map</code>è¿›è¡Œè®¡ç®—</h2><p><code>map</code>æ–¹æ³•é€šå¸¸å’Œ<code>filter</code>æ­é…ä½¿ç”¨ã€‚è¿™ä¸ªæ–¹æ³•å»é™¤ç±»é‡Œé¢çš„æŸä¸ªå±æ€§ï¼Œç„¶åå¯¹å®ƒè¿›è¡Œæ“ä½œã€‚å¦‚ä¸‹ä»£ç åŸºäºå¹´é¾„å­—æ®µè¿›è¡Œäº†ä¸€ç³»åˆ—è®¡ç®—ã€‚</p>\n<p><code>Test04Map.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Test04Map</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">    List&lt;Person&gt; pl = Person.createShortList();</span><br><span class=\"line\">    </span><br><span class=\"line\">    SearchCriteria search = SearchCriteria.getInstance();</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Calc average age of pilots old style</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"== Calc Old Style ==\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">int</span> sum = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> count = <span class=\"number\">0</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Person p:pl)&#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (p.getAge() &gt;= <span class=\"number\">23</span> &amp;&amp; p.getAge() &lt;= <span class=\"number\">65</span> )&#123;</span><br><span class=\"line\">        sum = sum + p.getAge();</span><br><span class=\"line\">        count++;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">long</span> average = sum / count;</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Total Ages: \"</span> + sum);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Average Age: \"</span> + average);</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">// Get sum of ages</span></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"\\n== Calc New Style ==\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">long</span> totalAge = pl</span><br><span class=\"line\">            .stream()</span><br><span class=\"line\">            .filter(search.getCriteria(<span class=\"string\">\"allPilots\"</span>))</span><br><span class=\"line\">            .mapToInt(p -&gt; p.getAge())</span><br><span class=\"line\">            .sum();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Get average of ages</span></span><br><span class=\"line\">    OptionalDouble averageAge = pl</span><br><span class=\"line\">            .parallelStream()</span><br><span class=\"line\">            .filter(search.getCriteria(<span class=\"string\">\"allPilots\"</span>))</span><br><span class=\"line\">            .mapToDouble(p -&gt; p.getAge())</span><br><span class=\"line\">            .average();</span><br><span class=\"line\"></span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Total Ages: \"</span> + totalAge);</span><br><span class=\"line\">    System.out.println(<span class=\"string\">\"Average Age: \"</span> + averageAge.getAsDouble());    </span><br><span class=\"line\">    </span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">== Calc Old Style ==</span><br><span class=\"line\">Total Ages: 150</span><br><span class=\"line\">Average Age: 37</span><br><span class=\"line\"></span><br><span class=\"line\">== Calc New Style ==</span><br><span class=\"line\">Total Ages: 150</span><br><span class=\"line\">Average Age: 37.5</span><br></pre></td></tr></table></figure>\n<p>è¿™æ®µä»£ç è®¡ç®—åˆ—è¡¨ä¸­æ‰€æœ‰é£è¡Œå‘˜çš„å¹³å‡å¹´é¾„ã€‚ç¬¬ä¸€ä¸ªå¾ªç¯å±•ç¤ºäº†è€å¼ç”¨<code>for</code>å¾ªç¯çš„å†™æ³•ã€‚ç¬¬äºŒä¸ªå¾ªç¯ä½¿ç”¨äº†<code>map</code>æ–¹æ³•è·å–ä¸²æµä¸­çš„æ¯ä¸ªäººçš„å¹´é¾„ã€‚æ³¨æ„<code>totalAge</code>æ˜¯ä¸€ä¸ª<code>long</code>ç±»å‹å¯¹è±¡ã€‚<code>map</code>æ–¹æ³•è¿”å›ä¸€ä¸ª<code>IntStream</code>å¯¹è±¡ï¼Œå¯ä»¥å¯¹å…¶è°ƒç”¨<code>sum</code>æ–¹æ³•ï¼Œè¿™ä¼šè¿”å›ä¸€ä¸ª<code>long</code>å€¼ã€‚</p>\n<p><strong>æ³¨æ„ï¼š</strong> ç¬¬äºŒæ¬¡è®¡ç®—å¹³å‡å¹´é¾„æ—¶ï¼Œå†å¯¹æ‰€æœ‰å€¼æ±‚å’Œæ˜¯å¤šä½™çš„ã€‚ç„¶è€Œï¼Œä¸Šä¾‹ä¸­è¿™æ ·å†™æ˜¯ä¸ºäº†å±•ç¤º<code>sum</code>å‡½æ•°çš„è°ƒç”¨æ–¹æ³•ã€‚</p>\n<p>æœ€åä¸€ä¸ªå¾ªç¯åŸºäºä¸²æµè®¡ç®—å¹³å‡å¹´é¾„ã€‚æ³¨æ„<code>parallelStream</code>æ–¹æ³•ï¼Œå®ƒæ˜¯ Java 8 ä¸­æµå¼è®¡ç®—çš„å¹¶è¡Œç‰ˆæœ¬ï¼Œè¿”å›ç»“æœä¹Ÿä¸æ˜¯ç®€å•çš„<code>double</code>ï¼Œè€Œæ˜¯<code>OptionalDouble</code>ã€‚</p>\n<blockquote>\n<p><code>parallelStream</code>æä¾›äº†ä¸€ç§å¹¶å‘å¤„ç†é›†åˆå…ƒç´ çš„æ–¹æ³•ï¼Œä»¥ä¸Šæ–‡çš„åˆ—è¡¨æ±‚å¹³å‡å€¼ä¸ºä¾‹ï¼Œå¦‚æœä¸€å…±æœ‰ 100 ä¸ªå…ƒç´ ï¼Œ<code>parallelStream</code>ä¼šå°†ä»»åŠ¡åˆ†ä¸º n ä»½ï¼ˆn æ˜¯çº¿ç¨‹æ± çš„å¤§å°ï¼Œé»˜è®¤ä¸º CPU æ ¸æ•°ï¼‰ï¼Œæ¯ä»½ä»»åŠ¡äº¤ç”±å•ç‹¬ä¸€ä¸ªçº¿ç¨‹å¤„ç†ï¼Œæœ€ç»ˆå†æ±‡æ€»è¿™äº›ä»»åŠ¡çš„ç»“æœï¼Œå¾—å‡ºå¹³å‡å€¼</p>\n</blockquote>\n<h2 id=\"èµ„æºä¸‹è½½-3\"><a href=\"#èµ„æºä¸‹è½½-3\" class=\"headerlink\" title=\"èµ„æºä¸‹è½½\"></a>èµ„æºä¸‹è½½</h2><p>æœ¬å°èŠ‚ä¸­çš„NetBeanså·¥ç¨‹æ ·ä¾‹ä»£ç å¯ä»¥åœ¨ä¸‹é¢ä¸‹è½½åˆ°</p>\n<p><a href=\"https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/Lambda-QuickStart/examples/LambdaCollectionExamples.zip\" target=\"_blank\" rel=\"noopener\">LambdaCollectionExamples.zip</a></p>\n<h1 id=\"æ€»ç»“\"><a href=\"#æ€»ç»“\" class=\"headerlink\" title=\"æ€»ç»“\"></a>æ€»ç»“</h1><p>åœ¨æœ¬ç¯‡æŒ‡å—ä¸­ï¼Œä½ å­¦ä¼šäº†ä½¿ç”¨ä»¥ä¸‹æŠ€èƒ½ï¼š</p>\n<ul>\n<li>Java åŒ¿åå†…éƒ¨ç±»</li>\n<li>ä½¿ç”¨ Java SE 8 çš„ Lambda è¡¨è¾¾å¼ä»£æ›¿åŒ¿åå†…éƒ¨ç±»</li>\n<li>Lambda è¡¨è¾¾å¼çš„è¯­æ³•</li>\n<li>é€šè¿‡<code>Predicate</code>æ¥å£åœ¨åˆ—è¡¨ä¸­æŸ¥æ‰¾</li>\n<li>é€šè¿‡<code>Function</code>æ¥å£å¤„ç†å¯¹è±¡ï¼Œå¹¶å¾—åˆ°ä¸€ä¸ªæ–°ç±»å‹çš„å¯¹è±¡</li>\n<li>Java SE 8 ä¸­æ–°å¢çš„æ”¯æŒ Lambda è¡¨è¾¾å¼çš„é›†åˆç‰¹æ€§</li>\n</ul>\n<h2 id=\"æ›´å¤šèµ„æº\"><a href=\"#æ›´å¤šèµ„æº\" class=\"headerlink\" title=\"æ›´å¤šèµ„æº\"></a>æ›´å¤šèµ„æº</h2><p>å¦‚æœä½ æƒ³è¦äº†è§£æ›´å¤šå…³äº Lambda è¡¨è¾¾å¼å’Œ Java SE 8 çš„ä¿¡æ¯ï¼Œå‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š</p>\n<ul>\n<li><a href=\"http://openjdk.java.net/projects/jdk8/\" target=\"_blank\" rel=\"noopener\">Java 8</a></li>\n<li><a href=\"http://openjdk.java.net/projects/lambda/\" target=\"_blank\" rel=\"noopener\">Project Lambda</a></li>\n<li><a href=\"http://cr.openjdk.java.net/~briangoetz/lambda/lambda-state-4.html\" target=\"_blank\" rel=\"noopener\">State of the Lambda</a></li>\n<li><a href=\"http://cr.openjdk.java.net/~briangoetz/lambda/sotc3.html\" target=\"_blank\" rel=\"noopener\">State of the Lambda Collections</a></li>\n<li><a href=\"http://www.youtube.com/watch?v=bzO5GSujdqI\" target=\"_blank\" rel=\"noopener\">Jump-Starting Lambda JavaOne 2012(You Tube)</a></li>\n<li>è‹¥æƒ³è¦å­¦ä¹ æ›´å¤šå…³äº Java çš„å†…å®¹ï¼Œè¯·ç‚¹å‡»<a href=\"http://www.oracle.com/goto/oll\" target=\"_blank\" rel=\"noopener\">Oracle Learning Library</a></li>\n</ul>\n<h2 id=\"è‘—è€…\"><a href=\"#è‘—è€…\" class=\"headerlink\" title=\"è‘—è€…\"></a>è‘—è€…</h2><ul>\n<li>è¯¾ç¨‹ç»„é•¿ï¼šMichael Williams</li>\n<li>QAï¼šJuan Quesada Nunez</li>\n<li>ç¿»è¯‘ï¼šæç£Š</li>\n</ul>\n","categories":[],"tags":["Java"]},{"title":"é¦™å¸…çš„åŒ—å¤§é‡‘èå­¦è¯¾ï¼ˆäºŒï¼‰é‡‘èæœºæ„","url":"https://lilei.pro/2018/09/23/finance-Xiangshuai-week02/","content":"<h1 id=\"è´§å¸ä¸ä¿¡ç”¨\"><a href=\"#è´§å¸ä¸ä¿¡ç”¨\" class=\"headerlink\" title=\"è´§å¸ä¸ä¿¡ç”¨\"></a>è´§å¸ä¸ä¿¡ç”¨</h1><p>é“¶è¡Œä½“ç³»åœ¨æ•´ä¸ªç¤¾ä¼šç»æµä¸­ï¼Œå¤„äºæ¢çº½åœ°ä½ã€‚å›½å®¶é€šè¿‡é“¶è¡Œä½“ç³»è¿›è¡Œä¿¡ç”¨åˆ›é€ ï¼Œè°ƒæ§ç»æµï¼Œè¿™æ˜¯ç°ä»£ç»æµè¿è¡Œçš„ä¸€ä¸ªæœ€é‡è¦ç‰¹å¾ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180923_finance/é“¶è¡Œè´§å¸ä¿¡ç”¨æ‰©å¼ æœºåˆ¶.png\" alt=\"é“¶è¡Œè´§å¸ä¿¡ç”¨æ‰©å¼ æœºåˆ¶\" title=\"\">\n                </div>\n                <div class=\"image-caption\">é“¶è¡Œè´§å¸ä¿¡ç”¨æ‰©å¼ æœºåˆ¶</div>\n            </figure>\n<h2 id=\"è´§å¸çš„èƒŒåæ˜¯å›½å®¶ä¿¡ç”¨\"><a href=\"#è´§å¸çš„èƒŒåæ˜¯å›½å®¶ä¿¡ç”¨\" class=\"headerlink\" title=\"è´§å¸çš„èƒŒåæ˜¯å›½å®¶ä¿¡ç”¨\"></a>è´§å¸çš„èƒŒåæ˜¯å›½å®¶ä¿¡ç”¨</h2><p>è´§å¸çš„çœŸåå«åšâ€œæ³•å®šè´§å¸â€ï¼Œä¹Ÿå°±æ˜¯å›½å®¶èµ‹äºˆæŸä¸ªé“¶è¡Œï¼ˆæ¯”å¦‚ä¸­å¤®é“¶è¡Œï¼‰çš„ä¸€ç§ç‰¹è®¸æƒåŠ›è€Œå‘è¡Œçš„ï¼Œå®ƒèƒŒåçš„å…³é”®æ˜¯å›½å®¶ä¿¡ç”¨ã€‚å¸ƒé›·é¡¿æ£®æ—ä¼šè®®ä¸Šç¡®ç«‹äº†ç¾å…ƒåœ¨å›½é™…è´§å¸ä½“ç³»ä¸­â€œé”šâ€çš„åœ°ä½ï¼Œç¾å…ƒæˆä¸ºäº†å›½é™…è®¡ä»·ç»“ç®—çš„å‚¨å¤‡è´§å¸ï¼Œå˜æˆäº†å›½é™…è´§å¸ä½“ç³»çš„ä¸­å¿ƒã€‚ç°ä»£çš„è´§å¸æ˜¯ä¿¡ç”¨è´§å¸ï¼Œè´§å¸ä»·å€¼çš„æµ®åŠ¨å®Œå…¨å–å†³äºä¸€ä¸ªå›½å®¶çš„å®åŠ›å’Œå…¶ä»–å›½å®¶å¯¹äºè¿™ä¸ªå›½å®¶çš„ä¿¡å¿ƒã€‚</p>\n<p>æ‰€ä»¥è¯´æ²¡æœ‰å›½å®¶ä¿¡ç”¨åŠ æŒçš„è´§å¸ï¼Œå³ä½¿å¯ä»¥å®Œæˆè®¡ä»·ã€å‚¨è—ã€äº¤æ¢çš„åŠŸèƒ½ï¼Œå®ƒä¹Ÿä¸èƒ½å¤Ÿæˆä¸ºé€šç”¨çš„è´§å¸â€”â€”æ¯”ç‰¹å¸æœ€æ ¹æœ¬çš„ç¼ºé™·æ¥æºäºæ­¤ï¼Œåƒæ¯”ç‰¹å¸è¿™æ ·å»ä¸­å¿ƒåŒ–çš„è´§å¸ï¼Œè¦å–ä»£å„å›½å¤®è¡Œå‘è¡Œçš„æ³•å®šè´§å¸ï¼Œè¿˜æ˜¯è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ã€‚</p>\n<h2 id=\"å­˜æ¬¾å‡†å¤‡é‡‘ç‡å’Œâ€œé™å‡†â€\"><a href=\"#å­˜æ¬¾å‡†å¤‡é‡‘ç‡å’Œâ€œé™å‡†â€\" class=\"headerlink\" title=\"å­˜æ¬¾å‡†å¤‡é‡‘ç‡å’Œâ€œé™å‡†â€\"></a>å­˜æ¬¾å‡†å¤‡é‡‘ç‡å’Œâ€œé™å‡†â€</h2><p>å‰é¢è®²åˆ°é“¶è¡Œä¸å›½å®¶å¼ºå¼ºè”åˆï¼Œå…±åŒé“¸é€ äº†å½“ä»£ä¿¡ç”¨ç¤¾ä¼šã€‚å›½å®¶é€šè¿‡é“¶è¡Œä½“ç³»ï¼Œè°ƒæ§æ•´ä¸ªç¤¾ä¼šçš„ä¿¡ç”¨è§„æ¨¡å’Œç»æµå†·çƒ­ã€‚æˆ‘ä»¬ç»å¸¸åœ¨ç”µè§†æ–°é—»é‡Œå¬åˆ°â€œé™æ¯â€ã€â€œé™å‡†â€è¿™æ ·çš„è¯æ±‡ï¼Œâ€œæ¯â€æŒ‡çš„æ˜¯åŸºç¡€åˆ©ç‡ï¼Œâ€œå‡†â€æŒ‡çš„æ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡ã€‚</p>\n<h3 id=\"ä»€ä¹ˆæ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡\"><a href=\"#ä»€ä¹ˆæ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡\"></a>ä»€ä¹ˆæ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡</h3><p>å‚¨æˆ·è¦æŠŠé’±å­˜åˆ°é“¶è¡Œé‡Œï¼Œé“¶è¡Œå†æ”¾è´·å‡ºå»ï¼Œç„¶åå½¢æˆä¼ä¸šã€ä¸ªäººçš„å„ç§è´·æ¬¾ï¼Œæ”¯æŒæ¶ˆè´¹ç”Ÿäº§ã€‚ä½†æ˜¯ï¼Œ<strong>æ¯å¤©éƒ½æœ‰ä¸åŒçš„å‚¨æˆ·æœ‰æç°çš„è¦æ±‚ï¼Œæ‰€ä»¥é“¶è¡Œå¿…é¡»ç•™å­˜ä¸€å°éƒ¨åˆ†é’±å‡ºæ¥åº”ä»˜å‚¨æˆ·æç°çš„éœ€æ±‚ï¼Œè¿™éƒ¨åˆ†é’±å°±å«åšå­˜æ¬¾å‡†å¤‡é‡‘ï¼Œè¿™ä¸ªç•™å­˜çš„æ¯”ä¾‹å°±å«å­˜æ¬¾å‡†å¤‡é‡‘ç‡ã€‚</strong></p>\n<h3 id=\"å­˜æ¬¾å‡†å¤‡é‡‘ç‡å¦‚ä½•ç”Ÿæ•ˆçš„å‘¢ï¼Ÿ\"><a href=\"#å­˜æ¬¾å‡†å¤‡é‡‘ç‡å¦‚ä½•ç”Ÿæ•ˆçš„å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"å­˜æ¬¾å‡†å¤‡é‡‘ç‡å¦‚ä½•ç”Ÿæ•ˆçš„å‘¢ï¼Ÿ\"></a>å­˜æ¬¾å‡†å¤‡é‡‘ç‡å¦‚ä½•ç”Ÿæ•ˆçš„å‘¢ï¼Ÿ</h3><p>å‡å¦‚å°æ˜æœ‰ 100 å—é’±ï¼Œä»–å¯ä»¥æŠŠè¿™ 100 å—é’±å­˜åˆ°é“¶è¡Œé‡Œï¼Œå½“æ—¶çš„å­˜æ¬¾å‡†å¤‡é‡‘ç‡æ˜¯ 10%ï¼Œæ„å‘³ç€é“¶è¡Œå¿…é¡»é¢„ç•™å‡º 100 å—é’±çš„ 10%ï¼Œä¹Ÿå°±æ˜¯ 10 å—é’±çš„ç°é‡‘ï¼Œæ¥é¢„å¤‡åº”ä»˜å°æ˜çš„æç°éœ€æ±‚ã€‚å»æ‰è¿™ 10% åï¼Œé“¶è¡Œå¯ä»¥æŠŠå‰©ä¸‹çš„ 90 å—é’±é€šè¿‡è´·æ¬¾çš„æ–¹å¼å‘æ”¾ç»™å°çº¢ã€‚é‚£ä¹ˆå¸‚é¢ä¸Šä¸€å…±æœ‰å¤šå°‘è´§å¸æµé€šçš„ï¼Œæ˜¯ 100ï¼ˆå°æ˜ï¼‰+ 90ï¼ˆå°çº¢ï¼‰= 190 å…ƒã€‚å°çº¢åŒæ ·å¯ä»¥é€‰æ‹©æŠŠè¿™ 90 å—é’±å­˜è¿›é“¶è¡Œï¼Œé“¶è¡Œåˆ™åœ¨ä¿ç•™äº† 90 * 10% = 9 å…ƒçš„å­˜æ¬¾å‡†å¤‡é‡‘åï¼Œå°†å‰©ä½™ 81 å…ƒå‘æ”¾å‡ºå»â€¦â€¦æœ€ç»ˆè®¡ç®—ä¸‹æ¥ï¼Œå°æ˜æŒæœ‰çš„ 100 å…ƒé’±ï¼Œç»è¿‡å±‚å±‚è½¬åŒ–ï¼ŒæµåŠ¨åˆ°ç¤¾ä¼šä¸­çš„é’±å¯ä»¥è¾¾åˆ° 1000 å…ƒï¼Œæ•´æ•´æ‰©å¼ äº† 10 å€ã€‚è¿™å°±æ˜¯å­˜æ¬¾å‡†å¤‡é‡‘çš„å¨åŠ›ã€‚</p>\n<p>å¹³æ—¶æ–°é—»é‡Œæ€»æ˜¯å¬åˆ°ï¼ŒåŸºç¡€è´§å¸ï¼ˆM0ï¼‰ï¼Œå¹¿ä¹‰è´§å¸ï¼ˆM2ï¼‰è¿™ç§è¯ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œ100 å…ƒå°±æ˜¯åŸºç¡€è´§å¸ï¼Œ1000 å…ƒå°±æ˜¯å¹¿ä¹‰è´§å¸ï¼Œå¤®è¡Œå‘è¡Œçš„è¿™ä¸ªè´§å¸å°±å«åŸºç¡€è´§å¸ï¼Œåœ¨ 10% çš„å­˜æ¬¾å‡†å¤‡é‡‘ç‡ä¸‹ï¼Œé€šè¿‡å•†ä¸šé“¶è¡Œä½“ç³»çš„å¾ªç¯ä¹‹åï¼Œç¤¾ä¼šä¸Šçš„è´§å¸ä¾›åº”é‡æ‰©å¼ äº†æ•´æ•´ 10 å€ã€‚<strong>è¿™ä¸ªå€æ•°å…¶å®ä½ ç®—ä¸€ä¸‹ï¼Œå°±æ˜¯å­˜æ¬¾å‡†å¤‡é‡‘ç‡çš„å€’æ•° 10ï¼Œæ‰€ä»¥ä¹Ÿå«è´§å¸ä¹˜æ•°ã€‚</strong></p>\n<p>å­˜æ¬¾å‡†å¤‡é‡‘åˆ¶åº¦æ˜¯å›½å®¶å®è§‚ä¸ŠæŠŠæ§è´§å¸æ‰©å¼ çš„æ‰‹æ®µï¼Œ<strong>é“¶è¡Œæ”¾è´·çš„æ„æ„¿ï¼Œæˆ‘ä»¬ä¸ªäººã€ä¼ä¸šçš„ç°é‡‘æŒæœ‰é‡</strong>ï¼Œéƒ½ä¼šå½±å“åˆ°è´§å¸æ‰©å¼ çš„æœºåˆ¶ã€‚</p>\n<h2 id=\"åŸºå‡†åˆ©ç‡å’Œâ€œåŠ æ¯â€\"><a href=\"#åŸºå‡†åˆ©ç‡å’Œâ€œåŠ æ¯â€\" class=\"headerlink\" title=\"åŸºå‡†åˆ©ç‡å’Œâ€œåŠ æ¯â€\"></a>åŸºå‡†åˆ©ç‡å’Œâ€œåŠ æ¯â€</h2><p>ç°ä»£ç»æµè¿è¡Œæœ€é‡è¦çš„é€»è¾‘ï¼Œå°±æ˜¯å›½å®¶é€šè¿‡é“¶è¡Œä½“ç³»ï¼Œæ¥è°ƒæ§æ•´ä¸ªç¤¾ä¼šçš„ä¿¡ç”¨è§„æ¨¡å’Œç»æµå†·çƒ­ã€‚å…¶ä¸­ï¼Œ<strong>å­˜æ¬¾å‡†å¤‡é‡‘åˆ¶åº¦</strong> å’Œ <strong>åŸºå‡†åˆ©ç‡</strong> æ˜¯ä¸¤ä¸ªæœ€é‡è¦çš„è°ƒæ§æ‰‹æ®µã€‚å®ƒä»¬ä¸ºä»€ä¹ˆé‡è¦å‘¢ï¼Ÿ<strong>å­˜æ¬¾å‡†å¤‡é‡‘åˆ¶åº¦ä¸»è¦æ˜¯æ§åˆ¶äº†èµ„é‡‘çš„é‡ï¼Œè€ŒåŸºå‡†åˆ©ç‡è°ƒæ•´çš„æ˜¯èµ„é‡‘çš„ä»·æ ¼</strong>ã€‚</p>\n<h2 id=\"ä»€ä¹ˆæ˜¯åŸºå‡†åˆ©ç‡\"><a href=\"#ä»€ä¹ˆæ˜¯åŸºå‡†åˆ©ç‡\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯åŸºå‡†åˆ©ç‡\"></a>ä»€ä¹ˆæ˜¯åŸºå‡†åˆ©ç‡</h2><p>åŸºå‡†åˆ©ç‡å°±æ˜¯ä¸€ä¸ªå¸‚åœºä¸Šåˆ©ç‡æ°´å¹³çš„é£å‘æ ‡ã€‚å„ä¸ªé‡‘èæœºæ„ï¼Œéƒ½æ ¹æ®è¿™ä¸ªæ ‡å‡†æ¥ç¡®å®šè‡ªå·±çš„è´·æ¬¾å’Œå­˜æ¬¾åˆ©ç‡ã€‚æ”¿åºœå¦‚æœæ‹…å¿ƒç»æµè¿‡çƒ­çš„è¯ï¼Œå°±ä¼šåŠ æ¯ï¼Œä¹Ÿå°±æ˜¯æé«˜åˆ©ç‡è¿›è¡Œæ”¶ç¼©ã€‚å¦‚æœæƒ³è¦åˆºæ¿€ç»æµï¼Œå°±ä¼šé‡‡å–é™æ¯çš„æªæ–½ã€‚</p>\n<p>åŠ æ¯å’Œé™æ¯çš„å°ºåº¦å…¶å®éå¸¸éš¾æŠŠæ¡ï¼Œè¿‡çŒ›çš„åŠ æ¯å¯èƒ½ä¼šå¯¼è‡´ç»æµçš„çªç„¶å´©ç›˜ï¼Œè€Œè¿‡åº¦çš„é™æ¯å¯èƒ½ä¼šå¯¼è‡´ç»æµæ³¡æ²«ã€‚</p>\n<h2 id=\"å­¦é‡‘èä¸ºä»€ä¹ˆè¦å…ˆäº†è§£å®è§‚èƒŒæ™¯\"><a href=\"#å­¦é‡‘èä¸ºä»€ä¹ˆè¦å…ˆäº†è§£å®è§‚èƒŒæ™¯\" class=\"headerlink\" title=\"å­¦é‡‘èä¸ºä»€ä¹ˆè¦å…ˆäº†è§£å®è§‚èƒŒæ™¯\"></a>å­¦é‡‘èä¸ºä»€ä¹ˆè¦å…ˆäº†è§£å®è§‚èƒŒæ™¯</h2><ul>\n<li>ä¸–ç•Œä¸Šä»æ¥å°±ä¸å­˜åœ¨ç‹¬ç«‹çš„å¾®è§‚é‡‘èç°è±¡ï¼Œå®ƒçš„èƒŒåä¸€å®šæœ‰æŸç§å®è§‚å±‚é¢çš„é€»è¾‘æˆ–è€…æ¨åŠ¨åŠ›ã€‚</li>\n<li>æˆ‘ä»¬ä¸­å›½å¸‚åœºæ˜¯ä¸€ä¸ªå¼ºæ”¿åºœæŒ‡å¯¼ä¸‹çš„é€æ­¥å¼€æ”¾çš„é‡‘èå¸‚åœºï¼Œæ‰€ä»¥æ”¿åºœåœ¨è¿™ä¸ªå¸‚åœºçš„å½±å“åŠ›æ˜¯å¾ˆæ·±çš„ã€‚</li>\n<li>ä»å®è§‚è§†è§’æ¥ç†è§£å¾®è§‚é‡‘èç°è±¡ï¼Œæœ€åæ‰èƒ½åšå‡ºé€‚åˆè‡ªå·±çš„é‡‘èå†³ç­–ã€‚</li>\n</ul>\n<h2 id=\"å­¦ä¹ é‡‘èçš„ä¸‰ä¸ªé˜¶æ®µ\"><a href=\"#å­¦ä¹ é‡‘èçš„ä¸‰ä¸ªé˜¶æ®µ\" class=\"headerlink\" title=\"å­¦ä¹ é‡‘èçš„ä¸‰ä¸ªé˜¶æ®µ\"></a>å­¦ä¹ é‡‘èçš„ä¸‰ä¸ªé˜¶æ®µ</h2><ol>\n<li>æ¦‚å¿µã€æœ¯è¯­é€šå…³ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ ä¼šæ¥è§¦åˆ°å¤§é‡çš„é‡‘èæœ¯è¯­ï¼Œç„¶åç†è§£è¿™äº›è¯è¯­â€”â€”é™å‡†ã€é™æ¯ã€å½±å­é“¶è¡Œã€IPOã€PEã€VCï¼Œä½ å¾—æŠŠæ¡è¿™äº›è¯çš„æ¦‚å¿µï¼Œç„¶åå»ºç«‹ä¸€ä¸ªè‡ªå·±å¯¹é‡‘èå¸‚åœºçš„ä½“æ„Ÿï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªé˜¶æ®µã€‚</li>\n<li>æ¡†æ¶é€šå…³ã€‚è¿™å°±æ˜¯è¯´ï¼Œè¦æ±‚ä½ å»ºç«‹ä¸€ä¸ªé‡‘èæ€è€ƒçš„æ¡†æ¶ã€‚æˆ‘ä»¬ç°åœ¨é¢ä¸´çš„æ˜¯ä¸€ä¸ªä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œå¸‚åœºä¸Šå…¶å®é”™è¯¯çš„ä¿¡æ¯æ˜¯å¾ˆå¤šçš„ï¼Œæ¯”å¦‚è¯´ä½ ç»å¸¸ä¼šå¬åˆ°ä»€ä¹ˆâ€œè´§å¸è¶…å‘â€ã€â€œè´§å¸æˆ˜äº‰â€è¿™äº›è¯è¯­ï¼Œè¿™é‡Œé¢æœ‰å¾ˆå¤šçš„é€»è¾‘ç¡¬ä¼¤ã€‚åœ¨æ¦‚å¿µé€šå…³çš„åŸºç¡€ä¸Šï¼Œä½ è¦å­¦ç€å»ºç«‹ä¸€ä¸ªè‡ªå·±çš„é‡‘èæ€ç»´çš„æ¡†æ¶ï¼Œè¾¨åˆ«è¿™äº›ä¿¡æ¯ã€‚</li>\n<li>å®æ“é€šå…³ï¼Œè¿™å°±æ˜¯è¦æ±‚ä½ è¿ç”¨é‡‘èæ¡†æ¶æ¥è§£å†³é—®é¢˜ï¼Œåœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä¼šç»™ä½ ä¸€äº›æ¨¡æ‹Ÿçš„å®è§‚ç¯å¢ƒï¼Œè®©ä½ ç½®èº«åœ¨ä¸€ä¸ªå…·ä½“çš„åœºæ™¯é‡Œé¢ï¼Œè¿™ä¸ªæ—¶å€™ä½ è¦å¼€å§‹è¿ç”¨è‡ªå·±åœ¨å‰é¢å­¦åˆ°çš„å¾ˆå¤šçŸ¥è¯†è¿›è¡Œåˆ¤æ–­ï¼Œè¿›è¡Œæ“ä½œã€æŠ•èµ„ã€å•†ä¸šå†³ç­–ã€é‡‘èè¿ä½œç­‰ç­‰ã€‚</li>\n</ol>\n<hr>\n<h1 id=\"é“¶è¡Œä¸ç†è´¢\"><a href=\"#é“¶è¡Œä¸ç†è´¢\" class=\"headerlink\" title=\"é“¶è¡Œä¸ç†è´¢\"></a>é“¶è¡Œä¸ç†è´¢</h1><h2 id=\"é“¶è¡Œèººç€èµšé’±çš„ç§˜å¯†\"><a href=\"#é“¶è¡Œèººç€èµšé’±çš„ç§˜å¯†\" class=\"headerlink\" title=\"é“¶è¡Œèººç€èµšé’±çš„ç§˜å¯†\"></a>é“¶è¡Œèººç€èµšé’±çš„ç§˜å¯†</h2><blockquote>\n<p>2017å¹´å…¨çƒæœ€èµšé’±çš„5å®¶å…¬å¸ï¼Œä¸­å›½å äº†å…¶ä¸­4å®¶ï¼Œåˆ†åˆ«æ˜¯å·¥å†œä¸­å»ºå››å¤§è¡Œã€‚å»å¹´æ‹›è¡Œå¹³å‡è–ªæ°´46ä¸‡ï¼Œä¸Šæµ·é“¶è¡Œ45ä¸‡ã€‚</p>\n</blockquote>\n<p>ä»2003å¹´åˆ°2012å¹´è¿™åå¹´ï¼Œè¢«ç§°ä¸ºâ€œä¸­å›½é“¶è¡Œä¸šçš„é»„é‡‘åå¹´â€ã€‚</p>\n<h3 id=\"é“¶è¡Œåˆ©æ¶¦æ¥æº\"><a href=\"#é“¶è¡Œåˆ©æ¶¦æ¥æº\" class=\"headerlink\" title=\"é“¶è¡Œåˆ©æ¶¦æ¥æº\"></a>é“¶è¡Œåˆ©æ¶¦æ¥æº</h3><ul>\n<li>3/4ï¼Œå­˜è´·å·®</li>\n<li>1/4ï¼Œé“¶è¡ŒæŠ•èµ„ï¼Œé€šé“è´¹ç”¨</li>\n</ul>\n<p>é“¶è¡Œè§£å†³äº†èµ„é‡‘åŒ¹é…ä¸Šçš„è§„æ¨¡ã€æœŸé™å’Œé£é™©é—®é¢˜ï¼Œæ‰€ä»¥å®ƒä¼šäº§ç”Ÿå¤§é‡æ”¶ç›Šã€‚</p>\n<h3 id=\"ä¸ºä»€ä¹ˆåœ¨ä¸­å›½ä¼šå‘ç”Ÿâ€œé»„é‡‘åå¹´â€ï¼Ÿ\"><a href=\"#ä¸ºä»€ä¹ˆåœ¨ä¸­å›½ä¼šå‘ç”Ÿâ€œé»„é‡‘åå¹´â€ï¼Ÿ\" class=\"headerlink\" title=\"ä¸ºä»€ä¹ˆåœ¨ä¸­å›½ä¼šå‘ç”Ÿâ€œé»„é‡‘åå¹´â€ï¼Ÿ\"></a>ä¸ºä»€ä¹ˆåœ¨ä¸­å›½ä¼šå‘ç”Ÿâ€œé»„é‡‘åå¹´â€ï¼Ÿ</h3><ol>\n<li>é‡‘èå‡†å…¥é—¨æ§›é«˜ï¼Œç‰Œç…§æ§åˆ¶ä¸¥æ ¼ï¼Œè€Œä¸”å›½å®¶åœ¨2000å¹´ä»¥åå¯¹å­˜æ¬¾åˆ©ç‡å®è¡Œä¸¥æ ¼ç®¡åˆ¶ï¼Œåœ¨2012å¹´åˆ©ç‡å¸‚åœºåŒ–ä¹‹å‰ï¼Œåˆ©ç‡ä¸€ç›´ç»´æŒåœ¨3%å·¦å³</li>\n<li>å›½å®¶ç»æµé«˜é€Ÿå¢é•¿çš„åå¹´ï¼ŒæŠ•èµ„æœºä¼šå¤šã€åˆ©æ¶¦é«˜ï¼Œäº§ç”Ÿå¤§é‡çš„è´·æ¬¾éœ€æ±‚</li>\n</ol>\n<h3 id=\"é“¶è¡Œä¸šè´«å¯Œåˆ†åŒ–çš„æ–°ä¸šæ€\"><a href=\"#é“¶è¡Œä¸šè´«å¯Œåˆ†åŒ–çš„æ–°ä¸šæ€\" class=\"headerlink\" title=\"é“¶è¡Œä¸šè´«å¯Œåˆ†åŒ–çš„æ–°ä¸šæ€\"></a>é“¶è¡Œä¸šè´«å¯Œåˆ†åŒ–çš„æ–°ä¸šæ€</h3><p>ç”±äºå‡†å…¥é—¨æ§›é™ä½ï¼ˆé“¶è¡Œä¸ªæ•°ä»2000å¹´çš„40å®¶å‘å±•åˆ°4000å®¶ï¼‰ã€åˆ©ç‡å¸‚åœºåŒ–ï¼Œåœ¨é©¬å¤ªæ•ˆåº”ä¸‹ï¼Œé“¶è¡Œä¸šä¸¤æåˆ†åŒ–ï¼Œå››å¤§è¡Œä¾æ—§æ˜¯å·¨å¤´ï¼Œè‚¡ä»½åˆ¶é“¶è¡Œå„è¾Ÿè¹Šå¾„ï¼ŒåŸå•†è¡ŒçŠ¶æ€æ¬ ä½³ã€‚æ‰€æœ‰é“¶è¡Œéƒ½èµšé’±çš„å¥½æ—¥å­è¿‡å»äº†ã€‚</p>\n<h2 id=\"è´§å¸åŸºé‡‘å’Œé“¶è¡Œ\"><a href=\"#è´§å¸åŸºé‡‘å’Œé“¶è¡Œ\" class=\"headerlink\" title=\"è´§å¸åŸºé‡‘å’Œé“¶è¡Œ\"></a>è´§å¸åŸºé‡‘å’Œé“¶è¡Œ</h2><h3 id=\"é“¶è¡Œé—´è´§å¸å¸‚åœº\"><a href=\"#é“¶è¡Œé—´è´§å¸å¸‚åœº\" class=\"headerlink\" title=\"é“¶è¡Œé—´è´§å¸å¸‚åœº\"></a>é“¶è¡Œé—´è´§å¸å¸‚åœº</h3><p><strong>é“¶è¡Œé—´è´§å¸å¸‚åœº</strong>ï¼šé“¶è¡Œä¼šæœ‰èµ„é‡‘çŸ­ç¼ºå’Œç›ˆä½™çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¼šäº’ç›¸å€Ÿé’±ï¼Œç§°ä¸ºé“¶è¡Œé—´çš„è´§å¸æ‹†å€Ÿï¼Œå½¢æˆé“¶è¡Œé—´å¸‚åœºã€‚å®ƒæ˜¯ä¸€ä¸ªå¤§é¢çš„ã€çŸ­æœŸçš„èµ„é‡‘æ‹†å€Ÿå¸‚åœºã€‚</p>\n<p><strong>è´§å¸åŸºé‡‘</strong> å°±æ˜¯ç¾å›½70å¹´ä»£åˆ©ç‡ç®¡åˆ¶ä¸‹çš„é‡‘èåˆ›æ–°ã€æŠ•èµ„é“¶è¡Œé€šè¿‡å‹Ÿé›†èµ„é‡‘ã€æŠ•å…¥é“¶è¡Œé—´è´§å¸å¸‚åœºæ¥è·å–åˆ©æ¶¦ã€‚è´§å¸åŸºé‡‘çš„å‡ºç°æ˜¯ç¾å›½é‡‘èè‡ªç”±åŒ–çš„ä¸€ä¸ªæ ‡å¿—æ€§äº‹ä»¶ã€‚</p>\n<p>å¯¹è€ç™¾å§“æ¥è¯´ï¼Œè´§å¸åŸºé‡‘æä¾›äº†ä¸€ä¸ªåŠ å…¥é«˜æ”¶ç›Šçš„é“¶è¡Œé—´è´§å¸å¸‚åœºçš„é€”å¾„ï¼Œè®©ä¸€å°éƒ¨åˆ†åˆ©æ¶¦ä»é“¶è¡Œæµå›è€ç™¾å§“æ‰‹ä¸­ã€‚å¯¹é“¶è¡Œæ¥è¯´ï¼Œè´§å¸åŸºé‡‘ä¸ºå…¶æ•²å“äº†è­¦é’Ÿï¼Œä¿ƒä½¿é“¶è¡Œæ¨å‡ºæ›´å¤šçš„è´§å¸åŸºé‡‘äº§å“ã€‚</p>\n<h3 id=\"è´§å¸åŸºé‡‘æ”¶ç›Šç‡\"><a href=\"#è´§å¸åŸºé‡‘æ”¶ç›Šç‡\" class=\"headerlink\" title=\"è´§å¸åŸºé‡‘æ”¶ç›Šç‡\"></a>è´§å¸åŸºé‡‘æ”¶ç›Šç‡</h3><p>è´§å¸åŸºé‡‘åˆ©ç‡çš„ä¸Šä¸‹æµ®åŠ¨ï¼Œä¸»è¦æ˜¯è·Ÿéšé“¶è¡Œé—´å¸‚åœºæ³¢åŠ¨ã€‚å¸‚é¢ä¸Šçš„é’±è¶Šç´§å¼ ï¼ˆé’±è’ï¼‰ï¼Œè´§å¸å¸‚åœºè¶Šç«çƒ­ï¼Œè´§å¸åŸºé‡‘æ”¶ç›Šç‡è¶Šé«˜ã€‚åä¹‹ï¼Œå¸‚é¢ä¸Šé’±è¶Šå¤šï¼Œè´§å¸åŸºé‡‘åˆ©ç‡è¶Šä½ã€‚</p>\n<h2 id=\"é“¶è¡Œéä¿æœ¬ç†è´¢äº§å“\"><a href=\"#é“¶è¡Œéä¿æœ¬ç†è´¢äº§å“\" class=\"headerlink\" title=\"é“¶è¡Œéä¿æœ¬ç†è´¢äº§å“\"></a>é“¶è¡Œéä¿æœ¬ç†è´¢äº§å“</h2><h3 id=\"å½±å­é“¶è¡Œ\"><a href=\"#å½±å­é“¶è¡Œ\" class=\"headerlink\" title=\"å½±å­é“¶è¡Œ\"></a>å½±å­é“¶è¡Œ</h3><p>é“¶è¡Œæ”¶åˆ°ä¸¥æ ¼çš„ç›‘ç®¡ï¼Œå®ƒæœ‰ç»•å¼€ç›‘ç®¡çš„å†²åŠ¨ã€‚åœ¨ä¸­å›½çš„é“¶è¡Œé‡‘èä½“ç³»ä¸­ï¼Œé“¶è¡Œå æ®ç€ç»å¯¹ä¸»å¯¼åœ°ä½ï¼Œå› ä¸ºåªæœ‰é“¶è¡Œèƒ½å¸æ”¶å­˜æ¬¾ï¼Œå‹Ÿèµ„ä¹Ÿæ¯”å…¶ä»–æœºæ„å®¹æ˜“å¾—å¤šã€‚ä¸­å›½240ä¸‡äº¿çš„é‡‘èæ€»èµ„äº§é‡Œé¢ï¼Œé“¶è¡Œå äº†90%ä»¥ä¸Šã€‚</p>\n<ul>\n<li>é“¶è¡Œå—åˆ°ç›‘ç®¡å¤šï¼Œå‹Ÿèµ„èƒ½åŠ›å¼ºã€‚</li>\n<li>å…¶ä»–é‡‘èæœºæ„é’±å°‘ï¼Œå—åˆ°ç›‘ç®¡å®½æ¾ã€‚</li>\n</ul>\n<p>ä¿¡æ‰˜ã€åŸºé‡‘è¿™äº›æœºæ„é€šè¿‡é“¶è¡Œå‹Ÿé›†èµ„é‡‘ï¼ŒæŠŠè¿™äº›é’±æŠ•åˆ°å½“æ—¶åˆ©æ¶¦æœ€é«˜çš„è¡Œä¸šå’Œå¸‚åœºä¸­å»ï¼Œç»•å¼€ç›‘ç®¡ï¼Œå¤§å®¶ä¸€èµ·èµšé’±ï¼Œè¿™äº›ä¸šåŠ¡å°±æ˜¯å½±å­é“¶è¡Œã€‚æœ€å…¸å‹çš„å°±æ˜¯é“¶è¡Œå’Œä¿¡æ‰˜è”æ‰‹çš„â€œé“¶ä¿¡åˆä½œâ€ä¸šåŠ¡ï¼Œ2010å¹´çš„æˆ¿åœ°äº§å¸‚åœºï¼Œ2014å¹´çš„è‚¡ç¥¨è¯åˆ¸å¸‚åœºï¼Œéƒ½æœ‰é“¶è¡Œå’Œä¿¡æ‰˜ã€åˆ¸å•†åˆä½œçš„å› ç´ ã€‚</p>\n<p>ä¸­å›½çš„å½±å­é“¶è¡Œå°±æ˜¯ä¸€ä¸ªé‡‘èæœºæ„å’Œé‡‘èç›‘ç®¡ä¹‹é—´çŒ«æ‰è€é¼ çš„æ¸¸æˆã€‚</p>\n<p>åœ¨è¿™äº›ä¸šåŠ¡ä¸­ï¼Œé“¶è¡Œå……å½“é€šé“ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœé¡¹ç›®å¤±è´¥ï¼Œé“¶è¡Œä¸è´Ÿæœ‰ä¿æœ¬è´£ä»»ã€‚</p>\n<h3 id=\"åˆ¤åˆ«éä¿æœ¬ç†è´¢äº§å“æ˜¯å¦é è°±çš„å››ä¸ªåŸºæœ¬åŸåˆ™\"><a href=\"#åˆ¤åˆ«éä¿æœ¬ç†è´¢äº§å“æ˜¯å¦é è°±çš„å››ä¸ªåŸºæœ¬åŸåˆ™\" class=\"headerlink\" title=\"åˆ¤åˆ«éä¿æœ¬ç†è´¢äº§å“æ˜¯å¦é è°±çš„å››ä¸ªåŸºæœ¬åŸåˆ™\"></a>åˆ¤åˆ«éä¿æœ¬ç†è´¢äº§å“æ˜¯å¦é è°±çš„å››ä¸ªåŸºæœ¬åŸåˆ™</h3><ol>\n<li>åœ¨äº§å“è¯´æ˜ä¹¦ä¸Šè¦ç‰¹åˆ«æ³¨æ„äº§å“çš„æŠ•å‘ï¼Œå¦‚æœå®ƒå·ç½‘çš„æ˜¯ç°é‡‘è´·ã€å°é¢è´·ã€æ¶ˆè´¹è´·è¿™ç±»çš„äº§å“ï¼Œåœ¨å½“å‰çš„å¤§èƒŒæ™¯ä¸‹è¦éå¸¸è°¨æ…</li>\n<li>å¦‚æœæ˜¯é“¶è¡Œä»£é”€ï¼Œæ„å‘³ç€é“¶è¡Œå……å½“çš„åªæ˜¯ä¸­é—´äººè§’è‰²ï¼Œä½ ä¸ä¼šçŸ¥é“äº§å“æœ€åæŠ•åˆ°å“ªé‡Œï¼Œä¿¡æ¯ä¸å¯¹ç§°å¤ªå¤§ï¼Œéš¾ä»¥æŠŠæ¡ï¼Œä¸å»ºè®®æŠ•èµ„</li>\n<li>æ³¨æ„å‹Ÿèµ„æ–¹ä¿¡æ¯ï¼Œä¸è¦è¢«åå¤´å”¬åˆ°ï¼Œè¦å¯¹äº§å“æœ¬èº«åšä¸€äº›ç ”ç©¶å’Œäº†è§£</li>\n<li>å¦‚æœåˆ©ç‡è¿‡é«˜å°±è¦å°å¿ƒï¼Œä½†æ˜¯æ€æ ·åˆ¤æ–­åˆ©ç‡è¿‡é«˜ï¼Ÿå¯ä»¥æ ¹æ®åŸºå‡†åˆ©ç‡åšåˆ¤æ–­ï¼Œæ¯”å¦‚å½“å‰åŠå¹´æœŸåŸºå‡†è´·æ¬¾åˆ©ç‡æ˜¯4.35%ï¼Œäº”å¹´æœŸä»¥ä¸Šçš„æ˜¯4.9%ï¼Œåœ¨è¿™ä»¥ä¸Šä¸Šæµ®10%ã€20%éƒ½æ˜¯æ­£å¸¸çš„èŒƒç•´ã€‚5%çš„é“¶è¡Œç†è´¢äº§å“æ”¶ç›Šå¹¶ä¸ç®—å¤ªé«˜</li>\n</ol>\n<h3 id=\"ä»€ä¹ˆæ ·çš„è´§å¸åŸºé‡‘å€¼å¾—ä¹°\"><a href=\"#ä»€ä¹ˆæ ·çš„è´§å¸åŸºé‡‘å€¼å¾—ä¹°\" class=\"headerlink\" title=\"ä»€ä¹ˆæ ·çš„è´§å¸åŸºé‡‘å€¼å¾—ä¹°\"></a>ä»€ä¹ˆæ ·çš„è´§å¸åŸºé‡‘å€¼å¾—ä¹°</h3><p>ä¸­å›½å¸‚åœºä¸Šæœ‰5ä¸‡å¤šäº¿çš„èµ„é‡‘éƒ½åœ¨è´§å¸åŸºé‡‘ä¸Šï¼Œä¸€å…±300å¤šç§äº§å“ï¼Œæ€æ ·æŒ‘é€‰å®‰å…¨ã€æ”¶ç›Šç‡æ›´é«˜çš„ï¼Ÿ</p>\n<h4 id=\"æŒ‘é€‰è´§å¸åŸºé‡‘çš„ä¸¤å¤§åŸåˆ™\"><a href=\"#æŒ‘é€‰è´§å¸åŸºé‡‘çš„ä¸¤å¤§åŸåˆ™\" class=\"headerlink\" title=\"æŒ‘é€‰è´§å¸åŸºé‡‘çš„ä¸¤å¤§åŸåˆ™\"></a>æŒ‘é€‰è´§å¸åŸºé‡‘çš„ä¸¤å¤§åŸåˆ™</h4><p><strong>å®‰å…¨æ€§ä¸æµåŠ¨æ€§åŸåˆ™â€”â€”æŒ‘é€‰æ•£æˆ·æ¯”ä¾‹é«˜çš„è´§å¸åŸºé‡‘</strong></p>\n<p>æœºæ„å‹çš„è´§åŸºï¼Œç”³è´­èµå›éƒ½éå¸¸é¢‘ç¹ï¼Œæ•£æˆ·ç»å¸¸ååº”è¿‡æ…¢ï¼Œä¼šå—åˆ°èµ„é‡‘é‡å¤§çš„æœºæ„å½±å“ã€‚è¿™ç§åŸºé‡‘ç”±äºæœºæ„é¢‘ç¹è´­ä¹°èµå›äº§ç”Ÿçš„æµåŠ¨æ€§é£é™©ï¼Œæˆä¸ºâ€œåŸºé‡‘æŒ¤å…‘â€ï¼ˆFund Runï¼‰ï¼Œè¿™ä¼šå¯¼è‡´åŸºé‡‘æ³¢åŠ¨å¾ˆå¤§ï¼Œä¸å¤Ÿç¨³å¥ã€‚</p>\n<p>å¦‚æœä¸€ä¸ªè´§åŸºçš„æ•£æˆ·åˆ©ç‡è¾¾åˆ°70%ä»¥ä¸Šï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯æ•£æˆ·å‹åŸºé‡‘ï¼ŒæµåŠ¨æ€§é£é™©å°±éå¸¸ä½äº†ã€‚å‡ºäºæ”¶ç›Šç‡è€ƒè™‘ï¼Œè¿™ä¸ªæ ‡å‡†å¯ä»¥æ”¾å®½åˆ°60%ã€‚</p>\n<p><strong>æ”¶ç›Šç‡åŸåˆ™â€”â€”æŒ‘é€‰è§„æ¨¡é€‚ä¸­çš„è´§å¸åŸºé‡‘</strong></p>\n<p>è´§åŸºçš„æ”¶ç›Šç‡å’Œå®ƒçš„è´§åŸºè§„æ¨¡ï¼Œå‘ˆç°ä¸€ä¸ªå€’Uå‹çš„å…³ç³»ï¼ŒåŸºé‡‘è§„æ¨¡å¤ªå°ï¼ˆ&lt;50äº¿ï¼‰æˆ–è€…å¤ªå¤§ï¼ˆ&gt;1000äº¿ï¼‰éƒ½ä¼šå¯¼è‡´æ”¶ç›Šç‡è¿‡ä½ã€‚æŒ‘é€‰è´§åŸºæ—¶åº”å½“æŒ‘é€‰100äº¿åˆ°400äº¿è¿™æ ·ä¸­ç­‰è§„æ¨¡çš„åŸºé‡‘ã€‚</p>\n<p>ä»¥ä¸‹æ˜¯é¦™å¸…å›¢é˜Ÿåœ¨2018å¹´åˆæ ¹æ®ä»¥ä¸ŠåŸåˆ™æŒ‘é€‰å‡ºçš„å‡ æ”¯åŸºé‡‘ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180923_finance/ä¸€äº›å€¼å¾—è´­ä¹°çš„åŸºé‡‘.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h4 id=\"è´§å¸åŸºé‡‘ç”³è´­èµå›çš„ä¸‰ä¸ªå°çªé—¨\"><a href=\"#è´§å¸åŸºé‡‘ç”³è´­èµå›çš„ä¸‰ä¸ªå°çªé—¨\" class=\"headerlink\" title=\"è´§å¸åŸºé‡‘ç”³è´­èµå›çš„ä¸‰ä¸ªå°çªé—¨\"></a>è´§å¸åŸºé‡‘ç”³è´­èµå›çš„ä¸‰ä¸ªå°çªé—¨</h4><ol>\n<li>é¿å¼€T+2ã€T+3çš„åŸºé‡‘ï¼Œå› ä¸ºè¿™ä¼šå¯¹åŸºé‡‘æµåŠ¨æ€§é€ æˆä¸€å®šæŸå¤±</li>\n<li>åŸºé‡‘äº¤æ˜“æŒ‰ç…§å·¥ä½œæ—¥æ¥è®¡ç®—ï¼Œå‘¨äº”ä¸ä¹°å…¥ï¼Œå‘¨å››ä¸èµå›ã€‚å¦‚æœåœ¨å‘¨äº”ä¹°å…¥ï¼ŒT+1å‹åŸºé‡‘åº”å½“åœ¨å‘¨å…­èµå›ï¼Œè€Œå‘¨å…­éå·¥ä½œæ—¥ï¼Œå°±åªèƒ½åœ¨ä¸‹å‘¨ä¸€èµå›ï¼Œå˜æˆäº†T+3å‹åŸºé‡‘ã€‚â€œå‘¨å››ä¸èµå›â€æ˜¯å› ä¸ºä½ å¦‚æœåœ¨å‘¨å››èµå›äº†ï¼Œå°±ä¼šå˜æˆâ€œå‘¨äº”ä¹°å…¥â€</li>\n<li>è´§å¸åŸºé‡‘çš„æŠ•èµ„æ–¹å‘åº”è¯¥æ˜¯ä¸€ä¸ªçŸ­æœŸçš„è´§å¸å·¥å…·ï¼Œå¸‚åœºä¸Šèµ„é‡‘çš„ç´§å¼ ä¸å¦æ˜¯è´§åŸºæ”¶ç›Šç‡çš„å…³é”®ï¼Œèµ„é‡‘è¶Šç´§å¼ ï¼Œæ”¶ç›Šç‡è¶Šé«˜ã€‚ä¸€èˆ¬æ¥è¯´æœˆæœ«ã€å­£æœ«ã€å¹´ä¸­ã€å¹´åº•æ—¶ï¼Œå¸‚åœºä¸Šè´§å¸æœ€ç´§å¼ ï¼Œåœ¨è¿™äº›æ—¶å€™è´­ä¹°è´§åŸºä¹Ÿæ˜¯æ”¶ç›Šç‡ç›¸å¯¹æ¯”è¾ƒé«˜çš„ã€‚</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180923_finance/è´§åŸºé€‰æ‹©2åŸåˆ™3çªé—¨.jpeg\" alt=\"\" title=\"\">\n                </div>\n                <div class=\"image-caption\"></div>\n            </figure>\n<h4 id=\"ä¸€äº›åœ¨çº¿è´­ä¹°è´§å¸åŸºé‡‘çš„æ¸ é“\"><a href=\"#ä¸€äº›åœ¨çº¿è´­ä¹°è´§å¸åŸºé‡‘çš„æ¸ é“\" class=\"headerlink\" title=\"ä¸€äº›åœ¨çº¿è´­ä¹°è´§å¸åŸºé‡‘çš„æ¸ é“\"></a>ä¸€äº›åœ¨çº¿è´­ä¹°è´§å¸åŸºé‡‘çš„æ¸ é“</h4><ul>\n<li>å¤©å¤©åŸºé‡‘</li>\n<li>å¥½ä¹°åŸºé‡‘</li>\n<li>æ•°ç±³åŸºé‡‘</li>\n</ul>\n","categories":[],"tags":["é‡‘èå­¦"]},{"title":"é¦™å¸…çš„åŒ—å¤§é‡‘èå­¦è¯¾ï¼ˆä¸€ï¼‰é‡‘èä¸–ç•Œè§‚","url":"https://lilei.pro/2018/09/09/finance-Xiangshuai-week01/","content":"<blockquote>\n<p>å­¦ä¹ â€œå¾—åˆ°Appâ€ä¸­ã€Šé¦™å¸…çš„åŒ—å¤§é‡‘èå­¦è¯¾ã€‹ç¬”è®°</p>\n</blockquote>\n<h1 id=\"ç¬¬ä¸€å‘¨ï¼šé‡‘èçš„æœ¬è´¨\"><a href=\"#ç¬¬ä¸€å‘¨ï¼šé‡‘èçš„æœ¬è´¨\" class=\"headerlink\" title=\"ç¬¬ä¸€å‘¨ï¼šé‡‘èçš„æœ¬è´¨\"></a>ç¬¬ä¸€å‘¨ï¼šé‡‘èçš„æœ¬è´¨</h1><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180909_finance/é‡‘èçš„æœ¬è´¨.jpg\" alt=\"é‡‘èçš„æœ¬è´¨\" title=\"\">\n                </div>\n                <div class=\"image-caption\">é‡‘èçš„æœ¬è´¨</div>\n            </figure>\n<p>é‡‘èå¹¶ä¸æ˜¯é«˜é«˜åœ¨ä¸Šã€åªå­˜åœ¨äºé“¶è¡Œå®¶å’Œè¯åˆ¸åˆ†æå¸ˆå£ä¸­çš„ç¥ç§˜äº‹ç‰©ï¼Œå®ƒä¸æ¯ä¸€ä¸ªæ™®é€šäººæ¯æ¯ç›¸å…³ï¼Œä¸è®ºæ˜¯èœè´©ã€æ‰“å·¥è€…ã€æœåŠ¡å‘˜ï¼Œåªè¦ä½ æ´»åœ¨æ—¶é—´çš„æ²³æµä¸­ï¼Œå°±ä¸€å®šä¼šä¸é‡‘èå‘ç”Ÿè¿™æ ·é‚£æ ·çš„å…³ç³»ã€‚</p>\n<h2 id=\"é‡‘èçš„ç¬¬ä¸€å®šç†â€”â€”æ—¶é—´çš„ä»·å€¼\"><a href=\"#é‡‘èçš„ç¬¬ä¸€å®šç†â€”â€”æ—¶é—´çš„ä»·å€¼\" class=\"headerlink\" title=\"é‡‘èçš„ç¬¬ä¸€å®šç†â€”â€”æ—¶é—´çš„ä»·å€¼\"></a>é‡‘èçš„ç¬¬ä¸€å®šç†â€”â€”æ—¶é—´çš„ä»·å€¼</h2><blockquote>\n<p>æ—¶é—´å°±æ˜¯é‡‘é’±</p>\n</blockquote>\n<p>æ—¶é—´æ˜¯å¯ä»¥è¢«æ¢ç®—æˆé‡‘é’±çš„ï¼Œæˆ‘ä»¬æ¯ä¸ªäººæ‹¥æœ‰çš„æ—¶é—´æ•°é‡æ˜¯ç›¸åŒçš„ï¼Œä¸Šå¸ç»™æ¯ä¸ªäººçš„æ—¶é—´ä¸€ä¸ªåŸºç¡€å®šä»·ï¼ˆè´¨é‡ï¼‰ï¼Œæˆ‘ä»¬å†åˆ©ç”¨å„è‡ªé€‰æ‹©çš„é‡‘èå·¥å…·ï¼Œæ”¾å¤§/ç¼©å°å„è‡ªæ‹¥æœ‰çš„æ—¶é—´ä»·å€¼ã€‚è¿™åœ¨é‡‘èå­¦é‡Œè¢«ç§°ä½œâ€œè´§å¸çš„æ—¶é—´ä»·å€¼â€ï¼ˆtime value of moneyï¼‰ã€‚</p>\n<p>é‡‘èä¸ºæ—¶é—´å®šä»·ï¼Œæˆ‘ä»¬è¿™äº›è´­ä¹°é‡‘èäº§å“ã€åšå‡ºé‡‘èå†³ç­–çš„äººï¼Œå°±æ˜¯è´­ä¹°äº†ä¸åŒçš„æœªæ¥ä»·å€¼ã€‚</p>\n<h2 id=\"é‡‘èçš„ç¬¬äºŒå®šç†â€”â€”èµ„é‡‘çš„é›†èš\"><a href=\"#é‡‘èçš„ç¬¬äºŒå®šç†â€”â€”èµ„é‡‘çš„é›†èš\" class=\"headerlink\" title=\"é‡‘èçš„ç¬¬äºŒå®šç†â€”â€”èµ„é‡‘çš„é›†èš\"></a>é‡‘èçš„ç¬¬äºŒå®šç†â€”â€”èµ„é‡‘çš„é›†èš</h2><p>äººç±»é¢ä¸´ä¸¤ä¸ªçº¦æŸï¼šæ—¶é—´å’Œèµ„é‡‘ï¼Œç»æµå­¦ä¸Šå°†èµ„é‡‘çš„çº¦æŸç§°ä¸ºâ€œç¨€ç¼ºâ€ã€‚è¶Šæ˜¯ä¼Ÿå¤§çš„äº‹ç‰©ï¼Œè¶Šéœ€è¦èµ„é‡‘çš„<strong>å¿«é€Ÿé›†èš</strong>å’Œ<strong>æœ‰æ•ˆé…ç½®</strong>ï¼Œè¿™ç§åŠŸèƒ½åªæœ‰é‡‘èå¯ä»¥å®ç°ã€‚é‡‘èå¸®åŠ©æˆ‘ä»¬çªç ´æ—¶é—´å’Œåœ°åŸŸçš„é™åˆ¶ï¼Œè¿›è¡Œå¿«é€Ÿæœ‰æ•ˆçš„èµ„é‡‘é›†èšã€‚</p>\n<h2 id=\"é‡‘èçš„ç¬¬ä¸‰å®šç†â€”â€”åˆ†æ•£é£é™©\"><a href=\"#é‡‘èçš„ç¬¬ä¸‰å®šç†â€”â€”åˆ†æ•£é£é™©\" class=\"headerlink\" title=\"é‡‘èçš„ç¬¬ä¸‰å®šç†â€”â€”åˆ†æ•£é£é™©\"></a>é‡‘èçš„ç¬¬ä¸‰å®šç†â€”â€”åˆ†æ•£é£é™©</h2><p>é‡‘èä½¿äººç±»å¯¹é£é™©çš„æ‰¿å—èƒ½åŠ›çªç ´åœ°åŸŸå’Œæ—¶é—´é™åˆ¶ï¼Œæ‹“å±•äººç±»ç»æµæ´»åŠ¨èŒƒå›´</p>\n<ul>\n<li>ä¿é™©å°†ä¸ªä½“æ‰¿å—çš„é£é™©åˆ†æ•£åˆ°ç¤¾ä¼šç¾¤ä½“ä¹‹é—´</li>\n<li>è‚¡ç¥¨èµ·åˆ°çš„ä½œç”¨æ˜¯åˆ©ç›Šå…±äº«ã€é£é™©å…±æ‹…ã€‚</li>\n<li>é£æŠ•ã€åˆ›æŠ•è®©ç¤¾ä¼šåˆ†æ‹…åˆ›ä¸šåˆ›æ–°çš„é£é™©</li>\n</ul>\n<h2 id=\"è¾©è¯çœ‹å¾…é‡‘èä¸–ç•Œè§‚\"><a href=\"#è¾©è¯çœ‹å¾…é‡‘èä¸–ç•Œè§‚\" class=\"headerlink\" title=\"è¾©è¯çœ‹å¾…é‡‘èä¸–ç•Œè§‚\"></a>è¾©è¯çœ‹å¾…é‡‘èä¸–ç•Œè§‚</h2><p>é‡‘èèµ‹èƒ½äººç±»ï¼Œå¸®åŠ©æˆ‘ä»¬æ‰©å¤§æ—¶é—´ä»·å€¼ã€è¿›è¡Œèµ„é‡‘çš„é›†èšï¼Œåˆ†æ•£é£é™©ã€‚é‡‘èåŒæ ·ä¹Ÿæœ‰è´Ÿé¢çš„ä½œç”¨ï¼Œæ¯”å¦‚<strong>é©¬å¤ªæ•ˆåº”</strong>å’Œ<strong>é“å¾·é£é™©</strong>ã€‚</p>\n<p>é‡‘èçš„åŸºç¡€çŸ¥è¯†å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å…­ä¸ªæ¿å—</p>\n<ul>\n<li>é‡‘èæœºæ„ï¼šé“¶è¡Œã€æŠ•è¡Œã€åŸºé‡‘çš„èµ·æºã€åŠŸèƒ½ã€è¿ä½œæ¨¡å¼ï¼Œä»¥åŠèƒŒåçš„é‡‘èå­¦é€»è¾‘</li>\n<li>é‡‘èå·¥å…·ï¼šè‚¡ç¥¨ã€å€ºåˆ¸ã€é‡‘èè¡ç”Ÿå“çš„æœ¬è´¨å’Œç‰¹å¾ï¼Œé‡‘èæœºæ„å¦‚ä½•å¼€æ‹“å¸‚åœºï¼Œé‡‘èäº¤æ˜“åˆ¶åº¦</li>\n<li>æŠ•èµ„è€…å†³ç­–ï¼šèµ„äº§é…ç½®ã€è¯åˆ¸é€‰æ‹©ã€éç†æ€§å†³ç­–</li>\n<li>å…¬å¸å†³ç­–ï¼šç­¹èµ„çš„æ—¶æœºå’Œæ–¹æ³•ï¼Œä¸Šå¸‚æ—¶æœºï¼Œåˆ†çº¢ç­–ç•¥ï¼Œè‚¡æƒæ¿€åŠ±</li>\n<li>é‡‘èçš„ç›‘ç®¡ã€åˆ›æ–°å’Œå±æœºï¼šâ€œç›‘ç®¡ã€åˆ›æ–°ã€å±æœºâ€çš„é‡‘èå‘¨æœŸ</li>\n<li>ç§‘æŠ€é‡‘èï¼šé‡‘èè¡Œä¸šæœªæ¥çš„å‘å±•ï¼Œäº’è”ç½‘ï¼ŒåŒºå—é“¾ï¼Œæ¯”ç‰¹å¸</li>\n</ul>\n<p>é‡‘èå­¦å¸¦æ¥é‡‘èæ€ç»´ï¼Œå®ƒè®©æˆ‘ä»¬å­¦ä¼šæƒè¡¡é£é™©å’Œæ”¶ç›Šï¼Œä¸ä»…æŠ•èµ„é‡‘é’±ï¼Œæ›´æ˜¯æŠ•èµ„äººç”Ÿã€‚</p>\n<hr>\n<h1 id=\"ç¬¬äºŒå‘¨-é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–è¿‡ç¨‹\"><a href=\"#ç¬¬äºŒå‘¨-é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–è¿‡ç¨‹\" class=\"headerlink\" title=\"ç¬¬äºŒå‘¨ é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–è¿‡ç¨‹\"></a>ç¬¬äºŒå‘¨ é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–è¿‡ç¨‹</h1><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180909_finance/é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–.jpeg\" alt=\"é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–\" title=\"\">\n                </div>\n                <div class=\"image-caption\">é‡‘èå¸‚åœºçš„å†å²æ¼”åŒ–</div>\n            </figure>\n<h2 id=\"ä¸­å›½é‡‘èå¸‚åœºçš„åˆ¶åº¦æ ¹æºâ€”â€”ä¸­å¤®è´§å¸è´¢æ”¿ä½“ç³»\"><a href=\"#ä¸­å›½é‡‘èå¸‚åœºçš„åˆ¶åº¦æ ¹æºâ€”â€”ä¸­å¤®è´§å¸è´¢æ”¿ä½“ç³»\" class=\"headerlink\" title=\"ä¸­å›½é‡‘èå¸‚åœºçš„åˆ¶åº¦æ ¹æºâ€”â€”ä¸­å¤®è´§å¸è´¢æ”¿ä½“ç³»\"></a>ä¸­å›½é‡‘èå¸‚åœºçš„åˆ¶åº¦æ ¹æºâ€”â€”ä¸­å¤®è´§å¸è´¢æ”¿ä½“ç³»</h2><p><strong>æ‰€æœ‰çš„é‡‘èå¸‚åœºéƒ½ä¸æ˜¯å‡­ç©ºå‡ºç°çš„ï¼Œå®ƒçš„å½¢æˆèƒŒåéƒ½æœ‰ä¸€ä¸ªå¼ºå¤§çš„å†å²åˆ¶åº¦æ ¹æºã€‚</strong></p>\n<p>ä¸­å›½çš„é‡‘èå¸‚åœºæ˜¯ä»ä¸€ä¸ªä¸­å¤®é›†æƒçš„å¸å›½å†…éƒ¨æ¼”åŒ–æ¥çš„ï¼Œæ—©æœŸçš„é‡‘èå‘è¾¾ä¹Ÿæ¥æºäºè¿™æ ·çš„å°å»ºä¸“åˆ¶åˆ¶åº¦ï¼Œå›½å®¶å„æ–­äº†é‡‘èè¡Œä¸šï¼Œç»æµç”Ÿæ´»å›½æœ‰åŒ–ï¼Œå¯ä»¥é›†ä¸­åŠ›é‡åŠå¤§äº‹ã€‚</p>\n<p>è¿™ç§ç»æµåˆ¶åº¦çš„ç¼ºç‚¹æ˜¯æ°‘é—´ä¿¡ç”¨æå…¶è„†å¼±ï¼Œæ°‘ä¼—çš„èèµ„éœ€æ±‚å¾—ä¸åˆ°æ»¡è¶³ï¼Œé€ æˆä¸­å›½é‡‘èå¸‚åœºå¾ˆå¤šä¹±è±¡ã€‚</p>\n<h2 id=\"æ¬§ç¾é‡‘èå¸‚åœºçš„æ¼”åŒ–â€”â€”ä»¥é“¶è¡Œä¸ºä¸­å¿ƒï¼Œåˆ†æƒåˆ¶è¡¡ä¸‹çš„ä¿¡ç”¨ä½“ç³»\"><a href=\"#æ¬§ç¾é‡‘èå¸‚åœºçš„æ¼”åŒ–â€”â€”ä»¥é“¶è¡Œä¸ºä¸­å¿ƒï¼Œåˆ†æƒåˆ¶è¡¡ä¸‹çš„ä¿¡ç”¨ä½“ç³»\" class=\"headerlink\" title=\"æ¬§ç¾é‡‘èå¸‚åœºçš„æ¼”åŒ–â€”â€”ä»¥é“¶è¡Œä¸ºä¸­å¿ƒï¼Œåˆ†æƒåˆ¶è¡¡ä¸‹çš„ä¿¡ç”¨ä½“ç³»\"></a>æ¬§ç¾é‡‘èå¸‚åœºçš„æ¼”åŒ–â€”â€”ä»¥é“¶è¡Œä¸ºä¸­å¿ƒï¼Œåˆ†æƒåˆ¶è¡¡ä¸‹çš„ä¿¡ç”¨ä½“ç³»</h2><p>æ¬§ç¾çš„é‡‘èå¸‚åœºä¹Ÿä¸æ˜¯ä¸€å¼€å§‹å°±åƒç°åœ¨è¿™æ ·æˆç†Ÿï¼Œè€Œæ˜¯ä»11ä¸–çºªä»¥åæ…¢æ…¢å‘å±•èµ·æ¥çš„</p>\n<p>åœ£æ®¿éª‘å£«å›¢å¥ å®šæ¬§æ´²é“¶è¡Œä¸šåŸºç¡€ -&gt; æ„å¤§åˆ©é“¶è¡Œä¸šã€è·å…°è‚¡ç¥¨è¯åˆ¸ã€è‹±æ³•é“¶è¡Œä¸šé€æ¸å½¢æˆåˆ†æƒåˆ¶è¡¡ä¿¡ç”¨ä½“ç³» -&gt; ç¾å›½çš„é‡‘èç«‹å›½ï¼Œç§°ä¸ºä¸–ç•Œä¸Šæœ€å‘è¾¾çš„é‡‘èå¸‚åœºã€‚æˆ‘ä»¬ç°åœ¨æ‰€çœ‹åˆ°çš„æ¬§ç¾ä¿¡ç”¨ç¤¾ä¼šï¼Œæ˜¯ç”±äºæ¬§æ´²åˆ†æƒåˆ¶è¡¡çš„å½¢æ€æ‰€å†³å®šçš„ã€‚</p>\n<p>å†å²ä¸èƒ½ä¾é ç®€å•çš„æ‹¿æ¥ä¸»ä¹‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªè·¯å¾„ç›¸ä¾çš„è¿‡ç¨‹ã€‚</p>\n<h2 id=\"é‡‘èæœºæ„ç”¨äºæ¶ˆé™¤é‡‘èå¸‚åœºä¸Šçš„ä¿¡æ¯ä¸å¯¹ç§°\"><a href=\"#é‡‘èæœºæ„ç”¨äºæ¶ˆé™¤é‡‘èå¸‚åœºä¸Šçš„ä¿¡æ¯ä¸å¯¹ç§°\" class=\"headerlink\" title=\"é‡‘èæœºæ„ç”¨äºæ¶ˆé™¤é‡‘èå¸‚åœºä¸Šçš„ä¿¡æ¯ä¸å¯¹ç§°\"></a>é‡‘èæœºæ„ç”¨äºæ¶ˆé™¤é‡‘èå¸‚åœºä¸Šçš„ä¿¡æ¯ä¸å¯¹ç§°</h2><p>é‡‘èå¸‚åœºä¸Šäº¤æ˜“çš„æ˜¯â€œä¿¡ç”¨â€ã€â€œæœªæ¥â€ï¼Œæ˜¯çœ‹ä¸è§æ‘¸ä¸åˆ°çš„æŠ½è±¡ç‰©å“ï¼Œå­˜åœ¨å·¨å¤§çš„<strong>ä¿¡æ¯ä¸å¯¹ç§°</strong>ï¼Œé‡‘èä¸­ä»‹çš„å­˜åœ¨å°±æ˜¯ä¸ºäº†æ¶ˆé™¤ä¿¡æ¯ä¸å¯¹ç§°ã€‚å„ç§å®¡è®¡æœºæ„ã€ä¼šè®¡å¸ˆäº‹åŠ¡æ‰€ã€åˆ¸å•†é“¶è¡Œéƒ½å±äºé‡‘èä¸­ä»‹ã€‚</p>\n<p>æ²¡æœ‰é‡‘èä¸­ä»‹æœºæ„ï¼Œé‡‘èå¸‚åœºæ˜¯æ— æ³•è¿è¡Œçš„ï¼Œé‡‘èå¸‚åœºçš„é«˜åº¦ä¸­ä»‹åŒ–æ˜¯å¿…ç„¶çš„ç»“æœã€‚</p>\n<hr>\n<h1 id=\"å»¶å±•è¯é¢˜ï¼šä¸ªäººèµ„äº§é…ç½®çš„ç”Ÿå‘½å‘¨æœŸ\"><a href=\"#å»¶å±•è¯é¢˜ï¼šä¸ªäººèµ„äº§é…ç½®çš„ç”Ÿå‘½å‘¨æœŸ\" class=\"headerlink\" title=\"å»¶å±•è¯é¢˜ï¼šä¸ªäººèµ„äº§é…ç½®çš„ç”Ÿå‘½å‘¨æœŸ\"></a>å»¶å±•è¯é¢˜ï¼šä¸ªäººèµ„äº§é…ç½®çš„ç”Ÿå‘½å‘¨æœŸ</h1><ul>\n<li>é’å¹´æ—¶æœŸï¼šæœ€å¤§çš„ä¼˜åŠ¿æ˜¯æ—¶é—´ï¼ŒåŠ å¤§å®ç‰©èµ„äº§é…ç½®ï¼Œä»¥æ—¶é—´æ¢ç©ºé—´ï¼Œå¢å¤§å¹´è½»æ—¶æœŸèµ„æœ¬ç§¯ç´¯</li>\n<li>å£®å¹´æ—¶æœŸï¼šç°é‡‘æ”¶å…¥é«˜ï¼Œé£é™©æ‰¿å—èƒ½åŠ›å¼ºã€‚åº”è¯¥åŠ å¤§é£é™©èµ„äº§é…ç½®ï¼›èº«ä»½è§’è‰²çš„è½¬æ¢ï¼Œéœ€è¦èµ„äº§çš„å¤šå…ƒåŒ–é…ç½®</li>\n<li>è€å¹´æ—¶æœŸï¼šæœªæ¥æ—¶é—´å˜å°‘ï¼Œé£é™©æ‰¿å—èƒ½åŠ›å‡å¼±ï¼ŒåŠ å¤§å®‰å…¨èµ„äº§é…ç½®ï¼ŒåŒæ—¶åŠ å¤§æµåŠ¨æ€§èµ„äº§é…ç½®ï¼Œä¿éšœç°é‡‘æµ</li>\n</ul>\n","categories":[],"tags":["é‡‘èå­¦"]},{"title":"æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼ˆä¸‰ï¼‰åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥","url":"https://lilei.pro/2018/08/15/JVM-Note-03/","content":"<blockquote>\n<p>æœ¬ç« ä»‹ç»åƒåœ¾æ”¶é›†å™¨çš„è®¾è®¡æ€è·¯ã€ç®—æ³•ä»¥åŠå¸¸è§å®ç°ï¼ŒåŒæ—¶ä»‹ç»ä¸ºå¯¹è±¡åˆ†é…ç©ºé—´æ—¶é‡‡å–çš„ç­–ç•¥ã€‚</p>\n</blockquote>\n<h1 id=\"åƒåœ¾æ”¶é›†ï¼ˆGarbage-Collectionï¼‰\"><a href=\"#åƒåœ¾æ”¶é›†ï¼ˆGarbage-Collectionï¼‰\" class=\"headerlink\" title=\"åƒåœ¾æ”¶é›†ï¼ˆGarbage Collectionï¼‰\"></a>åƒåœ¾æ”¶é›†ï¼ˆGarbage Collectionï¼‰</h1><p>GC çš„å†å²æ¯” Java ä¹…è¿œï¼Œ1960 å¹´è¯ç”Ÿäº MIT çš„ Lisp æ˜¯ç¬¬ä¸€é—¨çœŸæ­£ä½¿ç”¨å†…å­˜åŠ¨æ€åˆ†é…å’Œåƒåœ¾å›æ”¶æŠ€æœ¯çš„è¯­è¨€ã€‚ä¸è®ºæ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œåœ¨è®¾è®¡ GC æ—¶éƒ½å¿…é¡»è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªé—®é¢˜ï¼š</p>\n<ul>\n<li>å“ªäº›å†…å­˜éœ€è¦å›æ”¶ï¼ˆWhoï¼‰</li>\n<li>ä»€ä¹ˆæ—¶å€™å›æ”¶ï¼ˆWhenï¼‰</li>\n<li>å¦‚ä½•å›æ”¶ï¼ˆHowï¼‰</li>\n</ul>\n<p>ä¹Ÿè®¸ä½ è¦é—®ï¼Œè™šæ‹Ÿæœºå·²ç»ä¸ºæˆ‘ä»¬å®Œæˆäº†å†…å­˜å›æ”¶çš„å·¥ä½œï¼Œç›®å‰å†…å­˜çš„åŠ¨æ€åˆ†é…ä¸å›æ”¶æŠ€æœ¯å·²ç»ç›¸å½“æˆç†Ÿï¼Œä¸€åˆ‡éƒ½è¿›å…¥äº†â€œè‡ªåŠ¨åŒ–â€æ—¶ä»£ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦å»äº†è§£ GC å’Œå†…å­˜åˆ†é…å‘¢ï¼Ÿç­”æ¡ˆå¾ˆç®€å•ï¼Œå½“æˆ‘ä»¬éœ€è¦æ’æŸ¥å„ç§å†…å­˜æº¢å‡ºã€æ³„æ¼é—®é¢˜æ—¶ï¼Œå½“åƒåœ¾æ”¶é›†ç§°ä¸ºç³»ç»Ÿè¾¾åˆ°æ›´é«˜å¹¶å‘é‡çš„ç“¶é¢ˆæ—¶ï¼Œå°±å¿…é¡»è¦å¯¹è¿™äº›â€œè‡ªåŠ¨åŒ–â€çš„æŠ€æœ¯è¿›è¡Œå¿…è¦çš„ç›‘æ§å’Œè°ƒèŠ‚ã€‚</p>\n<p>åœ¨ä¸Šä¸€ç« çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ° JVM çš„å†…å­˜å¯ä»¥åˆ’åˆ†ä¸ºçº¿ç¨‹ç§æœ‰éƒ¨åˆ†ï¼ˆè™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ï¼‰å’Œå…¬æœ‰éƒ¨åˆ†ï¼ˆå †ã€æ–¹æ³•åŒºï¼‰ï¼Œå…¶ä¸­çº¿ç¨‹ç§æœ‰éƒ¨åˆ†æ‰€ç”³è¯·çš„å†…å­˜ï¼Œéšç€çº¿ç¨‹è¿è¡Œç»“æŸè€Œé”€æ¯ï¼Œåœ¨è¿™ä¸ªåŒºåŸŸçš„å†…å­˜åˆ†é…å’Œå›æ”¶å…·å¤‡ç¡®å®šæ€§ã€‚å…¬æœ‰éƒ¨åˆ†çš„æ–¹æ³•åŒºï¼Œå…¶åˆ†é…å¤šå°‘å†…å­˜åœ¨ç¼–è¯‘æœŸé—´ä¹Ÿå¯ä»¥ç¡®è®¤ï¼Œå› æ­¤ï¼Œéœ€è¦è€ƒè™‘å†…å­˜å›æ”¶çš„åŒºåŸŸä¸»è¦æ˜¯ Java å †ï¼Œå †ä¸­çš„å¯¹è±¡æ˜¯è¿è¡Œæ—¶åˆ›å»ºçš„ï¼Œå®ƒä»¬çš„åˆ›å»ºå’Œå›æ”¶éƒ½æ˜¯åŠ¨æ€çš„ï¼Œè¿™æ˜¯åƒåœ¾æ”¶é›†å™¨å…³æ³¨çš„åŒºåŸŸã€‚</p>\n<h1 id=\"å¯¹è±¡å·²æ­»å—ï¼Ÿ\"><a href=\"#å¯¹è±¡å·²æ­»å—ï¼Ÿ\" class=\"headerlink\" title=\"å¯¹è±¡å·²æ­»å—ï¼Ÿ\"></a>å¯¹è±¡å·²æ­»å—ï¼Ÿ</h1><h2 id=\"å¼•ç”¨è®¡æ•°å™¨æ³•\"><a href=\"#å¼•ç”¨è®¡æ•°å™¨æ³•\" class=\"headerlink\" title=\"å¼•ç”¨è®¡æ•°å™¨æ³•\"></a>å¼•ç”¨è®¡æ•°å™¨æ³•</h2><p>å¼•ç”¨è®¡æ•°å™¨æ³•ï¼ˆReference Countingï¼‰æ˜¯ä¸€ç§å®ç°èµ·æ¥å¾ˆç®€å•çš„åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜æ´»çš„æ–¹æ³•ã€‚åŸç†æ˜¯å½“å‡ºç°ä¸€ä¸ªå¯¹å¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œè®¡æ•°å™¨ +1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨ -1ï¼Œè®¡æ•°å™¨å€¼ä¸º 0 åˆ™è¡¨ç¤ºå¯¹è±¡å·²æ­»ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯å®ç°ç®€å•ï¼Œåˆ¤å®šæ•ˆç‡é«˜ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ä¸é”™çš„ç®—æ³•ï¼Œä¹Ÿæœ‰å¾ˆå¤šè‘—åçš„åº”ç”¨æ¡ˆä¾‹ï¼š</p>\n<ul>\n<li>M$ çš„ COMï¼ˆComponent Object Modelï¼‰æŠ€æœ¯</li>\n<li>è¯•ç”¨ AS3 çš„ FlashPlayer</li>\n<li>Python</li>\n<li>Squirrel</li>\n</ul>\n<p>å¼•ç”¨è®¡æ•°å™¨å‘å­˜åœ¨å¾ªç¯å¼•ç”¨çš„é—®é¢˜ï¼Œå› æ­¤ä¸»æµ Java è™šæ‹Ÿæœºæ²¡æœ‰é€‰ç”¨è¿™ç§æ–¹æ³•æ¥ç®¡ç†å†…å­˜ã€‚</p>\n<h2 id=\"å¯è¾¾æ€§åˆ†ææ³•\"><a href=\"#å¯è¾¾æ€§åˆ†ææ³•\" class=\"headerlink\" title=\"å¯è¾¾æ€§åˆ†ææ³•\"></a>å¯è¾¾æ€§åˆ†ææ³•</h2><p>ä¸»æµå•†ç”¨ç¨‹åºè¯­è¨€ï¼ˆJavaã€C#ã€Lispï¼‰ä½¿ç”¨å¯è¾¾æ€§åˆ†æï¼ˆReachability Analysisï¼‰æ–¹æ³•æ¥åˆ¤å®šå¯¹è±¡æ˜¯å¦å­˜æ´»ï¼š</p>\n<ol>\n<li>ä»ä¸€ç³»åˆ— GC Roots èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºå¼•ç”¨é“¾ï¼ˆReference Chainï¼‰</li>\n<li>å½“ä¸€ä¸ªå¯¹è±¡åˆ° GC Roots æ²¡æœ‰ä»»ä½•å¼•ç”¨é“¾ç›¸è¿ï¼ˆä¸å¯è¾¾ï¼‰æ—¶ï¼Œè¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„</li>\n</ol>\n<p>åœ¨ Java ä¸­çš„ GC Roots æœ‰ä»¥ä¸‹å‡ ç§</p>\n<ul>\n<li>è™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰å¼•ç”¨çš„å¯¹è±¡</li>\n<li>æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNI å¼•ç”¨çš„å¯¹è±¡</li>\n<li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li>\n<li>æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li>\n</ul>\n<p>å¯è§ GC Roots èŠ‚ç‚¹ä¸»è¦æœ‰å…¨å±€æ€§å¼•ç”¨å’Œæ‰§è¡Œä¸Šä¸‹æ–‡è¿™ä¸¤ä¸ªæ¥æºã€‚</p>\n<h2 id=\"JDK-1-2-åçš„å‡ ç§å¼•ç”¨\"><a href=\"#JDK-1-2-åçš„å‡ ç§å¼•ç”¨\" class=\"headerlink\" title=\"JDK 1.2 åçš„å‡ ç§å¼•ç”¨\"></a>JDK 1.2 åçš„å‡ ç§å¼•ç”¨</h2><p>åœ¨ Java 1.2 ä¹‹å‰ï¼Œå¯¹â€œå¼•ç”¨â€çš„å®šä¹‰å¾ˆä¼ ç»Ÿï¼šå¦‚æœ reference ç±»å‹çš„æ•°æ®ä¸­å­˜å‚¨çš„æ•°å€¼ä»£è¡¨çš„æ˜¯å¦ä¸€å—å†…å­˜çš„èµ·å§‹åœ°å€ï¼Œå°±ç§°ä¸ºè¿™å—å†…å­˜ä»£è¡¨ç€ä¸€ä¸ªå¼•ç”¨ã€‚è¿™ç§å®šä¹‰å¾ˆçº¯ç²¹ä½†æ˜¯å¤ªè¿‡ç‹­éš˜ï¼Œä¸€ä¸ªå¯¹è±¡åœ¨è¿™ç§å®šä¹‰ä¸‹åªæœ‰è¢«å¼•ç”¨æˆ–è€…æ²¡æœ‰è¢«å¼•ç”¨ä¸¤ç§çŠ¶æ€ã€‚æˆ‘ä»¬å¸Œæœ›æè¿°è¿™æ ·ä¸€ç±»å¯¹è±¡ï¼šå½“å†…å­˜ç©ºé—´è¿˜è¶³å¤Ÿæ—¶ï¼Œåˆ™èƒ½ä¿å­˜åœ¨å†…å­˜ä¹‹ä¸­ï¼›å¦‚æœå†…å­˜ç©ºé—´åœ¨è¿›è¡Œ GC åè¿˜æ˜¯éå¸¸ç´§å¼ ï¼Œåˆ™å¯ä»¥æŠ›å¼ƒè¿™äº›å¯¹è±¡ã€‚åœ¨ JDK 1.2 ä¹‹åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºâ€œå¼ºè½¯å¼±è™šâ€å››ç§ï¼š</p>\n<ul>\n<li>å¼ºå¼•ç”¨ï¼ˆStrong Referenceï¼‰ï¼šæŒ‡åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„ï¼Œç±»ä¼¼â€œObject obj = new Object()â€è¿™ç±»çš„å¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨ <strong>æ°¸è¿œä¸ä¼š</strong> å›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡</li>\n<li>è½¯å¼•ç”¨ï¼ˆSoft Referenceï¼‰ï¼šç”¨æ¥æè¿°ä¸€äº› <strong>è¿˜æœ‰ç”¨ä½†éå¿…éœ€</strong> çš„å¯¹è±¡ï¼Œå¯¹äºè½¯å¼•ç”¨å…³è”çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œå°†ä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—å…¥å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ã€‚å¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œåˆ™ä¼šæŠ›å‡º <strong>å†…å­˜æº¢å‡ºå¼‚å¸¸</strong></li>\n<li>å¼±å¼•ç”¨ï¼ˆWeak Referenceï¼‰ï¼šç”¨æ¥æè¿° <strong>éå¿…éœ€</strong> å¯¹è±¡ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶å‘ç”Ÿä¹‹å‰ã€‚å½“åƒåœ¾æ”¶é›†å™¨å·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡</li>\n<li>è™šå¼•ç”¨ï¼ˆPhantom Referenceï¼‰ï¼šä¹Ÿç§°ä¸ºå¹½çµå¼•ç”¨æˆ–è€…å¹»å½±å¼•ç”¨ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨è·å–å¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„å°±æ˜¯èƒ½åœ¨å®ƒè¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥</li>\n</ul>\n<h2 id=\"ä¸¤æ¬¡æ ‡è®°å®£å‘Šå¯¹è±¡æ­»äº¡\"><a href=\"#ä¸¤æ¬¡æ ‡è®°å®£å‘Šå¯¹è±¡æ­»äº¡\" class=\"headerlink\" title=\"ä¸¤æ¬¡æ ‡è®°å®£å‘Šå¯¹è±¡æ­»äº¡\"></a>ä¸¤æ¬¡æ ‡è®°å®£å‘Šå¯¹è±¡æ­»äº¡</h2><p>å¯¹äºåœ¨å¯è¾¾æ€§åˆ†æä¸­è¢«åˆ¤æ–­ä¸ºâ€œä¸å¯è¾¾â€çš„å¯¹è±¡ï¼Œæœ‰ä¸€æ¬¡è¿›è¡Œè‡ªæ•‘çš„æœºä¼šï¼Œè¦çœŸæ­£å®£å‘Šä¸€ä¸ªå¯¹è±¡æ­»äº¡ï¼Œéœ€è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼š</p>\n<ol>\n<li>ç¬¬ä¸€æ¬¡æ ‡è®°ï¼šå¯¹è±¡åœ¨å¯è¾¾æ€§åˆ†æä¸­è¢«æ ‡è®°ä¸ºâ€œä¸å¯è¾¾â€</li>\n<li>ç¬¬äºŒæ¬¡ç­›é€‰ï¼šåˆ¤æ–­æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶æ»¡è¶³å…¶ä¸€æ—¶ï¼Œå¯è®¤ä¸ºæ˜¯â€œæœ‰å¿…è¦â€ï¼Œa. å¯¹è±¡è¦†ç›–äº† finalize() æ–¹æ³•ï¼›b. å¯¹è±¡çš„ finalize() æ–¹æ³•æœªè¢«è°ƒç”¨è¿‡</li>\n</ol>\n<p>å¯¹è±¡è¢«åˆ¤æ–­ä¸ºâ€œæœ‰å¿…è¦æ‰§è¡Œ finalize()â€æ—¶ï¼Œæ˜¯å…¶æœ€åä¸€æ¬¡è‡ªæ•‘æœºä¼šï¼Œå®ƒä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªåä¸º<code>F-Queue</code>çš„é˜Ÿåˆ—ä¹‹ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€ä¸ªè™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½ä¼˜å…ˆçº§çš„ Finalizer çº¿ç¨‹å»æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œå¯¹è±¡è¿›è¡Œè‡ªæ•‘çš„å”¯ä¸€æ‰‹æ®µæ˜¯åœ¨ finalize() æ–¹æ³•ä¸­å»ºç«‹ä¸ GC Roots çš„è¿æ¥ï¼Œè­¬å¦‚æŠŠè‡ªå·±ï¼ˆthis å…³é”®å­—ï¼‰èµ‹å€¼ç»™æŸä¸ªç±»å˜é‡æˆ–è€…å¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œè¿™æ ·ä¼šä½¿å¾—å¯¹è±¡è¢«ç§»é™¤å‡ºâ€œå³å°†å›æ”¶â€é›†åˆï¼›æ¢è¨€ä¹‹ï¼Œå¦‚æœè¿™æ—¶å€™å¯¹è±¡ä»ç„¶æœªèƒ½è‡ªæ•‘ï¼Œåˆ™ä¼šè¿æ¥æ­»äº¡çš„å‘½è¿ã€‚</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„ finalize() æ–¹æ³•åªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡</strong>ã€‚åœ¨ç¼–ç ä¸­æˆ‘ä»¬åº”å½“å°½é‡é¿å…ä½¿ç”¨<code>finalize()</code>æ–¹æ³•ï¼Œå› ä¸ºå®ƒçš„è¿è¡Œä»£ä»·é«˜æ˜‚ï¼Œä¸ç¡®å®šæ€§å¤§ï¼Œå¹¶ä¸”æ— æ³•ä¿è¯å„ä¸ªå¯¹è±¡çš„è°ƒç”¨é¡ºåºã€‚</p>\n<h2 id=\"å›æ”¶æ–¹æ³•åŒº\"><a href=\"#å›æ”¶æ–¹æ³•åŒº\" class=\"headerlink\" title=\"å›æ”¶æ–¹æ³•åŒº\"></a>å›æ”¶æ–¹æ³•åŒº</h2><p>æ–¹æ³•åŒºï¼ˆåœ¨ HotSpot è™šæ‹Ÿæœºä¸­è¢«ç§°ä¸ºâ€œæ°¸ä¹…ä»£â€ï¼‰ä¹Ÿå¯ä»¥è¿›è¡Œåƒåœ¾æ”¶é›†ï¼ˆè™½ç„¶ Java è™šæ‹Ÿæœºè§„èŒƒä¸­æ˜ç¡®è¡¨ç¤ºå¯ä»¥ä¸è¦æ±‚åœ¨æ–¹æ³•åŒºå®ç°åƒåœ¾æ”¶é›†ï¼‰ã€‚ä¸è¿‡åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œæ”¶é›†çš„â€œæ€§ä»·æ¯”â€é€šå¸¸å¾ˆä½ï¼Œåœ¨å †ä¸­å¸¸è§„åº”ç”¨è¿›è¡Œä¸€æ¬¡åƒåœ¾æ”¶é›†ä¸€èˆ¬å¯ä»¥å›æ”¶ 70%ï½95% çš„ç©ºé—´ï¼Œè€Œæ°¸ä¹…ä»£çš„åƒåœ¾æ”¶é›†æ•ˆç‡è¿œä½äºæ­¤ã€‚</p>\n<p>æ°¸ä¹…ä»£çš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼šåºŸå¼ƒå¸¸é‡å’Œæ— ç”¨çš„ç±»ã€‚</p>\n<p><strong>åºŸå¼ƒå¸¸é‡</strong> çš„å›æ”¶ä¸ Java å †ä¸­å¯¹è±¡å›æ”¶ååˆ†ç±»ä¼¼ï¼Œä»¥å­—é¢é‡å›æ”¶ä¸ºä¾‹ï¼Œå‡å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²â€œabcâ€å·²ç»è¿›å…¥äº†å¸¸é‡æ± ä¸­ï¼Œä½†æ˜¯å½“å‰ç³»ç»Ÿæ²¡æœ‰ä»»ä½•ä¸€ä¸ª String å¯¹è±¡æ˜¯å«åšâ€œabcâ€çš„ï¼Œä¹Ÿæ²¡æœ‰åœ¨å…¶ä»–ä»»ä½•åœ°æ–¹å¼•ç”¨äº†è¿™ä¸ªå­—é¢é‡ï¼Œå¦‚æœè¿™æ—¶å‘ç”Ÿå†…å­˜å›æ”¶ï¼Œåœ¨å¿…è¦çš„æƒ…å†µä¸‹ï¼Œâ€œabcâ€å¸¸é‡ä¼šè¢«æ¸…é™¤å‡ºå¸¸é‡æ± ã€‚</p>\n<p><strong>æ— ç”¨çš„ç±»</strong> çš„åˆ¤æ–­åˆ™è¦ç¨å¾®å¤æ‚ä¸€äº›ï¼Œéœ€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼Œæ‰â€œå¯ä»¥â€è¢«å›æ”¶ï¼Œæ³¨æ„ä¸æ˜¯â€œä¸€å®šâ€è€Œæ˜¯â€œå¯ä»¥â€</p>\n<ul>\n<li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯ Java å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹</li>\n<li>åŠ è½½è¯¥ç±»çš„ ClassLoader å·²ç»è¢«å›æ”¶</li>\n<li>è¯¥ç±»å¯¹åº”çš„ java.lang.Class å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•</li>\n</ul>\n<p>HotSpot è™šæ‹Ÿæœºæä¾›äº†<code>-Xnoclassgc</code>å‚æ•°è¿›è¡Œæ§åˆ¶æ— ç”¨çš„ç±»å›æ”¶ã€‚</p>\n<h1 id=\"åƒåœ¾æ”¶é›†ç®—æ³•\"><a href=\"#åƒåœ¾æ”¶é›†ç®—æ³•\" class=\"headerlink\" title=\"åƒåœ¾æ”¶é›†ç®—æ³•\"></a>åƒåœ¾æ”¶é›†ç®—æ³•</h1><h2 id=\"æ ‡è®°-æ¸…é™¤ç®—æ³•\"><a href=\"#æ ‡è®°-æ¸…é™¤ç®—æ³•\" class=\"headerlink\" title=\"æ ‡è®°-æ¸…é™¤ç®—æ³•\"></a>æ ‡è®°-æ¸…é™¤ç®—æ³•</h2><p>æœ€åŸºæœ¬çš„æ”¶é›†ç®—æ³•æ˜¯æ ‡è®°-æ¸…é™¤ï¼ˆMark-Sweepï¼‰ç®—æ³•ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>\n<ol>\n<li>æ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡</li>\n<li>ç»Ÿä¸€å›æ”¶æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡</li>\n</ol>\n<p>æ ‡è®°-æ¸…é™¤ç®—æ³•çš„ç¤ºæ„å›¾å¦‚ä¸‹</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180815_jvm_03/æ ‡è®°æ¸…é™¤.jpeg\" alt=\"æ ‡è®°æ¸…é™¤\" title=\"\">\n                </div>\n                <div class=\"image-caption\">æ ‡è®°æ¸…é™¤</div>\n            </figure>\n<p>æ ‡è®°-æ¸…é™¤ç®—æ³•ä¸»è¦ä¸è¶³æœ‰ä¸¤ä¸ª</p>\n<ol>\n<li>æ•ˆç‡é—®é¢˜ï¼Œæ ‡è®°å’Œæ¸…é™¤çš„æ•ˆç‡éƒ½ä¸é«˜</li>\n<li>ç©ºé—´é—®é¢˜ï¼Œæ¸…æ¥šä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡</li>\n</ol>\n<h2 id=\"å¤åˆ¶ç®—æ³•\"><a href=\"#å¤åˆ¶ç®—æ³•\" class=\"headerlink\" title=\"å¤åˆ¶ç®—æ³•\"></a>å¤åˆ¶ç®—æ³•</h2><p>å¤åˆ¶ï¼ˆCopyingï¼‰ç®—æ³•ä¸»è¦ç›®çš„æ˜¯è§£å†³æ•ˆç‡é—®é¢˜ï¼Œå®ƒå°†å¯ç”¨å†…å­˜å¹³å‡åˆ†ä¸ºä¸¤ä¸ªåŠåŒºï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­ä¸€ä¸ªåŠåŒºï¼Œåœ¨è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå°†ä»å­˜æ´»çš„å¯¹è±¡å¤åˆ¶åˆ°å¦åŠåŒºä¸Šï¼Œç„¶åæ¸…ç©ºåˆšåˆšä½¿ç”¨çš„åŠåŒºã€‚å¤åˆ¶ç®—æ³•çš„å®ç°ç®€å•è¿è¡Œé«˜æ•ˆï¼Œä¸è¶³æ˜¯ç©ºé—´åˆ©ç”¨ç‡å¤ªä½ï¼Œåªä½¿ç”¨äº†ä¸€åŠçš„å†…å­˜ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180815_jvm_03/å¤åˆ¶.jpg\" alt=\"å¤åˆ¶\" title=\"\">\n                </div>\n                <div class=\"image-caption\">å¤åˆ¶</div>\n            </figure>\n<p>ç°åœ¨çš„å•†ä¸šè™šæ‹Ÿæœºéƒ½é‡‡ç”¨å¤åˆ¶ç®—æ³•æ¥å›æ”¶<strong>æ–°ç”Ÿä»£</strong>ï¼ŒIBM ç ”ç©¶è¡¨æ˜æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡å¤šè¾¾ 98% æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æŒ‰ç…§ 1:1 çš„æ¯”ä¾‹æ¥åˆ’åˆ†å†…å­˜ã€‚è€Œæ˜¯å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„ Eden ç©ºé—´å’Œä¸¤å—è¾ƒå°çš„ Survivor ç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨ Eden ç©ºé—´å’Œå…¶ä¸­ä¸€å— Survivor ç©ºé—´ï¼ˆç§°ä¸º From Survivorï¼‰ï¼Œåœ¨å›æ”¶æ—¶å°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å— Survivor ç©ºé—´ï¼ˆç§°ä¸º To Survivorï¼‰ï¼Œå¹¶æ¸…ç†æ‰ Eden ä»¥åŠ From Survivor ç©ºé—´ã€‚HotSpot è™šæ‹Ÿæœºé»˜è®¤å¯¹ Eden å’Œ Survivor ç©ºé—´åˆ†é…æ¯”ä¾‹ä¸º 8:1ã€‚</p>\n<p>å½“ GC è¿‡ç¨‹ä¸­å‘ç° To Survivor ç©ºé—´ä¸å¤Ÿç”¨æ—¶ï¼Œéœ€è¦ä¾èµ–å…¶ä»–å†…å­˜ï¼ˆè€å¹´ä»£ï¼‰è¿›è¡Œåˆ†é…æ‹…ä¿ï¼ˆHandle Promotionï¼‰ã€‚</p>\n<h2 id=\"æ ‡è®°-æ•´ç†ç®—æ³•\"><a href=\"#æ ‡è®°-æ•´ç†ç®—æ³•\" class=\"headerlink\" title=\"æ ‡è®°-æ•´ç†ç®—æ³•\"></a>æ ‡è®°-æ•´ç†ç®—æ³•</h2><p>å¤åˆ¶ç®—æ³•å¯¹äºå¯¹è±¡å­˜æ´»ç‡é«˜çš„åœºæ™¯å¹¶ä¸é€‚ç”¨ï¼Œå› ä¸ºéœ€è¦é¢‘ç¹è¿›è¡Œå¤åˆ¶æ“ä½œï¼›å¹¶ä¸”å®ƒè¿˜éœ€è¦é¢å¤–ç©ºé—´è¿›è¡Œåˆ†é…æ‹…ä¿ã€‚å› æ­¤ï¼Œåœ¨è€å¹´ä»£ä¸­é€šå¸¸ä¸ä½¿ç”¨å¤åˆ¶ç®—æ³•è¿›è¡Œå†…å­˜å›æ”¶ï¼Œè€Œæ˜¯ä½¿ç”¨çš„æ ‡è®°-æ•´ç†ï¼ˆMark-Compactï¼‰ç®—æ³•ï¼š</p>\n<ol>\n<li>æ ‡è®°è¿‡ç¨‹ä¸â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ç›¸åŒï¼Œå…ˆæ˜¯æ ‡è®°å‡ºä»ç„¶å­˜æ´»çš„å¯¹è±¡</li>\n<li>æŠŠæ‰€æœ‰å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨</li>\n<li>æ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜</li>\n</ol>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180815_jvm_03/æ ‡è®°æ•´ç†.png\" alt=\"æ ‡è®°æ•´ç†\" title=\"\">\n                </div>\n                <div class=\"image-caption\">æ ‡è®°æ•´ç†</div>\n            </figure>\n<h2 id=\"åˆ†ä»£æ”¶é›†ç®—æ³•\"><a href=\"#åˆ†ä»£æ”¶é›†ç®—æ³•\" class=\"headerlink\" title=\"åˆ†ä»£æ”¶é›†ç®—æ³•\"></a>åˆ†ä»£æ”¶é›†ç®—æ³•</h2><p>å½“ä»£å•†ä¸šè™šæ‹Ÿæœºé‡‡ç”¨çš„éƒ½æ˜¯åˆ†ä»£æ”¶é›†ç®—æ³•ï¼ˆGenerational Collectionï¼‰ï¼Œå°† Java å †åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹é‡‡ç”¨æœ€åˆé€‚çš„æ”¶é›†ç®—æ³•ã€‚</p>\n<ul>\n<li>æ–°ç”Ÿä»£ï¼šå¯¹è±¡å­˜æ´»å‘¨æœŸçŸ­ï¼Œæ¯æ¬¡åƒåœ¾æ”¶é›†æ—¶æœ‰å¤§é‡å¯¹è±¡æ­»å»ï¼Œåªæœ‰å°‘é‡å­˜æ´»ï¼Œä½¿ç”¨<strong>å¤åˆ¶</strong>ç®—æ³•</li>\n<li>è€å¹´ä»£ï¼šå¯¹è±¡å­˜æ´»å‘¨æœŸé•¿ï¼Œå­˜æ´»ç‡é«˜ï¼Œæ²¡æœ‰é¢å¤–ç©ºé—´å¯¹å®ƒè¿›è¡Œåˆ†é…æ‹…ä¿ï¼Œé‡‡ç”¨<strong>æ ‡è®°-æ¸…é™¤</strong>æˆ–è€…<strong>æ ‡è®°-æ•´ç†</strong>ç®—æ³•</li>\n</ul>\n<h1 id=\"HotSpot-çš„ç®—æ³•å®ç°\"><a href=\"#HotSpot-çš„ç®—æ³•å®ç°\" class=\"headerlink\" title=\"HotSpot çš„ç®—æ³•å®ç°\"></a>HotSpot çš„ç®—æ³•å®ç°</h1><p>åœ¨è™šæ‹Ÿæœºä¸Šå®ç°ä¹‹å‰æ‰€è¿°çš„ç®—æ³•æ—¶ï¼Œå¿…éœ€å¯¹ç®—æ³•çš„æ‰§è¡Œæ•ˆç‡æœ‰ä¸¥æ ¼è€ƒé‡ï¼Œæ‰èƒ½ä¿è¯è™šæ‹Ÿæœºé«˜æ•ˆè¿è¡Œã€‚</p>\n<h2 id=\"æšä¸¾æ ¹èŠ‚ç‚¹\"><a href=\"#æšä¸¾æ ¹èŠ‚ç‚¹\" class=\"headerlink\" title=\"æšä¸¾æ ¹èŠ‚ç‚¹\"></a>æšä¸¾æ ¹èŠ‚ç‚¹</h2><p>ä¹‹å‰è®²åˆ°ä½œä¸º GC Roots çš„åŒºåŸŸä¸»è¦æ˜¯å…¨å±€æ€§å¼•ç”¨ï¼ˆå¸¸é‡ã€ç±»é™æ€å±æ€§ï¼‰å’Œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡ï¼‰ï¼Œå¾ˆå¤šåº”ç”¨ä»…ä»…æ–¹æ³•åŒºå°±æœ‰æ•°ç™¾å…†ï¼Œå¦‚æœé€ä¸ªæ£€æŸ¥å¼•ç”¨ï¼Œå¿…ç„¶ä¼šæ¶ˆè€—å¾ˆå¤šæ—¶é—´ã€‚</p>\n<p>æ­¤å¤–ï¼Œå¯è¾¾æ€§åˆ†æå¯¹æ‰§è¡Œæ—¶é—´çš„æ•æ„Ÿè¿˜ä½“ç°åœ¨ <strong>GC åœé¡¿</strong> ä¸Šï¼Œå› ä¸ºå¯è¾¾æ€§åˆ†æå¿…é¡»åœ¨ä¸€ä¸ªèƒ½ç¡®ä¿ä¸€è‡´æ€§çš„å¿«ç…§ä¸­è¿›è¡Œï¼ˆåˆ†æè¿‡ç¨‹ä¸­å¯¹è±¡å¼•ç”¨å…³ç³»ä¸å¯ä»¥å‘ç”Ÿå˜åŒ–ï¼‰ï¼ŒGC æ—¶å¿…é¡»åœé¡¿æ‰€æœ‰çš„ Java æ‰§è¡Œçº¿ç¨‹ï¼ˆç§°ä¸º Stop The Worldï¼‰ã€‚</p>\n<p>ç›®å‰æ‰€æœ‰ä¸»æµè™šæ‹Ÿæœºé‡‡ç”¨çš„éƒ½æ˜¯å‡†ç¡®å¼ GCï¼Œå½“æ‰§è¡Œç³»ç»Ÿåœé¡¿ä¸‹æ¥æ—¶ï¼Œè™šæ‹Ÿæœºæœ‰åŠæ³•çŸ¥é“ï¼Œå“ªäº›åœ°æ–¹å­˜æ”¾ç€å¯¹è±¡å¼•ç”¨ã€‚åœ¨ HotSpot å®ç°ä¸­ï¼Œä½¿ç”¨ä¸€ç»„ç§°ä¸º <strong>OopMap</strong> çš„æ•°æ®ç»“æ„è¾¾æˆè¿™ä¸ªç›®çš„ã€‚åœ¨ç±»åŠ è½½å®Œæˆæ—¶ï¼ŒHotSpot æŠŠå¯¹è±¡å†…ä»€ä¹ˆåç§»é‡ä¸Šæ˜¯ä»€ä¹ˆç±»å‹çš„æ•°æ®è®¡ç®—å‡ºæ¥ï¼Œåœ¨ JIT ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¼šåœ¨ç‰¹å®šçš„ä½ç½®è®°å½•ä¸‹æ ˆå’Œå¯„å­˜å™¨ä¸­å“ªäº›ä½ç½®æ˜¯å¼•ç”¨ã€‚</p>\n<h2 id=\"å®‰å…¨ç‚¹\"><a href=\"#å®‰å…¨ç‚¹\" class=\"headerlink\" title=\"å®‰å…¨ç‚¹\"></a>å®‰å…¨ç‚¹</h2><p>åœ¨ OopMap ååŠ©ä¸‹ï¼ŒHotSpot å¯ä»¥å¿«é€Ÿä¸”å‡†ç¡®åœ°å®Œæˆ GC Roots çš„æšä¸¾ï¼Œç„¶è€Œå­˜åœ¨ä¸€ä¸ªå¾ˆç°å®çš„é—®é¢˜ï¼šå¯èƒ½å¯¼è‡´å¼•ç”¨å…³ç³»å˜åŒ–ï¼Œæˆ–è€…è¯´ OopMap å†…å®¹å˜åŒ–çš„æŒ‡ä»¤éå¸¸å¤šï¼Œå¦‚æœä¸ºæ¯ä¸€æ¡æŒ‡ä»¤éƒ½ç”Ÿæˆå¯¹åº”çš„ OopMapï¼Œå°†éœ€è¦å¤§é‡çš„é¢å¤–ç©ºé—´ï¼Œå¯¼è‡´ GC çš„ç©ºé—´æˆæœ¬éå¸¸é«˜ã€‚</p>\n<p>HotSpot å¤„ç†çš„æ–¹æ³•æ˜¯ï¼Œå¹¶æ²¡æœ‰ä¸ºæ¯ä¸€æ¡æŒ‡ä»¤éƒ½ç”Ÿæˆ OopMapï¼Œåªæ˜¯åœ¨â€œç‰¹å®šçš„ä½ç½®â€è®°å½•è¿™äº›ä¿¡æ¯ï¼Œè¿™äº›ä½ç½®ç§°ä¸ºå®‰å…¨ç‚¹ï¼ˆSafepointï¼‰ï¼Œå³ç¨‹åºæ‰§è¡Œæ—¶å¹¶éåœ¨æ‰€æœ‰åœ°æ–¹éƒ½èƒ½åœé¡¿ä¸‹æ¥å¼€å§‹ GCï¼Œåªæœ‰åœ¨åˆ°è¾¾å®‰å…¨ç‚¹æ—¶æ‰æš‚åœã€‚å®‰å…¨ç‚¹çš„é€‰å®šåŸºæœ¬ä¸Šæ˜¯ä»¥ç¨‹åºâ€œæ˜¯å¦å…·æœ‰è®©ç¨‹åºé•¿æ—¶é—´æ‰§è¡Œçš„ç‰¹å¾â€ä¸ºæ ‡å‡†è¿›è¡Œé€‰å®šçš„â€”â€”å› ä¸ºæ¯æ¡æŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´éƒ½éå¸¸çŸ­æš‚ï¼Œç¨‹åºä¸å¤ªå¯èƒ½å› ä¸ºæŒ‡ä»¤æµé•¿åº¦å¤ªé•¿è¿™ä¸ªåŸå› è€Œè¿‡é•¿æ—¶é—´è¿è¡Œã€‚ï¼ˆ<span style=\"color:red\">è¿™éƒ¨åˆ†ä¸ç†è§£</span>ï¼‰</p>\n<p>å¯¹äº Safepoint å¦ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„ç‚¹æ˜¯å¦‚ä½•åœ¨ GC æ—¶è®©æ‰€æœ‰çº¿ç¨‹éƒ½è¿è¡Œåˆ°å®‰å…¨ç‚¹ä¸Šåœé¡¿ä¸‹æ¥ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹æ¡ˆï¼š</p>\n<ul>\n<li>æŠ¢å…ˆå¼ä¸­æ–­ï¼ˆPreemptive Suspensionï¼‰ï¼šGC å‘ç”Ÿæ—¶ä¸­æ–­æ‰€æœ‰çº¿ç¨‹ï¼Œå¦‚æœæœ‰çº¿ç¨‹ä¸­æ–­åœ°æ–¹ä¸å¤„äºå®‰å…¨ç‚¹ï¼Œåˆ™è®©è¯¥çº¿ç¨‹è¿è¡Œè‡³å®‰å…¨ç‚¹ã€‚ç°åœ¨å‡ ä¹æ²¡æœ‰è™šæ‹Ÿæœºé‡‡ç”¨æŠ¢å…ˆå¼ä¸­æ–­æ¥æš‚åœçº¿ç¨‹ä»è€Œå“åº” GC äº‹ä»¶ã€‚</li>\n<li>ä¸»åŠ¨å¼ä¸­æ–­ï¼ˆVoluntary Suspensionï¼‰ï¼šå½“ GC éœ€è¦ä¸­æ–­æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ã€‚å„ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶ä¸»åŠ¨è½®è¯¢è¿™ä¸ªæ ‡å¿—ï¼Œå‘ç°ä¸­æ–­æ ‡å¿—ä¸ºçœŸæ—¶å°±è‡ªå·±ä¸­æ–­æŒ‚èµ·ã€‚è½®è¯¢æ ‡å¿—çš„åœ°æ–¹å’Œå®‰å…¨ç‚¹æ˜¯é‡åˆçš„ï¼Œå¦å¤–å†åŠ ä¸Šåˆ›å»ºå¯¹è±¡éœ€è¦åˆ†é…å†…å­˜çš„åœ°æ–¹ã€‚</li>\n</ul>\n<h2 id=\"å®‰å…¨åŒºåŸŸ\"><a href=\"#å®‰å…¨åŒºåŸŸ\" class=\"headerlink\" title=\"å®‰å…¨åŒºåŸŸ\"></a>å®‰å…¨åŒºåŸŸ</h2><p>Safepoint æœºåˆ¶ä¿è¯ç¨‹åºæ‰§è¡Œæ—¶è¿›å…¥ GC çš„å¯è¡Œæ€§ï¼Œä½†æ˜¯ï¼Œå½“ç¨‹åºä¸æ‰§è¡Œçš„æ—¶å€™ï¼ˆå³æ²¡æœ‰åˆ†é… CPU äº‹ä»¶ï¼Œä¾‹å¦‚çº¿ç¨‹å¤„äº Sleep çŠ¶æ€æˆ–è€… Blocked çŠ¶æ€ï¼‰ï¼Œçº¿ç¨‹æ— æ³•å“åº” JVM çš„ä¸­æ–­è¯·æ±‚ï¼Œæ— æ³•è½®è¯¢è‡ªç„¶æ— æ³•è¿è¡Œè‡³å®‰å…¨ç‚¹å†ä¸­æ–­æŒ‚èµ·ï¼Œ<strong>å®‰å…¨åŒºåŸŸ</strong> ï¼ˆSafe Regionï¼‰å°±æ˜¯ç”¨æ¥è§£å†³è¿™ç§é—®é¢˜çš„ã€‚</p>\n<blockquote>\n<p>å®‰å…¨åŒºåŸŸæ˜¯æŒ‡åœ¨ä¸€æ®µä»£ç ç‰‡æ®µä¹‹ä¸­ï¼Œå¼•ç”¨å…³ç³»ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚åœ¨è¿™ä¸ªåŒºåŸŸä¸­çš„ä»»æ„åœ°æ–¹å¼€å§‹ GC éƒ½æ˜¯å®‰å…¨çš„ã€‚å¯ä»¥æŠŠ Safe Region çœ‹ä½œæ˜¯æ‰©å±•äº†çš„ Safepointã€‚</p>\n</blockquote>\n<ul>\n<li>å½“çº¿ç¨‹æ‰§è¡Œåˆ° Safe Region ä¸­çš„ä»£ç æ—¶ï¼Œé¦–å…ˆæ ‡è¯†è‡ªå·±å·²ç»è¿›å…¥äº† Safe Region</li>\n<li>å½“è¿™æ®µæ—¶é—´é‡Œ JVM éœ€è¦å‘èµ· GC æ—¶ï¼Œå¯¹äºæ ‡è¯†è‡ªå·±ä¸º Safe Region çŠ¶æ€çš„çº¿ç¨‹è®¤ä¸ºå®ƒæ˜¯å®‰å…¨çŠ¶æ€</li>\n<li>å½“çº¿ç¨‹éœ€è¦ç¦»å¼€ Safe Region æ—¶ï¼Œæ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å·²ç»å®Œæˆäº†æ ¹èŠ‚ç‚¹æšä¸¾ï¼Œå¦‚æœå®Œæˆåˆ™çº¿ç¨‹ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™ç­‰å¾…ç›´è‡³æ”¶åˆ°å¯ä»¥å®‰å…¨ç¦»å¼€ Safe Region çš„ä¿¡å·ä¸ºæ­¢</li>\n</ul>\n<h1 id=\"åƒåœ¾æ”¶é›†å™¨\"><a href=\"#åƒåœ¾æ”¶é›†å™¨\" class=\"headerlink\" title=\"åƒåœ¾æ”¶é›†å™¨\"></a>åƒåœ¾æ”¶é›†å™¨</h1><p>å¦‚æœè¯´æ”¶é›†ç®—æ³•æ˜¯å†…å­˜å›æ”¶çš„æ–¹æ³•è®ºï¼Œé‚£ä¹ˆåƒåœ¾æ”¶é›†å™¨å°±æ˜¯å†…å­˜å›æ”¶çš„å…·ä½“å®ç°ã€‚ä¸‹å›¾å±•ç¤ºäº† 7 ç§ä½œç”¨äºä¸åŒåˆ†ä»£çš„åƒåœ¾æ”¶é›†å™¨ï¼Œå­˜åœ¨è¿çº¿çš„åƒåœ¾æ”¶é›†å™¨å¯ä»¥æ­é…ä½¿ç”¨ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180815_jvm_03/hotspotåƒåœ¾æ”¶é›†å™¨.jpg\" alt=\"HotSpotåƒåœ¾æ”¶é›†å™¨\" title=\"\">\n                </div>\n                <div class=\"image-caption\">HotSpotåƒåœ¾æ”¶é›†å™¨</div>\n            </figure>\n<h2 id=\"Serial-æ”¶é›†å™¨\"><a href=\"#Serial-æ”¶é›†å™¨\" class=\"headerlink\" title=\"Serial æ”¶é›†å™¨\"></a>Serial æ”¶é›†å™¨</h2><ul>\n<li>æœ€åŸºæœ¬ã€å‘å±•å†å²æœ€æ‚ ä¹…çš„æ”¶é›†å™¨</li>\n<li>å•çº¿ç¨‹ï¼Œè¿›è¡Œåƒåœ¾æ”¶é›†æ—¶å¿…é¡»æš‚åœå…¶ä»–æ‰€æœ‰å·¥ä½œçº¿ç¨‹ï¼ˆStop The Worldï¼‰</li>\n<li>æ˜¯è™šæ‹Ÿæœºè¿è¡Œåœ¨ Client æ¨¡å¼ä¸‹é»˜è®¤çš„ <strong>æ–°ç”Ÿä»£æ”¶é›†å™¨</strong>ï¼Œåœ¨ç”¨æˆ·çš„æ¡Œé¢åœºæ™¯åº”ç”¨ä¸­ï¼Œåˆ†é…ç»™è™šæ‹Ÿæœºçš„å†…å­˜ä¸€åŠä¸ä¼šå¾ˆå¤§ï¼Œæ”¶é›†å‡ åå…†ä¹ƒè‡³ä¸€ä¸¤ç™¾å…†çš„æ–°ç”Ÿä»£ï¼Œåœé¡¿æ—¶é—´å¯ä»¥æ§åˆ¶åœ¨ 100 æ¯«ç§’ä¹‹å†…ï¼Œå¯ä»¥æ¥å—</li>\n<li>å¯¹äºå•ä¸ª CPU çš„æƒ…å†µï¼Œæ²¡æœ‰çº¿ç¨‹äº¤äº’çš„å¼€é”€ï¼Œå¯ä»¥è·å¾—æœ€é«˜çš„å•çº¿ç¨‹æ”¶é›†æ•ˆç‡</li>\n</ul>\n<h2 id=\"ParNew-æ”¶é›†å™¨\"><a href=\"#ParNew-æ”¶é›†å™¨\" class=\"headerlink\" title=\"ParNew æ”¶é›†å™¨\"></a>ParNew æ”¶é›†å™¨</h2><ul>\n<li>Serial æ”¶é›†å™¨çš„å¤šçº¿ç¨‹ç‰ˆæœ¬</li>\n<li>è®¸å¤šè¿è¡Œåœ¨ Server æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºé¦–é€‰çš„æ–°ç”Ÿä»£æ”¶é›†å™¨</li>\n<li>åªæœ‰å®ƒå¯ä»¥ä¸ CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨é…åˆå·¥ä½œ</li>\n<li>åœ¨å• CPU ç¯å¢ƒä¸­ï¼Œæ•ˆç‡ä¸å¦‚ Serial æ”¶é›†å™¨ï¼›é»˜è®¤å¼€å¯çš„æ”¶é›†çº¿ç¨‹æ•°ä¸ CPU æ•°é‡ç›¸åŒ</li>\n</ul>\n<h2 id=\"Parallel-Scavenge-æ”¶é›†å™¨\"><a href=\"#Parallel-Scavenge-æ”¶é›†å™¨\" class=\"headerlink\" title=\"Parallel Scavenge æ”¶é›†å™¨\"></a>Parallel Scavenge æ”¶é›†å™¨</h2><ul>\n<li>æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œé‡‡ç”¨å¤åˆ¶ç®—æ³•</li>\n<li>å…³æ³¨ç‚¹åœ¨äº <strong>è¾¾åˆ°å¯æ§åˆ¶çš„ååé‡ï¼ˆThroughputï¼‰</strong>ï¼Œ<code>ååé‡ = è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/(è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´ + åƒåœ¾æ”¶é›†æ—¶é—´)</code>ï¼Œæ˜¯ä¸€ä¸ªç™¾åˆ†æ•°</li>\n<li>åœé¡¿æ—¶é—´çŸ­çš„æ”¶é›†å™¨ï¼ˆä¾‹å¦‚ CMSï¼‰é€‚åˆä¸ç”¨æˆ·äº¤äº’çš„ç¨‹åºï¼›ååé‡é«˜çš„æ”¶é›†å™¨ï¼ˆä¾‹å¦‚ Parallelï¼‰é€‚åˆåå°è¿ç®—è€Œä¸éœ€è¦å¤ªå¤šäº¤äº’çš„ç¨‹åº</li>\n<li><strong>è‡ªé€‚åº”è°ƒèŠ‚ç­–ç•¥</strong>ï¼šè™šæ‹Ÿæœºä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´å‚æ•°ä»¥æä¾›æœ€åˆé€‚çš„åœé¡¿æ—¶é—´æˆ–è€…æœ€å¤§çš„ååé‡</li>\n</ul>\n<h2 id=\"Serail-Old-æ”¶é›†å™¨\"><a href=\"#Serail-Old-æ”¶é›†å™¨\" class=\"headerlink\" title=\"Serail Old æ”¶é›†å™¨\"></a>Serail Old æ”¶é›†å™¨</h2><ul>\n<li>Serial æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå•çº¿ç¨‹ï¼Œâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•</li>\n<li>ä¸»è¦æ„ä¹‰åœ¨äºç»™ Client æ¨¡å¼ä¸‹çš„è™šæ‹Ÿæœºä½¿ç”¨</li>\n</ul>\n<h2 id=\"Parallel-Old-æ”¶é›†å™¨\"><a href=\"#Parallel-Old-æ”¶é›†å™¨\" class=\"headerlink\" title=\"Parallel Old æ”¶é›†å™¨\"></a>Parallel Old æ”¶é›†å™¨</h2><ul>\n<li>Parallel Scanvenge æ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå¤šçº¿ç¨‹ï¼Œâ€œæ ‡è®°-æ•´ç†â€ç®—æ³•</li>\n<li>ååé‡ä¼˜å…ˆï¼šParallel Scanvenge + Parallel Old</li>\n</ul>\n<h2 id=\"CMSï¼ˆConcurrent-Mark-Sweepï¼‰æ”¶é›†å™¨\"><a href=\"#CMSï¼ˆConcurrent-Mark-Sweepï¼‰æ”¶é›†å™¨\" class=\"headerlink\" title=\"CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨\"></a>CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨</h2><ul>\n<li>ä»¥è·å–æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡ï¼Œåº”ç”¨äºç½‘ç«™ä»¥åŠ B/S ç³»ç»Ÿçš„æœåŠ¡ç«¯ï¼Œæ³¨é‡æœåŠ¡å“åº”é€Ÿåº¦ï¼Œå¸Œæœ›åœé¡¿æ—¶é—´æœ€çŸ­</li>\n<li>åŸºäºâ€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ï¼Œæ”¶é›†è¿‡ç¨‹åˆ†ä¸ºå››æ­¥</li>\n</ul>\n<ol>\n<li>åˆå§‹æ ‡è®°ï¼ˆCMS initial markï¼‰ï¼Œæ ‡è®° GC Roots èƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡</li>\n<li>å¹¶å‘æ ‡è®°ï¼ˆCMS concurrent markï¼‰ï¼Œè¿›è¡Œ GC Roots Tracing</li>\n<li>é‡æ–°æ ‡è®°ï¼ˆCMS remarkï¼‰ï¼Œä¿®æ­£å¹¶å‘æ ‡è®°æœŸé—´å› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•</li>\n<li>å¹¶å‘æ¸…é™¤ï¼ˆCMS concurrent sweepï¼‰</li>\n</ol>\n<ul>\n<li>åˆå§‹æ ‡è®°ã€é‡æ–°æ ‡è®°è¿™ä¸¤ä¸ªè¿‡ç¨‹éœ€è¦ Stop The World</li>\n<li>æœ‰ä¸‰ä¸ªæ˜æ˜¾ç¼ºç‚¹</li>\n</ul>\n<ol>\n<li>å¯¹ CPU èµ„æºéå¸¸æ•æ„Ÿï¼Œå¹¶å‘é˜¶æ®µä¼šå ç”¨ä¸€éƒ¨åˆ†çº¿ç¨‹ï¼ˆæˆ–è€…è¯´ CPU èµ„æºï¼‰å¯¼è‡´ç”¨æˆ·ç¨‹åºå˜æ…¢ï¼Œååé‡é™ä½ã€‚CMS é»˜è®¤å¯åŠ¨çš„å›æ”¶çº¿ç¨‹æ•°æ˜¯ï¼ˆCPUæ•°é‡ + 3ï¼‰/4ï¼Œå½“ CPU ä¸è¶³ 4 ä¸ªæ—¶ï¼Œå¯¹ç”¨æˆ·ç¨‹åºå½±å“å¯èƒ½å˜å¾—å¾ˆå¤§</li>\n<li>æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ï¼ˆFloating Garbageï¼‰ï¼Œå¯èƒ½å‡ºç°â€œConcurrent Mode Failuteâ€è€Œå¯¼è‡´å¦ä¸€æ¬¡ Full GC å‘ç”Ÿã€‚â€œæµ®åŠ¨åƒåœ¾â€æ˜¯æŒ‡å¹¶å‘æ¸…ç†é˜¶æ®µæ‰€äº§ç”Ÿçš„åƒåœ¾ï¼Œå¿…é¡»ä¸ºè¿™éƒ¨åˆ†åƒåœ¾æå‰é¢„ç•™ç©ºé—´ï¼Œä»¥ä¾›å¹¶å‘æ”¶é›†æ—¶ç¨‹åºè¿ä½œä½¿ç”¨</li>\n<li>å› ä¸ºé‡‡ç”¨çš„æ˜¯â€œæ ‡è®°-æ¸…ç†â€ç®—æ³•ï¼Œå½“ç©ºé—´ç¢ç‰‡è¿‡å¤šæ—¶ï¼Œæ— æ³•åˆ†é…å¤§å¯¹è±¡ï¼ŒCMS æ”¶é›†å™¨æä¾›<code>-XX:+UseCMSCompactAtFullCollection</code>å‚æ•°ï¼Œç”¨æ¥åœ¨ FullGC æ—¶å¼€å¯å‹ç¼©</li>\n</ol>\n<h2 id=\"G1ï¼ˆGarbage-Firstï¼‰-æ”¶é›†å™¨\"><a href=\"#G1ï¼ˆGarbage-Firstï¼‰-æ”¶é›†å™¨\" class=\"headerlink\" title=\"G1ï¼ˆGarbage-Firstï¼‰ æ”¶é›†å™¨\"></a>G1ï¼ˆGarbage-Firstï¼‰ æ”¶é›†å™¨</h2><ul>\n<li>JDK 1.7 æ­£å¼æ¨å‡ºï¼ˆ7u4ï¼‰ï¼Œé¢å‘æœåŠ¡ç«¯åº”ç”¨</li>\n<li><strong>ç‰¹ç‚¹</strong>ï¼šå¹¶è¡Œä¸å¹¶å‘ï¼Œåˆ†ä»£æ”¶é›†ï¼Œç©ºé—´æ•´åˆï¼Œå¯é¢„æµ‹çš„åœé¡¿</li>\n<li><strong>è¿‡ç¨‹</strong>ï¼šå°† Java å †åˆ’åˆ†ä¸ºå¤šä¸ªå¤§å°ç›¸ç­‰çš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œé¿å…åœ¨æ•´ä¸ª Java å †ä¸­è¿›è¡Œå…¨åŒºåŸŸçš„åƒåœ¾æ”¶é›†ï¼Œè€Œæ˜¯è¿½è¸ªå“¥å“¥ Region é‡Œé¢çš„åƒåœ¾å †ç§¯çš„ä»·å€¼å¤§å°ï¼ˆå›æ”¶æ‰€è·å¾—çš„ç©ºé—´å¤§å°åŠå›æ”¶æ‰€éœ€æ—¶é—´çš„ç»éªŒå€¼ï¼‰ï¼Œåœ¨åå°ç»´æŠ¤ä¸€ä¸ªæ‚ é—²åˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶ä»·å€¼æœ€å¤§çš„ Regionï¼ˆä¹Ÿæ˜¯ Garbage-First åå­—ç”±æ¥ï¼‰</li>\n<li>åˆ†ä¸º 4 ä¸ªæ­¥éª¤</li>\n</ul>\n<ol>\n<li>åˆå§‹æ ‡è®°</li>\n<li>å¹¶å‘æ ‡è®°</li>\n<li>æœ€ç»ˆæ ‡è®°</li>\n<li>ç­›é€‰å›æ”¶</li>\n</ol>\n","categories":[],"tags":["è¯»ä¹¦ç¬”è®°","JVM"]},{"title":"æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼ˆäºŒï¼‰JVM å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸","url":"https://lilei.pro/2018/08/09/JVM-Note-02/","content":"<blockquote>\n<p>æœ¬ç« ä»æ¦‚å¿µä¸Šä»‹ç» Java è™šæ‹Ÿæœºå†…å­˜çš„å„ä¸ªåŒºåŸŸï¼Œä»ä½œç”¨ã€æœåŠ¡å¯¹è±¡ã€å¯èƒ½äº§ç”Ÿçš„é—®é¢˜å‡ ä¸ªæ–¹é¢è¿›è¡Œè®²è§£ã€‚</p>\n</blockquote>\n<h1 id=\"è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ\"><a href=\"#è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ\" class=\"headerlink\" title=\"è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ\"></a>è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h1><p>æ ¹æ®ã€ŠJava è™šæ‹Ÿæœºè¿è¡Œè§„èŒƒã€‹çš„è§„å®šï¼ŒJava è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜å°†ä¼šåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè¿è¡Œæ—¶åŒºåŸŸï¼š</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180809_jvm_02/è™šæ‹Ÿæœºæ•°æ®åˆ†åŒº.png\" alt=\"è™šæ‹Ÿæœºæ•°æ®åˆ†åŒº\" title=\"\">\n                </div>\n                <div class=\"image-caption\">è™šæ‹Ÿæœºæ•°æ®åˆ†åŒº</div>\n            </figure> \n<ul>\n<li>çº¿ç¨‹ç§æœ‰ï¼šç¨‹åºè®¡æ•°å™¨ï¼Œè™šæ‹Ÿæœºæ ˆï¼Œæœ¬åœ°æ–¹æ³•æ ˆ</li>\n<li>çº¿ç¨‹å…±äº«ï¼šå †ï¼Œæ–¹æ³•åŒº</li>\n</ul>\n<h2 id=\"ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram-Counter-Registerï¼‰\"><a href=\"#ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram-Counter-Registerï¼‰\" class=\"headerlink\" title=\"ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰\"></a>ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰</h2><p>ç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰§è¡Œçš„å­—èŠ‚ç è¡Œå·æŒ‡ç¤ºå™¨ï¼ŒJVM é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼ï¼Œæ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½ã€‚</p>\n<p>ç¨‹åºè®¡æ•°å™¨ç©ºé—´æ˜¯ç§æœ‰çš„ï¼ŒåŸå› åœ¨äº Java è™šæ‹Ÿæœºæ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶åˆ†é…å¤„ç†å™¨æ—¶é—´æ¥å®ç°çš„å¤šçº¿ç¨‹ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ã€‚</p>\n<ul>\n<li>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œ Java æ–¹æ³•ï¼Œåˆ™ç¨‹åºè®¡æ•°å™¨è®°å½•çš„æ˜¯è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤åœ°å€</li>\n<li>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œ Native æ–¹æ³•ï¼Œåˆ™ç¨‹åºè®¡æ•°å™¨å€¼ä¸ºç©ºï¼ˆUndefinedï¼‰</li>\n</ul>\n<p>ç¨‹åºè®¡æ•°å™¨æ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­ä¸ä¼šå‘ç”Ÿ OutOfMemoryError çš„åŒºåŸŸã€‚</p>\n<h2 id=\"Java-è™šæ‹Ÿæœºæ ˆï¼ˆJava-Virtual-Machine-Stacksï¼‰\"><a href=\"#Java-è™šæ‹Ÿæœºæ ˆï¼ˆJava-Virtual-Machine-Stacksï¼‰\" class=\"headerlink\" title=\"Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰\"></a>Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰</h2><p>æè¿° Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼šæ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œæ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ï¼ˆStack Frameï¼‰ï¼Œç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ–¹æ³•è¿è¡Œä»å¼€å§‹åˆ°ç»“æŸï¼Œå¯¹åº”çš„æ˜¯æ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåŠå‡ºæ ˆçš„è¿‡ç¨‹ã€‚ä»¥ä¸‹ç€é‡ä»‹ç»<strong>å±€éƒ¨å˜é‡è¡¨</strong>ã€‚</p>\n<p>å±€éƒ¨å˜é‡è¡¨å­˜æ”¾ä»¥ä¸‹ç±»å‹çš„å˜é‡ï¼Œå…¶ä¸­ 64 ä½é•¿åº¦çš„ long å’Œ double ç±»å‹æ•°æ®ä¼šå ç”¨ 2 ä¸ªå±€éƒ¨å˜é‡ç©ºé—´ï¼ˆSlotï¼‰ï¼Œå…¶ä½™æ•°æ®ç±»å‹åªå æ® 1 ä¸ªã€‚</p>\n<ul>\n<li>ç¼–è¯‘æœŸå·²çŸ¥çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼šbooleanã€byteã€charã€shortã€intã€floatã€longã€double</li>\n<li>å¯¹è±¡å¼•ç”¨ï¼šreference ç±»å‹ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®</li>\n<li>returnAddress ç±»å‹ï¼šæŒ‡å‘å­—èŠ‚ç æŒ‡ä»¤åœ°å€</li>\n</ul>\n<p>å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…ä¿ƒå†œå»ºåœ¨ç¼–è¯‘æœŸé—´å®Œæˆåˆ†é…ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ›´æ”¹å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚</p>\n<p>åœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­ï¼Œå¯¹è¿™ä¸ªåŒºåŸŸè§„å®šäº†ä¸¤ç§å¼‚å¸¸æƒ…å†µï¼š</p>\n<ol>\n<li>StackOverflowError: çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦</li>\n<li>OutOfMemoryError: è™šæ‹Ÿæœºæ ˆè¿›è¡ŒåŠ¨æ€æ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜</li>\n</ol>\n<h2 id=\"æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stackï¼‰\"><a href=\"#æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stackï¼‰\" class=\"headerlink\" title=\"æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰\"></a>æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰</h2><p>ç±»ä¼¼äºè™šæ‹Ÿæœºæ ˆï¼Œåªä¸è¿‡æœ¬åœ°æ–¹æ³•æ ˆæ˜¯ä¸ºæœ¬åœ°æ–¹æ³•æœåŠ¡ã€‚åŒæ ·ä¼šæŠ›å‡º StackOverflowError å’Œ OutOfMemoryErrorã€‚</p>\n<h2 id=\"Java-å †ï¼ˆHeapï¼‰\"><a href=\"#Java-å †ï¼ˆHeapï¼‰\" class=\"headerlink\" title=\"Java å †ï¼ˆHeapï¼‰\"></a>Java å †ï¼ˆHeapï¼‰</h2><p>æ˜¯ Java è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—åŒºåŸŸï¼Œè¢«æ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚å †å­˜åœ¨çš„å”¯ä¸€æ„ä¹‰æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­çš„è¡¨è¿°æ˜¯â€œæ‰€æœ‰çš„å¯¹è±¡å’Œæ•°ç»„éƒ½è¦åœ¨å †ä¸Šåˆ†é…â€ã€‚ä½†æ˜¯éšç€ JIT ç¼–è¯‘å™¨çš„å‘å±•ä¸é€ƒé€¸åˆ†ææŠ€æœ¯é€æ¸æˆç†Ÿï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢ä¼˜åŒ–æŠ€æœ¯å°†ä¼šå¯¼è‡´è¿™ä¸€è§„åˆ™ä¸å†é‚£ä¹ˆç»å¯¹ã€‚GC å°±æ˜¯å¯¹å †ä¸Šçš„å¯¹è±¡è¿›è¡Œå›æ”¶ã€‚å †åŒºåŸŸç©ºé—´ä¸è¶³ä¼šå¯¼è‡´ OOMã€‚</p>\n<h2 id=\"æ–¹æ³•åŒºï¼ˆMethod-Areaï¼‰\"><a href=\"#æ–¹æ³•åŒºï¼ˆMethod-Areaï¼‰\" class=\"headerlink\" title=\"æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰\"></a>æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</h2><p>ä¹Ÿæ˜¯çº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚åˆ«å Non-Heapã€‚HotSpot è™šæ‹Ÿæœºè®¾è®¡å›¢é˜Ÿé€‰æ‹©æŠŠ GC åˆ†ä»£æ”¶é›†æ‰©å±•è‡³æ–¹æ³•åŒºï¼Œå¯¼è‡´ä¹Ÿæœ‰äººç§°å‘¼æ–¹æ³•åŒºä¸ºâ€œæ°¸ä¹…ä»£â€ï¼ˆPermanent Generationï¼‰ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®è·µï¼Œä¼šå¯¼è‡´å†…å­˜æº¢å‡ºé—®é¢˜ï¼Œè€Œä¸”æå°‘æ•°çš„æ–¹æ³•ä¼šå› ä¸ºè¿™ä¸ªåŸå› è€Œåœ¨ä¸åŒè™šæ‹Ÿæœºä¸Šäº§ç”Ÿä¸åŒè¡¨ç°ã€‚</p>\n<p>åƒåœ¾æ”¶é›†è¡Œä¸ºåœ¨æ–¹æ³•åŒºæ˜¯è¾ƒå°‘å‡ºç°çš„ï¼Œè€Œä¸”å›æ”¶ç‡ä¸é«˜ï¼Œå›æ”¶ç›®æ ‡ä¸»è¦æ˜¯é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶å’Œå¯¹ç±»å‹çš„å¸è½½ã€‚</p>\n<p><strong>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</strong> æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼ŒClass æ–‡ä»¶é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± ï¼ˆConstant Pool Tableï¼‰ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ã€‚å¯èƒ½ä¼šæŠ›å‡º OOM å¼‚å¸¸ã€‚</p>\n<h2 id=\"ç›´æ¥å†…å­˜ï¼ˆDirect-Memoryï¼‰\"><a href=\"#ç›´æ¥å†…å­˜ï¼ˆDirect-Memoryï¼‰\" class=\"headerlink\" title=\"ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰\"></a>ç›´æ¥å†…å­˜ï¼ˆDirect Memoryï¼‰</h2><p>ç›´æ¥å†…å­˜ä¸æ˜¯ JVM è¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼ŒJDK 1.4 ä¸­æ–°åŠ å…¥äº† NIOï¼ˆNew Input/Outputï¼‰ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“ï¼ˆChannelï¼‰ä¸ç¼“å†²åŒºï¼ˆBufferï¼‰çš„ I/O æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚ä»è€Œé¿å…åœ¨ Java å †å’Œ Native å †ä¸­æ¥å›å¤åˆ¶æŠ¤å…·ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ã€‚ä½¿ç”¨ä¸å½“ä¼šæœ‰ OOM å¼‚å¸¸ã€‚</p>\n<h1 id=\"HotSpot-è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜\"><a href=\"#HotSpot-è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜\" class=\"headerlink\" title=\"HotSpot è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜\"></a>HotSpot è™šæ‹Ÿæœºå¯¹è±¡æ¢ç§˜</h1><p>åŸºäºå®ç”¨ä¼˜å…ˆåŸåˆ™ï¼Œä»¥ HotSpot è™šæ‹Ÿæœºä¸ºä¾‹ï¼Œå­¦ä¹ åœ¨å®ƒåœ¨ Java å †ä¸­å¯¹è±¡åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹ã€‚</p>\n<h2 id=\"å¯¹è±¡åˆ›å»º\"><a href=\"#å¯¹è±¡åˆ›å»º\" class=\"headerlink\" title=\"å¯¹è±¡åˆ›å»º\"></a>å¯¹è±¡åˆ›å»º</h2><p>åœ¨è¯­è¨€å±‚é¢ä¸Šï¼Œå¯¹è±¡åˆ›å»ºåªéœ€è¦<code>new</code>å…³é”®å­—å³å¯å®Œæˆã€‚ä½†æ˜¯åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè¿™ä¸€è¿‡ç¨‹èƒŒåå®é™…ä¸Šå¹¶ä¸é‚£ä¹ˆç®€å•ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180809_jvm_02/å¹¶ä¸ç®€å•.jpg\" alt=\"å¹¶ä¸ç®€å•\" title=\"\">\n                </div>\n                <div class=\"image-caption\">å¹¶ä¸ç®€å•</div>\n            </figure> \n<h3 id=\"ç±»åŠ è½½\"><a href=\"#ç±»åŠ è½½\" class=\"headerlink\" title=\"ç±»åŠ è½½\"></a>ç±»åŠ è½½</h3><p>è™šæ‹Ÿæœºæ”¶åˆ°ä¸€æ¡<code>new</code>æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå»æ£€æŸ¥æŒ‡ä»¤å‚æ•°èƒ½å¦åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œåˆ™ä¼šè¿›è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚</p>\n<h3 id=\"åˆ†é…å†…å­˜\"><a href=\"#åˆ†é…å†…å­˜\" class=\"headerlink\" title=\"åˆ†é…å†…å­˜\"></a>åˆ†é…å†…å­˜</h3><p>å¯¹è±¡æ‰€éœ€å†…å­˜å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåå³å¯å®Œå…¨ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…å†…å­˜çš„æ“ä½œç›¸å½“äºä»å †ä¸­åˆ’åˆ†å‡ºä¸€å—å¯ä½¿ç”¨çš„åŒºåŸŸã€‚æœ‰ä¸¤ç§åˆ†é…æ–¹å¼ï¼š</p>\n<ul>\n<li>æŒ‡é’ˆç¢°æ’ (Bump the Pointerï¼‰ï¼šå½“ Java å †ä¸­çš„å†…å­˜æ˜¯ç»å¯¹è§„æ•´çš„ï¼Œç”¨è¿‡çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜åˆ†ä¸¤è¾¹å­˜æ”¾ï¼Œå¹¶ä¸”æœ‰æŒ‡é’ˆæŒ‡å‘æ˜ç¡®çš„ç•Œé™ï¼Œæ­¤æ—¶åˆ†é…å†…å­˜åªéœ€è¦å°†æŒ‡é’ˆç§»åŠ¨ä¸å¯¹è±¡å¤§å°ç›¸åŒè·ç¦»å³å¯ã€‚Serialã€ParNew ç­‰å¸¦ Compact è¿‡ç¨‹çš„æ”¶é›†å™¨é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚</li>\n<li>ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰ï¼šå½“å†…å­˜ä¸è§„æ•´ã€ç”¨è¿‡çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜äº¤å‰æ’åˆ—æ—¶ï¼Œéœ€è¦ç”±è™šæ‹Ÿæœºç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨è®°å½•å“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œåˆ†é…æ—¶ä¸ºå¯¹è±¡å¯»æ‰¾ä¸€å—è¶³å¤Ÿå¤§çš„åŒºåŸŸå¹¶æ›´æ–°åˆ—è¡¨ã€‚CMS è¿™ç§åŸºäº Mark-Sweep ç®—æ³•çš„æ”¶é›†å™¨é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚</li>\n</ul>\n<p>é™¤äº†åˆ’åˆ†å¯ç”¨ç©ºé—´å¤–ï¼Œè¿˜éœ€è¦è€ƒè™‘ç§»åŠ¨æŒ‡é’ˆå¸¦æ¥çš„å¹¶å‘é—®é¢˜ã€‚è§£å†³å¹¶å‘é—®é¢˜æœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼š</p>\n<ul>\n<li>å¯¹åˆ†é…å†…å­˜ç©ºé—´çš„åŠ¨ä½œè¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œè™šæ‹Ÿæœºé‡‡ç”¨ CAS é…ä¸Šå¤±è´¥é‡è¯•çš„æ–¹æ³•ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§</li>\n<li>æŠŠå†…å­˜åˆ†é…çš„åŠ¨ä½œæŒ‰ç…§çº¿ç¨‹åˆ’åˆ†åœ¨ä¸åŒç©ºé—´è¿›è¡Œï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨ Java å †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œç§°ä¸ºæœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼ˆThread Local Allocation Bufferï¼ŒTLABï¼‰ã€‚çº¿ç¨‹åœ¨å„è‡ªçš„ TLAB ä¸Šä¸ºå¯¹è±¡åˆ†é…å†…å­˜ï¼Œåªæœ‰å½“ TLAB ç”¨å°½å¹¶åˆ†é…æ–°çš„ TLAB æ—¶ï¼Œæ‰éœ€è¦åŒæ­¥é”å®šã€‚</li>\n</ul>\n<p>å†…å­˜åˆ†é…å®Œæˆåï¼Œè™šæ‹Ÿæœºä¼šè®²æ‰€åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ã€‚</p>\n<h3 id=\"å¯¹è±¡è®¾ç½®\"><a href=\"#å¯¹è±¡è®¾ç½®\" class=\"headerlink\" title=\"å¯¹è±¡è®¾ç½®\"></a>å¯¹è±¡è®¾ç½®</h3><p>è™šæ‹Ÿæœºä¼šè®¾ç½®å¯¹è±¡ä¿¡æ¯ï¼ˆå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å“ˆå¸Œç ã€GC åˆ†ä»£å¹´é¾„ï¼‰ï¼Œè¿™äº›ä¿¡æ¯ä¿å­˜åœ¨å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰ä¸­ã€‚</p>\n<h3 id=\"init\"><a href=\"#init\" class=\"headerlink\" title=\"init\"></a>init</h3><p>åœ¨ä»¥ä¸Šæ­¥éª¤éƒ½å®Œæˆåï¼Œå¼€å§‹å¯¹è±¡åˆ›å»ºï¼Œå³æ‰§è¡Œ<code>&lt;init&gt;</code>æ–¹æ³•ï¼Œå°†å¯¹è±¡æŒ‰ç…§æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨äº§ç”Ÿå‡ºæ¥ã€‚</p>\n<h2 id=\"å¯¹è±¡å†…å­˜å¸ƒå±€\"><a href=\"#å¯¹è±¡å†…å­˜å¸ƒå±€\" class=\"headerlink\" title=\"å¯¹è±¡å†…å­˜å¸ƒå±€\"></a>å¯¹è±¡å†…å­˜å¸ƒå±€</h2><p>åœ¨ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å¸ƒå±€åˆ†ä¸ºä¸‰å—ï¼šå¯¹è±¡å¤´ï¼ˆHeaderï¼‰ã€å®ä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰ã€å¯¹é½å¡«å……ï¼ˆPaddingï¼‰ã€‚</p>\n<p><strong>å¯¹è±¡å¤´</strong> åŒ…æ‹¬ä¸¤éƒ¨åˆ†ä¿¡æ¯</p>\n<ul>\n<li>å¯¹è±¡è‡ªèº«è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç ï¼ˆHashCodeï¼‰ã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹ IDã€åå‘æ—¶é—´æˆ³ç­‰ã€‚è¿™éƒ¨åˆ†æ•°æ®é•¿åº¦åœ¨ 32 ä½å’Œ 64 ä½è™šæ‹Ÿæœºä¸­åˆ†åˆ«æ˜¯ 32bit å’Œ 64bitï¼Œå®˜æ–¹ç§°å®ƒä¸ºâ€œMark Wordâ€ã€‚æ˜¯ä¸€ä¸ªéå›ºå®šçš„æ•°æ®ç»“æ„ã€‚</li>\n<li>ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚å¦‚æœå¯¹è±¡æ˜¯ Java æ•°ç»„ï¼Œè¿˜éœ€è¦ä¸€å—ç”¨äºè®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ã€‚</li>\n</ul>\n<p><strong>å®ä¾‹æ•°æ®</strong> æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å„ç§ç±»å‹å­—æ®µå†…å®¹ã€‚å­˜å‚¨é¡ºåºå—è™šæ‹Ÿæœºåˆ†é…ç­–ç•¥å‚æ•°ï¼ˆFieldsAllocationStyleï¼‰å’Œå­—æ®µåœ¨ Java ä»£ç ä¸­å®šä¹‰é¡ºåºå½±å“ã€‚</p>\n<ol>\n<li>HotSpot è™šæ‹Ÿæœºé»˜è®¤åˆ†é…ç­–ç•¥æ˜¯ longs/doublesã€intsã€shorts/charsã€bytes/booleansã€oopsï¼ˆOrdinary Object Pointersï¼‰ï¼Œç›¸åŒå®½åº¦çš„å­—æ®µæ€»è¢«åˆ†é…åˆ°ä¸€èµ·</li>\n<li>åœ¨æ»¡è¶³ä¸Šä¸€æ¡ä»¶çš„å‰æä¸‹ï¼Œåœ¨çˆ¶ç±»ä¸­å®šä¹‰çš„å˜é‡ä¼šå‡ºç°åœ¨å­ç±»ä¹‹å‰ã€‚å¦‚æœ CompactFields å‚æ•°å€¼ä¸º trueï¼Œåˆ™å­ç±»ä¸­è¾ƒçª„çš„å˜é‡ä¹Ÿå¯èƒ½ä¼šæ’å…¥åˆ°çˆ¶ç±»å˜é‡ç©ºéš™ä¹‹ä¸­ã€‚</li>\n</ol>\n<p><strong>å¯¹é½å¡«å……</strong> ä¸æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œå› ä¸º HotSpot è™šæ‹Ÿæœºå†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€ï¼Œå› æ­¤å½“ <strong>å®ä¾‹æ•°æ®</strong> éƒ¨åˆ†æ²¡æœ‰å¯¹é½æ—¶ï¼Œå°±è¦é€šè¿‡å¯¹é½å¡«å……æ¥è¡¥é½ã€‚</p>\n<h2 id=\"å¯¹è±¡è®¿é—®å®šä½\"><a href=\"#å¯¹è±¡è®¿é—®å®šä½\" class=\"headerlink\" title=\"å¯¹è±¡è®¿é—®å®šä½\"></a>å¯¹è±¡è®¿é—®å®šä½</h2><p>JVM æ ˆä¸­ä¿å­˜çš„æ˜¯ reference æ•°æ®ï¼ŒæŒ‡å‘å­˜æ”¾åœ¨å †ä¸­çš„å¯¹è±¡ï¼Œå¯¹è±¡çš„è®¿é—®ï¼ˆå®šä½ï¼‰æ–¹å¼å–å†³äºè™šæ‹Ÿæœºå…·ä½“å®ç°ï¼Œä¸»æµçš„æœ‰å¥æŸ„å’Œç›´æ¥æŒ‡é’ˆä¸¤ç§ï¼Œå®ƒä»¬å„æœ‰ä¼˜åŠ£ã€‚</p>\n<h3 id=\"å¥æŸ„\"><a href=\"#å¥æŸ„\" class=\"headerlink\" title=\"å¥æŸ„\"></a>å¥æŸ„</h3><p>Java å †ä¸­åˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreference ä¸­ä¿å­˜çš„æ˜¯å¥æŸ„åœ°å€ï¼Œå¥æŸ„ä¸­åŒ…å«å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªçš„å…·ä½“åœ°å€ä¿¡æ¯ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180809_jvm_02/å¥æŸ„.jpeg\" alt=\"å¥æŸ„\" title=\"\">\n                </div>\n                <div class=\"image-caption\">å¥æŸ„</div>\n            </figure> \n<p><strong>ä¼˜ç‚¹</strong> reference ä¸­ä¿å­˜çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨ï¼ˆæ¯”å¦‚ GCï¼‰æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­å®ä¾‹æ•°æ®æŒ‡é’ˆçš„åœ°å€ï¼Œ reference æœ¬èº«ä¸å˜ã€‚åœ¨å¯¹è±¡é¢‘ç¹å¼‚åŠ¨çš„åœºæ™¯é‡Œæ€§èƒ½æ›´å¥½ã€‚</p>\n<h3 id=\"ç›´æ¥æŒ‡é’ˆ\"><a href=\"#ç›´æ¥æŒ‡é’ˆ\" class=\"headerlink\" title=\"ç›´æ¥æŒ‡é’ˆ\"></a>ç›´æ¥æŒ‡é’ˆ</h3><p>Java å †å¯¹è±¡å¤´é‡ä¿å­˜ç±»å‹æ•°æ®ä¿¡æ¯ï¼Œreference ç›´æ¥æŒ‡å‘å¯¹è±¡åœ°å€ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180809_jvm_02/ç›´æ¥æŒ‡é’ˆ.jpeg\" alt=\"ç›´æ¥æŒ‡é’ˆ\" title=\"\">\n                </div>\n                <div class=\"image-caption\">ç›´æ¥æŒ‡é’ˆ</div>\n            </figure> \n<p><strong>ä¼˜ç‚¹</strong> é€Ÿåº¦æ›´å¿«ï¼ŒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½å¼€é”€ï¼Œåœ¨å¯¹è±¡é¢‘ç¹è®¿é—®çš„åœºæ™¯é‡Œæ€§èƒ½æ›´å¥½ã€‚HotSpot VM ä½¿ç”¨çš„æ˜¯ç›´æ¥æŒ‡é’ˆæ–¹å¼ã€‚</p>\n","categories":[],"tags":["è¯»ä¹¦ç¬”è®°","JVM"]},{"title":"æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼ˆä¸€ï¼‰èµ°è¿‘ Java","url":"https://lilei.pro/2018/08/09/JVM-Note-01/","content":"<blockquote>\n<p>æœ€è¿‘é˜…è¯»å‘¨å¿—æ˜çš„ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœº JVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µã€‹ï¼Œä»¥è¯»ä¹¦ç¬”è®°çš„å½¢å¼è®°å½•ä¸‹æ‰€å­¦æ‰€å¾—ï¼Œå…ˆç»™è‡ªå·±å®šä¸ªå°ç›®æ ‡ï¼Œå®Œæˆ10ç¯‡ç¬”è®°ã€‚</p>\n</blockquote>\n<blockquote>\n<p>ä¸–ç•Œä¸Šå¹¶æ²¡æœ‰å®Œç¾çš„ç¨‹åºï¼Œä½†æˆ‘ä»¬å¹¶ä¸å› æ­¤è€Œæ²®ä¸§ï¼Œå› ä¸ºå†™ç¨‹åºæœ¬æ¥å°±æ˜¯ä¸€ä¸ªä¸æ–­è¿½æ±‚å®Œç¾çš„è¿‡ç¨‹ã€‚</p>\n</blockquote>\n<h1 id=\"æ¦‚è¿°\"><a href=\"#æ¦‚è¿°\" class=\"headerlink\" title=\"æ¦‚è¿°\"></a>æ¦‚è¿°</h1><p>Java ä¸ä»…ä»…æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œæ›´æ˜¯ä¸€ä¸ªç”±ä¸€ç³»åˆ—è®¡ç®—æœºè½¯ä»¶å’Œè§„èŒƒå½¢æˆçš„æŠ€æœ¯ä½“ç³»ï¼Œè¿™ä¸ªæŠ€æœ¯ä½“ç³»æä¾›äº†å®Œæ•´çš„ç”¨äºè½¯ä»¶å¼€å‘å’Œè·¨å¹³å°éƒ¨ç½²çš„æ”¯æŒç¯å¢ƒã€‚å®ƒæœ‰ä¸€ç³»åˆ—ä¼˜ç‚¹ï¼š</p>\n<ul>\n<li>æ‹¥æœ‰ä¸€é—¨ç»“æ„ä¸¥è°¨ã€é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€</li>\n<li>æ‘†è„±ç¡¬ä»¶å¹³å°æŸç¼šï¼Œå®ç°â€œä¸€æ¬¡ç¼–å†™ï¼Œå¤„å¤„è¿è¡Œâ€</li>\n<li>æä¾›ç›¸å¯¹å®‰å…¨çš„å†…å­˜ç®¡ç†å’Œè®¿é—®æœºåˆ¶ï¼Œé¿å…äº†ç»å¤§éƒ¨åˆ†å†…å­˜æ³„éœ²å’ŒæŒ‡é’ˆè¶Šç•Œ</li>\n<li>å®ç°çƒ­ç‚¹ä»£ç æ£€æµ‹å’Œè¿è¡Œæ—¶ç¼–è¯‘åŠä¼˜åŒ–ï¼Œä½¿å¾— Java åº”ç”¨èƒ½éšç€è¿è¡Œæ—¶é—´çš„å¢åŠ è€Œè·å–æ›´é«˜çš„æ€§èƒ½</li>\n<li>æœ‰ä¸€å¥—å®Œå–„çš„åº”ç”¨ç¨‹åºæ¥å£ï¼Œè¿˜æœ‰æ— æ•°ç¬¬ä¸‰æ–¹ç±»åº“å®ç°å„ç§åŠŸèƒ½</li>\n</ul>\n<h1 id=\"Java-æŠ€æœ¯ä½“ç³»\"><a href=\"#Java-æŠ€æœ¯ä½“ç³»\" class=\"headerlink\" title=\"Java æŠ€æœ¯ä½“ç³»\"></a>Java æŠ€æœ¯ä½“ç³»</h1><p><strong>æŒ‰ç…§ç»„æˆéƒ¨åˆ†æ¥åˆ†</strong>ï¼ŒSun å®˜æ–¹å®šä¹‰çš„ Java æŠ€æœ¯ä½“ç³»åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å†…å®¹</p>\n<ul>\n<li>Java ç¨‹åºè®¾è®¡è¯­è¨€</li>\n<li>å„ç§ç¡¬ä»¶å¹³å°ä¸Šçš„ Java è™šæ‹Ÿæœº</li>\n<li>Class æ–‡ä»¶æ ¼å¼</li>\n<li>Java API ç±»åº“</li>\n<li>æ¥è‡ªå•†ä¸šæœºæ„å’Œå¼€æºç¤¾åŒºçš„ç¬¬ä¸‰æ–¹ Java ç±»åº“</li>\n</ul>\n<p><strong>JDKï¼ˆJava Development Kitï¼‰</strong>ï¼šJava ç¨‹åºè®¾è®¡è¯­è¨€ + Java è™šæ‹Ÿæœº + Java API ç±»åº“ï¼Œæ˜¯æ”¯æŒ Java ç¨‹åºå¼€å‘çš„æœ€å°ç¯å¢ƒ</p>\n<p><strong>JREï¼ˆJava Runtime Environmentï¼‰</strong>ï¼šJava è™šæ‹Ÿæœº + Java SE APIï¼Œæ”¯æŒJava ç¨‹åºè¿è¡Œçš„æœ€å°ç¯å¢ƒ</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180809_jvm_01/JavaæŠ€æœ¯ä½“ç³».png\" alt=\"JavaæŠ€æœ¯ä½“ç³»æ‰€åŒ…å«çš„å†…å®¹\" title=\"\">\n                </div>\n                <div class=\"image-caption\">JavaæŠ€æœ¯ä½“ç³»æ‰€åŒ…å«çš„å†…å®¹</div>\n            </figure>\n<p><strong>æŒ‰ç…§æ‰€æœåŠ¡çš„é¢†åŸŸæ¥åˆ†</strong>ï¼ŒJava æŠ€æœ¯ä½“ç³»å¯ä»¥åˆ†ä¸º4ä¸ªå¹³å°</p>\n<ul>\n<li>Java Cardï¼šæ”¯æŒä¸€äº› Java å°ç¨‹åºï¼ˆAppletsï¼‰è¿è¡Œåœ¨å°å†…å­˜è®¾å¤‡ä¸Šçš„å¹³å°</li>\n<li>Java MEï¼ˆMicro Editionï¼‰ï¼šæ”¯æŒ Java ç¨‹åºè¿è¡Œåœ¨ç§»åŠ¨ç»ˆç«¯ï¼ˆæ‰‹æœºã€PDAï¼‰å¹³å°ï¼Œå¯¹ Java API æœ‰æ‰€ç²¾ç®€ï¼Œå¹¶åŠ å…¥äº†é’ˆå¯¹ç§»åŠ¨ç»ˆç«¯çš„æ”¯æŒï¼Œæ—§ç§° J2ME</li>\n<li>Java SEï¼ˆStandard Editionï¼‰ï¼šæ”¯æŒé¢å‘æ¡Œé¢çº§åº”ç”¨ï¼ˆå¦‚ Windows ä¸‹çš„åº”ç”¨ç¨‹åºï¼‰çš„ Java å¹³å°ï¼Œæä¾›å®Œæ•´çš„ Java æ ¸å¿ƒ APIï¼Œæ—§ç§° J2SE</li>\n<li>Java EEï¼ˆEnterprise Editionï¼‰ï¼šæ”¯æŒé¢å‘å¤šå±‚æ¶æ„çš„ä¼ä¸šåº”ç”¨ï¼ˆå¦‚ ERPã€CRMï¼‰çš„ Java å¹³å°ï¼Œé™¤äº†æä¾› Java SE API å¤–ï¼Œè¿˜å¯¹å…¶åšäº†å¤§é‡è¡¥å……ä»¥åŠéƒ¨ç½²æ”¯æŒï¼Œæ—§ç§° J2EE</li>\n</ul>\n<h1 id=\"Java-å‘å±•å²\"><a href=\"#Java-å‘å±•å²\" class=\"headerlink\" title=\"Java å‘å±•å²\"></a>Java å‘å±•å²</h1><ol>\n<li>1991 å¹´ 4 æœˆï¼ŒOakï¼ˆæ©¡æ ‘ï¼‰å‡ºç°ï¼Œç›®çš„åœ¨äºå¼€å‘ä¸€ç§èƒ½å¤Ÿåœ¨å„ç§æ¶ˆè´¹å‹ç”µå­äº§å“ï¼ˆæœºé¡¶ç›’ã€å†°ç®±ã€æ”¶éŸ³æœºï¼‰ä¸Šè¿è¡Œçš„ç¨‹åºæ¶æ„ï¼Œæ˜¯ä¸º Java å‰èº«</li>\n<li>1995 å¹´ï¼ŒOak æ­£å¼æ›´åä¸º Javaï¼Œå¹¶ä¸”åœ¨ SunWorld å¤§ä¼šä¸Šæ­£å¼å‘å¸ƒ 1.0 ç‰ˆæœ¬ï¼ŒåŒæ—¶æå‡ºâ€œWrite Onceï¼ŒRun Everywhereâ€å£å·</li>\n<li>1998 å¹´ï¼Œå‘å¸ƒé‡Œç¨‹ç¢‘å¼çš„ 1.2 ç‰ˆæœ¬ï¼ŒSun åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å°† Java æŒ‰ç…§æœåŠ¡é¢†åŸŸæ‹†åˆ†ä¸ºä¸‰ä¸ªæ–¹å‘ï¼šJ2SE, J2ME, J2EEï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡å†…ç½®äº† JIT ç¼–è¯‘å™¨ï¼Œä»¥åŠå†…ç½® Classicã€HotSpotã€Exact ä¸‰ç§ VM</li>\n<li>2002 å¹´ï¼Œå‘å¸ƒç¬¬ä¸€ä¸ªçœŸæ­£æˆç†Ÿçš„ç‰ˆæœ¬ 1.4ï¼ŒåŒå¹´å‡ºç° .NET</li>\n<li>2009 å¹´ï¼Œå‘å¸ƒ 1.7ï¼Œä»£å· Dolphin æµ·è±š</li>\n</ol>\n<h1 id=\"å®è·µï¼šç¼–è¯‘-JDK\"><a href=\"#å®è·µï¼šç¼–è¯‘-JDK\" class=\"headerlink\" title=\"å®è·µï¼šç¼–è¯‘ JDK\"></a>å®è·µï¼šç¼–è¯‘ JDK</h1><p>æ—¶é—´åŸå› æ²¡æœ‰è¿›è¡Œè¿›è¡Œç¼–è¯‘ï¼Œåªæ˜¯æŠŠæºç ä¸‹è½½ä¸‹æ¥ï¼Œæ—¥åæœ‰éœ€è¦ä¼šè¡¥ä¸Š</p>\n","categories":[],"tags":["è¯»ä¹¦ç¬”è®°","JVM"]},{"title":"æœ¬å‘¨æ€»ç»“ 20180723 ~ 20180729","url":"https://lilei.pro/2018/07/30/weekly-20180723-20180729/","content":"<blockquote>\n<p>ä½ çš„ç—›è‹¦æ˜¯å› ä¸ºï¼ŒåŒ…è£¹ä½ å¿ƒæ™ºçš„å¤–å£³ï¼Œæ­£åœ¨ç ´è£‚æ¯ä¼¤ã€‚<br>ä½ å¿…é¡»ç»å†ç—›è‹¦ï¼Œæ­£å¦‚æœå£³å¿…é¡»ç ´è£‚ï¼Œæœä»æ‰è§é˜³å…‰ã€‚</p>\n</blockquote>\n<p>åˆšåˆšåº¦è¿‡ä¸ƒæœˆçš„æœ€åä¸€å‘¨ï¼Œè¿™ä¸€å‘¨è‡ªå·±å¾€è¿”è·‘äº†ä¸¤æ¬¡æ­å·ï¼Œä¸€å…±é¢äº†5å®¶å…¬å¸ï¼Œå…¶ä¸­ä¸¤å®¶ç°åœºï¼Œä¸‰å®¶ç”µé¢ã€‚ä¸ƒæœˆçš„æ­å·æ°”æ¸©è¾¾åˆ°ä¸‰åä¸ƒåº¦ï¼Œæ¯”ä¸Šæµ·å¹³å‡é«˜å‡ºå››äº”åº¦ï¼Œé¡¶ç€çƒˆæ—¥å¥”æ³¢åœ¨åŸä¸œåŸè¥¿ï¼Œè¿™æ ·çš„ç»å†ï¼Œè¿˜çœŸæ˜¯éš¾å¾—å•Šã€‚</p>\n","categories":[],"tags":["å‘¨æŠ¥"]},{"title":"é¢è¯•çŸ¥è¯†æ•´ç† 2018.07.29","url":"https://lilei.pro/2018/07/29/interview-180729/","content":"<h1 id=\"æœ‰ä»€ä¹ˆæ‰‹æ®µå¯ä»¥å‡å°‘APKä½“ç§¯\"><a href=\"#æœ‰ä»€ä¹ˆæ‰‹æ®µå¯ä»¥å‡å°‘APKä½“ç§¯\" class=\"headerlink\" title=\"æœ‰ä»€ä¹ˆæ‰‹æ®µå¯ä»¥å‡å°‘APKä½“ç§¯\"></a>æœ‰ä»€ä¹ˆæ‰‹æ®µå¯ä»¥å‡å°‘APKä½“ç§¯</h1><p>è¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆéœ€è¦äº†è§£APKä½“ç§¯å¢å¤§çš„åŸå› ï¼Œæˆ‘ä»¬ä»è¿™å¼ ç»å…¸çš„APKæ„å»ºæµç¨‹å›¾å¼€å§‹åˆ†æã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190608_interview/apk_build.jpg\" alt=\"apk_build\" title=\"\">\n                </div>\n                <div class=\"image-caption\">apk_build</div>\n            </figure>\n<p>å¯ä»¥çœ‹åˆ°æœ€ç»ˆç”Ÿæˆçš„ APK é‡Œé¢ï¼Œä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†å†…å®¹ï¼šJava æºç ç¼–è¯‘å‡ºæ¥çš„<code>.dex</code>æ–‡ä»¶ï¼Œç¼–è¯‘åçš„èµ„æºæ–‡ä»¶ &amp; æœªç»ç¼–è¯‘çš„<code>assets</code>ç›®å½•ï¼Œä»¥åŠä¸€äº›ç» NDK ç¼–è¯‘åç”Ÿæˆçš„<code>.so</code>æ–‡ä»¶ã€‚ä¸‹é¢é’ˆå¯¹è¿™ä¸‰æ–¹é¢ç»™å‡ºä¼˜åŒ–çš„å»ºè®®ã€‚</p>\n<h2 id=\"dex-æ–‡ä»¶\"><a href=\"#dex-æ–‡ä»¶\" class=\"headerlink\" title=\"dex æ–‡ä»¶\"></a>dex æ–‡ä»¶</h2><p>dex æ–‡ä»¶åŒ…å«äº†æ‰€æœ‰ Java ç±»ç¼–è¯‘å‡ºæ¥ç±»æ–‡ä»¶ã€‚ä»â€œæ•°é‡â€ä¸â€œè´¨é‡â€ä¸¤æ–¹é¢å…¥æ‰‹ï¼Œæˆ‘ä»¬å¯ä»¥å‰Šå‡ç±»çš„æ•°ç›®ï¼Œè¿˜å¯ä»¥å‡å°‘ç±»æ–‡ä»¶çš„å¤§å°ã€‚</p>\n<h3 id=\"å¼€å¯-Proguard\"><a href=\"#å¼€å¯-Proguard\" class=\"headerlink\" title=\"å¼€å¯ Proguard\"></a>å¼€å¯ Proguard</h3><p>è¿™æ ·å¯ä»¥åœ¨æ‰“åŒ…æ—¶å»é™¤æ²¡æœ‰ä½¿ç”¨åˆ°çš„ç±»ï¼Œä»¥åŠç¼©çŸ­ç±»å’Œå­—æ®µã€æ–¹æ³•çš„å‘½åï¼Œä»è€Œå‡å°‘ class æ–‡ä»¶å¤§å°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒæŠŠè¦ä¿ç•™å‘½åï¼ˆæ¯”å¦‚åå°„ï¼‰çš„ç±» keep ä½ã€‚å¯¹äºæ··æ·†åæ‰“åŒ…å‡ºæ¥çš„ APK åº”å½“è¿›è¡Œå……åˆ†çš„å›å½’æµ‹è¯•ã€‚</p>\n<h3 id=\"é€‰æ‹©è¾ƒå°çš„é€‚ç”¨äºç§»åŠ¨å¹³å°çš„ç¬¬ä¸‰æ–¹ç±»åº“\"><a href=\"#é€‰æ‹©è¾ƒå°çš„é€‚ç”¨äºç§»åŠ¨å¹³å°çš„ç¬¬ä¸‰æ–¹ç±»åº“\" class=\"headerlink\" title=\"é€‰æ‹©è¾ƒå°çš„é€‚ç”¨äºç§»åŠ¨å¹³å°çš„ç¬¬ä¸‰æ–¹ç±»åº“\"></a>é€‰æ‹©è¾ƒå°çš„é€‚ç”¨äºç§»åŠ¨å¹³å°çš„ç¬¬ä¸‰æ–¹ç±»åº“</h3><p>æ—¢å¯ä»¥å‡å°‘äº†åŒ…ä½“ sizeï¼Œä¹Ÿèƒ½å‡å°‘æ–¹æ³•æ•°ï¼Œä»è€Œé¿å… 65535 é—®é¢˜ã€‚æ¯”å¦‚åœ¨æ¥å…¥ JSON è§£æåº“æ—¶ï¼Œæ¯”è¾ƒå¸¸è§çš„å‡ ç§ç±»åº“æœ‰ï¼šGsonï¼ˆ2.8.5ï¼Œ235Kbï¼‰ã€Jacksonï¼ˆ2.9.5ï¼Œä¸‰ä¸ª Jarï¼Œå…± 1.7Mbï¼‰ã€Fastjsonï¼ˆ1.2.47ï¼Œ533Kbï¼‰ï¼Œåœ¨æ»¡è¶³éœ€æ±‚çš„å‰æä¸‹é€‰æ‹©åŒ…ä½“æœ€å°çš„ Gsonã€‚</p>\n<h3 id=\"å®šåˆ¶ç¬¬ä¸‰æ–¹åº“\"><a href=\"#å®šåˆ¶ç¬¬ä¸‰æ–¹åº“\" class=\"headerlink\" title=\"å®šåˆ¶ç¬¬ä¸‰æ–¹åº“\"></a>å®šåˆ¶ç¬¬ä¸‰æ–¹åº“</h3><p>å¯¹äºå¼€æºçš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚æœé¡¹ç›®é‡Œåªç”¨åˆ°å…¶ä¸­ 10% ç”šè‡³æ›´å°‘çš„åŠŸèƒ½ï¼Œä¸å¦¨ä»…å°†ç”¨åˆ°çš„æºç æ‹·è´è‡³è‡ªå·±é¡¹ç›®é‡Œï¼Œè€Œä¸æ˜¯é€šè¿‡ gradle å®Œæ•´å¼•å…¥ã€‚</p>\n<h2 id=\"èµ„æºæ–‡ä»¶\"><a href=\"#èµ„æºæ–‡ä»¶\" class=\"headerlink\" title=\"èµ„æºæ–‡ä»¶\"></a>èµ„æºæ–‡ä»¶</h2><p>ä¸»è¦æ˜¯å›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰ï¼Œå¤„ç†ä¸å½“çš„è¯ä¸€å¼ å›¾ç‰‡å¯èƒ½å°±ä¼šå¢åŠ  1Mb çš„ä½“ç§¯ï¼Œå› æ­¤å¿…é¡»è°¨æ…å¯¹å¾…èµ„æºæ–‡ä»¶ï¼Œä¸è¦ä¸åŠ è€ƒè™‘åœ°å…¨ç›˜æ¥å—è®¾è®¡å¸ˆç»™å‡ºçš„åˆ‡å›¾ã€‚</p>\n<h3 id=\"å‹ç¼©å¤§å°\"><a href=\"#å‹ç¼©å¤§å°\" class=\"headerlink\" title=\"å‹ç¼©å¤§å°\"></a>å‹ç¼©å¤§å°</h3><p>å¤§éƒ¨åˆ† png å›¾ç‰‡æ˜¯å¯ä»¥å‹ç¼©çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨<a href=\"https://compresspng.com/\" target=\"_blank\" rel=\"noopener\">https://compresspng.com/</a>åœ¨çº¿è¿›è¡Œå‹ç¼©ã€‚å¯¹äºéŸ³è§†é¢‘ï¼Œä¹Ÿè¦åœ¨ä¿è¯æ•ˆæœçš„å‰æä¸‹ï¼Œå°½é‡ç¼©å‡ä½“ç§¯ã€‚</p>\n<h3 id=\"ä½¿ç”¨æ›´æ˜“æ‰©å±•çš„å›¾ç‰‡æ ¼å¼\"><a href=\"#ä½¿ç”¨æ›´æ˜“æ‰©å±•çš„å›¾ç‰‡æ ¼å¼\" class=\"headerlink\" title=\"ä½¿ç”¨æ›´æ˜“æ‰©å±•çš„å›¾ç‰‡æ ¼å¼\"></a>ä½¿ç”¨æ›´æ˜“æ‰©å±•çš„å›¾ç‰‡æ ¼å¼</h3><p>ä½¿ç”¨çŸ¢é‡å›¾ã€.9 å›¾ä»£æ›¿é«˜æ¸…åˆ‡å›¾ï¼Œå°¤å…¶æ˜¯è§„åˆ™å½¢çŠ¶çš„èƒŒæ™¯ã€è¾¹æ¡†å›¾ç‰‡ç­‰ã€‚</p>\n<h3 id=\"ä½¿ç”¨-WebP-æ ¼å¼\"><a href=\"#ä½¿ç”¨-WebP-æ ¼å¼\" class=\"headerlink\" title=\"ä½¿ç”¨ WebP æ ¼å¼\"></a>ä½¿ç”¨ WebP æ ¼å¼</h3><p>WebPæ ¼å¼æ˜¯æœ‰æŸå‹ç¼©ï¼ˆåƒJPEGï¼‰ä¸”æœ‰é€æ˜é€šé“ï¼ˆåƒPNGï¼‰ï¼Œä¸”å‹ç¼©ç‡é«˜äºJPEGæˆ–PNGã€‚åœ¨Android Studioä¸­ï¼Œèƒ½å°†BMPï¼ŒJPGï¼ŒPNGæˆ–è€…é™æ€GIFå›¾ç‰‡è½¬æ¢æˆWebPæ ¼å¼ã€‚</p>\n<p>ä½¿ç”¨WebPæ–‡ä»¶æ ¼å¼ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ã€‚ç¬¬ä¸€ï¼Œä½äºAndroid 3.2çš„ç‰ˆæœ¬ä¸æ”¯æŒWebPï¼Œç¬¬äºŒï¼ŒWebPçš„è§£ç æ—¶é—´æ¯”PNGé•¿ã€‚</p>\n<h3 id=\"ç”¨ä»£ç ä»£æ›¿å›¾ç‰‡\"><a href=\"#ç”¨ä»£ç ä»£æ›¿å›¾ç‰‡\" class=\"headerlink\" title=\"ç”¨ä»£ç ä»£æ›¿å›¾ç‰‡\"></a>ç”¨ä»£ç ä»£æ›¿å›¾ç‰‡</h3><p>ä½¿ç”¨å±æ€§åŠ¨ç”»ï¼Œè€Œéå¸§åŠ¨ç”»ã€‚å¸§åŠ¨ç”»é€šå¸¸éœ€è¦å¤šå¼ å›¾ç‰‡ç»„åˆæ‰èƒ½è¿›è¡Œæ’­æ”¾ï¼Œæ­¤æ—¶é€šè¿‡ä»£ç å®ç°ç¼©æ”¾ã€æ—‹è½¬ç­‰åŠ¨ç”»æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼›ç”¨ RotateDrawable ä»£æ›¿ä»…ä»…æ˜¯æ–¹å‘ä¸åŒçš„â€œå†…å®¹ç›¸åŒâ€çš„å›¾ç‰‡ï¼›ç”¨ layer-list æ¥åˆ¶ä½œå¤šå±‚å›¾ç‰‡ä»è€Œè¾¾åˆ°å¤ç”¨ã€‚</p>\n<h3 id=\"åˆ é™¤ä¸å†ä½¿ç”¨çš„èµ„æºæ–‡ä»¶\"><a href=\"#åˆ é™¤ä¸å†ä½¿ç”¨çš„èµ„æºæ–‡ä»¶\" class=\"headerlink\" title=\"åˆ é™¤ä¸å†ä½¿ç”¨çš„èµ„æºæ–‡ä»¶\"></a>åˆ é™¤ä¸å†ä½¿ç”¨çš„èµ„æºæ–‡ä»¶</h3><p>éšç€ç‰ˆæœ¬è¿­ä»£ï¼Œä¸€äº›æ—§æ—¥éœ€æ±‚å¼•å…¥çš„èµ„æºæ–‡ä»¶å°†ä¸å†ä½¿ç”¨ï¼Œæ­¤æ—¶åº”å½“å°†å®ƒä»¬åˆ é™¤ã€‚Android Studio è‡ªå¸¦çš„ Lint å·¥å…·å¯ä»¥å¸®æˆ‘ä»¬å®Œæˆè¿™ä»¶äº‹ã€‚åœ¨ AS çš„èœå•ä¸­é€‰æ‹© Analyze -&gt; Inspect Codeã€‚åˆ†æéœ€è¦ä¸€å®šæ—¶é—´ï¼Œå¾…åˆ†æå®Œæˆåä¼šåœ¨çª—å£å±•ç¤ºç»“æœã€‚å…¶ä¸­ Unused resources å³æ˜¯æœªä½¿ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ã€‚</p>\n<p>ä¸è¦å¿˜äº†æ¸…ç† assets æ–‡ä»¶å¤¹ä¸‹ä¸å†ä½¿ç”¨çš„æ–‡ä»¶ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190608_interview/unused_res.png\" alt=\"unused_res\" title=\"\">\n                </div>\n                <div class=\"image-caption\">unused_res</div>\n            </figure>\n<p>åˆ é™¤èµ„æºæ˜¯æ ¹æ²»çš„æ–¹æ³•ï¼Œå¦‚æœä½ æƒ³å·ç‚¹æ‡’ï¼Œå¯ä»¥é€šè¿‡ shrinkResources å±æ€§è®©ç¼–è¯‘å™¨æ‰“åŒ…æ—¶è‡ªåŠ¨å‰”é™¤ä¸å†ä½¿ç”¨çš„èµ„æºï¼Œè¯¥å±æ€§éœ€è¦ä¸ proguard åŒæ—¶å¼€å¯ã€‚</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buildTypes &#123;</span><br><span class=\"line\">     release &#123;</span><br><span class=\"line\">          minifyEnabled <span class=\"keyword\">true</span></span><br><span class=\"line\">          shrinkResources <span class=\"keyword\">true</span></span><br><span class=\"line\">          proguardFiles getDefaultProguardFile(<span class=\"string\">'proguard-android.txt'</span>), <span class=\"string\">'proguard-rules.pro'</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœæƒ³çœ‹çœ‹åœ¨æ¿€æ´»è‡ªåŠ¨ç¼©å‡èµ„æºå APK ç¼©å‡äº†å¤šå°‘ï¼Œå¯ä»¥è¿è¡Œ shrinkReleaseResources ä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ä¼šæ‰“å°å‡ºåŒ…çš„å¤§å°ç¼©å‡äº†å¤šå°‘ã€‚</p>\n<p>è‡ªåŠ¨ç¼©å‡èµ„æºæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå®ƒå¯èƒ½ç§»é™¤äº†è¿‡å¤šçš„èµ„æºï¼Œç‰¹åˆ«æ˜¯é‚£äº›åŠ¨æ€ä½¿ç”¨çš„èµ„æºè‚¯å®šä¼šè¢«åˆ é™¤ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œå¯ä»¥åœ¨ res/raw/ ä¸‹çš„ keep.xml æ–‡ä»¶ä¸­å®šä¹‰è¿™äº›ä¾‹å¤–ã€‚</p>\n<h3 id=\"æ”¾å¼ƒä¸€äº›å›¾ç‰‡èµ„æº\"><a href=\"#æ”¾å¼ƒä¸€äº›å›¾ç‰‡èµ„æº\" class=\"headerlink\" title=\"æ”¾å¼ƒä¸€äº›å›¾ç‰‡èµ„æº\"></a>æ”¾å¼ƒä¸€äº›å›¾ç‰‡èµ„æº</h3><p>Android æœ‰ ldpiã€mdhiã€hdpiã€xhdpiã€xxhdpiã€xxxhdpi ç­‰å¤šç§åˆ†è¾¨ç‡æ ¼å¼ï¼Œè°¨æ…çš„äººä¹Ÿè®¸ä¼šé’ˆå¯¹åˆ†è¾¨ç‡æä¾›ä¸€ä»½åˆ‡å›¾ï¼Œä½†æˆ‘åœ¨è¿™é‡Œåƒä½ å»ºè®®ï¼Œåƒä¸‡åˆ«è¿™ä¹ˆåšã€‚</p>\n<ul>\n<li>ä¸€æ–¹é¢ï¼ŒAndroid ç³»ç»Ÿæä¾›äº†å…¼å®¹çš„å¤„ç†æ–¹æ¡ˆï¼Œæ¯”å¦‚ä¼šæŠŠ hdpi çš„å›¾ç‰‡ç¼©æ”¾åˆ° ldpi ä½¿ç”¨ã€‚</li>\n<li>å¦ä¸€æ–¹é¢ï¼Œåœ¨æ·»åŠ èµ„æºæ–‡ä»¶æ—¶åº”å½“è€ƒè™‘å®ƒæ‰€å¯¹åº”æœºå‹çš„å æœ‰ç‡ã€‚æ¯”å¦‚ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¸éœ€è¦å‡†å¤‡ ldpi å’Œ xxxhdpi çš„å›¾ç‰‡ï¼Œå‰è€…çš„æ‰‹æœºæ—©å·²è¿‡æ—¶ï¼Œåè€…åˆ™æ˜¯ç»™ 2K å±å¹•ä½¿ç”¨çš„ï¼Œç›®å‰å¸‚é¢ä¸Šå¹¶ä¸å¸¸è§ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å¿½ç•¥ã€‚</li>\n</ul>\n<p>å¯¹äºç¬¬ä¸‰æ–¹ aar å¼•å…¥çš„èµ„æºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¼•å…¥ç‰¹å®šåˆ†è¾¨ç‡çš„ï¼Œé€šè¿‡ gradle é…ç½®å®ç°è¿™ä¸€ç‚¹ã€‚</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">defaultConfig &#123;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\"></span><br><span class=\"line\">    resConfigs <span class=\"string\">\"en\"</span>, <span class=\"string\">\"de\"</span>, <span class=\"string\">\"fr\"</span>, <span class=\"string\">\"it\"</span> <span class=\"comment\">// æŒ‡å®šè¯­è¨€</span></span><br><span class=\"line\">    resConfigs <span class=\"string\">\"hdpi\"</span>, <span class=\"string\">\"xhdpi\"</span>, <span class=\"string\">\"xxhdpi\"</span> <span class=\"comment\">// æŒ‡å®šæ˜¾ç¤ºå¯†åº¦</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"so-æ–‡ä»¶\"><a href=\"#so-æ–‡ä»¶\" class=\"headerlink\" title=\"so æ–‡ä»¶\"></a>so æ–‡ä»¶</h2><p>å½“æˆ‘ä»¬é¡¹ç›®é‡Œéœ€è¦ä½¿ç”¨ NDK æ—¶ï¼Œä¼šå°†ç¼–è¯‘ç”Ÿæˆçš„ .so æ–‡ä»¶ç½®äºé¡¹ç›®é‡Œé¢ï¼Œå½“ä½ è§£å‹ä¸€ä¸ª APK æ—¶ä¼šå‘ç°å®ƒä»¬çš„èº«å½±ã€‚æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥ç¼©å‡å®ƒä»¬æ‰€å çš„ä½“ç§¯ã€‚</p>\n<h3 id=\"ä½¿ç”¨å…¼å®¹æŒ‡ä»¤é›†\"><a href=\"#ä½¿ç”¨å…¼å®¹æŒ‡ä»¤é›†\" class=\"headerlink\" title=\"ä½¿ç”¨å…¼å®¹æŒ‡ä»¤é›†\"></a>ä½¿ç”¨å…¼å®¹æŒ‡ä»¤é›†</h3><p>å¤„ç†å™¨çš„æŒ‡ä»¤é›†é€šå¸¸æ˜¯å‘ä¸‹å…¼å®¹çš„ï¼Œæ¯”å¦‚[TODO]çš„æŒ‡ä»¤é›†å°±å¯ä»¥å…¼å®¹[TODO]ï¼Œæ„å‘³ç€ä½ å¯ä»¥åªæä¾›ä¸€ä»½[TODO]çš„ soï¼ˆä½†æˆ‘ä¸å»ºè®®è¿™ä¹ˆåšï¼Œå› ä¸ºæ›´é«˜ç‰ˆæœ¬çš„æŒ‡ä»¤é›†å¯ä»¥æä¾›æ›´é«˜çš„è¿è¡Œæ•ˆç‡ï¼‰ã€‚</p>\n<h3 id=\"å»é™¤å®Œå…¨ç”¨ä¸åˆ°çš„æŒ‡ä»¤é›†æ–‡ä»¶\"><a href=\"#å»é™¤å®Œå…¨ç”¨ä¸åˆ°çš„æŒ‡ä»¤é›†æ–‡ä»¶\" class=\"headerlink\" title=\"å»é™¤å®Œå…¨ç”¨ä¸åˆ°çš„æŒ‡ä»¤é›†æ–‡ä»¶\"></a>å»é™¤å®Œå…¨ç”¨ä¸åˆ°çš„æŒ‡ä»¤é›†æ–‡ä»¶</h3><p>æ¯”å¦‚ x86ã€x86_64ï¼Œç°åœ¨æå°‘æ‰‹æœºæ˜¯ä½¿ç”¨ x86 çš„ CPU æ¶æ„äº†ï¼Œä½ è‡ªç„¶å¯ä»¥å»é™¤å®ƒä»¬ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ æƒ³è®© APP åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œï¼Œä»éœ€è¦ä¿ç•™å®ƒä»¬ã€‚</p>\n<p>åœ¨ gradle æ–‡ä»¶çš„ defaultConfig åŸŸä¸‹é…ç½®éœ€è¦çš„ soï¼š</p>\n<figure class=\"highlight gradle\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">defaultConfig &#123;</span><br><span class=\"line\">        <span class=\"comment\">// ... ...</span></span><br><span class=\"line\">        ndk &#123;</span><br><span class=\"line\">            <span class=\"comment\">//è®¾ç½®æ”¯æŒçš„SOåº“æ¶æ„</span></span><br><span class=\"line\">            abiFilters <span class=\"string\">'arm64-v8a'</span>, <span class=\"string\">'armeabi'</span> <span class=\"comment\">//, 'x86', ,'x86_64', 'armeabi-v7a</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"å…¶å®ƒæ‰‹æ®µ\"><a href=\"#å…¶å®ƒæ‰‹æ®µ\" class=\"headerlink\" title=\"å…¶å®ƒæ‰‹æ®µ\"></a>å…¶å®ƒæ‰‹æ®µ</h2><h3 id=\"æ’ä»¶åŒ–\"><a href=\"#æ’ä»¶åŒ–\" class=\"headerlink\" title=\"æ’ä»¶åŒ–\"></a>æ’ä»¶åŒ–</h3><p>æ’ä»¶åŒ–æŠ€æœ¯è‡ª 2015 å¹´äº•å–·åï¼Œä¸€ç›´æ˜¯ Android é¢è¯•ä¸­é•¿ç››ä¸è¡°çš„é¢è¯•é¢˜ã€‚å‘å¸ƒ APP æ—¶åªå‘å¸ƒåŒ…å«å¿…è¦åŠŸèƒ½çš„å®¿ä¸»ï¼Œå­æ¨¡å—åŠŸèƒ½ä»¥æ’ä»¶çš„å½¢å¼ä¸‹å‘ã€‚ä¹Ÿæ˜¯ä¸€ä¸ªæœ‰æ•ˆé™ä½ APK ä½“ç§¯çš„æ–¹æ³•ã€‚ä½†æé«˜äº†é¡¹ç›®çš„å¼€å‘éš¾åº¦å’Œç»´æŠ¤æˆæœ¬ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¸€ä¸ªæˆç†Ÿçš„å‘å¸ƒåå°ã€‚</p>\n<h3 id=\"APK-åˆ†å‰²\"><a href=\"#APK-åˆ†å‰²\" class=\"headerlink\" title=\"APK åˆ†å‰²\"></a>APK åˆ†å‰²</h3><p>å¯ä»¥é€šè¿‡åœ¨ gradle é…ç½®ä¸­å®šä¹‰ä¸€ä¸ª splits ä»£ç å—æ¥é…ç½®åˆ†å‰²ï¼Œç›®å‰æ”¯æŒ density åˆ†å‰²å’Œ ABI åˆ†å‰²ã€‚æ¯”å¦‚ä½ å¯ä»¥é€šè¿‡é…ç½®ï¼Œåœ¨ä¸€æ¬¡æ‰“åŒ…ä¸­ç”Ÿæˆä»¥ä¸‹ APKï¼Œè¿›è€Œå°†å®ƒä»¬åˆ†åˆ«å‘å¸ƒç»™ä¸åŒæœºå‹ã€‚</p>\n<p>density åˆ†å‰²</p>\n<ul>\n<li>app-hdpi-release.apk</li>\n<li>app-universal-release.apk</li>\n<li>app-xhdpi-release.apk</li>\n<li>app-xxhdpi-release.apk</li>\n<li>app-xxxhdpi-release.apk</li>\n</ul>\n<p>ABI åˆ†å‰²</p>\n<ul>\n<li>app-armeabi-v7a-debug.apk</li>\n<li>app-mips-debug.apk</li>\n<li>app-x86-debug.apk</li>\n</ul>\n<h1 id=\"æ¨¡å—åŒ–\"><a href=\"#æ¨¡å—åŒ–\" class=\"headerlink\" title=\"æ¨¡å—åŒ–\"></a>æ¨¡å—åŒ–</h1><p>è¿™ä¸ª Title å¤ªå¤§ï¼Œæˆ‘ä¼šå•ç‹¬æ’°æ–‡åŠ ä»¥è®²è§£ã€‚</p>\n<h1 id=\"æ’ä»¶åŒ–-1\"><a href=\"#æ’ä»¶åŒ–-1\" class=\"headerlink\" title=\"æ’ä»¶åŒ–\"></a>æ’ä»¶åŒ–</h1><p>è¿™ä¸ª Title å¤ªå¤§ï¼Œæˆ‘åŒæ ·ä¼šå•ç‹¬æ’°æ–‡åŠ ä»¥è®²è§£ã€‚ä¸Šä¸ªæœˆåˆšè¯»å®ŒåŒ…å»ºå¼ºæ‰€è‘—çš„ã€ŠAndroid æ’ä»¶è¯å¼€å‘æŒ‡å—ã€‹ä¸€ä¹¦ï¼Œæ‰€è·é¢‡ä¸°ã€‚åé¢æˆ‘ä¼šå°†ä¹¦ä¸­çš„é‡ç‚¹å†…å®¹æ€»ç»“æˆæ–‡å­—ç¬”è®°åˆ†äº«åœ¨åšå®¢é‡Œé¢ã€‚</p>\n<h1 id=\"GET-å’Œ-POST-åŒºåˆ«\"><a href=\"#GET-å’Œ-POST-åŒºåˆ«\" class=\"headerlink\" title=\"GET å’Œ POST åŒºåˆ«\"></a>GET å’Œ POST åŒºåˆ«</h1><h2 id=\"æœ¬è´¨ä¸Šæ— åŒºåˆ«\"><a href=\"#æœ¬è´¨ä¸Šæ— åŒºåˆ«\" class=\"headerlink\" title=\"æœ¬è´¨ä¸Šæ— åŒºåˆ«\"></a>æœ¬è´¨ä¸Šæ— åŒºåˆ«</h2><p>é¦–å…ˆï¼ŒGET å’Œ POST éƒ½æ˜¯HTTP åè®®ä¸­å‘é€è¯·æ±‚çš„æ–¹æ³•ï¼Œè¿™ä¸¤è€…åº•å±‚çš„åè®®ä¹Ÿéƒ½æ˜¯ TCP/IPï¼Œè¿™ä¸¤è€…å¹¶æ²¡æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ã€‚</p>\n<p>ä»åº•å±‚åŸç†ä¸Šï¼Œ<strong>GET äº§ç”Ÿäº†ä¸€ä¸ª TCP æ•°æ®åŒ…ï¼ŒPOST äº§ç”Ÿäº†ä¸¤ä¸ª TCP æ•°æ®åŒ…ã€‚</strong></p>\n<p>å¯¹äº GET è¯·æ±‚ï¼Œæµè§ˆå™¨æŠŠ HTTP Header å’Œ Data ä¸€åŒå‘é€å‡ºå»ï¼ŒæœåŠ¡å™¨ç›¸åº” 200ã€‚</p>\n<p>å¯¹äº POST è¯·æ±‚ï¼Œæµè§ˆå™¨ å…ˆå‘é€ HTTP Headerï¼ŒæœåŠ¡å™¨å“åº” 100ï¼ˆcontinueï¼‰ï¼Œæµè§ˆå™¨å†å‘é€ Dataï¼ŒæœåŠ¡å™¨å“åº” 200ï¼ˆè¿”å›æ•°æ®ï¼‰ã€‚</p>\n<h2 id=\"æ˜¯å¦å¯ä»¥äº’æ¢\"><a href=\"#æ˜¯å¦å¯ä»¥äº’æ¢\" class=\"headerlink\" title=\"æ˜¯å¦å¯ä»¥äº’æ¢\"></a>æ˜¯å¦å¯ä»¥äº’æ¢</h2><p>é‚£ä¹ˆæ˜¯å¦å¯ä»¥æŠŠæ‰€æœ‰çš„ POST è¯·æ±‚éƒ½æ”¹æˆ GETï¼Œä»¥æé«˜ç½‘ç«™ç›¸åº”æ•ˆç‡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸è¡Œã€‚</p>\n<ol>\n<li>ä¸¤è€…å…·æœ‰ä¸åŒçš„è¯­ä¹‰ã€‚</li>\n<li>åœ¨ç½‘ç»œç¯å¢ƒå¥½çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡è¯·æ±‚ä¸ä¸€æ¬¡è¯·æ±‚åœ¨å“åº”æ—¶é—´ä¸Šç›¸å·®å¾®ä¹å…¶å¾®ï¼›åœ¨ç½‘ç»œæƒ…å†µå·®çš„æƒ…å†µä¸‹ï¼Œä¸¤æ¬¡è¯·æ±‚æ›´æœ‰åŠ©äºè¿›è¡Œæ•°æ®å®Œæ•´æ€§æ ¡éªŒã€‚</li>\n<li>å¹¶éæ‰€æœ‰æµè§ˆå™¨åœ¨ POST æ—¶éƒ½å‘é€ä¸¤ä¸ªåŒ…ï¼ŒFirefox å°±åªå‘é€ä¸€æ¬¡ã€‚</li>\n</ol>\n<h2 id=\"å…¶å®ƒä¸€äº›è¡¥å……\"><a href=\"#å…¶å®ƒä¸€äº›è¡¥å……\" class=\"headerlink\" title=\"å…¶å®ƒä¸€äº›è¡¥å……\"></a>å…¶å®ƒä¸€äº›è¡¥å……</h2><ul>\n<li>æµè§ˆå™¨å›é€€ï¼šGETåœ¨æµè§ˆå™¨å›é€€æ—¶æ˜¯æ— å®³çš„ï¼ˆå¹‚ç­‰æ€§ï¼‰ï¼Œè€ŒPOSTä¼šå†æ¬¡æäº¤è¯·æ±‚ã€‚</li>\n<li>Bookmarkï¼šGETäº§ç”Ÿçš„URLåœ°å€å¯ä»¥è¢«Bookmarkï¼Œè€ŒPOSTä¸å¯ä»¥ã€‚</li>\n<li>Cacheï¼šGETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨cacheï¼Œè€ŒPOSTä¸ä¼šï¼Œé™¤éæ‰‹åŠ¨è®¾ç½®ã€‚</li>\n<li>ç¼–ç ï¼šGETè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€ŒPOSTæ”¯æŒå¤šç§ç¼–ç æ–¹å¼ã€‚</li>\n<li>å‚æ•°ä¿å­˜ï¼šGETè¯·æ±‚å‚æ•°ä¼šè¢«å®Œæ•´ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•é‡Œï¼Œè€ŒPOSTä¸­çš„å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚</li>\n<li>å‚æ•°é•¿åº¦ï¼šGETè¯·æ±‚åœ¨URLä¸­ä¼ é€çš„å‚æ•°æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œè€ŒPOSTæ²¡æœ‰ã€‚</li>\n<li>å‚æ•°ç±»å‹ï¼šå¯¹å‚æ•°çš„æ•°æ®ç±»å‹ï¼ŒGETåªæ¥å—ASCIIå­—ç¬¦ï¼Œè€ŒPOSTæ²¡æœ‰é™åˆ¶ã€‚</li>\n<li>å‚æ•°å®‰å…¨ï¼šGETæ¯”POSTæ›´ä¸å®‰å…¨ï¼Œå› ä¸ºå‚æ•°ç›´æ¥æš´éœ²åœ¨URLä¸Šï¼Œæ‰€ä»¥ä¸èƒ½ç”¨æ¥ä¼ é€’æ•æ„Ÿä¿¡æ¯ã€‚</li>\n<li>å‚æ•°ä¼ é€’ï¼šGETå‚æ•°é€šè¿‡URLä¼ é€’ï¼ŒPOSTæ”¾åœ¨Request bodyä¸­ã€‚</li>\n</ul>\n<h1 id=\"LeakCanary-æ£€æŸ¥å†…å­˜æ³„æ¼çš„åŸç†\"><a href=\"#LeakCanary-æ£€æŸ¥å†…å­˜æ³„æ¼çš„åŸç†\" class=\"headerlink\" title=\"LeakCanary æ£€æŸ¥å†…å­˜æ³„æ¼çš„åŸç†\"></a>LeakCanary æ£€æŸ¥å†…å­˜æ³„æ¼çš„åŸç†</h1><h2 id=\"èƒŒæ™¯çŸ¥è¯†\"><a href=\"#èƒŒæ™¯çŸ¥è¯†\" class=\"headerlink\" title=\"èƒŒæ™¯çŸ¥è¯†\"></a>èƒŒæ™¯çŸ¥è¯†</h2><p>JVM è¿è¡Œæ—¶å†…å­˜åˆ†åŒºï¼Œå†…å­˜æ¨¡å‹ï¼Œåƒåœ¾å›æ”¶ç®—æ³•ï¼ŒGC Rootsï¼Œå¼ºè½¯å¼±è™šå¼•ç”¨ã€‚</p>\n<blockquote>\n<p>A small leak will sink a great ship.<br>â€“ Benjamin Franklin</p>\n</blockquote>\n<p><a href=\"https://github.com/square/leakcanary\" target=\"_blank\" rel=\"noopener\">LeakCanary</a> æ˜¯ç”±Squareå…¬å¸å¼€æºçš„å†…å­˜æ³„æ¼æ£€æµ‹å·¥å…·ã€‚Logo æ˜¯ä¸€åªå°é»„é¸¡ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"https://github.githubassets.com/images/icons/emoji/unicode/1f424.png\" alt=\"LeakCanaryLogo\" title=\"\">\n                </div>\n                <div class=\"image-caption\">LeakCanaryLogo</div>\n            </figure>\n<h2 id=\"åŸºæœ¬åŸç†\"><a href=\"#åŸºæœ¬åŸç†\" class=\"headerlink\" title=\"åŸºæœ¬åŸç†\"></a>åŸºæœ¬åŸç†</h2><ol>\n<li>åœ¨ Activity.onDestroy æ–¹æ³•é‡Œæ‰‹åŠ¨è§¦å‘ GCã€‚</li>\n<li>åˆ©ç”¨ ReferenceQueue + WeakReference åˆ¤æ–­æ˜¯å¦æœ‰æœªé‡Šæ”¾çš„å¼•ç”¨ã€‚</li>\n<li>ç»“åˆ  dump memory å¾—åˆ°çš„ hprof æ–‡ä»¶ï¼Œåˆ©ç”¨ <a href=\"https://github.com/square/haha\" target=\"_blank\" rel=\"noopener\">HaHa(Headless Android Heap Analyzer)</a> åˆ†æå‡ºæ³„æ¼ä½ç½®ã€‚</li>\n</ol>\n<h2 id=\"æºç åˆ†æ\"><a href=\"#æºç åˆ†æ\" class=\"headerlink\" title=\"æºç åˆ†æ\"></a>æºç åˆ†æ</h2><h3 id=\"æ•´ä½“æµç¨‹\"><a href=\"#æ•´ä½“æµç¨‹\" class=\"headerlink\" title=\"æ•´ä½“æµç¨‹\"></a>æ•´ä½“æµç¨‹</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190608_interview/leakcanaryæ•´ä½“æµç¨‹.jpg\" alt=\"leakcanaryæ•´ä½“æµç¨‹\" title=\"\">\n                </div>\n                <div class=\"image-caption\">leakcanaryæ•´ä½“æµç¨‹</div>\n            </figure>\n<h3 id=\"å…¥å£\"><a href=\"#å…¥å£\" class=\"headerlink\" title=\"å…¥å£\"></a>å…¥å£</h3><p>éœ€è¦åœ¨ Application ç±»ä¸­å¯ç”¨ LeakCanaryã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®‰è£…</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (!LeakCanary.isInAnalyzerProcess(WeiboApplication.<span class=\"keyword\">this</span>)) &#123;</span><br><span class=\"line\">  LeakCanary.install(WeiboApplication.<span class=\"keyword\">this</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// install</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> RefWatcher <span class=\"title\">install</span><span class=\"params\">(Application application)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ((AndroidRefWatcherBuilder) refWatcher(application)</span><br><span class=\"line\"> .listenerServiceClass(DisplayLeakService.class).excludedRefs(AndroidExcludedRefs.createAppDefaults().build())) <span class=\"comment\">//é…ç½®ç›‘å¬å™¨åŠåˆ†ææ•°æ®æ ¼å¼</span></span><br><span class=\"line\">  .buildAndInstall();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>LeakCanary ä¼šè¿è¡Œåœ¨ä¸¤ä¸ªè¿›ç¨‹ï¼šAppè¿›ç¨‹ä¸­è¿è¡Œç›‘å¬ä»»åŠ¡ï¼Œå·¥ä½œè¿›ç¨‹ä¸­è¿è¡Œåˆ†æä»»åŠ¡ã€‚</p>\n<h3 id=\"ç›‘å¬\"><a href=\"#ç›‘å¬\" class=\"headerlink\" title=\"ç›‘å¬\"></a>ç›‘å¬</h3><p>åœ¨<code>install</code>æ–¹æ³•é‡Œï¼Œåˆ›å»ºäº†ä¸€ä¸ª<code>RefWatcher</code>å¯¹è±¡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> RefWatcher <span class=\"title\">buildAndInstall</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    RefWatcher refWatcher = <span class=\"keyword\">this</span>.build();</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(refWatcher != RefWatcher.DISABLED) &#123;</span><br><span class=\"line\">        LeakCanary.enableDisplayLeakActivity(<span class=\"keyword\">this</span>.context);</span><br><span class=\"line\">        ActivityRefWatcher.install((Application)<span class=\"keyword\">this</span>.context, refWatcher);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> refWatcher;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">install</span><span class=\"params\">(Application application, RefWatcher refWatcher)</span> </span>&#123;</span><br><span class=\"line\">    (<span class=\"keyword\">new</span> ActivityRefWatcher(application, refWatcher)).watchActivities();</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> ActivityLifecycleCallbacks lifecycleCallbacks = <span class=\"keyword\">new</span> ActivityLifecycleCallbacks() &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityCreated</span><span class=\"params\">(Activity activity, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityStarted</span><span class=\"params\">(Activity activity)</span> </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityResumed</span><span class=\"params\">(Activity activity)</span> </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityPaused</span><span class=\"params\">(Activity activity)</span> </span>&#123;&#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityStopped</span><span class=\"params\">(Activity activity)</span> </span>&#123; &#125;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivitySaveInstanceState</span><span class=\"params\">(Activity activity, Bundle outState)</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityDestroyed</span><span class=\"params\">(Activity activity)</span> </span>&#123;</span><br><span class=\"line\">        ActivityRefWatcher.<span class=\"keyword\">this</span>.onActivityDestroyed(activity);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">onActivityDestroyed</span><span class=\"params\">(Activity activity)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.refWatcher.watch(activity);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>LeakCanary é€šè¿‡<code>Application.registerActivityLifecycleCallbacks</code>æ–¹æ³•ï¼Œæ³¨å†Œäº† Activity ç”Ÿå‘½å‘¨æœŸçš„ç›‘å¬ï¼Œåœ¨ç›‘æµ‹åˆ°<code>onDestroyed</code>è°ƒç”¨æ—¶ï¼Œè§¦å‘<code>RefWatcher.watch</code>æ–¹æ³•ã€‚ä¸‹é¢æ˜¯è¯¥æ–¹æ³•çš„å®ç°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">watch</span><span class=\"params\">(Object watchedReference, String referenceName)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span> != DISABLED) &#123;</span><br><span class=\"line\">      Preconditions.checkNotNull(watchedReference, <span class=\"string\">\"watchedReference\"</span>);</span><br><span class=\"line\">      Preconditions.checkNotNull(referenceName, <span class=\"string\">\"referenceName\"</span>);</span><br><span class=\"line\">      <span class=\"keyword\">long</span> watchStartNanoTime = System.nanoTime();</span><br><span class=\"line\">      String key = UUID.randomUUID().toString();<span class=\"comment\">//ä¿è¯keyçš„å”¯ä¸€æ€§</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.retainedKeys.add(key);</span><br><span class=\"line\">      KeyedWeakReference reference = <span class=\"keyword\">new</span> KeyedWeakReference(watchedReference, key, referenceName, <span class=\"keyword\">this</span>.queue);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.ensureGoneAsync(watchStartNanoTime, reference);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">KeyedWeakReference</span> <span class=\"keyword\">extends</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">Object</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> String key;</span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">final</span> String name;</span><br><span class=\"line\">  </span><br><span class=\"line\">  KeyedWeakReference(Object referent, String key, String name, ReferenceQueue&lt;Object&gt; referenceQueue) &#123; <span class=\"comment\">//ReferenceQueueç±»ç›‘å¬å›æ”¶æƒ…å†µ</span></span><br><span class=\"line\">    <span class=\"keyword\">super</span>(Preconditions.checkNotNull(referent, <span class=\"string\">\"referent\"</span>), (ReferenceQueue)Preconditions.checkNotNull(referenceQueue, <span class=\"string\">\"referenceQueue\"</span>));</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.key = (String)Preconditions.checkNotNull(key, <span class=\"string\">\"key\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.name = (String)Preconditions.checkNotNull(name, <span class=\"string\">\"name\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">ensureGoneAsync</span><span class=\"params\">(<span class=\"keyword\">final</span> <span class=\"keyword\">long</span> watchStartNanoTime, <span class=\"keyword\">final</span> KeyedWeakReference reference)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.watchExecutor.execute(<span class=\"keyword\">new</span> Retryable() &#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Result <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> RefWatcher.<span class=\"keyword\">this</span>.ensureGone(reference, watchStartNanoTime);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç±»<code>KeyedWeakReference</code>æ˜¯<code>WeakReference</code>ï¼Œè¿™é‡Œåˆ©ç”¨äº†<code>ReferenceQueue</code>æ¥ç›‘å¬ GC åçš„å›æ”¶æƒ…å†µã€‚<code>ReferenceQueue</code>çš„åŸç†æ˜¯ï¼Œå½“ GC æ£€æµ‹åˆ°å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œä¼šå°†å…¶æ·»åŠ åˆ° ReferenceQueue ä¸­ã€‚å½“ GC è¿‡åå¯¹è±¡ä¸€ç›´ä¸è¢«åŠ å…¥ ReferenceQueueï¼Œè¯´æ˜å®ƒå¯èƒ½å­˜åœ¨å†…å­˜æ³„æ¼ã€‚</p>\n<p>æ­£æ˜¯åˆ©ç”¨ ReferenceQueue è¿™ä¸€ç‰¹æ€§ï¼ŒLeakCanary å®ç°äº†å¯¹å¯¹è±¡æ˜¯å¦è¢«é‡Šæ”¾çš„ç›‘æ§ã€‚</p>\n<h4 id=\"ç›‘æµ‹-Fragment-æ³„æ¼\"><a href=\"#ç›‘æµ‹-Fragment-æ³„æ¼\" class=\"headerlink\" title=\"ç›‘æµ‹ Fragment æ³„æ¼\"></a>ç›‘æµ‹ Fragment æ³„æ¼</h4><p>ä¸Šæ–‡ä¸­çœ‹åˆ°åªåœ¨ Activity.onDestroy ä¸­è¿›è¡Œæ£€æµ‹ï¼Œå¦‚æœéœ€è¦æ£€æµ‹ Fragment æ—¶ï¼Œåº”å½“æ‰‹åŠ¨åœ¨ Fragment.onDestroy ä¸­åˆ›å»ºä¸€ä¸ª RefWatcher å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ watch æ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BaseFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">Fragment</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onDestroy</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">super</span>.onDestroy();</span><br><span class=\"line\">    RefWatcher refWatcher = ExampleApplication.getRefWatcher(getActivity());</span><br><span class=\"line\">    refWatcher.watch(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"ensureGone\"><a href=\"#ensureGone\" class=\"headerlink\" title=\"ensureGone\"></a>ensureGone</h3><p>æ˜¯æ£€æµ‹å›æ”¶çš„æ ¸å¿ƒä»£ç ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Result <span class=\"title\">ensureGone</span><span class=\"params\">(KeyedWeakReference reference, <span class=\"keyword\">long</span> watchStartNanoTime)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">long</span> gcStartNanoTime = System.nanoTime();</span><br><span class=\"line\">  <span class=\"keyword\">long</span> watchDurationMs = TimeUnit.NANOSECONDS.toMillis(gcStartNanoTime - watchStartNanoTime);</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.removeWeaklyReachableReferences(); <span class=\"comment\">//å…ˆå°†å¼•ç”¨å°è¯•ä»é˜Ÿåˆ—ä¸­pollå‡ºæ¥</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.debuggerControl.isDebuggerAttached()) &#123; <span class=\"comment\">//è§„é¿è°ƒè¯•æ¨¡å¼</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Result.RETRY;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(<span class=\"keyword\">this</span>.gone(reference)) &#123; <span class=\"comment\">//æ£€æµ‹æ˜¯å¦å·²ç»å›æ”¶</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> Result.DONE;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123; <span class=\"comment\">//å¦‚æœæ²¡æœ‰è¢«å›æ”¶ï¼Œåˆ™æ‰‹åŠ¨GC</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.gcTrigger.runGc();<span class=\"comment\">//æ‰‹åŠ¨GCæ–¹æ³•</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.removeWeaklyReachableReferences();<span class=\"comment\">//å†æ¬¡å°è¯•pollï¼Œæ£€æµ‹æ˜¯å¦è¢«å›æ”¶</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!<span class=\"keyword\">this</span>.gone(reference)) &#123; <span class=\"comment\">// è¿˜æ²¡æœ‰è¢«å›æ”¶ï¼Œåˆ™dumpå †ä¿¡æ¯ï¼Œè°ƒèµ·åˆ†æè¿›ç¨‹è¿›è¡Œåˆ†æ</span></span><br><span class=\"line\">      <span class=\"keyword\">long</span> startDumpHeap = System.nanoTime();</span><br><span class=\"line\">      <span class=\"keyword\">long</span> gcDurationMs = TimeUnit.NANOSECONDS.toMillis(startDumpHeap - gcStartNanoTime);</span><br><span class=\"line\">      File heapDumpFile = <span class=\"keyword\">this</span>.heapDumper.dumpHeap();</span><br><span class=\"line\">      <span class=\"keyword\">if</span>(heapDumpFile == HeapDumper.RETRY_LATER) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> Result.RETRY;<span class=\"comment\">//éœ€è¦é‡è¯•</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">long</span> heapDumpDurationMs = TimeUnit.NANOSECONDS.toMillis(System.nanoTime() - startDumpHeap);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.heapdumpListener.analyze(<span class=\"keyword\">new</span> HeapDump(heapDumpFile, reference.key, reference.name, <span class=\"keyword\">this</span>.excludedRefs, watchDurationMs, gcDurationMs, heapDumpDurationMs));</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"keyword\">return</span> Result.DONE;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">gone</span><span class=\"params\">(KeyedWeakReference reference)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> !<span class=\"keyword\">this</span>.retainedKeys.contains(reference.key);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">removeWeaklyReachableReferences</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  KeyedWeakReference ref;</span><br><span class=\"line\">  <span class=\"keyword\">while</span>((ref = (KeyedWeakReference)<span class=\"keyword\">this</span>.queue.poll()) != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.retainedKeys.remove(ref.key);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>ensureGone</code>æ–¹æ³•é€šè¿‡æ£€æµ‹<code>referenceQueue</code>é˜Ÿåˆ—çš„å¼•ç”¨æƒ…å†µï¼Œæ¥åˆ¤æ–­å›æ”¶æƒ…å†µï¼Œé€šè¿‡æ‰‹åŠ¨ GC æ¥è¿›ä¸€æ­¥ç¡®è®¤å›æ”¶æƒ…å†µã€‚è¿™æ˜¯ä¸€ä¸ªè€—æ—¶è¿‡ç¨‹ï¼Œè¿è¡Œåœ¨<code>WatchExecutor</code>ä¸­ã€‚</p>\n<p>LeakCanary åœ¨ä¸»çº¿ç¨‹ç©ºé—²æ—¶å€™æ‰§è¡Œæ£€æµ‹ä»»åŠ¡ï¼Œä»£ç ä½äº<code>AndroidWatchExecutor</code>ä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">AndroidWatchExecutor</span> <span class=\"keyword\">implements</span> <span class=\"title\">WatchExecutor</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String LEAK_CANARY_THREAD_NAME = <span class=\"string\">\"LeakCanary-Heap-Dump\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Handler mainHandler = <span class=\"keyword\">new</span> Handler(Looper.getMainLooper());</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Handler backgroundHandler;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> initialDelayMillis;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">long</span> maxBackoffFactor;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">AndroidWatchExecutor</span><span class=\"params\">(<span class=\"keyword\">long</span> initialDelayMillis)</span> </span>&#123;</span><br><span class=\"line\">        HandlerThread handlerThread = <span class=\"keyword\">new</span> HandlerThread(<span class=\"string\">\"LeakCanary-Heap-Dump\"</span>);</span><br><span class=\"line\">        handlerThread.start();</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.backgroundHandler = <span class=\"keyword\">new</span> Handler(handlerThread.getLooper());</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.initialDelayMillis = initialDelayMillis;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.maxBackoffFactor = <span class=\"number\">9223372036854775807L</span> / initialDelayMillis;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">execute</span><span class=\"params\">(Retryable retryable)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(Looper.getMainLooper().getThread() == Thread.currentThread()) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.waitForIdle(retryable, <span class=\"number\">0</span>);<span class=\"comment\">//éœ€è¦åœ¨ä¸»çº¿ç¨‹ä¸­æ£€æµ‹</span></span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.postWaitForIdle(retryable, <span class=\"number\">0</span>);<span class=\"comment\">//poståˆ°ä¸»çº¿ç¨‹</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">postWaitForIdle</span><span class=\"params\">(<span class=\"keyword\">final</span> Retryable retryable, <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> failedAttempts)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mainHandler.post(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                AndroidWatchExecutor.<span class=\"keyword\">this</span>.waitForIdle(retryable, failedAttempts);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">waitForIdle</span><span class=\"params\">(<span class=\"keyword\">final</span> Retryable retryable, <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> failedAttempts)</span> </span>&#123;</span><br><span class=\"line\">        Looper.myQueue().addIdleHandler(<span class=\"keyword\">new</span> IdleHandler() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">queueIdle</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                AndroidWatchExecutor.<span class=\"keyword\">this</span>.postToBackgroundWithDelay(retryable, failedAttempts);<span class=\"comment\">//åˆ‡æ¢åˆ°å­çº¿ç¨‹</span></span><br><span class=\"line\">                <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">postToBackgroundWithDelay</span><span class=\"params\">(<span class=\"keyword\">final</span> Retryable retryable, <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> failedAttempts)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">long</span> exponentialBackoffFactor = (<span class=\"keyword\">long</span>)Math.min(Math.pow(<span class=\"number\">2.0</span>D, (<span class=\"keyword\">double</span>)failedAttempts), (<span class=\"keyword\">double</span>)<span class=\"keyword\">this</span>.maxBackoffFactor); <span class=\"comment\">// äºŒè¿›åˆ¶é€€è®©ç®—æ³•</span></span><br><span class=\"line\">        <span class=\"keyword\">long</span> delayMillis = <span class=\"keyword\">this</span>.initialDelayMillis * exponentialBackoffFactor;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.backgroundHandler.postDelayed(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                Result result = retryable.run();<span class=\"comment\">//RefWatcher.this.ensureGone(reference, watchStartNanoTime)æ‰§è¡Œ</span></span><br><span class=\"line\">                <span class=\"keyword\">if</span>(result == Result.RETRY) &#123;</span><br><span class=\"line\">                    AndroidWatchExecutor.<span class=\"keyword\">this</span>.postWaitForIdle(retryable, failedAttempts + <span class=\"number\">1</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;, delayMillis);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å…¶ä¸­è°ƒç”¨äº†<code>MessageQueue.addIdleHandler</code>æ–¹æ³•ï¼ŒLooper ä¸­çš„ MessageQueue æœ‰ä¸ª<code>mIdleHandlers</code>é˜Ÿåˆ—ï¼Œåœ¨è·å–ä¸‹ä¸ªè¦æ‰§è¡Œçš„ Message æ—¶ï¼Œå¦‚æœæ²¡æœ‰å‘ç°å¯æ‰§è¡Œçš„ Messageï¼Œå°±ä¼šå›è°ƒ<code>queueIdle()</code>æ–¹æ³•ï¼Œå¦‚æœ<code>queueIdle()</code>è¿”å›<code>false</code>ï¼Œåˆ™ç§»é™¤è¯¥ IdleHandlerã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Message <span class=\"title\">next</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> pendingIdleHandlerCount = -<span class=\"number\">1</span>; <span class=\"comment\">// -1 only during first iteration</span></span><br><span class=\"line\">    <span class=\"keyword\">int</span> nextPollTimeoutMillis = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">       \t\tÂ·Â·Â·</span><br><span class=\"line\">       \t\tÂ·Â·Â·<span class=\"comment\">//çœç•¥éƒ¨åˆ†æ¶ˆæ¯æŸ¥æ‰¾ä»£ç </span></span><br><span class=\"line\">       \t\t</span><br><span class=\"line\">       \t\t<span class=\"keyword\">if</span> (msg != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (now &lt; msg.when) &#123;</span><br><span class=\"line\">                    <span class=\"comment\">// Next message is not ready.  Set a timeout to wake up when it is ready.</span></span><br><span class=\"line\">                    nextPollTimeoutMillis = (<span class=\"keyword\">int</span>) Math.min(msg.when - now, Integer.MAX_VALUE);</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    Â·Â·Â·</span><br><span class=\"line\">                    </span><br><span class=\"line\">                    <span class=\"keyword\">return</span> msg;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// No more messages.</span></span><br><span class=\"line\">                nextPollTimeoutMillis = -<span class=\"number\">1</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">       \t\t</span><br><span class=\"line\">            <span class=\"comment\">// If first time idle, then get the number of idlers to run.</span></span><br><span class=\"line\">            <span class=\"comment\">// Idle handles only run if the queue is empty or if the first message</span></span><br><span class=\"line\">            <span class=\"comment\">// in the queue (possibly a barrier) is due to be handled in the future.</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pendingIdleHandlerCount &lt; <span class=\"number\">0</span></span><br><span class=\"line\">                    &amp;&amp; (mMessages == <span class=\"keyword\">null</span> || now &lt; mMessages.when)) &#123;</span><br><span class=\"line\">                pendingIdleHandlerCount = mIdleHandlers.size();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pendingIdleHandlerCount &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// No idle handlers to run.  Loop and wait some more.</span></span><br><span class=\"line\">                mBlocked = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">                <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mPendingIdleHandlers == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                mPendingIdleHandlers = <span class=\"keyword\">new</span> IdleHandler[Math.max(pendingIdleHandlerCount, <span class=\"number\">4</span>)];</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            mPendingIdleHandlers = mIdleHandlers.toArray(mPendingIdleHandlers);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Run the idle handlers.</span></span><br><span class=\"line\">        <span class=\"comment\">// We only ever reach this code block during the first iteration.</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; pendingIdleHandlerCount; i++) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> IdleHandler idler = mPendingIdleHandlers[i];</span><br><span class=\"line\">            mPendingIdleHandlers[i] = <span class=\"keyword\">null</span>; <span class=\"comment\">// release the reference to the handler</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">boolean</span> keep = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                keep = idler.queueIdle();</span><br><span class=\"line\">            &#125; <span class=\"keyword\">catch</span> (Throwable t) &#123;</span><br><span class=\"line\">                Log.wtf(TAG, <span class=\"string\">\"IdleHandler threw exception\"</span>, t);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!keep) &#123;<span class=\"comment\">//è¿”å›falseï¼Œåˆ™ä»é˜Ÿåˆ—ç§»é™¤ï¼Œä¸‹æ¬¡ç©ºé—²ä¸ä¼šè°ƒç”¨ã€‚</span></span><br><span class=\"line\">                <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">                    mIdleHandlers.remove(idler);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Reset the idle handler count to 0 so we do not run them again.</span></span><br><span class=\"line\">        pendingIdleHandlerCount = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// While calling an idle handler, a new message could have been delivered</span></span><br><span class=\"line\">        <span class=\"comment\">// so go back and look again for a pending message without waiting.</span></span><br><span class=\"line\">        nextPollTimeoutMillis = <span class=\"number\">0</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"åˆ†æ\"><a href=\"#åˆ†æ\" class=\"headerlink\" title=\"åˆ†æ\"></a>åˆ†æ</h3><p>åˆ©ç”¨ VMDebug+HaHa å®Œæˆåˆ†æä»»åŠ¡ã€‚</p>\n<ol>\n<li>åœ¨åå°çº¿ç¨‹æ£€æŸ¥å¼•ç”¨æ˜¯å¦è¢«æ¸…é™¤ï¼Œå¦‚æœæ²¡æœ‰ï¼Œè°ƒç”¨ GCã€‚</li>\n<li>å¦‚æœå¼•ç”¨è¿˜æ˜¯æœªè¢«æ¸…é™¤ï¼ŒæŠŠ heap å†…å­˜ dump åˆ° APP å¯¹åº”çš„æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ª <code>.hprof</code> æ–‡ä»¶ä¸­ã€‚</li>\n<li>åœ¨å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ <code>HeapAnalyzerService</code> æœ‰ä¸€ä¸ª <code>HeapAnalyzer</code> ä½¿ç”¨<a href=\"https://github.com/square/haha\" target=\"_blank\" rel=\"noopener\">HAHA</a> è§£æè¿™ä¸ªæ–‡ä»¶ã€‚</li>\n<li>å¾—ç›Šäºå”¯ä¸€çš„ reference key, <code>HeapAnalyzer</code> æ‰¾åˆ° <code>KeyedWeakReference</code>ï¼Œå®šä½å†…å­˜æ³„æ¼ã€‚</li>\n<li><code>HeapAnalyzer</code> è®¡ç®— <em>åˆ° GC roots çš„æœ€çŸ­å¼ºå¼•ç”¨è·¯å¾„</em>ï¼Œå¹¶ç¡®å®šæ˜¯å¦æ˜¯æ³„æ¼ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œå»ºç«‹å¯¼è‡´æ³„æ¼çš„å¼•ç”¨é“¾ã€‚</li>\n<li>å¼•ç”¨é“¾ä¼ é€’åˆ° APP è¿›ç¨‹ä¸­çš„ <code>DisplayLeakService</code>ï¼Œ å¹¶ä»¥é€šçŸ¥çš„å½¢å¼å±•ç¤ºå‡ºæ¥ã€‚</li>\n</ol>\n<h4 id=\"HeapAnalyzerService\"><a href=\"#HeapAnalyzerService\" class=\"headerlink\" title=\"HeapAnalyzerService\"></a>HeapAnalyzerService</h4><p>æ˜¯ä¸€ä¸ª IntentServiceï¼Œè°ƒç”¨ HAHA ä¸­çš„<code>HeapAnalyzer</code>å¯¹ hprof æ–‡ä»¶è¿›è¡Œåˆ†æï¼Œæ‰¾å‡ºæ³„éœ²ç‚¹ã€‚ç”±äºè¿è¡Œåœ¨ä¸åŒè¿›ç¨‹ï¼Œé€šè¿‡ Intent ä¼ é€’æ•°æ®ã€‚æœ€ç»ˆå°†ç»“æœå‘å›ç»™ç›‘å¬å™¨ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onHandleIntent</span><span class=\"params\">(Intent intent)</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (intent == <span class=\"keyword\">null</span>) &#123;<span class=\"comment\">// intent ä¸ºç©ºç›´æ¥è¿”å›</span></span><br><span class=\"line\">    CanaryLog.d(<span class=\"string\">\"HeapAnalyzerService received a null intent, ignoring.\"</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  String listenerClassName = intent.getStringExtra(LISTENER_CLASS_EXTRA);<span class=\"comment\">//è·å–å›è°ƒç±»çš„ç±»å</span></span><br><span class=\"line\">  HeapDump heapDump = (HeapDump) intent.getSerializableExtra(HEAPDUMP_EXTRA);<span class=\"comment\">//è·å– HeapDump </span></span><br><span class=\"line\">  HeapAnalyzer heapAnalyzer = <span class=\"keyword\">new</span> HeapAnalyzer(heapDump.excludedRefs);<span class=\"comment\">//åˆ›å»º HeapAnalyzer</span></span><br><span class=\"line\">  AnalysisResult result = heapAnalyzer.checkForLeak(heapDump.heapDumpFile, heapDump.referenceKey);<span class=\"comment\">//æ£€æŸ¥æ³„æ¼ï¼ˆé€šè¿‡ HAHA æ¥å®Œæˆï¼‰ï¼Œå¹¶è·å–ç»“æœ</span></span><br><span class=\"line\">  AbstractAnalysisResultService.sendResultToListener(<span class=\"keyword\">this</span>, listenerClassName, heapDump, result);<span class=\"comment\">//å°†åˆ†æç»“æœå‘é€ç»™ç›‘å¬å™¨</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><p><a href=\"https://juejin.im/post/5ab8d3d46fb9a028ca52f813\" target=\"_blank\" rel=\"noopener\">æ˜é‡‘ï¼šJava å†…å­˜é—®é¢˜åŠ LeakCanary åŸç†åˆ†æ</a><br><a href=\"https://ivanljt.github.io/blog/2017/12/15/%E6%8B%86%E8%BD%AE%E5%AD%90%E7%B3%BB%E5%88%97%E2%80%94%E2%80%94LeakCanary%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86/\" target=\"_blank\" rel=\"noopener\">æ‹†è½®å­ç³»åˆ—â€”â€”LeakCanaryå·¥ä½œåŸç†</a></p>\n<h1 id=\"åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶å†…éƒ¨æµç¨‹\"><a href=\"#åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶å†…éƒ¨æµç¨‹\" class=\"headerlink\" title=\"åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶å†…éƒ¨æµç¨‹\"></a>åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶å†…éƒ¨æµç¨‹</h1><p>Java åœ¨ new ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œä¼šå…ˆæ£€æŸ¥å¯¹è±¡æ‰€å±çš„ç±»æ˜¯å¦å·²ç»åŠ è½½åˆ°å†…å­˜ã€‚å¦‚æœæ²¡æœ‰åŠ è½½ï¼Œåˆ™ä¼šå…ˆæ‰§è¡Œ<strong>ç±»çš„åŠ è½½è¿‡ç¨‹</strong>ï¼›å¦‚æœå·²ç»åŠ è½½ï¼Œåˆ™ç›´æ¥æ‰§è¡Œ<strong>å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹</strong>ã€‚</p>\n<h2 id=\"ç±»çš„åŠ è½½è¿‡ç¨‹\"><a href=\"#ç±»çš„åŠ è½½è¿‡ç¨‹\" class=\"headerlink\" title=\"ç±»çš„åŠ è½½è¿‡ç¨‹\"></a>ç±»çš„åŠ è½½è¿‡ç¨‹</h2><p>Java ä½¿ç”¨<strong>åŒäº²å§”æ´¾æ¨¡å‹</strong>æ¥è¿›è¡Œç±»çš„åŠ è½½ã€‚</p>\n<p>å¦‚æœä¸€ä¸ªç±»åŠ è½½å™¨ï¼ˆClassLoaderï¼‰æ”¶åˆ°äº†ç±»åŠ è½½çš„è¯·æ±‚ï¼Œå®ƒé¦–å…ˆä¸ä¼šè‡ªå·±å»å°è¯•åŠ è½½è¿™ä¸ªç±»ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼Œæ¯ä¸€ä¸ªå±‚æ¬¡çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ã€‚å› æ­¤æ‰€æœ‰çš„åŠ è½½è¯·æ±‚æœ€ç»ˆéƒ½åº”è¯¥ä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ï¼Œåªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¿™ä¸ªåŠ è½½è¯·æ±‚ï¼ˆå®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€è¦åŠ è½½çš„ç±»ï¼‰æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ã€‚</p>\n<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯èƒ½å¤Ÿç¡®ä¿ä¸€ä¸ªç±»çš„å…¨å±€å”¯ä¸€æ€§ã€‚å› ä¸ºç±»çš„å”¯ä¸€æ€§ç”±åŠ è½½å™¨+ç±»åå…±åŒå†³å®šã€‚ä½¿ç”¨<strong>åŒäº²å§”æ´¾æ¨¡å‹</strong>ä¿è¯äº†åŒä¸€ä¸ªç±»å§‹ç»ˆç”±åŒä¸€åŠ è½½å™¨è¿›è¡ŒåŠ è½½ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/190608_interview/ç±»åŠ è½½è¿‡ç¨‹.jpg\" alt=\"ç±»åŠ è½½è¿‡ç¨‹\" title=\"\">\n                </div>\n                <div class=\"image-caption\">ç±»åŠ è½½è¿‡ç¨‹</div>\n            </figure>\n<h3 id=\"1-åŠ è½½\"><a href=\"#1-åŠ è½½\" class=\"headerlink\" title=\"1. åŠ è½½\"></a>1. åŠ è½½</h3><p>ç”±ç±»åŠ è½½å™¨è´Ÿè´£æ ¹æ®ä¸€ä¸ªç±»çš„å…¨é™å®šåæ¥è¯»å–æ­¤ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµåˆ° JVM å†…éƒ¨ï¼Œå¹¶å­˜å‚¨åœ¨è¿è¡Œæ—¶å†…å­˜åŒºçš„æ–¹æ³•åŒºï¼Œç„¶åå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªä¸ç›®æ ‡ç±»å‹å¯¹åº”çš„ java.lang.Class å¯¹è±¡å®ä¾‹ã€‚</p>\n<h3 id=\"2-éªŒè¯\"><a href=\"#2-éªŒè¯\" class=\"headerlink\" title=\"2. éªŒè¯\"></a>2. éªŒè¯</h3><ul>\n<li>æ ¼å¼éªŒè¯ï¼šéªŒè¯æ˜¯å¦ç¬¦åˆclassæ–‡ä»¶è§„èŒƒã€‚</li>\n<li>è¯­ä¹‰éªŒè¯ï¼šæ£€æŸ¥ä¸€ä¸ªè¢«æ ‡è®°ä¸ºfinalçš„ç±»å‹æ˜¯å¦åŒ…å«å­ç±»ï¼›æ£€æŸ¥ä¸€ä¸ªç±»ä¸­çš„finalæ–¹æ³•æ˜¯å¦è¢«å­ç±»è¿›è¡Œé‡å†™ï¼›ç¡®ä¿çˆ¶ç±»å’Œå­ç±»ä¹‹é—´æ²¡æœ‰ä¸å…¼å®¹çš„ä¸€äº›æ–¹æ³•å£°æ˜ï¼ˆæ¯”å¦‚æ–¹æ³•ç­¾åç›¸åŒï¼Œä½†æ–¹æ³•çš„è¿”å›å€¼ä¸åŒï¼‰ã€‚</li>\n<li>æ“ä½œéªŒè¯ï¼šåœ¨æ“ä½œæ•°æ ˆä¸­çš„æ•°æ®å¿…é¡»è¿›è¡Œæ­£ç¡®çš„æ“ä½œï¼Œå¯¹å¸¸é‡æ± ä¸­çš„å„ç§ç¬¦å·å¼•ç”¨æ‰§è¡ŒéªŒè¯ï¼ˆé€šå¸¸åœ¨è§£æé˜¶æ®µæ‰§è¡Œï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥é€šè¿‡ç¬¦å·å¼•ç”¨ä¸­æè¿°çš„å…¨é™å®šåå®šä½åˆ°æŒ‡å®šç±»å‹ä¸Šï¼Œä»¥åŠç±»æˆå‘˜ä¿¡æ¯çš„è®¿é—®ä¿®é¥°ç¬¦æ˜¯å¦å…è®¸è®¿é—®ç­‰ï¼‰ã€‚</li>\n</ul>\n<h3 id=\"3-å‡†å¤‡\"><a href=\"#3-å‡†å¤‡\" class=\"headerlink\" title=\"3. å‡†å¤‡\"></a>3. å‡†å¤‡</h3><p>ä¸ºç±»ä¸­çš„æ‰€æœ‰é™æ€å˜é‡åˆ†é…å†…å­˜ç©ºé—´ï¼Œå¹¶ä¸ºå…¶è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼›è¢«finalä¿®é¥°çš„staticå˜é‡ï¼ˆå¸¸é‡ï¼‰ï¼Œä¼šç›´æ¥èµ‹å€¼ã€‚</p>\n<h3 id=\"4-è§£æ\"><a href=\"#4-è§£æ\" class=\"headerlink\" title=\"4. è§£æ\"></a>4. è§£æ</h3><p>å°†å¸¸é‡æ± ä¸­çš„ç¬¦å·å¼•ç”¨è½¬ä¸ºç›´æ¥å¼•ç”¨ï¼ˆå¾—åˆ°ç±»æˆ–è€…å­—æ®µã€æ–¹æ³•åœ¨å†…å­˜ä¸­çš„æŒ‡é’ˆæˆ–è€…åç§»é‡ï¼Œä»¥ä¾¿ç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼‰ï¼Œè¿™ä¸ªå¯ä»¥åœ¨åˆå§‹åŒ–ä¹‹åå†æ‰§è¡Œã€‚</p>\n<p>è§£æéœ€è¦é™æ€ç»‘å®šçš„å†…å®¹ã€‚ï¼ˆæ‰€æœ‰ä¸ä¼šè¢«é‡å†™çš„æ–¹æ³•å’ŒåŸŸéƒ½ä¼šè¢«é™æ€ç»‘å®šï¼‰</p>\n<p>ä»¥ä¸Š 2ã€3ã€4 ä¸‰ä¸ªé˜¶æ®µåˆåˆç§°ä¸º<strong>é“¾æ¥é˜¶æ®µ</strong>ï¼Œé“¾æ¥é˜¶æ®µè¦åšçš„æ˜¯å°†åŠ è½½åˆ° JVM ä¸­çš„äºŒè¿›åˆ¶å­—èŠ‚æµçš„ç±»æ•°æ®ä¿¡æ¯åˆå¹¶åˆ° JVM çš„è¿è¡Œæ—¶çŠ¶æ€ä¸­ã€‚</p>\n<h3 id=\"5-åˆå§‹åŒ–ï¼ˆçˆ¶çˆ¶å­å­ï¼‰\"><a href=\"#5-åˆå§‹åŒ–ï¼ˆçˆ¶çˆ¶å­å­ï¼‰\" class=\"headerlink\" title=\"5. åˆå§‹åŒ–ï¼ˆçˆ¶çˆ¶å­å­ï¼‰\"></a>5. åˆå§‹åŒ–ï¼ˆçˆ¶çˆ¶å­å­ï¼‰</h3><p>5.1 èµ‹å€¼é™æ€å˜é‡ã€‚</p>\n<p>5.2 æ‰§è¡Œé™æ€ä»£ç å—ã€‚</p>\n<p>å› ä¸ºå­ç±»å­˜åœ¨å¯¹çˆ¶ç±»çš„ä¾èµ–ï¼Œæ‰€ä»¥<strong>ç±»çš„åŠ è½½é¡ºåºæ˜¯å…ˆåŠ è½½çˆ¶ç±»ååŠ è½½å­ç±»ï¼Œåˆå§‹åŒ–ä¹Ÿä¸€æ ·</strong>ã€‚</p>\n<p>æœ€ç»ˆï¼Œæ–¹æ³•åŒºä¼šå­˜å‚¨å½“å‰ç±»ç±»ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„<strong>é™æ€å˜é‡</strong>ã€<strong>ç±»åˆå§‹åŒ–ä»£ç </strong>ï¼ˆ<strong>å®šä¹‰é™æ€å˜é‡æ—¶çš„èµ‹å€¼è¯­å¥ </strong>å’Œ <strong>é™æ€åˆå§‹åŒ–ä»£ç å—</strong>ï¼‰ã€<strong>å®ä¾‹å˜é‡å®šä¹‰</strong>ã€<strong>å®ä¾‹åˆå§‹åŒ–ä»£ç </strong>ï¼ˆ<strong>å®šä¹‰å®ä¾‹å˜é‡æ—¶çš„èµ‹å€¼è¯­å¥å®ä¾‹ä»£ç å—</strong>å’Œ<strong>æ„é€ æ–¹æ³•</strong>ï¼‰å’Œ<strong>å®ä¾‹æ–¹æ³•</strong>ï¼Œè¿˜æœ‰<strong>çˆ¶ç±»çš„ç±»ä¿¡æ¯å¼•ç”¨</strong>ã€‚</p>\n<h2 id=\"å¯¹è±¡åˆ›å»ºè¿‡ç¨‹\"><a href=\"#å¯¹è±¡åˆ›å»ºè¿‡ç¨‹\" class=\"headerlink\" title=\"å¯¹è±¡åˆ›å»ºè¿‡ç¨‹\"></a>å¯¹è±¡åˆ›å»ºè¿‡ç¨‹</h2><h3 id=\"1-åœ¨å †åŒºåˆ†é…å¯¹è±¡éœ€è¦çš„å†…å­˜\"><a href=\"#1-åœ¨å †åŒºåˆ†é…å¯¹è±¡éœ€è¦çš„å†…å­˜\" class=\"headerlink\" title=\"1. åœ¨å †åŒºåˆ†é…å¯¹è±¡éœ€è¦çš„å†…å­˜\"></a>1. åœ¨å †åŒºåˆ†é…å¯¹è±¡éœ€è¦çš„å†…å­˜</h3><p>åŒ…æ‹¬æœ¬ç±»ä¸çˆ¶ç±»æ‰€æœ‰å®ä¾‹å˜é‡ï¼Œä¸åŒ…æ‹¬é™æ€å˜é‡ã€‚</p>\n<h3 id=\"2-ä¸ºå®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼\"><a href=\"#2-ä¸ºå®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼\" class=\"headerlink\" title=\"2. ä¸ºå®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼\"></a>2. ä¸ºå®ä¾‹å˜é‡èµ‹é»˜è®¤å€¼</h3><p>å°†æ–¹æ³•åŒºå†…å¯¹å®ä¾‹å˜é‡çš„å®šä¹‰æ‹·è´ä¸€ä»½åˆ°å †åŒºï¼Œç„¶åèµ‹é»˜è®¤å€¼ã€‚</p>\n<h3 id=\"3-æ‰§è¡Œå®ä¾‹åˆå§‹åŒ–ä»£ç \"><a href=\"#3-æ‰§è¡Œå®ä¾‹åˆå§‹åŒ–ä»£ç \" class=\"headerlink\" title=\"3. æ‰§è¡Œå®ä¾‹åˆå§‹åŒ–ä»£ç \"></a>3. æ‰§è¡Œå®ä¾‹åˆå§‹åŒ–ä»£ç </h3><p>åˆå§‹åŒ–é¡ºåºæ˜¯å…ˆåˆå§‹åŒ–çˆ¶ç±»å†åˆå§‹åŒ–å­ç±»ï¼Œåˆå§‹åŒ–æ—¶å…ˆæ‰§è¡Œ<strong>å®ä¾‹ä»£ç å—</strong>ç„¶åæ˜¯<strong>æ„é€ æ–¹æ³•</strong>ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬å¯¹å®ä¾‹å˜é‡ç›´æ¥èµ‹å€¼æˆ–è€…ä½¿ç”¨å®ä¾‹ä»£ç å—èµ‹å€¼ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šå°†å…¶ä¸­çš„ä»£ç æ”¾åˆ°ç±»çš„æ„é€ å‡½æ•°ä¸­å»ï¼Œå¹¶ä¸”è¿™äº›ä»£ç ä¼šè¢«æ”¾åœ¨å¯¹è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨è¯­å¥<strong>ä¹‹å</strong>(Javaè¦æ±‚æ„é€ å‡½æ•°çš„ç¬¬ä¸€æ¡è¯­å¥å¿…é¡»æ˜¯è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨è¯­å¥)ï¼Œæ„é€ å‡½æ•°æœ¬èº«çš„ä»£ç <strong>ä¹‹å‰</strong>ã€‚</p>\n<p> å¦‚æœæœ‰ç±»ä¼¼äºChild c = new Child()å½¢å¼çš„cå¼•ç”¨çš„è¯ï¼Œåœ¨æ ˆåŒºå®šä¹‰Childç±»å‹å¼•ç”¨å˜é‡cï¼Œç„¶åå°†å †åŒºå¯¹è±¡çš„åœ°å€èµ‹å€¼ç»™å®ƒã€‚</p>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<strong>æ¯ä¸ªå­ç±»å¯¹è±¡æŒæœ‰çˆ¶ç±»å¯¹è±¡çš„å¼•ç”¨</strong>ï¼Œå¯åœ¨å†…éƒ¨é€šè¿‡ super å…³é”®å­—æ¥è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œä½†åœ¨å¤–éƒ¨ä¸å¯è®¿é—®ã€‚å¹¶ä¸”å­ç±»å¯¹è±¡åˆ›å»ºæ—¶åªæ˜¯<strong>è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</strong>ï¼Œå¹¶é<strong>åˆ›å»ºçˆ¶ç±»å¯¹è±¡</strong>ã€‚</p>\n<p>Java è¦æ±‚åœ¨å®ä¾‹åŒ–ç±»ä¹‹å‰ï¼Œå¿…é¡»å…ˆå®ä¾‹åŒ–å…¶è¶…ç±»ï¼Œä»¥ä¿è¯æ‰€åˆ›å»ºå®ä¾‹çš„å®Œæ•´æ€§ã€‚å¦‚æœæˆ‘ä»¬æ—¢æ²¡æœ‰è°ƒç”¨å…¶ä»–çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿæ²¡æœ‰æ˜¾å¼è°ƒç”¨è¶…ç±»çš„æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå¯¹è¶…ç±»æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚</p>\n<h2 id=\"è™šæ–¹æ³•è¡¨\"><a href=\"#è™šæ–¹æ³•è¡¨\" class=\"headerlink\" title=\"è™šæ–¹æ³•è¡¨\"></a>è™šæ–¹æ³•è¡¨</h2><p>é€šè¿‡å®ä¾‹å¼•ç”¨è°ƒç”¨å®ä¾‹æ–¹æ³•çš„æ—¶å€™ï¼Œå…ˆä»æ–¹æ³•åŒºä¸­å¯¹è±¡çš„å®é™…ç±»å‹ä¿¡æ¯æ‰¾ï¼Œæ‰¾ä¸åˆ°çš„è¯å†å»çˆ¶ç±»ç±»å‹ä¿¡æ¯ä¸­æ‰¾ã€‚</p>\n<p>å¦‚æœç»§æ‰¿çš„å±‚æ¬¡æ¯”è¾ƒæ·±ï¼Œè¦è°ƒç”¨çš„æ–¹æ³•ä½äºæ¯”è¾ƒä¸Šå±‚çš„çˆ¶ç±»ï¼Œåˆ™è°ƒç”¨çš„æ•ˆç‡æ˜¯æ¯”è¾ƒä½çš„ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨éƒ½è¦ç»è¿‡å¾ˆå¤šæ¬¡æŸ¥æ‰¾ã€‚è¿™æ—¶å€™å¤§å¤šç³»ç»Ÿä¼šé‡‡ç”¨ä¸€ç§ç§°ä¸º<strong>è™šæ–¹æ³•è¡¨</strong>çš„æ–¹æ³•æ¥ä¼˜åŒ–è°ƒç”¨çš„æ•ˆç‡ã€‚</p>\n<p>æ‰€è°“è™šæ–¹æ³•è¡¨ï¼Œå°±æ˜¯åœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œä¸ºæ¯ä¸ªç±»åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œè¿™ä¸ªè¡¨åŒ…æ‹¬è¯¥ç±»çš„å¯¹è±¡æ‰€æœ‰åŠ¨æ€ç»‘å®šçš„æ–¹æ³•åŠå…¶åœ°å€ï¼ŒåŒ…æ‹¬çˆ¶ç±»çš„æ–¹æ³•ï¼Œä½†ä¸€ä¸ªæ–¹æ³•åªæœ‰ä¸€æ¡è®°å½•ï¼Œå­ç±»é‡å†™äº†çˆ¶ç±»æ–¹æ³•ååªä¼šä¿ç•™å­ç±»çš„ã€‚å½“é€šè¿‡å¯¹è±¡åŠ¨æ€ç»‘å®šæ–¹æ³•çš„æ—¶å€™ï¼Œåªéœ€è¦æŸ¥æ‰¾è¿™ä¸ªè¡¨å°±å¯ä»¥äº†ï¼Œè€Œä¸éœ€è¦æŒ¨ä¸ªæŸ¥æ‰¾æ¯ä¸ªçˆ¶ç±»ã€‚</p>\n<h2 id=\"Demo\"><a href=\"#Demo\" class=\"headerlink\" title=\"Demo\"></a>Demo</h2><h3 id=\"å®ä¾‹åˆå§‹åŒ–ä¸ä¸€å®šè¦åœ¨ç±»åˆå§‹åŒ–ç»“æŸä¹‹åæ‰å¼€å§‹åˆå§‹åŒ–\"><a href=\"#å®ä¾‹åˆå§‹åŒ–ä¸ä¸€å®šè¦åœ¨ç±»åˆå§‹åŒ–ç»“æŸä¹‹åæ‰å¼€å§‹åˆå§‹åŒ–\" class=\"headerlink\" title=\"å®ä¾‹åˆå§‹åŒ–ä¸ä¸€å®šè¦åœ¨ç±»åˆå§‹åŒ–ç»“æŸä¹‹åæ‰å¼€å§‹åˆå§‹åŒ–\"></a>å®ä¾‹åˆå§‹åŒ–ä¸ä¸€å®šè¦åœ¨ç±»åˆå§‹åŒ–ç»“æŸä¹‹åæ‰å¼€å§‹åˆå§‹åŒ–</h3><ul>\n<li>ç±»åˆå§‹åŒ–<code>&lt;clinit&gt;()</code></li>\n<li>å®ä¾‹åˆå§‹åŒ–<code>&lt;init&gt;()</code></li>\n</ul>\n<p>åœ¨Javaä¸­ï¼Œ åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¸¸å¸¸éœ€è¦ç»å†å¦‚ä¸‹å‡ ä¸ªè¿‡ç¨‹ï¼š</p>\n<ol>\n<li>çˆ¶ç±»çš„ç±»æ„é€ å™¨<code>&lt;clinit&gt;()</code></li>\n<li>å­ç±»çš„ç±»æ„é€ å™¨<code>&lt;clinit&gt;()</code></li>\n<li>çˆ¶ç±»çš„æˆå‘˜å˜é‡å’Œå®ä¾‹ä»£ç å—</li>\n<li>çˆ¶ç±»çš„æ„é€ å‡½æ•°</li>\n<li>å­ç±»çš„æˆå‘˜å˜é‡å’Œå®ä¾‹ä»£ç å—</li>\n<li>å­ç±»çš„æ„é€ å‡½æ•°ã€‚</li>\n</ol>\n<p>ä½ å¯ä»¥ä½¿ç”¨ <a href=\"https://www.tutorialspoint.com/compile_java_online.php\" target=\"_blank\" rel=\"noopener\">https://www.tutorialspoint.com/compile_java_online.php</a> è¿›è¡Œåœ¨çº¿éªŒè¯ã€‚</p>\n<h3 id=\"ä¸€é“æµ‹éªŒé¢˜\"><a href=\"#ä¸€é“æµ‹éªŒé¢˜\" class=\"headerlink\" title=\"ä¸€é“æµ‹éªŒé¢˜\"></a>ä¸€é“æµ‹éªŒé¢˜</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">StaticTest</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        staticFunction();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> StaticTest st = <span class=\"keyword\">new</span> StaticTest();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">static</span> &#123;   <span class=\"comment\">//é™æ€ä»£ç å—</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"1\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;       <span class=\"comment\">// å®ä¾‹ä»£ç å—</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"2\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    StaticTest() &#123;    <span class=\"comment\">// å®ä¾‹æ„é€ å™¨</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"3\"</span>);</span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"a=\"</span> + a + <span class=\"string\">\",b=\"</span> + b);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">staticFunction</span><span class=\"params\">()</span> </span>&#123;   <span class=\"comment\">// é™æ€æ–¹æ³•</span></span><br><span class=\"line\">        System.out.println(<span class=\"string\">\"4\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> a = <span class=\"number\">110</span>;    <span class=\"comment\">// å®ä¾‹å˜é‡</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> b = <span class=\"number\">112</span>;     <span class=\"comment\">// é™æ€å˜é‡</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* Output: </span></span><br><span class=\"line\"><span class=\"comment\">        2</span></span><br><span class=\"line\"><span class=\"comment\">        3</span></span><br><span class=\"line\"><span class=\"comment\">        a=110,b=0</span></span><br><span class=\"line\"><span class=\"comment\">        1</span></span><br><span class=\"line\"><span class=\"comment\">        4</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"å¦ä¸€é“æµ‹éªŒé¢˜\"><a href=\"#å¦ä¸€é“æµ‹éªŒé¢˜\" class=\"headerlink\" title=\"å¦ä¸€é“æµ‹éªŒé¢˜\"></a>å¦ä¸€é“æµ‹éªŒé¢˜</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Foo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    Foo() &#123;</span><br><span class=\"line\">        System.out.println(i);             </span><br><span class=\"line\">        <span class=\"keyword\">int</span> x = getValue();</span><br><span class=\"line\">        System.out.println(x);            </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        i = <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> i;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//å­ç±»</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Bar</span> <span class=\"keyword\">extends</span> <span class=\"title\">Foo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> j = <span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    Bar() &#123;</span><br><span class=\"line\">        j = <span class=\"number\">2</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">        j = <span class=\"number\">3</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">int</span> <span class=\"title\">getValue</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> j;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ConstructorExample</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String... args)</span> </span>&#123;</span><br><span class=\"line\">        Bar bar = <span class=\"keyword\">new</span> Bar();</span><br><span class=\"line\">        System.out.println(bar.getValue());        </span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* Output:</span></span><br><span class=\"line\"><span class=\"comment\">2</span></span><br><span class=\"line\"><span class=\"comment\">0</span></span><br><span class=\"line\"><span class=\"comment\">2</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"å‚è€ƒ-1\"><a href=\"#å‚è€ƒ-1\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h2><ul>\n<li><a href=\"https://www.cnblogs.com/JackPn/p/9386182.html\" target=\"_blank\" rel=\"noopener\">åšå®¢å›­ - java new ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†ä»€ä¹ˆ</a></li>\n<li><a href=\"https://blog.csdn.net/justloveyou_/article/details/72466105\" target=\"_blank\" rel=\"noopener\">CSDN - JVMç±»ç”Ÿå‘½å‘¨æœŸæ¦‚è¿°ï¼šåŠ è½½æ—¶æœºä¸åŠ è½½è¿‡ç¨‹</a></li>\n<li><a href=\"https://www.ibm.com/developerworks/cn/java/j-lo-clobj-init/index.html\" target=\"_blank\" rel=\"noopener\">IBM - è§£æ Java ç±»å’Œå¯¹è±¡çš„åˆå§‹åŒ–è¿‡ç¨‹</a></li>\n</ul>\n","categories":[],"tags":["Android","é¢è¯•"]},{"title":"è¥¿è™¹å¸‚é¦–å¯Œ","url":"https://lilei.pro/2018/07/28/hello-mr-billionaire/","content":"<blockquote>\n<p>ä¸ç»™æˆ‘ç”Ÿä¸€ç™¾ä¸ªå­©å­ä½ éƒ½å¯¹ä¸èµ·æˆ‘ï¼</p>\n</blockquote>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180728_hello_mr_billinaire/hello_mr_billionaire.jpg\" alt=\"JVM\" title=\"\">\n                </div>\n                <div class=\"image-caption\">JVM</div>\n            </figure>\n<p>å¼€å¿ƒéº»èŠ±å¾ˆæ“…é•¿æŠ“ä½å¹³å‡¡äººçš„å¿ƒé‡Œçš„çˆ½ç‚¹ï¼Œå’Œç½‘ç»œå°è¯´çš„å¥—è·¯ä¸€æ ·ï¼Œèµ„è´¨å¹³å¹³å±¡é­ç™½çœ¼çš„ç”·ä¸»è§’ï¼Œæœºç¼˜å·§åˆä¹‹ä¸‹å¾—åˆ°ä¸€ç¬”å·¨å¤§çš„è´¢å¯Œ/ç»ä¸–çš„æ­¦åŠŸï¼Œä¸€è·¯å¹²ç¿»ä»‡å®¶ï¼Œå°†æ›¾ç»ä¸æŠŠä»–æ”¾åœ¨çœ¼é‡Œçš„å¯¹å¤´ä»¬ä¸€ä¸€è¸©åœ¨è„šä¸‹ã€‚æœ€åä¸¾ç›®å››é¡¾é—ä¸–ç‹¬ç«‹ï¼Œæ„Ÿåˆ°æ— æ•Œæ˜¯å¤šä¹ˆå¯‚å¯ï¼Œç”˜æ„¿è‡ªåºŸæ­¦åŠŸæ•£å°½å®¶è´¢ï¼Œåšå›ä¸€ä¸ªæ™®é€šäººã€‚</p>\n<p>ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹æ˜¯è¿™æ ·ï¼Œã€Šè¥¿è™¹å¸‚é¦–å¯Œã€‹ä¹Ÿå¦‚æ­¤ã€‚</p>\n<p>åäº¿äººæ°‘å¸ï¼Œé¦–å¯Œå£ä¸­çš„â€œå°ç›®æ ‡â€x10ï¼Œæ™®é€šäººä¸€è¾ˆå­åˆ«è¯´èµšè¿™ä¹ˆå¤šé’±ï¼Œèƒ½è§åˆ°ä¸€æ¬¡ææ€•éƒ½æ˜¯ä¸‰ç”Ÿæœ‰å¹¸ã€‚æ‰€ä»¥å¼€å¿ƒéº»èŠ±æ‹äº†è¿™æ ·ä¸€éƒ¨ç”µå½±ï¼Œè®©æˆ‘ä»¬è¿™äº›å¹³å‡¡äººçœ‹åˆ°ï¼ŒåŸæ¥åäº¿äººæ°‘å¸å¯ä»¥å †æ»¡ä¸¤ç™¾å¹³çš„å±‹å­ï¼ŒåŸæ¥æœ‰é’±äººå¯ä»¥åƒé¥­ä¸åƒä¸»é£Ÿåªåƒé¾™è™¾æ¾èŒ¸ï¼ŒåŸæ¥æœ‰é’±äººå¯ä»¥è¯·åˆ°ç‹åŠ›å®ä¸ºä»–å¼€ä¸€åœºç§äººæ¼”å”±ä¼šï¼ŒåŸæ¥æœ‰é’±äººåšçš„å†³ç­–å°±ç®—ç‹—å±ä¸é€šä¹Ÿèƒ½è®©ä»–çš„é’±è¶Šæ»šè¶Šå¤šâ€¦â€¦</p>\n<p>ä»¥åè€å­ä¹Ÿæ˜¯è§è¿‡åäº¿äººæ°‘å¸çš„äººäº†ï¼Œåäº¿äººæ°‘å¸ï¼Œç°é‡‘ã€‚</p>\n<p>ä¸è®ºæƒ…æ€€è¿˜æ˜¯åŒ…è¢±ï¼Œè¿™éƒ¨ç”µå½±æ¯”èµ·ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹éƒ½è½äºä¸‹é£ï¼Œé™¤äº†ç‹åŠ›å®çš„å‡ºåœºï¼Œè®©å½±é™¢é‡Œå“èµ·ä¸€ç‰‡æƒŠå¹ä¹‹å£°ã€‚æˆ‘ä¸ªäººå¯¹å¼€å¿ƒéº»èŠ±å‡ éƒ¨ç”µå½±çš„æ’åæ˜¯ï¼š</p>\n<ol>\n<li>ã€Šå¤æ´›ç‰¹çƒ¦æ¼ã€‹</li>\n<li>ã€Šé©´å¾—æ°´ã€‹</li>\n<li>ã€Šè¥¿çº¢æŸ¿é¦–å¯Œã€‹</li>\n<li>ã€Šç¾ç¾çš„é“æ‹³ã€‹</li>\n</ol>\n<p>2018.07.28@ä¸Šå½±å¾æ±‡æ—¥æœˆå…‰åº—</p>\n","categories":[],"tags":["ç”µå½±"]},{"title":"æˆ‘ä¸æ˜¯è¯ç¥","url":"https://lilei.pro/2018/07/27/dying-to-survive/","content":"<blockquote>\n<p>æˆ‘å¸Œæœ›ä»Šåä¼šè¶Šæ¥è¶Šå¥½ï¼Œæˆ‘ç›¸ä¿¡ä¼šçš„ã€‚</p>\n</blockquote>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180727_dying_to_survive/å•å—ç›Š.webp\" alt=\"å•å—ç›Š\" title=\"\">\n                </div>\n                <div class=\"image-caption\">å•å—ç›Š</div>\n            </figure>\n<p>å¦‚æœæ²¡æœ‰äº‹å…ˆä»æœ‹å‹åœˆé‡Œå¾—åˆ°é“ºå«ï¼Œåœ¨çœ‹ç”µå½±å‰åŠæ®µï¼Œç›´åˆ°å¾å³¥æ‰®æ¼”çš„ç¨‹å‹‡æ¥åˆ°å•å—ç›Šå®¶ä¸­åšå®¢æ—¶ï¼Œè‡ªå·±å‡ ä¹è¦ä»¥ä¸ºè¿™æ˜¯ä¸€éƒ¨ç±»ä¼¼â€œXå›§â€çš„å–œå‰§ç‰‡ã€‚ä¸è®ºä»èŠ‚å¥ã€å°è¯å’Œå‰§æƒ…ä¸Šæ¥çœ‹ï¼Œéƒ½å¤ªåƒäº†ã€‚æµ‘ä¸åçš„ä¿å¥å“åº—è€æ¿ï¼Œæˆ´ç€è›¤èŸ†é•œé¬¼å¤´é¬¼è„‘è®©äººæƒ³ä¸èµ·ä»–æ˜¯ç—…äººçš„å•å—ç›Šï¼Œæ»¡å˜´è‹±æ–‡ä¸€æœ¬æ­£ç»çš„è€ç¥çˆ¶ï¼Œè¿˜æœ‰å¤œåº—å¥³ç‹è¿™ä¸ªé¢œå€¼æ‹…å½“ï¼Œä»¥åŠæ— å£é»„æ¯›å°é…·å“¥ã€‚å¤šå¥½çš„è¥¿å¤©å–ç»äº”äººç»„ã€‚</p>\n<p>ä½†å¾å³¥æ¯•ç«Ÿæ˜¯å¾å³¥ï¼Œæ‹è¿‡ã€Šå¿ƒèŠ±è·¯æ”¾ã€‹è¿™ç§å–œå‰§å¤–å£³çš„å…¬è·¯æ–‡è‰ºç‰‡ã€‚ä»–æœ‰é‡å¿ƒï¼Œæ›´æœ‰èƒ½åŠ›ã€‚</p>\n<p>äºæ˜¯åœ¨çœ‹åˆ°è­¦å¯Ÿçªè¢­ç™½è¡€ç—…äººæ—…é¦†ï¼Œæ‹˜ç•™äº†ä¸€å±‹å­äººï¼Œå´æ²¡æœ‰ä¸€ä¸ªä¾›å‡ºç¨‹å‹‡ï¼Œè€äººç™½å‘è‹è‹ï¼Œå‘è­¦å®˜å“­è¯‰ç€è¢«ç–¾ç—…å‰¥å¤ºçš„ä¸€åˆ‡æ—¶ï¼Œæˆ‘ç¬¬ä¸€æ¬¡çœ¼çœ¶æ¹¿æ¶¦äº†ã€‚åœ¨çªå¦‚å…¶æ¥çš„ç–¾ç—…é¢å‰ï¼Œä½ å¼•ä»¥ä¸ºå‚²çš„å­¦è¯†ã€äº‹ä¸šã€é‡‘é’±ã€åœ°ä½éƒ½è„†å¼±ä¸å ªä¸€å‡»ã€‚å»å¹´æœ‰ä¸€ç¯‡åœ¨æœ‹å‹åœˆç–¯ä¼ çš„é•¿æ–‡ï¼Œã€Šæµæ„Ÿä¾µè¢­ä¸‹çš„åŒ—äº¬ä¸­äº§é˜¶çº§ã€‹ï¼Œæ·±æ·±åœ°æ­éœ²äº†è¿™ç§æ— åŠ›çš„ç°çŠ¶ã€‚</p>\n<p>ä¸ºäº†å‡èŒåŠ è–ªï¼Œä¸ºäº†KPIï¼Œä¸ºäº†ä¹°æˆ¿ä¸Šè½¦ï¼Œä¸ºäº†ä¸‹ä¸€ä»£ï¼Œä¸ºäº†ä¸æ¯”åŒé¾„äººè½åï¼Œä¸ºäº†åˆ«äººçš„æœŸå¾…ç›®å…‰ï¼Œä¸ºäº†è¿‡ä¸Šè‡ªå·±æƒ³è¦çš„ç”Ÿæ´»ã€‚ä½ å¤œä»¥ç»§æ—¥ç†¬ç§ƒäº†å‘é™…çº¿ç†¬æ·±äº†è¿‘è§†çœ¼ç†¬å‡ºäº†å°è‚šè…©æ‰€æ¢æ¥çš„ä¸€åˆ‡ï¼Œåœ¨ä¸€åœºç–¾ç—…é¢å‰è½°ç„¶å€’å¡Œï¼Œç“¦ç ¾éåœ°ã€‚</p>\n<p>ä»¥å‰è‡ªå·±æ€»ä¼šæœ‰è¿™ç§æƒ³æ³•ï¼Œç°ä»£åŒ»å­¦è™½ç„¶å»¶é•¿äº†äººç±»çš„å¯¿å‘½ï¼Œä½†åœ¨å®ƒçš„åº‡æŠ¤ä¸‹ï¼Œäººç±»è‡ªèº«æœºä½“çš„æŠµæŠ—åŠ›åè€Œä¸‹é™ï¼Œå˜å¾—å¦‚åŒæ¸©å®¤ä¸­çš„èŠ±æœµèˆ¬æ›´åŠ è„†å¼±æ˜“æŠ˜ã€‚</p>\n<p>æˆ‘ä»¬ä»ç—…åºŠä¸Šèµ¤æ¡æ¡åœ°æ¥ï¼Œä¹Ÿç»ˆå°†åœ¨ç—…åºŠä¸Šèµ¤æ¡æ¡åœ°ç¦»å¼€ï¼Œå¸¦ä¸èµ°ä»»ä½•ä¸€æ ·ä¸œè¥¿ã€‚</p>\n<p>æœ€ç»ˆå¾å³¥è¢«è­¦è½¦æŠ¼è¿èµ°ï¼Œè­¦å®˜å©å’å¼€è½¦çš„åŒä¼´æ”¾æ…¢é€Ÿåº¦ï¼Œçœ‹åˆ°è¡—è¾¹é€è¡Œçš„ç™½è¡€ç—…äººçº·çº·æ‘˜ä¸‹å£ç½©ï¼Œå»ä¸–çš„å•å—ç›Šå’Œé»„æ¯›æµ©å­ä¹Ÿå‡ºç°åœ¨äººç¾¤ä¸­ï¼Œæˆ‘ç¬¬äºŒæ¬¡æµæ³ªã€‚</p>\n<p>å›ä»¥å›½å£«å¾…æˆ‘ï¼Œæˆ‘å¿…ä»¥å›½å£«æŠ¥ä¹‹ã€‚</p>\n<p>ç—…é­”æ— æƒ…ï¼Œäººé—´æœ‰çˆ±ã€‚å…¶å®å€˜è‹¥äººé—´æ— çˆ±ï¼Œç—…é­”ä¹Ÿå°±æ— ä»å¯æ€•ï¼Œä¸è‡ªçˆ±ï¼Œåˆ™èº«ä½“å‘è‚¤ï¼Œçš†å¯æ¯ä¼¤ï¼›ä¸çˆ±äººï¼Œåˆ™æ¼ è§†ç”Ÿå‘½ï¼Œå¤©æ€§å‡‰è–„ã€‚å¯äººæ´»ç€ï¼Œä¸å°±æ˜¯ä»—ç€å¿ƒåº•æ€»æœ‰ä¸€äº›ä¸å¯å‰²èˆçš„çˆ±ä¹ˆï¼Ÿ</p>\n<p>ç”±çˆ±æ•…ç”Ÿå¿§ï¼Œç”±çˆ±æ•…ç”Ÿæ€–ï¼Œè‹¥ç¦»äºçˆ±è€…ï¼Œæ— å¿§äº¦æ— æ€–ã€‚</p>\n","categories":[],"tags":["ç”µå½±"]},{"title":"ç¼çº«æœºä¹é˜Ÿ","url":"https://lilei.pro/2018/07/27/city-of-rock/","content":"<blockquote>\n<p>å¿ƒé‡Œè¿˜æœ‰é‚£å£æ°”å„¿ï¼Œæƒ¦è®°çš„æ˜¯æ¯å¤©ä»€ä¹ˆæ—¶å€™å¼€å§‹ï¼›å¸ä¸‹é‚£å£æ°”å„¿ï¼Œæƒ¦è®°çš„æ˜¯æ¯å¤©ä»€ä¹ˆæ—¶å€™ç»“æŸã€‚ â€‹</p>\n</blockquote>\n<p><a href=\"https://www.xiami.com/song/1796823294\" target=\"_blank\" rel=\"noopener\">éƒ½é€‰C - è™¾ç±³éŸ³ä¹</a></p>\n<p>è™½ç„¶å¨œæ‰å¾ˆç¾ï¼Œä½†æˆ‘è®¤ä¸ºä¹”æ‰æ‰æ˜¯æœ¬ç‰‡çš„æ¼”æŠ€ã€ç¬‘ç‚¹ä¹ƒè‡³é¢œå€¼æ‹…å½“ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180727_city_of_rock/ä¹”æ‰.jpeg\" alt=\"ä¿å¥å“¥\" title=\"\">\n                </div>\n                <div class=\"image-caption\">ä¿å¥å“¥</div>\n            </figure>\n<p>å‰§æƒ…ä¸­æœ‰ä¸€æ®µæ˜¯è€å‰ä»–æ‰‹æ‹¿å‡ºå½“å¹´çš„ç”µå‰ä»–æ“¦æ‹­ï¼Œä¹”æ‰ç››èµè¿™æ˜¯å‰ä»–ç•Œçš„æŸ³å²©ï¼Œæƒ³è¦æ‘¸ä¸€æ‘¸ç»“æœè¢«è€å‰ä»–æ‰‹ä¸€å·´æŒæ‰‡æ‰ã€‚å¤§é¹åœ¨ä¸€æ—å˜²è®½é“â€œæŸ³å²©é‚£æ˜¯è°éƒ½èƒ½æ‘¸çš„ä¹ˆï¼Ÿâ€ã€‚çœ‹åˆ°è¿™é‡Œä¼šå¿ƒä¸€ç¬‘ï¼Œæ›¾ç»æ‹ã€Šå±Œä¸ç”·å£«ã€‹æ—¶ï¼Œå¤§é¹æ²¡å°‘ä¸æŸ³å²©æ¼”å¯¹æ‰‹æˆã€‚</p>\n<p>å¤§é¹å¼ºè¡Œä¸ºè‡ªå·±å’Œå¨œæ‰å®‰æ’çš„æ„Ÿæƒ…çº¿ï¼Œä¸ä»…å¯¹å‰§æƒ…æ¨è¿›æ¯«æ— å¸®åŠ©ï¼Œè€Œä¸”çœŸçš„å¾ˆå°¬ã€‚</p>\n<p>å²³äº‘é¹æ‰®æ¼”çš„é’¢ç´å®¶ï¼Œè™½ç„¶è¯´ä¸å‡ºå–œæ„Ÿåœ¨å“ªï¼Œä½†è®©äººä¸€çœ‹åˆ°ä»–é‚£å¼ åœ†è„¸ï¼Œå°±å¿ä¸ä½æƒ³ç¬‘ï¼Œä¹Ÿè®¸è¿™å°±æ˜¯ç¥–å¸ˆçˆ·èµé¥­åƒå§ã€‚é‚£ä¸€å¥â€œå¥³äººå•Šï¼Œä½ çš„åå­—æ˜¯è´ªå©ªâ€ç¡¬ç”Ÿç”Ÿåœ°å°†æ•´éƒ¨ç”µå½±çš„æ–‡å­¦æ°´å¹³æ‹”é«˜äº†ä¸€å˜ç±³ã€‚</p>\n<p>å°½ç®¡å®ƒåœ¨è±†ç“£ä¸Šçš„è¯„åˆ†ä¸åˆ°7ï¼Œå¤§æŠµå±äºâ€œæ‹çš„ä¸å·®ï¼Œä½†ä¹Ÿç®—ä¸ä¸Šå¤šå¥½â€çš„æ°´å¹³ã€‚ä½†æˆ‘ååå–œæ¬¢ï¼Œè‡ªå·±å¤§æ¦‚æœ¬å°±æ˜¯ä¸ªä¿—äººå§ã€‚</p>\n<p>çœ‹è¿™éƒ¨ç”µå½±çš„æ—¶å€™ï¼Œæ­£ååœ¨ K8402 æ­å· - ä¸Šæµ·å— çš„åŠ 1è½¦å¢é‡Œï¼Œæ±‚èŒä¸­ç¬¬ä¸‰æ¬¡å¾€è¿”äºæ­å·ä¸Šæµ·ï¼Œè¿™å¤©é¢è¯•äº†ç¬¬åå®¶å…¬å¸ã€‚</p>\n<p>çœ‹äº†ï¼Œç¬‘äº†ï¼Œå“­äº†ï¼Œå¤Ÿäº†ã€‚æ£ç€é‚£å£æ°”å„¿ï¼Œç”Ÿæ´»ä»è¦ç»§ç»­ã€‚</p>\n<p>P.S. é›†å®‰å¸‚ï¼Œéš¶å±å‰æ—çœé€šåŒ–å¸‚ï¼Œä½äºå‰æ—ä¸œå—éƒ¨ï¼Œä¸æœé²œä¸€æ±Ÿä¹‹éš”ã€‚å·²åˆ—å…¥æ—…æ¸¸åå•ã€‚</p>\n","categories":[],"tags":["ç”µå½±"]},{"title":"é¢è¯•çŸ¥è¯†æ•´ç† 2018.07.26","url":"https://lilei.pro/2018/07/26/interview-180726/","content":"<h1 id=\"è°ˆè°ˆ-SparseArray\"><a href=\"#è°ˆè°ˆ-SparseArray\" class=\"headerlink\" title=\"è°ˆè°ˆ SparseArray\"></a>è°ˆè°ˆ SparseArray</h1><h2 id=\"ç”¨æ³•\"><a href=\"#ç”¨æ³•\" class=\"headerlink\" title=\"ç”¨æ³•\"></a>ç”¨æ³•</h2><p>ä½¿ç”¨ Key-Value ä¿å­˜å¯¹è±¡çš„é›†åˆï¼Œç±»ä¼¼ HashMapï¼Œä½†åªå…è®¸ä½¿ç”¨ int å‹çš„ Key</p>\n<h2 id=\"ç‰¹ç‚¹\"><a href=\"#ç‰¹ç‚¹\" class=\"headerlink\" title=\"ç‰¹ç‚¹\"></a>ç‰¹ç‚¹</h2><ul>\n<li>ï¼ˆä¼˜ç‚¹ï¼‰å†…å­˜æ•ˆç‡é«˜ï¼Œé¿å…è‡ªåŠ¨è£…ç®±ï¼Œé¿å…äº†ä½¿ç”¨ Entry æ¥æ„å»ºæ•°æ®ç»“æ„ï¼Œint 4 bytesï¼ŒInteger 16 bytes</li>\n<li>ï¼ˆç¼ºç‚¹ï¼‰ä½¿ç”¨äºŒåˆ†æ³•æŸ¥æ‰¾å¯¹è±¡ï¼Œåœ¨æ•°æ®ä½“é‡å¤§ï¼ˆmore than hundreds of itemsï¼‰çš„åœºæ™¯ä¸‹æŸ¥æ‰¾/æ’å…¥/åˆ é™¤æ•ˆç‡ä¸å¦‚ HashMap</li>\n<li>åˆ é™¤è¿‡ç¨‹ä¼˜åŒ–ï¼šå…ˆæ ‡è®° itemï¼Œå¾… GC æ—¶çœŸæ­£åˆ é™¤</li>\n</ul>\n<h2 id=\"æ“ä½œ\"><a href=\"#æ“ä½œ\" class=\"headerlink\" title=\"æ“ä½œ\"></a>æ“ä½œ</h2><ul>\n<li>éšæœºæ’å…¥ï¼šput(int, x)ï¼Œä¼šæ›¿æ¢æ‰å·²æœ‰çš„å¯¹è±¡</li>\n<li>é¡ºåºæ’å…¥ï¼šappend(int, x)ï¼Œå½“ Key æ¯”ç›®å‰æ‰€æœ‰çš„éƒ½è¦å¤§æ—¶æ‰§è¡Œæ•ˆç‡æ›´é«˜ï¼Œå¦åˆ™åŒ put</li>\n<li>éšæœºåˆ é™¤ï¼šdelete(int)ï¼Œåˆ é™¤ Key å¯¹åº”çš„å¯¹è±¡</li>\n<li>é¡ºåºåˆ é™¤ï¼šremoveAt(int)ï¼Œåˆ é™¤ç¬¬ N é¡¹</li>\n<li>èŒƒå›´åˆ é™¤ï¼šremoveAtRange(int, int)</li>\n<li>éšæœºè®¿é—®ï¼šget(int)ï¼Œæ ¹æ® Key è·å– Valueï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿”å› null</li>\n<li>é¡ºåºè®¿é—®ï¼švalueAt(int)</li>\n<li>éå†ï¼škeyAt(int)ï¼Œè·å–ç¬¬ n ä½çš„ keyï¼›valueAt(int)ï¼Œè·å–ç¬¬ n ä½ key å¯¹åº”çš„ valueï¼›indexOfKey(int)ï¼Œè·å– key çš„ indexï¼›indexOfValue(int)ï¼Œè·å– value çš„ index</li>\n</ul>\n<h2 id=\"æºç é˜…è¯»\"><a href=\"#æºç é˜…è¯»\" class=\"headerlink\" title=\"æºç é˜…è¯»\"></a>æºç é˜…è¯»</h2><p>æˆå‘˜å˜é‡éƒ¨åˆ†</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> Object DELETED = <span class=\"keyword\">new</span> Object(); <span class=\"comment\">// åˆ é™¤å¯¹è±¡æ—¶ï¼Œå¹¶éçœŸæ­£åˆ é™¤ï¼Œè€Œæ˜¯å°† Value æ›¿æ¢æˆ DELETE å¯¹è±¡</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> mGarbage = <span class=\"keyword\">false</span>; <span class=\"comment\">// æ ‡ç¤ºæ˜¯å¦éœ€è¦è¿›è¡Œ gc</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span>[] mKeys;</span><br><span class=\"line\"><span class=\"keyword\">private</span> Object[] mValues;</span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mSize;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">SparseArray</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(<span class=\"number\">10</span>); <span class=\"comment\">// é»˜è®¤é•¿åº¦æ˜¯10</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åœ¨è°ƒç”¨ append, put, size ç­‰æ–¹æ³•æ—¶ä¼šè§¦å‘ GCï¼Œæ˜¯ä¸€ä¸ªé€é¡¹å¤åˆ¶çš„è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">gc</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> n = mSize;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> o = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span>[] keys = mKeys;</span><br><span class=\"line\">    Object[] values = mValues;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; n; i++) &#123;</span><br><span class=\"line\">        Object val = values[i];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (val != DELETED) &#123; <span class=\"comment\">// åˆ¤æ–­æ˜¯å¦å·²ç»æ ‡è®°</span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (i != o) &#123;</span><br><span class=\"line\">                keys[o] = keys[i];</span><br><span class=\"line\">                values[o] = val;</span><br><span class=\"line\">                values[i] = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            o++;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    mGarbage = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    mSize = o;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>put è¿‡ç¨‹ï¼Œæ ¸å¿ƒæ˜¯å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰åŒä¸€ä¸ª key å­˜åœ¨ï¼Œæœ‰åˆ™æ›¿æ¢ï¼Œæ²¡æœ‰çš„è¯ï¼Œå†åˆ¤æ–­æ˜¯å¦ç›®æ ‡ä½ç½®åˆšå¥½è¢« DELETED æ ‡è®°ï¼Œæœ€åæ‰è¿›è¡ŒåŠ é¡¹æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">put</span><span class=\"params\">(<span class=\"keyword\">int</span> key, E value)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = ContainerHelpers.binarySearch(mKeys, mSize, key); <span class=\"comment\">// äºŒåˆ†æŸ¥æ‰¾ key çš„ä½ç½®</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt;= <span class=\"number\">0</span>) &#123; <span class=\"comment\">// å¦‚æœå·²ç»æœ‰åŒä¸€ä¸ª key</span></span><br><span class=\"line\">        mValues[i] = value;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        i = ~i; <span class=\"comment\">// æ±‚å¼‚æˆ–</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (i &lt; mSize &amp;&amp; mValues[i] == DELETED) &#123; <span class=\"comment\">// ç›®æ ‡ä½ç½®é¡¹ç›®å·²ç»æ ‡è®° DELETEï¼Œå¯ä»¥ç›´æ¥æ›¿æ¢</span></span><br><span class=\"line\">            mKeys[i] = key;</span><br><span class=\"line\">            mValues[i] = value;</span><br><span class=\"line\">            <span class=\"keyword\">return</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mGarbage &amp;&amp; mSize &gt;= mKeys.length) &#123; <span class=\"comment\">// éœ€è¦å¯»æ‰¾æ–°çš„ä½ç½®ï¼Œæ­¤æ—¶å…ˆ gc</span></span><br><span class=\"line\">            gc();</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">// Search again because indices may have changed.</span></span><br><span class=\"line\">            i = ~ContainerHelpers.binarySearch(mKeys, mSize, key);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        mKeys = GrowingArrayUtils.insert(mKeys, mSize, i, key); <span class=\"comment\">// è¿ç”¨ System.arraycopy è¿›è¡Œæ·»åŠ ï¼ˆæœ‰å¿…è¦åˆ™æ‰©å®¹ï¼‰</span></span><br><span class=\"line\">        mValues = GrowingArrayUtils.insert(mValues, mSize, i, value);</span><br><span class=\"line\">        mSize++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>delete è¿‡ç¨‹ï¼Œå…ˆäºŒåˆ†æŸ¥æ‰¾åˆ°ç›®æ ‡ä½ç½®ï¼Œæ ‡è®° DELETEDï¼Œä¸ç›´æ¥åˆ é™¤</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">delete</span><span class=\"params\">(<span class=\"keyword\">int</span> key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> i = ContainerHelpers.binarySearch(mKeys, mSize, key);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i &gt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mValues[i] != DELETED) &#123;</span><br><span class=\"line\">            mValues[i] = DELETED;</span><br><span class=\"line\">            mGarbage = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"Handler-å†…éƒ¨åŸç†ï¼ŒHandlerThread-ä¸æ™®é€š-Thread-åŒºåˆ«\"><a href=\"#Handler-å†…éƒ¨åŸç†ï¼ŒHandlerThread-ä¸æ™®é€š-Thread-åŒºåˆ«\" class=\"headerlink\" title=\"Handler å†…éƒ¨åŸç†ï¼ŒHandlerThread ä¸æ™®é€š Thread åŒºåˆ«\"></a>Handler å†…éƒ¨åŸç†ï¼ŒHandlerThread ä¸æ™®é€š Thread åŒºåˆ«</h1><h2 id=\"Handler-çš„ä¸¤ä¸ªç”¨é€”\"><a href=\"#Handler-çš„ä¸¤ä¸ªç”¨é€”\" class=\"headerlink\" title=\"Handler çš„ä¸¤ä¸ªç”¨é€”\"></a>Handler çš„ä¸¤ä¸ªç”¨é€”</h2><ol>\n<li>ç®¡ç†æ¶ˆæ¯/ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¯ä»¥æ§åˆ¶ç«‹å³æ‰§è¡Œæˆ–è€…å»¶è¿Ÿæ‰§è¡Œ</li>\n<li>è°ƒåº¦ä»»åŠ¡åœ¨ä¸åŒçº¿ç¨‹è¿è¡Œf</li>\n</ol>\n<h2 id=\"ä¸»è¦æ¦‚å¿µ\"><a href=\"#ä¸»è¦æ¦‚å¿µ\" class=\"headerlink\" title=\"ä¸»è¦æ¦‚å¿µ\"></a>ä¸»è¦æ¦‚å¿µ</h2><ul>\n<li>Handlerï¼šæ¶ˆæ¯åˆ†å‘å™¨ï¼Œä¸€ä¸ª Handler é‡Œé¢ä¼šå…³è”ä¸€ä¸ª MessageQueueï¼Œè¿™ä¸ª MessageQueue æ¥è‡ªå½“å‰çº¿ç¨‹çš„ Looper</li>\n<li>Looperï¼šæ¶ˆæ¯å¾ªç¯å™¨ï¼Œä» MQ é‡Œé¢ä¸æ–­å–å‡ºæ¶ˆæ¯è¿è¡Œã€‚é UI çº¿ç¨‹æ˜¯æ²¡æœ‰é»˜è®¤åˆ›å»º Looper çš„ï¼Œéœ€è¦äººå·¥è°ƒç”¨ prepare å’Œ loop æ¥å¯åŠ¨ Looperã€‚è¢«å£°æ˜ä¸º ThreadLocalï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹ç‹¬ç«‹æ‹¥æœ‰</li>\n<li>Messageï¼šæ¶ˆæ¯å•å…ƒï¼Œå†…éƒ¨ç”¨æ¶ˆæ¯æ± ç®¡ç†ï¼Œé»˜è®¤ capacity = 50</li>\n<li>MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå•é“¾è¡¨ï¼Œæ¯ä¸ªæ¶ˆæ¯å…¥é˜Ÿæ—¶ä¼šå¸¦ä¸Šä¸€ä¸ªè¿è¡Œæ—¶é—´ whenï¼Œæ ¹æ®è¿™ä¸ª when å°†å…¶æ”¾å…¥é˜Ÿåˆ—ä¸­ç›¸åº”çš„ä½ç½®ï¼ˆæ—©æ‰§è¡Œçš„æ”¾åœ¨é˜Ÿé¦–ï¼‰ï¼Œæ•´ä¸ªé˜Ÿåˆ—æ˜¯æŒ‰ç…§è¿è¡Œæ—¶é—´æ’åºçš„</li>\n</ul>\n<h2 id=\"åŸç†æµç¨‹æ¦‚è¿°\"><a href=\"#åŸç†æµç¨‹æ¦‚è¿°\" class=\"headerlink\" title=\"åŸç†æµç¨‹æ¦‚è¿°\"></a>åŸç†æµç¨‹æ¦‚è¿°</h2><p>åˆ›å»º Handler æ—¶ä¼šå…³è”å½“å‰çº¿ç¨‹ Looper ä¸­çš„ MQï¼Œå½“ç”¨ Handler å¯¹è±¡å‘é€æ¶ˆæ¯æ—¶ï¼Œæ¶ˆæ¯ä¼šè¿›å…¥ MQï¼Œç» Looper è½®è¯¢å–å‡ºåè¿›è¡Œå¤„ç†ï¼Œå¤„ç†æ—¶ä¼šè°ƒç”¨æ‰€å®ç°çš„ handleMessage æ–¹æ³•ã€‚</p>\n<h2 id=\"UI-çº¿ç¨‹åˆ›å»º-Looper\"><a href=\"#UI-çº¿ç¨‹åˆ›å»º-Looper\" class=\"headerlink\" title=\"UI çº¿ç¨‹åˆ›å»º Looper\"></a>UI çº¿ç¨‹åˆ›å»º Looper</h2><ol>\n<li>ActivityThread åœ¨ main æ–¹æ³•é‡Œé€šè¿‡ Looper.prepareMainLooper() åˆ›å»ºä¸» Looperï¼Œå¹¶å°†å…¶å­˜å…¥ ThreadLocal å˜é‡ä¸­ã€‚åŒæ—¶å°†å®ƒå¦å­˜ä¸€ä»½ä½œä¸ºä¸»çº¿ç¨‹ Looperï¼Œä¾›å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚</li>\n<li>åœ¨ main æ–¹æ³•æœ€åé€šè¿‡ looper.loop() å¯åŠ¨è½®è¯¢</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">        Looper.prepareMainLooper();</span><br><span class=\"line\">        ActivityThread thread = <span class=\"keyword\">new</span> ActivityThread();</span><br><span class=\"line\">        thread.attach(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        Looper.loop();</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"Handler-å‘é€æ¶ˆæ¯çš„æµç¨‹\"><a href=\"#Handler-å‘é€æ¶ˆæ¯çš„æµç¨‹\" class=\"headerlink\" title=\"Handler å‘é€æ¶ˆæ¯çš„æµç¨‹\"></a>Handler å‘é€æ¶ˆæ¯çš„æµç¨‹</h2><p>æ„é€ è¿‡ç¨‹ä¸­å–å‡ºå½“å‰çº¿ç¨‹æŒæœ‰çš„ Looperï¼Œå¹¶ä¿å­˜å…¶ MQ å¯¹è±¡</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Handler</span><span class=\"params\">(Callback callback, <span class=\"keyword\">boolean</span> async)</span> </span>&#123;</span><br><span class=\"line\">        mLooper = Looper.myLooper();</span><br><span class=\"line\">        mQueue = mLooper.mQueue;</span><br><span class=\"line\">        mCallback = callback;</span><br><span class=\"line\">        mAsynchronous = async;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>handleré€šè¿‡sendMessage(msg) å°†æ¶ˆæ¯å‘å‡ºï¼Œæ¶ˆæ¯æœ€ç»ˆèµ°å‘ queue.enqueueMessage(msg, uptimeMillis) è¿›å…¥é˜Ÿåˆ—ï¼ŒåŒæ—¶å°†å½“å‰ Handler ä»¥ target ä¿å­˜åœ¨æ¶ˆæ¯å¯¹è±¡ä¸­ï¼Œå½“ Looper è½®è¯¢æ—¶ï¼Œä¼šå–å‡º target ç”¨äºå¤„ç†æ¶ˆæ¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">enqueueMessage</span><span class=\"params\">(MessageQueue queue, Message msg, <span class=\"keyword\">long</span> uptimeMillis)</span> </span>&#123;</span><br><span class=\"line\">        msg.target = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> queue.enqueueMessage(msg, uptimeMillis);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">loop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">final</span> Looper me = myLooper();</span><br><span class=\"line\">        <span class=\"keyword\">final</span> MessageQueue queue = me.mQueue;</span><br><span class=\"line\">        <span class=\"keyword\">for</span> (;;) &#123;</span><br><span class=\"line\">            Message msg = queue.next(); <span class=\"comment\">// å–å‡ºæ¶ˆæ¯ï¼Œæ— æ¶ˆæ¯åˆ™é˜»å¡</span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (msg == <span class=\"keyword\">null</span>) &#123;  <span class=\"keyword\">return</span>;   &#125;</span><br><span class=\"line\">        msg.target.dispatchMessage(msg);<span class=\"comment\">//å‘é€æ¶ˆæ¯ å…¶ä¸­targetå°±æ˜¯Handler</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>dispatchMessage æœ€ç»ˆä¼šè°ƒåˆ° Handler ä¸­å®ç°çš„ handleMessage</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">dispatchMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (msg.callback != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            handleCallback(msg);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mCallback != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mCallback.handleMessage(msg)) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            handleMessage(msg);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"HandlerThread\"><a href=\"#HandlerThread\" class=\"headerlink\" title=\"HandlerThread\"></a>HandlerThread</h2><p>æ„é€ å‡½æ•°é‡Œåˆ›å»ºäº†è‡ªå·±çš„ Looper å¹¶ä¸”å¼€å¯è½®è¯¢ï¼Œæ™®é€š Thread ä¸å« Looper</p>\n<h1 id=\"Picasso-VS-Glide\"><a href=\"#Picasso-VS-Glide\" class=\"headerlink\" title=\"Picasso VS Glide\"></a>Picasso VS Glide</h1><table>\n<thead>\n<tr>\n<th>é¡¹ç›®</th>\n<th>Picasso</th>\n<th>Glide</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>å›¾ç‰‡æ ¼å¼</td>\n<td>ARGB8888</td>\n<td>RGB_565</td>\n</tr>\n<tr>\n<td>ç¼“å­˜</td>\n<td>åŸå›¾å°ºå¯¸</td>\n<td>æ˜¾ç¤ºå°ºå¯¸</td>\n</tr>\n<tr>\n<td>GIF</td>\n<td>ä¸æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>video</td>\n<td>ä¸æ”¯æŒ</td>\n<td>æ”¯æŒ</td>\n</tr>\n<tr>\n<td>Library size</td>\n<td>100K</td>\n<td>500K</td>\n</tr>\n<tr>\n<td>Methods count</td>\n<td>500</td>\n<td>2500</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"View-çš„ç»˜åˆ¶è¿‡ç¨‹\"><a href=\"#View-çš„ç»˜åˆ¶è¿‡ç¨‹\" class=\"headerlink\" title=\"View çš„ç»˜åˆ¶è¿‡ç¨‹\"></a>View çš„ç»˜åˆ¶è¿‡ç¨‹</h1><p>ä¸€ä¸ª Activity çš„çª—å£é¡µé¢ï¼Œå¯ä»¥åˆ†ä¸ºPhoneWindowã€DecorViewã€TitleBar &amp; ContentView å‡ ä¸ªå±‚çº§</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180726_interview/window.png\" alt=\"window.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">window.png</div>\n            </figure>\n<p>æ•´ä¸ª View æ ‘çš„ç»˜å›¾æµç¨‹åœ¨ ViewRootImpl.performTraversals() æ–¹æ³•ä¸­ï¼Œå®ƒä¸»è¦åšçš„äº‹æƒ…æ˜¯æ ¹æ®ä¹‹å‰è®¾ç½®çš„çŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—è§†å›¾å¤§å°ï¼ˆmeasureï¼‰ã€æ˜¯å¦éœ€è¦é‡æ–°æ”¾ç½®è§†å›¾ä½ç½®ï¼ˆlayoutï¼‰ä»¥åŠæ˜¯å¦éœ€è¦é‡æ–°ç»˜åˆ¶ï¼ˆdrawï¼‰ï¼Œä»£ç å¦‚ä¸‹</p>\n<ul>\n<li>measureï¼šæµ‹é‡ï¼ŒæŒ‡æµ‹é‡ View çš„å®½é«˜</li>\n<li>layoutï¼šå¸ƒå±€ï¼ŒæŒ‡ç¡®å®šåœ¨çˆ¶å®¹å™¨ä¸­çš„ä½ç½®åæ ‡</li>\n<li>drawï¼šç»˜åˆ¶å¹¶æ˜¾ç¤º</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">performTraversals</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        ......</span><br><span class=\"line\">        <span class=\"comment\">//æœ€å¤–å±‚çš„æ ¹è§†å›¾çš„widthMeasureSpecå’ŒheightMeasureSpecç”±æ¥</span></span><br><span class=\"line\">        <span class=\"comment\">//lp.widthå’Œlp.heightåœ¨åˆ›å»ºViewGroupå®ä¾‹æ—¶ç­‰äºMATCH_PARENT</span></span><br><span class=\"line\">        <span class=\"keyword\">int</span> childWidthMeasureSpec = getRootMeasureSpec(mWidth, lp.width);</span><br><span class=\"line\">        <span class=\"keyword\">int</span> childHeightMeasureSpec = getRootMeasureSpec(mHeight, lp.height);</span><br><span class=\"line\">        ......</span><br><span class=\"line\">        mView.measure(childWidthMeasureSpec, childHeightMeasureSpec);</span><br><span class=\"line\">        ......</span><br><span class=\"line\">        mView.layout(<span class=\"number\">0</span>, <span class=\"number\">0</span>, mView.getMeasuredWidth(), mView.getMeasuredHeight());</span><br><span class=\"line\">        ......</span><br><span class=\"line\">        mView.draw(canvas);</span><br><span class=\"line\">        ......</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180726_interview/perform_traversals.png\" alt=\"perform_traversals\" title=\"\">\n                </div>\n                <div class=\"image-caption\">perform_traversals</div>\n            </figure>\n<h2 id=\"measure-è¿‡ç¨‹åˆ†æ\"><a href=\"#measure-è¿‡ç¨‹åˆ†æ\" class=\"headerlink\" title=\"measure è¿‡ç¨‹åˆ†æ\"></a>measure è¿‡ç¨‹åˆ†æ</h2><p>æ•´ä¸ª View æ ‘ä»æ ¹ View å¼€å§‹ï¼Œé€’å½’è¿›è¡Œ measure</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180726_interview/measure.png\" alt=\"measure.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">measure.png</div>\n            </figure>\n<p>View.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * This is called to find out how big a view should be. The parent</span></span><br><span class=\"line\"><span class=\"comment\"> * supplies constraint information in the width and height parameters.</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * The actual measurement work of a view is performed in</span></span><br><span class=\"line\"><span class=\"comment\"> * &#123;<span class=\"doctag\">@link</span> #onMeasure(int, int)&#125;, called by this method. Therefore, only</span></span><br><span class=\"line\"><span class=\"comment\"> * &#123;<span class=\"doctag\">@link</span> #onMeasure(int, int)&#125; can and must be overridden by subclasses.</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> widthMeasureSpec Horizontal space requirements as imposed by the</span></span><br><span class=\"line\"><span class=\"comment\"> *        parent</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> heightMeasureSpec Vertical space requirements as imposed by the</span></span><br><span class=\"line\"><span class=\"comment\"> *        parent</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@see</span> #onMeasure(int, int)</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"> <span class=\"comment\">//finalæ–¹æ³•ï¼Œå­ç±»ä¸å¯é‡å†™</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">measure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    <span class=\"comment\">//å›è°ƒonMeasure()æ–¹æ³•</span></span><br><span class=\"line\">    onMeasure(widthMeasureSpec, heightMeasureSpec);</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">//Viewçš„onMeasureé»˜è®¤å®ç°æ–¹æ³•</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onMeasure</span><span class=\"params\">(<span class=\"keyword\">int</span> widthMeasureSpec, <span class=\"keyword\">int</span> heightMeasureSpec)</span> </span>&#123;</span><br><span class=\"line\">    setMeasuredDimension(getDefaultSize(getSuggestedMinimumWidth(), widthMeasureSpec),</span><br><span class=\"line\">            getDefaultSize(getSuggestedMinimumHeight(), heightMeasureSpec));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>MeasureSpec çš„è¯­ä¹‰æ˜¯çˆ¶ View å¯¹å­ View åœ¨é•¿å®½ä¸Šçš„çº¦æŸï¼Œæœ‰ä¸‰ç§å–å€¼</p>\n<ul>\n<li>EXACTLYï¼šä¸ç®¡å­ View æƒ³å¤šå¤§ï¼Œå®ƒåªèƒ½è¿™ä¹ˆå¤§</li>\n<li>AT_MOSTï¼šæœ€å¤§åªèƒ½è¿™ä¹ˆå¤§</li>\n<li>UNSPECIFIEDï¼šä¸åŠ çº¦æŸï¼Œå­ View æƒ³å¤šå¤§å°±å¤šå¤§</li>\n</ul>\n<p>measure è¿‡ç¨‹ä¸»è¦å°±æ˜¯ä»é¡¶å±‚çˆ¶ View å‘å­ View é€’å½’è°ƒç”¨ view.measure æ–¹æ³•ï¼ˆmeasureä¸­ åˆå›è°ƒ onMeasure æ–¹æ³•ï¼‰çš„è¿‡ç¨‹ã€‚å…·ä½“ measure æ ¸å¿ƒä¸»è¦æœ‰å¦‚ä¸‹å‡ ç‚¹</p>\n<ul>\n<li>Viewçš„measureæ–¹æ³•æ˜¯finalçš„ï¼Œä¸å…è®¸é‡è½½ï¼ŒViewå­ç±»åªèƒ½é‡è½½onMeasureæ¥å®Œæˆè‡ªå·±çš„æµ‹é‡é€»è¾‘ã€‚</li>\n<li>æœ€é¡¶å±‚DecorViewæµ‹é‡æ—¶çš„MeasureSpecæ˜¯ç”±ViewRootImplä¸­getRootMeasureSpecæ–¹æ³•ç¡®å®šçš„ï¼ˆLayoutParamså®½é«˜å‚æ•°å‡ä¸ºMATCH_PARENTï¼ŒspecModeæ˜¯EXACTLYï¼ŒspecSizeä¸ºç‰©ç†å±å¹•å¤§å°ï¼‰ã€‚</li>\n<li>ViewGroupç±»æä¾›äº†measureChildï¼ŒmeasureChildå’ŒmeasureChildWithMarginsæ–¹æ³•ï¼Œç®€åŒ–äº†çˆ¶å­Viewçš„å°ºå¯¸è®¡ç®—ã€‚</li>\n<li>åªè¦æ˜¯ViewGroupçš„å­ç±»å°±å¿…é¡»è¦æ±‚LayoutParamsç»§æ‰¿å­MarginLayoutParamsï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨layout_marginå‚æ•°ã€‚</li>\n<li>Viewçš„å¸ƒå±€å¤§å°ç”±çˆ¶Viewå’Œå­Viewå…±åŒå†³å®šã€‚</li>\n<li>ä½¿ç”¨Viewçš„getMeasuredWidth()å’ŒgetMeasuredHeight()æ–¹æ³•æ¥è·å–Viewæµ‹é‡çš„å®½é«˜ï¼Œå¿…é¡»ä¿è¯è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨onMeasureæµç¨‹ä¹‹åè¢«è°ƒç”¨æ‰èƒ½è¿”å›æœ‰æ•ˆå€¼ã€‚</li>\n</ul>\n<h2 id=\"layout-è¿‡ç¨‹åˆ†æ\"><a href=\"#layout-è¿‡ç¨‹åˆ†æ\" class=\"headerlink\" title=\"layout è¿‡ç¨‹åˆ†æ\"></a>layout è¿‡ç¨‹åˆ†æ</h2><p>View.performTraversals åœ¨ measure ä¹‹åï¼Œä¼šæ‰§è¡Œ layout è¿‡ç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">performTraversals</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    mView.layout(<span class=\"number\">0</span>, <span class=\"number\">0</span>, mView.getMeasuredWidth(), mView.getMeasuredHeight());</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>layout() æ–¹æ³•æœ‰å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ leftã€topã€rightã€bottomï¼Œè¡¨ç¤ºå½“å‰ View ç›¸å¯¹ Parent çš„å››ä¸ªåæ ‡ã€‚layout è¿‡ç¨‹ä¹Ÿæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼š</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180726_interview/layout.png\" alt=\"layout.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">layout.png</div>\n            </figure>\n<p>View.layout æ–¹æ³•å®é™…ä¸Šä¼šè°ƒç”¨åˆ° onLayout æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">layout</span><span class=\"params\">(<span class=\"keyword\">int</span> l, <span class=\"keyword\">int</span> t, <span class=\"keyword\">int</span> r, <span class=\"keyword\">int</span> b)</span> </span>&#123;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    <span class=\"comment\">//å®è´¨éƒ½æ˜¯è°ƒç”¨setFrameæ–¹æ³•æŠŠå‚æ•°åˆ†åˆ«èµ‹å€¼ç»™mLeftã€mTopã€mRightå’ŒmBottomè¿™å‡ ä¸ªå˜é‡</span></span><br><span class=\"line\">    <span class=\"comment\">//åˆ¤æ–­Viewçš„ä½ç½®æ˜¯å¦å‘ç”Ÿè¿‡å˜åŒ–ï¼Œä»¥ç¡®å®šæœ‰æ²¡æœ‰å¿…è¦å¯¹å½“å‰çš„Viewè¿›è¡Œé‡æ–°layout</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> changed = isLayoutModeOptical(mParent) ?</span><br><span class=\"line\">            setOpticalFrame(l, t, r, b) : setFrame(l, t, r, b);</span><br><span class=\"line\">    <span class=\"comment\">//éœ€è¦é‡æ–°layout</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (changed || (mPrivateFlags &amp; PFLAG_LAYOUT_REQUIRED) == PFLAG_LAYOUT_REQUIRED) &#123;</span><br><span class=\"line\">        <span class=\"comment\">//å›è°ƒonLayout</span></span><br><span class=\"line\">        onLayout(changed, l, t, r, b);</span><br><span class=\"line\">        ......</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>layout ä¹Ÿæ˜¯ä»é¡¶å±‚çˆ¶ View å‘å­ View çš„é€’å½’è°ƒç”¨ layout æ–¹æ³•çš„è¿‡ç¨‹ï¼Œå³çˆ¶ View æ ¹æ®ä¸Šä¸€æ­¥ measure å­ View æ‰€å¾—åˆ°çš„å¸ƒå±€å¤§å°å’Œå¸ƒå±€å‚æ•°ï¼Œå°†å­ View æ”¾åœ¨åˆé€‚çš„ä½ç½®ä¸Šã€‚å…·ä½“ layout æ ¸å¿ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>\n<ul>\n<li>View.layoutæ–¹æ³•å¯è¢«é‡è½½ï¼ŒViewGroup.layoutä¸ºfinalçš„ä¸å¯é‡è½½ï¼ŒViewGroup.onLayoutä¸ºabstractçš„ï¼Œå­ç±»å¿…é¡»é‡è½½å®ç°è‡ªå·±çš„ä½ç½®é€»è¾‘</li>\n<li>measureæ“ä½œå®Œæˆåå¾—åˆ°çš„æ˜¯å¯¹æ¯ä¸ªViewç»æµ‹é‡è¿‡çš„measuredWidthå’ŒmeasuredHeightï¼Œlayoutæ“ä½œå®Œæˆä¹‹åå¾—åˆ°çš„æ˜¯å¯¹æ¯ä¸ªViewè¿›è¡Œä½ç½®åˆ†é…åçš„mLeftã€mTopã€mRightã€mBottomï¼Œè¿™äº›å€¼éƒ½æ˜¯ç›¸å¯¹äºçˆ¶Viewæ¥è¯´çš„</li>\n<li>å‡¡æ˜¯layout_XXXçš„å¸ƒå±€å±æ€§åŸºæœ¬éƒ½é’ˆå¯¹çš„æ˜¯åŒ…å«å­Viewçš„ViewGroupçš„ï¼Œå½“å¯¹ä¸€ä¸ªæ²¡æœ‰çˆ¶å®¹å™¨çš„Viewè®¾ç½®ç›¸å…³layout_XXXå±æ€§æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰çš„</li>\n<li>ä½¿ç”¨Viewçš„getWidth()å’ŒgetHeight()æ–¹æ³•æ¥è·å–Viewæµ‹é‡çš„å®½é«˜ï¼Œå¿…é¡»ä¿è¯è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨onLayoutæµç¨‹ä¹‹åè¢«è°ƒç”¨æ‰èƒ½è¿”å›æœ‰æ•ˆå€¼</li>\n</ul>\n<h2 id=\"draw-è¿‡ç¨‹åˆ†æ\"><a href=\"#draw-è¿‡ç¨‹åˆ†æ\" class=\"headerlink\" title=\"draw è¿‡ç¨‹åˆ†æ\"></a>draw è¿‡ç¨‹åˆ†æ</h2><p>performTraverls åœ¨ layout åä¼šè¿›è¡Œ draw çš„æ“ä½œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">performTraversals</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Rect dirty = mDirty;</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    canvas = mSurface.lockCanvas(dirty);</span><br><span class=\"line\">    ......</span><br><span class=\"line\">    mView.draw(canvas);</span><br><span class=\"line\">    ......</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>draw ä¹Ÿæ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180726_interview/draw.png\" alt=\"draw.png\" title=\"\">\n                </div>\n                <div class=\"image-caption\">draw.png</div>\n            </figure>\n<ul>\n<li>å¦‚æœè¯¥Viewæ˜¯ä¸€ä¸ªViewGroupï¼Œåˆ™éœ€è¦é€’å½’ç»˜åˆ¶å…¶æ‰€åŒ…å«çš„æ‰€æœ‰å­Viewã€‚</li>\n<li>Viewé»˜è®¤ä¸ä¼šç»˜åˆ¶ä»»ä½•å†…å®¹ï¼ŒçœŸæ­£çš„ç»˜åˆ¶éƒ½éœ€è¦è‡ªå·±åœ¨å­ç±»ä¸­å®ç°ã€‚</li>\n<li>Viewçš„ç»˜åˆ¶æ˜¯å€ŸåŠ©onDrawæ–¹æ³•ä¼ å…¥çš„Canvasç±»æ¥è¿›è¡Œçš„ã€‚</li>\n<li>åŒºåˆ†ViewåŠ¨ç”»å’ŒViewGroupå¸ƒå±€åŠ¨ç”»ï¼Œå‰è€…æŒ‡çš„æ˜¯Viewè‡ªèº«çš„åŠ¨ç”»ï¼Œå¯ä»¥é€šè¿‡setAnimationæ·»åŠ ï¼Œåè€…æ˜¯ä¸“é—¨é’ˆå¯¹ViewGroupæ˜¾ç¤ºå†…éƒ¨å­è§†å›¾æ—¶è®¾ç½®çš„åŠ¨ç”»ï¼Œå¯ä»¥åœ¨xmlå¸ƒå±€æ–‡ä»¶ä¸­å¯¹ViewGroupè®¾ç½®layoutAnimationå±æ€§ï¼ˆè­¬å¦‚å¯¹LinearLayoutè®¾ç½®å­Viewåœ¨æ˜¾ç¤ºæ—¶å‡ºç°é€è¡Œã€éšæœºã€ä¸‹ç­‰æ˜¾ç¤ºç­‰ä¸åŒåŠ¨ç”»æ•ˆæœï¼‰ã€‚</li>\n<li>åœ¨è·å–ç”»å¸ƒå‰ªåˆ‡åŒºï¼ˆæ¯ä¸ªViewçš„drawä¸­ä¼ å…¥çš„Canvasï¼‰æ—¶ä¼šè‡ªåŠ¨å¤„ç†æ‰paddingï¼Œå­Viewè·å–Canvasä¸ç”¨å…³æ³¨è¿™äº›é€»è¾‘ï¼Œåªç”¨å…³å¿ƒå¦‚ä½•ç»˜åˆ¶å³å¯ã€‚</li>\n<li>é»˜è®¤æƒ…å†µä¸‹å­Viewçš„ViewGroup.drawChildç»˜åˆ¶é¡ºåºå’Œå­Viewè¢«æ·»åŠ çš„é¡ºåºä¸€è‡´ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥é‡è½½ViewGroup.getChildDrawingOrder()æ–¹æ³•æä¾›ä¸åŒé¡ºåºã€‚</li>\n</ul>\n<h3 id=\"å‚è€ƒï¼šAndroidåº”ç”¨å±‚Viewç»˜åˆ¶æµç¨‹ä¸æºç åˆ†æ\"><a href=\"#å‚è€ƒï¼šAndroidåº”ç”¨å±‚Viewç»˜åˆ¶æµç¨‹ä¸æºç åˆ†æ\" class=\"headerlink\" title=\"å‚è€ƒï¼šAndroidåº”ç”¨å±‚Viewç»˜åˆ¶æµç¨‹ä¸æºç åˆ†æ\"></a>å‚è€ƒï¼š<a href=\"https://blog.csdn.net/yanbober/article/details/46128379\" target=\"_blank\" rel=\"noopener\">Androidåº”ç”¨å±‚Viewç»˜åˆ¶æµç¨‹ä¸æºç åˆ†æ</a></h3><h1 id=\"ç±»åŠ è½½è¿‡ç¨‹-ClassLoaderæœºåˆ¶\"><a href=\"#ç±»åŠ è½½è¿‡ç¨‹-ClassLoaderæœºåˆ¶\" class=\"headerlink\" title=\"ç±»åŠ è½½è¿‡ç¨‹/ClassLoaderæœºåˆ¶\"></a>ç±»åŠ è½½è¿‡ç¨‹/ClassLoaderæœºåˆ¶</h1><h1 id=\"Apk-æ‰“åŒ…è¿‡ç¨‹\"><a href=\"#Apk-æ‰“åŒ…è¿‡ç¨‹\" class=\"headerlink\" title=\"Apk æ‰“åŒ…è¿‡ç¨‹\"></a>Apk æ‰“åŒ…è¿‡ç¨‹</h1><h1 id=\"ListView-å’Œ-RecyclerView-åŸç†\"><a href=\"#ListView-å’Œ-RecyclerView-åŸç†\" class=\"headerlink\" title=\"ListView å’Œ RecyclerView åŸç†\"></a>ListView å’Œ RecyclerView åŸç†</h1><h1 id=\"æ€§èƒ½ä¼˜åŒ–\"><a href=\"#æ€§èƒ½ä¼˜åŒ–\" class=\"headerlink\" title=\"æ€§èƒ½ä¼˜åŒ–\"></a>æ€§èƒ½ä¼˜åŒ–</h1><p>è€ƒè™‘æ€§èƒ½æ—¶ä¸€èˆ¬ä»ä»¥ä¸‹å‡ ä¸ªè§’åº¦</p>\n<ul>\n<li>å†…å­˜ä¼˜åŒ–</li>\n<li>UIä¼˜åŒ–ï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ï¼‰</li>\n<li>é€Ÿåº¦ä¼˜åŒ–ï¼ˆçº¿ç¨‹ã€ç½‘ç»œï¼‰</li>\n<li>ç”µé‡ä¼˜åŒ–</li>\n<li>å¯åŠ¨ä¼˜åŒ–</li>\n</ul>\n<h2 id=\"å†…å­˜ä¼˜åŒ–\"><a href=\"#å†…å­˜ä¼˜åŒ–\" class=\"headerlink\" title=\"å†…å­˜ä¼˜åŒ–\"></a>å†…å­˜ä¼˜åŒ–</h2><p>å†…å­˜ä¼˜åŒ–æ˜¯ä¸ºäº†è§£å†³å†…å­˜æº¢å‡ºï¼ˆOOMï¼‰çš„é—®é¢˜ï¼Œå†…å­˜æº¢å‡ºé€šå¸¸æœ‰ä¸¤ä¸ªåŸå› </p>\n<ul>\n<li>ä½¿ç”¨ä¸å½“é€ æˆçš„å†…å­˜æ³„æ¼ï¼Œå†…å­˜æ— æ³•é‡Šæ”¾</li>\n<li>è™½ç„¶ä¸å±äºæ³„æ¼ï¼Œä½†ä¸€äº›ä»£ç é€»è¾‘ä¸å½“ï¼Œå¯¼è‡´æ¶ˆè€—å¤§é‡å†…å­˜ï¼Œéš¾ä»¥åŠæ—¶é‡Šæ”¾</li>\n</ul>\n<p>å†…å­˜æ³„æ¼</p>\n<p>å¸¸è§åŸå› ä¸å¤„ç†æ–¹æ³•</p>\n<ol>\n<li>å•ä¾‹æ¨¡å¼é‡Œä½¿ç”¨äº† Activity çš„ Contextï¼Œå¯¼è‡´å…¶ç”Ÿå‘½å‘¨æœŸå»¶é•¿è‡³æ•´ä¸ªåº”ç”¨ä½¿ç”¨å‘¨æœŸï¼Œåº”è¯¥ä½¿ç”¨ ApplicationContext</li>\n<li>éé™æ€å†…éƒ¨ç±»æŒæœ‰ Activity å¯¹è±¡å¼•ç”¨ï¼Œåº”è¯¥æ”¹æˆé™æ€å†…éƒ¨ç±»ï¼ŒåŒæ—¶ä½¿ç”¨ ApplicationContextï¼›ä»¥ä¸Šä¸¤æ­¥è¯´æ˜å°½é‡ä¸è¦ä½¿ç”¨ Activity çš„ Contextï¼Œè€Œæ˜¯åº”å½“ç”¨ ApplicationContext</li>\n<li>Handler æŒæœ‰ Activity å¯¹è±¡å¼•ç”¨ï¼ŒåŒæ ·åº”è¯¥æ”¹æˆé™æ€ï¼Œå¹¶ä½¿ç”¨å¼±å¼•ç”¨ï¼Œå¹¶åœ¨ Activity çš„ onDestroy æ–¹æ³•é‡Œæ¸…ç©º Handler æ¶ˆæ¯ï¼Œ<code>mHandler.removeCallbacksAndMessages(null);</code></li>\n<li>çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œï¼Œå¯¼è‡´ Activity æ²¡é‡Šæ”¾ï¼Œåº”å½“ä½¿ç”¨å¼±å¼•ç”¨ï¼Œå¹¶ä¸”åœ¨ Activity çš„ onDestroy æ–¹æ³•é‡Œ cancel æ‰çº¿ç¨‹</li>\n<li>å æœ‰ç³»ç»Ÿèµ„æºåæ²¡æœ‰å…³é—­ï¼Œåœ¨ä½¿ç”¨å®Œ BraodcastReceiver,ContentObserver,File,Cursor,Stream,Bitmap,Animation ç­‰èµ„æºæ—¶ï¼Œä¸€å®šè¦åœ¨ Activity ä¸­çš„ onDestry ä¸­åŠæ—¶çš„å…³é—­ã€æ³¨é”€æˆ–è€…é‡Šæ”¾å†…å­˜ã€‚</li>\n</ol>\n<h3 id=\"å‚è€ƒï¼šAndroidä¸­äº”ç§å¸¸è§å†…å­˜æ³„æ¼åŸå› \"><a href=\"#å‚è€ƒï¼šAndroidä¸­äº”ç§å¸¸è§å†…å­˜æ³„æ¼åŸå› \" class=\"headerlink\" title=\"å‚è€ƒï¼šAndroidä¸­äº”ç§å¸¸è§å†…å­˜æ³„æ¼åŸå› \"></a>å‚è€ƒï¼š<a href=\"https://blog.csdn.net/qq_35373333/article/details/74909811\" target=\"_blank\" rel=\"noopener\">Androidä¸­äº”ç§å¸¸è§å†…å­˜æ³„æ¼åŸå› </a></h3><p>å¸¸ç”¨å·¥å…·</p>\n<ul>\n<li>Heap SnapShot</li>\n<li>Heap Viewer</li>\n<li>LeakCanary</li>\n<li>MAT</li>\n<li>TraceViewï¼ˆDevice Monitorï¼‰</li>\n</ul>\n<p>æ¶ˆè€—å¤§é‡å†…å­˜ï¼šé€šå¸¸åŠ è½½ Bitmap æ—¶ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œè§£å†³æ€è·¯æ˜¯</p>\n<ul>\n<li>åŠ è½½å•å¼ å›¾ç‰‡æ—¶å€™è¿›è¡Œå‹ç¼©ï¼Œæˆ–è€…ä½¿ç”¨ç¼©ç•¥å›¾</li>\n<li>æ§åˆ¶æ¯æ¬¡åŠ è½½çš„æ•°é‡</li>\n<li>åŠ è½½å¤šå¼ å›¾ç‰‡æ—¶ï¼Œæ»‘åŠ¨è¿‡ç¨‹ä¸­ä¸è¿›è¡ŒåŠ è½½ï¼Œä»…åœ¨æ»‘åŠ¨å®ŒæˆååŠ è½½</li>\n</ul>\n<h2 id=\"UIä¼˜åŒ–ï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ï¼‰\"><a href=\"#UIä¼˜åŒ–ï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ï¼‰\" class=\"headerlink\" title=\"UIä¼˜åŒ–ï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ï¼‰\"></a>UIä¼˜åŒ–ï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ï¼‰</h2><p>Android å±å¹•åˆ·æ–°çš„é¢‘ç‡æ˜¯ 60fpsï¼Œæ„å‘³ç€æ¯ä¸€å¸§çš„ç»˜åˆ¶å¿…é¡»è¦åœ¨ 16ms å†…å®Œæˆï¼Œå¦‚æœ UI ç»˜åˆ¶è¶…è¿‡äº† 16msï¼Œåœ¨ä½“éªŒä¸Šå°±ä¼šå‡ºç°å¡é¡¿ã€‚</p>\n<p>ä»¥ä¸‹ç½—åˆ—é€ æˆ App å¡é¡¿çš„ä¸€äº›åŸå› </p>\n<ol>\n<li>åœ¨ UI çº¿ç¨‹é‡Œè¿›è¡Œè½»å¾®è€—æ—¶æ“ä½œ</li>\n<li>å¸ƒå±€ Layout è¿‡äºå¤æ‚ï¼Œæ— æ³•åœ¨ 16ms å†…å®Œæˆæ¸²æŸ“</li>\n<li>åŠ¨ç”»æ‰§è¡Œæ¬¡æ•°è¿‡å¤šï¼Œå¯¼è‡´ CPU æˆ– GPU è´Ÿè½½è¿‡é«˜</li>\n<li>View è¿‡åº¦ç»˜åˆ¶ï¼Œå±å¹•æŸäº›åƒç´ åœ¨ä¸€å¸§æ—¶é—´å†…ç»˜åˆ¶å¤šæ¬¡ï¼ŒCPU æˆ– GPU è´Ÿè½½è¿‡é«˜</li>\n<li>View é¢‘ç¹è§¦å‘ measure å’Œ layoutï¼Œç´¯è®¡è€—æ—¶è¿‡å¤šï¼Œé¢‘ç¹æ¸²æŸ“é€ æˆè´Ÿè½½è¿‡é«˜</li>\n<li>å†…å­˜é¢‘ç¹ GCï¼Œå¯¼è‡´é˜»å¡æ¸²æŸ“æ“ä½œ</li>\n<li>å†—ä½™èµ„æºå’Œé€»è¾‘å¯¼è‡´è¿è¡Œç¼“æ…¢</li>\n<li>ANR</li>\n</ol>\n<p>UIä¼˜åŒ–ï¼Œé€šå¸¸æ˜¯æŒ‡å¸ƒå±€ä¼˜åŒ–å’Œ View ç»˜åˆ¶ä¼˜åŒ–</p>\n<h3 id=\"å¸ƒå±€ä¼˜åŒ–\"><a href=\"#å¸ƒå±€ä¼˜åŒ–\" class=\"headerlink\" title=\"å¸ƒå±€ä¼˜åŒ–\"></a>å¸ƒå±€ä¼˜åŒ–</h3><p>åœ¨â€œå¼€å‘è€…é€‰é¡¹â€é‡Œå¯ä»¥æ‰“å¼€â€œè¿‡åº¦ç»˜åˆ¶å¼€å…³â€ï¼Œä»è€ŒæŸ¥çœ‹å½“å‰é¡µé¢ View æ˜¯å¦å­˜åœ¨è¿‡ç»˜ï¼Œçº¢è‰²è¡¨ç¤ºå±‚çº§æœ€å¤šï¼ˆ4+ï¼‰ï¼Œæµ…ç´«è‰²è¡¨ç¤ºå±‚çº§æœ€ä½ï¼ˆ1ï¼‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚æ‰¾åˆ°é‚£äº›è¿‡ç»˜çš„éƒ¨åˆ†ï¼Œåœ¨å¸ƒå±€æ–‡ä»¶é‡Œå‡å°‘å®ƒä»¬çš„èƒŒæ™¯ï¼Œæ¯”å¦‚æŠŠåº•å±‚ View çš„èƒŒæ™¯è®¾ç½®æˆé€æ˜ã€‚åŒæ—¶ï¼Œå°½é‡å‡å°‘ ViewGroup åµŒå¥—çš„æƒ…å†µï¼Œé€šå¸¸ LinearLayout ä¼šæ¯” RelativeLayout çš„å±‚çº§è¦å°‘ã€‚è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯è¦ä½¿ç”¨è®¾å¤‡å¯¹åº”åˆ†è¾¨ç‡çš„èµ„æºæ–‡ä»¶ï¼Œå¹¶ä¸æ˜¯å›¾ç‰‡è¶Šæ¸…æ™°å°±è¶Šå¥½ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180726_interview/overdraw.png\" alt=\"Overdraw\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Overdraw</div>\n            </figure>\n<p>åœ¨â€œå¼€å‘è€…æ¨¡å¼â€é‡Œé¢è¿˜æœ‰å¦ä¸€é¡¹ç›¸å…³çš„è®¾ç½®ï¼Œå«åšâ€œGPUå‘ˆç°æ¨¡å¼åˆ†æâ€ï¼Œå¯ä»¥å°†æ¸²æŸ“æ—¶é—´ä»¥æ¡å½¢å›¾ğŸ“Šçš„æ–¹å¼æ˜¾ç¤ºåœ¨å±å¹•åº•éƒ¨ï¼ŒåŒæ—¶ 16ms çš„åŸºå‡†çº¿ä¹Ÿä¼šä»¥ç»¿è‰²ç»˜åˆ¶åœ¨å±å¹•ä¸­å¤®ã€‚æ¡å½¢å›¾ä¸­åŒä¸€ä¸ªæ¡å½¢çš„ä¸åŒé¢œè‰²è¡¨ç¤ºç»˜åˆ¶ä¸åŒé˜¶æ®µ</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180726_interview/å‘ˆç°æ¨¡å¼åˆ†æ.png\" alt=\"å‘ˆç°æ¨¡å¼åˆ†æ\" title=\"\">\n                </div>\n                <div class=\"image-caption\">å‘ˆç°æ¨¡å¼åˆ†æ</div>\n            </figure>\n<h3 id=\"ç»˜åˆ¶ä¼˜åŒ–\"><a href=\"#ç»˜åˆ¶ä¼˜åŒ–\" class=\"headerlink\" title=\"ç»˜åˆ¶ä¼˜åŒ–\"></a>ç»˜åˆ¶ä¼˜åŒ–</h3><p>ä¸»è¦æ˜¯é’ˆå¯¹è‡ªå®šä¹‰ View é‡Œé¢çš„ä»£ç ç¼–å†™ï¼Œåœ¨ onDraw è¿™ä¸€æ­¥è¦å°½é‡å‡å°‘å¼€é”€ï¼Œå› ä¸º onDraw æ–¹æ³•æ˜¯å®æ—¶æ‰§è¡Œçš„ï¼Œåœ¨ä¸€å¸§å†…ä¼šæ‰§è¡Œå¤šæ¬¡ã€‚å› æ­¤ï¼Œåœ¨ onDraw ä¸­è¦é¿å…å‡ºç°ä»¥ä¸‹ä¸¤ç§æƒ…å†µ</p>\n<ul>\n<li>åˆ›å»ºå±€éƒ¨å¯¹è±¡ï¼Œè¿™ä¼šå¯¼è‡´å ç”¨å¤§é‡å†…å­˜ï¼Œé¢‘ç¹ GC</li>\n<li>æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œå‡ºç°å¾ªç¯ï¼Œè¿™ä¼šå ç”¨ CPU æ—¶é—´</li>\n</ul>\n<p>è¿‡åº¦ç»˜åˆ¶ä¼˜åŒ–ï¼Œä½¿ç”¨å¯¹åº”åˆ†è¾¨ç‡çš„èµ„æºæ–‡ä»¶</p>\n<h2 id=\"é€Ÿåº¦ä¼˜åŒ–ï¼ˆçº¿ç¨‹ã€ç½‘ç»œï¼‰\"><a href=\"#é€Ÿåº¦ä¼˜åŒ–ï¼ˆçº¿ç¨‹ã€ç½‘ç»œï¼‰\" class=\"headerlink\" title=\"é€Ÿåº¦ä¼˜åŒ–ï¼ˆçº¿ç¨‹ã€ç½‘ç»œï¼‰\"></a>é€Ÿåº¦ä¼˜åŒ–ï¼ˆçº¿ç¨‹ã€ç½‘ç»œï¼‰</h2><h3 id=\"çº¿ç¨‹ä¼˜åŒ–\"><a href=\"#çº¿ç¨‹ä¼˜åŒ–\" class=\"headerlink\" title=\"çº¿ç¨‹ä¼˜åŒ–\"></a>çº¿ç¨‹ä¼˜åŒ–</h3><p>éœ€è¦åœ¨å­çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</p>\n<ul>\n<li>HandlerThreadï¼šæ‹¥æœ‰è‡ªå·± Looper çš„çº¿ç¨‹ç±»ï¼Œå¯ä»¥åœ¨è¿™ä¸ªçº¿ç¨‹é‡Œè¿›è¡Œè€—æ—¶æ“ä½œï¼Œç„¶åé€šçŸ¥ä¸»çº¿ç¨‹</li>\n<li>AsyncTaskï¼šè§ä¸‹é¢ä¸€èŠ‚â€œAsyncTask çŸ¥è¯†ç‚¹â€</li>\n<li>IntentServiceï¼šè¿è¡Œåœ¨ç‹¬ç«‹çº¿ç¨‹çš„ Serviceï¼ŒåŸç†æ˜¯åˆ›å»ºä¸€ä¸ª HandlerThreadï¼Œç„¶ååœ¨ onStart æ—¶æŠŠæ¶ˆæ¯ä¸¢ç»™ Handler å¤„ç†</li>\n<li>ThreadPoolï¼šç”¨ Executorã€ThreadPoolExecutor æ¥ç®¡ç†çº¿ç¨‹</li>\n</ul>\n<h3 id=\"ç½‘ç»œä¼˜åŒ–\"><a href=\"#ç½‘ç»œä¼˜åŒ–\" class=\"headerlink\" title=\"ç½‘ç»œä¼˜åŒ–\"></a>ç½‘ç»œä¼˜åŒ–</h3><p>ç½‘ç»œä¼˜åŒ–ä¸»è¦æ˜¯ä»æ—¶é—´ã€é€Ÿåº¦ã€æˆåŠŸç‡å‡ ä¸ªè§’åº¦æ¥è¿›è¡Œï¼Œå¯¹äºæé«˜é€Ÿåº¦ï¼Œæ¯”è¾ƒå…¸å‹çš„æ˜¯è¯·æ±‚å›¾ç‰‡çš„åœºæ™¯</p>\n<ul>\n<li>ä½¿ç”¨WebPæ ¼å¼ï¼Œèƒ½æ¯” JPG èŠ‚çº¦25%ï½35%çš„æµé‡ï¼Œæ¯” PNG èŠ‚çº¦80%æµé‡</li>\n<li>ä½¿ç”¨ç¼©ç•¥å›¾</li>\n</ul>\n<p>å¦å¤–ä¸€äº›ç½‘ç»œä¼˜åŒ–çš„çŸ¥è¯†ç‚¹</p>\n<ul>\n<li>å¯¹ç½‘ç»œè¯·æ±‚è¿›è¡Œç¼“å­˜ï¼Œè‹¥è¯·æ±‚æ•°æ®ä»åœ¨æœ‰æ•ˆæœŸå†…åˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸èµ°ç½‘ç»œ</li>\n<li>å‡å°‘ GPS å®šä½ä½¿ç”¨ï¼Œæ¡ä»¶å…è®¸åˆ™å¤šç”¨ç½‘ç»œå®šä½</li>\n<li>ä¸‹è½½è¿‡ç¨‹ä¸­ä½¿ç”¨æ–­ç‚¹ç»­ä¼ </li>\n<li>åˆ·æ–°æ•°æ®æ—¶é‡‡ç”¨å±€éƒ¨åˆ·æ–°ï¼Œå°‘ç”¨å…¨å±€åˆ·æ–°</li>\n</ul>\n<h2 id=\"ç”µé‡ä¼˜åŒ–\"><a href=\"#ç”µé‡ä¼˜åŒ–\" class=\"headerlink\" title=\"ç”µé‡ä¼˜åŒ–\"></a>ç”µé‡ä¼˜åŒ–</h2><ul>\n<li>éœ€è¦è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œå…ˆåˆ¤æ–­ç½‘ç»œå½“å‰çŠ¶æ€</li>\n<li>æ‰¹é‡å¤„ç†ç½‘ç»œè¯·æ±‚</li>\n<li>åœ¨åŒæ—¶æœ‰wifiå’Œç§»åŠ¨æ•°æ®çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ç›´æ¥å±è”½ç§»åŠ¨æ•°æ®çš„ç½‘ç»œè¯·æ±‚</li>\n<li>å‡å°‘åå°ä»»åŠ¡</li>\n</ul>\n<h2 id=\"å¯åŠ¨ä¼˜åŒ–\"><a href=\"#å¯åŠ¨ä¼˜åŒ–\" class=\"headerlink\" title=\"å¯åŠ¨ä¼˜åŒ–\"></a>å¯åŠ¨ä¼˜åŒ–</h2><p>æ ¹æ®åº”ç”¨å¯åŠ¨æ—¶å€™çš„çŠ¶æ€ï¼Œå¯ä»¥åˆ†ä¸ºå†·å¯åŠ¨ã€çƒ­å¯åŠ¨ã€æš–å¯åŠ¨ä¸‰ç§ï¼Œå…¶ä¸­å†·å¯åŠ¨çš„è€—æ—¶æœ€é•¿ï¼Œå¯¹ç”¨æˆ·ä½“éªŒå½±å“æœ€å¤§ï¼Œå› æ­¤è°ˆå¯åŠ¨ä¼˜åŒ–ä¸»è¦æ˜¯ä»å†·å¯åŠ¨çš„è§’åº¦ç»™å‡ºä¼˜åŒ–å»ºè®®ã€‚</p>\n<p>å†·å¯åŠ¨åˆå§‹æ—¶ï¼Œç³»ç»Ÿå®Œæˆä¸‰ä¸ªä»»åŠ¡</p>\n<ol>\n<li>å¯åŠ¨å’ŒåŠ è½½åº”ç”¨</li>\n<li>åˆ›å»ºåº”ç”¨è¿›ç¨‹</li>\n<li>æ˜¾ç¤ºå¯åŠ¨è§†å›¾ï¼ˆç™½å±ï¼‰</li>\n</ol>\n<p>å½“åº”ç”¨è¿›ç¨‹åˆ›å»ºå®Œæ¯•åï¼Œå¼€å§‹åˆ›å»ºåº”ç”¨</p>\n<ol>\n<li>åˆ›å»ºåº”ç”¨å¯¹è±¡</li>\n<li>å¯åŠ¨ä¸»çº¿ç¨‹ (MainThread)</li>\n<li>åˆ›å»º Main Activity</li>\n<li>åŠ è½½è§†å›¾ (Inflating views)</li>\n<li>æ¸²æŸ“å¸ƒå±€ (Laying out)</li>\n<li>æ‰§è¡Œåˆå§‹ç»˜åˆ¶</li>\n</ol>\n<p>å†·å¯åŠ¨ä¼˜åŒ–</p>\n<ul>\n<li>å‡å°‘é¦–é¡µä½¿ç”¨çš„èµ„æºï¼Œæ‡’åŠ è½½</li>\n<li>ä¼˜åŒ–é¦–é¡µå¸ƒå±€ï¼Œå‡å°‘å±‚çº§ï¼Œä¸ç»˜åˆ¶ä¸å¯è§çš„ UIï¼Œè€Œæ˜¯ä½¿ç”¨ ViewStub å¯¹è±¡åœ¨é€‚å½“çš„æ—¶é—´å¸ƒå±€ç»˜åˆ¶</li>\n<li>åœ¨é—ªå±é¡µï¼ˆFragmentï¼‰é¢„å…ˆåŠ è½½</li>\n</ul>\n<h1 id=\"AsyncTask-çŸ¥è¯†ç‚¹\"><a href=\"#AsyncTask-çŸ¥è¯†ç‚¹\" class=\"headerlink\" title=\"AsyncTask çŸ¥è¯†ç‚¹\"></a>AsyncTask çŸ¥è¯†ç‚¹</h1><h2 id=\"æ˜¯ä»€ä¹ˆ\"><a href=\"#æ˜¯ä»€ä¹ˆ\" class=\"headerlink\" title=\"æ˜¯ä»€ä¹ˆ\"></a>æ˜¯ä»€ä¹ˆ</h2><p>æ˜¯ä¸ºäº†è§£å†³ UI çº¿ç¨‹æ— æ³•è¿›è¡Œè€—æ—¶æ“ä½œçš„é—®é¢˜è€Œåº”ç”¨çš„ä¸€ç§ APIï¼Œé€šå¸¸å¤„ç†çŸ­æ—¶è€—æ—¶ä»»åŠ¡ï¼ˆé•¿æ—¶ä»»åŠ¡å»ºè®®ä½¿ç”¨ Executorã€ThreadPoolExecutorã€FutureTaskï¼‰ï¼Œæœ‰å››ä¸ªæ–¹æ³•éœ€è¦è¦†ç›–</p>\n<ul>\n<li>onPreExecute()ï¼Œåœ¨ UI çº¿ç¨‹è°ƒç”¨ï¼Œè¿›è¡Œä»»åŠ¡è¿è¡Œå‰çš„å‡†å¤‡å·¥ä½œ</li>\n<li>doInBackground(Paramsâ€¦)ï¼Œåœ¨åå°çº¿ç¨‹è¿è¡Œï¼Œè¯»å– execute ä¼ æ¥çš„å‚æ•°ï¼Œè¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥é€šè¿‡ publishProgress(Progressâ€¦) æ¥å‘å¸ƒè¿›åº¦ä¿¡æ¯ï¼Œè¿›åº¦ä¿¡æ¯ä¼šä»¥ onProgressUpdate(Progressâ€¦) å›è°ƒçš„æ–¹å¼é€šçŸ¥ UI çº¿ç¨‹</li>\n<li>onProgressUpdate(Progressâ€¦)ï¼Œåœ¨ UI çº¿ç¨‹è°ƒç”¨ï¼Œæ¥æ”¶è¿›åº¦ä¿¡æ¯</li>\n<li>onPostExecute(Result)ï¼Œåœ¨ UI çº¿ç¨‹è°ƒç”¨ï¼Œæ¥å—ä»»åŠ¡è¿è¡Œç»“æœ</li>\n</ul>\n<h2 id=\"å˜æ›´å†å²\"><a href=\"#å˜æ›´å†å²\" class=\"headerlink\" title=\"å˜æ›´å†å²\"></a>å˜æ›´å†å²</h2><ul>\n<li>æœ€åˆé—®ä¸–ï¼Œé‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼Œæ‰€æœ‰ä»»åŠ¡ä¸²è¡Œæ‰§è¡Œ</li>\n<li>DONUTï¼ˆ1.6ï¼‰ï¼Œé‡‡ç”¨çº¿ç¨‹æ± æ¨¡å‹ï¼Œå¹¶å‘è¿è¡Œ</li>\n<li>HONEYCOMBï¼ˆ3.0ï¼‰ï¼Œåˆæ”¹å›å•çº¿ç¨‹æ¨¡å‹ï¼Œä¸ºäº†ç®€åŒ–ä½¿ç”¨ï¼Œé¿å…å¹¶å‘å¸¦æ¥çš„åŒæ­¥é—®é¢˜</li>\n</ul>\n<h2 id=\"å†…éƒ¨åŸç†ï¼ˆAPI-26ï¼‰\"><a href=\"#å†…éƒ¨åŸç†ï¼ˆAPI-26ï¼‰\" class=\"headerlink\" title=\"å†…éƒ¨åŸç†ï¼ˆAPI 26ï¼‰\"></a>å†…éƒ¨åŸç†ï¼ˆAPI 26ï¼‰</h2><ol>\n<li>AsyncTask æ— å‚æ„é€ å‡½æ•°é‡Œä¼šåˆ›å»ºä¸€ä¸ªä»»åŠ¡å¯¹è±¡ mWorkerï¼ˆåœ¨å…¶ä¸­æ‰§è¡Œ doInBackgroundï¼‰ï¼Œä¸€ä¸ªä»»åŠ¡å®Œæˆå›è°ƒå¯¹è±¡ mFutureï¼ŒåŒæ—¶è·å–åˆ° UI çº¿ç¨‹çš„ Looperï¼Œç”¨æ¥åœ¨ä»»åŠ¡å®Œæˆåé€šçŸ¥ UI çº¿ç¨‹</li>\n<li>ç»´æŠ¤å•ä¾‹ SERIAL_EXECUTORï¼Œç”¨æ¥ä¸²è¡Œæ‰§è¡Œä»»åŠ¡</li>\n<li>è°ƒç”¨ AsyncTask.execute æ—¶ï¼Œä¼šè¿›å…¥ executeOnExecutor æ–¹æ³•ï¼Œåœ¨å…¶å†…éƒ¨å…ˆè°ƒç”¨ onPreExecuteï¼Œç„¶åé€šè¿‡ executor è¿è¡Œ mWorkerï¼Œç”± SERIAL_EXECUTOR ä¿è¯äº†ä¸²è¡Œè¿è¡Œï¼ŒçœŸæ­£è¿è¡Œä»»åŠ¡çš„æ˜¯ THREAD_POOL_EXECUTOR</li>\n<li>åœ¨ä»»åŠ¡å®Œæˆåï¼Œé€šè¿‡ UI çº¿ç¨‹çš„ Looper é€šçŸ¥ UI çº¿ç¨‹</li>\n</ol>\n<h1 id=\"ä¸€ä¸ªå…³äºç±»çš„é™æ€å˜é‡å½’å±çš„é—®é¢˜\"><a href=\"#ä¸€ä¸ªå…³äºç±»çš„é™æ€å˜é‡å½’å±çš„é—®é¢˜\" class=\"headerlink\" title=\"ä¸€ä¸ªå…³äºç±»çš„é™æ€å˜é‡å½’å±çš„é—®é¢˜\"></a>ä¸€ä¸ªå…³äºç±»çš„é™æ€å˜é‡å½’å±çš„é—®é¢˜</h1><p>çˆ¶ç±»æœ‰ä¸€ä¸ª protected çš„é™æ€å˜é‡ fooï¼ŒåŸºäºçˆ¶ç±» A åˆ›å»ºä¸¤ä¸ªå­ç±» B1 å’Œ B2</p>\n<ul>\n<li>å¦‚æœ B1 å’Œ B2 ä¸å£°æ˜å˜é‡ fooï¼Œé‚£ä¹ˆå®ƒä»¬ä½¿ç”¨çš„ foo æ˜¯åŒä¸€ä¸ªï¼Œæ¥è‡ªçˆ¶ç±» A</li>\n<li>å¦‚æœ B1 å’Œ B2 éƒ½å£°æ˜å˜é‡ fooï¼Œé‚£ä¹ˆå®ƒä»¬ä½¿ç”¨å„è‡ªçš„å˜é‡</li>\n</ul>\n<p>ç®€å•æ¦‚æ‹¬å°±æ˜¯è¯´é™æ€å˜é‡ä¸ç±»ç»‘å®šï¼Œdemo å¦‚ä¸‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// case 1</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> foo = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B1</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B2</span> <span class=\"keyword\">extends</span> <span class=\"title\">B</span> </span>&#123;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\tA b1 = <span class=\"keyword\">new</span> B1();</span><br><span class=\"line\">\tA b2 = <span class=\"keyword\">new</span> B2();</span><br><span class=\"line\">\tSystem.out.println(<span class=\"string\">\"b1.foo = \"</span> + b1.foo + <span class=\"string\">\"&amp; b2.foo = \"</span> + b2.foo); <span class=\"comment\">// b1.foo = 0 &amp; b2.foo = 0</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// case 2</span></span><br><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">protected</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> foo = <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B1</span> <span class=\"keyword\">extends</span> <span class=\"title\">A</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">int</span> foo = <span class=\"number\">100</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">B2</span> <span class=\"keyword\">extends</span> <span class=\"title\">B</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">int</span> foo = <span class=\"number\">200</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] args)</span> </span>&#123;</span><br><span class=\"line\">\tA b1 = <span class=\"keyword\">new</span> B1();</span><br><span class=\"line\">\tA b2 = <span class=\"keyword\">new</span> B2();</span><br><span class=\"line\">\tSystem.out.println(<span class=\"string\">\"b1.foo = \"</span> + b1.foo + <span class=\"string\">\"&amp; b2.foo = \"</span> + b2.foo); <span class=\"comment\">// b1.foo = 100 &amp; b2.foo = 200</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n","categories":[],"tags":["Android","é¢è¯•"]},{"title":"ç¾å›¢æŠ€æœ¯æ²™é¾™ç¬¬39æœŸï¼šæ–°æ€è·¯æ‰“é€ ç§»åŠ¨ç«¯é«˜æ•ˆç ”å‘ä½“ç³» å°è®°","url":"https://lilei.pro/2018/07/21/dianping-meituan-mobile-share-0721/","content":"<blockquote>\n<p>å¶ç„¶åœ¨ç¾å›¢æŠ€æœ¯å›¢é˜Ÿå…¬ä¼—å·é‡Œçœ‹åˆ°æœ‰è¿™ä¸ªåˆ†äº«ï¼Œä¸»è®²äººæ˜¯å‘¨è¾‰ã€è™æƒ æ–‡ã€è’‹å›½å®ç­‰äººï¼Œå†…å®¹åŸºæœ¬ä¸Šæ˜¯ç§»åŠ¨ç ”å‘ä¸“åœºï¼Œé‚è¿‡æ¥å‡‘ä¸ªçƒ­é—¹ã€‚æ—¶é—´æ˜¯7æœˆ21æ—¥13:30~17:30ï¼Œåœ°ç‚¹ç”°æ—è·¯200å·åé‘«å¤©åœ°</p>\n</blockquote>\n<h1 id=\"æ—¶é—´è¡¨\"><a href=\"#æ—¶é—´è¡¨\" class=\"headerlink\" title=\"æ—¶é—´è¡¨\"></a>æ—¶é—´è¡¨</h1><table>\n<thead>\n<tr>\n<th>å†…å®¹</th>\n<th>ä¸»è®²äºº</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Picassoåœ¨å¤§ä¼—ç‚¹è¯„é¦–é¡µçš„åº”ç”¨</td>\n<td>è™æƒ æ–‡@ç¾å›¢Androidå¼€å‘å·¥ç¨‹å¸ˆ</td>\n</tr>\n<tr>\n<td>ç§»åŠ¨å‰åç«¯å¼€å‘è§£è€¦</td>\n<td>æ—æ™¨@ç¾å›¢åç«¯æŠ€æœ¯ä¸“å®¶</td>\n</tr>\n<tr>\n<td>æ‰“é€ ç¨³å®šã€çµæ´»ã€é«˜æ•ˆçš„è¿è¥é…ç½®å¹³å°</td>\n<td>è’‹å›½å®@ç¾å›¢åç«¯æŠ€æœ¯æ¶æ„å¸ˆ</td>\n</tr>\n<tr>\n<td>ç§»åŠ¨æŒç»­é›†æˆå®è·µ</td>\n<td>ä½•æ™ºèª@ç¾å›¢iOSæŠ€æœ¯ä¸“å®¶</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h1><p>13:44ï¼Œè¿˜æœªå¼€å§‹ï¼Œå…¨æ˜¯å¹´è½»çš„è„¸åºï¼Œæœªè§æ•…äººã€‚å¤§æ¦‚æ•…äººä»¬ä¸å±‘äºè¿™ç§ç¨‹åº¦çš„æŠ€æœ¯åˆ†äº«å§ï¼Œä»–ä»¬å°±ç®—æ¥ï¼Œä¹Ÿåº”è¯¥æ˜¯ç«™åœ¨è®²å°ä¸Šï¼Œè€Œéå¬ä¼—å¸­ã€‚</p>\n<h1 id=\"å‘¨æ ¡é•¿å¼€åœºè¯\"><a href=\"#å‘¨æ ¡é•¿å¼€åœºè¯\" class=\"headerlink\" title=\"å‘¨æ ¡é•¿å¼€åœºè¯\"></a>å‘¨æ ¡é•¿å¼€åœºè¯</h1><p>ä»‹ç»äº†ä¸€ä¸‹ç›®å‰å¤§ä¼—ç‚¹è¯„ç§»åŠ¨å›¢é˜Ÿçš„è§„æ¨¡å’Œä¸šåŠ¡å†…å®¹ï¼Œbase åœ¨ä¸Šæµ·ï¼Œ100 äººã€‚æ›¾ç»è‡ªå·±ä¹Ÿæ˜¯è¿™ä¸ªå›¢é˜Ÿçš„ä¸€å‘˜ï¼Œæƒ³æƒ³ç«Ÿæœ‰äº›å”å˜˜ã€‚</p>\n<h1 id=\"Picasso-åœ¨å¤§ä¼—ç‚¹è¯„é¦–é¡µçš„åº”ç”¨\"><a href=\"#Picasso-åœ¨å¤§ä¼—ç‚¹è¯„é¦–é¡µçš„åº”ç”¨\" class=\"headerlink\" title=\"Picasso åœ¨å¤§ä¼—ç‚¹è¯„é¦–é¡µçš„åº”ç”¨\"></a>Picasso åœ¨å¤§ä¼—ç‚¹è¯„é¦–é¡µçš„åº”ç”¨</h1><h2 id=\"ç—›ç‚¹\"><a href=\"#ç—›ç‚¹\" class=\"headerlink\" title=\"ç—›ç‚¹\"></a>ç—›ç‚¹</h2><p>é¦–é¡µæ”¹ç‰ˆå¤šæ˜¯è§†è§‰å˜æ›´ï¼Œéœ€è¦å¿«é€Ÿä¸Šçº¿éªŒè¯ï¼Œç„¶è€Œä¼ ç»Ÿçš„å¼€å‘å‘å¸ƒæµç¨‹å¤ªè¿Ÿæ»ï¼Œéš¾ä»¥å®æ—¶çœ‹åˆ°æ•ˆæœã€‚ä¾‹å¦‚ï¼Œé¦–é¡µåä¸ªé‡‘åˆšä½å…¥å£ï¼Œéœ€è¦è°ƒæ•´å…¶ä¸­æŸä¸€ä¸ªï¼Œæ›´æ¢å›¾æ ‡ã€æ–‡å­—ã€è§’æ ‡ï¼Œå¹¶ä¸”å¿«é€ŸéªŒè¯ï¼Œå€˜è‹¥èµ°ä¼ ç»Ÿçš„â€œå¼€å‘-æµ‹è¯•-å‘å¸ƒâ€æµç¨‹ï¼Œæ˜¾ç„¶ä¸èƒ½æ»¡è¶³äº§å“ç»ç†â€œè¶Šå¿«çœ‹åˆ°æ•ˆæœè¶Šå¥½â€çš„éœ€æ±‚ã€‚è¿™æ˜¯å°±éœ€è¦æœ‰ä¸€ä¸ªåŠ¨æ€åŒ–æ¡†æ¶ï¼Œæ”¯æŒå®æ—¶å¯¹è¿™äº›è¿›è¡Œä¿®æ”¹ã€‚</p>\n<h2 id=\"æŠ€æœ¯éœ€æ±‚\"><a href=\"#æŠ€æœ¯éœ€æ±‚\" class=\"headerlink\" title=\"æŠ€æœ¯éœ€æ±‚\"></a>æŠ€æœ¯éœ€æ±‚</h2><ul>\n<li>éœ€è¦ä¸€ä¸ªåŠ¨æ€åŒ–æ¡†æ¶ï¼Œåœ¨è¿è¡Œæ—¶å†³å®šéœ€è¦å±•ç¤ºçš„å†…å®¹ã€‚</li>\n<li>æ€§èƒ½è¾¾åˆ° Native æ°´å‡†</li>\n</ul>\n<h2 id=\"å®è·µ\"><a href=\"#å®è·µ\" class=\"headerlink\" title=\"å®è·µ\"></a>å®è·µ</h2><p>è¿›è¡Œè®¾è®¡çš„æ—¶å€™ï¼Œæ²¡æœ‰é€‰æ‹© RNï¼ŒåŸå› å¦‚ä¸‹</p>\n<ol>\n<li>ç¨³å®šæ€§å·®</li>\n<li>æŠ€æœ¯æ ˆåˆ‡æ¢æˆæœ¬é«˜</li>\n<li>åŒç«¯ä¸å¯¹é½ï¼ŒæŸäº›ç‰¹æ€§åªæ”¯æŒå•ç«¯</li>\n</ol>\n<p>æ‰€é‡‡å–çš„è®¾è®¡æ€è·¯æ˜¯â€œæœåŠ¡ç«¯ä¸‹å‘æ•°æ®ï¼ˆdataï¼‰å’Œè§†å›¾è§„åˆ™ï¼ˆlayoutï¼‰â€ï¼Œdata å’Œ layout ä¼šè¢«è®¡ç®—æˆ PModelï¼Œå…¶ä¸­åŒ…å«äº†è¯¥è§†å›¾è¢«æ¸²æŸ“è‡³å±å¹•ä¸Šçš„å…¨éƒ¨ä¿¡æ¯ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180721_dp_mobile/DP_Picasso.png\" alt=\"Picassoæ„æ€\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Picassoæ„æ€</div>\n            </figure>\n<p>åŒæ—¶é‡‡ç”¨é¢„è®¡ç®—&amp;ç¼“å­˜ï¼Œé™ä½ç»˜åˆ¶æ—¶çš„å¼€é”€ï¼Œæé«˜ç»˜åˆ¶é€Ÿåº¦ã€‚</p>\n<p>é¢„è®¡ç®—æ˜¯æŒ‡ PModel åŒ…å«äº†è¯¥è§†å›¾æ‰€æœ‰å°ºå¯¸ä¿¡æ¯ï¼Œåœ¨éšåæ¸²æŸ“è¿‡ç¨‹ä¸­çš„ measure å’Œ layout è¿™ä¸¤æ­¥ç›´æ¥å–ç”¨è¿™äº›ä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å†æ¬¡è®¡ç®—ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180721_dp_mobile/DP_Picasso_PreCalc.png\" alt=\"é¢„è®¡ç®—\" title=\"\">\n                </div>\n                <div class=\"image-caption\">é¢„è®¡ç®—</div>\n            </figure>\n<p>ç¼“å­˜æ˜¯æŒ‡ç¼“å­˜äº† PModelï¼Œè€Œé Dataï¼ˆéœ€è¦å†æ¬¡è®¡ç®— PModelï¼‰</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180721_dp_mobile/DP_Picasso_Cache.png\" alt=\"ç¼“å­˜\" title=\"\">\n                </div>\n                <div class=\"image-caption\">ç¼“å­˜</div>\n            </figure>\n<h1 id=\"ç§»åŠ¨å¼€å‘å‰åç«¯è§£è€¦å®è·µ\"><a href=\"#ç§»åŠ¨å¼€å‘å‰åç«¯è§£è€¦å®è·µ\" class=\"headerlink\" title=\"ç§»åŠ¨å¼€å‘å‰åç«¯è§£è€¦å®è·µ\"></a>ç§»åŠ¨å¼€å‘å‰åç«¯è§£è€¦å®è·µ</h1><blockquote>\n<p>ä¸»è¦ä»‹ç»äº†ç‚¹è¯„å†…éƒ¨åœ¨å‰åç«¯å¼€å‘è”è°ƒæµ‹è¯•è¿‡ç¨‹ä¸­ä½¿ç”¨çš„å‡ ä¸ªå·¥å…·ï¼Œä¸»è¦æ˜¯ AppMockï¼ˆå‰èº«æ˜¯ wendong.dpï¼‰ã€ç§»åŠ¨ä¹‹å®¶ã€‚çš„ç¡®æœ‰äº†è¿™äº›å·¥å…·ï¼Œå¯¹äºç§»åŠ¨ç«¯å¼€å‘çš„åŒå­¦æ¥è¯´æ˜¯æå¤§çš„ç¦éŸ³ï¼Œç¦»å¼€ç‚¹è¯„ä¹‹åæ·±æ„Ÿå¦‚æ­¤ã€‚</p>\n</blockquote>\n<h2 id=\"ç—›ç‚¹-1\"><a href=\"#ç—›ç‚¹-1\" class=\"headerlink\" title=\"ç—›ç‚¹\"></a>ç—›ç‚¹</h2><ul>\n<li>æ¥å£ç®¡ç†å›°éš¾ â€”â€”â€”â€” é‚£ä¹ˆå¤šçš„æ¥å£å’Œæ•°æ®æ ¼å¼ï¼Œç”¨ä»€ä¹ˆç®¡ç†å‘¢ï¼ŸExcelæ–‡æ¡£ï¼ŸWikiï¼ŸèŠå¤©å·¥å…·ï¼Ÿä¸ä¸€è‡´æ€ä¹ˆåŠï¼Œå‡ºäº†é”…è°æ¥èƒŒï¼Ÿ</li>\n<li>ç§»åŠ¨ç«¯æ¥å£æ•°æ®é»‘ç›’ â€”â€”â€”â€” æƒ³è¦æŸ¥çœ‹æ¥å£æ•°æ®ï¼Œåªèƒ½å€ŸåŠ© Charles è¿™æ ·çš„ä»£ç†å·¥å…·ï¼Œä½¿ç”¨å¤æ‚ä¸è¯´ï¼Œè¿˜å‡ ä¹æ— æ³•è¿›è¡Œå®šåˆ¶ã€‚</li>\n<li>å‰åç«¯æ¥å£æ•°æ®ä¾èµ– â€”â€”â€”â€” çº¦å¥½è”è°ƒæ—¶é—´ï¼Œéš¾å…é‡åˆ°å„ç§æƒ…å†µå‘ç”Ÿ delayï¼Œæµ‹å¾—è¶Šæ™šï¼Œé£é™©è¶Šå¤§ã€‚</li>\n<li>æµ‹è¯•å·¥ä½œé‡ â€”â€”â€”â€” ç”Ÿæˆæµ‹è¯•æ•°æ®ä¸ä»…ç´¯çš„ä¸€æ‰¹ï¼Œè¿˜æ¯«æ— æˆå°±æ„Ÿã€‚</li>\n</ul>\n<h2 id=\"æ¥å£ç®¡ç†å›°éš¾\"><a href=\"#æ¥å£ç®¡ç†å›°éš¾\" class=\"headerlink\" title=\"æ¥å£ç®¡ç†å›°éš¾\"></a>æ¥å£ç®¡ç†å›°éš¾</h2><ul>\n<li>æ¥å£æ•°æ®æ¨¡å‹åŒ–</li>\n<li>æ¥å£æ›´æ–°å¯é€šçŸ¥</li>\n<li>æ¥å£å¤šç»´åº¦ç®¡ç†</li>\n</ul>\n<p>é€šè¿‡â€œç§»åŠ¨ä¹‹å®¶ï¼ˆmobile.dpï¼‰â€è¿›è¡Œæ¥å£æ³¨å†Œï¼Œæ³¨å†Œè¿‡ç¨‹ä¸­éœ€è¦æ˜ç¡®æ ‡æ˜æ¥å£æ•°æ®ç»“æ„å’Œç±»å‹ï¼Œæ³¨å†Œå®Œæˆä¹‹åï¼Œä¼šæœ‰ä»£ç è‡ªåŠ¨ç”Ÿæˆå·¥å…·ç”Ÿæˆå¯¹åº”å¹³å°ï¼ˆWebã€Appã€Serverï¼‰çš„ä»£ç ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180721_dp_mobile/DP_è‡ªåŠ¨ç”Ÿæˆæ¥å£ä»£ç .png\" alt=\"è‡ªåŠ¨ç”Ÿæˆæ¥å£ä»£ç \" title=\"\">\n                </div>\n                <div class=\"image-caption\">è‡ªåŠ¨ç”Ÿæˆæ¥å£ä»£ç </div>\n            </figure>\n<h2 id=\"å‰åç«¯äº¤äº’é»‘ç›’\"><a href=\"#å‰åç«¯äº¤äº’é»‘ç›’\" class=\"headerlink\" title=\"å‰åç«¯äº¤äº’é»‘ç›’\"></a>å‰åç«¯äº¤äº’é»‘ç›’</h2><p>ç”±äºç½‘ç»œç¯å¢ƒå¤æ‚ï¼ˆ3Gã€4Gã€WIFIï¼‰ï¼ŒåŠ ä¸Šæ•°æ®é€šå¸¸æœ‰åŠ å¯†åºåˆ—åŒ–ï¼Œæƒ³è¦å®æ—¶æŸ¥çœ‹æ¥å£æ•°æ®ä¿¡æ¯é€šå¸¸è¦å¤§è´¹å‘¨ç« ã€‚è¿™é‡Œä»‹ç»äº† AppMock çš„ä¸»è¦åŠŸèƒ½å’ŒåŸç†ï¼Œæ˜¯åœ¨ APP çš„ç½‘ç»œå±‚å¯¹è¯·æ±‚è¿›è¡Œé‡å®šå‘ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180721_dp_mobile/DP_APPMOCK.png\" alt=\"AppMock\" title=\"\">\n                </div>\n                <div class=\"image-caption\">AppMock</div>\n            </figure>\n<h2 id=\"å‰åç«¯æ¥å£å’Œæ•°æ®ä¾èµ–\"><a href=\"#å‰åç«¯æ¥å£å’Œæ•°æ®ä¾èµ–\" class=\"headerlink\" title=\"å‰åç«¯æ¥å£å’Œæ•°æ®ä¾èµ–\"></a>å‰åç«¯æ¥å£å’Œæ•°æ®ä¾èµ–</h2><p>åç«¯åŒå­¦æµ‹è¯•æ¥å£ï¼šæä¾› APIReader å·¥å…·ï¼Œå¯ä»¥åœ¨ç½‘é¡µä¸­ç»„åˆå‚æ•°ï¼Œæ¨¡æ‹Ÿå®¢æˆ·ç«¯å‘é€è¯·æ±‚ï¼Œæµ‹è¯•åç«¯æ¥å£<br>å‰ç«¯åŒå­¦æµ‹è¯•åº”ç”¨ï¼šAppMock è‡ªåŠ¨ mock response</p>\n<h1 id=\"æµ‹è¯•å·¥ä½œé‡\"><a href=\"#æµ‹è¯•å·¥ä½œé‡\" class=\"headerlink\" title=\"æµ‹è¯•å·¥ä½œé‡\"></a>æµ‹è¯•å·¥ä½œé‡</h1><p>è‡ªåŠ¨åŒ–æµ‹è¯•(Appium) + è‡ªåŠ¨åŒ–Mockï¼ŒMock å·¥å…·å¯ä»¥å­˜å‚¨ç”¨ä¾‹ï¼Œè¿™éƒ¨åˆ†ä¸ç»†è®²ã€‚</p>\n<p>æœ€åæ˜¯ AppMock å’Œä¸šå†…ç±»ä¼¼å·¥å…·çš„å¯¹æ¯”</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180721_dp_mobile/DP_AppMockå¯¹æ¯”.png\" alt=\"å¯¹æ¯”\" title=\"\">\n                </div>\n                <div class=\"image-caption\">å¯¹æ¯”</div>\n            </figure>\n<h1 id=\"æ‰“é€ ç¨³å®šã€çµæ´»ã€é«˜æ•ˆçš„è¿è¥é…ç½®å¹³å°\"><a href=\"#æ‰“é€ ç¨³å®šã€çµæ´»ã€é«˜æ•ˆçš„è¿è¥é…ç½®å¹³å°\" class=\"headerlink\" title=\"æ‰“é€ ç¨³å®šã€çµæ´»ã€é«˜æ•ˆçš„è¿è¥é…ç½®å¹³å°\"></a>æ‰“é€ ç¨³å®šã€çµæ´»ã€é«˜æ•ˆçš„è¿è¥é…ç½®å¹³å°</h1><p>ç®€å•çš„è¯´å°±æ˜¯è®¾è®¡ä¸€ä¸ªâ€œå¯ä»¥è®¾è®¡æ˜¾ç¤ºè§„åˆ™â€çš„å¹³å°ï¼ŒåŒæ—¶è®¨è®ºäº†å¦‚ä½•æ»¡è¶³æµ‹è¯•åœºæ™¯ï¼ˆå»ºç«‹æµ‹è¯•ç”¨æˆ·åå•ï¼‰ã€å¦‚ä½•é™ä½ä¸­å¤®èŠ‚ç‚¹è´Ÿè½½ï¼ˆSDKæ–¹æ¡ˆï¼‰ã€‚</p>\n<h1 id=\"ç§»åŠ¨æŒç»­é›†æˆå®è·µ\"><a href=\"#ç§»åŠ¨æŒç»­é›†æˆå®è·µ\" class=\"headerlink\" title=\"ç§»åŠ¨æŒç»­é›†æˆå®è·µ\"></a>ç§»åŠ¨æŒç»­é›†æˆå®è·µ</h1><p>è¿™éƒ¨åˆ†æ²¡å¬ï¼Œç›´æ¥è·‘è·¯å»æ‰¾å«é¹å’Œå°å‡¡åƒå°é¾™è™¾å»äº†ã€‚</p>\n<h1 id=\"æ„Ÿå—\"><a href=\"#æ„Ÿå—\" class=\"headerlink\" title=\"æ„Ÿå—\"></a>æ„Ÿå—</h1><p>æœ‰é«˜å…´ä¹Ÿæœ‰æƒ‹æƒœï¼Œé«˜å…´çš„æ˜¯ï¼Œè‡ªå·±ä»2012å¹´åŠ å…¥å¤§ä¼—ç‚¹è¯„ï¼Œå½“å¹´é‚£ä¹ˆç”Ÿæ¶©çš„è‡ªå·±å¾—åˆ°äº†ä¸å°‘è€åŒäº‹çš„åŒ…å®¹å’Œå®½å®¥ï¼Œæœ‰äº›äººè™½ç„¶å†æœªè§åˆ°è¿‡ï¼Œä½†ä»–ä»¬æ‰€å¼€å‘å‡ºæ¥çš„ä¼˜ç§€å·¥å…·å´é€ ç¦äº†å¾ˆå¤šåŒäº‹ï¼Œèƒ½ä¸è¿™äº›äººå…±äº‹ï¼Œæ˜¯æˆ‘ä¸€ç”Ÿçš„è£å¹¸ï¼›åŒæ—¶ï¼Œåˆ†äº«ç°åœºè¿™ä¹ˆå¤šå¹´è½»æœæ°”çš„é¢å­”ï¼Œè¡¨æ˜ç‚¹è¯„å›¢é˜Ÿä¾ç„¶å……æ»¡äº†å¸å¼•åŠ›å’Œå·å¬åŠ›ã€‚æƒ‹æƒœçš„æ˜¯è‡ªå·±æ²¡æœ‰åœ¨ç‚¹è¯„çš„5å¹´é‡Œï¼Œå…¨åŠ›æ±²å–ä»–äººçš„å…»åˆ†ï¼Œç™½ç™½è¾œè´Ÿäº†è¿™ä¹ˆå¥½çš„åœŸå£¤ã€‚</p>\n<p>ç‚¹è¯„åªæ˜¯æˆ‘æ¯•ä¸šåçš„ç¬¬ä¸€æ‰€å¤§å­¦ï¼Œè€Œç¤¾ä¼šæ˜¯ç¬¬äºŒæ‰€ã€‚</p>\n<p>æœ›å„è‡ªå®‰å¥½ï¼Œä¸€åˆ«ä¸¤å®½ã€‚</p>\n","categories":[],"tags":["Android","ç‚¹è¯„"]},{"title":"é¢è¯•çŸ¥è¯†æ•´ç† 2018.07.09","url":"https://lilei.pro/2018/07/09/interview-180709/","content":"<h2 id=\"HashMap-å’Œ-HashTable-åŒºåˆ«\"><a href=\"#HashMap-å’Œ-HashTable-åŒºåˆ«\" class=\"headerlink\" title=\"HashMap å’Œ HashTable åŒºåˆ«\"></a>HashMap å’Œ HashTable åŒºåˆ«</h2><p>ç›¸åŒç‚¹</p>\n<ul>\n<li>éƒ½æ˜¯ä»¥ Key - Value çš„å½¢å¼å­˜æ”¾é”®å€¼å¯¹</li>\n</ul>\n<p>ä¸åŒç‚¹</p>\n<ul>\n<li>null æ”¯æŒï¼šHashMap å…è®¸ null key å’Œ null valueï¼ŒHashTable ä¸å…è®¸</li>\n<li>å¹¶å‘ç‰¹æ€§ï¼šHashMap çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼ŒHashTable çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½</li>\n<li>é»˜è®¤é•¿åº¦å’Œæ‰©å®¹æ–¹å¼ï¼šHashMap é»˜è®¤é•¿åº¦ 16ï¼Œæ‰©å®¹ 2nï¼ŒHashTable é»˜è®¤é•¿åº¦ 11ï¼Œæ‰©å®¹ 2n+1</li>\n<li>çˆ¶ç±»ï¼šHashMap çˆ¶ç±» AbstractMapï¼Œå…¶å­ç±»è¿˜æœ‰ ConcurrentHashMapã€LinkedHashMap ç­‰ï¼ŒHashTable çˆ¶ç±» Dictionaryï¼Œå­ç±»æœ‰ Properties</li>\n</ul>\n<p>ç»“è®º</p>\n<ul>\n<li>ä¸éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨ï¼Œç”¨ HashMap</li>\n<li>éœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨ï¼Œç”¨ ConcurrentHashMap</li>\n</ul>\n<h2 id=\"JVM-åƒåœ¾å›æ”¶æœºåˆ¶-GC\"><a href=\"#JVM-åƒåœ¾å›æ”¶æœºåˆ¶-GC\" class=\"headerlink\" title=\"JVM åƒåœ¾å›æ”¶æœºåˆ¶/GC\"></a>JVM åƒåœ¾å›æ”¶æœºåˆ¶/GC</h2><p>å«ä¹‰ï¼šç”± JVM è‡ªåŠ¨å›æ”¶é‚£äº›ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ¸…ç†å†…å­˜</p>\n<p>æ„ä¹‰ï¼šç¨‹åºå‘˜ä¸éœ€è¦äººå·¥ç®¡ç†å†…å­˜ï¼Œå‡å°‘å¼€å‘æˆæœ¬ï¼Œæé«˜å¼€å‘æ•ˆç‡</p>\n<h3 id=\"åŸºç¡€çŸ¥è¯†\"><a href=\"#åŸºç¡€çŸ¥è¯†\" class=\"headerlink\" title=\"åŸºç¡€çŸ¥è¯†\"></a>åŸºç¡€çŸ¥è¯†</h3><p>å¯¹è±¡å®ä¾‹å­˜åœ¨äº Java å †ä¸­</p>\n<p>Java ä¸­å¯¹å¯¹è±¡çš„å¼•ç”¨åˆ†æˆâ€œå¼ºè½¯å¼±è™šâ€</p>\n<ul>\n<li>å¼ºå¼•ç”¨ï¼Œæœ€æ™®éçš„å¼•ç”¨ï¼Œåªè¦æœ‰å¼ºå¼•ç”¨å­˜åœ¨ï¼Œå¯¹è±¡å°±ä¸ä¼šè¢«å›æ”¶</li>\n<li>è½¯å¼•ç”¨ï¼ŒSoftReferenceï¼Œå½“ GC æ—¶ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œä¼šè¢«å›æ”¶</li>\n<li>å¼±å¼•ç”¨ï¼ŒWeakReferenceï¼Œå½“ GC æ—¶ï¼Œä¸è®ºå†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½è¢«å›æ”¶</li>\n<li>è™šå¼•ç”¨ï¼ŒPhantomReferenceï¼Œä¸å½±å“å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨ä»»ä½•æ—¶åˆ»éƒ½å¯èƒ½è¢«å›æ”¶</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ReferenceDemo</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">main</span><span class=\"params\">(String[] arge)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//å¼ºå¼•ç”¨</span></span><br><span class=\"line\">        Object object = <span class=\"keyword\">new</span> Object();</span><br><span class=\"line\">        Object[] objects = <span class=\"keyword\">new</span> Object[<span class=\"number\">100</span>];</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//è½¯å¼•ç”¨</span></span><br><span class=\"line\">        SoftReference&lt;String&gt; stringSoftReference = <span class=\"keyword\">new</span> SoftReference&lt;&gt;(<span class=\"keyword\">new</span> String(<span class=\"string\">\"SoftReference\"</span>));</span><br><span class=\"line\">        System.out.println(stringSoftReference.get());</span><br><span class=\"line\">        System.gc();</span><br><span class=\"line\">        System.out.println(stringSoftReference.get()); <span class=\"comment\">//æ‰‹åŠ¨GC,è¿™æ—¶å†…å­˜å……è¶³,å¯¹è±¡æ²¡æœ‰è¢«å›æ”¶</span></span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//å¼±å¼•ç”¨</span></span><br><span class=\"line\">        WeakReference&lt;String&gt; stringWeakReference = <span class=\"keyword\">new</span> WeakReference&lt;&gt;(<span class=\"keyword\">new</span> String(<span class=\"string\">\"WeakReference\"</span>));</span><br><span class=\"line\">        System.out.println(stringWeakReference.get());</span><br><span class=\"line\">        System.gc();</span><br><span class=\"line\">        System.out.println(stringWeakReference.get()); <span class=\"comment\">//æ‰‹åŠ¨gc,è¿™æ—¶,è¿”å›null,å¯¹è±¡å·²ç»è¢«å›æ”¶</span></span><br><span class=\"line\"></span><br><span class=\"line\">        System.out.println();</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">//è™šå¼•ç”¨</span></span><br><span class=\"line\">        <span class=\"comment\">//è™šå¼•ç”¨ä¸»è¦ç”¨æ¥è·Ÿè¸ªå¯¹è±¡è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ´»åŠ¨ã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">//è™šå¼•ç”¨ä¸è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨çš„ä¸€ä¸ªåŒºåˆ«åœ¨äºï¼šè™šå¼•ç”¨å¿…é¡»å’Œå¼•ç”¨é˜Ÿåˆ— ï¼ˆReferenceQueueï¼‰è”åˆä½¿ç”¨ã€‚</span></span><br><span class=\"line\">        <span class=\"comment\">//å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰è™šå¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡çš„å†…å­˜ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªè™šå¼•ç”¨åŠ å…¥åˆ°ä¸ä¹‹ å…³è”çš„å¼•ç”¨é˜Ÿåˆ—ä¸­</span></span><br><span class=\"line\">        ReferenceQueue&lt;String&gt; stringReferenceQueue = <span class=\"keyword\">new</span> ReferenceQueue&lt;&gt;();</span><br><span class=\"line\">        PhantomReference&lt;String&gt; stringPhantomReference = <span class=\"keyword\">new</span> PhantomReference&lt;&gt;(<span class=\"keyword\">new</span> String(<span class=\"string\">\"PhantomReference\"</span>), stringReferenceQueue);</span><br><span class=\"line\">        System.out.println(stringPhantomReference.get());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"å¼•ç”¨è®¡æ•°å™¨\"><a href=\"#å¼•ç”¨è®¡æ•°å™¨\" class=\"headerlink\" title=\"å¼•ç”¨è®¡æ•°å™¨\"></a>å¼•ç”¨è®¡æ•°å™¨</h3><p>æ¯ä¸ªå¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œå½“å®ƒè¢«å¼•ç”¨æ—¶ï¼Œè®¡æ•°å™¨ +1ï¼Œå¼•ç”¨é‡Šæ”¾æ—¶ï¼Œè®¡æ•°å™¨ -1ï¼Œå½“è®¡æ•°å™¨ä¸º 0 æ—¶ï¼Œè¡¨ç¤ºå¯ä»¥å›æ”¶ã€‚</p>\n<p>å­˜åœ¨çš„é—®é¢˜æ˜¯å¾ªç¯å¼•ç”¨ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆå¼•å…¥äº†â€œå¯è¾¾æ€§â€ï¼ˆGC Roots Tracingï¼‰çš„æ¦‚å¿µï¼Œç›®å‰ä¸»æµçš„ JVM éƒ½é‡‡ç”¨äº†è¿™ç§è®¡æ•°ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯ä»æ ¹éƒ¨å¼€å§‹å‘ä¸‹æœç´¢ï¼Œå¦‚æœå¯¹è±¡æ— æ³•è¢«è§¦åŠï¼Œåˆ™è®¤ä¸ºæ˜¯å¯ä»¥å›æ”¶çš„ï¼Œè¿™ç§å¯¹è±¡ç§°ä¸ºâ€œä¸å¯è¾¾å¯¹è±¡â€ã€‚</p>\n<p>çœ‹ä¸€ä¸‹ JVM è¿è¡Œæ—¶çš„å†…å­˜ç»“æ„ï¼š</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/jvm.png\" alt=\"JVM\" title=\"\">\n                </div>\n                <div class=\"image-caption\">JVM</div>\n            </figure>\n<p>GC Roots åŒ…æ‹¬</p>\n<ul>\n<li>è™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§ä¸­çš„å¼•ç”¨å¯¹è±¡ï¼ˆæ¥è‡ªå±€éƒ¨å˜é‡è¡¨ï¼‰</li>\n<li>æ–¹æ³•åŒºé™æ€å±æ€§å®ä½“å¼•ç”¨çš„å¯¹è±¡</li>\n<li>æ–¹æ³•åŒºçš„å¸¸é‡å¼•ç”¨å¯¹è±¡</li>\n<li>æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNI å¼•ç”¨çš„å¯¹è±¡</li>\n<li>å­˜æ´» Thread å¼•ç”¨çš„å¯¹è±¡</li>\n</ul>\n<p>åœ¨æ ¹æœç´¢ç®—æ³•ä¸­ï¼Œè¦çœŸæ­£å®£å‘Šä¸€ä¸ªå¯¹è±¡æ­»äº¡ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹ï¼š</p>\n<ul>\n<li>å¦‚æœå¯¹è±¡åœ¨è¿›è¡Œæ ¹æœç´¢åå‘ç°æ²¡æœ‰ä¸ GC Roots ç›¸è¿æ¥çš„å¼•ç”¨é“¾ï¼Œé‚£å®ƒä¼šè¢«ç¬¬ä¸€æ¬¡æ ‡è®°å¹¶ä¸”è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰çš„æ¡ä»¶æ˜¯æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•</li>\n<li>å½“å¯¹è±¡æ²¡æœ‰è¦†ç›– finalize() æ–¹æ³•ï¼Œæˆ– finalize() æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œè™šæ‹Ÿæœºå°†è¿™ä¸¤ç§æƒ…å†µéƒ½è§†ä¸ºæ²¡æœ‰å¿…è¦æ‰§è¡Œ</li>\n<li>å¦‚æœè¯¥å¯¹è±¡è¢«åˆ¤å®šä¸ºæœ‰å¿…è¦æ‰§è¡Œ finalize() æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªåä¸º F-Queue é˜Ÿåˆ—ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€æ¡ç”±è™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½ä¼˜å…ˆçº§çš„ Finalizer çº¿ç¨‹å»æ‰§è¡Œ finalize() æ–¹æ³•</li>\n<li>finalize() æ–¹æ³•æ˜¯å¯¹è±¡é€ƒè„±æ­»äº¡å‘½è¿çš„æœ€åä¸€æ¬¡æœºä¼šï¼ˆå› ä¸ºä¸€ä¸ªå¯¹è±¡çš„finalize() æ–¹æ³•æœ€å¤šåªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼‰, ç¨åGCå°†å¯¹F-Queueä¸­çš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡å°è§„æ¨¡çš„æ ‡è®°ï¼Œå¦‚æœè¦åœ¨finalizeï¼ˆï¼‰æ–¹æ³•ä¸­æˆåŠŸæ‹¯æ•‘è‡ªå·±ï¼Œåªè¦åœ¨finalize() æ–¹æ³•ä¸­è®©è¯¥å¯¹è±¡é‡å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹å…³è”å³å¯ã€‚è€Œå¦‚æœå¯¹è±¡è¿™æ—¶è¿˜æ²¡æœ‰å…³è”åˆ°ä»»ä½•é“¾ä¸Šçš„å¼•ç”¨ï¼Œé‚£å®ƒå°±ä¼šè¢«å›æ”¶æ‰</li>\n</ul>\n<h3 id=\"åƒåœ¾æ”¶é›†ç®—æ³•\"><a href=\"#åƒåœ¾æ”¶é›†ç®—æ³•\" class=\"headerlink\" title=\"åƒåœ¾æ”¶é›†ç®—æ³•\"></a>åƒåœ¾æ”¶é›†ç®—æ³•</h3><h4 id=\"æ ‡è®°-æ¸…é™¤-ç®—æ³•\"><a href=\"#æ ‡è®°-æ¸…é™¤-ç®—æ³•\" class=\"headerlink\" title=\"æ ‡è®°-æ¸…é™¤ ç®—æ³•\"></a>æ ‡è®°-æ¸…é™¤ ç®—æ³•</h4><p>åˆ†ä¸ºâ€œæ ‡è®°â€å’Œâ€œæ¸…é™¤â€ä¸¤éƒ¨ï¼Œé¦–å…ˆæ ‡è®°å‡ºéœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œç„¶ååœ¨ç¬¬äºŒæ­¥æ¸…é™¤å®ƒä»¬ã€‚æ˜¯æœ€åŸºç¡€çš„å›æ”¶ç®—æ³•ï¼Œåç»­ç®—æ³•éƒ½æ˜¯åŸºäºå®ƒçš„åŸºç¡€ä¸Šè¿›è¡Œæ”¹è¿›ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/æ ‡è®°æ¸…é™¤.png\" alt=\"æ ‡è®°-æ¸…é™¤\" title=\"\">\n                </div>\n                <div class=\"image-caption\">æ ‡è®°-æ¸…é™¤</div>\n            </figure>\n<ul>\n<li>æ•ˆç‡é—®é¢˜ï¼šéœ€è¦ä¸¤æ¬¡æ‰«æ</li>\n<li>ç©ºé—´é—®é¢˜ï¼šäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡</li>\n</ul>\n<h4 id=\"å¤åˆ¶-ç®—æ³•\"><a href=\"#å¤åˆ¶-ç®—æ³•\" class=\"headerlink\" title=\"å¤åˆ¶ ç®—æ³•\"></a>å¤åˆ¶ ç®—æ³•</h4><p>å°†å¯ç”¨å†…å­˜å¹³å‡åˆ†ä¸º2å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“ä¸€å—å†…å­˜ä½¿ç”¨å®Œæˆåï¼Œå°†å­˜æ´»å¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€å—å†…å­˜ä¸­ï¼Œç„¶åæ¸…ç©ºã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/å¤åˆ¶.png\" alt=\"å¤åˆ¶\" title=\"\">\n                </div>\n                <div class=\"image-caption\">å¤åˆ¶</div>\n            </figure>\n<p>ä¼˜ç‚¹</p>\n<ul>\n<li>æ¯æ¬¡åªæ“ä½œä¸€å—å†…å­˜ï¼Œåˆ†é…æ—¶æ— éœ€è¦è€ƒè™‘å†…å­˜ç¢ç‰‡æƒ…å†µï¼Œåªç§»åŠ¨æŒ‡é’ˆå³å¯ï¼Œå®ç°ç®€å•ï¼Œè¿è¡Œé«˜æ•ˆ</li>\n</ul>\n<p>ç¼ºç‚¹</p>\n<ul>\n<li>åˆ©ç”¨ç‡é—®é¢˜ï¼šå¯ç”¨å†…å­˜å°‘äº†ä¸€åŠ</li>\n<li>æ•ˆç‡é—®é¢˜ï¼šè€ç”Ÿä»£å¯¹è±¡ç”±äºå­˜æ´»ç‡é«˜ï¼Œé¢‘ç¹å¤åˆ¶</li>\n</ul>\n<h4 id=\"æ ‡è®°-å‹ç¼©-ç®—æ³•\"><a href=\"#æ ‡è®°-å‹ç¼©-ç®—æ³•\" class=\"headerlink\" title=\"æ ‡è®°-å‹ç¼© ç®—æ³•\"></a>æ ‡è®°-å‹ç¼© ç®—æ³•</h4><p>æ ‡è®°åï¼Œå°†æ‰€æœ‰å­˜æ´»å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/æ ‡è®°å‹ç¼©.png\" alt=\"æ ‡è®°-å‹ç¼©\" title=\"\">\n                </div>\n                <div class=\"image-caption\">æ ‡è®°-å‹ç¼©</div>\n            </figure>\n<p>ä¼˜ç‚¹</p>\n<ul>\n<li>å¯¹äºè€å¹´ä»£ï¼Œä¼šé€æ¸ç§»åŠ¨åˆ°å¤´éƒ¨</li>\n</ul>\n<p>ç¼ºç‚¹</p>\n<ul>\n<li>æ–°ç”Ÿä»£å¯¹è±¡å¤šçš„è¯ï¼Œä¼šé¢‘ç¹ç§»åŠ¨</li>\n</ul>\n<h4 id=\"åˆ†ä»£æ”¶é›†-ç®—æ³•\"><a href=\"#åˆ†ä»£æ”¶é›†-ç®—æ³•\" class=\"headerlink\" title=\"åˆ†ä»£æ”¶é›† ç®—æ³•\"></a>åˆ†ä»£æ”¶é›† ç®—æ³•</h4><p>å¯¹æ–°ç”Ÿä»£é‡‡ç”¨å¤åˆ¶ç®—æ³•ï¼ˆMinor GCï¼‰ï¼Œè€å¹´ä»£é‡‡ç”¨æ ‡è®°å‹ç¼©ç®—æ³•ï¼ˆMajor GCï¼‰ï¼Œå…¨éƒ¨å›æ”¶ç§°ä¸º Full GCã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/åˆ†ä»£æ”¶é›†.png\" alt=\"åˆ†ä»£æ”¶é›†\" title=\"\">\n                </div>\n                <div class=\"image-caption\">åˆ†ä»£æ”¶é›†</div>\n            </figure>\n<ul>\n<li>å¹´è½»ä»£: æ˜¯æ‰€æœ‰æ–°å¯¹è±¡äº§ç”Ÿçš„åœ°æ–¹.å¹´è½»ä»£è¢«åˆ†ä¸º3ä¸ªéƒ¨åˆ†(EndenåŒºå’Œä¸¤ä¸ªSurvivoråŒº,ä¹Ÿå«Fromå’ŒTo),å½“EdenåŒºè¢«å¯¹è±¡å¡«æ»¡æ—¶,å°±ä¼šæ‰§è¡ŒMinor GC,å¹¶æŠŠæ‰€æœ‰å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡è½¬ç§»åˆ°å…¶ä¸­ä¸€ä¸ªsurvivoråŒº(Form),Minor GCåŒæ ·ä¼šæ£€æŸ¥å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡,å¹¶æŠŠå®ƒä»¬è½¬ç§»åˆ°å¦ä¸€ä¸ªsurvivoråŒº(To),è¿™æ ·åœ¨ä¸€æ®µæ—¶é—´å†…,æ€»ä¼šæœ‰ä¸€ä¸ªç©ºçš„survivoråŒº,ç»è¿‡å¤šæ¬¡GCå‘¨æœŸåï¼Œä»ç„¶å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡ä¼šè¢«è½¬ç§»åˆ°å¹´è€ä»£å†…å­˜ç©ºé—´,å¸¸è¿™æ˜¯åœ¨å¹´è½»ä»£æœ‰èµ„æ ¼æå‡åˆ°å¹´è€ä»£å‰é€šè¿‡è®¾å®šå¹´é¾„é˜ˆå€¼æ¥å®Œæˆçš„,éœ€è¦æ³¨æ„ï¼ŒSurvivorçš„ä¸¤ä¸ªåŒºæ˜¯å¯¹ç§°çš„,æ²¡å…ˆåå…³ç³»,fromå’Œtoæ˜¯ç›¸å¯¹çš„.</li>\n<li>è€å¹´ä»£: åœ¨å¹´è½»ä»£ä¸­ç»å†äº†Næ¬¡å›æ”¶åä»ç„¶æ²¡æœ‰è¢«æ¸…é™¤çš„å¯¹è±¡,å°±ä¼šè¢«æ”¾åˆ°å¹´è€ä»£ä¸­,éƒ½æ˜¯ç”Ÿå‘½å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡.å¯¹äºå¹´è€ä»£,åˆ™ä¼šæ‰§è¡ŒMajor GC,æ¥æ¸…ç†.åœ¨æŸäº›æƒ…å†µä¸‹,åˆ™ä¼šè§¦å‘Full GC,æ¥æ¸…ç†æ•´ä¸ªå †å†…å­˜</li>\n<li>å…ƒç©ºé—´: å †å¤–çš„ä¸€éƒ¨åˆ†å†…å­˜,é€šå¸¸ç›´æ¥ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿå†…å­˜,ç”¨äºå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ,ç­‰å†…å®¹,åƒåœ¾å›æ”¶å¯¹åº”å…ƒç©ºé—´æ¥è¯´æ²¡æœ‰æ˜æ˜¾çš„å½±å“</li>\n</ul>\n<h4 id=\"å‚è€ƒï¼šjvm-åƒåœ¾å›æ”¶\"><a href=\"#å‚è€ƒï¼šjvm-åƒåœ¾å›æ”¶\" class=\"headerlink\" title=\"å‚è€ƒï¼šjvm - åƒåœ¾å›æ”¶\"></a>å‚è€ƒï¼š<a href=\"https://my.oschina.net/wangkang80/blog/1559071\" target=\"_blank\" rel=\"noopener\">jvm - åƒåœ¾å›æ”¶</a></h4><h2 id=\"ä½¿ç”¨OkHttpåŒæ—¶å‘é€3ä¸ªè¯·æ±‚ï¼Œtokenè¿‡æœŸå¦‚ä½•å¤„ç†\"><a href=\"#ä½¿ç”¨OkHttpåŒæ—¶å‘é€3ä¸ªè¯·æ±‚ï¼Œtokenè¿‡æœŸå¦‚ä½•å¤„ç†\" class=\"headerlink\" title=\"ä½¿ç”¨OkHttpåŒæ—¶å‘é€3ä¸ªè¯·æ±‚ï¼Œtokenè¿‡æœŸå¦‚ä½•å¤„ç†\"></a>ä½¿ç”¨OkHttpåŒæ—¶å‘é€3ä¸ªè¯·æ±‚ï¼Œtokenè¿‡æœŸå¦‚ä½•å¤„ç†</h2><blockquote>\n<p>è¿™æ˜¯é¢è¯•å¨ä½©æ—¶çš„ä¸€é“é¢è¯•é¢˜</p>\n</blockquote>\n<p>è¿™ä¸å‘å‡ ä¸ªè¯·æ±‚æ— å…³ï¼Œè§£å†³é—®é¢˜çš„ç‚¹åœ¨äºå‘ç° token è¿‡æœŸåå¦‚ä½•è‡ªåŠ¨è·å– token å¹¶é‡å‘è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯ï¼Œ<strong>é™é»˜è‡ªåŠ¨ç™»å½•ï¼Œç„¶åç»§ç»­è¯·æ±‚</strong>ã€‚è§£å†³æ€è·¯æ˜¯åœ¨æ‹¦æˆªå™¨é“¾ä¸­å¢åŠ ä¸€ä¸ª TokenInterceptorï¼Œåˆ¤æ–­è¿”å›çŠ¶æ€æ˜¯å¦ä¸ºéªŒè¯å¤±æ•ˆã€‚</p>\n<ol>\n<li>å‘é€è¯·æ±‚ç»™æœåŠ¡ç«¯</li>\n<li>æ ¹æ®è¿”å›çŠ¶æ€ç åˆ¤æ–­æ˜¯å¦ token è¿‡æœŸ</li>\n<li>å¦‚æœè¿‡æœŸï¼Œåˆ™è°ƒå–åŒæ­¥æ¥å£è·å–æ–° token</li>\n<li>ä½¿ç”¨æ–° token å‘é€è¯·æ±‚</li>\n</ol>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">TokenInterceptor</span> <span class=\"keyword\">implements</span> <span class=\"title\">Interceptor</span> </span>&#123;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String TAG = <span class=\"string\">\"TokenInterceptor\"</span>;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"meta\">@Override</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> Response <span class=\"title\">intercept</span><span class=\"params\">(Chain chain)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    Request request = chain.request();</span><br><span class=\"line\">    Response response = chain.proceed(request);</span><br><span class=\"line\">    Log.d(TAG, <span class=\"string\">\"response.code=\"</span> + response.code());</span><br><span class=\"line\"> </span><br><span class=\"line\">    <span class=\"comment\">//æ ¹æ®å’ŒæœåŠ¡ç«¯çš„çº¦å®šåˆ¤æ–­tokenè¿‡æœŸ</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isTokenExpired(response)) &#123;</span><br><span class=\"line\">      Log.d(TAG, <span class=\"string\">\"è‡ªåŠ¨åˆ·æ–°Token,ç„¶åé‡æ–°è¯·æ±‚æ•°æ®\"</span>);</span><br><span class=\"line\">      <span class=\"comment\">//åŒæ­¥è¯·æ±‚æ–¹å¼ï¼Œè·å–æœ€æ–°çš„Token</span></span><br><span class=\"line\">      String newToken = getNewToken();</span><br><span class=\"line\">      <span class=\"comment\">//ä½¿ç”¨æ–°çš„Tokenï¼Œåˆ›å»ºæ–°çš„è¯·æ±‚</span></span><br><span class=\"line\">      Request newRequest = chain.request()</span><br><span class=\"line\">          .newBuilder()</span><br><span class=\"line\">          .header(<span class=\"string\">\"Authorization\"</span>, <span class=\"string\">\"Basic \"</span> + newToken)</span><br><span class=\"line\">          .build();</span><br><span class=\"line\">      <span class=\"comment\">//é‡æ–°è¯·æ±‚</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> chain.proceed(newRequest);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> response;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"comment\">// æ ¹æ®Responseï¼Œåˆ¤æ–­Tokenæ˜¯å¦å¤±æ•ˆ</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isTokenExpired</span><span class=\"params\">(Response response)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (response.code() == <span class=\"number\">301</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\">  <span class=\"comment\">// åŒæ­¥è¯·æ±‚æ–¹å¼ï¼Œè·å–æœ€æ–°çš„Token</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">getNewToken</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// é€šè¿‡è·å–tokençš„æ¥å£ï¼ŒåŒæ­¥è¯·æ±‚æ¥å£</span></span><br><span class=\"line\">    String newToken = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> newToken;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœæ˜¯é¢è¯•å®˜é—®çš„â€œä¸‰ä¸ªè¯·æ±‚åŒæ—¶å‘é€â€ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ token ä¸Šå¢åŠ ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œé€šè¿‡è¿™ä¸ªæ—¶é—´æˆ³å¯ä»¥åˆ¤æ–­è¯¥ token æ˜¯å¦ä¸ºæ›´æ–°è¿‡åçš„ã€‚é‚£ä¹ˆï¼Œåœ¨ Aã€Bã€C ä¸‰ä¸ªè¯·æ±‚åŒæ—¶å‘å‡ºæ—¶ï¼Œå½“ A å‘ç° token è¿‡æœŸå¹¶æ›´æ–° token åï¼ŒB å’Œ C å¯ä»¥è¯»å–æ–°çš„ token å‘é€è¯·æ±‚ï¼Œè€Œä¸å¿…å†å‘æœåŠ¡ç«¯è·å–æ–°çš„ tokenã€‚</p>\n<h3 id=\"ä¸€ç‚¹ç‚¹åæ€\"><a href=\"#ä¸€ç‚¹ç‚¹åæ€\" class=\"headerlink\" title=\"ä¸€ç‚¹ç‚¹åæ€\"></a>ä¸€ç‚¹ç‚¹åæ€</h3><p>é¢æœ‰èµçš„é‚£ä¸€å¤©è‡ªå·±åˆšåˆšæ’¸è¿‡ OkHttp çš„æºç ï¼Œè¿˜å†™äº†æ–‡å­—æ€»ç»“ï¼Œä½†æ˜¯è¢«é—®åˆ°è¿™é“é¢˜æ—¶ä»ç„¶ä¸€è„¸æ‡µé€¼ã€‚é—®é¢˜åœ¨äºå¯¹ OkHttp ä»¥ Interceptor ä¸ºæ ¸å¿ƒçš„æ ¹æœ¬æ€æƒ³æ²¡æœ‰æŠŠæ¡ï¼Œå…¶å®è¿™é“é¢˜æ˜¯ç¨å¾®æœ‰ä¸€ç‚¹å°èŠ±æ‹›ã€‚ä½é…ç‰ˆçš„é—®æ³•æ˜¯â€œå¦‚ä½•è§£å†³ token è¿‡æœŸâ€ï¼Œè¿™å°±å¾ˆå®¹æ˜“è”æƒ³åˆ° Interceptorï¼ˆå…¶å®ä¹Ÿä¸å®¹æ˜“ï¼‰ï¼Œé«˜é…ç‰ˆæ‰æ˜¯é—®â€œåŒæ—¶ä¸‰ä¸ªè¯·æ±‚â€ï¼Œéœ€è¦ç»“åˆåŒæ­¥æ¥è§£å†³ã€‚</p>\n<h3 id=\"å‚è€ƒ-Android-OkHttpå®ç°å…¨å±€è¿‡æœŸtokenè‡ªåŠ¨åˆ·æ–°ç¤ºä¾‹\"><a href=\"#å‚è€ƒ-Android-OkHttpå®ç°å…¨å±€è¿‡æœŸtokenè‡ªåŠ¨åˆ·æ–°ç¤ºä¾‹\" class=\"headerlink\" title=\"å‚è€ƒ Android OkHttpå®ç°å…¨å±€è¿‡æœŸtokenè‡ªåŠ¨åˆ·æ–°ç¤ºä¾‹\"></a>å‚è€ƒ <a href=\"https://www.jb51.net/article/137444.htm\" target=\"_blank\" rel=\"noopener\">Android OkHttpå®ç°å…¨å±€è¿‡æœŸtokenè‡ªåŠ¨åˆ·æ–°ç¤ºä¾‹</a></h3><h2 id=\"RecyclerView\"><a href=\"#RecyclerView\" class=\"headerlink\" title=\"RecyclerView\"></a>RecyclerView</h2><p>åŒæ ·æ˜¯å¨ä½©çš„é¢è¯•é¢˜</p>\n<blockquote>\n<p>The RecyclerView widget is a more advanced and flexible version of ListView.</p>\n</blockquote>\n<p>RecyclerView æ”¯æŒå¤šç§ Layoutï¼Œå¦‚ LinearLayoutã€GridLayoutã€‚ä½¿ç”¨ RecyclerView æ—¶éœ€è¦ç»§æ‰¿ RecyclerView.ViewHolder ç±»ï¼Œå¦‚æœæ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè°ƒç”¨ RecyclerView.Adapter.notifyâ€¦() æ–¹æ³•ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>\n<p>gradle</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dependencies &#123;</span><br><span class=\"line\">    implementation &apos;com.android.support:recyclerview-v7:27.1.1&apos;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¸ƒå±€æ–‡ä»¶ï¼Œæ²¡å•¥ç‰¹åˆ«çš„ï¼Œé™¤äº†éœ€è¦å£°æ˜ä¸€ä¸ª Scrollbar çš„æ–¹å‘</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span><br><span class=\"line\"><span class=\"comment\">&lt;!-- A RecyclerView with some commonly used attributes --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">android.support.v7.widget.RecyclerView</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:id</span>=<span class=\"string\">\"@+id/my_recycler_view\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:scrollbars</span>=<span class=\"string\">\"vertical\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_width</span>=<span class=\"string\">\"match_parent\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:layout_height</span>=<span class=\"string\">\"match_parent\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>Activityï¼Œè·Ÿ ListView ä¸åŒç‚¹åœ¨ï¼š</p>\n<ul>\n<li>å¦‚æœ RecyclerView çš„å°ºå¯¸ä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¦è°ƒç”¨<code>setHasFixedSize(true)</code>æ¥æé«˜æ€§èƒ½</li>\n<li>è¦æ ¹æ®å¸ƒå±€è®¾ç½® LayoutManager</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> RecyclerView mRecyclerView;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> RecyclerView.Adapter mAdapter;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> RecyclerView.LayoutManager mLayoutManager;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.my_activity);</span><br><span class=\"line\">        mRecyclerView = (RecyclerView) findViewById(R.id.my_recycler_view);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// use this setting to improve performance if you know that changes</span></span><br><span class=\"line\">        <span class=\"comment\">// in content do not change the layout size of the RecyclerView</span></span><br><span class=\"line\">        mRecyclerView.setHasFixedSize(<span class=\"keyword\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// use a linear layout manager</span></span><br><span class=\"line\">        mLayoutManager = <span class=\"keyword\">new</span> LinearLayoutManager(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        mRecyclerView.setLayoutManager(mLayoutManager);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// specify an adapter (see also next example)</span></span><br><span class=\"line\">        mAdapter = <span class=\"keyword\">new</span> MyAdapter(myDataset);</span><br><span class=\"line\">        mRecyclerView.setAdapter(mAdapter);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Adapterï¼Œä¸ ListView çš„å†™æ³•å·®å¼‚è¾ƒå¤§ã€‚</p>\n<ul>\n<li>éœ€è¦ç»§æ‰¿è‡ª RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;</li>\n<li>å¿…é¡»å£°æ˜ä¸€ä¸ªé™æ€å†…éƒ¨ç±» ViewHolder</li>\n<li>é‡è½½ onCreateViewHolder æ–¹æ³•ï¼Œéœ€è¦ç”Ÿæˆå¸ƒå±€ï¼Œåˆå§‹åŒ– ViewHolder å¹¶è¿”å›</li>\n<li>é‡è½½ onBindViewHolder æ–¹æ³•ï¼Œè¿™ä¸€æ­¥æ˜¯å°† ViewHolder ä¸­çš„ View éƒ½èµ‹äºˆæ­£ç¡®çš„æ•°æ®</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyAdapter</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">Adapter</span>&lt;<span class=\"title\">MyAdapter</span>.<span class=\"title\">ViewHolder</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String[] mDataset;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Provide a reference to the views for each data item</span></span><br><span class=\"line\">    <span class=\"comment\">// Complex data items may need more than one view per item, and</span></span><br><span class=\"line\">    <span class=\"comment\">// you provide access to all the views for a data item in a view holder</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ViewHolder</span> <span class=\"keyword\">extends</span> <span class=\"title\">RecyclerView</span>.<span class=\"title\">ViewHolder</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// each data item is just a string in this case</span></span><br><span class=\"line\">        <span class=\"keyword\">public</span> TextView mTextView;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ViewHolder</span><span class=\"params\">(TextView v)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(v);</span><br><span class=\"line\">            mTextView = v;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Provide a suitable constructor (depends on the kind of dataset)</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MyAdapter</span><span class=\"params\">(String[] myDataset)</span> </span>&#123;</span><br><span class=\"line\">        mDataset = myDataset;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Create new views (invoked by the layout manager)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> MyAdapter.<span class=\"function\">ViewHolder <span class=\"title\">onCreateViewHolder</span><span class=\"params\">(ViewGroup parent,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">                                                   <span class=\"keyword\">int</span> viewType)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// create a new view</span></span><br><span class=\"line\">        TextView v = (TextView) LayoutInflater.from(parent.getContext())</span><br><span class=\"line\">                .inflate(R.layout.my_text_view, parent, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">        ...</span><br><span class=\"line\">        ViewHolder vh = <span class=\"keyword\">new</span> ViewHolder(v);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> vh;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Replace the contents of a view (invoked by the layout manager)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onBindViewHolder</span><span class=\"params\">(ViewHolder holder, <span class=\"keyword\">int</span> position)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// - get element from your dataset at this position</span></span><br><span class=\"line\">        <span class=\"comment\">// - replace the contents of the view with that element</span></span><br><span class=\"line\">        holder.mTextView.setText(mDataset[position]);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Return the size of your dataset (invoked by the layout manager)</span></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">int</span> <span class=\"title\">getItemCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mDataset.length;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"LayoutManager\"><a href=\"#LayoutManager\" class=\"headerlink\" title=\"LayoutManager\"></a>LayoutManager</h3><p>Android Support Library è‡ªå¸¦çš„æœ‰ä¸‰ç§ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿ RecyclerView.LayoutManager æ¥å®ç°è‡ªå·±çš„å¸ƒå±€ã€‚</p>\n<ul>\n<li>LinearLayoutManagerï¼Œä¸€ç»´çº¿æ€§åˆ—è¡¨ï¼ŒåŒ ListView</li>\n<li>GridLayoutManagerï¼Œç½‘æ ¼åˆ—è¡¨ï¼ŒåŒ GridView</li>\n<li>StaggeredGridLayotManagerï¼Œç€‘å¸ƒæµåˆ—è¡¨ï¼Œåˆ—ä¹‹é—´æœ‰é”™ä½</li>\n</ul>\n<h3 id=\"åŠ¨ç”»\"><a href=\"#åŠ¨ç”»\" class=\"headerlink\" title=\"åŠ¨ç”»\"></a>åŠ¨ç”»</h3><p>Item å˜åŒ–çš„æ—¶å€™ï¼ŒRecyclerView ä½¿ç”¨ animator æ¥æ”¹å˜å¤–è§‚ï¼Œanimator ç»§æ‰¿è‡ª RecyclerView.ItemAnimatorã€‚</p>\n<h3 id=\"List-Item-Selection\"><a href=\"#List-Item-Selection\" class=\"headerlink\" title=\"List-Item Selection\"></a>List-Item Selection</h3><p>è¿™éƒ¨åˆ†ç•¥ï¼Œæ—¥åå†™ Demo è¡¥å……</p>\n<h3 id=\"RecyclerView-å‡ å¤§é‡è¦æˆå‘˜\"><a href=\"#RecyclerView-å‡ å¤§é‡è¦æˆå‘˜\" class=\"headerlink\" title=\"RecyclerView å‡ å¤§é‡è¦æˆå‘˜\"></a>RecyclerView å‡ å¤§é‡è¦æˆå‘˜</h3><figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/recyclerview_components.jpeg\" alt=\"RecyclerView Components\" title=\"\">\n                </div>\n                <div class=\"image-caption\">RecyclerView Components</div>\n            </figure>\n<h3 id=\"RecyclerView-ç¼“å­˜\"><a href=\"#RecyclerView-ç¼“å­˜\" class=\"headerlink\" title=\"RecyclerView ç¼“å­˜\"></a>RecyclerView ç¼“å­˜</h3><ul>\n<li>å†…éƒ¨ä¸¤çº§ç¼“å­˜</li>\n<li>åˆ’å‡ºç•Œé¢çš„ ViewHolder ä¼šè¢«æ”¾å…¥ Cacheï¼ˆä¸€çº§ç¼“å­˜ï¼‰ï¼Œå®¹é‡ä¸º2ã€‚Cache ä¸­çš„å¯¹è±¡éƒ½æ˜¯åŒç§ ViewTypeã€‚</li>\n<li>ä» Cache ä¸­è¢«æ¸…é™¤çš„å¯¹è±¡ï¼Œä¼šè¢«æ”¾å…¥ RecycledViewPoolï¼Œå®¹é‡ä¸º5ã€‚RecycledViewPool ä¸­çš„å¯¹è±¡æŒ‰ç…§ ViewType åˆ†ç±»ã€‚</li>\n</ul>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/recyclerview_cache.webp\" alt=\"RecyclerView Cache\" title=\"\">\n                </div>\n                <div class=\"image-caption\">RecyclerView Cache</div>\n            </figure>\n<h3 id=\"å‚è€ƒ\"><a href=\"#å‚è€ƒ\" class=\"headerlink\" title=\"å‚è€ƒ\"></a>å‚è€ƒ</h3><ul>\n<li><a href=\"https://developer.android.com/guide/topics/ui/layout/recyclerview\" target=\"_blank\" rel=\"noopener\">RecycyerView - Developers</a></li>\n<li><a href=\"https://mp.weixin.qq.com/s?src=3&amp;timestamp=1531269425&amp;ver=1&amp;signature=FWpjJw5RhmTc*7UKCIha2t9LR*Hpr*knccH5aD2iiD7suxuKZgREroUCYpvcJxeOaz3lJbk4Ht4MmjXZAHcp-x1Ui7EAekMj8i1-hWpBwyd1YhGg7wx15pshQwnTTm7Dvan5LJDoOJvNoPatOjSrFePotNTHk1ON6c*6K1OZm40=\" target=\"_blank\" rel=\"noopener\">æ·±å…¥æµ…å‡º RecyclerView</a></li>\n</ul>\n<h2 id=\"å¾®ä¿¡çš„â€œåˆ†äº«â€é¡µé¢ä½¿ç”¨çš„æ˜¯å“ªç§å¯åŠ¨æ¨¡å¼\"><a href=\"#å¾®ä¿¡çš„â€œåˆ†äº«â€é¡µé¢ä½¿ç”¨çš„æ˜¯å“ªç§å¯åŠ¨æ¨¡å¼\" class=\"headerlink\" title=\"å¾®ä¿¡çš„â€œåˆ†äº«â€é¡µé¢ä½¿ç”¨çš„æ˜¯å“ªç§å¯åŠ¨æ¨¡å¼\"></a>å¾®ä¿¡çš„â€œåˆ†äº«â€é¡µé¢ä½¿ç”¨çš„æ˜¯å“ªç§å¯åŠ¨æ¨¡å¼</h2><p>è¿™æ˜¯é¢è¯•æœ‰èµæ—¶ï¼Œé¢è¯•å®˜æé—®çš„ç¬¬ä¸€é“é¢˜ç›®ã€‚ç›´è§‰å‘Šè¯‰æˆ‘ Standard å’Œ SingleTop éƒ½ä¸é€‚ç”¨ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ä» SingleInstance å’Œ SingleTask ä¸­é€‰å‡ºä¸€ä¸ªåˆé€‚çš„æ¥ï¼Œè¿™ä¸€å—æ˜¯çŸ¥è¯†ç›²åŒºï¼Œä»¥å‰æ ¹æœ¬æ²¡æœ‰ä»å®ç”¨çš„è§’åº¦æ¥è€ƒè™‘è¿™é—®é¢˜ï¼Œéƒ½æ˜¯æ­»è®°ç¡¬èƒŒå¯åŠ¨æ¨¡å¼ã€‚</p>\n<p>æœ¬è´¨ä¸Šè¿˜æ˜¯è€ƒå¯Ÿå¯åŠ¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ã€‚</p>\n<h3 id=\"SingleInstance\"><a href=\"#SingleInstance\" class=\"headerlink\" title=\"SingleInstance\"></a>SingleInstance</h3><p>ä¸å¤–éƒ¨åº”ç”¨å…±äº«çš„é¡µé¢ï¼Œä¸€èˆ¬è®¾ç½®æˆè¿™ç§å¯åŠ¨æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä½œä¸ºå¤–éƒ¨Appè°ƒç”¨è‡ªå·±å®¢æˆ·ç«¯ç¨‹åºçš„å…¥å£ã€‚è¿™æ˜¯ä¸ºäº†æ–¹ä¾¿å…¶å®ƒåº”ç”¨çš„ Activity è°ƒèµ·æœ¬åº”ç”¨ã€‚åŒæ—¶ï¼Œç”±äº SingleInstance ä¼šå•ç‹¬èµ·ä¸€ä¸ª Taskï¼Œå½“ç”¨æˆ·æ“ä½œå®Œæˆè¯¥é¡µé¢åï¼Œç‚¹å‡»è¿”å›æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨é€€å›åˆ°å¤–éƒ¨åº”ç”¨ã€‚åœ¨ä½¿ç”¨æ—¶åº”è¯¥æ³¨æ„å£°æ˜<code>taskAffinity</code>ï¼Œä»¥ä¾¿åœ¨ä»»åŠ¡ç®¡ç†ä¸­çœ‹åˆ°æ–° Taskã€‚</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">activity</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:name</span>=<span class=\"string\">\".SingleInstanceActivity\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:label</span>=<span class=\"string\">\"singleInstance launchMode\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:launchMode</span>=<span class=\"string\">\"singleInstance\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"SingleTask\"><a href=\"#SingleTask\" class=\"headerlink\" title=\"SingleTask\"></a>SingleTask</h3><p>ä¸€ä¸ª Task å†…åªå…è®¸æœ‰ä¸€ä¸ª SingleTask çš„ Activityï¼Œå¯ä¸œæ—¶å¦‚æœ Task å†…å·²ç»æœ‰äº†åŒ Activityï¼Œåˆ™ä¼šå°†å…¶ä¸Šæ‰€æœ‰çš„ Activity æŒ‰ç…§ç”Ÿå‘½æµç¨‹è¿›è¡Œé”€æ¯ï¼ŒåŒæ—¶è°ƒç”¨è¯¥ Activity çš„<code>onNewIntent</code>æ–¹æ³•ã€‚é€‚åˆçš„åº”ç”¨åœºæ™¯æ˜¯åº”ç”¨å†…éƒ¨ç»Ÿä¸€å…¥å£ï¼Œæ¯”å¦‚æµè§ˆå™¨é¦–é¡µã€å•†æˆ·è¯¦æƒ…é¡µç­‰ã€‚åŒæ ·ï¼Œéœ€è¦å£°æ˜<code>taskAffinity</code>ä»¥ä¿è¯å®ƒä¼šæ–°èµ·ä¸€ä¸ª Taskã€‚</p>\n<h3 id=\"SingleTop\"><a href=\"#SingleTop\" class=\"headerlink\" title=\"SingleTop\"></a>SingleTop</h3><p>åŒæ ·ï¼Œå¦‚æœ Task é¡¶å·²ç»æœ‰äº†åŒä¸€ä¸ª Activityï¼Œä¼šè°ƒç”¨<code>onNewIntent</code>ä¼ å…¥å‚æ•°ã€‚</p>\n<p>åº”ç”¨åœºæ™¯ï¼š</p>\n<ul>\n<li>ç‚¹å‡»â€œé€šçŸ¥â€åæ‰“å¼€çš„è¯¦æƒ…é¡µé¢</li>\n<li>æµè§ˆå™¨æœç´¢ç»“æœé¡µï¼Œå¸¦æœ‰å…³é”®è¯è¾“å…¥æ¡†</li>\n</ul>\n<h3 id=\"Standard\"><a href=\"#Standard\" class=\"headerlink\" title=\"Standard\"></a>Standard</h3><p>åº”ç”¨äºå¯ä»¥æ‰“å¼€å¤šä¸ªå®ä¾‹çš„é¡µé¢ï¼Œæ¯”å¦‚ä¸ä¸åŒäººçš„èŠå¤©é¡µé¢ï¼Œæ’°å†™é‚®ä»¶é¡µé¢ç­‰ã€‚</p>\n<h3 id=\"åœºæ™¯ï¼šåº”ç”¨è¿›ç¨‹è¢«æ€åå†æ¬¡å¯åŠ¨\"><a href=\"#åœºæ™¯ï¼šåº”ç”¨è¿›ç¨‹è¢«æ€åå†æ¬¡å¯åŠ¨\" class=\"headerlink\" title=\"åœºæ™¯ï¼šåº”ç”¨è¿›ç¨‹è¢«æ€åå†æ¬¡å¯åŠ¨\"></a>åœºæ™¯ï¼šåº”ç”¨è¿›ç¨‹è¢«æ€åå†æ¬¡å¯åŠ¨</h3><p>è®¾æƒ³ä¸€ä¸ªè¿™æ ·çš„åº”ç”¨åœºæ™¯ï¼šç”¨æˆ·åœ¨ä½¿ç”¨ä½ çš„åº”ç”¨æ—¶ï¼Œçªç„¶æ¥æ”¶åˆ°ä¸€ä¸ªå¾®ä¿¡æ¶ˆæ¯ï¼Œä»–è·³è½¬åˆ°å¾®ä¿¡åï¼Œä½ çš„åº”ç”¨è¢«åˆ‡æ¢è‡³åå°è¿è¡Œã€‚è¯¥ç”¨æˆ·åœ¨å¾®ä¿¡ä¸­ç¿»é˜…äº†æœ‹å‹åœˆã€æŸ¥çœ‹ä¸€äº›è§†é¢‘ï¼Œä»¥åŠè¿›è¡Œäº†å…¶å®ƒå¾ˆå¤šåƒå†…å­˜çš„æ“ä½œï¼Œå¯¼è‡´ç³»ç»Ÿå†…å­˜ç´§å¼ ï¼Œè¿™æ—¶ä½ çš„åº”ç”¨è¿›ç¨‹è¢«æ€æ­»ã€‚ä½†æ˜¯ç”±äºAndroidç³»ç»Ÿä»ç„¶ä¼šä¿æŒ Task æ ˆçš„å†…å®¹ï¼Œæ‰€ä»¥ç”¨æˆ·åœ¨â€œæœ€è¿‘åº”ç”¨â€é‡Œä»ç„¶æ˜¯å¯ä»¥çœ‹åˆ°ä½ çš„åº”ç”¨çš„ã€‚æ­¤æ—¶å¦‚æœç”¨æˆ·é€šè¿‡â€œæœ€è¿‘åº”ç”¨â€åˆ‡æ¢å›ä½ çš„åº”ç”¨ï¼ˆè¿›ç¨‹å·²ç»è¢«æ€æ­»ï¼‰ï¼Œææ˜“å‘ç”Ÿå¼‚å¸¸å¯¼è‡´é—ªé€€ã€‚</p>\n<p>å¼‚å¸¸åŸå› åœ¨äºå½“è¿›ç¨‹è¢«æ€æ­»åï¼Œæ‰€æœ‰çš„é™æ€å¸¸é‡å€¼ä¼šè¢«æ¸…ç©ºï¼Œå¦‚æœåœ¨æ­¤æ—¶ä½¿ç”¨å¹¶ä¸”æœªç»æ£€æŸ¥ï¼Œå¾ˆå®¹æ˜“å‡ºç° NPE ç­‰å¼‚å¸¸ã€‚å¸¸è§„è§£å†³æ–¹æ³•æ˜¯åœ¨ onSaveInstance é‡Œé¢å¯¹å˜é‡è¿›è¡Œä¿å­˜ï¼Œç„¶ååœ¨ onRestoreInstance é‡Œæ¢å¤å˜é‡å€¼ã€‚ç¼ºç‚¹æ˜¯å·¥ä½œé‡å¤§ï¼Œä»£ç å†—é•¿ã€‚</p>\n<p>æ­¤æ—¶çš„ä¸€ä¸ªè§£å†³æ€è·¯æ˜¯å¯¹äºè¿›ç¨‹è¢«æ€æ­»çš„æƒ…å†µï¼Œå¦‚æœå†æ¬¡å¯åŠ¨ï¼Œåˆ™è·³è½¬å›åº”ç”¨é¦–é¡µï¼ˆè¿™ç‚¹éœ€è¦è·å–äº§å“ç»ç†åŒæ„ï¼‰ï¼Œéšåçš„ä¸€åˆ‡ç­‰åŒäºé¦–æ¬¡å¯åŠ¨ã€‚</p>\n<p>ç›¸åº”çš„æŠ€æœ¯æ€è·¯æ˜¯ï¼Œå°†é¦–é¡µå¯åŠ¨æ¨¡å¼å£°æ˜ä¸º SingleTaskï¼ŒåŒæ—¶å†™ä¸€ä¸ª BaseActivityï¼Œå®ƒé‡Œé¢æœ‰ä¸€ä¸ª getAppStatus æ–¹æ³•ç”¨æ¥åˆ¤æ–­åº”ç”¨æ˜¯å¦å¤„äºå›æ”¶åé‡æ–°å¯åŠ¨çš„çŠ¶æ€ï¼Œåˆ¤æ–­æ–¹æ³•æ˜¯è¯»å–ä¸€ä¸ªé™æ€ int ç±»å‹å˜é‡ appStatusï¼Œå®ƒé»˜è®¤å€¼æ˜¯ KILLEDï¼Œåœ¨æ¯ä¸€ä¸ªå­ Activity çš„ onCreate æ–¹æ³•é‡Œå°†å…¶è®¾ç½®æˆ NORMAL å€¼ã€‚è¿™æ ·ä¸€æ—¦è¢«å›æ”¶ï¼Œå®ƒå°±ä¼šå˜æˆ KILLEDï¼Œå°±å¯ä»¥åœ¨ BaseActivity.onCreate é‡Œé€šè¿‡å¯¹è¿™ä¸ªå˜é‡çš„åˆ¤æ–­ï¼Œå†³å®šæ˜¯ä¸æ˜¯è¦é‡æ–°å›åˆ°é¦–é¡µã€‚</p>\n<h3 id=\"å‚è€ƒï¼šå¦‚ä½•è®©ä½ çš„appåœ¨åå°è¢«å¹²æ‰åä¼˜é›…çš„å¯åŠ¨\"><a href=\"#å‚è€ƒï¼šå¦‚ä½•è®©ä½ çš„appåœ¨åå°è¢«å¹²æ‰åä¼˜é›…çš„å¯åŠ¨\" class=\"headerlink\" title=\"å‚è€ƒï¼šå¦‚ä½•è®©ä½ çš„appåœ¨åå°è¢«å¹²æ‰åä¼˜é›…çš„å¯åŠ¨\"></a>å‚è€ƒï¼š<a href=\"http://www.apkbus.com/blog-964080-78423.html\" target=\"_blank\" rel=\"noopener\">å¦‚ä½•è®©ä½ çš„appåœ¨åå°è¢«å¹²æ‰åä¼˜é›…çš„å¯åŠ¨</a></h3><h2 id=\"IntentService-å®ç°åŸç†\"><a href=\"#IntentService-å®ç°åŸç†\" class=\"headerlink\" title=\"IntentService å®ç°åŸç†\"></a>IntentService å®ç°åŸç†</h2><p>é€šè¿‡<code>startService(Intent)</code>æ¥å¯åŠ¨ä¸€ä¸ª IntentServiceï¼Œå®ƒå†…éƒ¨æœ‰ä¸€ä¸ªå·¥ä½œé˜Ÿåˆ—ï¼ˆWorker Threadï¼‰ï¼Œåœ¨å·¥ä½œçº¿ç¨‹å†…è¿è¡Œï¼Œä¸ä¼šå½±å“ UI çº¿ç¨‹ã€‚IntentService æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œç»§æ‰¿å®ƒæ—¶å¿…é¡»å®ç°<code>onHandleIntent</code>æ–¹æ³•ã€‚</p>\n<ul>\n<li>æ™®é€š Service ç”±äºè¿è¡Œåœ¨ UI çº¿ç¨‹ï¼Œæ— æ³•è¿›è¡Œè€—æ—¶æ“ä½œï¼ŒIntentService è§£å†³äº†è¿™ä¸ªé—®é¢˜</li>\n<li>è¿è¡Œå®Œæˆåï¼ŒIntentService ä¼šè‡ªåŠ¨åœæ­¢</li>\n</ul>\n<p>ä»åŸç†ä¸Šè®²ï¼ŒIntentService æ˜¯åˆ›å»ºäº†ä¸€ä¸ª HandlerThreadï¼Œç„¶åç”¨ thread.getLooper() èµ‹ç»™ Handlerï¼Œè¿™ä¸ª Handler æ¥æ”¶ onStart æ—¶ä¼ æ¥çš„ Intentï¼Œå¹¶ä»¥æ­¤ Intent è°ƒç”¨ä½ æ‰€è¦†ç›–çš„ onHandleIntent æ–¹æ³•ã€‚ä»»åŠ¡å®Œæˆåï¼Œå¯ä»¥ç”¨å¹¿æ’­æˆ–è€… EventBus ç­‰æ‰‹æ®µé€šçŸ¥è°ƒç”¨è€…ã€‚</p>\n<h3 id=\"å‚è€ƒï¼šIntentServiceçš„åŸç†å’Œå®ä¾‹åˆ†æ\"><a href=\"#å‚è€ƒï¼šIntentServiceçš„åŸç†å’Œå®ä¾‹åˆ†æ\" class=\"headerlink\" title=\"å‚è€ƒï¼šIntentServiceçš„åŸç†å’Œå®ä¾‹åˆ†æ\"></a>å‚è€ƒï¼š<a href=\"https://www.jianshu.com/p/4dd46616564d\" target=\"_blank\" rel=\"noopener\">IntentServiceçš„åŸç†å’Œå®ä¾‹åˆ†æ</a></h3><h2 id=\"HTTP-è¯·æ±‚å’Œå“åº”å¤´çš„æ ¼å¼\"><a href=\"#HTTP-è¯·æ±‚å’Œå“åº”å¤´çš„æ ¼å¼\" class=\"headerlink\" title=\"HTTP è¯·æ±‚å’Œå“åº”å¤´çš„æ ¼å¼\"></a>HTTP è¯·æ±‚å’Œå“åº”å¤´çš„æ ¼å¼</h2><p>æœ‰èµå’Œå¨ä½©éƒ½é—®åˆ°äº†è¿™ä¸€é¢˜ã€‚</p>\n<p>HTTPçš„å¤´åŸŸåŒ…æ‹¬é€šç”¨å¤´ï¼Œè¯·æ±‚å¤´ï¼Œå“åº”å¤´å’Œå®ä½“å¤´å››ä¸ªéƒ¨åˆ†ã€‚æ¯ä¸ªå¤´åŸŸç”±ä¸€ä¸ªåŸŸåï¼Œå†’å·ï¼ˆ:ï¼‰å’ŒåŸŸå€¼ä¸‰éƒ¨åˆ†ç»„æˆã€‚åŸŸåæ˜¯å¤§å°å†™æ— å…³çš„ï¼ŒåŸŸå€¼å‰å¯ä»¥æ·»åŠ ä»»ä½•æ•°é‡çš„ç©ºæ ¼ç¬¦ï¼Œå¤´åŸŸå¯ä»¥è¢«æ‰©å±•ä¸ºå¤šè¡Œï¼Œåœ¨æ¯è¡Œå¼€å§‹å¤„ï¼Œä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦ã€‚</p>\n<h3 id=\"é€šç”¨å¤´\"><a href=\"#é€šç”¨å¤´\" class=\"headerlink\" title=\"é€šç”¨å¤´\"></a>é€šç”¨å¤´</h3><p>é€šç”¨å¤´åŸŸåŒ…å«è¯·æ±‚å’Œå“åº”æ¶ˆæ¯éƒ½æ”¯æŒçš„å¤´åŸŸï¼Œé€šç”¨å¤´åŸŸåŒ…å«Cache-Controlã€Connectionã€Dateã€Pragmaã€Transfer-Encodingã€Upgradeã€Viaã€‚</p>\n<h3 id=\"è¯·æ±‚å¤´\"><a href=\"#è¯·æ±‚å¤´\" class=\"headerlink\" title=\"è¯·æ±‚å¤´\"></a>è¯·æ±‚å¤´</h3><p>è¯·æ±‚æ¶ˆæ¯çš„ç¬¬ä¸€è¡Œä¸ºä¸‹é¢çš„æ ¼å¼ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Methodã€€SPã€€Request-URIã€€SPã€€HTTP-Versionã€€CRLF</span><br></pre></td></tr></table></figure>\n<p>è¯·æ±‚å¤´åŸŸå…è®¸å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€’å…³äºè¯·æ±‚æˆ–è€…å…³äºå®¢æˆ·æœºçš„é™„åŠ ä¿¡æ¯ã€‚è¯·æ±‚å¤´åŸŸå¯èƒ½åŒ…å«ä¸‹åˆ—å­—æ®µAcceptã€Accept-Charsetã€Accept- Encodingã€Accept-Languageã€Authorizationã€Fromã€Hostã€If-Modified-Sinceã€If- Matchã€If-None-Matchã€If-Rangeã€If-Rangeã€If-Unmodified-Sinceã€Max-Forwardsã€ Proxy-Authorizationã€Rangeã€Refererã€User-Agentã€‚</p>\n<h3 id=\"å“åº”å¤´\"><a href=\"#å“åº”å¤´\" class=\"headerlink\" title=\"å“åº”å¤´\"></a>å“åº”å¤´</h3><p>å“åº”æ¶ˆæ¯çš„ç¬¬ä¸€è¡Œä¸ºä¸‹é¢çš„æ ¼å¼ï¼š</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HTTP-Versionã€€SPã€€Status-Codeã€€SPã€€Reason-Phraseã€€CRLF</span><br></pre></td></tr></table></figure>\n<p>å¸¸è§é”™è¯¯ç </p>\n<ul>\n<li>1xx:ä¿¡æ¯å“åº”ç±»ï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°è¯·æ±‚å¹¶ä¸”ç»§ç»­å¤„ç†</li>\n<li>2xx:å¤„ç†æˆåŠŸå“åº”ç±»ï¼Œè¡¨ç¤ºåŠ¨ä½œè¢«æˆåŠŸæ¥æ”¶ã€ç†è§£å’Œæ¥å—</li>\n<li>3xx:é‡å®šå‘å“åº”ç±»ï¼Œä¸ºäº†å®ŒæˆæŒ‡å®šçš„åŠ¨ä½œï¼Œå¿…é¡»æ¥å—è¿›ä¸€æ­¥å¤„ç†</li>\n<li>4xx:å®¢æˆ·ç«¯é”™è¯¯ï¼Œå®¢æˆ·è¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–è€…æ˜¯ä¸èƒ½æ­£ç¡®æ‰§è¡Œ</li>\n<li>5xx:æœåŠ¡ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨ä¸èƒ½æ­£ç¡®æ‰§è¡Œä¸€ä¸ªæ­£ç¡®çš„è¯·æ±‚</li>\n</ul>\n<h3 id=\"å®ä½“ä¿¡æ¯\"><a href=\"#å®ä½“ä¿¡æ¯\" class=\"headerlink\" title=\"å®ä½“ä¿¡æ¯\"></a>å®ä½“ä¿¡æ¯</h3><p>è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½å¯ä»¥åŒ…å«å®ä½“ä¿¡æ¯ï¼Œå®ä½“ä¿¡æ¯ä¸€èˆ¬ç”±å®ä½“å¤´åŸŸå’Œå®ä½“ç»„æˆã€‚å®ä½“å¤´åŸŸåŒ…å«å…³äºå®ä½“çš„åŸä¿¡æ¯ï¼Œå®ä½“å¤´åŒ…æ‹¬Allowã€Content-Baseã€Content-Encodingã€Content-Languageã€ Content-Lengthã€Content-Locationã€Content-MD5ã€Content-Rangeã€Content-Typeã€ Etagã€Expiresã€Last-Modifiedã€extension-headerã€‚</p>\n<h2 id=\"MVP-ä¸­å¯¹-Presenter-å¦‚ä½•è¿›è¡Œæµ‹è¯•\"><a href=\"#MVP-ä¸­å¯¹-Presenter-å¦‚ä½•è¿›è¡Œæµ‹è¯•\" class=\"headerlink\" title=\"MVP ä¸­å¯¹ Presenter å¦‚ä½•è¿›è¡Œæµ‹è¯•\"></a>MVP ä¸­å¯¹ Presenter å¦‚ä½•è¿›è¡Œæµ‹è¯•</h2><h3 id=\"å„å±‚å•å…ƒæµ‹è¯•é€‰å‹\"><a href=\"#å„å±‚å•å…ƒæµ‹è¯•é€‰å‹\" class=\"headerlink\" title=\"å„å±‚å•å…ƒæµ‹è¯•é€‰å‹\"></a>å„å±‚å•å…ƒæµ‹è¯•é€‰å‹</h3><p>å„å±‚ç”±äºç‰¹æ€§ä¸åŒï¼Œæ‰€é‡‡ç”¨çš„æµ‹è¯•å·¥å…·ä¹Ÿä¸ä¸€æ ·</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/mvp_ut.png\" alt=\"JVM\" title=\"\">\n                </div>\n                <div class=\"image-caption\">JVM</div>\n            </figure>\n<ul>\n<li>Modelå±‚ï¼šæ¶‰åŠæ•°æ®åº“æ“ä½œï¼Œä¾èµ– Android ç¯å¢ƒï¼Œä½¿ç”¨ AndroidJUnitRunner æµ‹è¯•</li>\n<li>Viewå±‚ï¼šæ¶‰åŠ UIï¼Œä½¿ç”¨ Espresso è¿›è¡Œæµ‹è¯•</li>\n<li>Presenterå±‚ï¼šä¸éœ€è¦ Android ç¯å¢ƒï¼Œçº¯ JAVA ä»£ç ï¼Œä½¿ç”¨ JUnit æµ‹è¯•</li>\n</ul>\n<p>MVP çš„ä¸€å¤§ä¼˜ç‚¹å°±æ˜¯å°†æ•°æ®ã€è§†å›¾ã€é€»è¾‘è§£è€¦ï¼Œä»è€Œå¯ä»¥å¯¹å…¶ä¸­æŸä¸€è§’è‰²è¿›è¡Œå•ç‹¬æµ‹è¯•ã€‚ç„¶è€Œï¼Œæƒ³è¦å¯¹ Presenter è¿›è¡Œæµ‹è¯•ï¼Œå°±å¿…é¡»å›ç­”ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>\n<ol>\n<li>æµ‹è¯•è¿‡ç¨‹è¦é¿å…é€šè¿‡ç½‘ç»œæˆ–è€…æœ¬åœ°å­˜å‚¨äº§ç”Ÿè„æ•°æ®ï¼Œå› æ­¤å¿…é¡»å¯¹æ•°æ®å±‚æ¥å£è¿›è¡Œ Mock</li>\n<li>ä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡ï¼Œå¹¶ä¸” Presenter æœ¬èº«æ˜¯è§†å›¾æ— å…³çš„ï¼Œå› æ­¤æµ‹è¯•ç”¨ä¾‹åº”è¯¥å¯ä»¥è„±ç¦»çœŸæœº/æ¨¡æ‹Ÿå™¨ç‹¬ç«‹è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æœ‰å¯¹ View çš„Mock</li>\n<li>å¦‚ä½•æ£€éªŒ Presenter çš„å„ä¸ªæ–¹æ³•è¿è¡ŒæˆåŠŸäº†</li>\n</ol>\n<p>æˆ‘ä»¬ä»¥ Demo ä¸­å¯¹ AddEditTaskPresenter çš„æµ‹è¯•ä¸ºä¾‹ï¼Œçœ‹å‚è€ƒç­”æ¡ˆæ˜¯æ€æ ·çš„ï¼Œå¯¹åº”çš„ç±»æ˜¯<code>AddEditTaskPresenterTest.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Mock</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> TasksRepository mTasksRepository;</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œç›´æ¥ä½¿ç”¨ Mockito çš„<code>@Mock</code>æ³¨è§£æ¥å£°æ˜ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¦åœ¨æµ‹è¯•ç”¨ä¾‹è¿è¡Œä¹‹å‰é€šè¿‡<code>MockitoAnnotations.initMocks(this)</code>è¿›è¡Œæ³¨å…¥ã€‚å¦‚æ­¤è¿™èˆ¬è§£å†³äº†æ•°æ®å±‚ Mock çš„é—®é¢˜ã€‚</p>\n<p>å¯¹ View çš„æ³¨å…¥ä¹Ÿä¸€æ ·</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Mock</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> AddEditTaskContract.View mAddEditTaskView;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Before</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">setupMocksAndView</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Mockito has a very convenient way to inject mocks by using the @Mock annotation. To</span></span><br><span class=\"line\">    <span class=\"comment\">// inject the mocks in the test the initMocks method needs to be called.</span></span><br><span class=\"line\">    MockitoAnnotations.initMocks(<span class=\"keyword\">this</span>); <span class=\"comment\">// æ³¨å…¥ Mock å¯¹è±¡</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// The presenter wont't update the view unless it's active.</span></span><br><span class=\"line\">    when(mAddEditTaskView.isActive()).thenReturn(<span class=\"keyword\">true</span>); <span class=\"comment\">// è¿™æ®µä»£ç çš„å«ä¹‰æ˜¯â€œå½“ isActive è¢«è°ƒç”¨æ—¶ï¼Œç›´æ¥è¿”å› trueâ€</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹å¦‚ä½•æ£€éªŒ Presenter é‡Œé¢å„ä¸ªæ–¹æ³•è°ƒç”¨æˆåŠŸï¼Œé€‰ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æ¶‰åŠåˆ°å›è°ƒçš„åœºæ™¯ï¼Œä¹Ÿå°±æ˜¯è·å–å•ä¸ª Taskï¼Œè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥å›è°ƒæ¥å£ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Test</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">populateTask_callsRepoAndUpdatesView</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    Task testTask = <span class=\"keyword\">new</span> Task(<span class=\"string\">\"TITLE\"</span>, <span class=\"string\">\"DESCRIPTION\"</span>);</span><br><span class=\"line\">    <span class=\"comment\">// Get a reference to the class under test</span></span><br><span class=\"line\">    mAddEditTaskPresenter = <span class=\"keyword\">new</span> AddEditTaskPresenter(testTask.getId(),</span><br><span class=\"line\">            mTasksRepository, mAddEditTaskView, <span class=\"keyword\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// When the presenter is asked to populate an existing task</span></span><br><span class=\"line\">    mAddEditTaskPresenter.populateTask(); <span class=\"comment\">// è¿™é‡Œä¼šè°ƒç”¨ Repository é‡Œé¢çš„ getTask æ–¹æ³•</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Then the task repository is queried and the view updated</span></span><br><span class=\"line\">    <span class=\"comment\">// éªŒè¯è°ƒç”¨åˆ°äº† getTask æ–¹æ³•ï¼Œå¹¶ä¸”å°†å›è°ƒèµ‹ç»™ mGetTaskCallbackCaptorï¼Œåé¢å¯ä»¥å¯¹ captor è‡ªç”±è§¦å‘å›è°ƒ</span></span><br><span class=\"line\">    verify(mTasksRepository).getTask(eq(testTask.getId()), mGetTaskCallbackCaptor.capture());</span><br><span class=\"line\">    assertThat(mAddEditTaskPresenter.isDataMissing(), is(<span class=\"keyword\">true</span>)); <span class=\"comment\">// è¿™æ—¶å€™è¿˜æ²¡æœ‰åŠ è½½æˆåŠŸ task</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Simulate callback</span></span><br><span class=\"line\">    mGetTaskCallbackCaptor.getValue().onTaskLoaded(testTask);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// éªŒè¯ View é‡Œé¢ç›¸åº”æ–¹æ³•å¾—åˆ°è°ƒç”¨</span></span><br><span class=\"line\">    verify(mAddEditTaskView).setTitle(testTask.getTitle());</span><br><span class=\"line\">    verify(mAddEditTaskView).setDescription(testTask.getDescription());</span><br><span class=\"line\">    assertThat(mAddEditTaskPresenter.isDataMissing(), is(<span class=\"keyword\">false</span>)); <span class=\"comment\">// æ­¤æ—¶åŠ è½½æˆåŠŸ</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç»¼ä¸Šï¼Œå¯ä»¥ç†è§£å¯¹ Presenter è¿›è¡Œå•å…ƒæµ‹è¯•çš„éªŒè¯æµç¨‹å°±æ˜¯â€œè°ƒç”¨ Presenter é‡Œé¢çš„æŸä¸ªæ–¹æ³• -&gt; å°†å›è°ƒæš‚å­˜ -&gt; éªŒè¯ View é‡Œé¢ç›¸åº”çš„æ–¹æ³•è¢«æ‰§è¡Œ -&gt; ç»™å›è°ƒèµ‹å€¼ï¼ŒéªŒè¯å›è°ƒâ€</p>\n<h2 id=\"å±å¹•ç‰©ç†å°ºå¯¸ï¼Œåƒç´ ï¼Œdpï¼Œpxï¼Œsp\"><a href=\"#å±å¹•ç‰©ç†å°ºå¯¸ï¼Œåƒç´ ï¼Œdpï¼Œpxï¼Œsp\" class=\"headerlink\" title=\"å±å¹•ç‰©ç†å°ºå¯¸ï¼Œåƒç´ ï¼Œdpï¼Œpxï¼Œsp\"></a>å±å¹•ç‰©ç†å°ºå¯¸ï¼Œåƒç´ ï¼Œdpï¼Œpxï¼Œsp</h2><p>ç‰©ç†å°ºå¯¸ï¼šè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å±å¹•é•¿å¤šå°‘mmï¼Œå®½å¤šå°‘mmã€‚ä½†é€šå¸¸ä¸ä¼šç›´æ¥è¯´é•¿å®½ï¼Œè€Œæ˜¯ç”¨â€œxxè‹±å¯¸â€è¡¨ç¤ºï¼Œæ¯”å¦‚æˆ‘çš„å°ç±³5xå°±æ˜¯5.5è‹±å¯¸ï¼Œè¿™é‡Œçš„5.5è‹±å¯¸æŒ‡çš„æ˜¯å¯¹è§’çº¿é•¿åº¦ï¼Œ1è‹±å¯¸ â‰ˆ 2.54cmï¼Œ5.5è‹±å¯¸ â‰ˆ 13.97cm â‰ˆ 14cmï¼Œå¸‚é¢ä¸Šå¦‚ä»Š 90% ä»¥ä¸Šçš„æ‰‹æœºéƒ½æ˜¯ 16:9 çš„ï¼Œæ‰€ä»¥å¯ä»¥åˆ—å‡ºæ–¹ç¨‹ (16x)^2 + (9x)^2 = 14^2ï¼Œè§£æ–¹ç¨‹å¾—åˆ° x = 0.76cmï¼Œå¾—å‡ºå°ç±³5xå±å¹•ç‰©ç†å°ºå¯¸ä¸ºé•¿ 12.16cmï¼Œå®½ 6.84cmã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/5x_screen_size.jpg\" alt=\"5xå±å¹•å°ºå¯¸\" title=\"\">\n                </div>\n                <div class=\"image-caption\">5xå±å¹•å°ºå¯¸</div>\n            </figure>\n<p>åˆ†è¾¨ç‡/åƒç´ ï¼šä»ä¸Šå›¾é‡Œçœ‹åˆ°ï¼Œ5xå®½é«˜ä¸º 1080px * 1920pxï¼Œå¯¹äºè¿™æ ·çš„æ‰‹æœºé€šå¸¸ç§°å…¶åˆ†è¾¨ç‡ä¸º 1080pã€‚åƒç´ çš„æ¦‚å¿µæ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä¸€ä¸ªåƒç´ å°±æ˜¯æ¶²æ™¶å±çš„ä¸€ä¸ªæœ€å°å‘å…‰å•å…ƒï¼Œ8-bit æ¸¸æˆå¸¸è¢«ç§°ä¸ºåƒç´ æ¸¸æˆï¼Œå› ä¸ºåƒç´ é¢—ç²’é€šå¸¸æ¯”è¾ƒå¤§ï¼Œå›¾åƒæœ‰æ–¹å—æ„Ÿã€‚</p>\n<p>ç‰©ç†å°ºå¯¸ä¸åˆ†è¾¨ç‡æ²¡æœ‰å¿…ç„¶çš„å…³ç³»ã€‚</p>\n<p>åƒç´ å¯†åº¦ï¼šPixels Per Inchï¼ŒPPIï¼Œä¹Ÿç§°ä¸º Dots Per Inchï¼ˆDPIï¼‰ã€‚æ¯è‹±å¯¸ä¸Šæ’åˆ—çš„åƒç´ ä¸ªæ•°ï¼Œè¿™ä¸ªâ€œæ¯è‹±å¯¸â€æ˜¯é•¿è¿˜æ˜¯å®½å‘¢ï¼Ÿéƒ½ä¸æ˜¯ï¼Œæ˜¯æŒ‡å¯¹è§’çº¿ã€‚é€šè¿‡å‹¾è‚¡å®šç†è®¡ç®—ï¼Œ1080*1920 åˆ†è¾¨ç‡çš„å±å¹•ï¼Œå…¶å¯¹è§’çº¿åƒç´ æ•°ä¸º 2203pï¼Œé‚£ä¹ˆå°ç±³5xçš„ PPI å°±æ˜¯ 2203/5.5 = 400ã€‚åƒç´ å¯†åº¦è¶Šé«˜ï¼Œé”¯é½¿æ„Ÿè¶Šä½ï¼Œæ˜¾ç¤ºè¶Šç²¾ç»†ã€‚</p>\n<p>å€ç‡å’Œé€»è¾‘åƒç´ ï¼šiPhone 3gs å’Œ 4sï¼Œç‰©ç†å°ºå¯¸éƒ½æ˜¯ 3.5 è‹±å¯¸ï¼Œ3gs çš„åˆ†è¾¨ç‡æ˜¯ 320x480ï¼Œ4s çš„åˆ†è¾¨ç‡åˆ™æ˜¯ 640x960ï¼Œ4s çš„åƒç´ å¯†åº¦æ˜¯ 3gs çš„ä¸¤å€ï¼Œå•ä¸ªåƒç´ å°ºå¯¸æ˜¯ 3gs çš„ä¸€åŠã€‚ä½†æ˜¯åœ¨æ˜¾ç¤ºä¸­ï¼Œè¿™ä¸¤ä¸ªè®¾å¤‡çš„æ˜¾ç¤ºæ•ˆæœå´æ˜¯ä¸€æ ·çš„ï¼ŒåŸå› åœ¨äº 4s ç”¨ 2x2 ä¸ªåƒç´ åˆå¹¶æˆ 1 ä¸ªåƒç´ ï¼Œå¦‚ä¸‹å›¾ã€‚è¿™ä½¿å¾—åŒæ ·çš„å›¾ç‰‡åœ¨ 4s ä¸Šæ˜¾ç¤ºæ›´åŠ æ¸…æ™°ã€‚ç„¶è€Œè¿™å¯¹å›¾ç‰‡æºæ–‡ä»¶æœ‰è¦æ±‚ï¼Œå¿…é¡»ä½¿ç”¨å¸¦æœ‰â€œ@2xâ€åç¼€çš„å›¾ç‰‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å…¶ç”¨äº 4s è®¾å¤‡ä¸Šã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/ip_3gs_4s.png\" alt=\"3gs 4s\" title=\"\">\n                </div>\n                <div class=\"image-caption\">3gs 4s</div>\n            </figure>\n<p>ä¸Šé¢è®²çš„æ˜¯è‹¹æœçš„å¤„ç†æ–¹æ³•ï¼Œå¯¹äº Android è¿™å¹¶ä¸å¤ªé€‚ç”¨ï¼Œå› ä¸º Android è®¾å¤‡çš„åˆ†è¾¨ç‡å®åœ¨å¤ªå¤šäº†ã€‚å› æ­¤åˆ’åˆ†ä¸ºå¤šç§å°ºå¯¸ï¼Œå¦‚ä¸‹ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/Android_dpi.png\" alt=\"Android DPI\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Android DPI</div>\n            </figure>\n<p>ä»¥ 160DPIï¼ˆmdpiï¼‰ ä¸ºåŸºå‡†ï¼Œå€ç‡ä¸ºä¸€å€ï¼Œå…¶å®ƒå¯†åº¦ä»¥æ­¤è®¡ç®—ã€‚åœ¨ 160DPIçš„æƒ…å†µä¸‹ï¼Œ1px = 1dpã€‚</p>\n<ul>\n<li>ldpi [0.75å€]</li>\n<li>mdpi [1å€]</li>\n<li>hdpi [1.5å€]</li>\n<li>xhdpi [2å€]</li>\n<li>xxhdpi [3å€]</li>\n<li>xxxhdpi [4å€]</li>\n</ul>\n<p>æ‰€ä»¥ä¸ºäº†ä¿è¯å‡†ç¡®é«˜æ•ˆçš„æ²Ÿé€šï¼Œæ— è®ºæ˜¯åœ¨æ ‡æ³¨å›¾è¿˜æ˜¯åœ¨æ—¥å¸¸æ²Ÿé€šä¸­ï¼Œè®¾è®¡äººå‘˜ä¸å¼€å‘äººå‘˜éƒ½éœ€è¦å°½é‡ä»¥é€»è¾‘åƒç´ å°ºå¯¸æ¥æè¿°å’Œç†è§£ç•Œé¢ï¼ŒçœŸæ­£å†³å®šæ˜¾ç¤ºæ•ˆæœçš„ï¼Œæ˜¯é€»è¾‘åƒç´ å°ºå¯¸ã€‚ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰ Android è®¾å¤‡çš„é€»è¾‘åƒç´ å°ºå¯¸éƒ½ä¸€è‡´ï¼Œæ¯”å¦‚ä¸¤ç§å¸¸è§çš„å±å¹•480Ã—800å’Œ1080Ã—1920ï¼Œå®ƒä»¬åˆ†åˆ«å±äºhdpiå’Œxxhdpiã€‚é™¤ä»¥å„è‡ªå€ç‡1.5å€å’Œ3å€ï¼Œå¾—åˆ°é€»è¾‘åƒç´ ä¸º320Ã—533å’Œ360Ã—640ã€‚å¾ˆæ˜¾ç„¶ï¼Œåè€…æ›´å®½æ›´é«˜ï¼Œèƒ½æ˜¾ç¤ºæ›´å¤šå†…å®¹ã€‚</p>\n<p>pxï¼špixels,åƒç´ ï¼Œå±å¹•ä¸Šå®é™…çš„åƒç´ ç‚¹å•ä½</p>\n<p>dpï¼šdevice independent pixels, è®¾å¤‡ç‹¬ç«‹åƒç´ ï¼Œå®‰å“ä¸“ç”¨é•¿åº¦å•ä½ï¼Œä»¥160ppiå±å¹•ä¸ºæ ‡å‡†ï¼Œåˆ™ 1dp=1pxã€‚dp*ppi/160=px</p>\n<p>spï¼šscaled pixels,æ”¾å¤§åƒç´ ï¼Œå®‰å“ä¸“ç”¨å­—ä½“å•ä½ï¼Œä»¥160ppiå±å¹•ä¸ºæ ‡å‡†ï¼Œå­—ä½“å¤§å°ä¸º100%æ—¶ï¼Œåˆ™1dp=1px</p>\n<p>Android ä¸€èˆ¬ä»¥ 360x640 çš„é€»è¾‘å°ºå¯¸æ¥è®¾è®¡ UI</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180709_interview/Android_Screen_Size.png\" alt=\"Androidå¸¸è§å±å¹•å°ºå¯¸ä¸DPI\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Androidå¸¸è§å±å¹•å°ºå¯¸ä¸DPI</div>\n            </figure>\n","categories":[],"tags":["Android","é¢è¯•"]},{"title":"OkHttp æºç å­¦ä¹ ","url":"https://lilei.pro/2018/07/06/okhttp/","content":"<blockquote>\n<p>OkHttp æ˜¯ç”± Square å‘å¸ƒçš„ HTTP Clientï¼Œç”¨äºå¤„ç† HTTP è¯·æ±‚ã€‚<br>ç”¨å®˜ç½‘çš„æè¿°å°±æ˜¯ï¼ŒAn HTTP &amp; HTTP/2 client for Android and Java applications.</p>\n</blockquote>\n<h1 id=\"ä¼˜ç‚¹\"><a href=\"#ä¼˜ç‚¹\" class=\"headerlink\" title=\"ä¼˜ç‚¹\"></a>ä¼˜ç‚¹</h1><ul>\n<li>æ”¯æŒ HTTP/2ï¼Œå¤šä¸ªè¿æ¥å¯ä»¥å…±ç”¨ä¸€ä¸ª Socket</li>\n<li>è¿æ¥æ± å¯ä»¥å‡å°‘å»¶è¿Ÿï¼ˆé HTTP/2ï¼‰</li>\n<li>GZIP å‹ç¼©å‡å°‘æµé‡</li>\n<li>Response ç¼“å­˜</li>\n<li>é‡å®šå‘å’Œé‡è¯•</li>\n</ul>\n<h1 id=\"OkHttp-çš„ç”¨æ³•\"><a href=\"#OkHttp-çš„ç”¨æ³•\" class=\"headerlink\" title=\"OkHttp çš„ç”¨æ³•\"></a>OkHttp çš„ç”¨æ³•</h1><h2 id=\"åŒæ­¥è¯·æ±‚\"><a href=\"#åŒæ­¥è¯·æ±‚\" class=\"headerlink\" title=\"åŒæ­¥è¯·æ±‚\"></a>åŒæ­¥è¯·æ±‚</h2><p>éœ€è¦åœ¨ AsyncTask æˆ–è€…èµ·çº¿ç¨‹æ¥è¿›è¡Œï¼Œè°ƒç”¨<code>execute()</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">doRequest</span><span class=\"params\">(String param)</span> </span>&#123;</span><br><span class=\"line\">\tRequest.Builder builder = <span class=\"keyword\">new</span> Request.Builder();</span><br><span class=\"line\">\tbuilder.url(param);</span><br><span class=\"line\">\tRequest request = builder.build();</span><br><span class=\"line\">\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t    Response response = client.newCall(request).execute();</span><br><span class=\"line\">\t    <span class=\"keyword\">return</span> response.body().string();</span><br><span class=\"line\">\t&#125;<span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">\t    e.printStackTrace();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"å¼‚æ­¥è¯·æ±‚\"><a href=\"#å¼‚æ­¥è¯·æ±‚\" class=\"headerlink\" title=\"å¼‚æ­¥è¯·æ±‚\"></a>å¼‚æ­¥è¯·æ±‚</h2><p>è°ƒç”¨<code>enqueue()</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">OkHttpClient client = <span class=\"keyword\">new</span> OkHttpClient();</span><br><span class=\"line\"></span><br><span class=\"line\">Request request = <span class=\"keyword\">new</span> Request.Builder()</span><br><span class=\"line\">        .url(url)</span><br><span class=\"line\">        .build();</span><br><span class=\"line\"></span><br><span class=\"line\">client.newCall(request).enqueue(<span class=\"keyword\">new</span> Callback() &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(Call call, IOException e)</span> </span>&#123;</span><br><span class=\"line\">        call.cancel();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResponse</span><span class=\"params\">(Call call, Response response)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">final</span> String myResponse = response.body().string();</span><br><span class=\"line\"></span><br><span class=\"line\">        MainActivity.<span class=\"keyword\">this</span>.runOnUiThread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                txtString.setText(myResponse);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"è®¾ç½®-Header-å’Œå‚æ•°\"><a href=\"#è®¾ç½®-Header-å’Œå‚æ•°\" class=\"headerlink\" title=\"è®¾ç½® Header å’Œå‚æ•°\"></a>è®¾ç½® Header å’Œå‚æ•°</h2><p>åœ¨ URL æ„å»ºè¿‡ç¨‹ä¸­é€šè¿‡<code>addQueryParameter</code>è®¾ç½®å‚æ•°ï¼Œåœ¨ Request æ„å»ºè¿‡ç¨‹ä¸­è®¾ç½® Header</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HttpUrl.Builder urlBuilder = HttpUrl.parse(<span class=\"string\">\"https://httpbin.org/get).newBuilder();</span></span><br><span class=\"line\"><span class=\"string\">urlBuilder.addQueryParameter(\"</span>website<span class=\"string\">\", \"</span>www.journaldev.com<span class=\"string\">\");</span></span><br><span class=\"line\"><span class=\"string\">urlBuilder.addQueryParameter(\"</span>tutorials<span class=\"string\">\", \"</span>android<span class=\"string\">\");</span></span><br><span class=\"line\"><span class=\"string\">String url = urlBuilder.build().toString();</span></span><br><span class=\"line\"><span class=\"string\"></span></span><br><span class=\"line\"><span class=\"string\">Request request = new Request.Builder()</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t.header(\"</span>Authorization<span class=\"string\">\", \"</span>replace <span class=\"keyword\">this</span> text with your token<span class=\"string\">\")</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t.url(url)</span></span><br><span class=\"line\"><span class=\"string\">\t\t\t.build();</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"post-è¯·æ±‚\"><a href=\"#post-è¯·æ±‚\" class=\"headerlink\" title=\"post è¯·æ±‚\"></a>post è¯·æ±‚</h2><p>éœ€è¦å£°æ˜<code>MediaType</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> String postUrl= <span class=\"string\">\"https://reqres.in/api/users/\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">public</span> String postBody=<span class=\"string\">\"&#123;\\n\"</span> +</span><br><span class=\"line\">        <span class=\"string\">\"    \\\"name\\\": \\\"morpheus\\\",\\n\"</span> +</span><br><span class=\"line\">        <span class=\"string\">\"    \\\"job\\\": \\\"leader\\\"\\n\"</span> +</span><br><span class=\"line\">        <span class=\"string\">\"&#125;\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> MediaType JSON = MediaType.parse(<span class=\"string\">\"application/json; charset=utf-8\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">postRequest</span><span class=\"params\">(String postUrl,String postBody)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    OkHttpClient client = <span class=\"keyword\">new</span> OkHttpClient();</span><br><span class=\"line\"></span><br><span class=\"line\">    RequestBody body = RequestBody.create(JSON, postBody);</span><br><span class=\"line\"></span><br><span class=\"line\">    Request request = <span class=\"keyword\">new</span> Request.Builder()</span><br><span class=\"line\">            .url(postUrl)</span><br><span class=\"line\">            .post(body)</span><br><span class=\"line\">            .build();</span><br><span class=\"line\"></span><br><span class=\"line\">    client.newCall(request).enqueue(<span class=\"keyword\">new</span> Callback() &#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onFailure</span><span class=\"params\">(Call call, IOException e)</span> </span>&#123;</span><br><span class=\"line\">            call.cancel();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onResponse</span><span class=\"params\">(Call call, Response response)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">            Log.d(<span class=\"string\">\"TAG\"</span>,response.body().string());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"è®¾è®¡æ€è·¯\"><a href=\"#è®¾è®¡æ€è·¯\" class=\"headerlink\" title=\"è®¾è®¡æ€è·¯\"></a>è®¾è®¡æ€è·¯</h1><p>æˆ‘è®¤ä¸º OkHttp çš„æ ¸å¿ƒæ˜¯ä»¥åˆ†å±‚çš„æ€æƒ³é“¾å¼å¤„ç†ç½‘ç»œè¯·æ±‚ã€‚æ‰€æœ‰å¤„ç†çš„ä»£ç éƒ½ä½äº<code>XXXInterceptor</code>ä¸­ï¼Œä¸€å…±æœ‰6ä¸ªè¿™æ ·çš„ Interceptorï¼Œæ¥å£å¦‚ä¸‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Interceptor</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"function\">Response <span class=\"title\">intercept</span><span class=\"params\">(Chain chain)</span> <span class=\"keyword\">throws</span> IOException</span>; <span class=\"comment\">// å¤„ç†å½“å‰å±‚çš„è¯·æ±‚</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸‹å›¾æ¥æºäº Piasy çš„åšå®¢ï¼Œå¾ˆå¥½åœ°æè¿°äº† OkHttp å‘é€ç½‘ç»œè¯·æ±‚åˆ°å¤„ç†å®Œæˆçš„è¿‡ç¨‹ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180706_okhttp/okhttp_flow.png\" alt=\"flow\" title=\"\">\n                </div>\n                <div class=\"image-caption\">flow</div>\n            </figure>\n<h1 id=\"å…³é”®ç±»è®²è§£\"><a href=\"#å…³é”®ç±»è®²è§£\" class=\"headerlink\" title=\"å…³é”®ç±»è®²è§£\"></a>å…³é”®ç±»è®²è§£</h1><ul>\n<li><p>RetryAndFollowUpInterceptorï¼Œå¤„ç†è¯·æ±‚å¤±è´¥é‡è¯•ä»¥åŠé‡å®šå‘ï¼ˆ30Xï¼‰</p>\n</li>\n<li><p>BridgeInterceptorï¼Œå¯¹ Request å’Œ Response è¿›è¡Œå°è£…ï¼Œä¸»è¦æ˜¯å†™ Headerï¼ŒGzip è§£å‹ç¼©ç­‰æ“ä½œ</p>\n</li>\n<li><p>CacheInterceptorï¼Œç¼“å­˜ï¼Œå¾ˆæ£’çš„ç£ç›˜ç¼“å­˜è®¾è®¡ï¼Œç»´æŠ¤ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶æ¥è¿›è¡Œç¼“å­˜çš„æ¢å¤é‡å»º</p>\n</li>\n<li><p>ConnectInterceptorï¼Œç®¡ç†ä¸ç›®æ ‡çš„è¿æ¥ï¼Œé‡‡ç”¨ç­–ç•¥æ¨¡å¼ï¼Œæœ‰ HTTP(HTTP/1.1) å’Œ HTTP/2 ä¸¤ç§ç­–ç•¥ï¼Œå…³é”®ç±»<code>StreamAllocation</code></p>\n</li>\n<li><p>CallServerInterceptorï¼Œæ•°æ®äº¤æ¢ï¼Œå°†æ•°æ®ä¼ é€ç»™æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‹‰å–æ•°æ®ã€‚å†™è¯·æ±‚å¤´ -&gt; å†™è¯·æ±‚ä½“ -&gt; è·å–å“åº”å¤´ -&gt; è·å–å“åº”ä½“</p>\n</li>\n</ul>\n<h1 id=\"è®¾è®¡æ¨¡å¼\"><a href=\"#è®¾è®¡æ¨¡å¼\" class=\"headerlink\" title=\"è®¾è®¡æ¨¡å¼\"></a>è®¾è®¡æ¨¡å¼</h1><h2 id=\"æ„å»ºå™¨æ¨¡å¼\"><a href=\"#æ„å»ºå™¨æ¨¡å¼\" class=\"headerlink\" title=\"æ„å»ºå™¨æ¨¡å¼\"></a>æ„å»ºå™¨æ¨¡å¼</h2><p>æ„å»ºå™¨æ¨¡å¼å¯ä»¥å‡å°‘å†—é•¿çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è®¾ç½®å‚æ•°æ—¶è¿›è¡Œæ£€æŸ¥ã€‚OKHttpClient.javaã€Request.java è¿™äº›ç±»é‡Œé¢éƒ½ç”¨åˆ°äº† Builder æ¨¡å¼ï¼Œç®€å•å†™ä¸€ä¸ªæ¨¡ç‰ˆ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Foo</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> A a;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">Foo</span><span class=\"params\">(Builder builder)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.a = builder.a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> A a;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Builder</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.a = <span class=\"string\">\"a\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Builder <span class=\"title\">a</span><span class=\"params\">(A a)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.a = a;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Foo <span class=\"title\">build</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Foo(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ç­–ç•¥æ¨¡å¼\"><a href=\"#ç­–ç•¥æ¨¡å¼\" class=\"headerlink\" title=\"ç­–ç•¥æ¨¡å¼\"></a>ç­–ç•¥æ¨¡å¼</h2><p>ç­–ç•¥æ¨¡å¼ä½“ç°é¢å‘æ¥å£ç¼–ç¨‹çš„æ¦‚å¿µï¼Œå°†å…·ä½“å®ç°ä¸æ¥å£å‰¥ç¦»ï¼Œå‡å°‘è€¦åˆæ€§ã€‚ContentInterceptor é‡Œé¢çš„ HttpCodec æ¥å£å°±æ˜¯è¿™æ ·çš„ï¼Œæœ‰ HTTP/1 å’Œ HTTP/2 ä¸¤ç§å®ç°ã€‚</p>\n<h2 id=\"è´£ä»»é“¾æ¨¡å¼ï¼ˆchain-of-responbilityï¼‰\"><a href=\"#è´£ä»»é“¾æ¨¡å¼ï¼ˆchain-of-responbilityï¼‰\" class=\"headerlink\" title=\"è´£ä»»é“¾æ¨¡å¼ï¼ˆchain of responbilityï¼‰\"></a>è´£ä»»é“¾æ¨¡å¼ï¼ˆchain of responbilityï¼‰</h2><p>è´£ä»»é“¾æ¨¡å¼åŒ…å«äº†ä¸€ç³»åˆ—å¯¹è±¡ï¼Œä»¥åŠä¸€ç³»åˆ—å¤„ç†æŒ‡ä»¤ã€‚è¿™äº›å¯¹è±¡å…±åŒæ„æˆäº†ä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸€ç¯éƒ½æœ‰ä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œé“¾è¡¨ä¸­çš„å¯¹è±¡ç»è¿‡é€çº§é€’å½’å¤„ç†åï¼Œç”Ÿæˆæœ€ç»ˆç»“æœã€‚å¯ä»¥å‘å¤„ç†é“¾çš„æœ«å°¾æ·»åŠ æ–°çš„å¤„ç†æŒ‡ä»¤ã€‚Interceptor.Chain æ‰€é‡‡ç”¨çš„æ¨¡å¼ï¼Œæ¯ä¸€å±‚éƒ½å¤„ç†å„è‡ªçš„èŒè´£ï¼ŒæŒ‰ç…§é“¾å¼é€’å½’è°ƒç”¨ã€‚</p>\n<h1 id=\"å°ç»“\"><a href=\"#å°ç»“\" class=\"headerlink\" title=\"å°ç»“\"></a>å°ç»“</h1><p>OkHttp çš„ä»£ç å¤æ‚ç¨‹åº¦è®©äººå¤´å¤§ï¼Œæˆ‘ä¸æ•¢è¯´è‡ªå·±å·²ç»æ‘¸æ¸…äº†è¿™ä¸ªæ¡†æ¶ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹å€¼å¾—æ·±å…¥æŒ–æ˜ï¼Œæ¯”å¦‚åŸºäºæ—¥å¿— Cache çš„å®ç°ç»†èŠ‚ï¼Œè´£ä»»é“¾æ¨¡å¼çš„è®¾è®¡ã€‚ä¸‹ä¸€è¯¾é¢˜ï¼šRetrofitã€‚å­¦ä¹ è¿‡ç¨‹ä¸­å‚è€ƒäº†ç®€ä¹¦ä¸Šâ€œè¢«ä»£ç æ·¹æ²¡çš„å°ä¼™å­â€<a href=\"https://www.jianshu.com/p/37e26f4ea57b\" target=\"_blank\" rel=\"noopener\">okhttpæºç åˆ†æ</a>ç³»åˆ—æ–‡ç« ï¼Œæ„Ÿè°¢åŸä½œè€…ã€‚</p>\n","categories":[],"tags":["Android","æºç å­¦ä¹ "]},{"title":"Picasso æºç å­¦ä¹ ","url":"https://lilei.pro/2018/07/03/picasso/","content":"<blockquote>\n<p>Picasso æ˜¯ç”± Square å‘å¸ƒçš„å›¾ç‰‡åŠ è½½æ¡†æ¶ï¼Œä¼˜é›…åœ°å®ç°äº† Android ç³»ç»Ÿä¸­å›¾ç‰‡åŠ è½½çš„åŠŸèƒ½ã€‚å…¶ä¸­è¯·æ±‚åˆ†ç±»ã€ä»»åŠ¡è°ƒåº¦ã€å¤šçº§ç¼“å­˜ç­‰æ€æƒ³å¾ˆæœ‰å€Ÿé‰´æ„ä¹‰ï¼Œæœ¬æ–‡å°†ä»æºç è§’åº¦é˜è¿° Picasso çš„å·¥ä½œåŸç†ã€‚</p>\n</blockquote>\n<h1 id=\"Ask-Yourselfï¼šå®ç°ä¸€ä¸ªå›¾ç‰‡åŠ è½½æ¡†æ¶\"><a href=\"#Ask-Yourselfï¼šå®ç°ä¸€ä¸ªå›¾ç‰‡åŠ è½½æ¡†æ¶\" class=\"headerlink\" title=\"Ask Yourselfï¼šå®ç°ä¸€ä¸ªå›¾ç‰‡åŠ è½½æ¡†æ¶\"></a>Ask Yourselfï¼šå®ç°ä¸€ä¸ªå›¾ç‰‡åŠ è½½æ¡†æ¶</h1><p>å›¾ç‰‡çš„åŠ è½½æµç¨‹æ˜¯<code>è·å–</code> - <code>å˜æ¢</code> - <code>æ˜¾ç¤º</code>ï¼Œæ¥æºå¯èƒ½æ˜¯ç½‘ç»œã€èµ„æºæ–‡ä»¶ã€æœ¬åœ°æ–‡ä»¶ï¼Œå…¶ä¸­è¿˜è¦åŠ ä¸Šç¼“å­˜ï¼Œç»¼ä¸Šï¼Œå¯ä»¥æ•´ç†å‡ºè¿™æ ·çš„æµç¨‹å›¾ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180703_picasso/picasso_flowchart.png\" alt=\"æµç¨‹å›¾\" title=\"\">\n                </div>\n                <div class=\"image-caption\">æµç¨‹å›¾</div>\n            </figure>\n<p>ç»“åˆä¸Šå›¾ï¼Œæ•´ç†å‡ºä¸»è¦èŒè´£ç±»ï¼š</p>\n<ul>\n<li>è¯·æ±‚åŒ…è£…ç±»ï¼ŒåŒ…å«è¯·æ±‚åœ°å€ã€ç¼“å­˜ç­–ç•¥</li>\n<li>ç¼“å­˜ç±»ï¼Œå†…å­˜+ç£ç›˜ï¼Œä¸¤çº§ç¼“å­˜ç®¡ç†</li>\n<li>è¯·æ±‚å¤„ç†ç±»ï¼Œå®ç°ç›¸åŒçš„æ¥å£ï¼Œæœ‰ç½‘ç»œã€æœ¬åœ°ã€èµ„æºä¸‰ç§å®ç°</li>\n<li>ä¸‹è½½å™¨ç±»ï¼Œå…¼æœ‰æš‚åœã€æ¢å¤ã€å–æ¶ˆåŠŸèƒ½</li>\n<li>å›¾ç‰‡å˜æ¢ç±»ï¼Œè·å–å®Œå›¾ç‰‡åè¿›è¡Œè£å‰ªã€ç¼©æ”¾ã€æ—‹è½¬ã€åœ†è§’ç­‰å˜æ¢</li>\n<li>è°ƒåº¦å™¨ç±»ï¼Œç®¡ç†çº¿ç¨‹</li>\n</ul>\n<p>æœ‰äº†è‡ªå·±çš„ç†è§£ä¹‹åï¼Œå†ç»“åˆ Picasso çš„ä»£ç è¿›è¡Œå­¦ä¹ ã€‚</p>\n<h1 id=\"è¯·æ±‚ä¿¡æ¯ç±»-Request-RequestCreator\"><a href=\"#è¯·æ±‚ä¿¡æ¯ç±»-Request-RequestCreator\" class=\"headerlink\" title=\"è¯·æ±‚ä¿¡æ¯ç±» Request/RequestCreator\"></a>è¯·æ±‚ä¿¡æ¯ç±» Request/RequestCreator</h1><p>é¦–å…ˆæ˜¯ Request.javaï¼Œè¿™ä¸ªç±»åŒ…å«äº†å¾…æ˜¾ç¤ºå›¾ç‰‡çš„åœ°å€ã€å°ºå¯¸ã€ç¼©æ”¾ã€æ—‹è½¬ã€è£å‰ªä¿¡æ¯ï¼Œé‡‡ç”¨ Builder æ¨¡å¼ï¼Œå±æ€§å¦‚ä¸‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Builder</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> Uri uri;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> resourceId;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> String stableKey;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> targetWidth;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">int</span> targetHeight;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> centerCrop;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> centerInside;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> onlyScaleDown;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">float</span> rotationDegrees;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">float</span> rotationPivotX;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">float</span> rotationPivotY;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> hasRotationPivot;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> List&lt;Transformation&gt; transformations;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> Bitmap.Config config;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> Priority priority;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åæ‰æ˜¯è¯·æ±‚åŒ…è£…ç±» RequestCreator.javaï¼Œåœ¨ Request.java åŸºç¡€ä¸Šï¼Œè¿™ä¸ªç±»å¢åŠ äº†æ˜¾ç¤ºæ•ˆæœçš„å±æ€§ï¼Œæ¯”å¦‚æ·¡å…¥ã€åŠ è½½ä¸­çš„å ä½å›¾ç‰‡ã€é”™è¯¯å›¾ç‰‡ã€tag ä»¥åŠç¼“å­˜ç­–ç•¥ </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RequestCreator</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> AtomicInteger nextId = <span class=\"keyword\">new</span> AtomicInteger();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Picasso picasso;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Request.Builder data;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> noFade;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> deferred;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">boolean</span> setPlaceholder = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> placeholderResId;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> errorResId;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> memoryPolicy;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> networkPolicy;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Drawable placeholderDrawable;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Drawable errorDrawable;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> Object tag;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦å¤–ï¼Œ<code>Picasso.with(context).load(&quot;fake_url&quot;).into(someImageView)</code> ä¸­çš„<code>into</code>æ–¹æ³•ä¹Ÿæ˜¯ç”± RequestCreator.java ç±»å®ç°çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">into</span><span class=\"params\">(ImageView target, Callback callback)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">long</span> started = System.nanoTime();</span><br><span class=\"line\">\tcheckMain(); <span class=\"comment\">// å› ä¸ºè¦æ˜¾ç¤ºåœ¨ ImageView ä¸Šï¼Œæ‰€ä»¥å¿…é¡»åœ¨ä¸»çº¿ç¨‹è°ƒç”¨</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (target == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Target must not be null.\"</span>);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (!data.hasImage()) &#123; <span class=\"comment\">// å–å›¾å¤±è´¥</span></span><br><span class=\"line\">\t  picasso.cancelRequest(target);</span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (setPlaceholder) &#123;</span><br><span class=\"line\">\t    setPlaceholder(target, getPlaceholderDrawable());</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (deferred) &#123; <span class=\"comment\">// é‡‡ç”¨ fit è°ƒæ•´å›¾ç‰‡å¤§å°ä»¥é€‚åº” ImageViewï¼Œå»¶æ—¶æ“ä½œ</span></span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (data.hasSize()) &#123; <span class=\"comment\">// fit åè‡ªç„¶ä¸èƒ½äººå·¥è®¾ç½®é•¿å®½</span></span><br><span class=\"line\">\t    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(<span class=\"string\">\"Fit cannot be used with resize.\"</span>);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t  <span class=\"keyword\">int</span> width = target.getWidth();</span><br><span class=\"line\">\t  <span class=\"keyword\">int</span> height = target.getHeight();</span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (width == <span class=\"number\">0</span> || height == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (setPlaceholder) &#123;</span><br><span class=\"line\">\t      setPlaceholder(target, getPlaceholderDrawable());</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    picasso.defer(target, <span class=\"keyword\">new</span> DeferredRequestCreator(<span class=\"keyword\">this</span>, target, callback));</span><br><span class=\"line\">\t    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t  data.resize(width, height);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tRequest request = createRequest(started);</span><br><span class=\"line\">\tString requestKey = createKey(request); <span class=\"comment\">// cache çš„ key</span></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (shouldReadFromMemoryCache(memoryPolicy)) &#123; <span class=\"comment\">// æ£€éªŒå†…å­˜ç¼“å­˜</span></span><br><span class=\"line\">\t  Bitmap bitmap = picasso.quickMemoryCacheCheck(requestKey);</span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t    picasso.cancelRequest(target);</span><br><span class=\"line\">\t    setBitmap(target, picasso.context, bitmap, MEMORY, noFade, picasso.indicatorsEnabled);</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (picasso.loggingEnabled) &#123;</span><br><span class=\"line\">\t      log(OWNER_MAIN, VERB_COMPLETED, request.plainId(), <span class=\"string\">\"from \"</span> + MEMORY);</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (callback != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t      callback.onSuccess();</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// å†…å­˜ç¼“å­˜æœªå‘½ä¸­ï¼Œå…ˆæ˜¾ç¤ºå ä½ç¬¦ï¼Œç„¶åå»ç½‘ç»œè·å–</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (setPlaceholder) &#123;</span><br><span class=\"line\">\t  setPlaceholder(target, getPlaceholderDrawable());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tAction action =</span><br><span class=\"line\">\t    <span class=\"keyword\">new</span> ImageViewAction(picasso, target, request, memoryPolicy, networkPolicy, errorResId,</span><br><span class=\"line\">\t        errorDrawable, requestKey, tag, callback, noFade);</span><br><span class=\"line\"></span><br><span class=\"line\">\tpicasso.enqueueAndSubmit(action);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä»£ç ä¸­æœ‰ä¸€ä¸ª<code>deferred</code>çš„åˆ¤æ–­ï¼Œå¦‚æœä¸º<code>true</code>åˆ™ä¼šåˆ›å»ºä¸€ä¸ª<code>DeferredRequestCreator</code>ï¼Œçœ‹ä¸€ä¸‹è¿™ä¸ªç±»çš„å®ç°ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DeferredRequestCreator</span> <span class=\"keyword\">implements</span> <span class=\"title\">ViewTreeObserver</span>.<span class=\"title\">OnPreDrawListener</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> RequestCreator creator;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> WeakReference&lt;ImageView&gt; target;</span><br><span class=\"line\">  Callback callback;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@TestOnly</span> DeferredRequestCreator(RequestCreator creator, ImageView target) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(creator, target, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  DeferredRequestCreator(RequestCreator creator, ImageView target, Callback callback) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.creator = creator;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.target = <span class=\"keyword\">new</span> WeakReference&lt;ImageView&gt;(target);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.callback = callback;</span><br><span class=\"line\">    target.getViewTreeObserver().addOnPreDrawListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onPreDraw</span><span class=\"params\">()</span> </span>&#123; <span class=\"comment\">// è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œä»¥ä¾¿å½“ViewTreeè®¡ç®—å®Œæˆå‡†å¤‡ç»˜åˆ¶æ—¶ï¼Œæ‹¿åˆ°ImageViewçš„é•¿å®½</span></span><br><span class=\"line\">    ImageView target = <span class=\"keyword\">this</span>.target.get();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (target == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ViewTreeObserver vto = target.getViewTreeObserver();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!vto.isAlive()) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">int</span> width = target.getWidth();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> height = target.getHeight();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (width &lt;= <span class=\"number\">0</span> || height &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    vto.removeOnPreDrawListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.creator.unfit().resize(width, height).into(target, callback); <span class=\"comment\">// å°†ImageViewé•¿å®½ä¼ ç»™RequestCreatorä»¥ä¾¿å¯¹å›¾ç‰‡è¿›è¡Œresize</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">cancel</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    callback = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    ImageView target = <span class=\"keyword\">this</span>.target.get();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (target == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    ViewTreeObserver vto = target.getViewTreeObserver();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!vto.isAlive()) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    vto.removeOnPreDrawListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åªæœ‰å½“åœ¨æ˜¾ç¤ºå›¾ç‰‡çš„åœ°æ–¹è°ƒç”¨<code>fit()</code>æ—¶æ‰ä¼šåˆ›å»º<code>DeferredRequestCreator</code>å¯¹è±¡ã€‚</p>\n<p><code>RequestCreator</code>é‡Œé¢æœ‰ä¸¤ä¸ªå­—æ–­åˆ†åˆ«å¯¹åº”ç€å†…å­˜è®¾ç½®ä¸ç½‘ç»œè®¾ç½®ï¼Œæ˜¯ç¼“å­˜ç­–ç•¥ï¼Œå¯¹åº”çš„æšä¸¾ç±»å¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤è€…éƒ½æœ‰<code>NO_CACHE</code> <code>NO_STORE</code>ï¼Œç½‘ç»œç­–ç•¥æšä¸¾é‡Œå¤šäº†ä¸€ä¸ª<code>OFFLINE</code>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> MemoryPolicy &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Skips memory cache lookup when processing a request. */</span></span><br><span class=\"line\">  NO_CACHE(<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">0</span>),</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Skips storing the final result into memory cache. Useful for one-off requests</span></span><br><span class=\"line\"><span class=\"comment\">   * to avoid evicting other bitmaps from the cache.</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  NO_STORE(<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldReadFromMemoryCache</span><span class=\"params\">(<span class=\"keyword\">int</span> memoryPolicy)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (memoryPolicy &amp; MemoryPolicy.NO_CACHE.index) == <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldWriteToMemoryCache</span><span class=\"params\">(<span class=\"keyword\">int</span> memoryPolicy)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (memoryPolicy &amp; MemoryPolicy.NO_STORE.index) == <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> index;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">MemoryPolicy</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.index = index;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">enum</span> NetworkPolicy &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Skips checking the disk cache and forces loading through the network. */</span></span><br><span class=\"line\">  NO_CACHE(<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">0</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Skips storing the result into the disk cache.</span></span><br><span class=\"line\"><span class=\"comment\">   * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\">   * &lt;em&gt;Note&lt;/em&gt;: At this time this is only supported if you are using OkHttp.</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  NO_STORE(<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">1</span>),</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Forces the request through the disk cache only, skipping network. */</span></span><br><span class=\"line\">  OFFLINE(<span class=\"number\">1</span> &lt;&lt; <span class=\"number\">2</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldReadFromDiskCache</span><span class=\"params\">(<span class=\"keyword\">int</span> networkPolicy)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (networkPolicy &amp; NetworkPolicy.NO_CACHE.index) == <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">shouldWriteToDiskCache</span><span class=\"params\">(<span class=\"keyword\">int</span> networkPolicy)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (networkPolicy &amp; NetworkPolicy.NO_STORE.index) == <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isOfflineOnly</span><span class=\"params\">(<span class=\"keyword\">int</span> networkPolicy)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (networkPolicy &amp; NetworkPolicy.OFFLINE.index) != <span class=\"number\">0</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> index;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"title\">NetworkPolicy</span><span class=\"params\">(<span class=\"keyword\">int</span> index)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.index = index;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"ç¼“å­˜ç®¡ç†-LruCache\"><a href=\"#ç¼“å­˜ç®¡ç†-LruCache\" class=\"headerlink\" title=\"ç¼“å­˜ç®¡ç† LruCache\"></a>ç¼“å­˜ç®¡ç† LruCache</h1><p><code>Picasso.java</code>é‡Œç»´æŠ¤äº†ä¸€ä¸ªæˆå‘˜å˜é‡<code>cache</code>ï¼Œå¯¹åº”æ¥å£æ˜¯<code>Cache.java</code>ï¼Œï¼ˆåªè´´å‡ºä¸»è¦ä»£ç ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A memory cache for storing the most recently used images.</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;em&gt;Note:&lt;/em&gt; The &#123;<span class=\"doctag\">@link</span> Cache&#125; is accessed by multiple threads. You must ensure</span></span><br><span class=\"line\"><span class=\"comment\"> * your &#123;<span class=\"doctag\">@link</span> Cache&#125; implementation is thread safe when &#123;<span class=\"doctag\">@link</span> Cache#get(String)&#125; or &#123;<span class=\"doctag\">@link</span></span></span><br><span class=\"line\"><span class=\"comment\"> * Cache#set(String, android.graphics.Bitmap)&#125; is called.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Cache</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/** Retrieve an image for the specified &#123;<span class=\"doctag\">@code</span> key&#125; or &#123;<span class=\"doctag\">@code</span> null&#125;. */</span></span><br><span class=\"line\">  <span class=\"function\">Bitmap <span class=\"title\">get</span><span class=\"params\">(String key)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Store an image in the cache for the specified &#123;<span class=\"doctag\">@code</span> key&#125;. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">set</span><span class=\"params\">(String key, Bitmap bitmap)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Returns the current size of the cache in bytes. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Returns the maximum size in bytes that the cache can hold. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">maxSize</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Clears the cache. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¾ˆç®€å•çš„å‡ ä¸ªæ¥å£ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨å®ç°è¿‡ç¨‹ä¸­è¦ä¿è¯get/setçš„çº¿ç¨‹å®‰å…¨ã€‚å¯¹åº”çš„å®ç°ç±»æ˜¯<code>LruCache.java</code>ï¼Œè¿™æ˜¯<code>LruCache</code>ä¸€ä¸ªå¾ˆæ¼‚äº®çš„å®ç°ï¼Œè¯¥æœ‰çš„åŠŸèƒ½éƒ½æœ‰ï¼Œä¸æ¯«ä¸æ‹–æ³¥å¸¦æ°´ï¼Œæˆ‘å¿ä¸ä½æŠŠæ•´ä¸ªç±»éƒ½è´´å‡ºæ¥ã€‚å•è¯<code>eviction</code>çš„ç¿»è¯‘æ˜¯<code>é©±é€</code>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** A memory cache which uses a least-recently used eviction policy. */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LruCache</span> <span class=\"keyword\">implements</span> <span class=\"title\">Cache</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> LinkedHashMap&lt;String, Bitmap&gt; map; <span class=\"comment\">// æœ‰åº map</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> maxSize;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> size;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> putCount;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> evictionCount;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> hitCount; <span class=\"comment\">// å‘½ä¸­è®¡æ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">int</span> missCount; <span class=\"comment\">// æœªå‘½ä¸­è®¡æ•°</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Create a cache using an appropriate portion of the available RAM as the maximum size. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LruCache</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>(Utils.calculateMemoryCacheSize(context)); <span class=\"comment\">// Utils.java é‡Œç”¨äºè®¡ç®—å†…å­˜çš„å·¥å…·æ–¹æ³•ï¼Œè¿”å›çš„æ•°å€¼æ˜¯1/7ï¼ˆçº¦15%ï¼‰åº”ç”¨å¯ç”¨å†…å­˜ã€‚</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Create a cache with a given maximum size in bytes. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LruCache</span><span class=\"params\">(<span class=\"keyword\">int</span> maxSize)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (maxSize &lt;= <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalArgumentException(<span class=\"string\">\"Max size must be positive.\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.maxSize = maxSize;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.map = <span class=\"keyword\">new</span> LinkedHashMap&lt;String, Bitmap&gt;(<span class=\"number\">0</span>, <span class=\"number\">0.75f</span>, <span class=\"keyword\">true</span>); <span class=\"comment\">// ç¬¬ä¸‰ä¸ªå‚æ•° true è¡¨ç¤º LinkedHashMap çš„æ’åºæ˜¯æŒ‰ç…§æœ€è¿‘ accessï¼Œfalseåˆ™ä¸ºæœ€è¿‘ insertion</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Bitmap <span class=\"title\">get</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (key == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">\"key == null\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    Bitmap mapValue;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123; <span class=\"comment\">// å‰é¢è¯´äº†ï¼Œget/setå¿…é¡»è¦åšåŒæ­¥æ§åˆ¶</span></span><br><span class=\"line\">      mapValue = map.get(key);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (mapValue != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        hitCount++;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> mapValue;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      missCount++;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">set</span><span class=\"params\">(String key, Bitmap bitmap)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (key == <span class=\"keyword\">null</span> || bitmap == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">\"key == null || bitmap == null\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    Bitmap previous;</span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123; <span class=\"comment\">// ä¸€æ ·çš„åŒæ­¥</span></span><br><span class=\"line\">      putCount++;</span><br><span class=\"line\">      size += Utils.getBitmapBytes(bitmap);</span><br><span class=\"line\">      previous = map.put(key, bitmap);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (previous != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        size -= Utils.getBitmapBytes(previous);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    trimToSize(maxSize); <span class=\"comment\">// è‹¥å°ºå¯¸è¶…è¿‡ maxSize åˆ™éœ€è¦æ¸…ç†</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">trimToSize</span><span class=\"params\">(<span class=\"keyword\">int</span> maxSize)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">while</span> (<span class=\"keyword\">true</span>) &#123;</span><br><span class=\"line\">      String key;</span><br><span class=\"line\">      Bitmap value;</span><br><span class=\"line\">      <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123; <span class=\"comment\">// å‡¡æ˜¯æ‰€æœ‰æ“ä½œ map çš„åœ°æ–¹éƒ½åŠ é”</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size &lt; <span class=\"number\">0</span> || (map.isEmpty() &amp;&amp; size != <span class=\"number\">0</span>)) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> IllegalStateException(</span><br><span class=\"line\">              getClass().getName() + <span class=\"string\">\".sizeOf() is reporting inconsistent results!\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (size &lt;= maxSize || map.isEmpty()) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        Map.Entry&lt;String, Bitmap&gt; toEvict = map.entrySet().iterator().next();</span><br><span class=\"line\">        key = toEvict.getKey();</span><br><span class=\"line\">        value = toEvict.getValue();</span><br><span class=\"line\">        map.remove(key); <span class=\"comment\">// æ¸…ç†å‡º mapï¼Œç”± GC è‡ªåŠ¨å›æ”¶</span></span><br><span class=\"line\">        size -= Utils.getBitmapBytes(value);</span><br><span class=\"line\">        evictionCount++;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Clear the cache. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">void</span> <span class=\"title\">evictAll</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    trimToSize(-<span class=\"number\">1</span>); <span class=\"comment\">// -1 will evict 0-sized elements</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">int</span> <span class=\"title\">size</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> size;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">int</span> <span class=\"title\">maxSize</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> maxSize;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">clear</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    evictAll();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">void</span> <span class=\"title\">clearKeyUri</span><span class=\"params\">(String uri)</span> </span>&#123; <span class=\"comment\">// æ¸…é™¤æŸä¸ª URI å¯¹åº”çš„å…¨éƒ¨å›¾ç‰‡ï¼ŒåŒæ ·å†…å®¹çš„å›¾ç‰‡å› ä¸ºå°ºå¯¸ç¼©æ”¾æ—‹è½¬ä¸åŒï¼Œä¼šåœ¨ cache é‡Œå­˜åœ¨å¤šä¸ªå®ä¾‹</span></span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> sizeChanged = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> uriLength = uri.length();</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (Iterator&lt;Map.Entry&lt;String, Bitmap&gt;&gt; i = map.entrySet().iterator(); i.hasNext();) &#123;</span><br><span class=\"line\">      Map.Entry&lt;String, Bitmap&gt; entry = i.next();</span><br><span class=\"line\">      String key = entry.getKey();</span><br><span class=\"line\">      Bitmap value = entry.getValue();</span><br><span class=\"line\">      <span class=\"keyword\">int</span> newlineIndex = key.indexOf(KEY_SEPARATOR);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (newlineIndex == uriLength &amp;&amp; key.substring(<span class=\"number\">0</span>, newlineIndex).equals(uri)) &#123;</span><br><span class=\"line\">        i.remove();</span><br><span class=\"line\">        size -= Utils.getBitmapBytes(value);</span><br><span class=\"line\">        sizeChanged = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (sizeChanged) &#123;</span><br><span class=\"line\">      trimToSize(maxSize);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Returns the number of times &#123;<span class=\"doctag\">@link</span> #get&#125; returned a value. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">int</span> <span class=\"title\">hitCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> hitCount;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Returns the number of times &#123;<span class=\"doctag\">@link</span> #get&#125; returned &#123;<span class=\"doctag\">@code</span> null&#125;. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">int</span> <span class=\"title\">missCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> missCount;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Returns the number of times &#123;<span class=\"doctag\">@link</span> #set(String, Bitmap)&#125; was called. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">int</span> <span class=\"title\">putCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> putCount;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/** Returns the number of values that have been evicted. */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">synchronized</span> <span class=\"keyword\">int</span> <span class=\"title\">evictionCount</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> evictionCount;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>çŸ¥é“äº† cache çš„ç”¨æ³•ï¼Œå°±å¯ä»¥å¾ˆå¥½åœ°åœ¨<code>Picasso.java</code>é‡Œé¢æ£€æŸ¥ cache äº†ï¼Œç”¨èµ·æ¥ååˆ†ç®€å•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Bitmap <span class=\"title\">quickMemoryCacheCheck</span><span class=\"params\">(String key)</span> </span>&#123;</span><br><span class=\"line\">\tBitmap cached = cache.get(key);</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (cached != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t  stats.dispatchCacheHit();</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t  stats.dispatchCacheMiss();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> cached;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"è¯·æ±‚å¤„ç†å™¨-RequestHandler\"><a href=\"#è¯·æ±‚å¤„ç†å™¨-RequestHandler\" class=\"headerlink\" title=\"è¯·æ±‚å¤„ç†å™¨ RequestHandler\"></a>è¯·æ±‚å¤„ç†å™¨ RequestHandler</h1><p>åœ¨ Picasso.java çš„æ„é€ å‡½æ•°é‡Œï¼Œæœ‰è¿™æ ·ä¸€æ®µåˆå§‹åŒ–ä»£ç </p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Picasso(Context context, Dispatcher dispatcher, Cache cache, Listener listener,</span><br><span class=\"line\">  RequestTransformer requestTransformer, List&lt;RequestHandler&gt; extraRequestHandlers, Stats stats,</span><br><span class=\"line\">      Bitmap.Config defaultBitmapConfig, <span class=\"keyword\">boolean</span> indicatorsEnabled, <span class=\"keyword\">boolean</span> loggingEnabled) &#123;</span><br><span class=\"line\">    allRequestHandlers.add(<span class=\"keyword\">new</span> ResourceRequestHandler(context));</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (extraRequestHandlers != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      allRequestHandlers.addAll(extraRequestHandlers);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    allRequestHandlers.add(<span class=\"keyword\">new</span> ContactsPhotoRequestHandler(context));</span><br><span class=\"line\">    allRequestHandlers.add(<span class=\"keyword\">new</span> MediaStoreRequestHandler(context));</span><br><span class=\"line\">    allRequestHandlers.add(<span class=\"keyword\">new</span> ContentStreamRequestHandler(context));</span><br><span class=\"line\">    allRequestHandlers.add(<span class=\"keyword\">new</span> AssetRequestHandler(context));</span><br><span class=\"line\">    allRequestHandlers.add(<span class=\"keyword\">new</span> FileRequestHandler(context));</span><br><span class=\"line\">    allRequestHandlers.add(<span class=\"keyword\">new</span> NetworkRequestHandler(dispatcher.downloader, stats));</span><br><span class=\"line\">    requestHandlers = Collections.unmodifiableList(allRequestHandlers);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹å‡ºè¿™æ˜¯å®ç°äº†å¤šç§è¯·æ±‚å¤„ç†ç±»ï¼Œæ‰€æœ‰çš„<code>XXXRequetHandler</code>ç±»éƒ½ç»§æ‰¿è‡ªæŠ½è±¡ç±»<code>RequestHandler.java</code>ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯<code>canHandleRequest</code>å’Œ<code>load</code>è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚æºç æ³¨é‡Šé‡Œç»™å‡ºäº†ç®€æ´çš„è¯´æ˜ï¼Œä¸å†èµ˜è¿°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RequestHandler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Whether or not this &#123;<span class=\"doctag\">@link</span> RequestHandler&#125; can handle a request with the given &#123;<span class=\"doctag\">@link</span> Request&#125;.</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">boolean</span> <span class=\"title\">canHandleRequest</span><span class=\"params\">(Request data)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * Loads an image for the given &#123;<span class=\"doctag\">@link</span> Request&#125;.</span></span><br><span class=\"line\"><span class=\"comment\">   *</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> request the data from which the image should be resolved.</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param</span> networkPolicy the &#123;<span class=\"doctag\">@link</span> NetworkPolicy&#125; for this request.</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> Result <span class=\"title\">load</span><span class=\"params\">(Request request, <span class=\"keyword\">int</span> networkPolicy)</span> <span class=\"keyword\">throws</span> IOException</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>NetworkRequestHandler</code>ç±»çš„å®ç°</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">NetworkRequestHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">RequestHandler</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> RETRY_COUNT = <span class=\"number\">2</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String SCHEME_HTTP = <span class=\"string\">\"http\"</span>; <span class=\"comment\">// è¿™ä¸¤ä¸ªå¸¸é‡ç”¨äºåˆ¤æ–­ url</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String SCHEME_HTTPS = <span class=\"string\">\"https\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Downloader downloader; <span class=\"comment\">// ä¸‹è½½å™¨ï¼Œæœ‰ OkHttp å’Œ URLConnectionDownloader ä¸¤ç§å®ç°ï¼Œç¨åè®²è§£</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Stats stats;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">NetworkRequestHandler</span><span class=\"params\">(Downloader downloader, Stats stats)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.downloader = downloader;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.stats = stats;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">canHandleRequest</span><span class=\"params\">(Request data)</span> </span>&#123;</span><br><span class=\"line\">    String scheme = data.uri.getScheme(); <span class=\"comment\">// ä» scheme åˆ¤æ–­æ˜¯å¦ä¸ºç½‘ç»œå›¾ç‰‡è¯·æ±‚</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (SCHEME_HTTP.equals(scheme) || SCHEME_HTTPS.equals(scheme));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Result <span class=\"title\">load</span><span class=\"params\">(Request request, <span class=\"keyword\">int</span> networkPolicy)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">    Response response = downloader.load(request.uri, request.networkPolicy); <span class=\"comment\">// åŒæ­¥ä¸‹è½½</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (response == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    Picasso.LoadedFrom loadedFrom = response.cached ? DISK : NETWORK;</span><br><span class=\"line\"></span><br><span class=\"line\">    Bitmap bitmap = response.getBitmap();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// ç›´æ¥æ‹¿åˆ° Bitmapï¼Œåˆ™è¿”å›</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Result(bitmap, loadedFrom);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    InputStream is = response.getInputStream(); <span class=\"comment\">// æ‹¿åˆ°è¾“å…¥æµï¼Œéœ€è¦è§£ææˆ Bitmap </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (is == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// Sometimes response content length is zero when requests are being replayed. Haven't found</span></span><br><span class=\"line\">    <span class=\"comment\">// root cause to this but retrying the request seems safe to do so.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (loadedFrom == DISK &amp;&amp; response.getContentLength() == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      Utils.closeQuietly(is);</span><br><span class=\"line\">      <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ContentLengthException(<span class=\"string\">\"Received response with 0 content-length header.\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (loadedFrom == NETWORK &amp;&amp; response.getContentLength() &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      stats.dispatchDownloadFinished(response.getContentLength());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Result(is, loadedFrom);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°å®ƒæ˜¯å°†ä¸‹è½½ä»»åŠ¡å§”æ‰˜ç»™äº†<code>Downloader</code>è¿›è¡Œï¼Œ<code>Downloader</code>çš„æ³¨é‡Šé‡Œæè¿°çš„å¾ˆæ¸…æ¥šï¼Œå®ƒæ˜¯â€œA mechanism to load images from external resources such as a disk cache and/or the internet.â€ï¼Œç”¨äºåŠ è½½å¤–éƒ¨å›¾ç‰‡ï¼ˆç›¸æ¯”äºå†…å­˜ç¼“å­˜è€Œè¨€ï¼‰ã€‚æœ€ä¸»è¦çš„æ˜¯<code>load</code>æ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Response <span class=\"title\">load</span><span class=\"params\">(Uri uri, <span class=\"keyword\">int</span> networkPolicy)</span> <span class=\"keyword\">throws</span> IOException</span>;</span><br></pre></td></tr></table></figure>\n<p>å…¶ä¸­<code>Response</code>çš„ç»“æ„æ˜¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Response</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">final</span> InputStream stream;</span><br><span class=\"line\">\t<span class=\"keyword\">final</span> Bitmap bitmap;</span><br><span class=\"line\">\t<span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> cached; <span class=\"comment\">// å›¾ç‰‡æ˜¯å¦æ¥æºè‡ªç£ç›˜ç¼“å­˜ï¼ˆlocal disk cacheï¼‰</span></span><br><span class=\"line\">\t<span class=\"keyword\">final</span> <span class=\"keyword\">long</span> contentLength;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Downloader</code>æœ‰ä¸¤ä¸ªå®ç°</p>\n<ul>\n<li>OKHttpDownloaderï¼Œå¯¹åº” Android ç‰ˆæœ¬ &gt;= 4.4</li>\n<li>URLConnectionDownloaderï¼Œå¯¹åº” Android ç‰ˆæœ¬ &lt; 4.4</li>\n</ul>\n<p>åˆ¤æ–­ä»£ç ä½äº<code>Utils.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">static</span> Downloader <span class=\"title\">createDefaultDownloader</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t  Class.forName(<span class=\"string\">\"com.squareup.okhttp.OkHttpClient\"</span>);</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span> OkHttpLoaderCreator.create(context);</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">catch</span> (ClassNotFoundException ignored) &#123;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> UrlConnectionDownloader(context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>OKHttpDownloader</code>é‡Œé¢çš„<code>load</code>æ–¹æ³•ï¼Œé‡‡ç”¨ square è‡ªå®¶çš„<code>OKHttp</code>è¿›è¡Œä¸‹è½½ï¼Œåœ¨æ„å»ºå…¶ Builder æ—¶å†³å®šæ˜¯å¦ä½¿ç”¨ç£ç›˜ç¼“å­˜ã€‚æ¢è¨€ä¹‹ï¼Œè™½ç„¶<code>Picasso</code>å£°ç§°æœ‰å†…å­˜+ç£ç›˜ä¸¤çº§ç¼“å­˜ï¼Œå…¶ç£ç›˜ç¼“å­˜å…¶å®æ˜¯å€ŸåŠ©<code>OKHttp</code>å®ç°çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> Response <span class=\"title\">load</span><span class=\"params\">(Uri uri, <span class=\"keyword\">int</span> networkPolicy)</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">\tCacheControl cacheControl = <span class=\"keyword\">null</span>; <span class=\"comment\">// è¿™ä¸ª CacheControl æ˜¯ OKHttp é‡Œé¢çš„ç±»</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (networkPolicy != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (NetworkPolicy.isOfflineOnly(networkPolicy)) &#123;</span><br><span class=\"line\">\t    cacheControl = CacheControl.FORCE_CACHE;</span><br><span class=\"line\">\t  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">\t    CacheControl.Builder builder = <span class=\"keyword\">new</span> CacheControl.Builder();</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (!NetworkPolicy.shouldReadFromDiskCache(networkPolicy)) &#123;</span><br><span class=\"line\">\t      builder.noCache();</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">if</span> (!NetworkPolicy.shouldWriteToDiskCache(networkPolicy)) &#123;</span><br><span class=\"line\">\t      builder.noStore();</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    cacheControl = builder.build();</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tRequest.Builder builder = <span class=\"keyword\">new</span> Request.Builder().url(uri.toString());</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (cacheControl != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t  builder.cacheControl(cacheControl);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tcom.squareup.okhttp.Response response = client.newCall(builder.build()).execute(); <span class=\"comment\">// åŒæ­¥æ¥å£</span></span><br><span class=\"line\">\t<span class=\"keyword\">int</span> responseCode = response.code();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (responseCode &gt;= <span class=\"number\">300</span>) &#123;</span><br><span class=\"line\">\t  response.body().close();</span><br><span class=\"line\">\t  <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> ResponseException(responseCode + <span class=\"string\">\" \"</span> + response.message(), networkPolicy,</span><br><span class=\"line\">\t      responseCode);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">boolean</span> fromCache = response.cacheResponse() != <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">\tResponseBody responseBody = response.body();</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> <span class=\"keyword\">new</span> Response(responseBody.byteStream(), fromCache, responseBody.contentLength());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è‡³æ­¤<code>RequestHandler</code>çš„åˆ†æå·²ç»å®Œæˆï¼Œè™½ç„¶å®ƒåä¸º Handlerï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰åŒ…å«å·¥ä½œçº¿ç¨‹ä¸€ç±»çš„ä¸œè¥¿ï¼Œè¿™éƒ¨åˆ†ç›¸å…³ä»£ç å®é™…ä¸Šä½äº<code>Dispatcher.java</code>ä¸­ã€‚</p>\n<h1 id=\"ä»»åŠ¡è°ƒåº¦å™¨-Dispatcher\"><a href=\"#ä»»åŠ¡è°ƒåº¦å™¨-Dispatcher\" class=\"headerlink\" title=\"ä»»åŠ¡è°ƒåº¦å™¨ Dispatcher\"></a>ä»»åŠ¡è°ƒåº¦å™¨ Dispatcher</h1><p>ç†è§£<code>Dispatcher</code>ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ä»»åŠ¡ç±»<code>Action.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">abstract</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Action</span>&lt;<span class=\"title\">T</span>&gt; </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">RequestWeakReference</span>&lt;<span class=\"title\">M</span>&gt; <span class=\"keyword\">extends</span> <span class=\"title\">WeakReference</span>&lt;<span class=\"title\">M</span>&gt; </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">final</span> Action action;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">RequestWeakReference</span><span class=\"params\">(Action action, M referent, ReferenceQueue&lt;? <span class=\"keyword\">super</span> M&gt; q)</span> </span>&#123;</span><br><span class=\"line\">      <span class=\"keyword\">super</span>(referent, q);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.action = action;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Picasso picasso;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Request request;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> WeakReference&lt;T&gt; target;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> noFade;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> memoryPolicy;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> networkPolicy;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> errorResId;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Drawable errorDrawable;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> String key;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Object tag;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">boolean</span> willReplay;</span><br><span class=\"line\">  <span class=\"keyword\">boolean</span> cancelled;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">complete</span><span class=\"params\">(Bitmap result, Picasso.LoadedFrom from)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">error</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<p><code>Action</code>å¯ä»¥ç†è§£æˆä¸€é¡¹å›¾ç‰‡åŠ è½½ä»»åŠ¡ï¼Œå®ƒç»„åˆäº†ä¹‹å‰ä»‹ç»çš„<code>Request</code>å’Œ<code>RequestCreator</code>çš„å†…å®¹ï¼Œä¸”åŒ…å«åŠ è½½æˆåŠŸ/å¤±è´¥çš„å›è°ƒã€‚</p>\n<p>æ‰€æœ‰çš„<code>Action</code>ä»»åŠ¡éƒ½ä¼šè¢«ä¸¢ç»™<code>Dispatcher</code>æ‰§è¡Œ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Dispatcher</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> RETRY_DELAY = <span class=\"number\">500</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> AIRPLANE_MODE_ON = <span class=\"number\">1</span>; <span class=\"comment\">// é£è¡Œæ¨¡å¼ï¼Œä¼šå½±å“å¹¶å‘çº¿ç¨‹æ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> AIRPLANE_MODE_OFF = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> REQUEST_SUBMIT = <span class=\"number\">1</span>; <span class=\"comment\">// æ¶ˆæ¯ç±»å‹ï¼Œä¾› handler ä½¿ç”¨</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> REQUEST_CANCEL = <span class=\"number\">2</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> REQUEST_GCED = <span class=\"number\">3</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> HUNTER_COMPLETE = <span class=\"number\">4</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> HUNTER_RETRY = <span class=\"number\">5</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> HUNTER_DECODE_FAILED = <span class=\"number\">6</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> HUNTER_DELAY_NEXT_BATCH = <span class=\"number\">7</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> HUNTER_BATCH_COMPLETE = <span class=\"number\">8</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> NETWORK_STATE_CHANGE = <span class=\"number\">9</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> AIRPLANE_MODE_CHANGE = <span class=\"number\">10</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TAG_PAUSE = <span class=\"number\">11</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> TAG_RESUME = <span class=\"number\">12</span>;</span><br><span class=\"line\">  <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> REQUEST_BATCH_RESUME = <span class=\"number\">13</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String DISPATCHER_THREAD_NAME = <span class=\"string\">\"Dispatcher\"</span>;</span><br><span class=\"line\">  <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> BATCH_DELAY = <span class=\"number\">200</span>; <span class=\"comment\">// ms</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">final</span> DispatcherThread dispatcherThread; <span class=\"comment\">// è°ƒåº¦å™¨çº¿ç¨‹</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Context context;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> ExecutorService service; <span class=\"comment\">// çº¿ç¨‹æ± </span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Downloader downloader; <span class=\"comment\">// ä¸‹è½½å™¨</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Map&lt;String, BitmapHunter&gt; hunterMap; <span class=\"comment\">// çº¿ç¨‹ map</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Map&lt;Object, Action&gt; failedActions;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Map&lt;Object, Action&gt; pausedActions;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Set&lt;Object&gt; pausedTags;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Handler handler; <span class=\"comment\">// DispatchHandler</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Handler mainThreadHandler; <span class=\"comment\">// UI å˜æ›´</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Cache cache;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Stats stats; <span class=\"comment\">// ç»Ÿè®¡æ•°æ®ï¼ŒåŒ…å«å‘½ä¸­ç¼“å­˜ã€æœªå‘½ä¸­ç¼“å­˜ã€è§£ç ã€ä¸‹è½½è®¡æ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> List&lt;BitmapHunter&gt; batch;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> NetworkBroadcastReceiver receiver; <span class=\"comment\">// ç›‘å¬ç½‘ç»œå˜åŒ–ï¼Œè°ƒæ•´å¹¶å‘çº¿ç¨‹æ•°</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> scansNetworkChanges;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">boolean</span> airplaneMode;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ—¢ç„¶åä¸º<code>Dispatcher</code>ï¼Œè‚¯å®šå°‘ä¸äº†<code>dispatchXXX</code>çš„æ–¹æ³•ï¼Œå®ƒä»¬çš„å¤„ç†æ–¹æ³•å®Œå…¨ä¸€æ ·ï¼Œéƒ½æ˜¯æŠŠæ¶ˆæ¯ä¸¢ç»™<code>DispatchHandler</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dispatchSubmit</span><span class=\"params\">(Action action)</span> </span>&#123;</span><br><span class=\"line\">  handler.sendMessage(handler.obtainMessage(REQUEST_SUBMIT, action));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dispatchCancel</span><span class=\"params\">(Action action)</span> </span>&#123;</span><br><span class=\"line\">  handler.sendMessage(handler.obtainMessage(REQUEST_CANCEL, action));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">dispatchPauseTag</span><span class=\"params\">(Object tag)</span> </span>&#123;</span><br><span class=\"line\">  handler.sendMessage(handler.obtainMessage(TAG_PAUSE, tag));</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// ä»¥ä¸‹è¿˜æœ‰ dispatchResumeTagã€dispatchCompleteã€dispatchRetryï¼Œç•¥</span></span><br><span class=\"line\">...</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>DispatchHandler</code>æ˜¯ç”¨äºæ¥æ”¶å¤„ç†è¿™äº›æ¶ˆæ¯çš„ç±»</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DispatcherHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Dispatcher dispatcher;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">DispatcherHandler</span><span class=\"params\">(Looper looper, Dispatcher dispatcher)</span> </span>&#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">super</span>(looper);</span><br><span class=\"line\">\t  <span class=\"keyword\">this</span>.dispatcher = dispatcher;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(<span class=\"keyword\">final</span> Message msg)</span> </span>&#123;</span><br><span class=\"line\">\t  <span class=\"keyword\">switch</span> (msg.what) &#123;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> REQUEST_SUBMIT: &#123;</span><br><span class=\"line\">\t      Action action = (Action) msg.obj;</span><br><span class=\"line\">\t      dispatcher.performSubmit(action);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> REQUEST_CANCEL: &#123;</span><br><span class=\"line\">\t      Action action = (Action) msg.obj;</span><br><span class=\"line\">\t      dispatcher.performCancel(action);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> TAG_PAUSE: &#123;</span><br><span class=\"line\">\t      Object tag = msg.obj;</span><br><span class=\"line\">\t      dispatcher.performPauseTag(tag);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> TAG_RESUME: &#123;</span><br><span class=\"line\">\t      Object tag = msg.obj;</span><br><span class=\"line\">\t      dispatcher.performResumeTag(tag);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> HUNTER_COMPLETE: &#123;</span><br><span class=\"line\">\t      BitmapHunter hunter = (BitmapHunter) msg.obj;</span><br><span class=\"line\">\t      dispatcher.performComplete(hunter);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> HUNTER_RETRY: &#123;</span><br><span class=\"line\">\t      BitmapHunter hunter = (BitmapHunter) msg.obj;</span><br><span class=\"line\">\t      dispatcher.performRetry(hunter);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> HUNTER_DECODE_FAILED: &#123;</span><br><span class=\"line\">\t      BitmapHunter hunter = (BitmapHunter) msg.obj;</span><br><span class=\"line\">\t      dispatcher.performError(hunter, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> HUNTER_DELAY_NEXT_BATCH: &#123;</span><br><span class=\"line\">\t      dispatcher.performBatchComplete();</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> NETWORK_STATE_CHANGE: &#123;</span><br><span class=\"line\">\t      NetworkInfo info = (NetworkInfo) msg.obj;</span><br><span class=\"line\">\t      dispatcher.performNetworkStateChange(info);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">case</span> AIRPLANE_MODE_CHANGE: &#123;</span><br><span class=\"line\">\t      dispatcher.performAirplaneModeChange(msg.arg1 == AIRPLANE_MODE_ON);</span><br><span class=\"line\">\t      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t    &#125;</span><br><span class=\"line\">\t    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">\t      Picasso.HANDLER.post(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">\t        <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\t          <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> AssertionError(<span class=\"string\">\"Unknown handler message received: \"</span> + msg.what);</span><br><span class=\"line\">\t        &#125;</span><br><span class=\"line\">\t      &#125;);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°ï¼Œå¤„ç†æ‰‹æ®µæ˜¯å–å‡ºæ¶ˆæ¯é‡Œçš„<code>Action</code>ï¼Œç„¶åè°ƒç”¨<code>Dispatcher</code>ä¸­<code>performXXX</code>ç›´æ¥è¿›è¡Œå¤„ç†ã€‚è¿™ç§<code>Dispatcher</code>ç»„åˆ<code>Handler</code>çš„æ¨¡å¼å€¼å¾—å­¦ä¹ å€Ÿé‰´ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…·ä½“çœ‹ä¸€ä¸‹<code>performSubmit</code>ä¹Ÿå°±æ˜¯æäº¤ä¸€ä¸ªå›¾ç‰‡åŠ è½½è¯·æ±‚å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">performSubmit</span><span class=\"params\">(Action action, <span class=\"keyword\">boolean</span> dismissFailed)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (pausedTags.contains(action.getTag())) &#123; <span class=\"comment\">// å¦‚æœè¯·æ±‚å·²ç»è¢« pauseï¼Œåˆ™ä¸ç»§ç»­å‘ä¸‹å¤„ç†</span></span><br><span class=\"line\">\t  pausedActions.put(action.getTarget(), action);</span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (action.getPicasso().loggingEnabled) &#123;</span><br><span class=\"line\">\t    log(OWNER_DISPATCHER, VERB_PAUSED, action.request.logId(),</span><br><span class=\"line\">\t        <span class=\"string\">\"because tag '\"</span> + action.getTag() + <span class=\"string\">\"' is paused\"</span>);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\tBitmapHunter hunter = hunterMap.get(action.getKey());</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (hunter != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// BitmapHunter æ˜¯å·¥ä½œçº¿ç¨‹ç±»ï¼ˆå®ç° Runnable æ¥å£ï¼‰ï¼Œè‹¥ä¸€å¼ å›¾ç‰‡å·²ç»æœ‰å·¥ä½œçº¿ç¨‹åœ¨å¤„ç†ï¼Œåˆ™å°†å½“å‰ Action é™„åˆ°å·¥ä½œçº¿ç¨‹çš„é˜Ÿåˆ—ä¸­</span></span><br><span class=\"line\">\t  hunter.attach(action);</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (service.isShutdown()) &#123; <span class=\"comment\">// çº¿ç¨‹æ± å·²åœæ­¢</span></span><br><span class=\"line\">\t  <span class=\"keyword\">if</span> (action.getPicasso().loggingEnabled) &#123;</span><br><span class=\"line\">\t    log(OWNER_DISPATCHER, VERB_IGNORED, action.request.logId(), <span class=\"string\">\"because shut down\"</span>);</span><br><span class=\"line\">\t  &#125;</span><br><span class=\"line\">\t  <span class=\"keyword\">return</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"comment\">// ç”Ÿæˆä¸€ä¸ª BitmapHunter</span></span><br><span class=\"line\">\thunter = forRequest(action.getPicasso(), <span class=\"keyword\">this</span>, cache, stats, action);</span><br><span class=\"line\">\thunter.future = service.submit(hunter); <span class=\"comment\">// è¿™é‡Œå¾ˆé‡è¦ï¼Œæäº¤ä¸€ä¸ª Runnable ç»™çº¿ç¨‹æ± </span></span><br><span class=\"line\">\thunterMap.put(action.getKey(), hunter); <span class=\"comment\">// å­˜è¿›å·¥ä½œçº¿ç¨‹ Map</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (dismissFailed) &#123;</span><br><span class=\"line\">\t  failedActions.remove(action.getTarget());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (action.getPicasso().loggingEnabled) &#123;</span><br><span class=\"line\">\t  log(OWNER_DISPATCHER, VERB_ENQUEUED, action.request.logId());</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"èŒè´£é‡å¤§çš„-BitmapHunter\"><a href=\"#èŒè´£é‡å¤§çš„-BitmapHunter\" class=\"headerlink\" title=\"èŒè´£é‡å¤§çš„ BitmapHunter\"></a>èŒè´£é‡å¤§çš„ BitmapHunter</h1><p><code>BitmapHunter</code>å®ç°äº†<code>Runnable</code>æ¥å£ï¼Œ<code>run</code>æ–¹æ³•å¯ä»¥çœ‹ä½œå¯¹ä¸€æ¬¡å›¾ç‰‡è¯·æ±‚çš„å®Œæ•´å¤„ç†è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯æ–‡åˆæåˆ°çš„â€œè·å– - å˜æ¢ - æ˜¾ç¤ºâ€ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">BitmapHunter</span> <span class=\"keyword\">implements</span> <span class=\"title\">Runnable</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> sequence; <span class=\"comment\">// åºåˆ—å·ï¼ŒåŸºäº AtomicInteger å®ç°</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Picasso picasso; <span class=\"comment\">// å•ä¾‹</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Dispatcher dispatcher; <span class=\"comment\">// ä»»åŠ¡è°ƒåº¦å™¨</span></span><br><span class=\"line\">  <span class=\"keyword\">final</span> Cache cache;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Stats stats;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> String key;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> Request data;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> memoryPolicy;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> networkPolicy;</span><br><span class=\"line\">  <span class=\"keyword\">final</span> RequestHandler requestHandler;</span><br><span class=\"line\"></span><br><span class=\"line\">  Action action;</span><br><span class=\"line\">  List&lt;Action&gt; actions; <span class=\"comment\">// ä¸€ä¸ª BitmapHunter å¯ä»¥å¤„ç†å¤šä¸ª Action</span></span><br><span class=\"line\">  Bitmap result;</span><br><span class=\"line\">  Future&lt;?&gt; future;</span><br><span class=\"line\">  Picasso.LoadedFrom loadedFrom;</span><br><span class=\"line\">  Exception exception;</span><br><span class=\"line\">  <span class=\"keyword\">int</span> exifRotation; <span class=\"comment\">// Determined during decoding of original resource.</span></span><br><span class=\"line\">  <span class=\"keyword\">int</span> retryCount;</span><br><span class=\"line\">  Priority priority;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>EXIFï¼ˆExchangeable Image Fileï¼‰æ˜¯â€œå¯äº¤æ¢å›¾åƒæ–‡ä»¶â€çš„ç¼©å†™ï¼Œå½“ä¸­åŒ…å«äº†ä¸“é—¨ä¸ºæ•°ç ç›¸æœºçš„ç…§ç‰‡è€Œå®šåˆ¶çš„å…ƒæ•°æ®ï¼Œå¯ä»¥è®°å½•æ•°ç ç…§ç‰‡çš„æ‹æ‘„å‚æ•°ã€ç¼©ç•¥å›¾åŠå…¶ä»–å±æ€§ä¿¡æ¯ã€‚å¾ˆå¤šå›¾åƒç¼–è¾‘å™¨ä¼šè‡ªåŠ¨è¯»å–Exifæ•°æ®æ¥å¯¹å›¾åƒè¿›è¡Œä¼˜åŒ–ï¼Œæœ€å¸¸è§çš„ä¾¿æ˜¯ä» Exifä¸­è¯»å–å‡º<strong>ç›¸æœºå§¿æ€</strong>ä¿¡æ¯ï¼Œä»è€Œè‡ªåŠ¨è¯†åˆ«å‡ºç«–æ‹ç”šè‡³æ˜¯é¢ å€’æ‹æ‘„çš„ç…§ç‰‡å¹¶å¯¹å…¶è¿›è¡Œ<strong>æ—‹è½¬</strong>æ ¡æ­£ã€‚</p>\n</blockquote>\n<p><code>run()</code>æ–¹æ³•æ˜¯å¯¹å›¾ç‰‡çš„å¤„ç†æµç¨‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    updateThreadName(data);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (picasso.loggingEnabled) &#123;</span><br><span class=\"line\">      log(OWNER_HUNTER, VERB_EXECUTING, getLogIdsForHunter(<span class=\"keyword\">this</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    result = hunt(); <span class=\"comment\">// åŒæ­¥è·å–ç»“æœ</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (result == <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// é€šçŸ¥ Dispatcher ä»»åŠ¡å®Œæˆ</span></span><br><span class=\"line\">      dispatcher.dispatchFailed(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      dispatcher.dispatchComplete(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (Downloader.ResponseException e) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!e.localCacheOnly || e.responseCode != <span class=\"number\">504</span>) &#123;</span><br><span class=\"line\">      exception = e;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    dispatcher.dispatchFailed(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (NetworkRequestHandler.ContentLengthException e) &#123; <span class=\"comment\">// éå¸¸ç»†èŠ‚çš„é”™è¯¯å¤„ç†</span></span><br><span class=\"line\">    exception = e;</span><br><span class=\"line\">    dispatcher.dispatchRetry(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (IOException e) &#123;</span><br><span class=\"line\">    exception = e;</span><br><span class=\"line\">    dispatcher.dispatchRetry(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (OutOfMemoryError e) &#123;</span><br><span class=\"line\">    StringWriter writer = <span class=\"keyword\">new</span> StringWriter();</span><br><span class=\"line\">    stats.createSnapshot().dump(<span class=\"keyword\">new</span> PrintWriter(writer));</span><br><span class=\"line\">    exception = <span class=\"keyword\">new</span> RuntimeException(writer.toString(), e);</span><br><span class=\"line\">    dispatcher.dispatchFailed(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">    exception = e;</span><br><span class=\"line\">    dispatcher.dispatchFailed(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">    Thread.currentThread().setName(Utils.THREAD_IDLE_NAME);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯è§å¯¹å›¾ç‰‡çš„è·å–å’Œå¤„ç†åœ¨<code>hunt</code>ä¸­ï¼Œå¯¹å¾—èµ·<code>BitmapHunter</code>è¿™ä¸ªåå­—</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">Bitmap <span class=\"title\">hunt</span><span class=\"params\">()</span> <span class=\"keyword\">throws</span> IOException </span>&#123;</span><br><span class=\"line\">  Bitmap bitmap = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (shouldReadFromMemoryCache(memoryPolicy)) &#123; <span class=\"comment\">// æ£€æŸ¥å†…å­˜ç¼“å­˜</span></span><br><span class=\"line\">    bitmap = cache.get(key);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      stats.dispatchCacheHit();</span><br><span class=\"line\">      loadedFrom = MEMORY;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (picasso.loggingEnabled) &#123;</span><br><span class=\"line\">        log(OWNER_HUNTER, VERB_DECODED, data.logId(), <span class=\"string\">\"from cache\"</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> bitmap;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  data.networkPolicy = retryCount == <span class=\"number\">0</span> ? NetworkPolicy.OFFLINE.index : networkPolicy;</span><br><span class=\"line\">  RequestHandler.Result result = requestHandler.load(data, networkPolicy); <span class=\"comment\">// è°ƒç”¨ handler åŒæ­¥è·å–ç»“æœ</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (result != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">    loadedFrom = result.getLoadedFrom();</span><br><span class=\"line\">    exifRotation = result.getExifOrientation(); <span class=\"comment\">// ä» exif é‡Œè·å–æ—‹è½¬è§’åº¦</span></span><br><span class=\"line\"></span><br><span class=\"line\">    bitmap = result.getBitmap();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// If there was no Bitmap then we need to decode it from the stream.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (bitmap == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">      InputStream is = result.getStream(); <span class=\"comment\">// è§£ç å›¾ç‰‡</span></span><br><span class=\"line\">      <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">        bitmap = decodeStream(is, data);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">        Utils.closeQuietly(is); <span class=\"comment\">// quietly çš„å«ä¹‰æ˜¯æ— è§†æ‰€æœ‰å¼‚å¸¸</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123; <span class=\"comment\">// å–åˆ°è§£ç åçš„å›¾ç‰‡ï¼Œè¿›è¡Œè½¬æ¢å’Œæ˜¾ç¤º</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (picasso.loggingEnabled) &#123;</span><br><span class=\"line\">      log(OWNER_HUNTER, VERB_DECODED, data.logId());</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    stats.dispatchBitmapDecoded(bitmap); <span class=\"comment\">// è¿™é‡Œåªæ˜¯è®¡æ•°ï¼Œå¹¶æœªæ“ä½œè½¬æ¢</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data.needsTransformation() || exifRotation != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">synchronized</span> (DECODE_LOCK) &#123; <span class=\"comment\">// å¿…é¡»åŠ é”ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€å¼ å›¾ç‰‡ï¼Œé˜²æ­¢ OOM</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data.needsMatrixTransform() || exifRotation != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">          bitmap = transformResult(data, bitmap, exifRotation); <span class=\"comment\">// è¿ç”¨ matrix çš„ scale ä¸ rotate å¤„ç†å›¾ç‰‡</span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (picasso.loggingEnabled) &#123;</span><br><span class=\"line\">            log(OWNER_HUNTER, VERB_TRANSFORMED, data.logId());</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (data.hasCustomTransformations()) &#123; <span class=\"comment\">// è‡ªå®šä¹‰è½¬æ¢ï¼Œæ¯”å¦‚åœ†è§’</span></span><br><span class=\"line\">          bitmap = applyCustomTransformations(data.transformations, bitmap);</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (picasso.loggingEnabled) &#123;</span><br><span class=\"line\">            log(OWNER_HUNTER, VERB_TRANSFORMED, data.logId(), <span class=\"string\">\"from custom transformations\"</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (bitmap != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        stats.dispatchBitmapTransformed(bitmap);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> bitmap;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæ•´ä¸ªå›¾ç‰‡çš„åŠ è½½æµç¨‹åŸºæœ¬åˆ†æå®Œæˆï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç±»å›¾ï¼Œå‡ºå¤„è§æ–‡æœ«ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180703_picasso/picasso_classes_relation.png\" alt=\"ç±»å›¾\" title=\"\">\n                </div>\n                <div class=\"image-caption\">ç±»å›¾</div>\n            </figure>\n<h1 id=\"ç¢ç¢å¿µ\"><a href=\"#ç¢ç¢å¿µ\" class=\"headerlink\" title=\"ç¢ç¢å¿µ\"></a>ç¢ç¢å¿µ</h1><p>åœ¨æˆ‘çœ‹æ¥ï¼Œåšä¸€ä¸ªå¼€æºé¡¹ç›®çš„æºç è§£è¯»ï¼Œä¸€èˆ¬æœ‰ä¸¤ä¸ªåˆ‡å…¥ç‚¹ã€‚</p>\n<ol>\n<li>å…ˆåé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼Œâ€œå¦‚æœè®©ä½ å®ç°ä¸€ä¸ª XX æ¡†æ¶ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿâ€ï¼Œç”»å‡ºæµç¨‹å›¾ï¼Œåˆ—å‡ºæ‰¿æ‹…ä¸»è¦èŒè´£çš„ç±»ï¼›ç„¶åå†å¯¹ç…§ç€è‡ªå·±çš„è®¾è®¡ï¼Œå»é˜…è¯»å¹¶ç†è§£é¡¹ç›®ä»£ç ã€‚æˆ‘æŠŠå®ƒå«åš<code>è‡ªé¡¶å‘ä¸‹</code>ã€‚</li>\n<li>ä»é¡¹ç›®ä»£ç çš„å…¥å£å¼€å§‹ï¼ˆä¸€èˆ¬æ˜¯å‡½æ•°è°ƒç”¨å¤„ï¼‰ï¼Œé€çº§è¿½è¸ªï¼Œå¼„æ¸…æ¥šæ¯ä¸€æ­¥æ¶‰åŠåˆ°å“ªäº›ç±»ï¼Œå®ƒä»¬çš„èŒè´£æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·æœ€åä¼šæœ‰ä¸€ä¸ªé“¾å¼çš„è°ƒç”¨åœ¨ä½ è„‘æµ·ä¸­ã€‚æˆ‘æŠŠå®ƒå«åš<code>è‡ªåº•å‘ä¸Š</code>ã€‚</li>\n</ol>\n<p>æ–¹æ³• 1 èƒ½è®©ä½ åœ¨å¼€å§‹æ—¶çºµè§ˆå…¨å±€ï¼Œå¯¹æ¯ä¸€ä¸ªæ¨¡å—æœ‰å¤§è‡´çš„è½®å»“ï¼Œéšç€é€æ­¥æ·±å…¥å­¦ä¹ ä»£ç ï¼Œå¯¹å…¶è®¤è¯†ä¼šè¿›ä¸€æ­¥åŠ æ·±ï¼Œæœ€ååŒ–ä¸ºå·±ç”¨ï¼›ä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œä½ ä¸å¯èƒ½ä¸€ä¸Šæ¥å°±æŠŠæµç¨‹å›¾ã€ç±»å›¾ç»˜åˆ¶åœ°æ˜æ˜ç™½ç™½ï¼Œéœ€è¦ä½ å¯¹é¡¹ç›®ä»£ç æœ‰ä¸€äº›ç†è§£ï¼Œä¹Ÿè®¸è¿˜éœ€è¦ä¸€å®šçš„è®¾è®¡æ¨¡å¼çŸ¥è¯†ã€‚æ–¹æ³• 2 å®¹æ˜“ä¸Šæ‰‹ï¼Œå¦‚æœé¡¹ç›®ç®€å•è¿˜å¥½ï¼Œè‹¥æ˜¯å¤æ‚é¡¹ç›®å¾ˆå®¹æ˜“è®©äººè¿·å¤±å…¶ä¸­ã€‚æœ¬æ–‡é‡‡ç”¨çš„æ˜¯æ–¹æ³• 1 çš„æ€è·¯ï¼Œä»¥ä¸‹ä¸¤ç¯‡æ–‡ç« åˆ†åˆ«å¯¹åº”æ–¹æ³• 1 å’Œ 2ï¼Œå®ƒä»¬åœ¨æˆ‘å†™æœ¬æ–‡çš„è¿‡ç¨‹ä¸­æä¾›äº†å¤§é‡å¸®åŠ©ï¼Œéå¸¸æ„Ÿè°¢åŸä½œè€…ã€‚</p>\n<ol>\n<li><a href=\"https://juejin.im/entry/5aba4fc46fb9a028da7c8ef4\" target=\"_blank\" rel=\"noopener\">Android é¢è¯•åŠ©åŠ›ï¼šä¸€æ¬¡è¯»æ‡‚çƒ­é—¨å›¾ç‰‡æ¡†æ¶ Picasso æºç åŠæµç¨‹</a></li>\n<li><a href=\"https://skykai521.github.io/2016/02/25/Picasso%E6%BA%90%E4%BB%A3%E7%A0%81%E5%88%86%E6%9E%90/\" target=\"_blank\" rel=\"noopener\">Picassoæºä»£ç åˆ†æ</a></li>\n</ol>\n","categories":[],"tags":["Android","æºç å­¦ä¹ "]},{"title":"ä½œæ¯æ—¶é—´è¡¨","url":"https://lilei.pro/2018/05/15/schedule2018/","content":"<blockquote>\n<p>A man is not old as long as he is seeking something. A man is not old until regrets take the place of dreams.</p>\n</blockquote>\n<p>å¼€å§‹æ—¥æœŸ 2018.5.15</p>\n<table>\n<thead>\n<tr>\n<th>æ—¶é—´</th>\n<th>äº‹é¡¹</th>\n<th>å¤‡æ³¨</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>6:00~7:00</td>\n<td>èµ·åºŠï¼Œæ´—æ¼±ï¼Œæ—©é¥­ï¼Œæ¸…ç†æˆ¿é—´</td>\n<td>è§£å†»ç‰›æ’</td>\n</tr>\n<tr>\n<td>7:00~11:00</td>\n<td>ä¸Šåˆè‡ªä¹ </td>\n<td>å‰ç«¯å¼€å‘</td>\n</tr>\n<tr>\n<td>11:00~13:30</td>\n<td>è®­ç»ƒ</td>\n<td>èƒ¸ï¼ŒèƒŒï¼Œè…¿ï¼Œè‚©ï¼Œä¸Šè‡‚ï¼Œå°è…¿å°è‡‚</td>\n</tr>\n<tr>\n<td>13:30~14:30</td>\n<td>åˆé¥­</td>\n<td>/</td>\n</tr>\n<tr>\n<td>14:30~18:00</td>\n<td>ä¸‹åˆè‡ªä¹ </td>\n<td>è®¡ç®—æœºé€šç”¨æŠ€èƒ½</td>\n</tr>\n<tr>\n<td>18:00~19:00</td>\n<td>æ™šé¥­</td>\n<td>å…¨å®¶è´­ä¹°è”¬èœè‰²æ‹‰</td>\n</tr>\n<tr>\n<td>19:00~22:00</td>\n<td>æ™šè‡ªä¹ </td>\n<td>åšå®¢ï¼Œæ—¥è®°</td>\n</tr>\n<tr>\n<td>22:00~23:00</td>\n<td>æ´—æ¼±ï¼Œæ´—è¡£æœ</td>\n<td>/</td>\n</tr>\n<tr>\n<td>23:00</td>\n<td>ç¡è§‰</td>\n<td>/</td>\n</tr>\n</tbody>\n</table>\n","categories":["ç”Ÿæ´»"],"tags":["ç”Ÿæ´»"]},{"title":"æˆ‘ï¼Œå ‚å‰è¯ƒå¾·","url":"https://lilei.pro/2018/05/06/Man-of-Lamancha/","content":"<blockquote>\n<p>To dream the impossible dream<br>to fight the unbeatable foe<br>to bear with unbearable sorrow<br>to run where the brave dare not go<br>to right the unrightable wrong<br>to love pure and chaste from afar<br>to try when your arms are too weary<br>to reach the unreachable star</p>\n</blockquote>\n<p>ç‚¹å‡»æ’­æ”¾è‹±æ–‡ç‰ˆ<a href=\"http://music.163.com/#/song?id=5052055\" target=\"_blank\" rel=\"noopener\">The Impossible Dream</a></p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180506_man_of_lamancha/å ‚å‰è¯ƒå¾·.png\" alt=\"æˆ‘ï¼Œå ‚å‰è¯ƒå¾·\" title=\"\">\n                </div>\n                <div class=\"image-caption\">æˆ‘ï¼Œå ‚å‰è¯ƒå¾·</div>\n            </figure>\n<p>è¿™æ˜¯æç£Šåœ¨2018å¹´è®°å½•çš„ç¬¬ä¸€éƒ¨éŸ³ä¹å‰§/è¯å‰§ï¼Œ2018å¹´5æœˆ5æ—¥ï¼Œäºä¸Šæµ·å¤§èˆå°ã€‚</p>\n<p>å‘¨å…­ï¼Œä¸‹ç€å°é›¨ï¼Œä»äººå¹¿åœ°é“ç«™14å·å£èµ°å‡ºä¸è¿œï¼Œå°±åˆ°äº†æ­¤å‰§çš„æ¼”å‡ºåœ°ç‚¹ä¸Šæµ·å¤§èˆå°ï¼Œç¦»å¼€åœºè¿˜æœ‰45åˆ†é’Ÿï¼Œäºæ˜¯åœ¨é™„è¿‘èµ°äº†ä¸€èµ°ã€‚è¡—å¯¹é¢æœ‰ä¸€æ‰€é€ å‹ä¼˜ç¾çš„æ•™å ‚ï¼Œä¸¤é¢—è·¯å£å¤–ï¼Œæ˜¯äººå¤´æ”’åŠ¨çš„å—äº¬è·¯æ­¥è¡Œè¡—ï¼Œå³ä½¿å¤©å…¬ä¸ä½œç¾ï¼Œä¹Ÿå¹¶æœªæ‰“æ¶ˆæ¸¸äººä»¬çš„å…´è‡´ã€‚ä¸Šä¸€æ¬¡è‡ªå·±æ¥è¿™é‡Œè¿˜æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿæ€•æ˜¯æœ‰ä¸€ä¸¤å¹´å§ã€‚</p>\n<p>è¾èŒä¹‹åï¼Œè‡ªå·±å˜å¾—å¤ªæ‡’ï¼Œè¿™ä¸æ˜¯ä¸ªå¥½ç°è±¡ã€‚14:15å›åˆ°å‰§åœºï¼Œæ£€ç¥¨ï¼Œè¿›åœºå…¥åº§ã€‚</p>\n<p>åˆè¯†ä¸çŸ¥å‰§ä¸­æ„ï¼Œå†è§å·²æ˜¯å‰§ä¸­äººã€‚</p>\n<p>è¿™éƒ¨å‰§å¥½ä¹ˆï¼Ÿ</p>\n<p>å¥½ï¼Œæ¯ä¸€ä¸ªåœ¨ç¤¾ä¼šçš„æ±ªæ´‹å¤§æµ·ä¸­æ‰¾ä¸åˆ°æ–¹å‘çš„äººï¼Œéƒ½åº”è¯¥å»çœ‹ä¸€çœ‹ã€‚å¥¹é…å¾—ä¸Šé‚£ä¸€å¥å®£ä¼ è¯­â€”â€”â€œä¸€ç”Ÿä¸­å€¼å¾—çœ‹ä¸‰éçš„éŸ³ä¹å‰§â€ã€‚ç°å®ç”Ÿæ´»ä¸­ï¼Œä»–æ˜¯æ‹‰æ›¼æŸ¥çš„è€è¿ˆä¹¡ç»…é˜¿éš†ç´¢ï¼Œåœ¨ä»–çš„ä¸–ç•Œé‡Œï¼Œå´æ˜¯èº«æŠ«ç”²èƒ„æŒ‘æˆ˜æ¶é¾™èµ¢å¾—å…¬ä¸»èŠ³å¿ƒçš„æ¸¸ä¾ éª‘å£«å ‚å‰è¯ƒå¾·ã€‚</p>\n<p>å°è±¡æœ€æ·±çš„æ˜¯ï¼Œå½“å ‚å‰è¯ƒå¾·çš„éª‘å£«å¹»æ¢¦è¢«é•œå­éª‘å£«æ­ç©¿åï¼Œé‚£èººåœ¨ç—…åºŠä¸Šçš„è€äººä»¿ä½›ä¸€ç¬é—´è¢«æŠ½å»äº†çµé­‚ï¼Œå°½ç®¡è‡ªå·±ååœ¨å½±é™¢äºŒæ¥¼ï¼Œä¼¼ä¹å´å¯ä»¥çœ‹åˆ°ä»–çš„çœ¼ä¸­å¤±å»äº†å¾€æ˜”çš„å…‰å½©ã€‚</p>\n<p>åœ¨â€œæ­£å¸¸äººâ€çœ¼ä¸­ï¼Œé€€ä¼‘çš„ä¹¡ç»…åº”è¯¥æ‹¾æ‡èŠ±åœƒå®‰åº¦æ™šå¹´ï¼Œå¦“å¥³ä¸€å®šæ˜¯ç‹‚èœ‚æµªè¶äººå°½å¯å¤«ï¼Œè€Œé˜¿éš†ç´¢æ”¶ç¨æ”¶åˆ°äº†æ•™å ‚å¤´ä¸Šï¼Œç®€ç›´æ˜¯ä¸è¯†æŠ¬ä¸¾ã€‚</p>\n<p>åœ¨ä»–ä»¬çœ‹æ¥ï¼Œé£è½¦å°±æ˜¯é£è½¦ï¼Œç†å‘åŒ çš„è„¸ç›†è·Ÿé‡‘å¤´ç›”å…«æ†å­æ‰“ä¸ç€ï¼Œå§‘ä¸”å«ä½ ä¸€å£°å“­ä¸§è„¸çš„éª‘å£«ï¼Œä¸ç–¯å­ä¸éœ€è®¡è¾ƒã€‚</p>\n<blockquote>\n<p>æˆ‘ä»¬çš„æ–‡åŒ–ä¸€ç›´ä»¥æ¥å¼ºè°ƒçš„æ˜¯äººçš„ç¤¾ä¼šå±æ€§ï¼šçˆ¶äº²ã€å„¿å­ã€å‘˜å·¥ã€è€æ¿ã€å¤–ä¹¡äººã€æ¶ˆè´¹è€…â€¦â€¦å½“æˆ‘ä»¬å‘é™Œç”Ÿäººè‡ªæˆ‘ä»‹ç»æ—¶ï¼Œæœ€å…ˆè¯´çš„æ˜¯â€œä»–æ˜¯ä¸€ä¸ªæ•™å¸ˆâ€ã€â€œä»–æ˜¯ä¸€ååŒ»ç”Ÿâ€ï¼Œæˆ‘ä»¬è‡ªç„¶ä¼šåœ¨å¬åˆ°è¿™å¥è¯åï¼Œä¸ºçœ¼å‰è¿™ä¸ªäººè´´ä¸Šå¥½å¤šä¸ªå±æ€§æ ‡ç­¾ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¤ªå°‘è°ˆåŠä½œä¸ºä¸€ä¸ªäººçš„è‡ªç„¶å±æ€§ï¼šäººæ ¼ã€å°Šä¸¥ã€è‡ªç”±ã€å¿«ä¹ã€å¹¸ç¦ã€è¿½æ±‚ã€è¿˜æœ‰ç†æƒ³ã€‚</p>\n</blockquote>\n<p>è¿™ç§ç†æƒ³ï¼Œä¸æ˜¯YYè‡ªå·±èº«æŠ«é‡‘ç”²åœ£è¡£ã€è„šè¸©ä¸ƒå½©ç¥¥äº‘ï¼Œäºä¸‡ä¼—ç©ç›®ä¸­ä»¥ä¸€å·±ä¹‹åŠ›é€†è½¬ä¹¾å¤ï¼Œç†æƒ³åº”å½“æ˜¯åšå®šçš„ã€å€¼å¾—æŒä¹‹ä»¥æ’çš„ã€å¯ä»¥å®ç°çš„ã€‚ç†æƒ³ä¸åº”å½“æ˜¯åŠ¨ç‰©æ€§ï¼Œè´ªå©ªã€æ‡’æƒ°ã€æš´é£Ÿã€æ·«æ¬²ã€æ„¤æ€’ã€å«‰å¦’ã€å‚²æ…¢ã€‚ç†æƒ³åº”å½“æ˜¯æ— å®³äºäººå¹¶ä¸”æœ‰åˆ©äºå·±ã€‚</p>\n<p>å³ä½¿ä¸€ä¸ªäººæ´»çš„åƒæ¡ç‹—ï¼Œä¹Ÿä¸çŸ›ç›¾ã€‚</p>\n<p>å»é—®è‡ªå·±çš„å†…å¿ƒï¼Œæƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Œè€Œä¸æ˜¯è®©è¿™ä¸ªç¤¾ä¼šå‘Šè¯‰ä½ ï¼Œè¦è¿‡ä»€ä¹ˆæ ·çš„ç”Ÿæ´»ã€‚</p>\n<p>ç‰‡ä¸­çš„å°é©¬å°é©´è¡¨æ¼”çš„é¢‡æœ‰çµæ°”ï¼Œåœ¨èˆå°ä¸€è§’æˆä»½å¾ˆè¶³ï¼Œå¯æƒœååœ¨äºŒæ¥¼è§†çº¿ä¸å¥½ï¼Œè¢«é®æŒ¡äº†ä¸€äº›ã€‚</p>\n<p>å»æ‘˜ï¼Œé¥ä¸å¯åŠçš„æ˜Ÿï¼</p>\n<p>åˆ†äº«ä¸€ç¯‡æ–‡ç«  <a href=\"https://www.zhihu.com/question/38850898/answer/135944882\" target=\"_blank\" rel=\"noopener\">å¦‚ä½•è¯„ä»·éŸ³ä¹å‰§ã€Šæˆ‘ï¼Œå ‚å‰è¯ƒå¾·ã€‹ä¸­æ–‡ç‰ˆï¼Ÿ - NYLEçš„å›ç­” - çŸ¥ä¹</a></p>\n","categories":["è¯å‰§"],"tags":["éŸ³ä¹å‰§"]},{"title":"æ¸è¡Œæ¸è¿œæ¸æ— ä¹¦","url":"https://lilei.pro/2018/05/05/æ¸è¡Œæ¸è¿œæ¸æ— ä¹¦/","content":"<blockquote>\n<p>æ¬§é˜³ä¿®ã€Šç‰æ¥¼æ˜¥ åˆ«åä¸çŸ¥å›è¿œè¿‘ã€‹</p>\n</blockquote>\n<p>åˆ«åä¸çŸ¥å›è¿œè¿‘ï¼Œè§¦ç›®å‡„å‡‰å¤šå°‘é—·ï¼Œæ¸è¡Œæ¸è¿œæ¸æ— ä¹¦ï¼Œæ°´é˜”é±¼æ²‰ä½•å¤„é—®ã€‚<br>å¤œæ·±é£ç«¹æ•²ç§‹éŸµï¼Œä¸‡å¶åƒå£°çš†æ˜¯æ¨ï¼Œæ•…æ¬¹å•æ•æ¢¦ä¸­å¯»ï¼Œæ¢¦åˆä¸æˆç¯åˆçƒ¬ã€‚</p>\n","categories":["éšç¬”"],"tags":["è¯—è¯"]},{"title":"åæ¥çš„æˆ‘ä»¬","url":"https://lilei.pro/2018/04/30/åæ¥çš„æˆ‘ä»¬/","content":"<blockquote>\n<p>ç¼˜åˆ†è¿™ä»¶äº‹ï¼Œä¸è´Ÿå¯¹æ–¹å°±å¥½äº†ï¼Œæƒ³ä¸è´Ÿæ­¤ç”Ÿæ˜¯å¾ˆéš¾çš„ã€‚</p>\n</blockquote>\n<p>ç‚¹å‡»æ’­æ”¾äº”æœˆå¤©<a href=\"http://music.163.com/#/song?id=553310243\" target=\"_blank\" rel=\"noopener\">ã€Šåæ¥çš„æˆ‘ä»¬ã€‹</a></p>\n<p>è¿™æ˜¯æç£Šåœ¨2018å¹´è®°å½•çš„ç¬¬2éƒ¨ç”µå½±ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180430_us_and_them/åæ¥çš„æˆ‘ä»¬.jpg\" alt=\"åæ¥çš„æˆ‘ä»¬\" title=\"\">\n                </div>\n                <div class=\"image-caption\">åæ¥çš„æˆ‘ä»¬</div>\n            </figure>\n<p>æƒ³å»å½±é™¢çœ‹è¿™éƒ¨ç”µå½±ï¼Œæ¥æºäºå®ƒçš„ä¸»é¢˜â€”â€”å°äººç‰©åœ¨å¤§åŸå¸‚é‡Œçš„æ‰“æ‹¼ï¼Œä»¥åŠä»–ä»¬ä¹‹é—´çš„çˆ±æ¨æ‚²æ¬¢ã€‚èº«ä¸ºå…¶ä¸­ä¸€å‘˜ï¼Œä¹Ÿæƒ³çœ‹çœ‹é‚£ä¸ªæ›¾ç»å”±å‡ºã€Šå¾ˆçˆ±å¾ˆçˆ±ä½ ã€‹å’Œã€Šåæ¥ã€‹çš„åˆ˜è‹¥è‹±ï¼Œæ‹å‡ºæ¥çš„æ•…äº‹ä¼šæ˜¯æ€æ ·çš„ã€‚æœ€åä¸€ç‚¹æ˜¯äº”æœˆå¤©çš„éŸ³ä¹åŠ æˆï¼Œå¥½å¯æƒœåœ¨æ­£ç‰‡é‡Œå¹¶æ²¡æœ‰é‡‡ç”¨è¿™é¦–æ­Œã€‚</p>\n<p>æ•…äº‹æ¯”è¾ƒç®€å•ï¼Œä¸å†å¤è¿°å‰§æƒ…ï¼Œæƒ³åˆ°å“ªé‡Œå°±è¯´åˆ°å“ªé‡Œã€‚</p>\n<p>â€œæ—¶éš”è®¸ä¹…å›åˆ°æ•…ä¹¡ï¼Œå‘ç°è¿™é‡Œå¥½åƒå¹¶æ²¡æœ‰å˜è¿‡â€ï¼Œè¿™æ˜¯æ—è§æ¸…åœ¨å‰§ä¸­çš„ä¸€æ®µç‹¬ç™½ã€‚å¬åˆ°è¿™ä¸€å¥æ—¶ï¼Œæˆ‘çš„å¿ƒé‡Œä»¿ä½›æœ‰ä¸€æ ¹å¼¦è¢«â€œzongâ€åœ°ä¸€å£°æ‹¨åŠ¨äº†ã€‚è§æƒ¯äº†å¤§åŸå¸‚é‡Œçš„å˜åŒ–ï¼Œæ–°çš„è¡Œä¸šã€æ½®æµã€ç”Ÿæ´»æ–¹å¼ä¸€å¤œä¹‹é—´å¯ä»¥å æ®å„å¤§å¤´ç‰ˆã€‚å†å›åˆ°äººç”Ÿå‰åå‡ å¹´æˆé•¿çš„æ•…ä¹¡æ—¶ï¼Œçœ‹åˆ°çš„å±±æ°´è½¦é©¬ï¼Œä»æ—§æ˜¯å°æ—¶å€™çš„æ ·å­ï¼Œä»¿ä½›æ—¶é—´ä»ä¸æ›¾æµé€ã€‚</p>\n<p>ä¹Ÿè®¸å®¶ä¹¡å”¯ä¸€å¯è§çš„å˜åŒ–ï¼Œå°±æ˜¯äº²äººæ—¥æ¸è€å»çš„æ ·è²Œã€‚ä»–ä»¬çš„è…°æ†ä¸å†åƒå¹´è½»æ—¶é‚£ä¹ˆç¬”ç›´ï¼Œå¸¸å¸¸ä¼šæƒ³ä¸èµ·åˆšåˆšåšè¿‡çš„äº‹å’Œå¯¹ä½ å” å¨è¿‡çš„è¯è¯­ï¼Œçœ‹æŠ¥çº¸æ–‡ç« ä¹ƒè‡³é¥æ§å™¨ä¸Šçš„å­—æ¯ï¼Œéƒ½è¦å€ŸåŠ©æ”¾å¤§é•œã€‚</p>\n<p>è®©äººæ›´æ‚²ä¼¤çš„æ˜¯ï¼Œä»–ä»¬çš„è®°å¿†é‡Œå†æ€ä¹ˆè¡°é€€ï¼Œæ€»è¿˜ä¼šè®°å¾—ï¼Œé¡½åŠ£å¦‚ä½ å°æ—¶å€™åšè¿‡çš„é‚£äº›äº‹ï¼Œä½ æœ€çˆ±åƒçš„å®¶ä¹¡èœï¼Œä»¥åŠä½ çš„ç”Ÿæ—¥ã€‚</p>\n<p>å¦‚åŒç”°å£®å£®é¥°æ¼”çš„æ—çˆ¶ï¼Œåœ¨ç«è½¦ç«™æ¥æ—è§æ¸…å’Œä»–å¥³æœ‹å‹æ—¶ï¼Œè„±å£è€Œå‡ºçš„é‚£å¥â€œå°æ™“ï¼â€ï¼Œçœ‹ç€é“¶å¹•ä¸Šè€äººæµ‘æµŠçš„åŒçœ¼ï¼Œè®©è‡ªå·±åœ¨è§‚çœ‹è¿™éƒ¨ç”µå½±çš„è¿‡ç¨‹ä¸­ç¬¬ä¸€æ¬¡æƒ³å“­ã€‚</p>\n<p>å…¶ä¸­æœ‰ä¸€æ®µï¼Œæ—è§æ¸…åˆšåˆšä¸¢äº†å·¥ä½œï¼Œé™¤å¤•å¤œä¸æ–¹å°æ™“çªåœ¨ç‹­å°çš„å‡ºç§Ÿå±‹ã€‚æ—åœ¨æ‰“æ¸¸æˆæ—¶ï¼ˆåˆ†æ˜æ˜¯ã€Šæ±‚ç”Ÿä¹‹è·¯ã€‹ï¼‰ï¼Œæ—çˆ¶æ‰“æ¥ç”µè¯ï¼Œä¸¤äººä½ ç’æˆ‘ç’ï¼Œä¸€ä¸ªè¯´åœ¨åŒ—äº¬å¾ˆå¥½ï¼Œåƒç€çƒ¤é¸­è¿‡ç€å¹´ï¼Œä¸€ä¸ªè¯´å®¶é‡Œæ¥äº†å¥½å¤šäº²æˆšçƒ­é—¹å¾—å¾ˆï¼Œä½ åœ¨åŒ—äº¬è¦ç…§é¡¾å¥½è‡ªå·±åˆ«æƒ¦è®°æˆ‘ã€‚äº‹å®å‘¢ï¼Ÿæ˜¯ä¸æ˜¯æ¯ä¸€å¥â€œæˆ‘å¾ˆå¥½ï¼Œä½ ä¸è¦æƒ¦è®°â€èƒŒåï¼Œéƒ½æœ‰ä¸€ä¸ªå–„æ„çš„è°è¨€ï¼Ÿ</p>\n<p>åˆ˜è‹¥è‹±åœ¨è®²è¿™ä¸ªæ•…äº‹æ—¶ï¼Œæœ‰ä¸€ç‚¹æˆ‘è§‰å¾—å¤„ç†å¾—å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œé‚£å°±æ˜¯ä¸¤ä¸ªäººä¸ºä»€ä¹ˆåˆ†å¼€ã€‚æ— ç–‘ä»–ä»¬è¿˜æ˜¯å½¼æ­¤ç›¸çˆ±ç€çš„ï¼Œæ–¹å°æ™“åº”è¯¥æ˜¯å§‹ç»ˆæœªå©šï¼Œæ—è§æ¸…çš„å©šå§»ä¹Ÿä¸è§å¾—å¤šå¹¸ç¦ï¼Œæ˜¯ä¸ºäº†æ‚²å‰§è€Œæ‚²å‰§å—ï¼Ÿè™½ç„¶æœ«å°¾å€ŸåŠ©æ—çˆ¶çš„ä¿¡ä»¶è¯´å‡ºäº†å¼•æ–‡ä¸­â€œç¼˜åˆ†è¿™ä»¶äº‹ï¼Œä¸è´Ÿå¯¹æ–¹å°±å¥½äº†ï¼Œæƒ³ä¸è´Ÿæ­¤ç”Ÿæ˜¯å¾ˆéš¾çš„â€çš„è¯ï¼Œä½†ä»ç„¶è®©äººè§‰å¾—å¦‚é² åœ¨å–‰ã€‚</p>\n<p>æŠŠè¿™éƒ¨ç”µå½±é‡Œçš„â€œåŒ—äº¬â€æ¢æˆâ€œä¸Šæµ·â€ã€â€œå¹¿å·â€ï¼Œæ²¡æœ‰ä¸æ¯«ä¸å¦¥ã€‚åŒæ ·çš„æ•…äº‹åœ¨ä¸åŒçš„æƒ…ä¾£ä¹‹é—´ï¼Œæ¯ä¸€å¤©éƒ½åœ¨ä¸Šæ¼”ç€ã€‚ç„¶è€Œï¼Œä¸ªäººçš„æ‚²æ¬¢åœ¨è¿™äº›æ‹¥æœ‰å‡ åƒä¸‡äººå£çš„å¤§éƒ½å¸‚é‡Œï¼Œè¢«æ— é™ç¨€é‡Šäº†ã€‚æ¯å¤©åœ°é“æ—©æ™šé«˜å³°æ¶Œå‡ºå¤šå°‘äººæµï¼Œå°±æœ‰å¤šå°‘ä¸ªæ—è§æ¸…æ–¹å°æ™“ã€‚åœ¨åˆ«äººçš„æ•…äº‹é‡Œï¼Œæˆ‘ä»¬æ˜¯çœ‹å®¢ï¼Œåœ¨è‡ªå·±çš„æ•…äº‹é‡Œï¼Œæˆ‘ä»¬æ˜¯ä¸»è§’ã€‚</p>\n<p>è¿™éƒ¨æˆè¿˜æœ‰ä¸€äº›å¾ˆç”¨å¿ƒçš„å°ç»†èŠ‚ï¼Œæ¯”å¦‚ä¸€å¼€å§‹07å¹´ä¸¤äººä¹˜åç»¿çš®è½¦å»åŒ—äº¬ï¼ˆå½“å¹´æˆ‘ä»å“ˆå¸‚åˆ°ä¸Šæµ·åçš„33å°æ—¶ç¡¬åº§å¤§æ¦‚ä¹Ÿæ˜¯ç»¿çš®çš„ï¼‰ï¼ŒèƒŒæ™¯ç”µè§†é‡Œå“èµ·çš„åŒ—äº¬ç”³å¥¥æˆåŠŸæ–°é—»æŠ¥é“ï¼Œä»¥åŠé™¤å¤•å¤œè§æ¸…ä¸ºå®¶é‡Œä¹°äº†æ–°ç”µè§†æ—¶ï¼Œç”µè§†é‡Œæ’­æ”¾çš„è¥¿å•å¥³å­©åœ¨æ˜¥æ™šçš„è¡¨æ¼”ã€‚è¿˜æœ‰â€œç²˜è±†åŒ…â€ï¼Œå°½ç®¡è‡ªå·±å¹¶ä¸å–œæ¬¢åƒï¼Œä½†å¥½ä¹…ä¹‹åå¬äººè¯´èµ·è¿™ä¸ªè¯è¯­ï¼Œè¿˜æ˜¯è“¦ç„¶å¿ƒé‡Œä¸€çƒ­ã€‚</p>\n<p>è®©äººå‡ºæˆçš„åœ°æ–¹ä¹Ÿæœ‰ï¼Œåƒå‰§ä¸­ä¸‰åä¸»è§’çš„ä¸œåŒ—è¯ï¼Œåˆ†æ˜ä¸æ˜¯é»‘é¾™æ±Ÿå†…ç–™ç˜©çš„ï¼ˆæœ«å°¾æ—è§æ¸…ç§Ÿè½¦å¼€å»ä¸Šæµ·ï¼Œæ˜¯ä¸€è¾†é»‘Aç‰Œç…§çš„å‡¯è¿ªæ‹‰å…‹SUVï¼Œå¯è§ä»–ä»¬æ˜¯åœ¨å“ˆå°”æ»¨ç§Ÿçš„è½¦ï¼‰ï¼Œæœ‰ç‚¹å‡ºæˆï¼Œä½†ç‘•ä¸æ©ç‘œã€‚ç”°å£®å£®â€”â€”åŒ—äº¬äººï¼Œå‘¨å†¬é›¨â€”â€”çŸ³å®¶åº„äººï¼Œäº•æŸç„¶å€’æ˜¯åœ°é“çš„æ²ˆé˜³äººï¼Œä¸è¿‡è¾½å®çš„ä¸œåŒ—è¯ä¸é»‘é¾™æ±Ÿã€å‰æ—å·®å¼‚è¿˜æ˜¯è›®å¤§çš„ã€‚</p>\n<p>å½±ç‰‡ååŠæ®µï¼Œå‰§é™¢é‡Œé™†é™†ç»­ç»­å“èµ·æŠ½æ³£çš„å£°éŸ³ï¼Œæˆ‘å–œæ¬¢è¿™éƒ¨ç”µå½±ï¼Œå°½ç®¡å¤–ç•Œå¯¹å®ƒçš„è¯„ä»·å¾ˆä½ï¼Œè€Œä¸”åˆ˜è‹¥è‹±å¹¶ä¸æ“…é•¿è®²æ•…äº‹ï¼Œä½†åªè¦æœ‰å¯ä»¥è§¦åŠ¨æˆ‘çš„åœ°æ–¹å°±å¤Ÿäº†ã€‚åˆ«äººéƒ½çœ‹å¥½çš„ï¼Œä¸ä¸€å®šåˆä½ çš„å£å‘³ï¼Œç”µå½±å¦‚æ­¤ï¼Œçˆ±æƒ…ä¹Ÿä¸€æ ·ã€‚</p>\n<p>2018å¹´4æœˆ30æ—¥ï¼Œäºé•¿å®å½±å‰§é™¢ã€‚</p>\n","categories":["ç”µå½±"],"tags":["å‘¨å†¬é›¨","äº•æŸç„¶"]},{"title":"I'm a motherfuckin beast - æ°å…‹å‰ä¼¦å“ˆå°”ã€Šé“æ‹³ã€‹","url":"https://lilei.pro/2018/04/29/motherfuckin-beast-æ°å…‹å‰ä¼¦å“ˆå°”ã€Šé“æ‹³ã€‹/","content":"<blockquote>\n<p>åšæŒåˆ°ç¬¬12å›åˆï¼ŒåšæŒåˆ°ä½ æ•Œäººå€’ä¸‹çš„é‚£ä¸€åˆ»ã€‚</p>\n</blockquote>\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=\"330\" height=\"86\" src=\"//music.163.com/outchain/player?type=2&id=27885866&auto=0&height=66\"></iframe>\n\n<p>è¿™æ˜¯æç£Šåœ¨2018å¹´è®°å½•çš„ç¬¬1éƒ¨ç”µå½±ã€‚</p>\n<figure class=\"image-bubble\">\n                <div class=\"img-lightbox\">\n                    <div class=\"overlay\"></div>\n                    <img src=\"/img/180429_southpaw/southpaw.jpg\" alt=\"Southpaw\" title=\"\">\n                </div>\n                <div class=\"image-caption\">Southpaw</div>\n            </figure>\n<p>è¯´å®è¯ï¼Œè‡ªå·±æ˜¯è¢«æ°å…‹å‰ä¼¦å“ˆå°”ä¸€èº«è…±å­è‚‰å¸å¼•ï¼Œæ‰è§‚çœ‹è¿™éƒ¨ç”µå½±çš„ã€‚åœ¨ã€Šå¤œè¡Œè€…/nightcrawlerã€‹ä¸€ç‰‡ä¸­å‰ä¼¦å“ˆå°”æ‰®æ¼”äº†ä¸€åæ–‡è´¨å½¬å½¬ã€ä¸ºè¾¾ç›®çš„ä¸æ‹©æ‰‹æ®µçš„æ–°é—»è´©å­ï¼Œå¾ˆéš¾æƒ³è±¡ä»–é‚£æ ·å¼±ä¸ç¦é£çš„æ ·å­ï¼Œç«Ÿç„¶å¯ä»¥åœ¨æœ¬ç‰‡é‡Œé¥°æ¼”æ‹³å‡»æ‰‹ä¸€è§’ï¼Œä¸€èº«ç²¾å£®è€Œæœ‰çº¿æ¡åˆ†æ˜çš„è‚Œè‚‰ï¼Œä½“è„‚ç‡ç›®æµ‹7ï½8å·¦å³ã€‚ä¸ºäº†è¿™ä¸ªç”µå½±ï¼Œä»–ä¸€å®šä»˜å‡ºäº†å¾ˆå¤šåŠªåŠ›ã€‚</p>\n<p>å…³äºå½±ç‰‡æœ¬èº«ï¼Œèƒ½å¤Ÿè®²è¿°çš„ä¸œè¥¿å¹¶ä¸å¤šï¼Œæƒ…èŠ‚è°ˆä¸ä¸Šæ›²æŠ˜ï¼Œæ˜¯è¿åŠ¨é¢˜æç”µå½±ä¸€è´¯çš„å¥—è·¯ï¼Œæ‰€å‘æ— æ•Œ-éª„å‚²æ”¾è‚†-è·Œä¸‹ç¥å›-æ´—å¿ƒé©é¢ï¼ˆè¿™æ—¶å€™é€šå¸¸éœ€è¦ä¸€ä¸ªä¿ƒä½¿ä¸»è§’è§‰é†’è¦ç´ ï¼Œåœ¨æœ¬ç‰‡ä¸­æ˜¯å¥³å„¿&amp;æ•™ç»ƒï¼‰-é­é‡å®¿æ•Œ-å¼€å±€é€†é£-ç»åœ°åå‡»ã€‚å€¼å¾—ç§°èµçš„æ˜¯æ°å…‹å‰ä¼¦å“ˆå°”çš„æ¼”æŠ€å§‹ç»ˆåœ¨çº¿ï¼Œå°†ä¸€ä¸ªç”Ÿæ´»ã€äº‹ä¸šæ¥è¿å—æŒ«ã€å¤„äºé€†å¢ƒä¸­çš„æ‹³å‡»æ‰‹/çˆ¶äº²å½¢è±¡æ¼”ç»å¾—ææ£’ï¼Œå°¤å…¶æ˜¯ä»–çš„çœ¼ç¥ã€‚åé¢çš„æ‰“æ–—éƒ¨åˆ†å€’ä¸å¦‚ã€Šç›‘ç‹±æ–—å£«ã€‹æ¥å¾—ç²¾å½©åˆºæ¿€ã€‚</p>\n<p>å°½ç®¡å¦‚æ­¤ï¼Œè¿™éƒ¨ç”µå½±èƒ½åœ¨æˆ‘workoutæ—¶å€™ï¼Œæ¿€åŠ±æˆ‘å¤šåšä¸€ä¸ªåå¤ï¼Œå¦‚æ­¤è¿™èˆ¬å°±è¶³å¤Ÿäº†ã€‚</p>\n","categories":["ç”µå½±"],"tags":["æ°å…‹å‰ä¼¦å“ˆå°”"]},{"title":"æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦ã€ŠåŸºç£å±±ä¼¯çˆµã€‹","url":"https://lilei.pro/2018/04/28/å†è¯»ã€ŠåŸºç£å±±ä¼¯çˆµã€‹/","content":"<blockquote>\n<p>äººç±»çš„ä¸€åˆ‡æ™ºæ…§ï¼Œéƒ½åŒ…å«åœ¨è¿™ä¸¤ä¸ªè¯è¯­é‡Œé¢ã€‚</p>\n</blockquote>\n<p><strong>è¿™æ˜¯æç£Šåœ¨2018å¹´è¯»å®Œçš„ç¬¬1æœ¬ä¹¦ã€‚</strong></p>\n<iframe frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\" width=\"330\" height=\"86\" src=\"//music.163.com/outchain/player?type=2&id=28885472&auto=0&height=66\"></iframe>\n\n<hr>\n<p>ã€ŠåŸºç£å±±ä¼¯çˆµã€‹è¿™æœ¬ä¹¦ï¼Œåº”è¯¥æ˜¯åœ¨ä¸­å­¦æ—¶ä»£è¯»çš„ç¬¬ä¸€éå§ï¼Œä»ç™¾è‰å›­ä¹¦åº—ç§Ÿå€Ÿçš„ä¹¦ç±ã€‚è¿™å‘¨ä¸­ï¼Œç”±äºå†™ä¿¡æ—¶éœ€è¦å¼•ç”¨ä¹¦ä¸­çš„ä¸€æ®µè¯ï¼Œé‚åœ¨ç½‘ä¸Šæ‰¾æ¥åŸæ–‡ï¼Œè°çŸ¥å†æ¬¡è¢«å¸å¼•ï¼Œä¸€å‘ä¸å¯æ”¶æ‹¾ï¼ŒèŠ±3å¤©æ—¶é—´åˆä»å¤´è¯»å®Œäº†è¿™æœ¬ä¸è–„çš„è‘—ä½œã€‚</p>\n<p>æ•…äº‹å†…å®¹é¢‡æœ‰ç°åœ¨ç½‘æ–‡çš„å¥—è·¯ï¼Œç”·ä¸»è§’ï¼ˆåŸƒå¾·è’™å”æ³°æ–¯ï¼‰å‡ºèº«å¹³å¹³ï¼Œç¦€æ€§çº¯è‰¯ï¼Œæœ‰ä¸€é’æ¢…ç«¹é©¬çº¢é¢œçŸ¥å·±ï¼Œæœ¬æ¥å¯ä»¥å‡èŒèˆ¹é•¿å¨¶å¦»ç”Ÿå­å®‰ç¨³è¿‡å®Œè¿™ä¸€ç”Ÿï¼Œè°çŸ¥è¢«å«‰å¦’ä»–çš„å°äººæš—ä¸­åŠ å®³ï¼Œä¸ä»…è€çˆ¶äº²è´«å›°è€Œæ­»ï¼Œè¿è’™åœ¨é¼“é‡Œçš„æœªå©šå¦»éƒ½æˆä¸ºä»‡äººçš„å¦»å­ï¼Œè‡ªå·±ä¹Ÿåœ¨æš—æ— å¤©æ—¥çš„æµ·ä¸Šç›‘ç‰¢é‡Œåº¦è¿‡äº†åå››å¹´æ—¶å…‰ã€‚æ‰€å¹¸åœ¨é­éš¾æ—¶ï¼Œé‡åˆ°äº†ä¸ä¸–å‡ºçš„é«˜äººï¼ˆæ³•åˆ©äºšç¥çˆ¶ï¼‰ï¼Œä¼ æˆç»™ä»–ä¸€èº«æ–‡æ­¦æœ¬é¢†ï¼Œåˆèµ äºˆä¸€å¤§ç¬”å¯Œå¯æ•Œå›½çš„è´¢å®ã€‚å½“ä»–æˆåŠŸè¶Šç‹±åï¼Œæ‘‡èº«ä¸€å˜åŸºç£å±±ä¼¯çˆµï¼Œå°†ä»‡äººç©å¼„äºè‚¡æŒä¹‹é—´ã€‚æœ€åçœ‹ç ´ä¸–äº‹ï¼Œæºç¾äººå½’éšã€‚</p>\n<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œã€ŠåŸºç£å±±ä¼¯çˆµã€‹è¿™æœ¬ç”±å¤§ä»²é©¬ï¼ˆ1802â€”1870ï¼‰å‡ºç‰ˆäº1846å¹´çš„å°è¯´ï¼Œå¼•é¢†äº†åä¸–æ½®æµè¶³æœ‰è¿‘ä¸¤ç™¾å¹´ã€‚ç„¶è€Œï¼Œå®ƒå¹¶éä»…ä»…åƒé¾™å‚²å¤©é‚£ä¹ˆç®€å•ç²—æš´ã€‚</p>\n<p>å–„æ¶åˆ†æ˜ã€æœºæ™ºæœæ•¢ã€ç®—æ— é—ç­–ã€æ²‰é»˜é«˜è´µã€æ…·æ…¨æ— ç§â€¦â€¦æˆ‘ä»¬å¯ä»¥å°†å¤ªå¤šèµç¾çš„è¯æ±‡åŠ è¯¸äºåŸƒå¾·è’™ï¼Œç„¶è€Œå¯¹äºä»–æ‰€æ‰¿å—è¿‡çš„ç—›è‹¦ï¼Œæˆ‘ä»¬å§‹ç»ˆæ— æ³•æ„ŸåŒèº«å—ã€‚ä¸è®ºæ˜¯ä»ä¸çˆ±äººçš„å©šç¤¼ä¸Šè¢«è­¦å¯Ÿå¸¦èµ°å«å†¤å…¥ç‹±ï¼Œè¿˜æ˜¯åœ¨é»‘æš—é˜´æ£®çš„ä¼Šå¤«å ¡ç›‘ç‹±åº¦æ—¥å¦‚å¹´ï¼Œä»¥åŠç›®ç¹äº¦å¸ˆäº¦å‹äº¦çˆ¶çš„æ³•åˆ©äºšç¥çˆ¶æ­»äº¡ï¼Œè¿˜æœ‰å¾—çŸ¥æ‰€çˆ±ä¹‹äººå·²ç»å«ç»™äº†è°‹å®³è‡ªå·±çš„å‡¶å¾’ï¼Œè¿™äº›ç—›è‹¦ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½è¶³ä»¥å‹å®ä¸€ä¸ªå¿ƒæ™ºå¥å…¨çš„äººï¼Œä½•å†µæ˜¯å…¨éƒ¨ã€‚</p>\n<p>å…¶å®æˆ‘æœ€æƒ³çŸ¥é“çš„æ˜¯ï¼Œå½“åŸƒå¾·è’™ç§»èŠ±æ¥æœ¨ä»£æ›¿æ³•åˆ©äºšç¥çˆ¶ï¼Œä»æ‚¬å´–è¢«æŠ•å…¥é»‘æš—å¤§æµ·æ—¶ï¼Œæ˜¯ä»€ä¹ˆæ”¯æ’‘ç€ä»–æœç€æ¸ºèŒ«å¸Œæœ›æ¸¸å»ï¼Œè€Œä¸æ˜¯å°±æ­¤æ”¾æ‰‹ï¼Œè‡ªæˆ•äºå¤§æµ·ã€‚</p>\n<p>äººç”Ÿå¦‚æ­¤è‰°éš¾ï¼Œæ´»ä¸‹å»æ¯”æ­»äº¡æ›´éœ€è¦å‹‡æ°”ã€‚</p>\n<p>æˆ‘æ¥è‡ªæš—æ— å¤©æ—¥çš„åœ°ç‹±ï¼Œåªæƒ³è§ä¸€è§é˜³å…‰ã€‚æˆ‘è¿˜æœ‰å¥å£®çš„èº«ä½“ã€æ¸Šåšçš„çŸ¥è¯†ã€ç­‰å¾…å‘æ˜çš„æ— å°½è´¢å¯Œï¼Œä»¥åŠï¼Œé¥®ä¸å®Œçš„æ¯ä¸­é…’ï¼Œæ€ä¸å°½çš„ä»‡äººå¤´ã€‚æ€ä¹ˆä¼šå°±è¿™æ ·æ”¾å¼ƒï¼Ÿ</p>\n<p>å–„è‰¯çš„è«é›·å°”å…ˆç”Ÿï¼Œä»–åœ¨æˆ‘è’™å†¤å…¥ç‹±åå››å¤„å¥”æ³¢ï¼Œå¯¼è‡´é­äººå«‰æ¨æ’æŒ¤å®¶é“ä¸­è½ï¼›æˆ‘ä»ä¼Šå¤«å ¡é€ƒç‹±å‡ºæ¥åï¼Œé‡åˆ°çš„å•çº¯æ°´æ‰‹é›…å„å¸ƒï¼Œä¸æ¯«æ²¡æœ‰æ€€ç–‘æˆ‘çš„èº«ä»½ï¼ŒæŠŠæˆ‘å½“åšåŒä¼´ä¸€æ ·èµ¤è¯šå¯¹å¾…ï¼›é‚£è½è‰ä¸ºå¯‡æ©æ€¨åˆ†æ˜çš„ç½—å‰ä¸‡å¸•ï¼Œæ¯”é“è²Œå²¸äººçš„è¡£å† ç¦½å…½å¥½ä¸Šä½•æ­¢åƒä¸‡å€ï¼›è¿˜æœ‰ä¸€å¿ƒä¸€æ„ä¾èµ–æˆ‘å…³å¿ƒæˆ‘çš„æµ·é»›ï¼Œè‹¦å‘½çš„å…¬ä¸»ã€‚</p>\n<p>è¿™ä¸–ç•Œå¹¶æ²¡æœ‰é‚£ä¹ˆè’å‡‰ï¼Œé‚£ä¹ˆæ— è¯å¯æ•‘ã€‚</p>\n<p>è¿™å‘¨åˆæ”¶åˆ°äº†<a href=\"http://www.one-school.org/\" target=\"_blank\" rel=\"noopener\">å£¹ä¸ªæ‘å°</a>çš„å®¶è®¿åé¦ˆï¼Œå°æœ‹å‹ç”Ÿæ´»å’Œå­¦ä¹ ä¸Šé‡åˆ°ä¸€äº›å›°éš¾ï¼Œé‚å†™ä¿¡é¼“åŠ±ï¼Œæœ›å…¶å¯ä»¥åº¦è¿‡éš¾å…³ã€‚</p>\n<p>æˆ‘ä¸ç¥ç¦ä½ ä¸‡äº‹é¡ºåˆ©å‰è·¯å¹³å¦ï¼Œè€Œæ˜¯ç¥ä½ æœ‰ç›´é¢ä¸€åˆ‡å›°éš¾çš„å‹‡æ°”ã€‚</p>\n<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨å¤§ä»²é©¬å»ä¸–132å¹´åï¼Œäº2002å¹´11æœˆ30æ—¥ï¼Œä»–çš„çµæŸ©åœ¨æ—¶ä»»æ³•å›½æ€»ç»Ÿå¸Œæ‹‰å…‹çš„äº²è‡ªæŠ¤é€ä¸‹ï¼Œè¢«ç§»å…¥å…ˆè´¤ç¥ ï¼Œä»–æ˜¯ç¬¬70ä½è¿›å…¥å…ˆè´¤ç¥ çš„ä¼Ÿäººï¼Œä¹Ÿæ˜¯å…¶ä¸­çš„ç¬¬å…­åä½œå®¶ã€‚ä»–å°†é•¿çœ äºå·¦æ‹‰å’Œä»–ç”Ÿå‰æŒšå‹é›¨æœä¹‹é—´ã€‚</p>\n<blockquote>\n<p>è«é›·å°”æ‹†å¼€ä¿¡å¿µé“ï¼šâ€”â€”<br>ã€€ã€€â€œæˆ‘äº²çˆ±çš„é©¬è¥¿ç±³å…°ï¼Œâ€”â€”å²›è¾¹ä¸ºä½ ä»¬åœç€ä¸€åªå°å¸†èˆ¹ã€‚è´¾å¯å¸ƒä¼šå¸¦ä½ ä»¬åˆ°é‡Œçªå»ï¼Œé‚£é‡Œè¯ºç“¦è’‚åŸƒå…ˆç”Ÿæ­£åœ¨ç­‰ç€ä»–çš„å­™å¥³å„¿ï¼Œä»–å¸Œæœ›åœ¨ä»–é¢†ä»–çš„å­™å¥³åˆ°åœ£å›å‰å»ä»¥å‰ï¼Œèƒ½å…ˆä¸ºä½ ä»¬ç¥ç¦ï¼Œæˆ‘çš„æœ‹å‹ï¼Œè¿™ä¸ªæ´é‡Œçš„ä¸€åˆ‡ï¼Œæˆ‘åœ¨é¦™æ¦­ä¸½èˆå¤§é“çš„æˆ¿å­ï¼Œä»¥åŠæˆ‘åœ¨é»æ¸¯çš„åˆ«å¢…ï¼Œéƒ½æ˜¯çˆ±å¾·è’™Â·å”å¤ªæ–¯é€ç»™è«é›·å°”èˆ¹ä¸»çš„å„¿å­çš„ç»“å©šç¤¼ç‰©ã€‚ä¹Ÿè¯·ç»´å°”ç¦å°å§æ¥å—å…¶ä¸­çš„ä¸€åŠï¼Œå› ä¸ºï¼Œå¥¹çš„çˆ¶äº²ç°åœ¨å·²æˆäº†ä¸€ä¸ªç–¯å­ï¼Œå¥¹çš„å¼Ÿå¼Ÿå·²åœ¨ä¹æœˆé—´å’Œä»–çš„æ¯äº²ä¸€åŒå»ä¸–ï¼Œæˆ‘æƒ³è¯·å¥¹æŠŠå¥¹ä»å¥¹çˆ¶äº²å’Œå¥¹å¼Ÿå¼Ÿé‚£å„¿ç»§æ‰¿æ¥çš„é‚£ç¬”è´¢äº§æèµ ç»™ç©·äººã€‚è«é›·å°”ï¼Œå‘Šè¯‰é‚£ä½ä½ å°†ç»ˆç”Ÿçœ·é¡¾çš„å¤©ä½¿ï¼Œè¯·å¥¹æ—¶æ—¶ä¸ºä¸€ä¸ªäººç¥ˆç¥·ï¼Œé‚£ä¸ªäººï¼Œè±¡æ’’æ—¦ä¸€æ ·ï¼Œä¸€åº¦æ›¾è‡ªä»¥ä¸ºå¯ä¸ä¸Šå¸åŒ¹æ•Œï¼›ä½†ç°åœ¨ï¼Œä»–å·²å¸¦ç€åŸºç£å¾’çš„è‡ªå‘æ‰¿è®¤åªæœ‰ä¸Šå¸æ‹¥æœ‰è‡³é«˜æ— ä¸Šçš„æƒåŠ›å’Œæ— ç©·çš„æ™ºæ…§ã€‚æˆ–è®¸é‚£äº›ç¥ˆç¥·å¯ä»¥å‡è½»ä»–å¿ƒé‡Œæ‰€æ„Ÿåˆ°çš„å†…ç–šã€‚è‡³äºä½ ï¼Œè«é›·å°”ï¼Œæˆ‘å¯¹ä½ è¯´ä¸€å¥çŸ¥å¿ƒè¯ã€‚ä¸–ç•Œä¸Šæ—¢æ— æ‰€è°“å¿«ä¹æˆ–ä¹Ÿæ— æ‰€è°“ç—›è‹¦ï¼›åªæœ‰ä¸€ç§çŠ¶å†µä¸å¦ä¸€ç§çŠ¶å†µçš„æ¯”è¾ƒï¼Œå¦‚æ­¤è€Œå·²ã€‚åªæœ‰ä½“éªŒè¿‡ä¸å¹¸çš„äººæ‰èƒ½ä½“ä¼šæœ€å¤§çš„å¿«ä¹ã€‚è«é›·å°”ï¼Œæˆ‘ä»¬å¿…é¡»ä½“éªŒè¿‡æ­»çš„ç—›è‹¦ï¼Œæ‰èƒ½ä½“ä¼šåˆ°ç”Ÿçš„å¿«ä¹ã€‚<br>ã€€ã€€æ‰€ä»¥ï¼Œæˆ‘å¿ƒçˆ±çš„å­©å­ä»¬ï¼Œäº«å—ç”Ÿå‘½çš„å¿«ä¹å§ï¼æ°¸è¿œä¸è¦å¿˜è®°ï¼Œç›´è‡³ä¸Šå¸æ­éœ²äººçš„æœªæ¥å›¾æ™¯çš„é‚£ä¸€å¤©ä»¥å‰ï¼Œäººç±»çš„ä¸€åˆ‡æ™ºæ…§å°±åŒ…å«åœ¨è¿™ä¸¤ä¸ªè¯é‡Œé¢ï¼šâ€˜<strong>ç­‰å¾…</strong>â€™å’Œâ€˜<strong>å¸Œæœ›</strong>â€™ã€‚<br>ã€€ã€€ä½ çš„æœ‹å‹åŸºç£å±±ä¼¯çˆµçˆ±å¾·è’™Â·å”å¤ªæ–¯ã€‚â€</p>\n</blockquote>\n","categories":["è¯»ä¹¦ç¬”è®°"],"tags":["å°è¯´"]},{"title":"Android-Performance-Patterns-s4ep11-Culling","url":"https://lilei.pro/2017/02/27/Android-Performance-Patterns-s4ep11-Culling/","content":"<blockquote>\n<p>å»èŠœå­˜èï¼Œavoid donig unnecessary work.<br><a href=\"https://www.youtube.com/watch?v=KFklLqiEG6w&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=21\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<a id=\"more\"></a>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/KFklLqiEG6w\" frameborder=\"0\" allowfullscreen></iframe>\n\n<h1 id=\"è¿‡åº¦ç»˜åˆ¶\"><a href=\"#è¿‡åº¦ç»˜åˆ¶\" class=\"headerlink\" title=\"è¿‡åº¦ç»˜åˆ¶\"></a>è¿‡åº¦ç»˜åˆ¶</h1><p><a href=\"https://developer.android.com/studio/profile/dev-options-overdraw.html?utm_campaign=android_series_perf_theory:_culling_&amp;utm_source=anddev&amp;utm_medium=yt-annt\" target=\"_blank\" rel=\"noopener\">è¿‡åº¦ç»˜åˆ¶ï¼ˆOverdrawï¼‰</a>æ˜¯æŒ‡å¯¹ä¸å¯è§çš„éƒ¨åˆ†ä¹Ÿè¿›è¡Œç»˜åˆ¶çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾å·¦ä¾§ï¼Œåœ¨å¼€å‘è€…è®¾ç½®é‡Œå¯ä»¥æ‰“å¼€æŸ¥çœ‹å¼€å…³ã€‚ä¸€èˆ¬è§£å†³è¿‡åº¦ç»˜åˆ¶çš„æ–¹æ³•æ˜¯å‡å°‘å¸ƒå±€æ·±åº¦ï¼Œå»é™¤æ— ç”¨èƒŒæ™¯ã€‚</p>\n<p><img src=\"/img/170227_app_s4ep11/overdraw.png\" alt=\"Overdraw\"></p>\n<hr>\n<h1 id=\"Draw-with-care\"><a href=\"#Draw-with-care\" class=\"headerlink\" title=\"Draw with care\"></a>Draw with care</h1><p>åœ¨ç¼–å†™è‡ªå®šä¹‰æ§ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>canvas.cliprect(..)</code>æ–¹æ³•æ¥ä½¿ä¸æ˜¾ç¤ºçš„Viewä¸è¿›è¡Œç»˜åˆ¶ã€‚</p>\n<p>é“¾æ¥ï¼š<a href=\"https://www.youtube.com/watch?annotation_id=annotation_104709861&amp;feature=iv&amp;index=38&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;src_vid=KFklLqiEG6w&amp;v=vkTn3Ule4Ps\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?annotation_id=annotation_104709861&amp;feature=iv&amp;index=38&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;src_vid=KFklLqiEG6w&amp;v=vkTn3Ule4Ps</a></p>\n<hr>\n<h1 id=\"å¤šé‡æ¡ä»¶æœç´¢\"><a href=\"#å¤šé‡æ¡ä»¶æœç´¢\" class=\"headerlink\" title=\"å¤šé‡æ¡ä»¶æœç´¢\"></a>å¤šé‡æ¡ä»¶æœç´¢</h1><p>æ¯”å¦‚è¦æœç´¢åŒæ—¶æ»¡è¶³ A &amp; B &amp; C ä¸‰ä¸ªæ¡ä»¶ä¸‹çš„ç»“æœï¼Œæœ‰ä¸¤ç§æ–¹æ³•</p>\n<ol>\n<li>æŠŠABCä¸‰ä¸ªæ¡ä»¶åŒæ—¶ä¼ å…¥ï¼Œä¸€æ­¥æœç´¢å‡ºç»“æœ</li>\n<li>å…ˆæœAï¼Œå¾—åˆ°ç»“æœé›†åï¼Œåœ¨ç»“æœé›†ä¸­æœç´¢Bï¼Œæœ€ååœ¨Bçš„ç»“æœé›†ä¸­æœç´¢C</li>\n</ol>\n<p>ä¸è¦æƒ³å½“ç„¶åœ°ä»¥ä¸ºä¸€å®šæ˜¯1æ›´é«˜æ•ˆï¼Œå®é™…æ“ä½œæ—¶è¦æ ¹æ®æœç´¢æœåŠ¡çš„ç‰¹å¾æ¥é€‰æ‹©ä¸¤è€…ä¸­çš„ä¸€ç§è¿›è¡Œã€‚2ä¹Ÿæ˜¯ä¸€ç§<code>Culling</code>çš„æ€æƒ³ï¼Œé€å±‚æ·±å…¥ï¼ŒæŠ½ä¸å‰¥èŒ§ã€‚</p>\n<p>ï¼ˆè§†é¢‘é‡Œæ˜¯ç”¨çš„Mc Collinså¤§å”çš„ç…§ç‰‡æ¥ä¸¾ä¾‹çš„ï¼Œå¾ˆæç¬‘ï¼‰</p>\n<hr>\n<h1 id=\"æå‡ç”¨æˆ·ä½“éªŒ\"><a href=\"#æå‡ç”¨æˆ·ä½“éªŒ\" class=\"headerlink\" title=\"æå‡ç”¨æˆ·ä½“éªŒ\"></a>æå‡ç”¨æˆ·ä½“éªŒ</h1><p>åœ¨ä½¿ç”¨åœ°ç†å®šä½ç­‰å®æ—¶æœåŠ¡æ—¶ï¼Œæ¶ˆå‡é‚£äº›ç”¨æˆ·ä¸éœ€å…³å¿ƒçš„ä¿¡æ¯ï¼Œæ¯”å¦‚ç”¨æˆ·å±…ä½åœ¨Aåœ°ï¼Œé‚£å°±æ— éœ€æŠŠBåœ°çš„å®æ—¶çŠ¶å†µæ¨é€ç»™ç”¨æˆ·ï¼Œä½¿ç”¨åœ°å›¾è½¯ä»¶ä¸­çš„å®æ—¶è·¯å†µæŸ¥çœ‹å°±æ˜¯è¿™æ ·ï¼Œåªéœ€è¦è¯·æ±‚å¹¶å±•ç¤ºå½“å‰å±å¹•èŒƒå›´å†…çš„åŒºåŸŸè·¯å†µï¼Œè€Œä¸æ˜¯å…¨å¸‚ä¹ƒè‡³å…¨çœã€å…¨å›½ã€‚</p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"Android Performance Patterns - s4ep10 Approximation","url":"https://lilei.pro/2017/02/22/Android-Performance-Patterns-s4ep10-Approximation/","content":"<blockquote>\n<p>åœ¨ç”¨æˆ·æ— æ„ŸçŸ¥çš„æƒ…å†µä¸‹ï¼Œåˆç†åœ°è¿›è¡Œè¿‘ä¼¼è®¡ç®—ï¼Œä»¥åŠ å¿«å“åº”ï¼Œå¢å¼ºæ€§èƒ½ã€‚<br><a href=\"https://www.youtube.com/watch?v=aVwwwK3YIaM&amp;index=20&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<a id=\"more\"></a>\n<h1 id=\"Good-enough-Letâ€™s-ship-it\"><a href=\"#Good-enough-Letâ€™s-ship-it\" class=\"headerlink\" title=\"Good enough. Letâ€™s ship it.\"></a>Good enough. Letâ€™s ship it.</h1><p>åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œç”¨æˆ·åªéœ€è¦70%çš„ç²¾ç¡®ç¨‹åº¦ï¼Œè¿™æ—¶åœ¨ç¨‹åºé‡Œæä¾›100%çš„ç²¾ç¡®ç¨‹åº¦æ˜¯ä¸åˆé€‚çš„ï¼Œè¿™ä¼šé¢å¤–å¢åŠ 30%çš„æˆæœ¬ã€‚</p>\n<p><img src=\"/img/170222_app_s4ep10/good_enough.png\" alt=\"Good enough\"></p>\n<hr>\n<h1 id=\"Position-is-not-always-helpful\"><a href=\"#Position-is-not-always-helpful\" class=\"headerlink\" title=\"Position is not always helpful\"></a>Position is not always helpful</h1><p>ä»¥ä¸€ä¸ªè·¯çº¿è§„åˆ’Appä¸ºä¾‹ï¼Œå¦‚æœç¼©æ”¾çº§åˆ«ä»…ä»…åˆ°çœï¼Œé‚£ä¹ˆå¯¹ç”¨æˆ·å®šä½çš„æ ‡ç¤ºåªéœ€è¦ç²¾ç¡®åˆ°åŸå¸‚å³å¯ï¼Œå®Œå…¨ä¸å¿…ç²¾ç¡®åˆ°è¡—é“é—¨ç‰Œå·ï¼Œå› ä¸ºå°±ç®—é€šè¿‡GPSç²¾ç¡®åˆ°äº†è¡—é“é—¨ç‰Œå·ï¼Œåœ¨çœçº§è§†å›¾ä¸Šè§‚å¯Ÿï¼Œä¹Ÿå¹¶ä¸ä¼šæœ‰ä»»ä½•åŒºåˆ«ã€‚åªæœ‰å½“ç”¨æˆ·æ”¾å¤§åœ°å›¾åˆ°è¡—é“ç¨‹åº¦æ—¶ï¼Œæ‰éœ€è¦æ›´ç²¾ç¡®çš„å®šä½ã€‚</p>\n<p><img src=\"/img/170222_app_s4ep10/route_planning.png\" alt=\"route planning\"></p>\n<hr>\n<h1 id=\"Do-less-when-you-can\"><a href=\"#Do-less-when-you-can\" class=\"headerlink\" title=\"Do less, when you can.\"></a>Do less, when you can.</h1><p>Use less time, to calculate a less precision result, that still meets the userâ€™s current need.</p>\n<p>åŒæ ·ä»¥ä¸Šæ–¹çš„è·¯çº¿è§„åˆ’Appä¸ºä¾‹ï¼Œå½“ç”¨æˆ·ä»¥å›ºå®šé€Ÿåº¦åœ¨é«˜é€Ÿå·¡èˆªæ—¶ï¼Œå¯ä»¥åŸºäºç”¨æˆ·è½¦é€Ÿè®¡ç®—ï¼Œå¾—åˆ°ç”¨æˆ·åœ¨å…¬è·¯ä¸Šçš„å¤§æ¦‚ä½ç½®ï¼Œä¹Ÿæ— éœ€æ—¶æ—¶é€šè¿‡GPSå®šä½ã€‚å½“ç”¨æˆ·æ¥è¿‘POIï¼ˆPoint of Interestï¼‰æ—¶ï¼Œæ‰å”¤èµ·GPSã€‚</p>\n<hr>\n<h1 id=\"å›¾åƒä¸Šçš„è¿‘ä¼¼è®¡ç®—\"><a href=\"#å›¾åƒä¸Šçš„è¿‘ä¼¼è®¡ç®—\" class=\"headerlink\" title=\"å›¾åƒä¸Šçš„è¿‘ä¼¼è®¡ç®—\"></a>å›¾åƒä¸Šçš„è¿‘ä¼¼è®¡ç®—</h1><p>åœ¨éœ€è¦å±•ç¤ºå›¾ç‰‡çš„åœºæ™¯ï¼Œå¦‚æœæ— éœ€å±•ç¤ºå¤§å›¾ï¼Œåˆ™åªåŠ è½½ä½åˆ†è¾¨ç‡ä¸‹çš„å›¾ç‰‡ï¼Œè¿™æ ·å¯ä»¥èŠ‚çº¦å†…å­˜å¹¶ä¸”åŠ å¿«åŠ è½½é€Ÿåº¦ã€‚ä¸€ä¸ªä¾‹å­å°±æ˜¯å¾®ä¿¡é‡Œé¢å¯Ÿçœ‹å¯¹è¯ä»¥åŠæœ‹å‹åœˆçš„å›¾ç‰‡ã€‚</p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"Android Performance Patterns - s4ep9 Caching","url":"https://lilei.pro/2017/02/20/Android-Performance-Patterns-s4ep9-Caching/","content":"<blockquote>\n<p>æœ¬èŠ‚å†…å®¹çº¯ç†è®ºï¼Œæ¦‚æ‹¬æˆä¸€å¥è¯ï¼šCacheå¾ˆé‡è¦ï¼<br><a href=\"https://www.youtube.com/watch?v=JkwrNmCwFfA&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=19\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<a id=\"more\"></a>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/JkwrNmCwFfA\" frameborder=\"0\" allowfullscreen></iframe>\n\n<h1 id=\"Caches-are-FAST\"><a href=\"#Caches-are-FAST\" class=\"headerlink\" title=\"Caches are FAST\"></a>Caches are FAST</h1><p>è®¡ç®—æœºå¯ä»¥å¯¹Cacheè¿›è¡Œå¿«é€Ÿçš„è¯»å–ï¼ŒåŸå› åœ¨äºï¼Œè¯»å–Cacheæ—¶æ˜¯CPUç›´æ¥æ“ä½œRAMï¼›å¦‚æœä¸å€ŸåŠ©Cacheï¼ŒCPUéœ€è¦é—´æ¥ä¸ç¡¬ç›˜é€šä¿¡ï¼Œè€Œç¡¬ç›˜çš„è¯»å†™é€Ÿåº¦æ˜¯æ¯”ä¸ä¸ŠRAMçš„ã€‚</p>\n<p>åœ¨æœ‰Cacheçš„æ—¶å€™ï¼Œé€šå¸¸æƒ…å†µä¸‹ç¬¬ä¸€æ¬¡è¯»å–æ˜¯ä»ç¡¬ç›˜åŠ è½½ï¼Œåç»­çš„è¯»å–å°±å…¨éƒ½èµ°Cacheäº†ã€‚</p>\n<p><img src=\"/img/170220_app_s4ep9/ram.png\" alt=\"RAM\"></p>\n<hr>\n<h1 id=\"When-to-cache\"><a href=\"#When-to-cache\" class=\"headerlink\" title=\"When to cache?\"></a>When to cache?</h1><p>åœ¨å¾ªç¯ä¸­é‡å¤æ‰§è¡Œå¹¶ä¸”ç»“æœä¸å˜çš„è®¡ç®—ï¼Œå¯ä»¥å°†å…¶æŠ½å‡ºæ¥ä¿å­˜åœ¨Cacheä¸­ã€‚ä¸è¦åœ¨å¾ªç¯ä¸­è¿›è¡Œé‡å¤è®¡ç®—ï¼Œè¿™æ˜¯ç¼–ç¨‹ä¸­å¿…é¡»éµå®ˆçš„ä¸€é¡¹åŸºæœ¬åŸåˆ™ã€‚</p>\n<hr>\n<h1 id=\"Caches-help-manage-resources\"><a href=\"#Caches-help-manage-resources\" class=\"headerlink\" title=\"Caches help manage resources\"></a>Caches help manage resources</h1><p>è¿™éƒ¨åˆ†å¼ºè°ƒçš„æ˜¯Cacheæ›´æ–°ç®—æ³•ï¼ŒLRUæ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚</p>\n<hr>\n<h1 id=\"Caching-by-pre-computing\"><a href=\"#Caching-by-pre-computing\" class=\"headerlink\" title=\"Caching by pre-computing\"></a>Caching by pre-computing</h1><p>æå‰æ‰§è¡Œè§£æç¨‹åºï¼Œé¢„å¤„ç†ä½“é‡å¤§çš„æŸ¥æ‰¾è¡¨æˆ–è€…XMLæ–‡ä»¶ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å¯ä»¥å¾ˆå¿«åœ°è·å–æƒ³è¦çš„ç»“æœï¼Œè€Œä¸æ˜¯åŒæ­¥ç­‰å¾…ã€‚</p>\n<p><img src=\"/img/170220_app_s4ep9/ram.png\" alt=\"pre-computing\"></p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"å…³äºé™†é‡‘æ‰€Appåœ¨å°ç±³æ‰‹æœºä¸Šæ— æ³•å±•ç¤ºé¡¹ç›®è¯¦æƒ…é¡µçš„é—®é¢˜åŸå› ä¸è§£å†³åŠæ³•","url":"https://lilei.pro/2017/02/17/Lu-App-Not-Work-On-Mi-Devices/","content":"<blockquote>\n<p>åœ¨ä½¿ç”¨é™†é‡‘æ‰€Androidç‰ˆæœ¬çš„Appæ—¶ï¼Œè¿›å…¥ä»»ä½•ç†è´¢äº§å“è¯¦æƒ…é¡µï¼Œéƒ½æ˜¾ç¤ºä¸ºç©ºç™½ï¼Œæ— æ³•è¿›è¡ŒæŸ¥é˜…ä¸è´­ä¹°ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<p><img src=\"/img/170217_lu_not_work_on_mi/on_site.png\" alt=\"é—®é¢˜æˆªå›¾\"></p>\n<hr>\n<h1 id=\"æƒ…æ™¯å†ç°\"><a href=\"#æƒ…æ™¯å†ç°\" class=\"headerlink\" title=\"æƒ…æ™¯å†ç°\"></a>æƒ…æ™¯å†ç°</h1><p><img src=\"/img/170217_lu_not_work_on_mi/system.jpeg\" alt=\"ç³»ç»Ÿç‰ˆæœ¬\"></p>\n<p>å°ç±³ç³»ç»Ÿæ˜¯å‡çº§åçš„æœ€æ–°ç‰ˆ<br>Webkitå†…æ ¸ç‰ˆæœ¬ï¼š54.0.2840.85</p>\n<p>å‘ç°æˆªå›¾ä¸­æ— æ³•æ˜¾ç¤ºäº§å“è¯¦æƒ…çš„é—®é¢˜åï¼Œæˆ‘è”ç³»äº†é™†é‡‘æ‰€çš„äººå·¥åœ¨çº¿å®¢æœï¼Œåœ¨æè¿°é—®é¢˜å¹¶æä¾›æˆªå›¾åï¼Œå®¢æœå‘ŠçŸ¥éœ€è¦1åˆ°2ä¸ªå·¥ä½œæ—¥ç»™å‡ºåé¦ˆã€‚å®é™…ä¸Šå¹¶æ²¡æœ‰é‚£ä¹ˆä¹…ï¼Œæˆ‘æ˜¯æ—©ä¸Šåé¦ˆçš„é—®é¢˜ï¼Œä¸‹åˆä¸´è¿‘ä¸‹ç­æ—¶å°±æ”¶åˆ°äº†å®¢æœçš„å›å¤ç”µè¯ã€‚</p>\n<p>å®¢æœåº”è¯¥æ˜¯ä»å¼€å‘é‚£é‡Œå¾—åˆ°äº†åé¦ˆé‚®ä»¶ï¼Œåœ¨è¿™é‡Œè¡¨æ‰¬ä¸€ä¸‹é™†é‡‘æ‰€å“åº”é—®é¢˜çš„é€Ÿåº¦ã€‚æ— æ³•æ˜¾ç¤ºçš„åŸå› åœ¨äºå°ç±³ç³»ç»Ÿé‡Œä½¿ç”¨çš„WebViewå†…æ ¸ç‰ˆæœ¬æ˜¯53æˆ–è€…54ï¼Œè¿™ä¸¤ä¸ªç‰ˆæœ¬å­˜åœ¨bugï¼Œè§£å†³åŠæ³•ä¹Ÿå¾ˆâ€œç®€å•â€ï¼Œåªè¦æŠŠå®ƒå‡çº§æˆ55å°±å¯ä»¥äº†ã€‚è¿™é‡Œçš„â€œç®€å•â€ä¸ºä»€ä¹ˆæ‰“ä¸Šäº†å¼•å·å‘¢ï¼Ÿå› ä¸ºå‡çº§WebViewéœ€è¦æ‰‹æœºä¸Šè£…æœ‰GooglePlayï¼Œè€Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå›½å†…çš„Androidæ‰‹æœºç³»ç»Ÿé‡Œï¼Œå®‰è£…GooglePlayçš„å°‘ä¹‹åˆå°‘ã€‚ä¸è¿‡ä»€ä¹ˆä¹Ÿéš¾ä¸ä½å¹¿å¤§çš„ç½‘æ°‘æœ‹å‹å¯¹å¢™å¤–ä¸–ç•Œçš„å‘å¾€ï¼Œå†…äº‹ä¸å†³é—®ç™¾åº¦ï¼Œè‡ªç„¶å¯ä»¥æ‰¾åˆ°å®‰è£…çš„é€”å¾„ã€‚</p>\n<hr>\n<h1 id=\"è§£å†³é€”å¾„\"><a href=\"#è§£å†³é€”å¾„\" class=\"headerlink\" title=\"è§£å†³é€”å¾„\"></a>è§£å†³é€”å¾„</h1><p>å…ˆå®‰è£…Googleæ¡†æ¶ï¼Œå†å®‰è£…GooglePlayåï¼Œåœ¨GooglePlayä¸­æœç´¢WebViewè¿›è¡Œå‡çº§å®‰è£…ï¼Œå†æ‰“å¼€é™†é‡‘æ‰€â€”â€”duangï¼é—®é¢˜è¿åˆƒè€Œè§£äº†ã€‚</p>\n<hr>\n<h1 id=\"é—®é¢˜èµ·å› æ¢ç©¶\"><a href=\"#é—®é¢˜èµ·å› æ¢ç©¶\" class=\"headerlink\" title=\"é—®é¢˜èµ·å› æ¢ç©¶\"></a>é—®é¢˜èµ·å› æ¢ç©¶</h1><p><strong>åœ¨ç™¾åº¦ä¸Šæœä¸å‡ºä»»ä½•å›½å†…å¼€å‘è€…å¯¹è¿™ä¸ªé—®é¢˜çš„æè¿°ï¼</strong>æŒ‰è¯´ä½†å‡¡æ˜¯ä½¿ç”¨äº†å°ç±³æ‰‹æœºï¼Œåªè¦å‡çº§åˆ°äº†æœ€æ–°ç‰ˆæœ¬ï¼Œåœ¨æ‰“å¼€WebViewæ—¶éƒ½æœ‰å¾ˆå¤§å¯èƒ½é­é‡è¿™ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆå†…ç½‘ä¸Šæœä¸åˆ°ï¼Œæˆ‘ä¹Ÿå¾ˆè´¹è§£ã€‚</p>\n<p>è€Œåœ¨Googleä¸Šï¼Œå¾ˆå®¹æ˜“å°±æ‰¾åˆ°ä¸‹é¢è¿™ç¯‡ç”±Chromiumå®˜æ–¹å‘å¸ƒçš„æ–‡æ¡£ï¼š<a href=\"https://www.chromium.org/developers/androidwebview/webview-ct-bug\" target=\"_blank\" rel=\"noopener\">WebView FAQ for Symantec Certificate Transparency Issue</a></p>\n<p>æˆ‘åœ¨è¿™é‡Œä¾ä¸ªäººç†è§£ç®€å•æè¿°ä¸€ä¸‹ï¼Œå»ºè®®å„ä½ç›´æ¥é˜…è¯»åŸæ–‡ï¼Œä¼šè®¤è¯†å¾—æ›´åŠ å…¨é¢ã€‚</p>\n<h3 id=\"æ ¹æœ¬åŸå› \"><a href=\"#æ ¹æœ¬åŸå› \" class=\"headerlink\" title=\"æ ¹æœ¬åŸå› \"></a>æ ¹æœ¬åŸå› </h3><p>ä»WebViewçš„53ç‰ˆæœ¬å¼€å§‹ï¼Œå®ƒè¦æ±‚æ‰€æœ‰è¢«Symantecï¼ˆèµ›é—¨é“å…‹ï¼‰ç­¾ç½²çš„è¯ä¹¦ï¼Œå¿…é¡»æ‰§è¡ŒChromeè¯ä¹¦æ”¿ç­–ã€‚ä½†æ˜¯ï¼ŒChromeè‡ªå·±åœ¨è¿›è¡ŒéªŒè¯æ—¶ï¼Œç«Ÿç„¶å‡ºé”™äº†ï¼ï¼ï¼åœ¨åŠ è½½å…·æœ‰Symantecè¯ä¹¦çš„é¡µé¢æ—¶ï¼Œä¼šå¯¼è‡´<code>onReceivedSslError()</code>çš„å›è°ƒï¼Œé¡µé¢æ˜¾ç¤ºä¸€ç‰‡ç©ºç™½ã€‚</p>\n<p>è¿™ç®—ä¸ç®—å¼„å·§æˆæ‹™ï¼Ÿ</p>\n<h3 id=\"å½±å“èŒƒå›´\"><a href=\"#å½±å“èŒƒå›´\" class=\"headerlink\" title=\"å½±å“èŒƒå›´\"></a>å½±å“èŒƒå›´</h3><p>è‡ªAndroid Lç‰ˆæœ¬å¼€å§‹ï¼ŒWebViewç‰ˆæœ¬53å’Œ54ä¼šå—åˆ°å½±å“ï¼Œ55å¼€å§‹æ¢å¤æ­£å¸¸ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé—®é¢˜å¹¶éæ˜¯ç«‹åˆ»æ˜¾ç°çš„ï¼Œè€Œä¼šåœ¨WebViewçš„build dateåå‘¨ä¹‹åï¼Œæ‰æš´éœ²å‡ºæ¥ã€‚Buildç‰ˆæœ¬ä¸è¿‡æœŸæ—¶é—´å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨æˆ‘åˆšå‡çº§Androidç³»ç»Ÿæ—¶å¹¶æ²¡æœ‰å‘ç”Ÿè¿™ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯åœ¨ä¸Šå‘¨ä½¿ç”¨é™†é‡‘æ‰€Appæ—¶æ‰æ˜¾éœ²å‡ºæ¥ã€‚</p>\n<table>\n<thead>\n<tr>\n<th>Build ID</th>\n<th>Expiration Date</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>54.0.2840.68</td>\n<td>12/27/2016</td>\n</tr>\n<tr>\n<td>54.0.2840.85</td>\n<td>1/7/2017</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"ç°èº«è¯´æ³•\"><a href=\"#ç°èº«è¯´æ³•\" class=\"headerlink\" title=\"ç°èº«è¯´æ³•\"></a>ç°èº«è¯´æ³•</h3><p>ä¸ºäº†éªŒè¯ä¸Šæ–‡çš„æƒ…å†µï¼Œæˆ‘åœ¨ä»£ç ä¸­ä½¿ç”¨<code>getPackageManager().getPackageInfo(&quot;com.google.android.webview&quot;, 0).versionCode</code>å¯Ÿçœ‹å°ç±³æ‰‹æœºçš„WebViewç‰ˆæœ¬å·ï¼Œæœç„¶æ˜¯<code>54.0.2840.85</code>ï¼Œä¸å¹¸ä¸­æ‹›ã€‚</p>\n<p>åœ¨é€šè¿‡GooglePlayå®‰è£…æœ€æ–°çš„<code>55.0.2883.91</code>ç‰ˆæœ¬åï¼Œå†æ‰“å¼€é™†é‡‘æ‰€Appï¼Œä¸€åˆ‡æ­£å¸¸äº†ã€‚</p>\n<h3 id=\"Q-amp-A\"><a href=\"#Q-amp-A\" class=\"headerlink\" title=\"Q &amp; A\"></a>Q &amp; A</h3><h4 id=\"Qï¼šAndroid-Nç³»ç»Ÿä¹Ÿä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ\"><a href=\"#Qï¼šAndroid-Nç³»ç»Ÿä¹Ÿä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ\" class=\"headerlink\" title=\"Qï¼šAndroid Nç³»ç»Ÿä¹Ÿä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ\"></a>Qï¼šAndroid Nç³»ç»Ÿä¹Ÿä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h4><p>Aï¼šè‡ªLå¼€å§‹çš„ç³»ç»Ÿéƒ½ä¼šé‡åˆ°ï¼Œè€ŒNç³»ç»Ÿç”±äºä¸æ˜¯ä½¿ç”¨å•ç‹¬çš„WebViewï¼Œè€Œæ˜¯ä½¿ç”¨ç”±Chromeæä¾›çš„WebViewï¼Œå› æ­¤åªè¦å‡çº§Chromeå°±å¯ä»¥ã€‚ï¼ˆåœ¨Chromeçš„å±æ€§é‡Œå¯ä»¥çœ‹åˆ°Webviewç‰ˆæœ¬ï¼‰</p>\n<h4 id=\"Qï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ä¸ºæœªè¿‡æœŸçš„æ—¶é—´ï¼Œæ¥é¿å…è¿™ä¸ªé—®é¢˜å—ï¼Ÿ\"><a href=\"#Qï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ä¸ºæœªè¿‡æœŸçš„æ—¶é—´ï¼Œæ¥é¿å…è¿™ä¸ªé—®é¢˜å—ï¼Ÿ\" class=\"headerlink\" title=\"Qï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ä¸ºæœªè¿‡æœŸçš„æ—¶é—´ï¼Œæ¥é¿å…è¿™ä¸ªé—®é¢˜å—ï¼Ÿ\"></a>Qï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ä¿®æ”¹ç³»ç»Ÿæ—¶é—´ä¸ºæœªè¿‡æœŸçš„æ—¶é—´ï¼Œæ¥é¿å…è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</h4><p>Aï¼šç¬”è€…äº²æµ‹å¯ä»¥ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™ä¹ˆåšï¼Œæœ‰å¯èƒ½å¯¼è‡´æ›´å¤šæ½œåœ¨çš„é—®é¢˜ã€‚</p>\n<h4 id=\"Qï¼šå¯å¦é€šè¿‡UserAgentå—…æ¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ\"><a href=\"#Qï¼šå¯å¦é€šè¿‡UserAgentå—…æ¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ\" class=\"headerlink\" title=\"Qï¼šå¯å¦é€šè¿‡UserAgentå—…æ¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ\"></a>Qï¼šå¯å¦é€šè¿‡UserAgentå—…æ¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ</h4><p>Aï¼šéªŒè¯å¤±è´¥å‘ç”Ÿåœ¨è¿æ¥TLSå±‚æ—¶ï¼Œè¿™æ—¶è¿˜æ²¡æœ‰å‘é€UserAgentä¿¡æ¯ï¼Œæ„å‘³ç€é¡µé¢æŒ‚æ‰æ—¶å€™æ˜¯è¿˜ä¸çŸ¥é“UAçš„ã€‚å¦‚æœä¸€å®šè¦åœ¨TLSå±‚è·å–UAä¹Ÿä¸æ˜¯æ²¡æœ‰åŠæ³•ï¼Œä½†è¿™ä¹ˆåšè¿‡äºå¤æ‚ï¼Œå¹¶ä¸”ä¸å®‰å…¨ã€‚</p>\n<h4 id=\"Qï¼šå¼€å‘è€…æ€æ ·ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\"><a href=\"#Qï¼šå¼€å‘è€…æ€æ ·ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"Qï¼šå¼€å‘è€…æ€æ ·ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\"></a>Qï¼šå¼€å‘è€…æ€æ ·ä¿®å¤è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</h4><p>Aï¼šå”¯ä¸€çš„ä¿®å¤åŠæ³•æ˜¯æç¤ºç”¨æˆ·æ›´æ–°WebViewï¼Œå½“å‘ç”Ÿé—®é¢˜æ—¶ï¼ŒWebViewä¼šå‘å‡ºä¸€ä¸ª<code>onReceivedSslError()</code>å›è°ƒï¼Œä½†æ˜¯å›è°ƒé‡Œå¹¶æ²¡æœ‰è¶³ä»¥è¯´æ˜é—®é¢˜çš„æç¤ºä¿¡æ¯ã€‚å¹¶ä¸”é€šè¿‡è¿™ä¸ªå›è°ƒæ¥å›é¿é—®é¢˜ï¼ˆæ¯”å¦‚åœæ­¢ä½¿ç”¨è¯ä¹¦ï¼‰ä¼šå¯¼è‡´æ›´å¤šå®‰å…¨éšæ‚£ï¼Œå¼ºçƒˆä¸å»ºè®®è¿™ä¹ˆåšã€‚</p>\n<hr>\n<h1 id=\"ä¸€äº›æ€è€ƒ\"><a href=\"#ä¸€äº›æ€è€ƒ\" class=\"headerlink\" title=\"ä¸€äº›æ€è€ƒ\"></a>ä¸€äº›æ€è€ƒ</h1><p>æ•´ä¸ªé—®é¢˜çš„æè¿°ä¸è§£é‡Šçœ‹ä¸‹æ¥ï¼Œè¿˜çœŸä¸æ˜¯é™†é‡‘æ‰€å›¢é˜Ÿçš„é”…â€”â€”å¥½ä¹…æ²¡è§å¯¸å¿—äº†ï¼Œå¦‚æœå½“é¢é—®ä»–è¿™ä¸ªäº‹ï¼Œä»–ä¸€å®šæ‘†ç€æ‰‹è¯´ï¼šè¿™ä¸ªé”…æˆ‘ä¸èƒŒï¼è¦æ€ªå°±æ€ªAndroidç¢ç‰‡åŒ–å¤ªä¸¥é‡ï¼Œå°¤å…¶æ˜¯å›½å†…å¸‚åœºï¼Œå„å¤§å‚å•†æŠŠåŸç”Ÿç³»ç»Ÿåšåšç¾åŒ–ï¼Œæ”¹å¤´æ¢é¢ï¼Œå†é¢„è£…ä¸€å¤§å †åƒåœ¾è½¯ä»¶ï¼Œå°±æ‘‡èº«ä¸€å˜æˆäº†è‡ªå·±çš„ä¸œè¥¿ã€‚è€Œå…³é”®ç‰¹æ€§åˆæ›´æ–°ä¸åŠæ—¶ï¼Œå°±å¯¼è‡´äº†ä¸Šæ–‡å‘ç”Ÿçš„é—®é¢˜ã€‚</p>\n<p>Androidç³»ç»Ÿçš„å¼€æ”¾ç‰¹æ€§æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå°±çœ‹æˆ‘ä»¬æ€ä¹ˆä½¿ç”¨å®ƒã€‚</p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android"]},{"title":"è§£å†³Android Studioå¯¼å…¥é¡¹ç›®æ—¶é€Ÿåº¦è¿‡æ…¢çš„é—®é¢˜","url":"https://lilei.pro/2017/02/17/Fix-Slow-Inilizating-Project-In-AS/","content":"<blockquote>\n<p>å½“æˆ‘ä»¬é€šè¿‡Android Studioå¯¼å…¥æ–°é¡¹ç›®æ—¶ï¼Œå¾€å¾€éœ€è¦åŒæ­¥ä¸‹è½½æ–°é¡¹ç›®æ‰€éœ€çš„gradleç‰ˆæœ¬ï¼Œè¿™æ˜¯å¯¼è‡´åŠ è½½è¿‡æ…¢çš„åŸå› ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<h1 id=\"å¡ä½çš„åŸå› \"><a href=\"#å¡ä½çš„åŸå› \" class=\"headerlink\" title=\"å¡ä½çš„åŸå› \"></a>å¡ä½çš„åŸå› </h1><p>é¡¹ç›®éœ€è¦ç‰¹å®šç‰ˆæœ¬çš„gradleè¿›è¡Œæ„å»ºï¼Œè€Œæœ¬åœ°æ²¡æœ‰å¯¹åº”ç‰ˆæœ¬çš„gradleï¼Œéœ€è¦ä»ç½‘ç»œä¸‹è½½ï¼ˆ <a href=\"http://services.gradle.org/distributions\" target=\"_blank\" rel=\"noopener\">http://services.gradle.org/distributions</a> ï¼‰ï¼Œç”±äºå¤§å®¶å¿ƒçŸ¥è‚šæ˜çš„åŸå› ï¼Œä¸‹è½½é€Ÿåº¦éå¸¸æ…¢ï¼›è€Œä¸”ï¼Œé…ç½®çš„shadowsockså¯¹æ­¤ä¼¼ä¹ä¸èµ·ä½œç”¨ã€‚è¿™å°±å¯¼è‡´äº†å¯¼å…¥é¡¹ç›®æ—¶ä¸€ç›´åœç•™åœ¨â€œBuilding gradle project infoâ€ã€‚</p>\n<p><img src=\"/img/170217_slowing_initializing_project_in_as/building.png\" alt=\"\"></p>\n<hr>\n<h1 id=\"è§£å†³åŠæ³•\"><a href=\"#è§£å†³åŠæ³•\" class=\"headerlink\" title=\"è§£å†³åŠæ³•\"></a>è§£å†³åŠæ³•</h1><p>æœ¬ä»¥ä¸ºå›½å†…æœ‰å¯¹åº”çš„é•œåƒç«™ç‚¹ï¼Œå¯ä»¥é…ç½®ï¼Œä½†å´æ²¡æœ‰æ‰¾åˆ°ã€‚è¿™é‡Œå…ˆé€šè¿‡æµè§ˆå™¨ä¸‹è½½ä¸‹æ¥gradle-xx.zipï¼Œç„¶åæ›¿æ¢æœ¬åœ°æ–‡ä»¶æ¥è¿›è¡Œã€‚</p>\n<h3 id=\"ç¬¬ä¸€æ­¥ï¼šåœ¨-http-services-gradle-org-distributions-ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬\"><a href=\"#ç¬¬ä¸€æ­¥ï¼šåœ¨-http-services-gradle-org-distributions-ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬\" class=\"headerlink\" title=\"ç¬¬ä¸€æ­¥ï¼šåœ¨ http://services.gradle.org/distributions ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬\"></a>ç¬¬ä¸€æ­¥ï¼šåœ¨ <a href=\"http://services.gradle.org/distributions\" target=\"_blank\" rel=\"noopener\">http://services.gradle.org/distributions</a> ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬</h3><p>é€šè¿‡å·²é…ç½®ä»£ç†çš„æµè§ˆå™¨ä¸‹è½½ï¼Œæˆ–è€…è¿…é›·ï¼ˆè¦é¿å…å†æ¬¡ä¸Šæ¼”XcodeGhostäº‹ä»¶ï¼‰ã€‚ä¸‹è½½å®ŒæˆåæŠŠzipåŒ…ä¸¢è¿›æœ¬åœ°gradleä»“åº“é‡Œã€‚ä»¥<code>gradle-2.14.1-all</code>ä¸ºä¾‹ï¼Œåœ¨æˆ‘çš„ç”µè„‘ä¸Šè·¯å¾„æ˜¯<code>~/.gradle/wrapper/dists/gradle-2.14.1-all/8bnwg5hd3w55iofp58khbp6yv/</code>ã€‚</p>\n<h3 id=\"ç¬¬äºŒæ­¥ï¼ˆå¯é€‰ï¼‰ï¼šä¿®æ”¹é¡¹ç›®gradleç‰ˆæœ¬\"><a href=\"#ç¬¬äºŒæ­¥ï¼ˆå¯é€‰ï¼‰ï¼šä¿®æ”¹é¡¹ç›®gradleç‰ˆæœ¬\" class=\"headerlink\" title=\"ç¬¬äºŒæ­¥ï¼ˆå¯é€‰ï¼‰ï¼šä¿®æ”¹é¡¹ç›®gradleç‰ˆæœ¬\"></a>ç¬¬äºŒæ­¥ï¼ˆå¯é€‰ï¼‰ï¼šä¿®æ”¹é¡¹ç›®gradleç‰ˆæœ¬</h3><p>å¦‚æœä¸‹è½½çš„gradleç‰ˆæœ¬å’Œé¡¹ç›®æ–‡ä»¶é‡Œå£°æ˜çš„ç‰ˆæœ¬ä¸åŒï¼Œéœ€è¦ä¿®æ”¹é¡¹ç›®é‡Œä¾èµ–çš„gradleç‰ˆæœ¬ã€‚æœ‰ä¸¤ä¸ªæ–‡ä»¶éœ€è¦ä¿®æ”¹ï¼Œåˆ†åˆ«æ˜¯<code>gradle/wrapper/gradle-wrapper.properties</code>å’Œ<code>build.gradle</code></p>\n<h4 id=\"gradle-wrapper-gradle-wrapper-properties\"><a href=\"#gradle-wrapper-gradle-wrapper-properties\" class=\"headerlink\" title=\"gradle/wrapper/gradle-wrapper.properties\"></a>gradle/wrapper/gradle-wrapper.properties</h4><p>ä¿®æ”¹<code>distributionUrl</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">distributionBase=GRADLE_USER_HOME</span><br><span class=\"line\">distributionPath=wrapper/dists</span><br><span class=\"line\">zipStoreBase=GRADLE_USER_HOME</span><br><span class=\"line\">zipStorePath=wrapper/dists</span><br><span class=\"line\">distributionUrl=https\\://services.gradle.org/distributions/gradle-2.14.1-all.zip</span><br></pre></td></tr></table></figure>\n<h4 id=\"build-gradle\"><a href=\"#build-gradle\" class=\"headerlink\" title=\"build.gradle\"></a>build.gradle</h4><p>ä¿®æ”¹<code>classpath</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">buildscript &#123;</span><br><span class=\"line\">    repositories &#123;</span><br><span class=\"line\">        maven &#123;</span><br><span class=\"line\">            url &quot;http://depot.sankuai.com/nexus/content/groups/public/&quot;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    dependencies &#123;</span><br><span class=\"line\">        classpath &apos;com.android.tools.build:gradle:2.2.0&apos;</span><br><span class=\"line\"></span><br><span class=\"line\">        // NOTE: Do not place your application dependencies here; they belong</span><br><span class=\"line\">        // in the individual module build.gradle files</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å®Œæˆä»¥ä¸Šæ­¥éª¤åé‡å¯ASï¼Œå°±å¯ä»¥é¡ºåˆ©åœ°æ‰“å¼€é¡¹ç›®äº†ã€‚</p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h4><hr>\n","categories":[],"tags":["Android Studio"]},{"title":"AndroidåŸºç¡€çŸ¥è¯†ä¹‹Viewç»˜åˆ¶å†æ€è€ƒ","url":"https://lilei.pro/2017/02/15/View-Drawing-In-Android/","content":"<blockquote>\n<p>è¿‘æ—¥è‡ªå·±åœ¨å†™ä¸€ä¸ªç»“åˆäº†ä¸‹æ‹‰åˆ·æ–°&amp;ViewPageråŠŸèƒ½äºä¸€ä½“çš„è‡ªå®šä¹‰æ§ä»¶ï¼Œé¡ºä¾¿é‡æ¸©äº†Viewç»˜åˆ¶çš„æµç¨‹ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æœ¬æ–‡ã€å¾…å®Œæˆã€‘å¯èƒ½æ˜¯ä½ æ‰€çœ‹è¿‡æœ€ç®€å•æ˜“æ‡‚çš„Viewç»˜åˆ¶æµç¨‹è§£è¯»ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<h1 id=\"å‡ ä¸ªé‡è¦æ–¹æ³•\"><a href=\"#å‡ ä¸ªé‡è¦æ–¹æ³•\" class=\"headerlink\" title=\"å‡ ä¸ªé‡è¦æ–¹æ³•\"></a>å‡ ä¸ªé‡è¦æ–¹æ³•</h1><h1 id=\"å­¦ä»¥è‡´ç”¨ï¼šå®ç°ä¸€ä¸ªç®€å•çš„PullToRefreshå®¹å™¨\"><a href=\"#å­¦ä»¥è‡´ç”¨ï¼šå®ç°ä¸€ä¸ªç®€å•çš„PullToRefreshå®¹å™¨\" class=\"headerlink\" title=\"å­¦ä»¥è‡´ç”¨ï¼šå®ç°ä¸€ä¸ªç®€å•çš„PullToRefreshå®¹å™¨\"></a>å­¦ä»¥è‡´ç”¨ï¼šå®ç°ä¸€ä¸ªç®€å•çš„PullToRefreshå®¹å™¨</h1>","categories":[],"tags":["Android"]},{"title":"AndroidåŸºç¡€çŸ¥è¯†ä¹‹äº‹ä»¶ä¼ é€’","url":"https://lilei.pro/2017/02/15/Android-Touch-Event-Delivery/","content":"<blockquote>\n<p>åœ¨Androidç³»ç»Ÿä¸­ï¼Œäº‹ä»¶çš„ä¼ é€’å’Œå¤„ç†æ˜¯è®©äººå¾ˆå®¹æ˜“å›°æƒ‘çš„ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œåœ¨å¤„ç†å¤æ‚ç•Œé¢äº‹ä»¶æ—¶ï¼Œå¦‚æœå¯¹è¿™æ–¹é¢æŒæ¡ä¸æ‰å®ï¼Œä¼šé‡åˆ°å¾ˆå¤šåƒå¥‡ç™¾æ€ªçš„é—®é¢˜ã€‚</p>\n</blockquote>\n<blockquote>\n<p>æœ¬æ–‡å¯èƒ½æ˜¯ä½ è¯»è¿‡çš„å¯¹äº‹ä»¶ä¼ é€’ç³»ç»Ÿæœ€ç®€å•æ˜“æ‡‚çš„è§£è¯»ã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<hr>\n<h1 id=\"Androidäº‹ä»¶ç³»ç»Ÿæ¦‚è¿°\"><a href=\"#Androidäº‹ä»¶ç³»ç»Ÿæ¦‚è¿°\" class=\"headerlink\" title=\"Androidäº‹ä»¶ç³»ç»Ÿæ¦‚è¿°\"></a>Androidäº‹ä»¶ç³»ç»Ÿæ¦‚è¿°</h1><p>ä»»ä½•UIç•Œé¢ç³»ç»Ÿçš„è®¾è®¡ï¼Œéƒ½ä¸€å®šç¦»ä¸æ¥äº‹ä»¶ä¼ é€’ï¼ŒAndroidç³»ç»Ÿå½“ç„¶ä¸ä¾‹å¤–ã€‚</p>\n<p>è¦ç†è§£Androidä¸­çš„äº‹ä»¶æœºåˆ¶ï¼Œéœ€è¦ç‰¢è®°ä¸‹é¢ä¸¤ä¸ªåŸºæœ¬åŸåˆ™ï¼š</p>\n<ul>\n<li>äº‹ä»¶ä¼ é€’ï¼Œä»å¤–å‘å†…ã€‚</li>\n<li>äº‹ä»¶æ¶ˆè´¹ï¼Œä»å†…å‘å¤–ã€‚</li>\n</ul>\n<p><img src=\"/img/170215_event_handling/outer_inner.png\" alt=\"ä¾‹å­\"></p>\n<h2 id=\"äº‹ä»¶ä¼ é€’\"><a href=\"#äº‹ä»¶ä¼ é€’\" class=\"headerlink\" title=\"äº‹ä»¶ä¼ é€’\"></a>äº‹ä»¶ä¼ é€’</h2><p>å…ˆè§¦å‘å¤–å±‚ViewGroupçš„<code>dispatchTouchEvent</code>æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåœ¨äº‹ä»¶çš„æ•´ä¸ªå¤„ç†æµç¨‹ç»“æŸåå¼‚æ­¥è¿”å›ï¼›æ¥ç€è§¦å‘å¤–å±‚ViewGroupçš„<code>onInterceptTouchEvent</code>æ–¹æ³•ï¼Œå¦‚æœè¦æ‹¦æˆªè¿™ä¸ªäº‹ä»¶ï¼Œä¸è®©å®ƒç»§ç»­å‘ä¸‹ä¼ é€’ï¼Œå°±åœ¨è¿™ä¸ªæ–¹æ³•é‡Œå°±è¦è¿”å›<code>true</code>ï¼›å½“äº‹ä»¶ç»§ç»­å‘ä¸‹ä¼ é€’æ—¶ï¼Œå†…å±‚Viewå…ˆè§¦å‘<code>dispatchTouchEvent</code>ï¼Œæ¥ç€è¿›è¡Œåˆ°äº‹ä»¶æ¶ˆè´¹ç¯èŠ‚ã€‚</p>\n<h2 id=\"äº‹ä»¶æ¶ˆè´¹\"><a href=\"#äº‹ä»¶æ¶ˆè´¹\" class=\"headerlink\" title=\"äº‹ä»¶æ¶ˆè´¹\"></a>äº‹ä»¶æ¶ˆè´¹</h2><p>å¦‚æœå¤–å±‚ViewGroupåœ¨<code>onInterceptTouchEvent</code>æ–¹æ³•é‡Œè¿”å›<code>true</code>ï¼Œé‚£ä¹ˆäº‹ä»¶ä»…ç”±å¤–å±‚è¿›è¡Œæ¶ˆè´¹ï¼Œå³è¿›å…¥<code>onTouchEvent</code>æ–¹æ³•é‡Œï¼Œæ¶ˆè´¹å®Œæˆåï¼Œè¿›è¡Œ<code>dispatchTouchEvent</code>ç»“æœå›è°ƒï¼Œäº‹ä»¶æ¶ˆè´¹æ‰äº†åˆ™è¿”å›<code>true</code>ï¼Œåä¹‹è¿”å›<code>false</code>ã€‚</p>\n<p>å¦‚æœå¤–å±‚ViewGroupåœ¨<code>onInterceptTouchEvent</code>æ–¹æ³•é‡Œè¿”å›<code>false</code>ï¼Œäº‹ä»¶ç»§ç»­å‘ä¸‹ä¼ é€’ï¼Œå†…å±‚Viewåœ¨å®ƒçš„<code>onTouchEvent</code>é‡Œè¿”å›å¤„ç†ç»“æœï¼Œå†æŠŠç»“æœäº¤ç»™å†…å±‚Viewçš„<code>dispatchTouchEvent</code>æ–¹æ³•è¿”å›ã€‚å¦‚æœå†…å±‚æ¶ˆè´¹äº†äº‹ä»¶ï¼ˆè¿”å›trueï¼‰ï¼Œåˆ™å¤–å±‚ä¸ä¼šè§¦å‘<code>onTouchEvent</code>æ–¹æ³•ï¼›å¦‚æœå†…å±‚æ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ï¼ˆè¿”å›falseï¼‰ï¼Œé‚£ä¹ˆäº‹ä»¶äº¤ç”±å¤–å±‚æ¶ˆè´¹ï¼Œä¼šè§¦å‘å¤–å±‚ViewGroupçš„<code>onTouchEvent</code>æ–¹æ³•ã€‚</p>\n<h2 id=\"ä¸Šä¾‹çš„è¡¥å……è¯´æ˜\"><a href=\"#ä¸Šä¾‹çš„è¡¥å……è¯´æ˜\" class=\"headerlink\" title=\"ä¸Šä¾‹çš„è¡¥å……è¯´æ˜\"></a>ä¸Šä¾‹çš„è¡¥å……è¯´æ˜</h2><p>ä¸Šä¾‹çš„<code>case B</code>ï¼Œè¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œæ˜¯å¤–å±‚ViewGroupä¸å¯¹äº‹ä»¶è¿›è¡Œæ‹¦æˆªï¼Œè€Œæ˜¯åœ¨å†…å±‚Viewçš„<code>onTouchEvent</code>ä¸­è¿”å›<code>false</code>ï¼Œè¿™æ ·äº‹ä»¶ä¾æ—§ä¼šäº¤ç”±å¤–å±‚ViewGroupçš„<code>onTouchEvent</code>è¿›è¡Œæ¶ˆè´¹ã€‚</p>\n<p>åŒç†ï¼Œ<code>case D</code>ä¹Ÿæœ‰å¦å¤–çš„å†™æ³•ï¼Œèªæ˜çš„è¯»è€…ï¼Œä½ ä¸€å®šå·²ç»çŒœå‡ºæ¥äº†ã€‚</p>\n<hr>\n<h1 id=\"å‡ ä¸ªå…³é”®æ–¹æ³•\"><a href=\"#å‡ ä¸ªå…³é”®æ–¹æ³•\" class=\"headerlink\" title=\"å‡ ä¸ªå…³é”®æ–¹æ³•\"></a>å‡ ä¸ªå…³é”®æ–¹æ³•</h1><p>ä¸Šæ–‡ä¸­å·²ç»çœ‹å‡ºï¼ŒAndroidç³»ç»Ÿä¸­å¯¹äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œä¸»è¦æ˜¯<code>dispatchTouchEvent</code>ã€<code>onInterceptTouchEvent</code>ã€<code>onTouchEvent</code>è¿™ä¸‰ä¸ªæ–¹æ³•ï¼Œä¸‹é¢é€ä¸€è¿›è¡Œåˆ†æã€‚</p>\n<h2 id=\"dispatchTouchEvent\"><a href=\"#dispatchTouchEvent\" class=\"headerlink\" title=\"dispatchTouchEvent\"></a><a href=\"https://developer.android.com/reference/android/view/ViewGroup.html#dispatchTouchEvent(android.view.MotionEvent)\" target=\"_blank\" rel=\"noopener\">dispatchTouchEvent</a></h2><p>Viewå¤„ç†äº‹ä»¶æ—¶ï¼Œæœ€å…ˆè¿›å…¥çš„æ–¹æ³•ï¼Œç›´åˆ°äº‹ä»¶å¤„ç†å®Œæˆåï¼Œæ‰ä¼šè¿”å›<code>true</code>ï¼ˆåœ¨å½“å‰Viewæˆ–è€…å†…éƒ¨Viewè¿›è¡Œäº†æ¶ˆè´¹ï¼‰æˆ–è€…<code>false</code>ï¼ˆæœªè¿›è¡Œæ¶ˆè´¹ï¼‰ã€‚</p>\n<p>å¯¹äºViewï¼Œè¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¸<code>onTouchEvent</code>è¿”å›å€¼ç›¸åŒã€‚</p>\n<p>å¯¹äºViewGroupï¼Œåªè¦å†…éƒ¨æœ‰ä»»æ„ä¸€ä¸ªViewæ¶ˆè´¹äº†äº‹ä»¶ï¼Œåœ¨ViewGroupçš„è¿™ä¸ªæ–¹æ³•å°±ä¼šè¿”å›<code>true</code>ã€‚</p>\n<h2 id=\"onInterceptTouchEvent\"><a href=\"#onInterceptTouchEvent\" class=\"headerlink\" title=\"onInterceptTouchEvent\"></a><a href=\"https://developer.android.com/reference/android/view/ViewGroup.html#onInterceptTouchEvent(android.view.MotionEvent)\" target=\"_blank\" rel=\"noopener\">onInterceptTouchEvent</a></h2><p>è¿™ä¸ªæ–¹æ³•åªå­˜åœ¨äºViewGroupä¸­ï¼Œæ§åˆ¶æ˜¯å¦å°†å½“å‰æ—¶é—´æ‹¦æˆªä¸‹æ¥ä¸å‘ä¸‹ä¼ é€’ï¼Œåªç»™è‡ªå·±æ¶ˆè´¹ã€‚</p>\n<p>éœ€è¦æ³¨æ„ä¸€æ—¦<code>ACTION_DOWN</code>è¢«æ‹¦æˆªï¼Œåç»­çš„<code>ACTION_MOVE</code>å’Œ<code>ACTION_UP</code>æ ¹æœ¬ä¸ä¼šèµ°åˆ°è¿™ä¸ªæ–¹æ³•é‡Œã€‚</p>\n<h2 id=\"onTouchEvent\"><a href=\"#onTouchEvent\" class=\"headerlink\" title=\"onTouchEvent\"></a><a href=\"https://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent)\" target=\"_blank\" rel=\"noopener\">onTouchEvent</a></h2><p>å¤„ç†touchäº‹ä»¶çš„åœ°æ–¹ï¼Œå¦‚æœè¦å¤„ç†çš„æ˜¯clickäº‹ä»¶ï¼Œä¸è¦å†™åœ¨<code>onTouchEvent</code>æ–¹æ³•é‡Œï¼Œè€Œæ˜¯åº”è¯¥å†™åœ¨<code>performClick</code>ä¸­ã€‚</p>\n<p>æ¶ˆè´¹äº†äº‹ä»¶åˆ™è¿”å›trueï¼Œæ¶ˆè´¹åçš„äº‹ä»¶ç«‹å³åºŸå¼ƒï¼Œä¸ä¼šå†äº¤ç”±å…¶å®ƒViewæ¶ˆè´¹ã€‚</p>\n<h2 id=\"requestDisallowInterceptTouchEvent\"><a href=\"#requestDisallowInterceptTouchEvent\" class=\"headerlink\" title=\"requestDisallowInterceptTouchEvent\"></a><a href=\"https://developer.android.com/reference/android/view/ViewParent.html#requestDisallowInterceptTouchEvent(boolean)\" target=\"_blank\" rel=\"noopener\">requestDisallowInterceptTouchEvent</a></h2><p>ä¸Šæ–‡è®²åˆ°ï¼Œå¤–å±‚çš„ViewParentå¯ä»¥é€šè¿‡<code>onInterceptTouchEvent</code>æ¥æ‹¦æˆªäº‹ä»¶ï¼Œä¸ç»§ç»­å‘ä¸‹ä¼ é€’ã€‚ä¸Šæœ‰æ”¿ç­–ä¸‹æœ‰å¯¹ç­–ï¼Œå†…å±‚ViewåŒæ ·å¯ä»¥æ‹’ç»å¤–å±‚ViewGroupçš„è¿™ç§è¡Œä¸ºï¼Œè¿™å°±æ˜¯<code>requestDisallowInterceptTouchEvent(boolean)</code>æ–¹æ³•æ‰€åšçš„äº‹ã€‚</p>\n<p>è¿™ä¸ªæ–¹æ³•ä½äºViewParent.javaä¸­ï¼Œå¯ä»¥é€šè¿‡<code>View.getParent()</code>æ¥è·å–æŸä¸ªViewçš„Parentã€‚è¯¥æ–¹æ³•ä¼šåº”ç”¨åˆ°å½“å‰Viewçš„æ‰€æœ‰ç¥–å…ˆViewGroupï¼Œè€Œä¸ä»…ä»…æ˜¯çˆ¶äº²ã€‚æ‰€æœ‰æ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚çš„Parentå¿…é¡»åœæ­¢å®ƒä»¬çš„Interceptè¡Œä¸ºï¼Œç›´åˆ°å½“å‰touchäº‹ä»¶ç»“æŸï¼ˆæ”¶åˆ°upä¿¡å·æˆ–è€…cancelä¿¡å·ï¼‰ã€‚</p>\n<hr>\n<h1 id=\"å­¦ä»¥è‡´ç”¨ï¼šè§£å†³åœ¨ScrollViewä¸­åµŒå¥—ListViewçš„é—®é¢˜\"><a href=\"#å­¦ä»¥è‡´ç”¨ï¼šè§£å†³åœ¨ScrollViewä¸­åµŒå¥—ListViewçš„é—®é¢˜\" class=\"headerlink\" title=\"å­¦ä»¥è‡´ç”¨ï¼šè§£å†³åœ¨ScrollViewä¸­åµŒå¥—ListViewçš„é—®é¢˜\"></a>å­¦ä»¥è‡´ç”¨ï¼šè§£å†³åœ¨ScrollViewä¸­åµŒå¥—ListViewçš„é—®é¢˜</h1><p>æœ‰äº†è¿™äº›çš„çŸ¥è¯†å‚¨å¤‡ï¼Œæˆ‘ä»¬æ¥å®æ“ä¸€ä¸‹ï¼Œè§£å†³ä¸€ä¸ªå¾ˆå®¹æ˜“å‡ºç°çš„caseï¼šåœ¨ScrollViewä¸­åµŒå¥—ListViewæ—¶ï¼ŒListViewæ— æ³•è¿›è¡Œä¸Šä¸‹æ»‘åŠ¨ï¼Œå¯¼è‡´é¡¹ç›®å±•ç¤ºä¸å®Œæ•´ã€‚</p>\n<p>é¦–å…ˆï¼Œåœ¨ScrollViewä¸­åµŒå¥—ListViewå¹¶ä¸æ˜¯å¥½çš„è®¾è®¡ï¼Œå¦‚æœèƒ½å¤Ÿé¿å…æœ€å¥½ï¼Œè‹¥ä¸èƒ½é¿å…ï¼Œå°±å¿…é¡»è§£å†³ListViewä¸èƒ½æ»‘åŠ¨çš„é—®é¢˜ã€‚æˆ‘ä»¬å¸Œæœ›å½“æ‰‹æŒ‡è½åœ¨ListViewä¸Šè¿›è¡Œæ»‘åŠ¨æ—¶ï¼Œä¼šæ§åˆ¶ListViewçš„æ¡ç›®ï¼Œå½“æ»‘è‡³é¡¶ç«¯æˆ–åº•ç«¯æ—¶ï¼ŒListViewæ— æ³•å†æ»‘ï¼Œåˆ™è¿›è¡Œå¤–å±‚ScrollViewçš„æ»‘åŠ¨ã€‚å½“æ‰‹æŒ‡è½åœ¨ListViewå¤–éƒ¨çš„ScrollViewæ—¶ï¼Œç›´æ¥æ§åˆ¶ScrollViewè¿›è¡Œæ»‘åŠ¨ã€‚</p>\n<h2 id=\"å‡ºç°é—®é¢˜çš„åŸå› \"><a href=\"#å‡ºç°é—®é¢˜çš„åŸå› \" class=\"headerlink\" title=\"å‡ºç°é—®é¢˜çš„åŸå› \"></a>å‡ºç°é—®é¢˜çš„åŸå› </h2><p>åŸå› åœ¨äºScrollViewåœ¨å®ƒçš„<code>onInterceptTouchEvent</code>é‡Œå¯¹<code>ACTION_MOVE</code>è¿›è¡Œäº†æ‹¦æˆªï¼ŒCode donesnâ€™t lie.</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onInterceptTouchEvent</span><span class=\"params\">(MotionEvent ev)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * This method JUST determines whether we want to intercept the motion.</span></span><br><span class=\"line\"><span class=\"comment\">     * If we return true, onMotionEvent will be called and we do the actual</span></span><br><span class=\"line\"><span class=\"comment\">     * scrolling there.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * Shortcut the most recurring case: the user is in the dragging</span></span><br><span class=\"line\"><span class=\"comment\">    * state and he is moving his finger.  We want to intercept this</span></span><br><span class=\"line\"><span class=\"comment\">    * motion.</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> action = ev.getAction();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((action == MotionEvent.ACTION_MOVE) &amp;&amp; (mIsBeingDragged)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * Don't try to intercept touch if we can't scroll anyway.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (getScrollY() == <span class=\"number\">0</span> &amp;&amp; !canScrollVertically(<span class=\"number\">1</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (action &amp; MotionEvent.ACTION_MASK) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_MOVE: &#123;</span><br><span class=\"line\">            <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">             * mIsBeingDragged == false, otherwise the shortcut would have caught it. Check</span></span><br><span class=\"line\"><span class=\"comment\">             * whether the user has moved far enough from his original down touch.</span></span><br><span class=\"line\"><span class=\"comment\">             */</span></span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">            * Locally do absolute value. mLastMotionY is set to the y value</span></span><br><span class=\"line\"><span class=\"comment\">            * of the down event.</span></span><br><span class=\"line\"><span class=\"comment\">            */</span></span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> activePointerId = mActivePointerId;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (activePointerId == INVALID_POINTER) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// If we don't have a valid id, the touch down wasn't on content.</span></span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> pointerIndex = ev.findPointerIndex(activePointerId);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (pointerIndex == -<span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">                Log.e(TAG, <span class=\"string\">\"Invalid pointerId=\"</span> + activePointerId</span><br><span class=\"line\">                        + <span class=\"string\">\" in onInterceptTouchEvent\"</span>);</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> y = (<span class=\"keyword\">int</span>) ev.getY(pointerIndex);</span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> yDiff = Math.abs(y - mLastMotionY);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (yDiff &gt; mTouchSlop &amp;&amp; (getNestedScrollAxes() &amp; SCROLL_AXIS_VERTICAL) == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                mIsBeingDragged = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">                mLastMotionY = y;</span><br><span class=\"line\">                initVelocityTrackerIfNotExists();</span><br><span class=\"line\">                mVelocityTracker.addMovement(ev);</span><br><span class=\"line\">                mNestedYOffset = <span class=\"number\">0</span>;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (mScrollStrictSpan == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    mScrollStrictSpan = StrictMode.enterCriticalSpan(<span class=\"string\">\"ScrollView-scroll\"</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                <span class=\"keyword\">final</span> ViewParent parent = getParent();</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (parent != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                    parent.requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN: &#123;</span><br><span class=\"line\">            <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> y = (<span class=\"keyword\">int</span>) ev.getY();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (!inChild((<span class=\"keyword\">int</span>) ev.getX(), (<span class=\"keyword\">int</span>) y)) &#123;</span><br><span class=\"line\">                mIsBeingDragged = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                recycleVelocityTracker();</span><br><span class=\"line\">                <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">             * Remember location of down touch.</span></span><br><span class=\"line\"><span class=\"comment\">             * ACTION_DOWN always refers to pointer index 0.</span></span><br><span class=\"line\"><span class=\"comment\">             */</span></span><br><span class=\"line\">            mLastMotionY = y;</span><br><span class=\"line\">            mActivePointerId = ev.getPointerId(<span class=\"number\">0</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">            initOrResetVelocityTracker();</span><br><span class=\"line\">            mVelocityTracker.addMovement(ev);</span><br><span class=\"line\">            <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">            * If being flinged and user touches the screen, initiate drag;</span></span><br><span class=\"line\"><span class=\"comment\">            * otherwise don't.  mScroller.isFinished should be false when</span></span><br><span class=\"line\"><span class=\"comment\">            * being flinged.</span></span><br><span class=\"line\"><span class=\"comment\">            */</span></span><br><span class=\"line\">            mIsBeingDragged = !mScroller.isFinished();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mIsBeingDragged &amp;&amp; mScrollStrictSpan == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                mScrollStrictSpan = StrictMode.enterCriticalSpan(<span class=\"string\">\"ScrollView-scroll\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            startNestedScroll(SCROLL_AXIS_VERTICAL);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_CANCEL:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</span><br><span class=\"line\">            <span class=\"comment\">/* Release the drag */</span></span><br><span class=\"line\">            mIsBeingDragged = <span class=\"keyword\">false</span>;</span><br><span class=\"line\">            mActivePointerId = INVALID_POINTER;</span><br><span class=\"line\">            recycleVelocityTracker();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (mScroller.springBack(mScrollX, mScrollY, <span class=\"number\">0</span>, <span class=\"number\">0</span>, <span class=\"number\">0</span>, getScrollRange())) &#123;</span><br><span class=\"line\">                postInvalidateOnAnimation();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            stopNestedScroll();</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_POINTER_UP:</span><br><span class=\"line\">            onSecondaryPointerUp(ev);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">    * The only time we want to intercept motion events is if we are in the</span></span><br><span class=\"line\"><span class=\"comment\">    * drag mode.</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">    <span class=\"keyword\">return</span> mIsBeingDragged;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°å½“<code>(action == MotionEvent.ACTION_MOVE) &amp;&amp; (mIsBeingDragged)</code>æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œè¿™ä¸ªæ–¹æ³•ç›´æ¥è¿”å›<code>true</code>ï¼Œæ‹¦æˆªæ‰äº†<code>ACTION_MOVE</code>äº‹ä»¶ã€‚è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨å†…å±‚Viewæ¥æ”¶åˆ°<code>ACTION_DOWN</code>æ—¶ï¼Œç¦æ­¢æ‰å¤–å±‚çš„æ‹¦æˆªï¼›åœ¨å†…å±‚Viewæ”¶åˆ°æ‰‹æŒ‡æŠ¬èµ·æ¥çš„<code>ACTION_UP</code>æ—¶ï¼Œæ”¾æ‰ç¦åˆ¶ã€‚æˆ‘ä»¬åœ¨<code>dispatchTouchEvent</code>ä¸­å†™å…¥è¿™æ®µé€»è¾‘ï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒå†™è¿›å†…å±‚Viewçš„<code>onTouchListener</code>ä¸­ã€‚</p>\n<h2 id=\"æ¢å¤ListViewæ»‘åŠ¨\"><a href=\"#æ¢å¤ListViewæ»‘åŠ¨\" class=\"headerlink\" title=\"æ¢å¤ListViewæ»‘åŠ¨\"></a>æ¢å¤ListViewæ»‘åŠ¨</h2><p><strong><code>dispatchTouchEvent</code>ä¸­çš„å†™æ³•</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">dispatchTouchEvent</span><span class=\"params\">(MotionEvent ev)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (ev.getAction()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</span><br><span class=\"line\">            getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"comment\">// ......</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><strong><code>onTouchListener</code>ä¸­çš„å†™æ³•</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">listView.setOnTouchListener(<span class=\"keyword\">new</span> View.OnTouchLister &#123;</span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onTouch</span><span class=\"params\">(View v, MotionEvent event)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(event.getAction() == MotionEvent.ACTION_UP)&#123;</span><br><span class=\"line\">            scrollView.requestDisallowInterceptTouchEvent(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span>&#123;</span><br><span class=\"line\">            scrollView.requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>è¿™ä¸ªæ—¶å€™ListViewå·²ç»å¯ä»¥ä¸Šä¸‹æ»‘åŠ¨äº†ï¼Œä½†æ˜¯å½“æ»‘åŠ¨åˆ°ä¸Šï¼ä¸‹å°½å¤´æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å¤–å±‚çš„ScrollViewç»§ç»­æ¥ç®¡æ»‘åŠ¨ã€‚</p>\n<h2 id=\"å¤–å±‚ScrollViewæ¥ç®¡æ»‘åŠ¨\"><a href=\"#å¤–å±‚ScrollViewæ¥ç®¡æ»‘åŠ¨\" class=\"headerlink\" title=\"å¤–å±‚ScrollViewæ¥ç®¡æ»‘åŠ¨\"></a>å¤–å±‚ScrollViewæ¥ç®¡æ»‘åŠ¨</h2><p>é¦–å…ˆéœ€è¦å†™ä¸¤ä¸ªæ–¹æ³•åˆ¤æ–­ListViewå·²ç»åˆ°äº†ç©·é€”æœ«è·¯ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">scrollToBottom</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> first = getFirstVisiblePosition();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> last = getLastVisiblePosition();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> visibleCoutn = getChildCount();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> count = getCount();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> ((first + visibleCoutn) == count) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">scrollToTop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> first = getFirstVisiblePosition();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> last = getLastVisiblePosition();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> visibleCoutn = getChildCount();</span><br><span class=\"line\">    <span class=\"keyword\">int</span> count = getCount();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (first == <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶ååœ¨<code>dispatchTouchEvent</code>æ–¹æ³•é‡Œåˆ¤æ–­ï¼Œåˆ°äº†å°½å¤´åï¼ŒæŠŠ<code>ACTION_MOVE</code>äº‹ä»¶äº¤ç»™å¤–å±‚ScrollViewå¤„ç†ã€‚è¿™é‡ŒåŒ…å«äº†å‰æ–‡ä¸­â€œç¦æ­¢å¤–å±‚ViewGroupæ‹¦æˆªâ€çš„é€»è¾‘ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">float</span> downY, y, mTouchSlop;</span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">dispatchTouchEvent</span><span class=\"params\">(MotionEvent ev)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (ev.getAction()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_DOWN:</span><br><span class=\"line\">            downY = ev.getRawY();</span><br><span class=\"line\">            y = downY;</span><br><span class=\"line\">            getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_MOVE:</span><br><span class=\"line\">            y = ev.getRawY();</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (scrollToTop()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (y - downY &gt; mTouchSlop) &#123;</span><br><span class=\"line\">                    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">                     * Point 1 : å¦‚æœæ»‘åŠ¨åˆ°é¡¶éƒ¨ï¼Œå¹¶ä¸”æ‰‹æŒ‡è¿˜æƒ³å‘ä¸‹æ»‘åŠ¨ï¼Œåˆ™äº‹ä»¶äº¤è¿˜ç»™çˆ¶æ§ä»¶ï¼Œè¦æ±‚çˆ¶æ§ä»¶å¯ä»¥æ‹¦æˆªäº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">                     */</span></span><br><span class=\"line\">                    getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (scrollToBottom()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (y - downY &lt; -mTouchSlop) &#123;</span><br><span class=\"line\">                    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">                     * Point 3 : å¦‚æœæ»‘åŠ¨åˆ°åº•éƒ¨ï¼Œå¹¶ä¸”æ‰‹æŒ‡è¿˜æƒ³å‘ä¸Šæ»‘åŠ¨ï¼Œåˆ™äº‹ä»¶äº¤è¿˜ç»™çˆ¶æ§ä»¶ï¼Œè¦æ±‚çˆ¶æ§ä»¶å¯ä»¥æ‹¦æˆªäº‹ä»¶</span></span><br><span class=\"line\"><span class=\"comment\">                     */</span></span><br><span class=\"line\">                    getParent().requestDisallowInterceptTouchEvent(<span class=\"keyword\">false</span>);</span><br><span class=\"line\">                    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">case</span> MotionEvent.ACTION_UP:</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">super</span>.dispatchTouchEvent(ev);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¿°å†™æ³•åŸºæœ¬å®ç°äº†æ‹‰åˆ°ListViewå°½å¤´æ—¶ï¼Œå°†æ»‘åŠ¨æ—¶é—´äº¤ç»™å¤–éƒ¨ScrollViewå¤„ç†çš„åŠŸèƒ½ã€‚è¿˜å­˜åœ¨çš„é—®é¢˜æ˜¯åœ¨è¾¹ç•Œåˆ¤æ–­æ—¶ä¸å¤Ÿç²¾ç¡®ï¼Œä¼šå‘ç”Ÿç¬¬ä¸€ä¸ªï¼æœ€åä¸€ä¸ªitemåªå±•ç¤ºä¸€ä¸ªè¾¹ç•Œï¼Œå°±è§¦å‘è§£é™¤ç¦æ­¢çš„æ•ˆæœï¼Œå¾…å®Œå–„ã€‚</p>\n<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« è®©ä½ ä¸å†ä¸ºAndroidä¸­çš„äº‹ä»¶ä¼ é€’æœºåˆ¶è€Œå›°æƒ‘ã€‚</p>\n<hr>\n<h1 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h1><ul>\n<li><a href=\"http://blog.csdn.net/Wisimer/article/details/49426653\" target=\"_blank\" rel=\"noopener\">ScrollViewåµŒå¥—ListViewå¤„ç†äº‹ä»¶å†²çª</a></li>\n</ul>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android"]},{"title":"Android Performance Patterns - s4ep8 Removing Unused Resources","url":"https://lilei.pro/2017/02/14/Android-Performance-Patterns-s4ep8-Removing-Unused-Resources/","content":"<blockquote>\n<p>Although YOU may be diligent in removing resources your app wonâ€™t use, itâ€™s not safe to assume that the LIBRARIES youâ€™re including will do the same.<br>Thankfully some helpful Gradle tools can put your APK on a diet.<br><a href=\"https://www.youtube.com/watch?v=HxeW6DHEDQU&amp;index=18&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<a id=\"more\"></a>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/HxeW6DHEDQU?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<h1 id=\"é—®é¢˜èµ·å› \"><a href=\"#é—®é¢˜èµ·å› \" class=\"headerlink\" title=\"é—®é¢˜èµ·å› \"></a>é—®é¢˜èµ·å› </h1><p>æ— ç”¨çš„<code>Resources</code>å­˜åœ¨äºä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯é¡¹ç›®æ–‡ä»¶ä¸­ï¼Œå¼€å‘è€…å¯ä»¥æ£€æŸ¥å¹¶ç›´æ¥ç§»é™¤è¿™äº›æ–‡ä»¶ï¼›ç¬¬äºŒéƒ¨åˆ†å­˜åœ¨äºä¾èµ–çš„<code>library</code>ä¸­ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åªéœ€è¦ä½¿ç”¨åº“é‡Œé¢çš„æŸä¸€äº›åŠŸèƒ½ï¼Œè€Œå¹¶éå…¨éƒ¨åŠŸèƒ½ã€‚å¦‚æœä¸åŠ ä»¥ç‰¹æ®Šå¤„ç†ï¼Œå…¶å®ƒæœªç»ä½¿ç”¨èµ„æºæ–‡ä»¶ä¹Ÿä¼šè¢«æ‰“å…¥æœ€ç»ˆçš„APKä¸­ã€‚</p>\n<h1 id=\"Gradle\"><a href=\"#Gradle\" class=\"headerlink\" title=\"Gradle\"></a>Gradle</h1><p><code>Gradle</code>å¯ä»¥åˆ†æèµ„æºæ–‡ä»¶çš„ä½¿ç”¨æƒ…å†µï¼Œä»è€Œåˆ é™¤é‚£äº›ä¸éœ€å¼•å…¥çš„èµ„æºæ–‡ä»¶ã€‚</p>\n<p><img src=\"/img/170214_app_s4ep8/gradle.png\" alt=\"\"></p>\n<p>å¦‚æœè¦å¼€å¯è¿™é¡¹åŠŸèƒ½ï¼Œéœ€è¦åœ¨<code>gradle</code>é…ç½®æ–‡ä»¶ä¸­å°†<code>minifyEnabled</code>å’Œ<code>shrinkResources</code>å£°æ˜ä¸º<code>true</code>ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">\tbuildTypes &#123;</span><br><span class=\"line\">\t\trelease &#123;</span><br><span class=\"line\">\t\t\tminifyEnabled trure</span><br><span class=\"line\">\t\t\tshrinkResources true</span><br><span class=\"line\">\t\t\tproguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å¼ºåˆ¶ä¿ç•™ï¼åˆ é™¤æŸäº›æ–‡ä»¶</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;resources xmlns:tools:=&quot;http://schemas.android.com/tools&quot;</span><br><span class=\"line\">\ttools:keep=&quot;@layout/l_used*_c, @layout/l_used_b*&quot;</span><br><span class=\"line\">\ttools:discard=&quot;@layout/unused2&quot;</span><br><span class=\"line\">\t/&gt;</span><br></pre></td></tr></table></figure>\n<p>Gradleå¹¶éæ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä¸ä¼šå¤„ç†å¤šåˆ†è¾¨ç‡ï¼å¤šè¯­è¨€ä¸‹çš„èµ„æºæ–‡ä»¶ï¼ˆç¬”è€…å¯¹è¿™éƒ¨åˆ†å­˜ç–‘ï¼Œè¿™äº›èµ„æºæ–‡ä»¶åŸæœ¬å°±ä¸éœ€è¦ç²¾ç®€ï¼Œé™¤éAPPæŒ‡å®šäº†ä»…ä¾›æŸäº›ç‰¹å®šç”¨æˆ·äººç¾¤ä½¿ç”¨ï¼‰</p>\n<p><img src=\"/img/170214_app_s4ep8/limitations.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"Android Performance Patterns s6ep6 - VectorDrawable For Smaller APKs","url":"https://lilei.pro/2017/02/13/Android-Performance-Patterns-s6ep6-VectorDrawable/","content":"<blockquote>\n<p>ç”±äºAndroidç³»ç»Ÿå­˜åœ¨å¤šç§åˆ†è¾¨ç‡ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨å›¾ç‰‡æ—¶ï¼Œå¾€å¾€éœ€è¦å‡†å¤‡ldpiã€mdpiã€hdpiã€xhdpiç­‰å¤šç§åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå ç”¨å¤§é‡APKä½“ç§¯ã€‚<br>é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæœ¬æ–‡ä»‹ç»äº†å¦‚ä½•VectorDrawableæŠ€æœ¯çš„ä¼˜ç‚¹ï¼Œä»¥åŠä½¿ç”¨åœºæ™¯ã€‚<br><a href=\"https://www.youtube.com/watch?v=Ls3KzLRmrXg\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/Ls3KzLRmrXg\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<h1 id=\"ä¸åˆé€‚çš„åšæ³•\"><a href=\"#ä¸åˆé€‚çš„åšæ³•\" class=\"headerlink\" title=\"ä¸åˆé€‚çš„åšæ³•\"></a>ä¸åˆé€‚çš„åšæ³•</h1><p><code>JPEG</code>å’Œ<code>PNG</code>æ˜¯å…‰æ …åŒ–çš„å›¾ç‰‡æ ¼å¼ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›åœ¨ä¸åŒåˆ†è¾¨ç‡ä¸‹å‡ºç°å›¾ç‰‡æ¨¡ç³Šçš„æƒ…å†µï¼Œå°±å¿…é¡»å‡†å¤‡å¤šå¼ å›¾ç‰‡ï¼Œè¿™ä¼šæµªè´¹APKä½“ç§¯ã€‚</p>\n<p><img src=\"/img/170213_app_s6ep6/many_pic.png\" alt=\"\"></p>\n<hr>\n<h1 id=\"VectorDrawable\"><a href=\"#VectorDrawable\" class=\"headerlink\" title=\"VectorDrawable\"></a>VectorDrawable</h1><p><code>VectorDrawable</code>åˆ™å¯ä»¥åªç”¨ä¸€ä¸ªæ–‡ä»¶æ»¡è¶³å¤šç§å±å¹•åˆ†è¾¨ç‡ã€‚å®ƒå°†å›¾ç‰‡åˆ†è§£ä¸ºå¤šä¸ªåŸºæœ¬å›¾å½¢çš„ç»„åˆï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>\n<p><img src=\"/img/170213_app_s6ep6/vector_drawable.png\" alt=\"\"></p>\n<p>å¯¹äºæ–‡ç« å¼€å¤´çš„ä¸‰ä¸ªåœ†å½¢çš„åœºæ™¯ï¼Œå¯ä»¥å°†å ç”¨ç©ºé—´ä»56Ké™ä½åˆ°2Kï¼Œé™ä½äº†96%ã€‚</p>\n<p><img src=\"/img/170213_app_s6ep6/saved_size.png\" alt=\"\"></p>\n<p>ä½¿ç”¨<code>VectorDrawable</code>è¿˜å¯ä»¥é¿å…å› ä½¿ç”¨å¸§åŠ¨ç”»ï¼Œå¯¼è‡´å›¾ç‰‡æ–‡ä»¶è¿‡å¤šçš„æƒ…å†µ</p>\n<p><img src=\"/img/170213_app_s6ep6/animation.png\" alt=\"\"></p>\n<hr>\n<h1 id=\"Caveats\"><a href=\"#Caveats\" class=\"headerlink\" title=\"Caveats\"></a>Caveats</h1><h2 id=\"åŠ è½½\"><a href=\"#åŠ è½½\" class=\"headerlink\" title=\"åŠ è½½\"></a>åŠ è½½</h2><p>åŠ è½½æ—¶ï¼Œ<code>JPEG</code>ã€<code>PNG</code>æ–‡ä»¶å¯ä»¥ä¾é ç¡¬ä»¶è¿›è¡Œçº¹ç†æ¸²æŸ“ï¼Œè€Œ<code>VectorDrawable</code>åœ¨å¤„ç†æ—¶ï¼Œéœ€è¦å…ˆç¿»è¯‘æˆGPUæŒ‡ä»¤ï¼ŒVDä¸­çš„æ¯ä¸€ä¸ªåŸºæœ¬å›¾å½¢ï¼Œéƒ½ä¼šè¢«ä½œä¸ºä¸€ä¸ªå›¾å±‚å¤„ç†ã€‚</p>\n<p><img src=\"/img/170213_app_s6ep6/loading.png\" alt=\"\"></p>\n<h2 id=\"å¤æ‚å›¾åƒ\"><a href=\"#å¤æ‚å›¾åƒ\" class=\"headerlink\" title=\"å¤æ‚å›¾åƒ\"></a>å¤æ‚å›¾åƒ</h2><p><code>VectorDrawable</code>ä¸é€‚ç”¨äºå¤„ç†å¤æ‚å›¾åƒï¼Œå¯¹äºä¸‹å›¾çš„è‚–åƒï¼Œä½¿ç”¨<code>PNG</code>æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>\n<p><img src=\"/img/170213_app_s6ep6/complex_pic.png\" alt=\"\"></p>\n<p>ç®€åŒ–<code>VectorDrawable</code>çš„è·¯å¾„ï¼Œä»¥ä¾¿æ›´åŠ é«˜æ•ˆåœ°ç»˜åˆ¶ã€‚</p>\n<p><img src=\"/img/170213_app_s6ep6/simple.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"Android Performance Patterns s6ep5 Smaller APKs A checklist","url":"https://lilei.pro/2017/02/10/Android-Performance-Patterns-s6ep5-Smaller-APKs/","content":"<blockquote>\n<p>å¦‚ä½•å‡å°‘APKä½“ç§¯<br><a href=\"https://www.youtube.com/watch?v=u5xP4tFQlkA&amp;index=78&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<a id=\"more\"></a>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/u5xP4tFQlkA\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<h1 id=\"å¤´è„‘é£æš´ï¼šæ€æ ·å‡å°‘APKä½“ç§¯å‘¢ï¼Ÿ\"><a href=\"#å¤´è„‘é£æš´ï¼šæ€æ ·å‡å°‘APKä½“ç§¯å‘¢ï¼Ÿ\" class=\"headerlink\" title=\"å¤´è„‘é£æš´ï¼šæ€æ ·å‡å°‘APKä½“ç§¯å‘¢ï¼Ÿ\"></a>å¤´è„‘é£æš´ï¼šæ€æ ·å‡å°‘APKä½“ç§¯å‘¢ï¼Ÿ</h1><ul>\n<li>é¿å…ä½¿ç”¨åˆ†è¾¨ç‡è¿‡å¤§çš„å›¾ç‰‡</li>\n<li>ä½¿ç”¨çŸ¢é‡å›¾</li>\n<li>ä»£ç ã€å¸ƒå±€æ–‡ä»¶å¤ç”¨</li>\n<li>ç²¾ç®€å¤šåª’ä½“æ–‡ä»¶</li>\n<li>æ‡’åŠ è½½ï¼ŒæŸäº›ä¸šåŠ¡åŠŸèƒ½ï¼Œç›´åˆ°çœŸæ­£åº”ç”¨æ—¶æ–¹ä»ç½‘ç»œè¿›è¡Œä¸‹è½½</li>\n<li>ProGuard</li>\n</ul>\n<hr>\n<h1 id=\"Two-key-areas\"><a href=\"#Two-key-areas\" class=\"headerlink\" title=\"Two key areas\"></a>Two key areas</h1><ul>\n<li>Smaller resources (easiest to fix)</li>\n<li>Smaller code</li>\n</ul>\n<hr>\n<h1 id=\"Smaller-resources\"><a href=\"#Smaller-resources\" class=\"headerlink\" title=\"Smaller resources\"></a>Smaller resources</h1><h2 id=\"ç§»é™¤æ— ç”¨èµ„æºæ–‡ä»¶\"><a href=\"#ç§»é™¤æ— ç”¨èµ„æºæ–‡ä»¶\" class=\"headerlink\" title=\"ç§»é™¤æ— ç”¨èµ„æºæ–‡ä»¶\"></a>ç§»é™¤æ— ç”¨èµ„æºæ–‡ä»¶</h2><p>åœ¨<code>gradle</code>æ–‡ä»¶é‡Œé…ç½®<code>minifyEnabled true</code>å’Œ<code>shrinkResources true</code>ï¼Œåœ¨æ‰“åŒ…æ—¶ä¼šå¿½ç•¥å®é™…ä¸Šæ²¡æœ‰åº”ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ã€‚å»ºè®®åœ¨releaseæ—¶æ‰æ‰“å¼€ï¼Œä»¥å‡å°‘debugç¯å¢ƒç¼–è¯‘æ—¶é—´ã€‚</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    buildTypes &#123;</span><br><span class=\"line\">        release &#123;</span><br><span class=\"line\">            minifyEnabled true</span><br><span class=\"line\">            shirnkResources true</span><br><span class=\"line\">            proguardFiles getDefaultProguardFile(&apos;proguard-android.txt&apos;), &apos;proguard-rules.pro&apos;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"ä½¿ç”¨è‡ªåŠ¨åˆ†è¾¨ç‡é€‚é…åŠŸèƒ½\"><a href=\"#ä½¿ç”¨è‡ªåŠ¨åˆ†è¾¨ç‡é€‚é…åŠŸèƒ½\" class=\"headerlink\" title=\"ä½¿ç”¨è‡ªåŠ¨åˆ†è¾¨ç‡é€‚é…åŠŸèƒ½\"></a>ä½¿ç”¨è‡ªåŠ¨åˆ†è¾¨ç‡é€‚é…åŠŸèƒ½</h2><p>æˆ‘ä»¬çŸ¥é“Androidä¸­æœ‰<code>ldpi</code> <code>mdpi</code> <code>hdpi</code> <code>xhdpi</code> <code>xxhdpi</code> ä¹ƒè‡³ <code>xxxhdpi</code> å’Œ <code>tvdpi</code> ç­‰åˆ†è¾¨ç‡ï¼Œå¦‚æœæŠŠæ¯ä¸ªèµ„æºæ–‡ä»¶ï¼Œé’ˆå¯¹è¿™äº›åˆ†è¾¨ç‡éƒ½åˆ†åˆ«åˆ¶ä½œä¸€ä¸ªå‰¯æœ¬ï¼Œè¿™å°†å ç”¨å¤§é‡çš„ç©ºé—´ã€‚</p>\n<p><img src=\"/img/170210_app_s6ep5/resolutions.png\" alt=\"\"></p>\n<p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæœ‰å¤šä¸ªè§£å†³é€”å¾„ã€‚</p>\n<h3 id=\"åˆ é™¤ä¸€éƒ¨åˆ†åˆ†è¾¨ç‡ä¸‹çš„æ–‡ä»¶\"><a href=\"#åˆ é™¤ä¸€éƒ¨åˆ†åˆ†è¾¨ç‡ä¸‹çš„æ–‡ä»¶\" class=\"headerlink\" title=\"åˆ é™¤ä¸€éƒ¨åˆ†åˆ†è¾¨ç‡ä¸‹çš„æ–‡ä»¶\"></a>åˆ é™¤ä¸€éƒ¨åˆ†åˆ†è¾¨ç‡ä¸‹çš„æ–‡ä»¶</h3><p>æ¡†æ¶ä¼šæ ¹æ®é«˜åˆ†è¾¨ç‡çš„èµ„æºæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆä½åˆ†è¾¨ç‡ä¸‹çš„èµ„æºæ–‡ä»¶ã€‚è¿™é‡Œåˆ é™¤äº†ldpiï¼ˆå¯ä»¥ä»mdpiç”Ÿæˆï¼‰ã€hdpiå’Œxhdpiï¼ˆå¯ä»¥ä»xxhdpiç”Ÿæˆï¼‰ï¼Œå¦å¤–tvdpiåªåº”ç”¨äºTVappï¼Œè¿™é‡Œä¸€å¹¶åˆ é™¤ã€‚</p>\n<p>![][rescale.png]</p>\n<h3 id=\"ä½¿ç”¨çŸ¢é‡å›¾ä»£æ›¿åƒç´ å›¾\"><a href=\"#ä½¿ç”¨çŸ¢é‡å›¾ä»£æ›¿åƒç´ å›¾\" class=\"headerlink\" title=\"ä½¿ç”¨çŸ¢é‡å›¾ä»£æ›¿åƒç´ å›¾\"></a>ä½¿ç”¨çŸ¢é‡å›¾ä»£æ›¿åƒç´ å›¾</h3><p>çŸ¢é‡å›¾ä¼šæ ¹æ®è®¾å¤‡åˆ†è¾¨ç‡ä¸åŒï¼Œè‡ªåŠ¨è°ƒæ•´è‡ªèº«å¤§å°ï¼Œä¸€ä¸ªçŸ¢é‡å›¾å¯ä»¥åº”ç”¨åœ¨å¤šç§åˆ†è¾¨ç‡ä¸‹</p>\n<h3 id=\"å¤ç”¨å·²æœ‰çš„å›¾ç‰‡èµ„æºæ–‡ä»¶\"><a href=\"#å¤ç”¨å·²æœ‰çš„å›¾ç‰‡èµ„æºæ–‡ä»¶\" class=\"headerlink\" title=\"å¤ç”¨å·²æœ‰çš„å›¾ç‰‡èµ„æºæ–‡ä»¶\"></a>å¤ç”¨å·²æœ‰çš„å›¾ç‰‡èµ„æºæ–‡ä»¶</h3><p>å¯¹äºä¸‹å›¾è¿™ç§åªæ˜¯å˜æ›´äº†æ–¹å‘çš„åœºæ™¯ï¼Œåº”å½“åªä½¿ç”¨ä¸€å¼ å›¾ç‰‡ï¼Œé€šè¿‡ä»£ç æ¥æ§åˆ¶ç®­å¤´æœå‘ã€‚</p>\n<p><img src=\"/img/170210_app_s6ep5/reuse_pic.png\" alt=\"reuse_pic\"></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">rotate</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:drawable</span>=<span class=\"string\">\"@drawable/ic_arrow_expand\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:fromDegrees</span>=<span class=\"string\">\"0\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:toDegrees</span>=<span class=\"string\">\"270\"</span> /&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"Smaller-Code\"><a href=\"#Smaller-Code\" class=\"headerlink\" title=\"Smaller Code\"></a>Smaller Code</h1><h2 id=\"ä½¿ç”¨ProGuard\"><a href=\"#ä½¿ç”¨ProGuard\" class=\"headerlink\" title=\"ä½¿ç”¨ProGuard\"></a>ä½¿ç”¨ProGuard</h2><p>è®¾ç½®<code>minifyEnabled true</code>ï¼Œä»£ç è§å‰æ–‡ã€‚</p>\n<h2 id=\"ä¼˜åŒ–ä»£ç ç”Ÿæˆå™¨çš„ç”Ÿæˆä»£ç \"><a href=\"#ä¼˜åŒ–ä»£ç ç”Ÿæˆå™¨çš„ç”Ÿæˆä»£ç \" class=\"headerlink\" title=\"ä¼˜åŒ–ä»£ç ç”Ÿæˆå™¨çš„ç”Ÿæˆä»£ç \"></a>ä¼˜åŒ–ä»£ç ç”Ÿæˆå™¨çš„ç”Ÿæˆä»£ç </h2><p><strong>ä»£ç ç”Ÿæˆå™¨</strong>æ˜¯å°†åŸå§‹ä»£ç è½¬åŒ–ä¸ºç›®æ ‡ä»£ç çš„ä¸€ç§å·¥å…·ï¼Œåœ¨è½¬åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œæœ‰å¯èƒ½ç”Ÿæˆå†—ä½™çš„ç›®æ ‡ä»£ç ï¼Œè¿™éƒ¨åˆ†ä»£ç éœ€è¦ç²¾ç®€ã€‚</p>\n<h2 id=\"æ³¨æ„ä¾èµ–ï¼\"><a href=\"#æ³¨æ„ä¾èµ–ï¼\" class=\"headerlink\" title=\"æ³¨æ„ä¾èµ–ï¼\"></a>æ³¨æ„ä¾èµ–ï¼</h2><p>å½“æˆ‘ä»¬çš„ä»£ç éœ€è¦å¼•å…¥å¤–éƒ¨åº“çš„æ—¶å€™ï¼Œåºå¤§çš„å¤–éƒ¨ä¾èµ–ä¼šå¯¼è‡´APKä½“ç§¯å‰§å¢ã€‚<code>ProGuard</code>èƒ½å¤Ÿä¸ºæˆ‘ä»¬å¤„ç†ä¸€éƒ¨åˆ†è¿™ç§æƒ…å†µï¼Œæ›´å¤šæ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ç›®çš„åœ°æŒ‘é€‰é€‚åˆç§»åŠ¨ç«¯ä½¿ç”¨çš„å·¥å…·åº“ã€‚åœ¨å¼•å…¥å¤–éƒ¨ä¾èµ–çš„æ—¶å€™ï¼Œä¸€å®šè¦å…³æ³¨å®ƒå¯¹APKä½“ç§¯äº§ç”Ÿçš„å½±å“ã€‚</p>\n<h2 id=\"Segment-your-APK\"><a href=\"#Segment-your-APK\" class=\"headerlink\" title=\"Segment your APK\"></a>Segment your APK</h2><p>è§†é¢‘ä½œè€…å¯¹è¿™éƒ¨åˆ†çš„å†…å®¹è®²è¿°ä¸ç”šæ¸…æ™°ï¼Œæˆ‘ç†è§£ä¸‹æ¥ï¼Œæ‰€åšçš„äº‹æƒ…æ˜¯ï¼Œå¯ä»¥æ ¹æ®APIçº§åˆ«ã€åˆ†è¾¨ç‡é«˜ä½ç­‰æ¡ä»¶ï¼Œç”Ÿæˆä¸åŒçš„APKåŒ…ï¼Œåœ¨åº”ç”¨å¸‚åœºé‡Œå‘å¸ƒæ—¶è¿›è¡Œé…ç½®ã€‚è€Œåº”ç”¨å¸‚åœºä¼šæ ¹æ®ç”¨æˆ·æ‰‹æœºå‹å·ï¼Œä¸ºç”¨æˆ·æ¨é€ä¸åŒçš„APKè¿›è¡Œä¸ªæ€§åŒ–å®‰è£…ã€‚</p>\n<hr>\n<h1 id=\"Android-Studio-2-2\"><a href=\"#Android-Studio-2-2\" class=\"headerlink\" title=\"Android Studio 2.2\"></a>Android Studio 2.2</h1><p>æ–°ç‰ˆæœ¬çš„ASä¸­ï¼Œå¢åŠ äº†APKåˆ†æå·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯Ÿçœ‹classesã€methodsçš„æ•°ç›®ï¼Œèµ„æºæ–‡ä»¶å¤§å° ç­‰ä¿¡æ¯ã€‚</p>\n<p><img src=\"/img/170210_app_s6ep5/as22.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"ç¦æ­¢Android File Transferè‡ªå¯åŠ¨","url":"https://lilei.pro/2017/01/24/Stop-Android-File-Transfer-From-Auto-Starting/","content":"<blockquote>\n<p><a href=\"https://www.android.com/filetransfer/\" target=\"_blank\" rel=\"noopener\">Android File Transfer</a>æ˜¯macOSç³»ç»Ÿä¸‹ç”¨äºåœ¨æ‰‹æœº-ç”µè„‘é—´ä¼ è¾“æ–‡ä»¶çš„å·¥å…·ï¼Œç„¶è€Œï¼Œè¿™ä¸ªå·¥å…·é»˜è®¤æ˜¯æ¯ä¸€æ¬¡å°†æ‰‹æœºè¿æ¥è‡³ç”µè„‘ï¼Œéƒ½ä¼šè‡ªåŠ¨å¯åŠ¨ï¼Œéå¸¸æ¼äººã€‚æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•å°†è‡ªå¯åŠ¨å…³é—­çš„æ–¹æ³•ã€‚</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h1 id=\"Problem\"><a href=\"#Problem\" class=\"headerlink\" title=\"Problem\"></a>Problem</h1><p>Android File Transfer Auto Launches</p>\n<h1 id=\"Solution\"><a href=\"#Solution\" class=\"headerlink\" title=\"Solution\"></a>Solution</h1><ol>\n<li>Close Android File Transfer</li>\n<li>Open Activity Monitor and kill â€œAndroid File Transfer Agentâ€</li>\n<li>Go to where you installed â€œAndroid File Transfer.appâ€ (I have it under /Applications)</li>\n<li>Right click and â€“&gt; â€œShow package contentsâ€</li>\n<li>Go to Contents/Resources</li>\n<li>Rename â€œAndroid File Transfer Agentâ€ to e.g. â€œAndroid File Transfer Agent_DISABLEDâ€</li>\n<li>Then go to â€œ/Users/username/Library/Application Support/Google/Android File Transferâ€ and again rename the Agent app.. â€œAndroid File Transfer Agent_DISABLEDâ€.</li>\n</ol>\n<h1 id=\"Reference\"><a href=\"#Reference\" class=\"headerlink\" title=\"Reference\"></a>Reference</h1><p><a href=\"https://mtmurdockblog.com/2012/12/17/disable-auto-start-for-android-file-transfer-on-osx/\" target=\"_blank\" rel=\"noopener\">https://mtmurdockblog.com/2012/12/17/disable-auto-start-for-android-file-transfer-on-osx/</a></p>\n<hr>\n<h3 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"====End====\"></a><em>====End====</em></h3><hr>\n","categories":[],"tags":["å·¥å…·"]},{"title":"Android Performance Patterns s6ep4 Themed launch screens","url":"https://lilei.pro/2017/01/23/Android-Performance-Patterns-s6ep4-Themed-launch-screens/","content":"<blockquote>\n<p>This video identifies some pitfalls with bad ways to implement launch screens, and provides a solution that everyone can use.<br><a href=\"https://www.youtube.com/watch?v=E5Xu2iNHRkk&amp;feature=youtu.be\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/E5Xu2iNHRkk\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<h1 id=\"Bad-Ways\"><a href=\"#Bad-Ways\" class=\"headerlink\" title=\"Bad Ways\"></a>Bad Ways</h1><h2 id=\"Theme-the-launch-screen\"><a href=\"#Theme-the-launch-screen\" class=\"headerlink\" title=\"Theme the launch screen\"></a>Theme the launch screen</h2><p>å£°æ˜é¦–é¡µçš„Themeä¸Appå…¶å®ƒé¡µé¢çš„Themeç›¸åŒï¼Œè§†é¢‘ä½œè€…å¯¹äºè¿™éƒ¨åˆ†å†…å®¹è®²è¿°ä¸æ¸…ï¼Œç›®å‰å­˜ç–‘ã€‚</p>\n<h2 id=\"Turn-off-the-official-startup-window\"><a href=\"#Turn-off-the-official-startup-window\" class=\"headerlink\" title=\"Turn off the official startup window\"></a>Turn off the official startup window</h2><p>ä½¿ç”¨Window Disable Previewæ¥ç¦æ­¢æ˜¾ç¤ºPreviewç•Œé¢ï¼Œè¿™ä¼šå¯¼è‡´å¯åŠ¨Appåä¾ç„¶åœç•™åœ¨æ¡Œé¢ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­æ— æ³•å“åº”ç”¨æˆ·æ“ä½œã€‚æ–¹æ³•å¦‚ä¸‹ï¼š</p>\n<p>åœ¨<code>styles.xml</code>ä¸­å£°æ˜Theme</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Theme.NoPreviewWindow\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"Theme.AppCompat.NoActionBar\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:windowIsTranslucent\"</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">style</span> <span class=\"attr\">name</span>=<span class=\"string\">\"Theme.NoPreviewWindow\"</span> <span class=\"attr\">parent</span>=<span class=\"string\">\"Theme.AppCompat.NoActionBar\"</span>&gt;</span><span class=\"undefined\"></span></span><br><span class=\"line\"><span class=\"xml\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">name</span>=<span class=\"string\">\"android:windowDisablePreview\"</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span></span><br><span class=\"line\"><span class=\"undefined\"></span><span class=\"tag\">&lt;/<span class=\"name\">style</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>ç„¶ååœ¨<code>AndroidManifest.xml</code>ä¸­ä½¿ç”¨å·²ç»å®šä¹‰çš„Theme</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">activity</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:name</span>=<span class=\"string\">\".activities.SplashActivity\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:label</span>=<span class=\"string\">\"@string/app_name\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:theme</span>=<span class=\"string\">\"@style/Theme.NoPreviewWindow\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">android:screenOrientation</span>=<span class=\"string\">\"portrait\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    &gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">intent-filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.intent.action.MAIN\"</span>/&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">category</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.intent.category.LAUNCHER\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">intent-filter</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"The-better-way\"><a href=\"#The-better-way\" class=\"headerlink\" title=\"The better way\"></a>The better way</h1><h2 id=\"é€šè¿‡åˆ‡æ¢Themeçš„æ‰‹æ®µæ¥å®Œæˆ\"><a href=\"#é€šè¿‡åˆ‡æ¢Themeçš„æ‰‹æ®µæ¥å®Œæˆ\" class=\"headerlink\" title=\"é€šè¿‡åˆ‡æ¢Themeçš„æ‰‹æ®µæ¥å®Œæˆ\"></a>é€šè¿‡åˆ‡æ¢Themeçš„æ‰‹æ®µæ¥å®Œæˆ</h2><p>é¦–å…ˆå£°æ˜ä¸€ä¸ªä»¥å›¾ç‰‡ä¸ºèƒŒæ™¯çš„Themeï¼Œå¹¶ä¸”åœ¨é¦–é¡µActivityä¸­åº”ç”¨</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">layer-list</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span> <span class=\"attr\">android:opacity</span>=<span class=\"string\">\"opaque\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span> <span class=\"attr\">android:drawable</span>=<span class=\"string\">\"@android:color/white\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">bitmap</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:src</span>=<span class=\"string\">\"@drawable/product_log_144dp\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:gravity</span>=<span class=\"string\">\"center\"</span>/&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">item</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">layer-list</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">activity</span> <span class=\"attr\">...android:theme</span>=<span class=\"string\">\"@style/AppTheme.Launcher\"</span>/&gt;</span></span><br></pre></td></tr></table></figure>\n<p>å½“é¦–é¡µActivityæ­£å¼å¯åŠ¨æ—¶ï¼Œåˆ‡æ¢åˆ°æ­£å¼çš„theme</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundel savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">\tsetTheme(R.style.Theme_MyApp);</span><br><span class=\"line\">\t<span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">\t<span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h1><ul>\n<li><a href=\"http://www.tothenew.com/blog/disabling-the-preview-or-start-window-in-android\" target=\"_blank\" rel=\"noopener\">Disabling the Preview(Start) Window in Android</a></li>\n<li><a href=\"https://www.bignerdranch.com/blog/splash-screens-the-right-way/\" target=\"_blank\" rel=\"noopener\">Splash Screens the Right Way</a><h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4></li>\n</ul>\n<hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"å¦‚ä½•åœ¨æ§åˆ¶å°è¾“å‡ºæ–‡ä»¶ç³»ç»Ÿç»“æ„","url":"https://lilei.pro/2017/01/22/Print-File-System-Tree-In-Terminal/","content":"<blockquote>\n<p>å®‰è£…å¹¶ä½¿ç”¨treeå·¥å…·</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h1 id=\"ç›®å½•ç»“æ„\"><a href=\"#ç›®å½•ç»“æ„\" class=\"headerlink\" title=\"ç›®å½•ç»“æ„\"></a>ç›®å½•ç»“æ„</h1><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">main/java/com/example/android/architecture/blueprints/todoapp</span><br><span class=\"line\">â”œâ”€â”€ BasePresenter.java</span><br><span class=\"line\">â”œâ”€â”€ BaseView.java</span><br><span class=\"line\">â”œâ”€â”€ addedittask</span><br><span class=\"line\">â”‚   â”œâ”€â”€ AddEditTaskActivity.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ AddEditTaskContract.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ AddEditTaskFragment.java</span><br><span class=\"line\">â”‚   â””â”€â”€ AddEditTaskPresenter.java</span><br><span class=\"line\">â”œâ”€â”€ data</span><br><span class=\"line\">â”‚   â”œâ”€â”€ Task.java</span><br><span class=\"line\">â”‚   â””â”€â”€ source</span><br><span class=\"line\">â”‚       â”œâ”€â”€ TasksDataSource.java</span><br><span class=\"line\">â”‚       â”œâ”€â”€ TasksRepository.java</span><br><span class=\"line\">â”‚       â”œâ”€â”€ local</span><br><span class=\"line\">â”‚       â”‚   â”œâ”€â”€ TasksDbHelper.java</span><br><span class=\"line\">â”‚       â”‚   â”œâ”€â”€ TasksLocalDataSource.java</span><br><span class=\"line\">â”‚       â”‚   â””â”€â”€ TasksPersistenceContract.java</span><br><span class=\"line\">â”‚       â””â”€â”€ remote</span><br><span class=\"line\">â”‚           â””â”€â”€ TasksRemoteDataSource.java</span><br><span class=\"line\">â”œâ”€â”€ statistics</span><br><span class=\"line\">â”‚   â”œâ”€â”€ StatisticsActivity.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ StatisticsContract.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ StatisticsFragment.java</span><br><span class=\"line\">â”‚   â””â”€â”€ StatisticsPresenter.java</span><br><span class=\"line\">â”œâ”€â”€ taskdetail</span><br><span class=\"line\">â”‚   â”œâ”€â”€ TaskDetailActivity.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ TaskDetailContract.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ TaskDetailFragment.java</span><br><span class=\"line\">â”‚   â””â”€â”€ TaskDetailPresenter.java</span><br><span class=\"line\">â”œâ”€â”€ tasks</span><br><span class=\"line\">â”‚   â”œâ”€â”€ ScrollChildSwipeRefreshLayout.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ TasksActivity.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ TasksContract.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ TasksFilterType.java</span><br><span class=\"line\">â”‚   â”œâ”€â”€ TasksFragment.java</span><br><span class=\"line\">â”‚   â””â”€â”€ TasksPresenter.java</span><br><span class=\"line\">â””â”€â”€ util</span><br><span class=\"line\">    â”œâ”€â”€ ActivityUtils.java</span><br><span class=\"line\">    â”œâ”€â”€ EspressoIdlingResource.java</span><br><span class=\"line\">    â””â”€â”€ SimpleCountingIdlingResource.java</span><br></pre></td></tr></table></figure>\n<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å†™æ–‡ç« ï¼Œéœ€è¦è´´å‡ºé¡¹ç›®çš„ç›®å½•ç»“æ„ã€‚æˆ‘ä¹‹å‰é‡‡ç”¨çš„æ–¹æ³•æ¯”è¾ƒç¬¨ï¼Œæ˜¯åœ¨IDEä¸­æˆªå›¾ã€‚ç›¸ä¿¡å¾ˆå¤šäººåœ¨çœ‹èµ„æ–™æ—¶ï¼Œé‡åˆ°è¿‡ä¸Šé¢è¿™æ ·ï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºçš„æ–‡ä»¶ç›®å½•ç»“æ„ã€‚ç›´è§‚è€Œä¸”èµå¿ƒæ‚¦ç›®ï¼Œé‚£ä¹ˆè¿™æ˜¯ç”¨ä»€ä¹ˆå·¥å…·ç”Ÿæˆçš„å‘¢ï¼Ÿ</p>\n<p>ç­”æ¡ˆæ˜¯ï¼š<strong>Tree</strong></p>\n<hr>\n<h1 id=\"Treeçš„å®‰è£…ä¸ä½¿ç”¨\"><a href=\"#Treeçš„å®‰è£…ä¸ä½¿ç”¨\" class=\"headerlink\" title=\"Treeçš„å®‰è£…ä¸ä½¿ç”¨\"></a>Treeçš„å®‰è£…ä¸ä½¿ç”¨</h1><p>å¦‚æœä½ ç”¨çš„æ˜¯<strong>Ubuntu</strong>æˆ–å…¶ä»–çš„*nuxç³»ç»Ÿï¼Œç›´æ¥è¿è¡Œ<code>sudo apt-get install tree</code>å®‰è£…å³å¯ï¼Œä½†æ˜¯åœ¨<strong>macOS</strong>ä¸­ï¼Œå¹¶æ²¡æœ‰<code>apt-get</code>å·¥å…·ï¼Œéœ€è¦å…ˆå®‰è£…<a href=\"http://brew.sh/\" target=\"_blank\" rel=\"noopener\">Homebrew</a>ï¼Œç„¶åé€šè¿‡<code>brew</code>å®‰è£…<code>tree</code>ã€‚</p>\n<p>æ³¨æ„åœ¨å®‰è£…çš„è¿‡ç¨‹ä¸­éœ€è¦è¾“å…¥ç®¡ç†å‘˜å¯†ç ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$/usr/bin/ruby -e <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>\"</span></span><br><span class=\"line\"><span class=\"variable\">$brew</span> install tree</span><br></pre></td></tr></table></figure>\n<p>å¾…å®‰è£…å®Œæˆåï¼ˆå¤§æ¦‚éœ€è¦10ï½20åˆ†é’Ÿï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>tree ${folder_name}</code>åœ¨æ§åˆ¶å°ä¸­æ‰“å°å‡ºç›®å½•ç»“æ„äº†ã€‚</p>\n<hr>\n<h4 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"===End===\"></a><em>===End===</em></h4><hr>\n","categories":[],"tags":["å·¥å…·"]},{"title":"Android Performance Patterns s6ep3 App Launch time & Bloated Application objects","url":"https://lilei.pro/2017/01/22/Android-Performance-Patterns-s6ep3-App-Launch-Time/","content":"<blockquote>\n<p>This videos are really interesting but it seems to me that the last 3 episodes have been basically the same.ï»¿ â€”â€”â€”â€”æ‘˜è‡ªyoutubeè¯„è®º<br><a href=\"https://www.youtube.com/watch?v=Y-u511RsC3o&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=76\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/Y-u511RsC3o\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<h1 id=\"Slow-start-up-apps-cause-unhappy-users\"><a href=\"#Slow-start-up-apps-cause-unhappy-users\" class=\"headerlink\" title=\"Slow start-up apps cause unhappy users.\"></a>Slow start-up apps cause unhappy users.</h1><p>æ˜¯çš„ï¼Œæˆ‘åŒæ„ï¼</p>\n<p>ä½†æ˜¯ä½ èƒ½ä¸èƒ½å¤šè®²ä¸€äº›å¹²è´§ï¼Ÿ</p>\n<p><img src=\"/img/170117_app_s6ep3/wasted_work.png\" alt=\"\"></p>\n<hr>\n<h1 id=\"Android-has-tools-to-help\"><a href=\"#Android-has-tools-to-help\" class=\"headerlink\" title=\"Android has tools to help.\"></a>Android has tools to help.</h1><h2 id=\"Method-Trace\"><a href=\"#Method-Trace\" class=\"headerlink\" title=\"Method Trace\"></a>Method Trace</h2><p>å‰é¢ä¸¤èŠ‚å·²ç»è®²è¿‡è¿™ä¸ªï¼Œå›¾ç‰‡æˆ‘å°±ä¸è´´äº†ã€‚</p>\n<hr>\n<h1 id=\"Solution-lazy-loading\"><a href=\"#Solution-lazy-loading\" class=\"headerlink\" title=\"Solution: lazy loading\"></a>Solution: lazy loading</h1><p><img src=\"/img/170117_app_s6ep3/lazy_loading.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"====Ending====\"></a><em>====Ending====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"Android Performance Patterns s5ep3 App Launch time & Activity creation","url":"https://lilei.pro/2017/01/17/Android-Performance-Patterns-s6ep2-App-Launch-Time-And-Activity-Creation/","content":"<blockquote>\n<p>ep1ä»‹ç»äº†Applicationå¯åŠ¨è¿‡æ…¢çš„åŸå› ï¼Œæœ¬èŠ‚åˆ†æActivityå¯åŠ¨è¿‡æ…¢çš„åŸå› ï¼Œå¯åŠ¨é€Ÿåº¦æ ‡å‡†ä»¥åŠå·¥å…·ã€‚<br><a href=\"https://www.youtube.com/watch?v=AkafJ6NdrhY&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=75\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/AkafJ6NdrhY\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<p><img src=\"/img/170117_app_s6ep2/title.png\" alt=\"\"></p>\n<hr>\n<h1 id=\"å¯åŠ¨MainActivityè¿‡æ…¢\"><a href=\"#å¯åŠ¨MainActivityè¿‡æ…¢\" class=\"headerlink\" title=\"å¯åŠ¨MainActivityè¿‡æ…¢\"></a>å¯åŠ¨MainActivityè¿‡æ…¢</h1><p>åŸå› å¯èƒ½æœ‰å¤šä¸ªï¼Œå¦‚ä¸‹å›¾ã€‚</p>\n<p><img src=\"/img/170117_app_s6ep2/slow_main_activity.png\" alt=\"\"></p>\n<ul>\n<li>åŠ è½½å¸ƒå±€</li>\n<li>åŠ è½½ Bitmapï¼ˆå¼•èµ·GCï¼‰</li>\n<li>ç½‘ç»œè¯·æ±‚</li>\n<li>è¯»å†™ User Preference</li>\n</ul>\n<hr>\n<h1 id=\"åˆ†æé—®é¢˜\"><a href=\"#åˆ†æé—®é¢˜\" class=\"headerlink\" title=\"åˆ†æé—®é¢˜\"></a>åˆ†æé—®é¢˜</h1><h2 id=\"Method-tracing-tool\"><a href=\"#Method-tracing-tool\" class=\"headerlink\" title=\"Method tracing tool\"></a>Method tracing tool</h2><p><a href=\"https://developer.android.com/studio/profile/am-methodtrace.html\" target=\"_blank\" rel=\"noopener\">Method Tracer</a> å·¥å…·è¢«ç”¨æ¥æŸ¥çœ‹æ¯ä¸ªæ–¹æ³•çš„æ‰§è¡Œæ—¶é—´ã€‚</p>\n<p>å¦‚æœ<code>onCreate</code>çš„æ‰§è¡Œè¶…è¿‡äº†<strong>16msï½30ms</strong>ï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>\n<h2 id=\"Inserting-Trace-Commands\"><a href=\"#Inserting-Trace-Commands\" class=\"headerlink\" title=\"Inserting Trace Commands\"></a>Inserting Trace Commands</h2><p>ä½¿ç”¨<code>trace</code>æ¥è®°å½•å¼€å§‹ï¼æˆªæ­¢æ—¶é—´ï¼Œæ‰€è®°å½•çš„æ—¶é—´ä¼šæ˜¾ç¤ºåœ¨<a href=\"https://developer.android.com/studio/profile/systrace-commandline.html\" target=\"_blank\" rel=\"noopener\">Systrace</a>ä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">trace.beginSection();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// code to be valued</span></span><br><span class=\"line\"></span><br><span class=\"line\">trace.endSection();</span><br></pre></td></tr></table></figure>\n<hr>\n<h1 id=\"é€ æˆActivityå¯åŠ¨è¿‡æ…¢çš„åŸå› \"><a href=\"#é€ æˆActivityå¯åŠ¨è¿‡æ…¢çš„åŸå› \" class=\"headerlink\" title=\"é€ æˆActivityå¯åŠ¨è¿‡æ…¢çš„åŸå› \"></a>é€ æˆActivityå¯åŠ¨è¿‡æ…¢çš„åŸå› </h1><h2 id=\"Complex-Layouts\"><a href=\"#Complex-Layouts\" class=\"headerlink\" title=\"Complex Layouts\"></a>Complex Layouts</h2><p>é¦–å½“å…¶å†²çš„æ˜¯å¤æ‚å¸ƒå±€å¯¼è‡´åŠ è½½è¿‡æ…¢ï¼Œå¸ƒå±€è¶Šå¤æ‚ï¼Œè¶Šå¤šçš„èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€ä¸»é¢˜ï¼‰éœ€è¦åŠ è½½ã€‚</p>\n<p><img src=\"/img/170117_app_s6ep2/complex_layout.png\" alt=\"\"></p>\n<p>è§£å†³æ–¹æ³•æœ‰é™ä½å¤æ‚åº¦ã€ä½¿ç»“æ„æ‰å¹³åŒ–ã€å¯¹äºä¸å¯è§çš„å…ƒç´ æš‚æ—¶ä¸åŠ è½½ã€‚</p>\n<h2 id=\"æ‡’åŠ è½½-amp-å¼‚æ­¥å¤„ç†\"><a href=\"#æ‡’åŠ è½½-amp-å¼‚æ­¥å¤„ç†\" class=\"headerlink\" title=\"æ‡’åŠ è½½&amp;å¼‚æ­¥å¤„ç†\"></a>æ‡’åŠ è½½&amp;å¼‚æ­¥å¤„ç†</h2><p><img src=\"/img/170117_app_s6ep2/slow_sync.png\" alt=\"\"></p>\n<p>å½“åˆå§‹åŒ–è¿‡ç¨‹ä¸­æ¶‰åŠå¤šä¸ªè€—æ—¶æ“ä½œï¼Œæœ€ç³Ÿç³•çš„æƒ…å†µæ˜¯æŠŠå®ƒä»¬ä¸²è¡Œèµ·æ¥è¿›è¡Œï¼Œè¿™ä¼šå¯¼è‡´æ¯ä¸€é¡¹æ“ä½œçš„å»¶è¿Ÿè¢«å åŠ èµ·æ¥ï¼Œè®©ç”¨æˆ·æŠ“ç‹‚ã€‚</p>\n<p>è¿™æ—¶åº”å½“åˆ¤æ–­å“ªäº›æ“ä½œæ˜¯ä¸€å®šè¦ä¸²è¡Œè¿›è¡Œï¼Œå“ªäº›æ˜¯å¯ä»¥å¼‚æ­¥åŠ è½½çš„ï¼Œä»è€Œè¿›è¡Œä¼˜åŒ–ã€‚</p>\n<p><img src=\"/img/170117_app_s6ep2/async.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"====End====\"></a><em>====End====</em></h4><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"ä½¿ç”¨Charlesç›‘æ§Genymotionæ¨¡æ‹Ÿå™¨å‘é€çš„è¯·æ±‚","url":"https://lilei.pro/2017/01/16/Using-Charles-Proxy-with-Genymotion/","content":"<blockquote>\n<p>Charlesåœ¨æ¨¡æ‹Ÿå™¨ä¸­çš„é…ç½®ï¼Œä¸åœ¨çœŸæœºä¸Šçš„é…ç½®æœ‰æ‰€ä¸åŒã€‚</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h1 id=\"èƒŒæ™¯\"><a href=\"#èƒŒæ™¯\" class=\"headerlink\" title=\"èƒŒæ™¯\"></a>èƒŒæ™¯</h1><p>Charlesæ˜¯å¾ˆå¥½ç”¨çš„ä»£ç†å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥æŸ¥çœ‹ç½‘ç»œè¯·æ±‚çš„Requestå’ŒResponseï¼ŒGenymotionåˆ™å·ç§°é€Ÿåº¦æœ€å¿«çš„Androidæ¨¡æ‹Ÿå™¨ã€‚ç„¶è€Œï¼Œåœ¨æŠŠè¿™ä¸¤è€…ç»“åˆä½¿ç”¨æ—¶ï¼Œä¼šå‘ç°å¹¶æ²¡æœ‰ç”¨çœŸæœºåšä»£ç†é‚£ä¹ˆæ–¹ä¾¿ã€‚åŸå› åœ¨äºæ¨¡æ‹Ÿå™¨æ‰€æ¥å…¥çš„ç½‘ç»œæ˜¯<strong>VirtualBox</strong>æ‰€å»ºç«‹çš„æ¨¡æ‹Ÿç½‘ç»œï¼Œè·Ÿç¬”è®°æœ¬ç”µè„‘æ‰€çœ‹åˆ°çš„å±€åŸŸç½‘IPä¸åœ¨åŒä¸€ä¸ªç½‘ç»œç¯å¢ƒã€‚</p>\n<h1 id=\"è§£å†³æ–¹æ¡ˆ\"><a href=\"#è§£å†³æ–¹æ¡ˆ\" class=\"headerlink\" title=\"è§£å†³æ–¹æ¡ˆ\"></a>è§£å†³æ–¹æ¡ˆ</h1><p>åœ¨æ¨¡æ‹Ÿå™¨çš„WLANé…ç½®ä¸­ï¼Œå°†ä»£ç†hostæ”¹ä¸º<code>10.0.3.2</code>ï¼Œç«¯å£æ”¹ä¸ºCharlesé…ç½®çš„ç«¯å£ï¼ˆé»˜è®¤çš„æ˜¯<code>8888</code>ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯<code>8642</code>ï¼‰ã€‚</p>\n<p>Doneï¼</p>\n<hr>\n<h1 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h1><p><a href=\"http://rexstjohn.com/using-genymotion-charles-proxy/\" target=\"_blank\" rel=\"noopener\">Using Genymotion With Charles Proxy</a></p>\n<hr>\n<h4 id=\"End\"><a href=\"#End\" class=\"headerlink\" title=\"====End====\"></a><em>====End====</em></h4><hr>\n","categories":[],"tags":["å·¥å…·"]},{"title":"Androidåº”ç”¨ç­¾åå®è·µ","url":"https://lilei.pro/2017/01/16/Android-Sign/","content":"<h1 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h1><ul>\n<li><a href=\"http://www.jianshu.com/p/e9a685c88258\" target=\"_blank\" rel=\"noopener\">Androidç»™apkç­¾åé‚£ç‚¹äº‹</a></li>\n</ul>\n","categories":[],"tags":["Android"]},{"title":"Android-Performance-Patterns-s6ep1-Launch-Time-Performance","url":"https://lilei.pro/2017/01/16/Android-Performance-Patterns-s6ep1-Launch-Time-Performance/","content":"<blockquote>\n<p>Season 6 ep 1ï¼Œç¬¬å…­å­£é›†ä¸­è®¨è®ºAppå¯åŠ¨é€Ÿåº¦çš„è¯é¢˜ã€‚</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.youtube.com/watch?v=Vw1G1s73DsY&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=74\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/Vw1G1s73DsY\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<p><img src=\"/img/170116_app_s6ep1/title.png\" alt=\"\"></p>\n<h1 id=\"ç†è§£å¯åŠ¨æ—¶é—´ï¼ˆLaunching-Timeï¼‰\"><a href=\"#ç†è§£å¯åŠ¨æ—¶é—´ï¼ˆLaunching-Timeï¼‰\" class=\"headerlink\" title=\"ç†è§£å¯åŠ¨æ—¶é—´ï¼ˆLaunching Timeï¼‰\"></a>ç†è§£å¯åŠ¨æ—¶é—´ï¼ˆLaunching Timeï¼‰</h1><p>å½“ç”¨æˆ·å¯åŠ¨åº”ç”¨æ—¶ï¼ŒAndroidç³»ç»Ÿä¼šå±•ç¤ºä¸€ä¸ªç©ºç™½ï¼ˆdummyï¼‰å¯åŠ¨é¡µï¼Œåé¢ä¼šè®²åˆ°ï¼Œå¯ä»¥é€šè¿‡åœ¨<code>AndroidManifest.xml</code>ä¸­ä¸ºè¿™ä¸ªå¯åŠ¨é¡µé…ç½®èƒŒæ™¯å›¾ç‰‡ã€‚</p>\n<p>ç©ºç™½é¡µæŒç»­åˆ°Appç»˜åˆ¶å‡ºé¦–å±å›¾åƒä¸ºæ­¢ã€‚</p>\n<p><img src=\"/img/170116_app_s6ep1/dummy.png\" alt=\"\"></p>\n<p>ä¸‹é¢çš„æµç¨‹å›¾ä»è¿›ç¨‹è§’åº¦è¿›è¡Œè¯´æ˜ï¼Œç³»ç»Ÿè¿›ç¨‹<code>System Process</code>ä¼šä¸ºAppå¯åŠ¨ä¸€ä¸ª<code>Application Process</code>ï¼Œåœ¨è¿™è¿›ç¨‹é‡Œå…ˆæ‰§è¡Œ<code>Application.onCreate</code>ï¼ˆåœ¨musical.lyçš„face to faceä¸­æåˆ°äº†è¿™ä¸ªï¼‰ï¼Œéšåï¼Œåº”ç”¨ä¸»çº¿ç¨‹<code>MainThread</code>å¤„ç†Activityåˆå§‹åŒ–äº‹åŠ¡ï¼Œç›´è‡³ç»˜åˆ¶å‡ºç¬¬ä¸€ä¸ªç•Œé¢ï¼Œç³»ç»Ÿæ‰å°†å±å¹•äº¤ç»™åº”ç”¨æ¥å±•ç¤ºã€‚</p>\n<p><img src=\"/img/170116_app_s6ep1/process.png\" alt=\"\"></p>\n<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<code>inflate views</code>æ˜¯è€—æ—¶æœ€å¤šçš„ï¼Œå› æ­¤åœ¨å¼€å‘è‡ªå·±çš„åº”ç”¨æ—¶ï¼Œåº”å½“æœ‰æ„åœ°ç²¾ç®€é¦–å±å¸ƒå±€ï¼Œå‡å°‘åŠ è½½æ—¶é—´ã€‚å¦‚æœæœ‰è€—æ—¶æ“ä½œï¼Œåˆ™ä½¿ç”¨æ‡’åŠ è½½ã€‚</p>\n<p>è‹¥ä½ ä½¿ç”¨æ‡’åŠ è½½ï¼Œå½“æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆåï¼Œå¯ä»¥é€šè¿‡<code>reportFullyDrawn()</code>æ–¹æ³•æ¥å‘Šè¯‰ç³»ç»Ÿè¿™ä¸€äº‹ä»¶ã€‚ç³»ç»Ÿåœ¨ç»Ÿè®¡åˆå§‹åŠ è½½æ—¶é—´çš„æ—¶å€™ï¼Œä¼šä»¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„æ—¶æœºä½œä¸ºç»“æŸã€‚</p>\n<hr>\n<h1 id=\"å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å¯åŠ¨æ—¶é—´çš„å·¥å…·\"><a href=\"#å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å¯åŠ¨æ—¶é—´çš„å·¥å…·\" class=\"headerlink\" title=\"å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å¯åŠ¨æ—¶é—´çš„å·¥å…·\"></a>å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å¯åŠ¨æ—¶é—´çš„å·¥å…·</h1><p>Android Studioä¸ºæˆ‘ä»¬æä¾›äº†ç›‘æ§å¯åŠ¨æ—¶é—´çš„å·¥å…·ï¼Œå€ŸåŠ©è¿™äº›å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾å‡ºå¯åŠ¨è¿‡ç¨‹ä¸­æœ€è€—æ—¶çš„æ­¥éª¤æ˜¯å“ªä¸ªï¼Œé€šè¿‡æ‡’åŠ è½½ç­‰æ‰‹æ®µï¼Œå°†å¯åŠ¨æ—¶é—´æ§åˆ¶åœ¨åˆç†çš„èŒƒå›´å†…ã€‚</p>\n<p>é¦–å…ˆä¾¿æ˜¯Appå¯åŠ¨æ—¶å€™è‡ªåŠ¨æ‰“å‡ºçš„log</p>\n<p><img src=\"/img/170116_app_s6ep1/load_time.png\" alt=\"\"></p>\n<p>ç²¾ç¡®åˆ°æ–¹æ³•ï¼Œåœ¨<strong>Monitor</strong>é¢æ¿ä¸­æœ‰<strong>MethodTracing</strong>å·¥å…·</p>\n<p><img src=\"/img/170116_app_s6ep1/method_tracing.png\" alt=\"\"></p>\n<p>æ›´å¤šå…³äºå¯åŠ¨æ—¶é—´çš„çŸ¥è¯†ï¼Œå°†åœ¨åç»­ç« èŠ‚ä¸­ä»‹ç»ã€‚</p>\n<hr>\n<h1 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h1><ul>\n<li><a href=\"https://developer.android.com/topic/performance/launch-time.html\" target=\"_blank\" rel=\"noopener\">Launch-Time Performance</a></li>\n</ul>\n<hr>\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"====END====\"></a><em>====END====</em></h3><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"Linux Shell ${} ç”¨æ³•","url":"https://lilei.pro/2017/01/13/Linux-Shell-Usage/","content":"<blockquote>\n<p>åœ¨Linux Shellä¸­ï¼Œ<code>${}</code>å¯ä»¥è¢«ç”¨æ¥å¤„ç†æ–‡ä»¶è·¯å¾„å­—ç¬¦ä¸²ã€‚</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h1 id=\"è¯­æ³•\"><a href=\"#è¯­æ³•\" class=\"headerlink\" title=\"è¯­æ³•\"></a>è¯­æ³•</h1><p><code>${[input][rule]}</code>ï¼Œå…¶ä¸­<code>input</code>æ˜¯éœ€è¦å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œ<code>rule</code>æ˜¯å¤„ç†è§„åˆ™ï¼Œè¯¦ç»†è§„åˆ™å¦‚ä¸‹ã€‚</p>\n<p><code>#</code>å»æ‰å·¦è¾¹å­—ç¬¦ã€‚</p>\n<p><code>$</code>å»æ‰å³è¾¹å­—ç¬¦ã€‚</p>\n<p>ä¸Šé¢ä¸¤ç‚¹å¾ˆå¥½è®°å¿†ï¼Œé”®ç›˜ä¸Š<code>#</code>åœ¨å·¦ï¼Œ<code>$</code>åœ¨å³ã€‚</p>\n<p>å•ä¸ªç¬¦å·æœ€å°åŒ¹é…ï¼Œä¸¤ä¸ªç¬¦å·æœ€å¤§åŒ¹é…ã€‚</p>\n<h1 id=\"ä¸¾ä¾‹\"><a href=\"#ä¸¾ä¾‹\" class=\"headerlink\" title=\"ä¸¾ä¾‹\"></a>ä¸¾ä¾‹</h1><p>å®šä¹‰<code>file</code>=<code>/dir1/dir2/dir3/my.file.txt</code></p>\n<h2 id=\"åˆ é™¤\"><a href=\"#åˆ é™¤\" class=\"headerlink\" title=\"åˆ é™¤\"></a>åˆ é™¤</h2><ul>\n<li><code>${file#*/}</code>ï¼šæ‹¿æ‰ç¬¬ä¸€æ¡ / åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼šdir1/dir2/dir3/my.file.txt</li>\n<li><code>${file##*/}</code>ï¼šæ‹¿æ‰æœ€åä¸€æ¡ / åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼šmy.file.txt</li>\n<li><code>${file#*.}</code>ï¼šæ‹¿æ‰ç¬¬ä¸€ä¸ª . åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼šfile.txt</li>\n<li><code>${file##*.}</code>ï¼šæ‹¿æ‰æœ€åä¸€ä¸ª . åŠå…¶å·¦è¾¹çš„å­—ç¬¦ä¸²ï¼štxt</li>\n<li><code>${file%/*}</code>ï¼šæ‹¿æ‰æœ€åæ¡ / åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š/dir1/dir2/dir3</li>\n<li><code>${file%%/*}</code>ï¼šæ‹¿æ‰ç¬¬ä¸€æ¡ / åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š(ç©ºå€¼)</li>\n<li><code>${file%.*}</code>ï¼šæ‹¿æ‰æœ€åä¸€ä¸ª . åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š/dir1/dir2/dir3/my.file</li>\n<li><code>${file%%.*}</code>ï¼šæ‹¿æ‰ç¬¬ä¸€ä¸ª . åŠå…¶å³è¾¹çš„å­—ç¬¦ä¸²ï¼š/dir1/dir2/dir3/my</li>\n</ul>\n<h2 id=\"æå–\"><a href=\"#æå–\" class=\"headerlink\" title=\"æå–\"></a>æå–</h2><ul>\n<li><code>${file:0:5}</code>ï¼šæå–æœ€å·¦è¾¹çš„ 5 ä¸ªå­—èŠ‚ï¼š/dir1</li>\n<li><code>${file:5:5}</code>ï¼šæå–ç¬¬ 5 ä¸ªå­—èŠ‚å³è¾¹çš„è¿ç»­ 5 ä¸ªå­—èŠ‚ï¼š/dir2</li>\n</ul>\n<h2 id=\"æ›¿æ¢\"><a href=\"#æ›¿æ¢\" class=\"headerlink\" title=\"æ›¿æ¢\"></a>æ›¿æ¢</h2><ul>\n<li><code>${file/dir/path}</code>ï¼šå°†ç¬¬ä¸€ä¸ª dir ææ¢ä¸º pathï¼š/path1/dir2/dir3/my.file.txt</li>\n<li><code>${file//dir/path}</code>ï¼šå°†å…¨éƒ¨ dir ææ¢ä¸º pathï¼š/path1/path2/path3/my</li>\n</ul>\n<h4 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"====END====\"></a><em>====END====</em></h4>","categories":[],"tags":["Linux","Shell"]},{"title":"Those Questions","url":"https://lilei.pro/2017/01/11/Those-Questions/","content":"<blockquote>\n<p>åœ¨è®¡ç®—æœºç§‘å­¦çš„æ²™æ»©ä¸Šï¼Œæˆ‘å§‹ç»ˆæ˜¯ä¸€ä¸ªè¹¦è¹¦è·³è·³æ¡æ‹¾è´å£³çš„å­©å­ï¼Œè€Œé‚£çœŸç†çš„å¤§æµ·å°±åœ¨èº«è¾¹ï¼Œæˆ‘å´æœªèƒ½å‘ç°å®ƒã€‚</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h1 id=\"Project-Module\"><a href=\"#Project-Module\" class=\"headerlink\" title=\"Project? Module?\"></a>Project? Module?</h1><h1 id=\"AppCompatActivity\"><a href=\"#AppCompatActivity\" class=\"headerlink\" title=\"AppCompatActivity?\"></a>AppCompatActivity?</h1><h1 id=\"AndroidManifest-xmlä¸­çš„tools-context\"><a href=\"#AndroidManifest-xmlä¸­çš„tools-context\" class=\"headerlink\" title=\"AndroidManifest.xmlä¸­çš„tools:context\"></a>AndroidManifest.xmlä¸­çš„tools:context</h1>","categories":[],"tags":["Android"]},{"title":"å°é²œå¼€å‘å¾®ä¿¡å°ç¨‹åºæœ‰æ„Ÿ","url":"https://lilei.pro/2017/01/09/WeChat-App-Dev/","content":"<blockquote>\n<p>é¦–æ¬¡å¼€å‘å°ç¨‹åºï¼Œå®Œæˆäº†ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼ˆåŠæˆå“ï¼‰ï¼Œæœ‰æ‰€æ€ï¼Œæœ‰æ‰€æ„Ÿ</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h1 id=\"å§‹æœ«\"><a href=\"#å§‹æœ«\" class=\"headerlink\" title=\"å§‹æœ«\"></a>å§‹æœ«</h1><p>2017å¹´1æœˆ9æ—¥ï¼Œå¾®ä¿¡å°ç¨‹åºä¸Šçº¿ï¼Œæœ‹å‹åœˆé‡Œé“ºå¤©ç›–åœ°çš„å„ç§æˆªå›¾ï¼Œè¶³è§å…¶ç«çˆ†ã€‚è¯¸å¤šç§»åŠ¨åº”ç”¨å¤§å‚çº·çº·ä¸Šçº¿å„è‡ªçš„å°ç¨‹åºç‰ˆæœ¬ï¼Œç¬”è€…æ‰€åœ¨çš„Då…¬å¸ä¹Ÿæ‚„æ‚„å‘å¸ƒäº†å°ç¨‹åºï¼Œçœ‹æ¥æ˜¯åœ¨ä¿å¯†æƒ…å†µä¸‹å¼€å‘çš„ï¼Œåœ¨ä¹‹å‰ä¸€æ®µæ—¶é—´é‡Œè‡ªå·±ç«Ÿä»æœªå¬é—»ã€‚</p>\n<p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚ä»Šå¤©ç¬”è€…å°±å°è¯•å¼€å‘äº†ä¸€ä¸ªå°ç¨‹åºï¼ŒåŠŸèƒ½éå¸¸ç®€å•ï¼Œè§ä¸‹æ–‡ã€‚</p>\n<h1 id=\"ç¨‹åºé¡µé¢ä¸åŠŸèƒ½\"><a href=\"#ç¨‹åºé¡µé¢ä¸åŠŸèƒ½\" class=\"headerlink\" title=\"ç¨‹åºé¡µé¢ä¸åŠŸèƒ½\"></a>ç¨‹åºé¡µé¢ä¸åŠŸèƒ½</h1><p>æ•´ä¸ªå°ç¨‹åºåŒ…å«ä¸¤ä¸ªé¡µé¢ï¼Œç™»é™†é¡µä¸åŠŸèƒ½é¡µã€‚ç™»é™†é¡µæ˜¾ç¤ºä¸€å¼ æ¬¢è¿å›¾ç‰‡å’Œä¸€ä¸ªè¾“å…¥æ¡†ï¼Œå½“ç”¨æˆ·è¾“å…¥æ­£ç¡®çš„æ–‡å­—åï¼Œè·³è½¬è‡³åŠŸèƒ½é¡µã€‚åŠŸèƒ½é¡µæä¾›ä¸€ä¸ªç®€å•çš„ASCIIå­—ç¬¦è½¬æ¢åŠŸèƒ½ã€‚</p>\n<h1 id=\"å®æ“\"><a href=\"#å®æ“\" class=\"headerlink\" title=\"å®æ“\"></a>å®æ“</h1><p>ä¾ç…§å®˜æ–¹Demoï¼Œæ–°å»ºä¸¤ä¸ªé¡µé¢ç›®å½•ï¼Œå¸ƒå±€å†™å…¥<code>wxml</code>ï¼Œé€»è¾‘å†™å…¥<code>js</code>ã€‚</p>\n<p>ä»£ç è¿‡äºç®€å•ï¼Œè€Œä¸”æ¶‰åŠä¸ªäººéšç§ï¼Œç•¥å»ä¸æã€‚ç€é‡è°ˆæ€è€ƒä¸æ„Ÿæƒ³ã€‚</p>\n<h1 id=\"æ€è€ƒä¸æ„Ÿæƒ³\"><a href=\"#æ€è€ƒä¸æ„Ÿæƒ³\" class=\"headerlink\" title=\"æ€è€ƒä¸æ„Ÿæƒ³\"></a>æ€è€ƒä¸æ„Ÿæƒ³</h1><h2 id=\"æ¶æ„\"><a href=\"#æ¶æ„\" class=\"headerlink\" title=\"æ¶æ„\"></a>æ¶æ„</h2><p>æ•´ä½“çœ‹æ¥ï¼Œå°ç¨‹åºçš„ç»“æ„è¿˜æ˜¯å¾ˆæ¸…æ™°çš„ã€‚</p>\n<ul>\n<li>æŒ‰é¡µé¢ç»„ç»‡ï¼Œæ¯ä¸ªé¡µé¢æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹</li>\n<li>æ–‡ä»¶å¤¹ä¸‹ï¼Œwxmlï¼ˆå¸ƒå±€ï¼‰ï¼Œjsonï¼ˆé…ç½®ï¼‰ï¼Œwxssï¼ˆæ ·å¼ï¼‰ï¼Œjsï¼ˆé€»è¾‘ï¼‰ï¼Œè‡ªå¸¦æ•°æ®ç»‘å®šï¼Œæ¥è¿‘è®¾è®¡æ¨¡å¼ä¸­çš„MVVMæ¨¡å¼</li>\n<li>å®˜æ–¹é›†æˆç™»é™†ã€å®šä½ã€åœ°å›¾ã€æ”¯ä»˜ã€åˆ†äº«ã€ç½‘ç»œè¯·æ±‚ç­‰åŸºç¡€æœåŠ¡ï¼Œå‡å°‘äºŒæ¬¡å¼€å‘æˆæœ¬</li>\n<li>å¦ä¸€æ–¹é¢ï¼Œè¿™ä¹Ÿé™åˆ¶äº†å¼€å‘è€…å¯¹äºåº•å±‚å·¥å…·çš„é€‰æ‹©ï¼Œåªèƒ½å¯„å¸Œæœ›äºå¾®ä¿¡æä¾›çš„APIè¶³å¤Ÿå¼ºå¤§ä¸é«˜æ•ˆï¼Œå› ä¸ºä½ å‹æ ¹ä¹Ÿæ²¡æœ‰åˆ«çš„åŠæ³•å»ä¿®æ”¹åº•å±‚æœåŠ¡</li>\n</ul>\n<h2 id=\"å¼€å‘è€…å·¥å…·\"><a href=\"#å¼€å‘è€…å·¥å…·\" class=\"headerlink\" title=\"å¼€å‘è€…å·¥å…·\"></a>å¼€å‘è€…å·¥å…·</h2><p>ç›®å‰çœ‹æ¥ï¼Œå¾®ä¿¡å®˜æ–¹æä¾›çš„å¼€å‘è€…å·¥å…·åªæ˜¯ä¸ªåŠæˆå“ï¼Œç”±äºç¼ºå°‘ä¸€äº›å¸¸ç”¨åŠŸèƒ½ï¼Œä½¿ç”¨èµ·æ¥åè€Œä¼šç¢æ‰‹ç¢è„šï¼Œæ‹–æ…¢å¼€å‘é€Ÿåº¦ã€‚å»ºè®®å¼€å‘è€…ä½¿ç”¨è‡ªå·±ä¹ æƒ¯çš„å·¥å…·è¿›è¡Œå¼€å‘ï¼Œåªä½¿ç”¨å®˜æ–¹å¼€å‘å·¥å…·ä¸­çš„é¢„è§ˆ&amp;å‘å¸ƒåŠŸèƒ½ã€‚</p>\n<h3 id=\"å®˜æ–¹å¼€å‘è€…å·¥å…·çš„ä¸€äº›æ§½ç‚¹\"><a href=\"#å®˜æ–¹å¼€å‘è€…å·¥å…·çš„ä¸€äº›æ§½ç‚¹\" class=\"headerlink\" title=\"å®˜æ–¹å¼€å‘è€…å·¥å…·çš„ä¸€äº›æ§½ç‚¹\"></a>å®˜æ–¹å¼€å‘è€…å·¥å…·çš„ä¸€äº›æ§½ç‚¹</h3><ul>\n<li>å¿«æ·é”®åŒ®ä¹ï¼šæ‰“å¼€æ–‡ä»¶ï¼Œå…³é—­æ–‡ä»¶ï¼Œè‡ªåŠ¨æ ¼å¼åŒ–â€¦â€¦</li>\n<li>æ— æ³•æ‰¹é‡æ“ä½œæ–‡ä»¶</li>\n<li>æ— æ³•æ‰¹é‡é‡å‘½åå˜é‡</li>\n<li>æ— æ³•å…¨å±€æœç´¢</li>\n<li>ä¸æ”¯æŒLess</li>\n<li><code>Wxml</code>æ ‡ç­¾ä¸­ä¸æ”¯æŒé”®ç›˜å±•å¼€/æ”¶èµ·èŠ‚ç‚¹</li>\n<li>wxmlã€wxssåœ¨sublimeç­‰ç¼–è¾‘å™¨ä¸­æ— è¯­æ³•é«˜äº®</li>\n<li>å¶å°”å‡ºç°è°ƒè¯•é¢æ¿ä¸­åªæ˜¾ç¤º<code>Console</code> <code>Sources</code> <code>Network</code>ä¸‰ä¸ªæ ‡ç­¾çš„bugï¼Œé‡æ–°ä¸‹è½½åè§£å†³</li>\n</ul>\n<h2 id=\"å‘å¸ƒ\"><a href=\"#å‘å¸ƒ\" class=\"headerlink\" title=\"å‘å¸ƒ\"></a>å‘å¸ƒ</h2><p>è¿™æ˜¯ç¬”è€…æœ€ä¸å–œæ¬¢çš„ä¸€ç‚¹ï¼Œå¿…é¡»ä»¥å…¬å¸/ä¼ä¸š/åª’ä½“/æ”¿åºœæœºå…³çš„èº«ä»½è¿›è¡Œè®¤è¯åï¼Œæ‰èƒ½å‘å¸ƒåˆ°çº¿ä¸Šï¼Œå®Œå…¨å µæ­»äº†ä¸ªäººå¼€å‘è€…å‘å¸ƒçš„é“è·¯ã€‚</p>\n<h2 id=\"ä¸€äº›æ€è€ƒ\"><a href=\"#ä¸€äº›æ€è€ƒ\" class=\"headerlink\" title=\"ä¸€äº›æ€è€ƒ\"></a>ä¸€äº›æ€è€ƒ</h2><p>å¼ å°é¾™çš„é‡å¿ƒå¾ˆå¤§ï¼Œå½“å¾®ä¿¡å æ®äº†8äº¿æ‰‹æœºå…¥å£åï¼Œè¿™é‡å¿ƒå¼€å§‹æ˜¾éœ²å‡ºæ¥â€”â€”â€”â€”å¾®ä¿¡ä¸ä¼šæ»¡è¶³äºåªåšä¸€ä¸ªé€šè®¯è½¯ä»¶ï¼Œå®ƒæ­£è¯•å›¾æˆä¸ºä¸€ä¸ªå…¥å£ï¼Œä¸€ä¸ªè§¦è¾¾ä½¿ç”¨è€…ç”Ÿæ´»æ–¹æ–¹é¢é¢çš„å…¥å£ã€‚ä¸€æ—¦è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿè¢«è¯æ˜æ˜¯è¡Œä¹‹æœ‰æ•ˆçš„ï¼Œæœªæ¥äººä»¬æ‰‹æœºä¸Šå¯èƒ½åªä¼šå®‰è£…ä¸€ä¸ªå¾®ä¿¡ã€‚</p>\n<p>å¯¹äºå¼€å‘è€…ï¼Œå°¤å…¶æ˜¯Android/iOSå¼€å‘è€…ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ¶ˆæ¯ï¼Œä»–ä»¬å¯èƒ½éœ€è¦æ”¹è¡Œå†™js/cssäº†ã€‚</p>\n<p>æ”¯ä»˜å®åœ°ä½å—åˆ°å¨èƒï¼Œé˜¿é‡Œææˆæœ€å¤§è¾“å®¶ã€‚</p>\n<p>ä»¥ä¸Šçš„ä¸€åˆ‡ï¼Œéƒ½å»ºç«‹åœ¨å°ç¨‹åºçœŸæ­£è·‘å¾—å¤Ÿå¿«ã€å¤Ÿå¥½çš„åŸºç¡€ä¸Šï¼Œç›®å‰çœ‹æ¥è¿™æ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œæ¯”èµ·åŸç”Ÿç³»ç»Ÿï¼Œå°ç¨‹åºçš„ä½“éªŒè¦ä¸‹é™è®¸å¤šï¼Œå°¤å…¶æ˜¯Tap/Scrolläº‹ä»¶ï¼Œå¡é¡¿éå¸¸æ˜æ˜¾ã€‚</p>\n<h1 id=\"é™„1-ASCIIå¯¹ç…§è¡¨\"><a href=\"#é™„1-ASCIIå¯¹ç…§è¡¨\" class=\"headerlink\" title=\"é™„1: ASCIIå¯¹ç…§è¡¨\"></a>é™„1: ASCIIå¯¹ç…§è¡¨</h1><p><img src=\"/img/170109_wechat_dev/ascii.png\" alt=\"\"></p>\n<h1 id=\"é™„2-JavaScriptä¸­è·å–å­—ç¬¦çš„ASCIIå€¼ï¼Œä»¥åŠå°†ACSIIè½¬æ¢ä¸ºå­—ç¬¦\"><a href=\"#é™„2-JavaScriptä¸­è·å–å­—ç¬¦çš„ASCIIå€¼ï¼Œä»¥åŠå°†ACSIIè½¬æ¢ä¸ºå­—ç¬¦\" class=\"headerlink\" title=\"é™„2: JavaScriptä¸­è·å–å­—ç¬¦çš„ASCIIå€¼ï¼Œä»¥åŠå°†ACSIIè½¬æ¢ä¸ºå­—ç¬¦\"></a>é™„2: JavaScriptä¸­è·å–å­—ç¬¦çš„ASCIIå€¼ï¼Œä»¥åŠå°†ACSIIè½¬æ¢ä¸ºå­—ç¬¦</h1><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> x = <span class=\"string\">'c'</span>;</span><br><span class=\"line\"><span class=\"keyword\">var</span> ascii = c.charCodeAt(); <span class=\"comment\">// 99</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> y = <span class=\"built_in\">String</span>.fromCharCode(ascii); <span class=\"comment\">// 'c'</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"======Ending======\"></a><em>======Ending======</em></h4>","categories":[],"tags":["å¾®ä¿¡å°ç¨‹åº"]},{"title":"Android SDKä¸‹è½½æé€Ÿä»£ç†åœ°å€","url":"https://lilei.pro/2017/01/09/Android-SDK-Manager-Proxy-Server/","content":"<blockquote>\n<p>HTTP Proxy Server: android-mirror.bugly.qq.com<br>HTTP Proxy Port: 8080</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<p>åœ¨Android SDK Managerä¸­å¦‚ä¸Šé…ç½®å³å¯ï¼Œä¸ºé¹…å‚ç‚¹èµğŸ‘</p>\n<p>è®°å¾—å‹¾é€‰ä¸‹é¢çš„<code>Force https://... sources to be fetched using http://...</code></p>\n<p><img src=\"/img/170109_sdk_proxy/proxy.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"======Ending======\"></a><em>======Ending======</em></h3>","categories":[],"tags":["Android","Android Studio"]},{"title":"Android WebView ä»0åˆ°1ï¼ˆäºŒï¼‰","url":"https://lilei.pro/2016/11/10/Android-WebView-0-to-1-part-2/","content":"<blockquote>\n<p>WebViewä¸­clearCacheçš„æ‰§è¡Œè¿‡ç¨‹æºç åˆ†æã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"å‰æƒ…æè¦\"><a href=\"#å‰æƒ…æè¦\" class=\"headerlink\" title=\"å‰æƒ…æè¦\"></a>å‰æƒ…æè¦</h2><p>ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å¯¹Android WebViewçš„loadUrlæ–¹æ³•è¿›è¡Œäº†åˆ†æï¼Œè¿™æ¬¡æˆ‘ä»¬æ¥çœ‹çœ‹clearCacheç©¶ç«Ÿåšäº†ä»€ä¹ˆäº‹ï¼Œè¿›è€Œææ¸…æ¥šWebViewä¸­çš„ç¼“å­˜æœºåˆ¶ã€‚</p>\n<h2 id=\"WebView-clearCache\"><a href=\"#WebView-clearCache\" class=\"headerlink\" title=\"WebView.clearCache\"></a>WebView.clearCache</h2><p>clearCacheçš„æºç å¾ˆç®€å•ï¼Œå”¯ä¸€çš„å‚æ•°<code>includeDiskFiles</code>ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ã€‚å¦‚å‰ç¯‡æ‰€è¿°ï¼ŒWebViewçš„å¤§éƒ¨åˆ†æ“ä½œï¼Œéƒ½æ˜¯ä»£ç†ç»™<code>WebViewProvider</code>æ¥è¿›è¡Œï¼ŒclearCacheä¹Ÿä¸ä¾‹å¤–ã€‚ä¸è¿‡å¯ä»¥å‘ç°ï¼Œè¿™é‡Œæœ‰ä¸ª<code>checkThread()</code>çš„æ“ä½œï¼Œè¿™æ˜¯æ¥è¿›è¡Œä»€ä¹ˆçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬åœ¨æºç ä¸­ä¸€æ¢ç©¶ç«Ÿã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Clears the resource cache. Note that the cache is per-application, so</span></span><br><span class=\"line\"><span class=\"comment\"> * this will clear the cache for all WebViews used.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> includeDiskFiles if false, only the RAM cache is cleared</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clearCache</span><span class=\"params\">(<span class=\"keyword\">boolean</span> includeDiskFiles)</span> </span>&#123;</span><br><span class=\"line\">    checkThread();</span><br><span class=\"line\">    mProvider.clearCache(includeDiskFiles);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">checkThread</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Ignore mWebViewThread == null because this can be called during in the super class</span></span><br><span class=\"line\">    <span class=\"comment\">// constructor, before this class's own constructor has even started.</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mWebViewThread != <span class=\"keyword\">null</span> &amp;&amp; Looper.myLooper() != mWebViewThread) &#123;</span><br><span class=\"line\">        Throwable throwable = <span class=\"keyword\">new</span> Throwable(</span><br><span class=\"line\">                <span class=\"string\">\"A WebView method was called on thread '\"</span> +</span><br><span class=\"line\">                Thread.currentThread().getName() + <span class=\"string\">\"'. \"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"All WebView methods must be called on the same thread. \"</span> +</span><br><span class=\"line\">                <span class=\"string\">\"(Expected Looper \"</span> + mWebViewThread + <span class=\"string\">\" called on \"</span> + Looper.myLooper() +</span><br><span class=\"line\">                <span class=\"string\">\", FYI main Looper is \"</span> + Looper.getMainLooper() + <span class=\"string\">\")\"</span>);</span><br><span class=\"line\">        Log.w(LOGTAG, Log.getStackTraceString(throwable));</span><br><span class=\"line\">        StrictMode.onWebViewMethodCalledOnWrongThread(throwable);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (sEnforceThreadChecking) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> RuntimeException(throwable);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¼€å¤´æ³¨é‡Šé‡Œå°±å·²ç»è¯´æ˜ï¼Œå¿½ç•¥<code>mWebViewThread</code>ä¸ºnullçš„æƒ…å†µï¼Œå› ä¸ºå¯èƒ½ä¼šåœ¨è¶…ç±»çš„æ„é€ å™¨é‡Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶WebViewè¿™ä¸ªç±»çš„å¯¹è±¡è¿˜æ²¡æœ‰æ„å»ºå‡ºæ¥ï¼Œæ„å‘³ç€<code>mWebViewThread</code>ä¸ºnullã€‚<code>if</code>æ¡ä»¶ä¸­çš„<code>Looper.myLooper() != mWebViewThread</code>è¿™æ¡åˆ¤æ–­ï¼Œå¯¹Androidç³»ç»Ÿæœ‰è¿‡ä¸€å®šäº†è§£çš„äººçš„äººï¼Œåº”è¯¥ä¼šå¯¹<code>Looper.myLooper()</code>è¿™ç§å†™æ³•éå¸¸ç†Ÿæ‚‰ï¼Œè¿™æ˜¯è·å–å½“å‰çº¿ç¨‹çš„å…¸å‹æ‰‹æ®µã€‚å¦‚æœå½“å‰çº¿ç¨‹ä¸æ˜¯WebViewçº¿ç¨‹çš„è¯ï¼Œå°±è¦åšå¥½æŠ›å‡ºå¼‚å¸¸çš„å‡†å¤‡ã€‚ä¸ºä»€ä¹ˆè¦åšè¿™ç§åˆ¤æ–­å‘¢ï¼Ÿæˆ‘åˆ†æäº†10åˆ†é’Ÿï¼Œå¾—å‡ºç»“è®ºæ˜¯ï¼šå› ä¸ºWebViewä¸­å¾ˆå¤šæ“ä½œï¼Œéƒ½éœ€è¦è¿ç”¨çº¿ç¨‹å†…éƒ¨èµ„æºï¼Œå¦‚æœåœ¨å¤–éƒ¨çº¿ç¨‹ä¸­è°ƒç”¨ï¼Œå¾ˆå®¹æ˜“å‡ºç°å¹¶å‘é—®é¢˜ï¼Œå¦‚æœè¦é¿å…ï¼Œå°±åªæœ‰å¢åŠ åŒæ­¥çš„æˆæœ¬ï¼Œæ‰€ä»¥ç´¢æ€§åªé™åˆ¶åœ¨çº¿ç¨‹å†…äº†ã€‚æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºWebViewæ˜¯ä¸€ä¸ªUIç»„ä»¶ï¼Œå¤§éƒ¨åˆ†æ—¶é—´é‡Œéƒ½åœ¨ä¸»çº¿ç¨‹ä¸­åˆå§‹åŒ–ï¼Œå› æ­¤ï¼Œè¿™é‡Œåˆ¤æ–­çš„å°±æ˜¯å½“å‰çº¿ç¨‹æ˜¯å¦ä¸ºUIçº¿ç¨‹ã€‚</p>\n<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>WebViewProvider</code>ä¸­çš„<code>clearCache</code>æ–¹æ³•ï¼Œä¾æ—§æ˜¯<a href=\"https://android.googlesource.com/platform/frameworks/webview/+/4dcabae/chromium/java/com/android/webview/chromium/WebViewChromium.java\" target=\"_blank\" rel=\"noopener\">WebViewChromium.java</a>ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clearCache</span><span class=\"params\">(<span class=\"keyword\">boolean</span> includeDiskFiles)</span> </span>&#123;</span><br><span class=\"line\">    mAwContents.clearCache(includeDiskFiles);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åŒæ ·ï¼Œè¿™ä¸ªæ“ä½œè¢«ä»£ç†ç»™äº†<code>AwContents</code>ï¼Œæºç è§<a href=\"https://android.googlesource.com/platform/external/chromium_org/+/c5c1b6121eac447fb8d8691bd637e2b6b188fd75/android_webview/java/src/org/chromium/android_webview/AwContents.java\" target=\"_blank\" rel=\"noopener\">AwContents.java</a>ã€‚éœ€è¦æ³¨æ„ï¼Œç”±äºappå†…æ‰€æœ‰çš„WebViewç¼“å­˜éƒ½æ˜¯ä¿å­˜åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ¸…ç©ºappå…¨éƒ¨WebViewçš„ç¼“å­˜ï¼Œå‚æ•°<code>includeDiskFiles</code>æ§åˆ¶æ¸…ç©ºç¡¬ç›˜ä¸Šçš„ç¼“å­˜æ–‡ä»¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Clears the resource cache. Note that the cache is per-application, so this will clear the</span></span><br><span class=\"line\"><span class=\"comment\"> * cache for all WebViews used.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> includeDiskFiles if false, only the RAM cache is cleared</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">clearCache</span><span class=\"params\">(<span class=\"keyword\">boolean</span> includeDiskFiles)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mNativeAwContents == <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    nativeClearCache(mNativeAwContents, includeDiskFiles);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯¹åº”çš„å®ç°ä½äº<a href=\"https://chromium.googlesource.com/experimental/chromium/src/+/master/android_webview/native/aw_contents.cc\" target=\"_blank\" rel=\"noopener\">aw_contents.cc</a>ä»£ç ã€‚å…ˆæ£€æµ‹å½“å‰çº¿ç¨‹ä¸ºUIçº¿ç¨‹ï¼Œç„¶åè°ƒç”¨<code>render_view_host_ext_</code>çš„ClearCacheæ–¹æ³•ï¼Œå¦‚æœéœ€è¦æ¸…ç©ºç¡¬ç›˜ä¸Šçš„ç¼“å­˜çš„è¯ï¼Œè°ƒç”¨<code>RemoveHttpDiskCache(web_contents_-&gt;GetRenderProcessHost())</code>ã€‚é€ä¸ªæ¥åˆ†æã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> AwContents::ClearCache(JNIEnv* env,</span><br><span class=\"line\">                            <span class=\"keyword\">const</span> JavaParamRef&lt;jobject&gt;&amp; obj,</span><br><span class=\"line\">                            jboolean include_disk_files) &#123;</span><br><span class=\"line\">  DCHECK_CURRENTLY_ON(BrowserThread::UI);</span><br><span class=\"line\">  render_view_host_ext_-&gt;ClearCache();</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (include_disk_files)</span><br><span class=\"line\">    RemoveHttpDiskCache(web_contents_-&gt;GetRenderProcessHost());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é¦–å…ˆçœ‹<code>render_view_host_ext_-&gt;ClearCache()</code>ï¼Œä»£ç åœ¨<a href=\"https://chromium.googlesource.com/chromium/src/+/master/android_webview/browser/renderer_host/aw_render_view_host_ext.cc\" target=\"_blank\" rel=\"noopener\">aw_render_view_host_ext.cc</a>ã€‚è¿™é‡Œå‘å‡ºäº†ä¸€ä¸ªä¿¡æ¯ï¼Œ<code>AwViewMsg_ClearCache</code>ï¼Œçœ‹å‡ºæ¥äº†ï¼Œæ˜¯å¹¿æ’­æ¨¡å¼ã€‚é‚£ä¹ˆæ¶ˆæ¯ç›‘å¬è€…åœ¨å“ªå„¿å‘¢ï¼Ÿ</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> AwRenderViewHostExt::ClearCache() &#123;</span><br><span class=\"line\">  DCHECK(CalledOnValidThread());</span><br><span class=\"line\">  Send(<span class=\"keyword\">new</span> AwViewMsg_ClearCache);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç›‘å¬è€…ä½äº<a href=\"https://chromium.googlesource.com/chromium/src/+/refs/heads/master/android_webview/renderer/aw_render_thread_observer.cc\" target=\"_blank\" rel=\"noopener\">aw_render_thread_observer.cc</a>ã€‚é€šè¿‡<code>blink::WebCache::clear()</code>è°ƒç”¨clearæ–¹æ³•ã€‚<code>blink</code>ç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼ŸI donâ€™t know. å€ŸåŠ©Googleçš„åŠ›é‡ï¼Œæ‰¾åˆ°äº†<code>WebCache::clear()</code>çš„å®ç°ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">bool</span> AwRenderThreadObserver::OnControlMessageReceived(</span><br><span class=\"line\">    <span class=\"keyword\">const</span> IPC::Message&amp; message) &#123;</span><br><span class=\"line\">  <span class=\"keyword\">bool</span> handled = <span class=\"literal\">true</span>;</span><br><span class=\"line\">  IPC_BEGIN_MESSAGE_MAP(AwRenderThreadObserver, message)</span><br><span class=\"line\">    IPC_MESSAGE_HANDLER(AwViewMsg_ClearCache, OnClearCache)</span><br><span class=\"line\">    IPC_MESSAGE_HANDLER(AwViewMsg_SetJsOnlineProperty, OnSetJsOnlineProperty)</span><br><span class=\"line\">    IPC_MESSAGE_UNHANDLED(handled = <span class=\"literal\">false</span>)</span><br><span class=\"line\">  IPC_END_MESSAGE_MAP()</span><br><span class=\"line\">  <span class=\"keyword\">return</span> handled;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">void</span> AwRenderThreadObserver::OnClearCache() &#123;</span><br><span class=\"line\">  blink::WebCache::clear();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://chromium.googlesource.com/chromium/blink/+/master/Source/web/WebCache.cpp\" target=\"_blank\" rel=\"noopener\">WebCache.cpp</a></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> WebCache::clear()</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    MemoryCache* cache = memoryCache();</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (cache)</span><br><span class=\"line\">        cache-&gt;evictResources();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è·å–<code>memoryCache()</code>çš„æ–¹æ³•ä½äº<a href=\"https://chromium.googlesource.com/chromium/blink/+/master/Source/web/WebCache.cpp\" target=\"_blank\" rel=\"noopener\">WebCache.cpp</a>ï¼Œå¯ä»¥çœ‹å‡ºè¯¥cacheæ˜¯çº¿ç¨‹ç›¸å…³çš„ï¼Œè€Œä¸”ä»å‘½åä¸Šå°±å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯<code>MemoryCache</code>ï¼Œä½äºRAMä¸­ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\">MemoryCache* <span class=\"title\">memoryCache</span><span class=\"params\">()</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    ASSERT(WTF::isMainThread());</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!gMemoryCache)</span><br><span class=\"line\">        gMemoryCache = <span class=\"keyword\">new</span> Persistent&lt;MemoryCache&gt;(MemoryCache::create());</span><br><span class=\"line\">    <span class=\"keyword\">return</span> gMemoryCache-&gt;get();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆ†æå®Œæ¸…ç†å†…å­˜ç¼“å­˜çš„è·¯å¾„ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥çœ‹å¦‚ä½•æ¸…ç†ç£ç›˜ç¼“å­˜ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (include_disk_files)</span><br><span class=\"line\">    RemoveHttpDiskCache(web_contents_-&gt;GetRenderProcessHost());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>RemoveHttpDiskCache</code>ä½äº<a href=\"https://chromium.googlesource.com/chromium/src.git/+/master/android_webview/browser/net_disk_cache_remover.cc\" target=\"_blank\" rel=\"noopener\">net_disk_cache_remover.cc</a>ã€‚æ‰€åšçš„äº‹æƒ…æ˜¯ï¼Œåœ¨<code>BrowserThread</code>ä¸­å‘å¸ƒä¸€ä¸ªTaskï¼Œæ¸…ç†<code>Render</code>è¿›ç¨‹æ‹¥æœ‰çš„ç£ç›˜ç©ºé—´ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">RemoveHttpDiskCache</span><span class=\"params\">(content::RenderProcessHost* render_process_host)</span> </span>&#123;</span><br><span class=\"line\">  BrowserThread::PostTask(</span><br><span class=\"line\">      BrowserThread::IO, FROM_HERE,</span><br><span class=\"line\">      base::Bind(&amp;ClearHttpDiskCacheOnIoThread,</span><br><span class=\"line\">                 base::Unretained(render_process_host-&gt;GetStoragePartition()-&gt;</span><br><span class=\"line\">                     GetURLRequestContext()),</span><br><span class=\"line\">                 base::Unretained(render_process_host-&gt;GetStoragePartition()-&gt;</span><br><span class=\"line\">                     GetMediaURLRequestContext())));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆ°è¿™é‡Œï¼Œä¼¼ä¹å‘Šä¸€æ®µè½äº†ã€‚</p>\n<hr>\n","categories":[],"tags":["Android","æºç åˆ†æ"]},{"title":"Android WebView ä»0åˆ°1ï¼ˆä¸€ï¼‰","url":"https://lilei.pro/2016/11/09/Android-WebView-0-to-1/","content":"<blockquote>\n<p>è¿™ä¸€ç³»åˆ—å°†ä»æºç è§’åº¦ï¼Œåˆ†æWebViewåŠ è½½é¡µé¢çš„å…¨è¿‡ç¨‹ã€‚åœ¨æ‘¸é€ç¼“å­˜æœºåˆ¶çš„åŸºç¡€ä¸Šï¼Œå®ç°è‡ªå·±çš„WebViewç¼“å­˜æ§åˆ¶é¡¹ç›®Vindowã€‚<br>ä»0åˆ°1å¾ˆéš¾ï¼Œä½†æ˜¯å…‹æœäº†ä¹‹åï¼Œä»1åˆ°100å°±å®¹æ˜“äº†è®¸å¤šã€‚</p>\n</blockquote>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"WebView-java\"><a href=\"#WebView-java\" class=\"headerlink\" title=\"WebView.java\"></a>WebView.java</h2><p>è¿™é‡Œé‡‡ç”¨<code>android-23</code>çš„æºç ç¤ºä¾‹ã€‚</p>\n<p>WebViewçš„ç±»è¯´æ˜æ³¨é‡Šéå¸¸é•¿ï¼Œå»ºè®®è€å¿ƒåœ°è¯»å®Œæ¯ä¸€è¡Œï¼Œéšåï¼Œä½ å°±ä¼šå¯¹WebViewçš„ä¸»è¦åŠŸèƒ½æœ‰ä¸€ä¸ªè½®å»“ä¸Šçš„è®¤è¯†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * A View that displays web pages. This class is the basis upon which you</span></span><br><span class=\"line\"><span class=\"comment\"> * can roll your own web browser or simply display some online content within your Activity.</span></span><br><span class=\"line\"><span class=\"comment\"> * It uses the WebKit rendering engine to display</span></span><br><span class=\"line\"><span class=\"comment\"> * web pages and includes methods to navigate forward and backward</span></span><br><span class=\"line\"><span class=\"comment\"> * through a history, zoom in and out, perform text searches and more.</span></span><br><span class=\"line\"><span class=\"comment\"> * /</span></span><br></pre></td></tr></table></figure>\n<p>è¿™æ®µæ˜¯è¯´ï¼ŒWebViewä¸»è¦ç”¨æ¥å±•ç¤ºç½‘é¡µä¿¡æ¯ï¼Œå®ƒä½¿ç”¨WebKitå†…æ ¸ï¼ˆè¿™é‡Œå¾ˆé‡è¦ï¼Œåç»­åˆ†æå¤§éƒ¨åˆ†æºç éƒ½æ˜¯æ¥è‡ªWebKitçš„ï¼‰ï¼ŒåŒ…å«äº†æ§åˆ¶ç½‘é¡µå‰è¿›åé€€çš„å¯¼èˆªåŠŸèƒ½ã€ç¼©æ”¾åŠŸèƒ½ã€æ–‡æœ¬æœç´¢åŠŸèƒ½ä»¥åŠå…¶ä»–ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * By default, a WebView provides no browser-like widgets, does not</span></span><br><span class=\"line\"><span class=\"comment\"> * enable JavaScript and web page errors are ignored. If your goal is only</span></span><br><span class=\"line\"><span class=\"comment\"> * to display some HTML as a part of your UI, this is probably fine;</span></span><br><span class=\"line\"><span class=\"comment\"> * the user won't need to interact with the web page beyond reading</span></span><br><span class=\"line\"><span class=\"comment\"> * it, and the web page won't need to interact with the user. If you</span></span><br><span class=\"line\"><span class=\"comment\"> * actually want a full-blown web browser, then you probably want to</span></span><br><span class=\"line\"><span class=\"comment\"> * invoke the Browser application with a URL Intent rather than show it</span></span><br><span class=\"line\"><span class=\"comment\"> * with a WebView.</span></span><br><span class=\"line\"><span class=\"comment\"> * Uri uri = Uri.parse(\"http://www.example.com\");</span></span><br><span class=\"line\"><span class=\"comment\"> * Intent intent = new Intent(Intent.ACTION_VIEW, uri);</span></span><br><span class=\"line\"><span class=\"comment\"> * startActivity(intent);</span></span><br><span class=\"line\"><span class=\"comment\"> * /</span></span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œå¼ºè°ƒäº†ï¼ŒWebViewåº”å½“ä»…ä»…æä¾›å±•ç¤ºï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦ç”¨JavaScriptï¼Œå¹¶ä¸”éšè—ç½‘é¡µé”™è¯¯ä¿¡æ¯çš„ã€‚æ¢å¥è¯è¯´ï¼ŒGoogleæœ¬æ„æ˜¯ä¸æå€¡åœ¨WebViewä¸­å¼•å¯¼ç”¨æˆ·è¿›è¡Œè¿‡å¤šçš„æ“ä½œï¼Œå¦‚æœæœ‰è¿™ç§éœ€æ±‚ï¼Œå°±é€šè¿‡intentæ‰“å¼€æµè§ˆå™¨é¡µé¢è¿›è¡Œæ“ä½œã€‚ç„¶è€Œå½“ä¸‹è¿™æ¡è§„åˆ™åœ¨å¾ˆå¤šåº”ç”¨åœºæ™¯ä¸‹æ˜¯è¢«æ— è§†çš„ï¼Œæƒ³æƒ³å¾®ä¿¡åœ¨H5é¡µé¢é‡Œï¼Œå¯ä»¥åšå¤šå°‘äº‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;p&gt;A WebView has several customization points where you can add your</span></span><br><span class=\"line\"><span class=\"comment\"> * own behavior. These are:&lt;/p&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;ul&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &lt;li&gt;Creating and setting a &#123;<span class=\"doctag\">@link</span> android.webkit.WebChromeClient&#125; subclass.</span></span><br><span class=\"line\"><span class=\"comment\"> *       This class is called when something that might impact a</span></span><br><span class=\"line\"><span class=\"comment\"> *       browser UI happens, for instance, progress updates and</span></span><br><span class=\"line\"><span class=\"comment\"> *       JavaScript alerts are sent here (see &lt;a</span></span><br><span class=\"line\"><span class=\"comment\"> * href=\"&#123;<span class=\"doctag\">@docRoot</span>&#125;guide/developing/debug-tasks.html#DebuggingWebPages\"&gt;Debugging Tasks&lt;/a&gt;).</span></span><br><span class=\"line\"><span class=\"comment\"> *   &lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &lt;li&gt;Creating and setting a &#123;<span class=\"doctag\">@link</span> android.webkit.WebViewClient&#125; subclass.</span></span><br><span class=\"line\"><span class=\"comment\"> *       It will be called when things happen that impact the</span></span><br><span class=\"line\"><span class=\"comment\"> *       rendering of the content, eg, errors or form submissions. You</span></span><br><span class=\"line\"><span class=\"comment\"> *       can also intercept URL loading here (via &#123;<span class=\"doctag\">@link</span></span></span><br><span class=\"line\"><span class=\"comment\"> * android.webkit.WebViewClient#shouldOverrideUrlLoading(WebView,String)</span></span><br><span class=\"line\"><span class=\"comment\"> * shouldOverrideUrlLoading()&#125;).&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &lt;li&gt;Modifying the &#123;<span class=\"doctag\">@link</span> android.webkit.WebSettings&#125;, such as</span></span><br><span class=\"line\"><span class=\"comment\"> * enabling JavaScript with &#123;<span class=\"doctag\">@link</span> android.webkit.WebSettings#setJavaScriptEnabled(boolean)</span></span><br><span class=\"line\"><span class=\"comment\"> * setJavaScriptEnabled()&#125;. &lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> *   &lt;li&gt;Injecting Java objects into the WebView using the</span></span><br><span class=\"line\"><span class=\"comment\"> *       &#123;<span class=\"doctag\">@link</span> android.webkit.WebView#addJavascriptInterface&#125; method. This</span></span><br><span class=\"line\"><span class=\"comment\"> *       method allows you to inject Java objects into a page's JavaScript</span></span><br><span class=\"line\"><span class=\"comment\"> *       context, so that they can be accessed by JavaScript in the page.&lt;/li&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * &lt;/ul&gt;</span></span><br><span class=\"line\"><span class=\"comment\"> * /</span></span><br></pre></td></tr></table></figure>\n<p>é»˜è®¤WebViewçš„å¾ˆå¤šåŠŸèƒ½æ˜¯å…³é—­çš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ‰“å¼€ã€‚è¿™é‡Œåˆ—å‡ºäº†å¦‚ä½•å¤„ç†JS Alertä¸é”™è¯¯ã€å¦‚ä½•å¼€å¯JSã€å¦‚ä½•ä½¿nativeä»£ç ä¸é¡µé¢JSè¿›è¡Œäº¤äº’ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Implementation notes.</span></span><br><span class=\"line\"><span class=\"comment\">// The WebView is a thin API class that delegates its public API to a backend WebViewProvider</span></span><br><span class=\"line\"><span class=\"comment\">// class instance. WebView extends &#123;@link AbsoluteLayout&#125; for backward compatibility reasons.</span></span><br><span class=\"line\"><span class=\"comment\">// Methods are delegated to the provider implementation: all public API methods introduced in this</span></span><br><span class=\"line\"><span class=\"comment\">// file are fully delegated, whereas public and protected methods from the View base classes are</span></span><br><span class=\"line\"><span class=\"comment\">// only delegated where a specific need exists for them to do so.</span></span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢è¿™æ®µè¯´æ˜äº†WebViewä¸»è¦çš„å®ç°æœºç†â€”â€”â€”â€”WebViewæœ¬èº«åªæ˜¯ä¸€ä¸ªä»£ç†ï¼ˆdelegateï¼‰ï¼Œæä¾›äº†å…¬å…±çš„APIä¾›å®¢æˆ·ç«¯è°ƒç”¨ï¼Œè€Œè¿™äº›APIçš„å®ç°ï¼Œéƒ½æ˜¯ä»£ç†åˆ°äº†ä¸€ä¸ªå«WebViewProviderçš„å¯¹è±¡ä¸Šé¢ã€‚æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¤§è‡´æµè§ˆä¸‹WebViewæœ‰å“ªäº›å…¬æœ‰APIï¼ŒæŠŠæ›´å¤šçš„ç²¾åŠ›ä¿ç•™ä¸‹æ¥ï¼Œé›†ä¸­åˆ†æWebViewProviderçš„å®ç°ã€‚</p>\n<h2 id=\"WebView-API\"><a href=\"#WebView-API\" class=\"headerlink\" title=\"WebView API\"></a>WebView API</h2><p>è¿™éƒ¨åˆ†ä¸ç½—åˆ—äº†ï¼Œåªåšä¸€ä¸ªç®€å•çš„å½’ç±»ï¼ŒAPIæ–‡æ¡£è§ <a href=\"https://developer.android.com/reference/android/webkit/WebView.html\" target=\"_blank\" rel=\"noopener\">https://developer.android.com/reference/android/webkit/WebView.html</a></p>\n<p><strong>åŠ è½½é¡µé¢</strong><br>è¿™æ˜¯æœ€ä¸»è¦çš„åŠŸèƒ½ï¼Œå…¨éƒ¨ç”±ä»£ç†Providerå®Œæˆ</p>\n<ul>\n<li>loadUrl</li>\n<li>postUrl</li>\n<li>loadData</li>\n<li>loadDataWithBaseURL</li>\n<li>getUrlï¼ŒgetOriginalUrl</li>\n<li>getFaviconï¼ŒgetTouchIconUrl</li>\n<li>ä¿å­˜é¡µé¢ï¼šsaveWebArchive</li>\n<li>æ§åˆ¶åŠ è½½ï¼šstopLoadingï¼Œreloadï¼ŒgetProgress</li>\n<li>é¡µé¢å°ºå¯¸ï¼šgetContentHeightï¼ŒgetContentWidth</li>\n</ul>\n<p><strong>è®¡æ—¶å™¨</strong></p>\n<ul>\n<li>JSä¸­çš„è®¡æ—¶å™¨ï¼Œåœ¨onPauseæ—¶å¯ä»¥æš‚åœï¼ŒonResumeæ—¶æ¢å¤ï¼špauseTimersï¼ŒresumeTimers</li>\n</ul>\n<p><strong>å¯¼èˆª</strong></p>\n<ul>\n<li>canGoBackï¼ŒcanGoForwardï¼ŒcanGoBackOrForward</li>\n<li>goBackï¼ŒgoForwardï¼ŒgoBackOrForward</li>\n<li>pageUpï¼ŒpageDown</li>\n<li>copyBackForwardList</li>\n</ul>\n<p><strong>JavaScript</strong></p>\n<ul>\n<li>evaluateJavascript</li>\n<li>addJavascriptInterfaceï¼ŒremoveJavascriptInterface</li>\n</ul>\n<p><strong>WebViewClientï¼WebChromeClient</strong></p>\n<ul>\n<li>setWebViewClientï¼šWebViewæœ¬èº«æ˜¯æ§åˆ¶é¡µé¢æ•´ä½“æ¡†æ¶çš„å‰è¿›ã€åé€€ã€ç¼©æ”¾ã€åŠ è½½ç­‰åŠŸèƒ½ï¼Œè€Œå…·ä½“é¡µé¢å†…å®¹çš„å˜åŒ–ï¼Œåˆ™è¦äº¤ç»™WebViewClientæ¥ç®¡ç†ã€‚</li>\n<li>setWebChromeClientï¼šWebChromeClientä¸»è¦è¾…åŠ©WebViewå¤„ç†Javascriptçš„å¯¹è¯æ¡†ã€ç½‘ç«™å›¾æ ‡ã€ç½‘ç«™titleã€åŠ è½½è¿›åº¦ç­‰ã€‚å¦‚æœé¡µé¢åªæ˜¯ç®€å•åœ°å±•ç¤ºHTMLï¼Œå¹¶æ²¡æœ‰JSæ“ä½œï¼Œé‚£ä¹ˆç”¨WebViewClientå°±è¶³å¤Ÿäº†ã€‚</li>\n</ul>\n<p><strong>ä¸‹è½½</strong></p>\n<ul>\n<li>å®Œæˆä¸‹è½½ç›‘å¬å™¨ï¼šsetDownloadListener</li>\n</ul>\n<p><strong>æŸ¥æ‰¾</strong></p>\n<ul>\n<li>é€šè¿‡FindListenerå›è°ƒæ¥å£å®ç°ï¼šsetFindListenerï¼ŒfindNextï¼ŒfindAllâ€¦â€¦</li>\n</ul>\n<p><strong>ç¼©æ”¾</strong></p>\n<ul>\n<li>å±•ç¤ºç¼©æ”¾æ§ä»¶ï¼šinvokeZoomPicker</li>\n<li>æ§åˆ¶ç¼©æ”¾ï¼šzoomInï¼ŒzoomOutâ€¦â€¦</li>\n</ul>\n<p><strong>å®‰å…¨è®¤è¯</strong></p>\n<ul>\n<li>è¯ä¹¦æ“ä½œï¼šgetCertificateï¼ŒsetCertificateï¼ˆdeprecatedï¼‰ï¼Œ</li>\n<li>ç”¨æˆ·åå¯†ç ï¼šsetHttpAuthUsernamePasswordï¼ŒgetHttpAuthUsernamePassword</li>\n<li>ç§å¯†æ¨¡å¼ï¼šisPrivateBrowsingEnabled</li>\n</ul>\n<p><strong>è®¾ç½®ç½‘ç»œ</strong></p>\n<ul>\n<li>ç½‘ç»œå¯ç”¨æ€§ï¼šsetNetworkAvailable</li>\n</ul>\n<p><strong>ä¿å­˜çŠ¶æ€</strong></p>\n<ul>\n<li>ä»£ç†ç»™Providerè¿›è¡Œï¼šsaveStateï¼ŒrestoreState</li>\n</ul>\n<p><strong>ç”Ÿå‘½å‘¨æœŸä¸å›è°ƒ</strong></p>\n<ul>\n<li>postVisualStateCallback</li>\n</ul>\n<p><strong>é¡µé¢å†…å®¹æ ‡ç­¾</strong></p>\n<ul>\n<li>HitTestResultç³»åˆ—ï¼šgetHitTestResult</li>\n</ul>\n<p><strong>Cacheä¸è®¿é—®å†å²</strong><br>æœ¬ç³»åˆ—æ–‡ç« é‡ç‚¹äº†è§£çš„å†…å®¹ï¼Œä»£ç†ç»™Providerå®ç°</p>\n<ul>\n<li>clearCache</li>\n<li>clearFormData</li>\n<li>clearHistory</li>\n<li>clearSslPreferences</li>\n</ul>\n<p><strong>è¢«åºŸå¼ƒçš„æ–¹æ³•</strong></p>\n<ul>\n<li>è®¾ç½®æ»šåŠ¨æ¡æ ·å¼ï¼šsetHorizontalScrollbarOverlayï¼ŒsetVerticalScrollbarOverlayï¼ŒoverlayHorizontalScrollbarï¼ŒoverlayVerticalScrollbarâ€¦â€¦</li>\n<li>è·å–Titleé«˜åº¦ï¼šgetVisibleTitleHeight</li>\n<li>å¹³å°é€šçŸ¥ï¼šenablePlatformNotificationsï¼ŒdisablePlatformNotifications</li>\n<li>å›¾ç‰‡æ“ä½œï¼šsavePictureï¼ŒrestorePictureâ€¦â€¦</li>\n<li>å†…å­˜ï¼šfreeMemory</li>\n<li>Pluginsï¼šgetPluginListï¼ŒrefreshPluginsâ€¦â€¦</li>\n</ul>\n<h2 id=\"WebViewProvider\"><a href=\"#WebViewProvider\" class=\"headerlink\" title=\"WebViewProvider\"></a>WebViewProvider</h2><p>å‰é¢è¯´äº†ï¼ŒWebViewçš„åŠŸèƒ½å‡ ä¹å…¨éƒ¨éƒ½æ˜¯ä»£ç†ç»™WebViewProvideræ¥å®ç°çš„ï¼Œ<code>android.webkit.WebViewProvider</code>æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå…¶å®ç°è¦è¿½æº¯æºç ï¼Œæ®ç‰ˆæœ¬ä¸åŒæœ‰æ‰€åŒºåˆ†ã€‚</p>\n<ul>\n<li>Android4.4ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œç”±WebViewClassicå®ç°ã€‚</li>\n<li>Android4.4ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ï¼Œç”±WebViewChromiumå®ç°ã€‚</li>\n</ul>\n<p>éšSDKä¸‹è½½çš„æºç é‡Œä¸åŒ…å«è¿™éƒ¨åˆ†ä»£ç ï¼Œåœ¨è¿™ä¸ªé¡µé¢æŸ¥çœ‹ï¼š<a href=\"https://android.googlesource.com/platform/frameworks/webview/+/4dcabae/chromium/java/com/android/webview/chromium/WebViewChromium.java\" target=\"_blank\" rel=\"noopener\">WebViewChromium.java</a></p>\n<p>WebViewChromiumç±»å®ç°äº†WebViewä¸­è¢«ä»£ç†çš„å…¨éƒ¨æ–¹æ³•ï¼Œç¯‡å¹…æ‰€é™ï¼Œæˆ‘ä»¬ä¸é€ä¸€è¿›è¡Œåˆ†æï¼Œåªè¿½è¸ªæˆ‘ä»¬å…³æ³¨çš„åŠ è½½é¡µé¢ï¼cacheç›¸å…³ï¼Œä¹Ÿå°±æ˜¯<code>loadUrl</code>å’Œ<code>clearCache</code>ä¸¤ä¸ªæ–¹æ³•ã€‚</p>\n<h3 id=\"loadUrl\"><a href=\"#loadUrl\" class=\"headerlink\" title=\"loadUrl\"></a>loadUrl</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">loadUrl</span><span class=\"params\">(String url)</span> </span>&#123;</span><br><span class=\"line\">    loadUrl(url, <span class=\"keyword\">null</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">loadUrl</span><span class=\"params\">(String url, Map&lt;String, String&gt; additionalHttpHeaders)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// <span class=\"doctag\">TODO:</span> We may actually want to do some sanity checks here (like filter about://chrome).</span></span><br><span class=\"line\">    LoadUrlParams params = <span class=\"keyword\">new</span> LoadUrlParams(url);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (additionalHttpHeaders != <span class=\"keyword\">null</span>) params.setExtraHeaders(additionalHttpHeaders);</span><br><span class=\"line\">    mAwContents.loadUrl(params);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬é€šå¸¸æ‰€ç”¨çš„<code>loadUrl(&quot;http://www.foo.com&quot;)</code>ï¼Œä¼šèµ°åˆ°<code>loadUrl(String url, Map&lt;String, String&gt; additionalHttpHeaders)</code>è¿™ä¸ªæ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°é¦–å…ˆæŠŠurlæ‹¼è£…æˆäº†ä¸€ä¸ª<code>LoadUrlParams</code>ï¼Œé‚£ä¹ˆè¿™ä¸ª<code>LoadUrlParams</code>æ˜¯ç”¨æ¥åšä»€ä¹ˆçš„å‘¢ï¼Ÿ</p>\n<p><strong>LoadUrlParams.java</strong><br><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Holds parameters for ContentViewCore.LoadUrl. Parameters should match</span></span><br><span class=\"line\"><span class=\"comment\"> * counterparts in NavigationController::LoadURLParams, including default</span></span><br><span class=\"line\"><span class=\"comment\"> * values.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"meta\">@JNINamespace</span>(<span class=\"string\">\"content\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">LoadUrlParams</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Should match NavigationController::LoadUrlType exactly. See comments</span></span><br><span class=\"line\">    <span class=\"comment\">// there for proper usage. Values are initialized in initializeConstants.</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> LOAD_TYPE_DEFAULT;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> LOAD_TYPE_BROWSER_INITIATED_HTTP_POST;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> LOAD_TYPE_DATA;</span><br><span class=\"line\">    <span class=\"comment\">// Should match NavigationController::UserAgentOverrideOption exactly.</span></span><br><span class=\"line\">    <span class=\"comment\">// See comments there for proper usage. Values are initialized in</span></span><br><span class=\"line\">    <span class=\"comment\">// initializeConstants.</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> UA_OVERRIDE_INHERIT;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> UA_OVERRIDE_FALSE;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> UA_OVERRIDE_TRUE;</span><br><span class=\"line\">    <span class=\"comment\">// Fields with counterparts in NavigationController::LoadURLParams.</span></span><br><span class=\"line\">    <span class=\"comment\">// Package private so that ContentViewCore.loadUrl can pass them down to</span></span><br><span class=\"line\">    <span class=\"comment\">// native code. Should not be accessed directly anywhere else outside of</span></span><br><span class=\"line\">    <span class=\"comment\">// this class.</span></span><br><span class=\"line\">    <span class=\"keyword\">final</span> String mUrl;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> mLoadUrlType;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> mTransitionType;</span><br><span class=\"line\">    <span class=\"keyword\">int</span> mUaOverrideOption;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Map&lt;String, String&gt; mExtraHeaders;</span><br><span class=\"line\">    <span class=\"keyword\">byte</span>[] mPostData;</span><br><span class=\"line\">    String mBaseUrlForDataUrl;</span><br><span class=\"line\">    String mVirtualUrlForDataUrl;</span><br><span class=\"line\">    <span class=\"keyword\">boolean</span> mCanLoadLocalResources;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">LoadUrlParams</span><span class=\"params\">(String url)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Check initializeConstants was called.</span></span><br><span class=\"line\">        <span class=\"keyword\">assert</span> LOAD_TYPE_DEFAULT != LOAD_TYPE_BROWSER_INITIATED_HTTP_POST;</span><br><span class=\"line\">        mUrl = url;</span><br><span class=\"line\">        mLoadUrlType = LOAD_TYPE_DEFAULT;</span><br><span class=\"line\">        mTransitionType = PageTransitionTypes.PAGE_TRANSITION_LINK;</span><br><span class=\"line\">        mUaOverrideOption = UA_OVERRIDE_INHERIT;</span><br><span class=\"line\">        mPostData = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        mBaseUrlForDataUrl = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        mVirtualUrlForDataUrl = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// ä»¥ä¸‹ç•¥</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></p>\n<p>ä¸€ä¸ªURLç«Ÿç„¶å¯ä»¥è§£æå‡ºè¿™ä¹ˆå¤šä¸œè¥¿æ¥ï¼Œé€ä¸ªçœ‹çœ‹è¿™äº›å˜é‡çš„å«ä¹‰ï¼šï¼ˆå‚è€ƒ<a href=\"https://chromium.googlesource.com/chromium/src.git/+/lkcr/content/public/browser/navigation_controller.h\" target=\"_blank\" rel=\"noopener\">navigation_controller.h</a>ï¼‰</p>\n<ul>\n<li>mUrlï¼šæœ€åŸå§‹çš„URL</li>\n<li>mLoadUrlTypeï¼šåŠ è½½ç±»å‹ï¼Œæœ‰å¦‚ä¸‹ä¸‰ç§<ol>\n<li>LOAD_TYPE_DEFAULTï¼šé»˜è®¤ç±»å‹ï¼Œä»¥ä¸‹ä¸¤ç§ä»¥å¤–çš„ä»»æ„ç±»å‹ã€‚</li>\n<li>LOAD_TYPE_BROWSER_INITIATED_HTTP_POSTï¼šPOSTè¯·æ±‚éœ€è¦è®¾ç½®æ­¤ç±»å‹ã€‚</li>\n<li>LOAD_TYPE_DATAï¼šä½¿ç”¨Base64ç¼–ç çš„å›¾ç‰‡ç±»å‹ï¼Œé€šè¿‡Base64ç¼–ç å›¾ç‰‡èƒ½å¤Ÿå‡å°‘ä¸€æ¬¡ç½‘ç»œèµ„æºåŠ è½½ã€‚(å¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¿™ä¸¤ä¸ªå·¥å…·ï¼ŒæŸ¥çœ‹å¦‚ä½•åœ¨å›¾ç‰‡ä¸Base64ç¼–ç ä¹‹é—´è¿›è¡Œè½¬æ¢ï¼š<a href=\"http://dataurl.net/#dataurlmaker\" target=\"_blank\" rel=\"noopener\">http://dataurl.net/#dataurlmaker</a> <a href=\"http://codebeautify.org/base64-to-image-converter\" target=\"_blank\" rel=\"noopener\">http://codebeautify.org/base64-to-image-converter</a>)</li>\n</ol>\n</li>\n<li>mTransitionTypeï¼šé¡µé¢å˜åŒ–çš„ç±»å‹ï¼ˆå®åœ¨æ‰¾ä¸å‡ºåˆé€‚çš„è¯è¯­æ¥æè¿°ï¼‰ï¼Œé»˜è®¤ä¸ºï¼Œè¯¦è§<a href=\"https://chromium.googlesource.com/chromium/src.git/+/lkcr/ui/base/page_transition_types.h\" target=\"_blank\" rel=\"noopener\">page_transition_types.h</a>ï¼Œä¸¾ä¾‹è¯´æ˜ï¼š<ol>\n<li>PAGE_TRANSITION_LINKï¼šé»˜è®¤å€¼ï¼Œç‚¹å‡»link</li>\n<li>PAGE_TRANSITION_TYPEDï¼šåœ¨åœ°å€æ è¾“å…¥link</li>\n<li>PAGE_TRANSITION_RELOADï¼šåˆ·æ–°é¡µé¢</li>\n<li>ç•¥</li>\n</ol>\n</li>\n<li>mUaOverrideOptionï¼šæ§åˆ¶httpä¸­çš„UserAgentï¼Œæœ‰ä¸‰ä¸ªå¯é€‰å€¼<ol>\n<li>UA_OVERRIDE_INHERITï¼šé»˜è®¤å€¼ï¼ŒUse the override value from the previous NavigationEntry in the NavigationController.</li>\n<li>UA_OVERRIDE_FALSEï¼šUse the default user agent</li>\n<li>UA_OVERRIDE_TRUEï¼šUse the user agent override, if itâ€™s available.</li>\n</ol>\n</li>\n<li>mPostDataï¼šPOSTè¯·æ±‚çš„data</li>\n<li>mBaseUrlForDataUrlï¼šä»…å¯¹<code>LOAD_TYPE_DATA</code>æœ‰æ•ˆï¼Œç”¨äºURLçš„ç›¸å¯¹è·¯å¾„ä»¥åŠJavaScriptè·¨åŸŸæ£€éªŒã€‚</li>\n<li>mVirtualUrlForDataUrlï¼šä»…å¯¹<code>LOAD_TYPE_DATA</code>æœ‰æ•ˆï¼Œæ˜¾ç¤ºåœ¨å¤–ç»™ç”¨æˆ·çœ‹çš„åœ°å€ã€‚</li>\n</ul>\n<p>åˆ†æå®Œäº†LoadUrlParamsï¼Œç»§ç»­è¿½æº¯WebViewChromiumä¸­çš„loadUrlæ–¹æ³•ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (additionalHttpHeaders != <span class=\"keyword\">null</span>) params.setExtraHeaders(additionalHttpHeaders);</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œè®¾ç½®çš„<code>ExtraHeaders</code>æ˜¯ä¸€ä¸ªMapï¼Œå…·ä½“å‚è§httpåè®®çš„headeréƒ¨åˆ†ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mAwContents.loadUrl(params);</span><br></pre></td></tr></table></figure>\n<p>æœ€ç»ˆäº¤ç»™<code>AwContent</code>å¯¹è±¡å¤„ç†ï¼Œå®Œæ•´æºç è§<a href=\"https://android.googlesource.com/platform/external/chromium_org/+/c5c1b6121eac447fb8d8691bd637e2b6b188fd75/android_webview/java/src/org/chromium/android_webview/AwContents.java\" target=\"_blank\" rel=\"noopener\">AwContents.java</a>ã€‚â€Awâ€æ˜¯â€Android WebViewâ€çš„ç¼©å†™ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Exposes the native AwContents class, and together these classes wrap the ContentViewCore</span></span><br><span class=\"line\"><span class=\"comment\"> * and Browser components that are required to implement Android WebView API. This is the</span></span><br><span class=\"line\"><span class=\"comment\"> * primary entry point for the WebViewProvider implementation; it holds a 1:1 object</span></span><br><span class=\"line\"><span class=\"comment\"> * relationship with application WebView instances.</span></span><br><span class=\"line\"><span class=\"comment\"> * (We define this class independent of the hidden WebViewProvider interfaces, to allow</span></span><br><span class=\"line\"><span class=\"comment\"> * continuous build &amp; test in the open source SDK-based tree).</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¿°æ³¨é‡Šä¸­æœ€é‡è¦çš„æ˜¯<code>This is the primary entry point for the WebViewProvider implementation; it holds a 1:1 object relationship with application WebView instances.</code>è¿™ä¸€å¥ï¼Œè¯´æ˜æ¯ä¸€ä¸ªWebViewç¤ºä¾‹ï¼Œéƒ½æœ‰ä¸€ä¸ªAwContentå¯¹è±¡å’Œå®ƒå¯¹åº”ã€‚åŒæ ·ï¼Œæˆ‘ä»¬åªå…³æ³¨<code>loadUrl</code>æ–¹æ³•ï¼Œè¿™é‡Œé€šè¿‡æˆ‘ä»¬ä¸Šä¸€æ­¥åˆ†æçš„<code>LoadUrlParams</code>å‚æ•°è¿›è¡ŒåŠ è½½ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Load url without fixing up the url string. Consumers of ContentView are responsible for</span></span><br><span class=\"line\"><span class=\"comment\">     * ensuring the URL passed in is properly formatted (i.e. the scheme has been added if left</span></span><br><span class=\"line\"><span class=\"comment\">     * off during user input).</span></span><br><span class=\"line\"><span class=\"comment\">     *</span></span><br><span class=\"line\"><span class=\"comment\">     * <span class=\"doctag\">@param</span> params Parameters for this load.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">loadUrl</span><span class=\"params\">(LoadUrlParams params)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (params.getLoadUrlType() == LoadUrlParams.LOAD_TYPE_DATA &amp;&amp;</span><br><span class=\"line\">                !params.isBaseUrlDataScheme()) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// This allows data URLs with a non-data base URL access to file:///android_asset/ and</span></span><br><span class=\"line\">            <span class=\"comment\">// file:///android_res/ URLs. If AwSettings.getAllowFileAccess permits, it will also</span></span><br><span class=\"line\">            <span class=\"comment\">// allow access to file:// URLs (subject to OS level permission checks).</span></span><br><span class=\"line\">            params.setCanLoadLocalResources(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// If we are reloading the same url, then set transition type as reload.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (params.getUrl() != <span class=\"keyword\">null</span> &amp;&amp;</span><br><span class=\"line\">                params.getUrl().equals(mContentViewCore.getUrl()) &amp;&amp;</span><br><span class=\"line\">                params.getTransitionType() == PageTransitionTypes.PAGE_TRANSITION_LINK) &#123;</span><br><span class=\"line\">            params.setTransitionType(PageTransitionTypes.PAGE_TRANSITION_RELOAD);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        params.setTransitionType(</span><br><span class=\"line\">                params.getTransitionType() | PageTransitionTypes.PAGE_TRANSITION_FROM_API);</span><br><span class=\"line\">        <span class=\"comment\">// For WebView, always use the user agent override, which is set</span></span><br><span class=\"line\">        <span class=\"comment\">// every time the user agent in AwSettings is modified.</span></span><br><span class=\"line\">        params.setOverrideUserAgent(LoadUrlParams.UA_OVERRIDE_TRUE);</span><br><span class=\"line\">        <span class=\"comment\">// We don't pass extra headers to the content layer, as WebViewClassic</span></span><br><span class=\"line\">        <span class=\"comment\">// was adding them in a very narrow set of conditions. See http://crbug.com/306873</span></span><br><span class=\"line\">        <span class=\"comment\">// However, if the embedder is attempting to inject a Referer header for their</span></span><br><span class=\"line\">        <span class=\"comment\">// loadUrl call, then we set that separately and remove it from the extra headers map/</span></span><br><span class=\"line\">        <span class=\"keyword\">final</span> String REFERER = <span class=\"string\">\"referer\"</span>;</span><br><span class=\"line\">        Map&lt;String, String&gt; extraHeaders = params.getExtraHeaders();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (extraHeaders != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">for</span> (String header : extraHeaders.keySet()) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (REFERER.equals(header.toLowerCase(Locale.US))) &#123;</span><br><span class=\"line\">                    params.setReferrer(<span class=\"keyword\">new</span> Referrer(extraHeaders.remove(header), <span class=\"number\">1</span>));</span><br><span class=\"line\">                    params.setExtraHeaders(extraHeaders);</span><br><span class=\"line\">                    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mNativeAwContents != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            nativeSetExtraHeadersForUrl(</span><br><span class=\"line\">                    mNativeAwContents, params.getUrl(), params.getExtraHttpRequestHeadersString());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        params.setExtraHeaders(<span class=\"keyword\">new</span> HashMap&lt;String, String&gt;());</span><br><span class=\"line\">        mContentViewCore.loadUrl(params);</span><br><span class=\"line\">        <span class=\"comment\">// The behavior of WebViewClassic uses the populateVisitedLinks callback in WebKit.</span></span><br><span class=\"line\">        <span class=\"comment\">// Chromium does not use this use code path and the best emulation of this behavior to call</span></span><br><span class=\"line\">        <span class=\"comment\">// request visited links once on the first URL load of the WebView.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!mHasRequestedVisitedHistoryFromClient) &#123;</span><br><span class=\"line\">            mHasRequestedVisitedHistoryFromClient = <span class=\"keyword\">true</span>;</span><br><span class=\"line\">            requestVisitedHistoryFromClient();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (params.getLoadUrlType() == LoadUrlParams.LOAD_TYPE_DATA &amp;&amp;</span><br><span class=\"line\">                params.getBaseUrl() != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// Data loads with a base url will be resolved in Blink, and not cause an onPageStarted</span></span><br><span class=\"line\">            <span class=\"comment\">// event to be sent. Sending the callback directly from here.</span></span><br><span class=\"line\">            mContentsClient.getCallbackHelper().postOnPageStarted(params.getBaseUrl());</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br></pre></td></tr></table></figure>\n<p>è®¾ç½®åŠ è½½æœ¬åœ°æ–‡ä»¶</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (params.getLoadUrlType() == LoadUrlParams.LOAD_TYPE_DATA &amp;&amp;</span><br><span class=\"line\">        !params.isBaseUrlDataScheme()) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// This allows data URLs with a non-data base URL access to file:///android_asset/ and</span></span><br><span class=\"line\">    <span class=\"comment\">// file:///android_res/ URLs. If AwSettings.getAllowFileAccess permits, it will also</span></span><br><span class=\"line\">    <span class=\"comment\">// allow access to file:// URLs (subject to OS level permission checks).</span></span><br><span class=\"line\">    params.setCanLoadLocalResources(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>é‡è®¾transitionType</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// If we are reloading the same url, then set transition type as reload.</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> (params.getUrl() != <span class=\"keyword\">null</span> &amp;&amp;</span><br><span class=\"line\">        params.getUrl().equals(mContentViewCore.getUrl()) &amp;&amp;</span><br><span class=\"line\">        params.getTransitionType() == PageTransitionTypes.PAGE_TRANSITION_LINK) &#123;</span><br><span class=\"line\">    params.setTransitionType(PageTransitionTypes.PAGE_TRANSITION_RELOAD);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">params.setTransitionType(</span><br><span class=\"line\">        params.getTransitionType() | PageTransitionTypes.PAGE_TRANSITION_FROM_API);</span><br></pre></td></tr></table></figure>\n<p>è®¾ç½®UAä¸ºoverride</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// For WebView, always use the user agent override, which is set</span></span><br><span class=\"line\"><span class=\"comment\">// every time the user agent in AwSettings is modified.</span></span><br><span class=\"line\">params.setOverrideUserAgent(LoadUrlParams.UA_OVERRIDE_TRUE);</span><br></pre></td></tr></table></figure>\n<p>æŠŠExtraHeadersä¸­çš„refererå±æ€§æå–å‡ºæ¥å•ç‹¬è®¾ç½®ï¼Œå¹¶å°†å…¶ä»ExtraHeadersä¸­åˆ é™¤ï¼Œrefererå±æ€§ç”¨äºå£°æ˜å½“å‰é¡µé¢æ˜¯ä»å“ªä¸ªé¡µé¢è·³è½¬æ¥çš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// We don't pass extra headers to the content layer, as WebViewClassic</span></span><br><span class=\"line\"><span class=\"comment\">// was adding them in a very narrow set of conditions. See http://crbug.com/306873</span></span><br><span class=\"line\"><span class=\"comment\">// However, if the embedder is attempting to inject a Referer header for their</span></span><br><span class=\"line\"><span class=\"comment\">// loadUrl call, then we set that separately and remove it from the extra headers map/</span></span><br><span class=\"line\"><span class=\"keyword\">final</span> String REFERER = <span class=\"string\">\"referer\"</span>;</span><br><span class=\"line\">Map&lt;String, String&gt; extraHeaders = params.getExtraHeaders();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (extraHeaders != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String header : extraHeaders.keySet()) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (REFERER.equals(header.toLowerCase(Locale.US))) &#123;</span><br><span class=\"line\">            params.setReferrer(<span class=\"keyword\">new</span> Referrer(extraHeaders.remove(header), <span class=\"number\">1</span>));</span><br><span class=\"line\">            params.setExtraHeaders(extraHeaders);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç„¶åå¯¹äºå‰©ä¸‹çš„å±æ€§ï¼Œå•ç‹¬è®¾ç½®ï¼Œæœ€ç»ˆæ¸…æ¥šExtraHeaders</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (mNativeAwContents != <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">    nativeSetExtraHeadersForUrl(</span><br><span class=\"line\">            mNativeAwContents, params.getUrl(), params.getExtraHttpRequestHeadersString());</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">params.setExtraHeaders(<span class=\"keyword\">new</span> HashMap&lt;String, String&gt;());</span><br></pre></td></tr></table></figure>\n<p>å¯¹paramsè¿›è¡Œè¿‡ä¸Šè¿°äºŒæ¬¡åŠ å·¥åï¼Œè°ƒç”¨mContentViewCoreçš„loadUrlæ–¹æ³•</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mContentViewCore.loadUrl(params);</span><br></pre></td></tr></table></figure>\n<p>ç»§ç»­è¿½æº¯è‡³<a href=\"https://chromium.googlesource.com/chromium/src/+/4907c84d52411cdc8dd78b613eeeb5bbad5ad0ab/content/public/android/java/src/org/chromium/content/browser/ContentViewCore.java\" target=\"_blank\" rel=\"noopener\">ContentViewCore.java</a>ï¼Œä½äº<code>org.chromium.content.browser</code>åŒ…ä¸­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Load url without fixing up the url string. Consumers of ContentView are responsible for</span></span><br><span class=\"line\"><span class=\"comment\"> * ensuring the URL passed in is properly formatted (i.e. the scheme has been added if left</span></span><br><span class=\"line\"><span class=\"comment\"> * off during user input).</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> pararms Parameters for this load.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">loadUrl</span><span class=\"params\">(LoadUrlParams params)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (mNativeContentViewCore == <span class=\"number\">0</span>) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (isPersonalityView()) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// For WebView, always use the user agent override, which is set</span></span><br><span class=\"line\">        <span class=\"comment\">// every time the user agent in ContentSettings is modified.</span></span><br><span class=\"line\">        params.setOverrideUserAgent(LoadUrlParams.UA_OVERRIDE_TRUE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    nativeLoadUrl(mNativeContentViewCore,</span><br><span class=\"line\">            params.mUrl,</span><br><span class=\"line\">            params.mLoadUrlType,</span><br><span class=\"line\">            params.mTransitionType,</span><br><span class=\"line\">            params.mUaOverrideOption,</span><br><span class=\"line\">            params.getExtraHeadersString(),</span><br><span class=\"line\">            params.mPostData,</span><br><span class=\"line\">            params.mBaseUrlForDataUrl,</span><br><span class=\"line\">            params.mVirtualUrlForDataUrl,</span><br><span class=\"line\">            params.mCanLoadLocalResources);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œè°ƒç”¨äº†nativeLoadUrlæ–¹æ³•ï¼Œä¼ å…¥çš„å‚æ•°æˆ‘ä»¬ä¹‹å‰éƒ½å·²ç»åˆ†æè¿‡å…¶å«ä¹‰ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°<code>mNativeContentViewCore</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘<code>ContentViewCoreImpl</code>çš„æŒ‡é’ˆåœ°å€ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// Native pointer to C++ ContentViewCoreImpl object which will be set by nativeInit().</span></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">int</span> mNativeContentViewCore = <span class=\"number\">0</span>;</span><br></pre></td></tr></table></figure>\n<p>æ¥ä¸‹æ¥å°±è¦æ·±å…¥åˆ°cppæ–‡ä»¶ä¸­äº†ï¼Œ<a href=\"https://android.googlesource.com/platform/external/chromium_org/+/dc0e1d3/content/browser/android/content_view_core_impl.cc\" target=\"_blank\" rel=\"noopener\">content_view_core_impl.cc</a>ã€‚æ³¨æ„ï¼å¯èƒ½æ˜¯ç‰ˆæœ¬çš„åŸå› ï¼Œè¿™é‡Œçš„LoadUrlæ–¹æ³•å¤šå‡ºäº†ç¬¬ä¸€ä¸ªå‚æ•°<code>JNIEnv* env</code>ï¼Œé€šè¿‡å¯¹æ¯”å¯ä»¥å‘ç°ï¼Œå…¶å®ƒçš„å‚æ•°æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> ContentViewCoreImpl::LoadUrl(</span><br><span class=\"line\">    JNIEnv* env, jobject obj,</span><br><span class=\"line\">    jstring url,</span><br><span class=\"line\">    jint load_url_type,</span><br><span class=\"line\">    jint transition_type,</span><br><span class=\"line\">    jint ua_override_option,</span><br><span class=\"line\">    jstring extra_headers,</span><br><span class=\"line\">    jbyteArray post_data,</span><br><span class=\"line\">    jstring base_url_for_data_url,</span><br><span class=\"line\">    jstring virtual_url_for_data_url,</span><br><span class=\"line\">    jboolean can_load_local_resources) &#123;</span><br><span class=\"line\">  DCHECK(url);</span><br><span class=\"line\">  NavigationController::<span class=\"function\">LoadURLParams <span class=\"title\">params</span><span class=\"params\">(</span></span></span><br><span class=\"line\">      GURL(ConvertJavaStringToUTF8(env, url)));</span><br><span class=\"line\">  params.load_type = <span class=\"keyword\">static_cast</span>&lt;NavigationController::LoadURLType&gt;(</span><br><span class=\"line\">      load_url_type);</span><br><span class=\"line\">  params.transition_type = PageTransitionFromInt(transition_type);</span><br><span class=\"line\">  params.override_user_agent =</span><br><span class=\"line\">      <span class=\"keyword\">static_cast</span>&lt;NavigationController::UserAgentOverrideOption&gt;(</span><br><span class=\"line\">          ua_override_option);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (extra_headers)</span><br><span class=\"line\">    params.extra_headers = ConvertJavaStringToUTF8(env, extra_headers);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (post_data) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">std</span>::<span class=\"built_in\">vector</span>&lt;uint8&gt; http_body_vector;</span><br><span class=\"line\">    base::android::JavaByteArrayToByteVector(env, post_data, &amp;http_body_vector);</span><br><span class=\"line\">    params.browser_initiated_post_data =</span><br><span class=\"line\">        base::RefCountedBytes::TakeVector(&amp;http_body_vector);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (base_url_for_data_url) &#123;</span><br><span class=\"line\">    params.base_url_for_data_url =</span><br><span class=\"line\">        GURL(ConvertJavaStringToUTF8(env, base_url_for_data_url));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (virtual_url_for_data_url) &#123;</span><br><span class=\"line\">    params.virtual_url_for_data_url =</span><br><span class=\"line\">        GURL(ConvertJavaStringToUTF8(env, virtual_url_for_data_url));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  params.can_load_local_resources = can_load_local_resources;</span><br><span class=\"line\">  LoadUrl(params);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>GURLæ˜¯ä¸€ä¸ªå®ï¼Œè™½ç„¶ä¸äº†è§£å®ƒå…·ä½“åšäº†ä»€ä¹ˆï¼Œä½†æ˜¯æ ¹æ®ä¸Šä¸‹æ–‡å¯ä»¥çŒœæµ‹è¿™é‡Œç”Ÿæˆäº†ä¸€ä¸ª<code>NavigationController::LoadURLParams</code>å¯¹è±¡</p>\n<figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">NavigationController::<span class=\"function\">LoadURLParams <span class=\"title\">params</span><span class=\"params\">(</span></span></span><br><span class=\"line\">    GURL(ConvertJavaStringToUTF8(env, url)));</span><br></pre></td></tr></table></figure>\n<p>éšåå¯¹å‡ ä¸ªå‚æ•°è¿›è¡Œç±»å‹è½¬æ¢ï¼ŒæŠŠå®ƒä»¬æ‹¼å…¥paramsä¸­ï¼Œæœ€åè°ƒç”¨<code>LoadUrl(params)</code>æ–¹æ³•ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> ContentViewCoreImpl::LoadUrl(</span><br><span class=\"line\">    NavigationController::LoadURLParams&amp; params) &#123;</span><br><span class=\"line\">  GetWebContents()-&gt;GetController().LoadURLWithParams(params);</span><br><span class=\"line\">  UpdateTabCrashedFlag();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è™½ç„¶è‡ªå·±å¯¹Cè¯­è¨€ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œä½†åœ¨è¿™é‡Œä¹Ÿå¯ä»¥å‘ç°ï¼Œæ˜¯æŠŠä¸Šä¸€æ­¥æ‹¼è£…æˆçš„paramså‚æ•°é›†åˆä¼ é€’ç»™äº†æŸä¸ªControllerå¯¹è±¡ã€‚é‚£ä¹ˆåˆ°åº•æ˜¯å“ªä¸€ä¸ªControllerå‘¢ï¼Ÿè·Ÿç€ä»£ç èµ°ï½</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">WebContents* ContentViewCoreImpl::GetWebContents() <span class=\"keyword\">const</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> web_contents_;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œè¿”å›æˆå‘˜å˜é‡<code>web_contents_</code>ï¼Œè€ŒControllerå°±åœ¨å®ƒå†…éƒ¨</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> ContentViewCoreImpl::InitWebContents() &#123;</span><br><span class=\"line\">  DCHECK(web_contents_);</span><br><span class=\"line\">  notification_registrar_.Add(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>, NOTIFICATION_RENDER_VIEW_HOST_CHANGED,</span><br><span class=\"line\">      Source&lt;NavigationController&gt;(&amp;web_contents_-&gt;GetController()));</span><br><span class=\"line\">  notification_registrar_.Add(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>, NOTIFICATION_RENDERER_PROCESS_CREATED,</span><br><span class=\"line\">      content::NotificationService::AllBrowserContextsAndSources());</span><br><span class=\"line\">  notification_registrar_.Add(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>, NOTIFICATION_WEB_CONTENTS_CONNECTED,</span><br><span class=\"line\">      Source&lt;WebContents&gt;(web_contents_));</span><br><span class=\"line\">  notification_registrar_.Add(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>, NOTIFICATION_WEB_CONTENTS_SWAPPED,</span><br><span class=\"line\">      Source&lt;WebContents&gt;(web_contents_));</span><br><span class=\"line\">  <span class=\"keyword\">static_cast</span>&lt;WebContentsViewAndroid*&gt;(web_contents_-&gt;GetView())-&gt;</span><br><span class=\"line\">      SetContentViewCore(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">  DCHECK(!web_contents_-&gt;GetUserData(kContentViewUserDataKey));</span><br><span class=\"line\">  web_contents_-&gt;SetUserData(kContentViewUserDataKey,</span><br><span class=\"line\">                             <span class=\"keyword\">new</span> ContentViewUserData(<span class=\"keyword\">this</span>));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ‰¾åˆ°äº†ï¼Œæ˜¯NavigationControllerç±»å‹ï¼Œæºç è§<a href=\"https://chromium.googlesource.com/dart/dartium/src/+/releases/1650/content/browser/web_contents/navigation_controller_impl.cc\" target=\"_blank\" rel=\"noopener\">navigation_controller_impl.cc</a>ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> NavigationControllerImpl::LoadURLWithParams(<span class=\"keyword\">const</span> LoadURLParams&amp; params) &#123;</span><br><span class=\"line\">  TRACE_EVENT0(<span class=\"string\">\"browser\"</span>, <span class=\"string\">\"NavigationControllerImpl::LoadURLWithParams\"</span>);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (HandleDebugURL(params.url, params.transition_type))</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  <span class=\"comment\">// Checks based on params.load_type.</span></span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (params.load_type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> LOAD_TYPE_DEFAULT:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> LOAD_TYPE_BROWSER_INITIATED_HTTP_POST:</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!params.url.SchemeIs(kHttpScheme) &amp;&amp;</span><br><span class=\"line\">          !params.url.SchemeIs(kHttpsScheme)) &#123;</span><br><span class=\"line\">        NOTREACHED() &lt;&lt; <span class=\"string\">\"Http post load must use http(s) scheme.\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> LOAD_TYPE_DATA:</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!params.url.SchemeIs(chrome::kDataScheme)) &#123;</span><br><span class=\"line\">        NOTREACHED() &lt;&lt; <span class=\"string\">\"Data load must use data scheme.\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      NOTREACHED();</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// The user initiated a load, we don't need to reload anymore.</span></span><br><span class=\"line\">  needs_reload_ = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">bool</span> override = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (params.override_user_agent) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> UA_OVERRIDE_INHERIT:</span><br><span class=\"line\">      override = ShouldKeepOverride(GetLastCommittedEntry());</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> UA_OVERRIDE_TRUE:</span><br><span class=\"line\">      override = <span class=\"literal\">true</span>;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> UA_OVERRIDE_FALSE:</span><br><span class=\"line\">      override = <span class=\"literal\">false</span>;</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      NOTREACHED();</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  NavigationEntryImpl* entry = NavigationEntryImpl::FromNavigationEntry(</span><br><span class=\"line\">      CreateNavigationEntry(</span><br><span class=\"line\">          params.url,</span><br><span class=\"line\">          params.referrer,</span><br><span class=\"line\">          params.transition_type,</span><br><span class=\"line\">          params.is_renderer_initiated,</span><br><span class=\"line\">          params.extra_headers,</span><br><span class=\"line\">          browser_context_));</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (params.should_replace_current_entry)</span><br><span class=\"line\">    entry-&gt;set_should_replace_entry(<span class=\"literal\">true</span>);</span><br><span class=\"line\">  entry-&gt;set_should_clear_history_list(params.should_clear_history_list);</span><br><span class=\"line\">  entry-&gt;SetIsOverridingUserAgent(override);</span><br><span class=\"line\">  entry-&gt;set_transferred_global_request_id(</span><br><span class=\"line\">      params.transferred_global_request_id);</span><br><span class=\"line\">  entry-&gt;SetFrameToNavigate(params.frame_name);</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (params.load_type) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> LOAD_TYPE_DEFAULT:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> LOAD_TYPE_BROWSER_INITIATED_HTTP_POST:</span><br><span class=\"line\">      entry-&gt;SetHasPostData(<span class=\"literal\">true</span>);</span><br><span class=\"line\">      entry-&gt;SetBrowserInitiatedPostData(</span><br><span class=\"line\">          params.browser_initiated_post_data.get());</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> LOAD_TYPE_DATA:</span><br><span class=\"line\">      entry-&gt;SetBaseURLForDataURL(params.base_url_for_data_url);</span><br><span class=\"line\">      entry-&gt;SetVirtualURL(params.virtual_url_for_data_url);</span><br><span class=\"line\">      entry-&gt;SetCanLoadLocalResources(params.can_load_local_resources);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      NOTREACHED();</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  LoadEntry(entry);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™é‡Œåšçš„äº‹æƒ…ä¸å‰é¢ç±»ä¼¼ï¼Œå–å‡ºå‚æ•°å†æ¬¡æ‹¼è£…æˆ<code>NavigationEntryImpl* entry</code>ï¼Œç„¶åè°ƒç”¨LoadEntryã€‚LoadEntryè¿™é‡Œçš„æ³¨é‡Šè®²è§£çš„å¾ˆæ¸…æ¥šï¼Œå½“æˆ‘ä»¬è¿›å…¥æ–°é¡µé¢æ—¶ï¼Œæˆ‘ä»¬å¹¶ä¸æ¸…æ¥šæ˜¯ä¸æ˜¯è¦ç»ˆæ­¢ä¸Šä¸€ä¸ªé¡µé¢ï¼Œå› ä¸ºæ–°é¡µé¢æœ‰å¯èƒ½åªæ˜¯ä¸€ä¸ªä¸‹è½½æˆ–è€…é‚®ä»¶ã€‚ç”±äºæˆ‘ä»¬çš„urlç­‰ä¿¡æ¯éƒ½ä¿å­˜åœ¨entryä¸­ï¼Œç»§ç»­è¿½æº¯ SetPendingEntry(entry) æ–¹æ³•ã€‚</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> NavigationControllerImpl::LoadEntry(NavigationEntryImpl* entry) &#123;</span><br><span class=\"line\">  <span class=\"comment\">// When navigating to a new page, we don't know for sure if we will actually</span></span><br><span class=\"line\">  <span class=\"comment\">// end up leaving the current page.  The new page load could for example</span></span><br><span class=\"line\">  <span class=\"comment\">// result in a download or a 'no content' response (e.g., a mailto: URL).</span></span><br><span class=\"line\">  SetPendingEntry(entry);</span><br><span class=\"line\">  NavigateToPendingEntry(NO_RELOAD);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> NavigationControllerImpl::SetPendingEntry(NavigationEntryImpl* entry) &#123;</span><br><span class=\"line\">  DiscardNonCommittedEntriesInternal();</span><br><span class=\"line\">  pending_entry_ = entry;</span><br><span class=\"line\">  NotificationService::current()-&gt;Notify(</span><br><span class=\"line\">      NOTIFICATION_NAV_ENTRY_PENDING,</span><br><span class=\"line\">      Source&lt;NavigationController&gt;(<span class=\"keyword\">this</span>),</span><br><span class=\"line\">      Details&lt;NavigationEntry&gt;(entry));</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œå…ˆæ˜¯ç»ˆæ­¢äº†å°šæœªæäº¤å¤„ç†çš„Entryï¼Œç„¶åå°†æ¬²è®¿é—®çš„entryä¿å­˜åœ¨<code>pending_entry_</code>å˜é‡ï¼Œæœ€åé€šè¿‡<code>NotificationService::current()-&gt;Notify</code>ï¼ŒæŠŠEntryæ’å…¥ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¯ä»¥åœ¨<a href=\"https://chromium.googlesource.com/dart/dartium/src/+/releases/1650/content/browser/notification_service_impl.cc\" target=\"_blank\" rel=\"noopener\">notification_service_impl.cc</a>çš„æºç ä¸­çœ‹åˆ°ï¼Œæ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯åï¼Œä¼šé€šçŸ¥æ‰€æœ‰çš„Observer</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">void</span> NotificationServiceImpl::Notify(<span class=\"keyword\">int</span> type,</span><br><span class=\"line\">                                     <span class=\"keyword\">const</span> NotificationSource&amp; source,</span><br><span class=\"line\">                                     <span class=\"keyword\">const</span> NotificationDetails&amp; details) &#123;</span><br><span class=\"line\">  DCHECK_GT(type, NOTIFICATION_ALL) &lt;&lt;</span><br><span class=\"line\">      <span class=\"string\">\"Allowed for observing, but not posting.\"</span>;</span><br><span class=\"line\">  <span class=\"comment\">// There's no particular reason for the order in which the different</span></span><br><span class=\"line\">  <span class=\"comment\">// classes of observers get notified here.</span></span><br><span class=\"line\">  <span class=\"comment\">// Notify observers of all types and all sources</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (HasKey(observers_[NOTIFICATION_ALL], AllSources()) &amp;&amp;</span><br><span class=\"line\">      source != AllSources()) &#123;</span><br><span class=\"line\">    FOR_EACH_OBSERVER(NotificationObserver,</span><br><span class=\"line\">                      *observers_[NOTIFICATION_ALL][AllSources().map_key()],</span><br><span class=\"line\">                      Observe(type, source, details));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// Notify observers of all types and the given source</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (HasKey(observers_[NOTIFICATION_ALL], source)) &#123;</span><br><span class=\"line\">    FOR_EACH_OBSERVER(NotificationObserver,</span><br><span class=\"line\">                      *observers_[NOTIFICATION_ALL][source.map_key()],</span><br><span class=\"line\">                      Observe(type, source, details));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// Notify observers of the given type and all sources</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (HasKey(observers_[type], AllSources()) &amp;&amp;</span><br><span class=\"line\">      source != AllSources()) &#123;</span><br><span class=\"line\">    FOR_EACH_OBSERVER(NotificationObserver,</span><br><span class=\"line\">                      *observers_[type][AllSources().map_key()],</span><br><span class=\"line\">                      Observe(type, source, details));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// Notify observers of the given type and the given source</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (HasKey(observers_[type], source)) &#123;</span><br><span class=\"line\">    FOR_EACH_OBSERVER(NotificationObserver,</span><br><span class=\"line\">                      *observers_[type][source.map_key()],</span><br><span class=\"line\">                      Observe(type, source, details));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æˆ‘ä»¬å¿…é¡»æ‰¾åˆ°æ˜¯å“ªä¸ªObserverå¤„ç†äº†åŠ è½½Entryçš„æ¶ˆæ¯ï¼Œå¯æ˜¯åˆ°è¿™é‡Œï¼Œçº¿ç´¢ä¼¼ä¹æ–­äº†ï¼Œæ€ä¹ˆæ‰èƒ½æ‰¾åˆ°å¯¹åº”çš„Observerå‘¢ï¼Ÿ</p>\n<blockquote>\n<p>å†…äº‹ä¸å†³é—®ç™¾åº¦ï¼Œå¤–äº‹ä¸å†³é—®è°·æ­Œã€‚</p>\n</blockquote>\n<p>åœ¨Googleçš„å¸®åŠ©ä¸‹ï¼Œæ‰¾åˆ°äº†è¿™ç¯‡æ–‡æ¡£<a href=\"https://www.chromium.org/developers/how-tos/getting-around-the-chrome-source-code\" target=\"_blank\" rel=\"noopener\">Getting Around the Chromium Source Code Directory Structure</a>ã€‚è¿™é‡Œä»‹ç»äº†æ•´ä¸ªChromiumçš„æ¶æ„ï¼Œé‡ç‚¹å…³æ³¨â€œNavigating from the URL barâ€ä¸€èŠ‚ã€‚</p>\n<h3 id=\"Navigating-from-the-URL-bar\"><a href=\"#Navigating-from-the-URL-bar\" class=\"headerlink\" title=\"Navigating from the URL bar\"></a>Navigating from the URL bar</h3><ol>\n<li>When the user types into or accepts an entry in the URL bar, the autocomplete edit box determines the final target URL and passes that to <code>AutocompleteEdit::OpenURL</code>. (This may not be exactly what the user typed - for example, an URL is generated in the case of a search query.)</li>\n<li>The navigation controller is instructed to navigate to the URL in <code>NavigationController::LoadURL</code>.</li>\n<li>The <code>NavigationController</code> calls <code>TabContents::Navigate</code> with the <code>NavigationEntry</code> it created to represent this particular page transition. It will create a new <code>RenderViewHost</code> if necessary, which will cause creation of a RenderView in the renderer process. A <code>RenderView</code> wonâ€™t exist if this is the first navigation, or if the renderer has crashed, so this will also recover from crashes.</li>\n<li><code>Navigate</code> forwards to <code>RenderViewHost::NavigateToEntry</code>. The <code>NavigationController</code>stores this navigation entry, but it is marked as â€œpendingâ€ because it doesnâ€™t know for sure if the transition will take place (maybe the host can not be resolved).</li>\n<li><code>RenderViewHost::NavigateToEntry</code> sends a <code>ViewMsg_Navigate</code> to the new <code>RenderView</code> in the renderer process.</li>\n<li>When told to navigate, <code>RenderView</code> may navigate, it may fail, or it may navigate somewhere else instead (for example, if the user clicks a link). <code>RenderViewHost</code> waits for a <code>ViewHostMsg_FrameNavigate</code> from the <code>RenderView</code>.</li>\n<li>When the load is â€œcommittedâ€ by WebKit (the server responded and is sending us data), the <code>RenderView</code> sends this message, which is handled in <code>RenderViewHost::OnMsgNavigate</code>.</li>\n<li>The <code>NavigationEntry</code> is updated with the information on the load. In the case of a link click, the browser has never seen this URL before. If the navigation was browser-initiated, as in the startup case, there may have been redirects that have changed the URL.</li>\n<li>The <code>NavigationController</code> updates its list of navigations to account for this new information.</li>\n</ol>\n<p>åœ¨<code>æ­¥éª¤3</code>ä¸­çœ‹åˆ°ï¼ŒNavigationControllerè°ƒç”¨äº†TabContents::Navigateæ¥å¤„ç†Entryï¼Œéšåå°±è¿›å…¥äº†æ¸²æŸ“ï¼ˆRenderï¼‰è¿‡ç¨‹ã€‚è€Œæˆ‘ä»¬æƒ³è¦è¿½è¸ªçš„ç¼“å­˜æ–‡ä»¶ç®¡ç†çš„ç–‘é—®ï¼Œè¿˜æ˜¯è¦æ·±å…¥åˆ°æ¸²æŸ“é˜¶æ®µæ‰èƒ½æœ‰ä¸ªç­”æ¡ˆã€‚</p>\n<p>æ›´å¤šåˆ†æï¼Œå°†åœ¨åç»­æ–‡ç« ä¸­ä¸€ä¸€é“å‡ºã€‚</p>\n<hr>\n","categories":[],"tags":["Android","æºç åˆ†æ"]},{"title":"Deploy Web Application In Tomcat","url":"https://lilei.pro/2016/09/09/Deploy-Web-Application-In-Tomcat/","content":"<blockquote>\n<p>åœ¨å¼€å‘CrashReporteré¡¹ç›®æ—¶é‡åˆ°çš„ä¸€äº›å‘</p>\n</blockquote>\n<a id=\"more\"></a>\n<h4 id=\"Tomcatå¯åŠ¨æ—¶å¡åœ¨â€Tomcat-error-deploying-web-application-directoryâ€\"><a href=\"#Tomcatå¯åŠ¨æ—¶å¡åœ¨â€Tomcat-error-deploying-web-application-directoryâ€\" class=\"headerlink\" title=\"Tomcatå¯åŠ¨æ—¶å¡åœ¨â€Tomcat: error deploying web application directoryâ€\"></a>Tomcatå¯åŠ¨æ—¶å¡åœ¨â€Tomcat: error deploying web application directoryâ€</h4><p>åŸå› æ˜¯Tomcat7/8éœ€è¦ä½¿ç”¨org.apache.catalina.util.SessionIdGeneratorBase.createSecureRandomæ¥äº§ç”Ÿå®‰å…¨éšæœºç±»SecureRandomçš„å®ä¾‹ä½œä¸ºä¼šè¯IDã€‚è€Œæˆ‘ä»¬çŸ¥é“ï¼Œä»»ä½•éšæœºæ•°å‘ç”Ÿå™¨éƒ½éœ€è¦ä¸€ä¸ªç§å­ï¼ŒLinuxä¸­çš„éšæœºæ•°ï¼Œå¯ä»¥ä»è¿™ä¸¤ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ä¸­äº§ç”Ÿ</p>\n<ul>\n<li>/dev/urandom</li>\n<li>/dev/random</li>\n</ul>\n<p>è¿™ä¸¤ä¸ªæ–‡ä»¶äº§ç”Ÿéšæœºæ•°çš„åŸç†ï¼Œæ˜¯åˆ©ç”¨ç³»ç»Ÿçš„ç†µæ± ï¼Œè®¡ç®—å‡ºå›ºå®šä¸€å®šæ•°é‡çš„éšæœºæ¯”ç‰¹ï¼Œç„¶åå°†è¿™äº›æ¯”ç‰¹ä½œä¸ºå­—èŠ‚æµè¿”å›ã€‚</p>\n<blockquote>\n<p>ç†µæ± å°±æ˜¯å½“å‰ç³»ç»Ÿçš„ç¯å¢ƒå™ªéŸ³ï¼Œç†µæŒ‡çš„æ˜¯ä¸€ä¸ªç³»ç»Ÿçš„æ··ä¹±ç¨‹åº¦ï¼Œç³»ç»Ÿå™ªéŸ³å¯ä»¥é€šè¿‡å¾ˆå¤šå‚æ•°æ¥è¯„ä¼°ï¼Œå¦‚å†…å­˜çš„ä½¿ç”¨ï¼Œæ–‡ä»¶çš„ä½¿ç”¨é‡ï¼Œä¸åŒç±»å‹çš„è¿›ç¨‹æ•°é‡ç­‰ç­‰ã€‚å¦‚æœå½“å‰ç¯å¢ƒå™ªéŸ³å˜åŒ–çš„ä¸æ˜¯å¾ˆå‰§çƒˆæˆ–è€…å½“å‰ç¯å¢ƒå™ªéŸ³å¾ˆå°ï¼Œæ¯”å¦‚åˆšå¼€æœºçš„æ—¶å€™ï¼Œè€Œå½“å‰éœ€è¦å¤§é‡çš„éšæœºæ¯”ç‰¹ï¼Œè¿™æ—¶äº§ç”Ÿçš„éšæœºæ•°çš„éšæœºæ•ˆæœå°±ä¸æ˜¯å¾ˆå¥½äº†ã€‚</p>\n</blockquote>\n<p>/dev/randomåœ¨ä¸èƒ½äº§ç”Ÿæ–°çš„éšæœºæ•°æ—¶ä¼šé˜»å¡ç¨‹åºï¼Œè€Œ/dev/urandomä¸ä¼šï¼Œå½“ç„¶äº§ç”Ÿçš„éšæœºæ•°æ•ˆæœå°±ä¸å¤ªå¥½äº†ï¼Œè¿™å¯¹åŠ å¯†è§£å¯†è¿™æ ·çš„åº”ç”¨æ¥è¯´å°±ä¸æ˜¯ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ã€‚/dev/randomä¼šé˜»å¡å½“å‰çš„ç¨‹åºï¼Œç›´åˆ°æ ¹æ®ç†µæ± äº§ç”Ÿæ–°çš„éšæœºå­—èŠ‚ä¹‹åæ‰è¿”å›ï¼Œæ‰€ä»¥ä½¿ç”¨/dev/randomæ¯”ä½¿ç”¨/dev/urandomäº§ç”Ÿå¤§é‡éšæœºæ•°çš„é€Ÿåº¦è¦æ…¢ã€‚</p>\n<p>è§£å†³åŠæ³•ï¼š</p>\n<ol>\n<li>åœ¨Tomcatç¯å¢ƒè§£å†³ï¼šå¯åŠ¨æ—¶åŠ å…¥å‚æ•°<code>-Djava.security.egd=file:/dev/urandom</code></li>\n<li>åœ¨JVMç¯å¢ƒè§£å†³ï¼šä¿®æ”¹<code>$JAVA_PATH/jre/lib/security/java.security</code>ä¸­çš„<code>securerandom.source=file:/dev/random</code>ä¸º<code>securerandom.source=file:/dev/urandom</code></li>\n</ol>\n<hr>\n<h4 id=\"crontab-é…ç½®\"><a href=\"#crontab-é…ç½®\" class=\"headerlink\" title=\"crontab é…ç½®\"></a>crontab é…ç½®</h4><p><code>crontab -e</code> ç¼–è¾‘å½“å‰ç”¨æˆ·çš„å®šæ—¶å‘½ä»¤<br><code>crontab -l</code> æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„å®šæ—¶å‘½ä»¤</p>\n<p>ä¸€æ¡å…¸å‹çš„å®šæ—¶ä»»åŠ¡</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">0 4 * * * /usr/bin/java -Xms256m -Xmx1024m -Duser.timezone=GMT+08  -jar /root/projects/crash-reporter/crash-reporter-0.1-SNAPSHOT-jar-with-dependencies.jar</span><br></pre></td></tr></table></figure>\n<p>åœ¨é…ç½®è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œç”±äºæ²¡æœ‰ç†è§£å®ƒæœ¬è´¨ä¸Šçš„åŸç†ï¼Œè‡ªå·±çŠ¯äº†ä¸€ä¸ªæ„šè ¢çš„é”™è¯¯ï¼ŒæŠŠæ—¶é—´å†™æˆäº†<code>* 4 * * *</code>ï¼Œå¯¼è‡´å‡Œæ™¨4ç‚¹å†…ï¼Œæ¯åˆ†é’Ÿå‘å‡ºä¸€ç¯‡é‚®ä»¶ï¼Œè¿˜æ˜¯å‘ç»™å…¨ç»„äººçš„â€¦â€¦</p>\n<p>é™„å›¾ä¸€å¼ ï¼Œcrontabçš„å‘½ä»¤é…ç½®</p>\n<p><img src=\"/img/160909_deploy_app_in_tomcat/crontab.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Tomcatå®¹å™¨æ—¶é—´\"><a href=\"#Tomcatå®¹å™¨æ—¶é—´\" class=\"headerlink\" title=\"Tomcatå®¹å™¨æ—¶é—´\"></a>Tomcatå®¹å™¨æ—¶é—´</h4><p>åœ¨Linuxç³»ç»Ÿé‡Œé€šè¿‡<code>date</code>å‘½ä»¤æŸ¥çœ‹ï¼Œæ—¶åŒºå·²ç»æ›´æ”¹ä¸ºåŒ—äº¬æ—¶é—´ã€‚ä½†æ˜¯å®é™…è¿è¡Œæ—¶ï¼Œå‘ç°ä»£ç é‡Œé€šè¿‡<code>new Date()</code>åˆ›å»ºçš„æ—¶é—´ï¼Œformatåæ‰“å°å‡ºæ¥å±…ç„¶æ˜¯æ ‡å‡†æ—¶é—´ï¼›åŒæ—¶ï¼Œlog4jè®°å½•çš„æ—¶é—´ä¹Ÿæœ‰ä¸€æ ·çš„é—®é¢˜ã€‚</p>\n<p>åŸå› åœ¨äºï¼ŒJVMçš„æ—¶é—´éœ€è¦åœ¨å¯åŠ¨æ—¶é…ç½®ï¼Œéœ€è¦åœ¨tomcatçš„å¯åŠ¨å‘½ä»¤ä¸­å¢åŠ å¦‚ä¸‹å‚æ•°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-Duser.timezone=GMT+08</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h4><ul>\n<li><a href=\"http://my.oschina.net/wangnian/blog/687914\" target=\"_blank\" rel=\"noopener\">Tomcatå¯åŠ¨æ—¶SecureRandomè¶…çº§æ…¢çš„é—®é¢˜</a></li>\n<li><a href=\"http://www.cnblogs.com/peida/archive/2013/01/08/2850483.html\" target=\"_blank\" rel=\"noopener\">æ¯å¤©ä¸€ä¸ªlinuxå‘½ä»¤ï¼ˆ50ï¼‰ï¼šcrontabå‘½ä»¤</a></li>\n</ul>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Backend"]},{"title":"Android ä¸­ View Visibility çš„å‘","url":"https://lilei.pro/2016/06/29/Android-View-Visibility/","content":"<blockquote>\n<p>å‰å‡ å¤©çˆ†å‡ºæ¥ä¸€ä¸ªçº¿ä¸Šbugï¼šå¤„äºâ€œå·²å”®å®Œâ€çŠ¶æ€çš„èœå“ï¼Œä¾ç„¶å¯ä»¥ç‚¹å‡»åŠ èœã€‚å¥½åœ¨æäº¤è®¢å•æ—¶æœ‰æ ¡éªŒï¼Œå¯¹äºè¿™ç§è®¢å•ä¼šç›´æ¥æ‰“å›ã€‚<br>ç©¶å…¶åŸå› ï¼Œæ˜¯åŠ å‡æ§ä»¶ä¸­çš„ä»£ç å‡ºäº†é—®é¢˜</p>\n</blockquote>\n<a id=\"more\"></a>\n<h3 id=\"é—®é¢˜å›é¡¾\"><a href=\"#é—®é¢˜å›é¡¾\" class=\"headerlink\" title=\"é—®é¢˜å›é¡¾\"></a>é—®é¢˜å›é¡¾</h3><p>åœ¨åŠ å‡æ§ä»¶ä¸­ï¼Œæä¾›äº†<code>enlargeEmptyAddBtnClickArea</code>æ–¹æ³•ï¼Œç”¨æ¥æ‰©å¤§ç¬¬ä¸€æ¬¡åŠ èœæŒ‰é’®çš„ç‚¹å‡»åŒºåŸŸï¼ˆPMæå‡ºçš„æ¸£æ¸£ï¼Œæ›´æ¸£æ¸£çš„æ˜¯UXå±…ç„¶é€šè¿‡äº†è¿™ä¸ªéœ€æ±‚ï¼‰ã€‚</p>\n<p><strong>Talk is cheap, read the code.</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * å°†åˆå§‹åŠ èœæŒ‰é’®ç‚¹å‡»çŸ©å½¢åŒºåŸŸå‘å¤–æ‰©å¤§</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> parentView åŒ…å«æ›´å¤§ç‚¹å‡»åŒºåŸŸçš„çˆ¶View</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param</span> unit æ‰©å¤§çš„dpå€¼</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">enlargeEmptyAddBtnClickArea</span><span class=\"params\">(<span class=\"keyword\">final</span> View parentView, <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> unit)</span> </span>&#123;</span><br><span class=\"line\">       parentView.post(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">           <span class=\"meta\">@Override</span></span><br><span class=\"line\">           <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">               <span class=\"keyword\">if</span> (emptyAddBtn.getVisibility() != VISIBLE) &#123;</span><br><span class=\"line\">                   <span class=\"keyword\">return</span>;</span><br><span class=\"line\">               &#125;</span><br><span class=\"line\">               checkContext();</span><br><span class=\"line\">               Context context = getContext();</span><br><span class=\"line\">               <span class=\"keyword\">int</span>[] emptyAddBtnCoord = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">               emptyAddBtn.getLocationOnScreen(emptyAddBtnCoord);</span><br><span class=\"line\">               <span class=\"keyword\">int</span>[] parentViewCoord = <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[<span class=\"number\">2</span>];</span><br><span class=\"line\">               parentView.getLocationOnScreen(parentViewCoord);</span><br><span class=\"line\">               <span class=\"keyword\">int</span>[] relativeCoord = &#123;emptyAddBtnCoord[<span class=\"number\">0</span>] - parentViewCoord[<span class=\"number\">0</span>], emptyAddBtnCoord[<span class=\"number\">1</span>] - parentViewCoord[<span class=\"number\">1</span>]&#125;;</span><br><span class=\"line\">               Rect delegateArea = <span class=\"keyword\">new</span> Rect(relativeCoord[<span class=\"number\">0</span>], relativeCoord[<span class=\"number\">1</span>], relativeCoord[<span class=\"number\">0</span>] + emptyAddBtn.getMeasuredWidth(), relativeCoord[<span class=\"number\">1</span>] + emptyAddBtn.getMeasuredHeight());</span><br><span class=\"line\">               <span class=\"keyword\">int</span> enlargeUnit = ViewUtils.dip2px(context, unit);</span><br><span class=\"line\">               delegateArea.left -= enlargeUnit;</span><br><span class=\"line\">               delegateArea.top -= enlargeUnit;</span><br><span class=\"line\">               delegateArea.right += enlargeUnit;</span><br><span class=\"line\">               delegateArea.bottom += enlargeUnit;</span><br><span class=\"line\">               CustomTouchDelegate touchDelegate = <span class=\"keyword\">new</span> CustomTouchDelegate(delegateArea, emptyAddBtn);</span><br><span class=\"line\">               parentView.setTouchDelegate(touchDelegate);</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;);</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™æ ·é€šè¿‡ç›´æ¥<code>operateBtn.enlargeEmptyAddBtnClickArea</code>å°±å¯ä»¥æ‰©å¤§ç‚¹å‡»åŒºåŸŸã€‚</p>\n<p>ä¹çœ‹èµ·æ¥æ²¡ä»€ä¹ˆé—®é¢˜å¯¹å§ï¼Ÿä»£ç ä¸­åŒæ ·è€ƒè™‘åˆ°äº†å¦‚æœ<code>åŠ èœæŒ‰é’®</code>å½“å‰ä¸å¯è§ï¼Œå°±ä¸ä¼šä¸»åŠ¨æ‰©å¤§å…¶åŒºåŸŸã€‚</p>\n<p>ä½†æ˜¯ä¸ºä»€ä¹ˆï¼Œè¿˜ä¼šå‡ºç°æ–‡ç« å¼€å¤´æåˆ°çš„â€œå·²å”®å®Œçš„èœå“ä»ç„¶å¯ä»¥æ·»åŠ è‡³è´­ç‰©è½¦â€é—®é¢˜ï¼ï¼ï¼</p>\n<hr>\n<h3 id=\"åŸå› åˆ†æ\"><a href=\"#åŸå› åˆ†æ\" class=\"headerlink\" title=\"åŸå› åˆ†æ\"></a>åŸå› åˆ†æ</h3><p>åœ¨debugåï¼Œå‘ç°é—®é¢˜å‡ºåœ¨è¿™æ®µä»£ç ä¸­çš„åˆ¤æ–­</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">if</span> (emptyAddBtn.getVisibility() != VISIBLE) &#123;</span><br><span class=\"line\">\t<span class=\"keyword\">return</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å½“æ•´ä¸ªåŠ å‡æ§ä»¶ï¼ˆOperateButtonï¼‰çš„Visibility == INVISIBLE or GONEæ—¶ï¼Œå…¶å†…éƒ¨<code>emptyAddBtn</code>çš„Visibility<strong>å±…ï¼ç„¶ï¼è¿˜ï¼æ˜¯ï¼Visibleï¼</strong></p>\n<p>å†™ä¸ªDemoéªŒè¯ä¸€ä¸‹</p>\n<hr>\n<h3 id=\"Talk-is-cheap-just-code\"><a href=\"#Talk-is-cheap-just-code\" class=\"headerlink\" title=\"Talk is cheap, just code\"></a>Talk is cheap, just code</h3><p>demoåŠŸèƒ½å¾ˆç®€å•ï¼Œå¤–å±‚çš„ViewGroup &amp; å†…å±‚çš„Viewï¼Œå½“outerç½®ä¸ºä¸å¯è§ï¼ˆINVISIBLE or GONEï¼‰æ—¶ï¼Œè¾“å‡ºinnerçš„Visibilityã€‚ç•Œé¢å¦‚ä¸‹ï¼š</p>\n<p><img src=\"/img/160629_visibility/capture.png\" alt=\"\"></p>\n<p>éªŒè¯åå‘ç°ä¸€ä¸ªæƒŠäººçš„äº‹å®ï¼ŒOuterçš„Visibilityä¸ä¼šå½±å“Innerçš„Visibilityï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è®ºOuterè®¾ç½®ä¸ºGoneè¿˜æ˜¯Invisibleï¼Œåªè¦Innerä¹‹å‰æ˜¯Visibleï¼Œé‚£ä¹ˆè°ƒç”¨<code>inner.getVisibility()</code>åï¼Œéƒ½ä¼šè¿”å›Visibleï¼</p>\n<hr>\n<h3 id=\"æ­£ç¡®çš„åˆ¤æ–­æ–¹æ³•\"><a href=\"#æ­£ç¡®çš„åˆ¤æ–­æ–¹æ³•\" class=\"headerlink\" title=\"æ­£ç¡®çš„åˆ¤æ–­æ–¹æ³•\"></a>æ­£ç¡®çš„åˆ¤æ–­æ–¹æ³•</h3><p>View.javaä¸­ä¸ºæˆ‘ä»¬æä¾›äº†<code>isShown()</code>æ–¹æ³•ï¼Œä»æ³¨é‡Šä¸­å³å¯çœ‹å‡ºå®ƒä¼šå°†å¤–å±‚ViewGroupå¯è§æ€§è®¡ç®—è¿›å»</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Returns the visibility of this view and all of its ancestors</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> True if this view and all of its ancestors are &#123;<span class=\"doctag\">@link</span> #VISIBLE&#125;</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">isShown</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">    View current = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">    <span class=\"comment\">//noinspection ConstantConditions</span></span><br><span class=\"line\">    <span class=\"keyword\">do</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> ((current.mViewFlags &amp; VISIBILITY_MASK) != VISIBLE) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        ViewParent parent = current.mParent;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (parent == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>; <span class=\"comment\">// We are not attached to the view root</span></span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!(parent <span class=\"keyword\">instanceof</span> View)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        current = (View) parent;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">while</span> (current != <span class=\"keyword\">null</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">false</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"åæ€\"><a href=\"#åæ€\" class=\"headerlink\" title=\"åæ€\"></a>åæ€</h3><p>èµ·åˆç¼–ç çš„æ—¶å€™ï¼Œè°èƒ½æƒ³åˆ°ï¼Œå¤–å±‚è®¾ç½®Invisibileåï¼Œå†…å±‚Viewå±…ç„¶è¿˜æ˜¯Visibleçš„çŠ¶æ€å‘¢ï¼Ÿ</p>\n<p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºè‡ªå·±å¯¹Viewçš„æœºåˆ¶ç ”ç©¶ä¸å¤Ÿæ·±å…¥ï¼Œå¼•ä»¥ä¸ºæˆ’ã€‚</p>\n<p>æ›´åº”è¯¥æ³¨æ„åˆ°Viewæœ¬èº«æä¾›äº†isShown()æ–¹æ³•æ¥åˆ¤æ–­å¯è§æ€§ï¼Œæ ¹æœ¬ä¸éœ€è¦ä½¿ç”¨Visibilityæ¥é‡å¤é€ è½®å­ï¼Œæ›´ä½•å†µè¿˜æ˜¯é”™è¯¯çš„è½®å­ã€‚</p>\n<hr>\n<h3 id=\"END\"><a href=\"#END\" class=\"headerlink\" title=\"=========END=========\"></a><em>=========END=========</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"Use DiffMerge As Default Git Diff Tool","url":"https://lilei.pro/2016/06/22/Use-Diffmerge-As-Default-Git-Diff-Tool/","content":"<blockquote>\n<p>ä½¿ç”¨DiffMergeä½œä¸ºé»˜è®¤çš„git diff GUIå·¥å…·</p>\n</blockquote>\n<a id=\"more\"></a>\n<p><strong>P4Merge</strong>: ç•Œé¢ç¾è§‚ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œå®‰è£…åŒ…å¤§ï¼ˆ100Mï¼‰</p>\n<p><strong>DiffMerge</strong>: ç•Œé¢ç®€å•ï¼ŒåŠŸèƒ½ä¸€èˆ¬ï¼Œå®‰è£…åŒ…å°ï¼ˆ10Mï¼‰</p>\n<h4 id=\"é…ç½®æ–¹æ³•\"><a href=\"#é…ç½®æ–¹æ³•\" class=\"headerlink\" title=\"é…ç½®æ–¹æ³•\"></a>é…ç½®æ–¹æ³•</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global merge.tool diffmerge</span><br><span class=\"line\">$ git config --global mergetool.diffmerge.cmd <span class=\"string\">\"/Applications/DiffMerge.app/Contents/MacOS/diffmerge --merge --result=\\$MERGED \\$LOCAL \\$BASE \\$REMOTE\"</span></span><br><span class=\"line\">$ git config --global mergetool.keepBackup <span class=\"literal\">false</span></span><br><span class=\"line\"></span><br><span class=\"line\">$ git config --global diff.tool diffmerge</span><br><span class=\"line\">$ git config --global difftool.diffmerge.cmd <span class=\"string\">\"/Applications/DiffMerge.app/Contents/MacOS/diffmerge \\$LOCAL \\$REMOTE\"</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"ä½¿ç”¨æ–¹æ³•\"><a href=\"#ä½¿ç”¨æ–¹æ³•\" class=\"headerlink\" title=\"ä½¿ç”¨æ–¹æ³•\"></a>ä½¿ç”¨æ–¹æ³•</h4><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git difftool</span><br></pre></td></tr></table></figure>\n<p>å‚è€ƒé“¾æ¥ï¼š<a href=\"http://coding4streetcred.com/blog/post/Configure-DiffMerge-for-Your-Git-DiffTool\" target=\"_blank\" rel=\"noopener\">Configure DiffMerge for Your Git DiffTool</a></p>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"macOS é€šè¿‡ç»ˆç«¯å¯åŠ¨ Sublime2","url":"https://lilei.pro/2016/06/22/Launch-Sublime-In-Terminal/","content":"<blockquote>\n<p>åŒæ ·é€‚ç”¨äº <code>*nix</code> ç³»ç»Ÿä¸‹é€šè¿‡æ§åˆ¶å°å¯åŠ¨ä»»ä½•æŒ‡ä»¤</p>\n</blockquote>\n<a id=\"more\"></a>\n<h3 id=\"å°†Sublimeçš„å¯åŠ¨å‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­\"><a href=\"#å°†Sublimeçš„å¯åŠ¨å‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­\" class=\"headerlink\" title=\"å°†Sublimeçš„å¯åŠ¨å‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­\"></a>å°†Sublimeçš„å¯åŠ¨å‘½ä»¤åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­</h3><p>macOSä¸­ï¼Œ<strong>Sublime Text 2</strong> çš„å¯åŠ¨å‘½ä»¤ä½äº<code>/Applications/Sublime Text 2.app/Contents/SharedSupport/bin</code>ä¸­ï¼Œè¯¥ç›®å½•ä¸‹ä»…æœ‰ä¸€ä¸ªå‘½ä»¤ï¼Œå°±æ˜¯<code>subl</code>ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨ç»ˆç«¯ä¸­å¯åŠ¨Sublimeå¯¹æ–‡ä»¶<code>foo.txt</code>è¿›è¡Œç¼–è¾‘ï¼Œéœ€è¦æ‰§è¡Œçš„æŒ‡ä»¤æ˜¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ subl foo.txt</span><br></pre></td></tr></table></figure>\n<p>å‰ææ˜¯ï¼Œç¯å¢ƒå˜é‡ä¸­åŒ…å«äº†<code>subl</code>è¿™ä¸ªæŒ‡ä»¤ã€‚åœ¨macOSä¸­ï¼Œæœ‰ä¸¤ç§é€”å¾„å¯ä»¥è¾¾æˆè¿™ä¸ªæ•ˆæœã€‚</p>\n<ol>\n<li><p>åœ¨<code>~/.zshrc</code>ï¼ˆæˆ‘ä½¿ç”¨çš„æ˜¯zshï¼‰ä¸­æ·»åŠ <code>$SUBLIME_HOME</code>ï¼Œå¹¶å°†<code>$SUBLIME_HOME/bin</code>æ·»åŠ è‡³<code>$PATH</code></p>\n</li>\n<li><p>åœ¨<code>/usr/local/bin</code>ä¸­åˆ›å»ºæŒ‡å‘<code>subl</code>çš„ç¬¦å·é“¾æ¥</p>\n</li>\n</ol>\n<p>ä¸¤ç§æ–¹æ³•å…·ä½“å®ç°åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p>.zshrcï¼Œæ³¨æ„ç©ºæ ¼å‰éœ€è¦ç”¨<code>\\</code>è½¬ä¹‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> SUBLIME_HOME=/Applications/Sublime\\ Text\\ 2.app</span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$PATH</span>:<span class=\"variable\">$&#123;SUBLIME_HOME&#125;</span>/Contents/SharedSupport/bin</span><br></pre></td></tr></table></figure>\n<p>åˆ›å»ºç¬¦å·é“¾æ¥</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ln -s <span class=\"string\">\"/Applications/Sublime Text 2.app/Contents/SharedSupport/bin/subl\"</span> /usr/<span class=\"built_in\">local</span>/bin/subl</span><br></pre></td></tr></table></figure>\n<p>æ–¹æ³•1é€‚ç”¨äºä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹å¤šä¸ªå‘½ä»¤çš„å¯åŠ¨ï¼ˆæ¯”å¦‚Android SDKï¼‰ï¼Œæ–¹æ³•2é€‚ç”¨äºå•ä¸ªæŒ‡ä»¤çš„å¯åŠ¨ï¼ˆæ¯”å¦‚Sublimeï¼‰ã€‚</p>\n<hr>\n<h3 id=\"åœ¨Windowsä¸­æˆ‘ä»¬æ€ä¹ˆåš\"><a href=\"#åœ¨Windowsä¸­æˆ‘ä»¬æ€ä¹ˆåš\" class=\"headerlink\" title=\"åœ¨Windowsä¸­æˆ‘ä»¬æ€ä¹ˆåš\"></a>åœ¨Windowsä¸­æˆ‘ä»¬æ€ä¹ˆåš</h3><p>åœ¨Windowsä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç±»ä¼¼æ–¹æ³•2çš„é€”å¾„ï¼Œæ¥å¿«é€Ÿå¯åŠ¨æŸä¸ªåº”ç”¨ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p>\n<ol>\n<li>ä»»æ„ä½ç½®åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>A</code></li>\n<li>å°†æ–‡ä»¶å¤¹<code>A</code>åŠ å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­</li>\n<li>å¯¹äºè¦å¿«é€Ÿå¯åŠ¨çš„Appï¼Œå¯¹å…¶åˆ›å»ºå¿«æ·æ–¹å¼åï¼ŒæŠŠå¿«æ·æ–¹å¼é‡å‘½åï¼ˆæ¯”å¦‚<code>lol</code>ï¼‰ï¼Œç„¶åå°†å¿«æ·æ–¹å¼ä¸¢å…¥<code>A</code>æ–‡ä»¶å¤¹</li>\n<li>ä»¥åå¯ä»¥é€šè¿‡<code>cmd+R</code>æ‰“å¼€è¿è¡Œçª—å£åï¼Œç›´æ¥è¾“å…¥<code>lol</code>æ¥å¯åŠ¨å¯¹åº”App</li>\n</ol>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"Android Studio .gitignore æ–‡ä»¶èŒƒæœ¬","url":"https://lilei.pro/2016/06/22/Android-Studio-gitignore/","content":"<blockquote>\n<p>ä¸€ä»½æ ‡å‡†çš„ Android Studio å·¥ç¨‹ <code>.gitignore</code> æ–‡ä»¶</p>\n</blockquote>\n<a id=\"more\"></a>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Built application files</span></span><br><span class=\"line\">*.apk</span><br><span class=\"line\">*.ap_</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Files for the ART/Dalvik VM</span></span><br><span class=\"line\">*.dex</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Java class files</span></span><br><span class=\"line\">*.class</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Generated files</span></span><br><span class=\"line\">bin/</span><br><span class=\"line\">gen/</span><br><span class=\"line\">out/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Gradle files</span></span><br><span class=\"line\">.gradle</span><br><span class=\"line\">build/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Local configuration file (sdk path, etc)</span></span><br><span class=\"line\">local.properties</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Proguard folder generated by Eclipse</span></span><br><span class=\"line\">proguard/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Log files</span></span><br><span class=\"line\">*.<span class=\"built_in\">log</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Android Studio Navigation editor temp files</span></span><br><span class=\"line\">.navigation/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Android Studio captures folder</span></span><br><span class=\"line\">captures/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Intellij</span></span><br><span class=\"line\">*.iml</span><br><span class=\"line\">.idea/</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Keystore files</span></span><br><span class=\"line\">*.jks</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Windows thumbnail db</span></span><br><span class=\"line\">Thumbs.db</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># OSX files</span></span><br><span class=\"line\">.DS_Store</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Eclipse project files</span></span><br><span class=\"line\">.classpath</span><br><span class=\"line\">.project</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># NDK</span></span><br><span class=\"line\">obj/</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"Androidä¸­åŠ¨æ€åŠ è½½JNIå¤±æ•ˆé—®é¢˜æ¢ç©¶(æœªå®Œå¾…ç»­)","url":"https://lilei.pro/2016/06/17/Dynamic-Loading-JNI-Not-Work/","content":"<blockquote>\n<p>åœ¨åšsoåŠ¨æ€åŠ è½½æ—¶é‡åˆ°äº†ååŠ è½½çš„JNIæ–¹æ³•å¤±æ•ˆçš„é—®é¢˜</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h3 id=\"èƒŒæ™¯æè¿°\"><a href=\"#èƒŒæ™¯æè¿°\" class=\"headerlink\" title=\"èƒŒæ™¯æè¿°\"></a>èƒŒæ™¯æè¿°</h3><p>åœ¨è¿›è¡ŒåŠ¨æ€åŠ è½½3æœŸåˆ†äº«æ—¶ï¼Œä½¿ç”¨<code>so</code>æ–‡ä»¶çš„åŠ¨æ€åŠ è½½ä½œä¸ºç¤ºä¾‹ï¼Œå‘ç°ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡â€”â€”åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šè¿‡<code>System.load(&quot;foo.so&quot;)</code>åŠ è½½è¿›æ¥çš„<code>so</code>å¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚</p>\n<p>å…ˆçœ‹ä½œä¸ºç¤ºä¾‹çš„åŠ¨æ€åŠ è½½Demoä»£ç ã€‚</p>\n<p>å£°æ˜çš„nativeæ¥å£</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">native</span> String <span class=\"title\">say</span><span class=\"params\">()</span></span>;</span><br></pre></td></tr></table></figure>\n<p>Cæ–‡ä»¶ä¸­å®ç°æ–¹æ³•å¾ˆç®€å•ï¼Œè¿”å›ä¸€ä¸ªé¢„å®šä¹‰å¥½çš„å­—ç¬¦ä¸²<code>Keep Quiet!</code></p>\n<p><code>jni.c</code></p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">\"com_leili_season1_jni_activity_JNIActivity.h\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\">JNIEXPORT jstring JNICALL Java_com_leili_season1_jni_activity_JNIActivity_say</span><br><span class=\"line\">        (JNIEnv *env, jobject obj) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> (*env)-&gt;NewStringUTF(env, <span class=\"string\">\"Keep Quiet!\"</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>åˆå§‹åŒ–æ—¶ï¼ŒåŠ è½½è¿”å›<code>Keep Quiet!</code>çš„soæ–‡ä»¶</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">\tSystem.loadLibrary(<span class=\"string\">\"Jni\"</span>); <span class=\"comment\">// å†™æ³•Aï¼Œé€šè¿‡System.loadLibrary()é¦–æ¬¡åŠ è½½</span></span><br><span class=\"line\">\tSystem.load(getFilesDir().getParent() + <span class=\"string\">\"/lib/libJni.so\"</span>); <span class=\"comment\">// å†™æ³•Bï¼Œé€šè¿‡System.load()é¦–æ¬¡åŠ è½½</span></span><br><span class=\"line\">\t... <span class=\"comment\">// ä»¥ä¸‹æ— å…³å†…å®¹çœç•¥</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç‚¹å‡»æŒ‰é’®ååŠ è½½æ–°çš„soæ–‡ä»¶ï¼Œå…¶ä¸­ä¿®æ”¹äº†<code>say()</code>æ–¹æ³•çš„è¿”å›å€¼ä¸º<code>Hello World!</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">soFilePath = getFilesDir() + <span class=\"string\">\"/libJni2.so\"</span>; <span class=\"comment\">// /data/data/com.leili.season1/lib/libJni.so</span></span><br><span class=\"line\">System.load(soFilePath);</span><br></pre></td></tr></table></figure>\n<p>æ­¤æ—¶å†æ¬¡è°ƒç”¨<code>say()</code>åï¼Œæ ¹æ®é¢„æœŸï¼Œåº”è¯¥è¿”å›çš„æ˜¯ä¿®æ”¹åçš„<code>Hello World!</code>ã€‚ç„¶è€Œï¼Œå¦‚ä»£ç ä¸­çš„æ³¨é‡Šæ‰€å†™ï¼Œä½¿ç”¨å†™æ³•Aè¿›è¡Œé¦–æ¬¡åŠ è½½çš„soåº“ï¼Œæ— æ³•é€šè¿‡<code>System.load(soFilePath)</code>è¢«è¦†ç›–ï¼›ä½¿ç”¨å†™æ³•Bè¿›è¡Œé¦–æ¬¡åŠ è½½çš„soåº“ï¼Œå´å¯ä»¥é€šè¿‡<code>System.load(soFilePath)</code>è¢«è¦†ç›–ã€‚</p>\n<hr>\n<h3 id=\"åŸå› æ¢ç©¶\"><a href=\"#åŸå› æ¢ç©¶\" class=\"headerlink\" title=\"åŸå› æ¢ç©¶\"></a>åŸå› æ¢ç©¶</h3><p>ç¬¬ä¸€ä¸ªæƒ³æ³•æ˜¯ï¼Œ<code>System.load</code>å’Œ<code>System.loadLibrary</code>å†…éƒ¨å®ç°æœ‰å·®å¼‚ï¼Œé€šè¿‡<code>System.loadLibrary</code>åŠ è½½è¿›æ¥çš„soåº“ï¼Œå…¶æ–¹æ³•æ— æ³•è¢«è¦†ç›–ã€‚</p>\n<p>å…ˆæ¥çœ‹ä¸€ä¸‹SDKæºç ä¸­è¿™ä¸¤ä¸ªæ–¹æ³•çš„ç»†èŠ‚ï¼Œé¦–å…ˆæ˜¯<code>System.load</code>ï¼Œä½¿ç”¨SDKç‰ˆæœ¬ä¸º23</p>\n<h4 id=\"System-load-è¿‡ç¨‹\"><a href=\"#System-load-è¿‡ç¨‹\" class=\"headerlink\" title=\"System.load è¿‡ç¨‹\"></a>System.load è¿‡ç¨‹</h4><p>System.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * See &#123;<span class=\"doctag\">@link</span> Runtime#load&#125;.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">load</span><span class=\"params\">(String pathName)</span> </span>&#123;</span><br><span class=\"line\">    Runtime.getRuntime().load(pathName, VMStack.getCallingClassLoader());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è°ƒç”¨äº†Runtimeä¸­çš„loadæ–¹æ³•</p>\n<p>Runtime.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * Loads the given shared library using the given ClassLoader.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">load</span><span class=\"params\">(String absolutePath, ClassLoader loader)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (absolutePath == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">\"absolutePath == null\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    String error = doLoad(absolutePath, loader);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (error != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsatisfiedLinkError(error);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è·Ÿè¿› doLoad æ–¹æ³•æŸ¥çœ‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> String <span class=\"title\">doLoad</span><span class=\"params\">(String name, ClassLoader loader)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// Android apps are forked from the zygote, so they can't have a custom LD_LIBRARY_PATH,</span></span><br><span class=\"line\">    <span class=\"comment\">// which means that by default an app's shared library directory isn't on LD_LIBRARY_PATH.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// The PathClassLoader set up by frameworks/base knows the appropriate path, so we can load</span></span><br><span class=\"line\">    <span class=\"comment\">// libraries with no dependencies just fine, but an app that has multiple libraries that</span></span><br><span class=\"line\">    <span class=\"comment\">// depend on each other needed to load them in most-dependent-first order.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// We added API to Android's dynamic linker so we can update the library path used for</span></span><br><span class=\"line\">    <span class=\"comment\">// the currently-running process. We pull the desired path out of the ClassLoader here</span></span><br><span class=\"line\">    <span class=\"comment\">// and pass it to nativeLoad so that it can call the private dynamic linker API.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// We didn't just change frameworks/base to update the LD_LIBRARY_PATH once at the</span></span><br><span class=\"line\">    <span class=\"comment\">// beginning because multiple apks can run in the same process and third party code can</span></span><br><span class=\"line\">    <span class=\"comment\">// use its own BaseDexClassLoader.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// We didn't just add a dlopen_with_custom_LD_LIBRARY_PATH call because we wanted any</span></span><br><span class=\"line\">    <span class=\"comment\">// dlopen(3) calls made from a .so's JNI_OnLoad to work too.</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// So, find out what the native library search path is for the ClassLoader in question...</span></span><br><span class=\"line\">    String ldLibraryPath = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    String dexPath = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (loader == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// We use the given library path for the boot class loader. This is the path</span></span><br><span class=\"line\">        <span class=\"comment\">// also used in loadLibraryName if loader is null.</span></span><br><span class=\"line\">        ldLibraryPath = System.getProperty(<span class=\"string\">\"java.library.path\"</span>);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (loader <span class=\"keyword\">instanceof</span> BaseDexClassLoader) &#123;</span><br><span class=\"line\">        BaseDexClassLoader dexClassLoader = (BaseDexClassLoader) loader;</span><br><span class=\"line\">        ldLibraryPath = dexClassLoader.getLdLibraryPath();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// nativeLoad should be synchronized so there's only one LD_LIBRARY_PATH in use regardless</span></span><br><span class=\"line\">    <span class=\"comment\">// of how many ClassLoaders are in the system, but dalvik doesn't support synchronized</span></span><br><span class=\"line\">    <span class=\"comment\">// internal natives.</span></span><br><span class=\"line\">    <span class=\"keyword\">synchronized</span> (<span class=\"keyword\">this</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> nativeLoad(name, loader, ldLibraryPath);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// <span class=\"doctag\">TODO:</span> should be synchronized, but dalvik doesn't support synchronized internal natives.</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">native</span> String <span class=\"title\">nativeLoad</span><span class=\"params\">(String filename, ClassLoader loader,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        String ldLibraryPath)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥çœ‹åˆ°æœ€ç»ˆé€šè¿‡nativeè°ƒç”¨<code>nativeLoad</code>åŠ è½½äº†libæ–‡ä»¶ã€‚</p>\n<h4 id=\"System-loadLibrary-è¿‡ç¨‹\"><a href=\"#System-loadLibrary-è¿‡ç¨‹\" class=\"headerlink\" title=\"System.loadLibrary è¿‡ç¨‹\"></a>System.loadLibrary è¿‡ç¨‹</h4><p>System.loadLibrary çš„å†™æ³•æ˜¯</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.loadLibrary(<span class=\"string\">\"Jni\"</span>);</span><br></pre></td></tr></table></figure>\n<p>çœŸå®åŠ è½½çš„soæ–‡ä»¶æ˜¯libJni.soï¼Œå¯ä»¥çŒœæƒ³å†…éƒ¨è¿›è¡Œäº†ä¸€ä¸ªæ‹¼æ¥æ–‡ä»¶åçš„è¿‡ç¨‹ã€‚</p>\n<p>System.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * See &#123;<span class=\"doctag\">@link</span> Runtime#loadLibrary&#125;.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">loadLibrary</span><span class=\"params\">(String libName)</span> </span>&#123;</span><br><span class=\"line\">    Runtime.getRuntime().loadLibrary(libName, VMStack.getCallingClassLoader());</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>Runtime.javaä¸­çš„loadLibraryæ–¹æ³•</p>\n<p>Runtime.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * Searches for and loads the given shared library using the given ClassLoader.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">loadLibrary</span><span class=\"params\">(String libraryName, ClassLoader loader)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (loader != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        String filename = loader.findLibrary(libraryName);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (filename == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// It's not necessarily true that the ClassLoader used</span></span><br><span class=\"line\">            <span class=\"comment\">// System.mapLibraryName, but the default setup does, and it's</span></span><br><span class=\"line\">            <span class=\"comment\">// misleading to say we didn't find \"libMyLibrary.so\" when we</span></span><br><span class=\"line\">            <span class=\"comment\">// actually searched for \"liblibMyLibrary.so.so\".</span></span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsatisfiedLinkError(loader + <span class=\"string\">\" couldn't find \\\"\"</span> +</span><br><span class=\"line\">                                           System.mapLibraryName(libraryName) + <span class=\"string\">\"\\\"\"</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        String error = doLoad(filename, loader);</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (error != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsatisfiedLinkError(error);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    String filename = System.mapLibraryName(libraryName);</span><br><span class=\"line\">    List&lt;String&gt; candidates = <span class=\"keyword\">new</span> ArrayList&lt;String&gt;();</span><br><span class=\"line\">    String lastError = <span class=\"keyword\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (String directory : mLibPaths) &#123;</span><br><span class=\"line\">        String candidate = directory + filename;</span><br><span class=\"line\">        candidates.add(candidate);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (IoUtils.canOpenReadOnly(candidate)) &#123;</span><br><span class=\"line\">            String error = doLoad(candidate, loader);</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (error == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">return</span>; <span class=\"comment\">// We successfully loaded the library. Job done.</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">            lastError = error;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (lastError != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsatisfiedLinkError(lastError);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> UnsatisfiedLinkError(<span class=\"string\">\"Library \"</span> + libraryName + <span class=\"string\">\" not found; tried \"</span> + candidates);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>æ³¨æ„åˆ°è¿™é‡Œå‚æ•°ä¸­çš„<code>libraryName</code>ä»ç„¶æ˜¯å½¢å¦‚<code>Jni</code>çš„ä¸åŒ…å«å‰ç¼€<code>lib</code>ä¸åç¼€<code>.so</code>çš„æ–‡ä»¶åã€‚çœŸæ­£çš„æ–‡ä»¶åè¡¥å…¨æ˜¯åœ¨è¿™ä¸€æ­¥è¿›è¡Œçš„ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">String filename = loader.findLibrary(libraryName);</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://android.googlesource.com/platform/libcore-snapshot/+/ics-mr1/dalvik/src/main/java/dalvik/system/BaseDexClassLoader.java\" target=\"_blank\" rel=\"noopener\">BaseDexClassLoader.java</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Override</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">findLibrary</span><span class=\"params\">(String name)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> pathList.findLibrary(name);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><a href=\"https://android.googlesource.com/platform/libcore-snapshot/+/ics-mr1/dalvik/src/main/java/dalvik/system/DexPathList.java\" target=\"_blank\" rel=\"noopener\">DexPathList.java</a></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Finds the named native code library on any of the library</span></span><br><span class=\"line\"><span class=\"comment\"> * directories pointed at by this instance. This will find the</span></span><br><span class=\"line\"><span class=\"comment\"> * one in the earliest listed directory, ignoring any that are not</span></span><br><span class=\"line\"><span class=\"comment\"> * readable regular files.</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return</span> the complete path to the library or &#123;<span class=\"doctag\">@code</span> null&#125; if no</span></span><br><span class=\"line\"><span class=\"comment\"> * library was found</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">findLibrary</span><span class=\"params\">(String libraryName)</span> </span>&#123;</span><br><span class=\"line\">    String fileName = System.mapLibraryName(libraryName);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (File directory : nativeLibraryDirectories) &#123;</span><br><span class=\"line\">        String path = <span class=\"keyword\">new</span> File(directory, fileName).getPath();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (IoUtils.canOpenReadOnly(path)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> path;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ç»•äº†ä¸€åœˆï¼Œåˆå›åˆ°<code>System</code>è¿™ä¸ªç±»ä¸­ï¼Œçœ‹åˆ°ä¸‹é¢è¿™å„¿ä¸€ç›®äº†ç„¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Returns the platform specific file name format for the shared library</span></span><br><span class=\"line\"><span class=\"comment\"> * named by the argument. On Android, this would turn &#123;<span class=\"doctag\">@code</span> \"MyLibrary\"&#125; into</span></span><br><span class=\"line\"><span class=\"comment\"> * &#123;<span class=\"doctag\">@code</span> \"libMyLibrary.so\"&#125;.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> String <span class=\"title\">mapLibraryName</span><span class=\"params\">(String nickname)</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (nickname == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> NullPointerException(<span class=\"string\">\"nickname == null\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">\"lib\"</span> + nickname + <span class=\"string\">\".so\"</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿½è¸ªè¿‡äº†è¡¥å…¨æ–‡ä»¶åçš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬å›åˆ°æœ€åˆ<code>System.loadLibrary</code>çš„ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸<code>System.load</code>ä¸€æ ·ï¼Œä¹Ÿæ˜¯è°ƒç”¨äº†åŒæ ·çš„doLoadæ–¹æ³•ï¼ï¼ï¼</p>\n<p>åˆ°è¿™é‡Œå¯èƒ½ä¼šæœ‰äº›å›°æƒ‘äº†ï¼Œæ—¢ç„¶ä¸¤è€…æ®Šé€”åŒå½’ï¼Œä¸ºä»€ä¹ˆåœ¨åº”ç”¨æ—¶ä¼šæœ‰å·®åˆ«å‘¢ï¼Ÿå…ˆåˆ«æ€¥ï¼Œæ—¢ç„¶æ–¹æ³•æ˜¯åŒæ ·çš„ï¼Œä¼šä¸ä¼šæ˜¯å‚æ•°æœ‰åŒºåˆ«ï¼Ÿ</p>\n<hr>\n<h3 id=\"System-load-amp-System-loadLibrary-åŠ è½½soåº“æ–‡ä»¶\"><a href=\"#System-load-amp-System-loadLibrary-åŠ è½½soåº“æ–‡ä»¶\" class=\"headerlink\" title=\"System.load &amp; System.loadLibrary åŠ è½½soåº“æ–‡ä»¶\"></a>System.load &amp; System.loadLibrary åŠ è½½soåº“æ–‡ä»¶</h3><p>é€šè¿‡æ–­ç‚¹ï¼Œåˆ†åˆ«æŸ¥çœ‹ä»¥ä¸‹ä¸¤ä¸ªè¯­å¥çš„æ‰§è¡Œæƒ…å†µï¼Œæœç„¶å‘ç°äº†ä¸€ä¸åŒºåˆ«</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.loadLibrary(<span class=\"string\">\"Jni\"</span>); <span class=\"comment\">// å†™æ³•Aï¼Œé€šè¿‡System.loadLibrary()é¦–æ¬¡åŠ è½½</span></span><br></pre></td></tr></table></figure>\n<p>å†™æ³•AåŠ è½½çš„libæ–‡ä»¶ï¼ŒçœŸå®è·¯å¾„æ˜¯<code>/data/app/com.leili.season1-1/lib/x86/libJni.so</code>ï¼Œè¿™æ˜¯ç”¨æˆ·appåœ¨å®‰è£…æ—¶çš„è·¯å¾„ï¼ˆç³»ç»Ÿappå®‰è£…ç›®å½•ä¸º<code>/system/app</code>ï¼‰</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">System.load(getFilesDir().getParent() + <span class=\"string\">\"/lib/libJni.so\"</span>); <span class=\"comment\">// å†™æ³•Bï¼Œé€šè¿‡System.load()é¦–æ¬¡åŠ è½½</span></span><br></pre></td></tr></table></figure>\n<p>å†™æ³•BåŠ è½½çš„libæ–‡ä»¶ï¼ŒçœŸå®è·¯å¾„æ˜¯<code>/data/data/com.leili.season1/lib/libJni.so</code>ã€‚ä¸æˆ‘ä»¬çš„é¢„æœŸä¸€è‡´ã€‚</p>\n<p>ç­‰ç­‰ï¼Œæˆ‘ä»¬é€šè¿‡adb shellçœ‹ä¸€ä¸‹<code>/data/data/com.leili.season1/lib/</code>è¿™ä¸ªç›®å½•</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">root@vbox86p:/data/data/com.leili.season1 <span class=\"comment\"># ll</span></span><br><span class=\"line\">drwxrwx--x u0_a174  u0_a174           2016-06-16 19:34 cache</span><br><span class=\"line\">drwx------ u0_a174  u0_a174           2016-06-16 19:34 files</span><br><span class=\"line\">lrwxrwxrwx install  install           2016-06-17 10:28 lib -&gt; /data/app/com.leili.season1-1/lib/x86</span><br></pre></td></tr></table></figure>\n<p>å‘ç°äº†ä»€ä¹ˆï¼Ÿç›®å½•<code>/data/data/com.leili.season1/lib/</code>ç«Ÿç„¶æ˜¯æŒ‡å‘<code>/data/app/com.leili.season1-1/lib/x86</code>çš„è½¯é“¾æ¥ã€‚å¤©å“ªï¼è¿™è¯´æ˜ï¼Œé€šè¿‡<code>System.load(filePath)</code>åŠ è½½çš„soæ–‡ä»¶ï¼Œä¸é€šè¿‡<code>System.loadLibrary(libName)</code>åŠ è½½çš„soæ–‡ä»¶ï¼Œå‹æ ¹å°±æ˜¯åŒä¸€ä¸ªï¼</p>\n<p>æˆ‘çš„å¤©å“ªã€‚ã€‚ã€‚æ˜æ˜æ˜¯è°ƒç”¨åŒæ ·çš„æ–¹æ³•åŠ è½½åŒä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ºå•¥ä¼šå‡ºç°ä¸¤ç§æˆªç„¶ä¸åŒçš„ç»“æœï¼Ÿï¼ï¼ï¼</p>\n<p>æœ€æ–°å‘ç°ï¼šåˆæ¬¡åŠ è½½æ—¶ä¸ç”¨<code>System.loadLibrary(&quot;Jni&quot;)</code>ï¼Œè€Œç”¨<code>System.load(&quot;/data/app/com.leili.season1-2/lib/x86/libJni.so&quot;)</code>æ¥ç›´æ¥åŠ è½½<code>/data/app</code>çš„åº“æ–‡ä»¶æ—¶ï¼Œä¸€æ ·ä¼šé˜»æ­¢åç»­çš„åŠ è½½ï¼</p>\n<h1 id=\"åˆ°è¿™é‡Œè¢«BLOCKä½äº†ï¼ŒHELPï½\"><a href=\"#åˆ°è¿™é‡Œè¢«BLOCKä½äº†ï¼ŒHELPï½\" class=\"headerlink\" title=\"åˆ°è¿™é‡Œè¢«BLOCKä½äº†ï¼ŒHELPï½\"></a>åˆ°è¿™é‡Œè¢«<strong>BLOCK</strong>ä½äº†ï¼ŒHELPï½</h1><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"MT&DP Hackathon å°ç»“","url":"https://lilei.pro/2016/05/27/Hackathon-1-0/","content":"<blockquote>\n<p>16å¹´5æœˆ27æ—¥ï½28æ—¥ï¼ŒåŒ—äº¬ç¾å›¢æ€»éƒ¨ä¸¾åŠHackathonï¼Œé¡¹ç›®å°ç»“<br>ä¸è®ºæ¯”èµ›æ’åå¦‚ä½•ã€èƒ½å¦æ‹¿åˆ°å¥–å“ï¼Œå­¦åˆ°çŸ¥è¯†æ‰æ˜¯è‡ªå·±ç¡¬å®åŠ›çš„æå‡</p>\n</blockquote>\n<p><img src=\"/img/160527_hackathon/hackathon_logo.png\" alt=\"\"></p>\n<hr>\n<a id=\"more\"></a>\n<h1 id=\"Databaseéƒ¨åˆ†\"><a href=\"#Databaseéƒ¨åˆ†\" class=\"headerlink\" title=\"Databaseéƒ¨åˆ†\"></a>Databaseéƒ¨åˆ†</h1><h3 id=\"VARCHAR-TEXT\"><a href=\"#VARCHAR-TEXT\" class=\"headerlink\" title=\"VARCHAR, TEXT\"></a>VARCHAR, TEXT</h3><p><strong>VARCHAR(n)</strong>: å­˜å‚¨åœ¨åˆ—å…ƒç´ ä¸­ï¼›å¯ä»¥ä½œä¸ºç´¢å¼•<br><strong>TEXT</strong>: åˆ—å…ƒç´ ä¸­åªä¿å­˜ä¸€ä¸ªæŒ‡é’ˆï¼ŒçœŸå®æ–‡æœ¬ä¿å­˜åœ¨å¦å¤–çš„å­˜å‚¨åŒºåŸŸï¼›ä¸å¯ä½œä¸ºç´¢å¼•</p>\n<p>æ³¨ï¼šå­˜å‚¨ä½ç½®åŒºåˆ«ä»…å‡ºç°åœ¨MySQLä¸Šï¼Œå¯¹äºInnoDBï¼Œå¦‚æœVARCHARç±»å‹çš„å…ƒç´ è¿‡é•¿ï¼Œå†…éƒ¨ä»ç„¶ä¼šä½¿ç”¨TEXTå½¢å¼çš„ä¿å­˜æ–¹æ¡ˆ</p>\n<p>å®é™…åº”ç”¨ä¸­ï¼Œè¦æ ¹æ®ä¸åŒç±»å‹çš„è¾“å…¥ï¼Œé€‰æ‹©ä¸åŒç±»å‹çš„æ ¼å¼</p>\n<table>\n<thead>\n<tr>\n<th>Type</th>\n<th>Case</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>VARCHAR(X)</td>\n<td>user name, email, country, subject, password</td>\n</tr>\n<tr>\n<td>TEXT</td>\n<td>messages, emails, comments, formatted text, html, code, images, links</td>\n</tr>\n<tr>\n<td>MEDIUMTEXT</td>\n<td>large json bodies, short to medium length books, csv strings</td>\n</tr>\n<tr>\n<td>LONGTEXT</td>\n<td>textbooks, programs, years of logs files, harry potter and the goblet of fire, scientific research logging</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h1 id=\"Nodeéƒ¨åˆ†\"><a href=\"#Nodeéƒ¨åˆ†\" class=\"headerlink\" title=\"Nodeéƒ¨åˆ†\"></a>Nodeéƒ¨åˆ†</h1><h3 id=\"æ•°æ®åº“è¿æ¥\"><a href=\"#æ•°æ®åº“è¿æ¥\" class=\"headerlink\" title=\"æ•°æ®åº“è¿æ¥\"></a>æ•°æ®åº“è¿æ¥</h3><p>ä¸€ä¸ªå…¸å‹çš„SELECTè¯·æ±‚å†™æ³•</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// ä¾èµ–mysqlæ¨¡å—</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> mysql = <span class=\"built_in\">require</span>(<span class=\"string\">'mysql'</span>);</span><br><span class=\"line\"><span class=\"comment\">// åˆ›å»ºè¿æ¥ï¼ŒæŒ‡å®šDBåœ°å€ï¼ç”¨æˆ·åï¼å¯†ç ï¼åº“å</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> pool = mysql.createPool(&#123;</span><br><span class=\"line\">    host: <span class=\"string\">'10.4.232.53'</span>,</span><br><span class=\"line\">    user: <span class=\"string\">'mock_user'</span>,</span><br><span class=\"line\">    password: <span class=\"string\">'mock_user_pwd'</span>,</span><br><span class=\"line\">    database: <span class=\"string\">'live_show'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"comment\">// exportsä»¥å°†æ¥å£æš´éœ²åœ¨æ¨¡å—å¤–</span></span><br><span class=\"line\">exports.queryComments = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">channelId, limit, callback</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> select = <span class=\"string\">'SELECT `comment` FROM instant_comment where `channel_id` = \\''</span> + channelId + <span class=\"string\">'\\' ORDER BY `id` DESC LIMIT '</span> + limit;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"queryComments: \"</span> + select); <span class=\"comment\">// å»ºè®®æ¯ä¸€æ¬¡æ‰§è¡ŒDBæ“ä½œï¼Œéƒ½é€šè¿‡logè®°å½•ä¸‹å…·ä½“æŒ‡ä»¤</span></span><br><span class=\"line\">    pool.getConnection(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, conn</span>) </span>&#123; <span class=\"comment\">// è¯·æ±‚ä¸€ä¸ªè¿æ¥</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (err) <span class=\"keyword\">throw</span> err; <span class=\"comment\">// jsé‡Œé€šå¸¸çš„å†™æ³•ï¼Œå›è°ƒå‡½æ•°ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯err</span></span><br><span class=\"line\">        conn.query(select,</span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">err, rows, fields</span>) </span>&#123;</span><br><span class=\"line\">                <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                    <span class=\"keyword\">throw</span> err;</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    callback(rows); <span class=\"comment\">// å›è°ƒå‡½æ•°å¤„ç†row</span></span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                conn.release(); <span class=\"comment\">// æ³¨æ„ï¼ä¸€å®šè¦åœ¨å›è°ƒå‡½æ•°ä¸­é‡Šæ”¾è¿æ¥ï¼Œä¸ç„¶ä¸€æ—¦è¿›è¡Œ10æ¬¡ï¼ˆé»˜è®¤å€¼ï¼‰æ•°æ®è¯·æ±‚ï¼Œå°±ä¼šå¯¼è‡´è¿æ¥æ‰“æ»¡è€ŒæŒ‚æ‰</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure>\n<h3 id=\"httpè¯·æ±‚\"><a href=\"#httpè¯·æ±‚\" class=\"headerlink\" title=\"httpè¯·æ±‚\"></a>httpè¯·æ±‚</h3><p>ä¸€èˆ¬å†™æ³•æ˜¯</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// handlerä¸ºå›è°ƒå‡½æ•°</span></span><br><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'http'</span>).createServer(handler).listen(port);</span><br><span class=\"line\"><span class=\"comment\">// handlerå†™æ³•</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">handler</span>(<span class=\"params\">req, resp</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// do your business</span></span><br><span class=\"line\">    resp.write(<span class=\"string\">'this is response'</span>);</span><br><span class=\"line\">    resp.end();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å…¶ä¸­ <code>resp.write(&#39;foo&#39;)</code> <code>resp.end()</code> ä¹Ÿå¯ä»¥ç®€å†™ä¸º <code>resp.end(&#39;foo&#39;)</code></p>\n<h3 id=\"æ•°æ®JsonåŒ–\"><a href=\"#æ•°æ®JsonåŒ–\" class=\"headerlink\" title=\"æ•°æ®JsonåŒ–\"></a>æ•°æ®JsonåŒ–</h3><p>jsä¸­ä½¿ç”¨çš„æ˜¯å¼±ç±»å‹å¯¹è±¡</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> foo = &#123;</span><br><span class=\"line\">    code : <span class=\"number\">200</span>,</span><br><span class=\"line\">    msg : <span class=\"string\">'æˆåŠŸ'</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯¹äºè¿™ç§å¯¹è±¡ï¼Œç›´æ¥ä½¿ç”¨ <code>resp.write(foo.toString())</code> æ˜¯æ— æ³•è¿”å›æ•°æ®çš„ï¼Œæ‹¿åˆ°çš„å…¶å®æ˜¯å¯¹è±¡åœ¨å†…å­˜ä¸­çš„æŒ‡é’ˆã€‚è¿™é‡Œè¦ç”¨ <code>JSON.stringify(foo).toString()</code> æ¥ç”Ÿæˆç»“æœã€‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">resp.write(<span class=\"built_in\">JSON</span>.stringify(foo).toString());</span><br></pre></td></tr></table></figure>\n<h3 id=\"é™æ€èµ„æº\"><a href=\"#é™æ€èµ„æº\" class=\"headerlink\" title=\"é™æ€èµ„æº\"></a>é™æ€èµ„æº</h3><p>ä½¿ç”¨ <code>express</code> æ¡†æ¶ï¼Œéå¸¸ç®€å•ï¼ˆ@ç‹å–„æˆ ä»‹ç»è¯´ç°åœ¨ <code>koa</code> æ›´ä¸ºæµè¡Œï¼Œå¾…è°ƒç ”ï¼‰ã€‚<br>é€šè¿‡å½¢å¦‚ <code>http://10.4.232.53:9528/live_1.jpg</code> çš„åœ°å€æ¥è·å–é™æ€èµ„æºï¼ˆä¸éœ€è¦æ‹¼æ¥ <code>public</code>ï¼‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">require</span>(<span class=\"string\">'express'</span>);</span><br><span class=\"line\"><span class=\"keyword\">var</span> app = express();</span><br><span class=\"line\">app.use(express.static(<span class=\"string\">'public'</span>)); <span class=\"comment\">// é¡¹ç›®ç›®å½•ä¸‹çš„publicæ–‡ä»¶å¤¹ï¼Œå³ä¸ºé™æ€æ–‡ä»¶ç›®å½•</span></span><br><span class=\"line\">app.listen(<span class=\"number\">9528</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"å®šæ—¶ä»»åŠ¡\"><a href=\"#å®šæ—¶ä»»åŠ¡\" class=\"headerlink\" title=\"å®šæ—¶ä»»åŠ¡\"></a>å®šæ—¶ä»»åŠ¡</h3><p>ä½¿ç”¨ <code>setInterval(func, delay)</code> æ¥æ‰§è¡Œå‘¨æœŸä»»åŠ¡ï¼Œå› ä¸ºä»£ç æœ¬èº«æœ‰è¿è¡Œæ—¶é—´ï¼Œå‡½æ•°æœ‰è°ƒç”¨æ—¶é—´ï¼Œå› æ­¤åœ¨æ—¶åˆ»ä¸Šå¹¶ä¸ä¼šä¿è¯100%çš„ç²¾ç¡®ï¼Œï¼ˆå¦‚å£°æ˜äº†3000msï¼Œå¯èƒ½åœ¨2990æ—¶æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½åœ¨3010æ—¶æ‰§è¡Œï¼‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// å®šæ—¶ä»»åŠ¡,å…³é—­ä¸åœ¨ä¿æ´»åˆ—è¡¨é‡Œçš„ç›´æ’­æº</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> livingPeriod = <span class=\"number\">10</span> * <span class=\"number\">1000</span>; <span class=\"comment\">// éœ€è¦ä¿æ´»çš„ç›´æ’­,è¦åœ¨30så†…è°ƒç”¨ä¿æ´»æ¥å£</span></span><br><span class=\"line\">setInterval(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">\"living shows: \"</span> + livingShows);</span><br><span class=\"line\">    dbHelper.killDeadShow(livingShows, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        livingShows = []; <span class=\"comment\">// clear</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;, livingPeriod);</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"ä½¿ç”¨Gitå¯¹æœ€è¿‘nä¸ªcommitè¿›è¡Œåˆå¹¶","url":"https://lilei.pro/2016/03/31/Git-Squash-Commits/","content":"<blockquote>\n<p>å¦‚ä½•åœ¨Gitä¸­åˆå¹¶å¤šæ¬¡commitå‘¢ï¼Ÿ</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>é€šè¿‡Gitå¯¹æœ€è¿‘çš„nä¸ªcommitè¿›è¡Œåˆå¹¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git reset --soft HEAD~n</span><br><span class=\"line\">$ git commit</span><br></pre></td></tr></table></figure>\n<p>ç‚’é¸¡ç®€å•ï¼</p>\n<hr>\n<p>å¦‚æœè¦åˆå¹¶çš„æ˜¯æœ‰é—´éš”çš„commitï¼Œç¬”è€…ç›®å‰è¿˜æ²¡æœ‰å­¦ä¼šâ€¦</p>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"Android Performance Patterns - s4ep7 Removing Unused Code","url":"https://lilei.pro/2016/03/31/Android-Performance-Patterns-s4ep7-Removing-Unused-Code/","content":"<blockquote>\n<p>Third party libraries can be some serious time savers for Android development. They allow us to do awesome things in our app without having to write any of the functionality ourselves. Thatâ€™s a pretty big convenience. Whatâ€™s not convenient though is the code-bloat they can often come with.</p>\n</blockquote>\n<blockquote>\n<p><a href=\"https://www.youtube.com/watch?v=5frxLkO4oTM&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=17\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/5frxLkO4oTM?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Third-Party-Library\"><a href=\"#Third-Party-Library\" class=\"headerlink\" title=\"Third Party Library\"></a>Third Party Library</h4><p>åœ¨è‡ªå·±çš„appä¸­ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æœ‰å“ªäº›ä¼˜ç‚¹å‘¢ï¼Ÿ</p>\n<ul>\n<li>ç¬¬ä¸‰æ–¹åº“å¯ä»¥ä¸ºæˆ‘ä»¬æä¾›ä¾¿æ·çš„åŠŸèƒ½</li>\n<li>å®ƒä»¬éƒ½ç»è¿‡äº†è‰¯å¥½å…¨é¢çš„æµ‹è¯•ï¼Œå¹¶ä¸”åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¾—åˆ°éªŒè¯</li>\n</ul>\n<p><img src=\"/img/160331_app_s4ep7/advantage.png\" alt=\"\"></p>\n<p>è€Œç¼ºç‚¹å¯èƒ½å°±ä¸é‚£ä¹ˆæ˜æ˜¾</p>\n<ul>\n<li>ä½ å¿…é¡»å¼•ç”¨æ•´ä¸ªç¬¬ä¸‰æ–¹åº“ï¼Œå³ä½¿ç”¨åˆ°çš„åªæ˜¯å…¶ä¸­ä¸€ä¸ªç®€å•çš„ç±»â€”â€”è¿™è¢«å«åš<code>code bloat</code>ï¼ˆä»£ç è†¨èƒ€ï¼‰</li>\n<li>è¿™ä¼šä½¿ä½ çš„apkä½“ç§¯å¢å¤§</li>\n<li>ç”šè‡³å¯èƒ½è§¦åŠ65kçš„æ–¹æ³•æ•°å¤©èŠ±æ¿ï¼ˆå…³äº65kï¼Œè¯·æŸ¥é˜…è¿™ä¸€ç¯‡<a href=\"https://developer.android.com/tools/building/multidex.html\" target=\"_blank\" rel=\"noopener\">Building Apps with Over 65K Methods</a>ï¼‰</li>\n</ul>\n<p><img src=\"/img/160331_app_s4ep7/code_bloat.png\" alt=\"\"></p>\n<p>å¯¹äº<code>MultiDex</code>ï¼Œå°å“¥ç»™å‡ºäº†éå¸¸å¹½é»˜çš„æè¿°</p>\n<blockquote>\n<p>Itâ€™s pretty much as much fun going to the dentistâ€¦</p>\n</blockquote>\n<hr>\n<h4 id=\"Proguard\"><a href=\"#Proguard\" class=\"headerlink\" title=\"Proguard\"></a>Proguard</h4><p>ä½œç”¨</p>\n<ul>\n<li>Shrinkï¼šç²¾ç®€ä»£ç ï¼Œå»é™¤æ— ç”¨çš„ç±»</li>\n<li>Optimizeï¼šä¼˜åŒ–é€»è¾‘</li>\n<li>Obfuscateï¼šæ··æ·†ï¼Œå¢åŠ é€†å‘å·¥ç¨‹çš„éš¾åº¦</li>\n</ul>\n<p>ä¸€ä¸ªä¾‹å­æ˜¯ï¼Œä½¿ç”¨Proguardåï¼ŒåŸæœ¬8.4mbçš„Google IO appè¢«ç¼©å‡åˆ°äº†4.1mb</p>\n<p><img src=\"/img/160331_app_s4ep7/proguard.png\" alt=\"\"></p>\n<p>å¼€å¯ proguard ä¹Ÿååˆ†ç®€å•ï¼Œåªè¦åœ¨ gradle æ–‡ä»¶ä¸­å°† <code>minifyEnabled</code> å±æ€§å£°æ˜ä¸º <code>true</code>ï¼Œå¹¶å†™æ˜ <code>proguardFiles</code> è·¯å¾„</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android &#123;</span><br><span class=\"line\">\t...</span><br><span class=\"line\">\tbuildTypes &#123;</span><br><span class=\"line\">\t\trelease &#123;</span><br><span class=\"line\">\t\t\tminifyEnabled <span class=\"literal\">true</span></span><br><span class=\"line\">\t\t\tproguardFiles getDefaultProguardFile(<span class=\"string\">'proguard-android.txt'</span>)</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œproguardä¼šå¯¼è‡´åº”ç”¨åˆ°â€œåå°„â€çš„ä»£ç æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå› ä¸ºå®ƒä¼šæ”¹å˜æ–¹æ³•å&amp;ç±»åï¼Œéœ€è¦ç”¨ <code>keep</code> åœ¨ç›¸å…³ä»£ç ä¸Šå…³é—­proguard</p>\n<p><a href=\"http://developer.android.com/tools/help/proguard.html\" target=\"_blank\" rel=\"noopener\">ProGuard å®˜æ–¹æ–‡æ¡£</a></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"éª¨ç›†å‰å€¾101","url":"https://lilei.pro/2016/03/24/Fixing-Anterior-Pelvic-Tilt/","content":"<hr>\n<h4 id=\"å‰è¨€\"><a href=\"#å‰è¨€\" class=\"headerlink\" title=\"å‰è¨€\"></a>å‰è¨€</h4><p>éª¨ç›†å‰å€¾æ˜¯ä¸€ç§ä¸è‰¯çš„ä½“æ€ï¼Œå¦‚æœä½ åœ¨æ—©æ™¨é†’æ¥ä¸æ—¶æ„Ÿåˆ°ä¸‹èƒŒéƒ¨ç–¼ç—›ï¼›åœ¨å¥èº«æˆ¿é‡Œçš„é‡Œçš„æ·±è¹²ã€ç¡¬æ‹‰æ€»ä¼šå› ä¸ºä¸‹èƒŒåŠ›ç«­è€Œæœ‰æ‰€é˜»æ»ï¼›èº«ä½“æ›²çº¿ä¾§é¢çœ‹èµ·æ¥ä¸‹è…¹å‘å‰ã€è‡€éƒ¨å‘åçªå‡ºï¼Œé‚£ä¹ˆè¦å½“å¿ƒï¼Œå¾ˆå¯èƒ½ä½ æ­£åœ¨é­é‡éª¨ç›†å‰å€¾ã€‚</p>\n<a id=\"more\"></a>\n<hr>\n<h4 id=\"ä»€ä¹ˆæ˜¯éª¨ç›†å‰å€¾\"><a href=\"#ä»€ä¹ˆæ˜¯éª¨ç›†å‰å€¾\" class=\"headerlink\" title=\"ä»€ä¹ˆæ˜¯éª¨ç›†å‰å€¾\"></a>ä»€ä¹ˆæ˜¯éª¨ç›†å‰å€¾</h4><p>éª¨ç›†å‰å€¾ï¼ˆAnterior Pelvic Tiltï¼Œç®€ç§°APTï¼‰ï¼Œå¸¸è§äºä¹…åä¼æ¡ˆå·¥ä½œäººç¾¤ï¼Œå…·ä½“è¡¨ç°å°±æ˜¯è‡€éƒ¨åå‡¸ï¼Œè…¹éƒ¨å‘å‰é¡¶ï¼Œå‰æŒºåæ’…ï¼Œå›¾ä¸­çš„ç¬¬äºŒç§å³ä¸ºAPTã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/apt.jpeg\" alt=\"\"></p>\n<p>å¦å¤–ï¼Œåœ¨å¥èº«æˆ¿é‡Œä¸€äº›ä½“æ€å‘å±•ä¸å‡çš„äººèº«ä¸Šä¹Ÿç»å¸¸çœ‹åˆ°éª¨ç›†å‰å€¾çš„ç°è±¡ï¼Œæ•…ä¹Ÿç§°ä¸ºâ€œå¥ç¾è…°â€ã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/gym_waist_2.jpg\" alt=\"\"></p>\n<p>ä»éª¨éª¼é€è§†å›¾ä¸Šæ¥çœ‹</p>\n<p><img src=\"/img/160325_fixing_apt/apt_bone.jpg\" alt=\"\"></p>\n<hr>\n<h4 id=\"å¦‚ä½•åˆ¤æ–­éª¨ç›†å‰å€¾\"><a href=\"#å¦‚ä½•åˆ¤æ–­éª¨ç›†å‰å€¾\" class=\"headerlink\" title=\"å¦‚ä½•åˆ¤æ–­éª¨ç›†å‰å€¾\"></a>å¦‚ä½•åˆ¤æ–­éª¨ç›†å‰å€¾</h4><p>åˆ¤æ–­éª¨ç›†å‰å€¾çš„åŸå› æœ‰å¾ˆå¤šç§ï¼Œå½“ç„¶ï¼Œå»æ­£è§„åŒ»é™¢è¿›è¡Œå¤–ç§‘ï¼ˆè„ŠæŸ±ï¼‰æ£€éªŒæ˜¯æœ€çœäº‹ä¹Ÿæœ€å‡†ç¡®çš„æ–¹æ³•ã€‚åŒ»å­¦æ‰‹æ®µä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ˜¾è‘—ç‰¹å¾å¯ä»¥æ¯”è¾ƒå®¹æ˜“çš„å¸®åŠ©æˆ‘ä»¬é‰´åˆ«éª¨ç›†å‰å€¾ã€‚</p>\n<ul>\n<li>æ–¹æ³•ä¸€ï¼šå¯¹é•œè‡ªæ£€ï¼Œä¸ç®¡æ˜¯å¥èº«æˆ¿è¿˜æ˜¯å§å®¤çš„ï¼Œåªè¦æœ‰ä¸€é¢è¶³å¤Ÿå¤§çš„é•œå­ï¼ŒæŒ‰ç…§æ­£å¸¸æ”¾æ¾å§¿æ€ç«™ç«‹ï¼Œè§‚å¯Ÿè…°è…¹åŠè‡€éƒ¨ã€‚</li>\n</ul>\n<p><img src=\"/img/160325_fixing_apt/gym_waist.jpg\" alt=\"\"></p>\n<ul>\n<li>æ–¹æ³•äºŒï¼šè´´å¢™ç«‹æ­£ï¼Œå¦‚æœèƒŒåèƒ½æ”¾å…¥ä¸€æŒï¼ŒåŸºæœ¬èº«å§¿è¿˜ç®—æ­£å¸¸ï¼›å¦‚æœèƒ½æ”¾å…¥ä¸€æ‹³ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯éª¨ç›†å‰å€¾ã€‚</li>\n</ul>\n<p><img src=\"/img/160325_fixing_apt/stand_by_wall.jpg\" alt=\"\"></p>\n<ul>\n<li>æ–¹æ³•ä¸‰ï¼šåœ¨ç¡è§‰æ—¶ï¼Œå¦‚æœä»°ç¡æ—¶è…°éƒ¨æ€»æ˜¯æ‚¬ç©ºï¼Œç¡é†’åä¼´éšç–¼ç—›ï¼Œä»¥è‡³äºä¸å¾—ä¸é‡‡å–ä¾§å§æ–¹å¼å…¥ç¡ï¼Œè¿™æ—¶ä¹Ÿè¦å°å¿ƒäº†ã€‚</li>\n</ul>\n<hr>\n<h4 id=\"éª¨ç›†å‰å€¾çš„èµ·å› \"><a href=\"#éª¨ç›†å‰å€¾çš„èµ·å› \" class=\"headerlink\" title=\"éª¨ç›†å‰å€¾çš„èµ·å› \"></a>éª¨ç›†å‰å€¾çš„èµ·å› </h4><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹APTæ‚£è€…çš„è„Šæ¤ä¸æ­£å¸¸çš„è„Šæ¤ï¼ŒAPTæ‚£è€…çš„å°¾æ¤å‘ˆç°äº†ä¸€ä¸ªå¤¸å¼ çš„å¼§åº¦</p>\n<p><img src=\"/img/160325_fixing_apt/exaggerated_lumbar_curve.jpeg\" alt=\"\"></p>\n<p>é€ æˆè¿™ä¸€åˆ‡çš„æ ¹æœ¬åŸå› æ˜¯â€”â€”</p>\n<p><strong>è‚ŒåŠ›ä¸å‡</strong></p>\n<p>æƒ³è±¡ä½ çš„ç›†è…”ï¼Œå®ƒçš„å‰ä¸Šï¼ˆè…¹ç›´è‚Œï¼‰ã€åä¸‹ï¼ˆè‡€å¤§è‚Œã€è…˜ç»³è‚Œï¼‰æ˜¯è‚Œè‚‰ç»„Aï¼Œå®ƒçš„åä¸Šï¼ˆç«–è„Šè‚Œï¼‰ã€å‰ä¸‹ï¼ˆé«‚è…°è‚Œã€è‚¡ç›´è‚Œï¼‰ä¸ºè‚Œè‚‰ç»„Bã€‚</p>\n<ul>\n<li>Aä¸Bä¹‹é—´ç»´æŒå¹³è¡¡æ—¶ï¼Œäººçš„ç›†è…”å¤„äºä¸€ä¸ªåˆšå¥½çš„ç›´ç«‹çŠ¶æ€ã€‚</li>\n<li>Aå¼±Bå¼ºæ—¶ï¼Œé€ æˆéª¨ç›†å‰å€¾ï¼ŒAnterior Pelvic Tiltï¼ˆAPTï¼‰</li>\n<li>Aå¼ºBå¼±æ—¶ï¼Œé€ æˆéª¨ç›†åå€¾ï¼ŒPosterior Pelvic Tiltï¼ˆPPTï¼‰</li>\n</ul>\n<p>åŠ›çŸ©å›¾</p>\n<p><img src=\"/img/160325_fixing_apt/balance.jpg\" alt=\"\"></p>\n<p>ç«–è„Šè‚Œã€é«‚è…°è‚Œå¤ªå¼ºï¼ˆè¿‡çŸ­ï¼‰å¯¼è‡´éª¨ç›†å‰å€¾</p>\n<p><img src=\"/img/160325_fixing_apt/incorrect.jpeg\" alt=\"\"></p>\n<p>æ­£å¸¸çŠ¶æ€ä¸‹ï¼Œè…¹ç›´è‚Œã€è‡€å¤§è‚Œä¼šèµ·åˆ°æŠ‘åˆ¶éª¨ç›†å‰å€¾çš„æ•ˆæœ</p>\n<p><img src=\"/img/160325_fixing_apt/correct.jpeg\" alt=\"\"></p>\n<p>ä¸ºä»€ä¹ˆç«–è„Šè‚Œã€é«‚è…°è‚Œä¼šèµ·ä¸€ä¸ªè´Ÿé¢ä½œç”¨å‘¢ï¼Ÿ</p>\n<p>ç«–è„Šè‚Œï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æˆ‘ä»¬æ‰€è¯´çš„â€œä¸‹èƒŒéƒ¨â€ï¼Œå½“ç»ƒä¹ ç¡¬æ‹‰ã€æ·±è¹²æ—¶éƒ½ä¼šå¸¦åˆ°è¿™éƒ¨åˆ†è‚Œè‚‰ã€‚è€Œè‚Œè‚‰è¶Šå¼ºå£®ï¼Œè‚Œçº¤ç»´å¾€å¾€ä¹Ÿä¼šå˜å¾—è¶ŠçŸ­è¶Šç²—ï¼Œå¯¼è‡´æ‹‰åŠ¨ç›†è…”å‘å‰å€¾æ–œã€‚</p>\n<p>è…¹ç›´è‚Œã€è…¹å¤–æ–œè‚Œã€è‡€å¤§è‚Œã€è…˜ç»³è‚Œè¿™å‡ å¤„è‚Œè‚‰ï¼Œå¾€å¾€åœ¨è®­ç»ƒä¸­å¾—ä¸åˆ°é‡è§†ï¼Œå¯¼è‡´æ¾å®æ— åŠ›ï¼Œå¸¦ä¸åŠ¨ç›†è…”å›å½’ã€‚</p>\n<p>è¯´åˆ°åº•ï¼Œå°±æ˜¯ä¸€ç»„<strong>æ‹®æŠ—è‚Œ</strong>ç›¸äº’ä¹‹é—´å‘å±•ä¸å‡çš„é—®é¢˜ã€‚</p>\n<p>è¿™ä½ç¾å›½å¤§å”å¾ˆå¥½åœ°è§£é‡Šäº†éª¨ç›†å‰å€¾çš„èµ·å› ï¼Œå¹¶ä»‹ç»äº†å‡ ç§å®¹æ˜“æ“ä½œçš„çŸ«æ­£æ–¹æ³•ã€‚</p>\n<p><strong>YouTubeè§†é¢‘ï¼Œè¯·è‡ªå¤‡äº‘æ¢¯</strong></p>\n<p>Your Back is Whack!<br><a href=\"https://www.youtube.com/watch?v=BEn61BL4Nwk\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=BEn61BL4Nwk</a></p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/BEn61BL4Nwk\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<h4 id=\"éª¨ç›†å‰å€¾çš„å±å®³\"><a href=\"#éª¨ç›†å‰å€¾çš„å±å®³\" class=\"headerlink\" title=\"éª¨ç›†å‰å€¾çš„å±å®³\"></a>éª¨ç›†å‰å€¾çš„å±å®³</h4><ul>\n<li>ä¸‘ï¼è®©äººå°è…¹å‰å‡¸ã€è‡€éƒ¨æ¨ªå‘å‘å±•å¹¶ä¸‹å‚ï¼›è¾›è¾›è‹¦è‹¦ç»ƒæˆçš„8å—ï¼6å—è…¹è‚Œä»ä¾§é¢çœ‹å°±åƒè£¹åœ¨äº†ä¸€ä¸ªçƒå¤–é¢</li>\n<li>è…°æ¤å‰å‡¸ï¼Œç—…ç†æ€§å§¿åŠ¿ä¸æ­£ç¡®ï¼Œå¿…ç„¶ä¼šå¯¼è‡´è…°é…¸èƒŒç—›ï¼Œå¹¶ä¸”è‚©é¢ˆé…¸èƒ€ã€‚æ­¤å¤–éª¨ç›†æ‰¿æ‰˜ç€è…¹éƒ¨å†…è„ç­‰ï¼Œå¦‚æœéª¨ç›†å€¾æ–œï¼Œä¹Ÿä¼šå¯¼è‡´å†…è„çš„è¿è½¬ä¸ç•…</li>\n<li>åƒµç¡¬çš„ä¸‹èƒŒéƒ¨æˆä¸ºé˜»ç¢ç¡¬æ‹‰ã€æ·±è¹²æ°´å¹³è¿›ä¸€æ­¥æé«˜çš„ç“¶é¢ˆ</li>\n<li>å¦‚æœè¯´éª¨ç›†å‰å€¾æœ‰ä»€ä¹ˆå¥½å¤„çš„è¯ï¼Œå¤§æ¦‚å°±æ˜¯ä¼šäº§ç”Ÿâ€œå‰å‡¸åç¿˜â€çš„æ•ˆæœã€‚ä½ æ‰€è§åˆ°çš„ç¿˜è‡€ï¼Œææœ‰å¯èƒ½æ˜¯éª¨ç›†å‰å€¾é€ æˆçš„â€œä¼ªâ€ç¿˜è‡€</li>\n</ul>\n<p><img src=\"/img/160325_fixing_apt/nice_glute.jpg\" alt=\"\"></p>\n<hr>\n<h4 id=\"å¦‚ä½•çŸ«æ­£éª¨ç›†å‰å€¾\"><a href=\"#å¦‚ä½•çŸ«æ­£éª¨ç›†å‰å€¾\" class=\"headerlink\" title=\"å¦‚ä½•çŸ«æ­£éª¨ç›†å‰å€¾\"></a>å¦‚ä½•çŸ«æ­£éª¨ç›†å‰å€¾</h4><p>çŸ«æ­£éª¨ç›†å‰å€¾ï¼Œæœ€æ ¹æœ¬çš„åŸåˆ™åªæœ‰ä¸€ç‚¹</p>\n<p><strong>å¢å¼ºå¼±åŠ¿è‚Œè‚‰ï¼Œæ‹‰ä¼¸å¼ºåŠ¿è‚Œè‚‰</strong></p>\n<ul>\n<li>â€œå¼±åŠ¿è‚Œè‚‰â€ï¼šå°†éª¨ç›†æ‹‰å›å¹³è¡¡çŠ¶æ€çš„è…¹ç›´è‚Œã€è…¹å¤–æ–œè‚Œã€è‡€å¤§è‚Œã€è…˜ç»³è‚Œ</li>\n<li>â€œå¼ºåŠ¿è‚Œè‚‰â€ï¼šå°†éª¨ç›†å‘å‰å€¾çŠ¶æ€æ‹‰åŠ¨çš„é«‹éƒ¨å±ˆè‚Œï¼ˆé«‚è…°è‚Œ è‚¡ç›´è‚Œï¼‰ã€ç«–è„Šè‚Œ</li>\n</ul>\n<p>ä¸€æ–¹é¢å¼ºåŒ–å¼±åŠ¿è‚Œè‚‰ï¼Œä½¿èº«ä½“å¢å¼ºå°†éª¨ç›†æ‹‰å›åŸè§’åº¦çš„æ‰­åŠ›ï¼Œå¦ä¸€æ–¹é¢æ‹‰ä¼¸å¼ºåŠ¿è‚Œè‚‰ï¼Œæ”¾æ¾ç´§å¼ çš„è‚Œè‚‰ï¼Œæ‹‰é•¿è‚Œçº¤ç»´</p>\n<p>å¼ºåŒ–è‡€å¤§è‚Œã€è…˜ç»³è‚Œã€è…¹å¤–æ–œè‚Œã€è…¹ç›´è‚Œ</p>\n<ul>\n<li>è‡€å¤§è‚Œï¼šè‡€æ¡¥ï¼Œä»°å§é¡¶è‡€ï¼Œç¾å¼ç¡¬æ‹‰</li>\n<li>è…˜ç»³è‚Œï¼šä¿¯å§è…¿å¼¯ä¸¾ï¼Œåå‘è…¿å¼¯ä¸¾</li>\n<li>è…¹è‚Œï¼šRKCå¹³æ¿æ”¯æ’‘ï¼Œåå‘å·è…¹ï¼Œæ‚¬å‚Vå­—ä¸¾è…¿</li>\n</ul>\n<p>æ‹‰ä¼¸ç«–è„Šè‚Œã€é«‹éƒ¨å±ˆè‚Œï¼ˆé«‚è…°è‚Œã€è‚¡ç›´è‚Œï¼‰</p>\n<ul>\n<li>ç«–è„Šè‚Œï¼šæ³¡æ²«è½´æ”¾æ¾ã€åå§¿æ‹‰ä¼¸ã€æ‰¶æ†ä¸‹è¹²</li>\n<li>é«‚è…°è‚Œï¼šå¼“æ­¥æ‹‰ä¼¸</li>\n<li>è‚¡ç›´è‚Œï¼šä¾§å§æ‹‰è…¿</li>\n</ul>\n<p>ä¸‹é¢æ˜¯ä¸€äº›è®­ç»ƒæ–¹æ³•çš„å›¾ç‰‡ï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œæ¯ä¸ªäººçš„èº«ä½“æ¡ä»¶ä¸åŒï¼Œè‚Œè‚‰å¼ºå¼±æœ‰åˆ«ï¼Œè¦æ ¹æ®å®é™…æƒ…å†µé€‰å–ä¸åŒçš„åŠ¨ä½œï¼›å°±ç®—æ˜¯åŒä¸€ä¸ªåŠ¨ä½œï¼Œåœ¨åšçš„æ—¶å€™ä½¿ç”¨ä¸åŒçš„è§’åº¦ã€æ‹‰ä¼¸ä¸åŒçš„æ—¶é—´ï¼Œä¹Ÿä¼šäº§ç”Ÿè¿¥å¼‚çš„æ•ˆæœã€‚</p>\n<hr>\n<h4 id=\"è‡€å¤§è‚Œï¼ˆå¼ºåŒ–ï¼‰\"><a href=\"#è‡€å¤§è‚Œï¼ˆå¼ºåŒ–ï¼‰\" class=\"headerlink\" title=\"è‡€å¤§è‚Œï¼ˆå¼ºåŒ–ï¼‰\"></a>è‡€å¤§è‚Œï¼ˆå¼ºåŒ–ï¼‰</h4><p>è‡€æ¡¥ï¼šä¸‹èƒŒæ”¾æ¾ï¼Œé è‡€éƒ¨æ”¶ç´§å‘åŠ›ï¼Œé¡¶å³°æ”¶ç¼©ï¼Œæ„Ÿå—è‡€å¤§è‚Œå¤¹ç´§å¸¦æ¥çš„åˆºæ¿€æ„Ÿã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/glute_bridge.jpg\" alt=\"\"></p>\n<p>è‡€æ¡¥å¯¹äºå¡‘é€ ç¿˜è‡€æœ‰ç€æ— å¯æ¯”æ‹Ÿçš„ä½œç”¨ï¼Œæ³¨æ„åœ¨åŠ¨ä½œé¡¶ç«¯æ—¶èº«ä½“åº”è¯¥ä¿æŒä¸€æ¡ç›´çº¿ï¼Œè…¹éƒ¨ä¸è¦ä¸Šé¡¶ã€‚</p>\n<p>è¿›é˜¶è‡€æ¡¥ä½¿ç”¨å•è…¿æ”¯æ’‘ã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/incorrect_glute_bridge.jpeg\" alt=\"\"></p>\n<p>ä¸‹é¢æ˜¯è§†é¢‘è®²è§£ï¼š</p>\n<p><a href=\"https://youtu.be/viyoVBR_J5c\" target=\"_blank\" rel=\"noopener\">https://youtu.be/viyoVBR_J5c</a></p>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/viyoVBR_J5c\" frameborder=\"0\" allowfullscreen></iframe>\n\n<p>ä»°å§é¡¶è‡€ï¼Œè‡€æ¡¥çš„è´Ÿé‡å¼ºåŒ–ç‰ˆï¼Œè¯·é‡åŠ›è€Œè¡Œï¼Œä¹Ÿå¯å€ŸåŠ©é•¿å‡³é¡¶åœ¨èƒŒéƒ¨è¿›è¡Œã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/glute_bridge_plus.jpg\" alt=\"\"></p>\n<p>è§†é¢‘è®²è§£ï¼š</p>\n<p><a href=\"https://youtu.be/vSA-EBNUb-M\" target=\"_blank\" rel=\"noopener\">https://youtu.be/vSA-EBNUb-M</a></p>\n<iframe width=\"420\" height=\"315\" src=\"https://www.youtube.com/embed/vSA-EBNUb-M\" frameborder=\"0\" allowfullscreen></iframe>\n\n<p>ç¾å¼ç¡¬æ‹‰ï¼šæˆ‘ä»¬Glute Labå·²ç»å‘ç°åœ¨è¿›è¡Œç½—é©¬å°¼äºšç¡¬æ‹‰è®­ç»ƒæ—¶ï¼Œè‡€éƒ¨å‡ ä¹æ²¡æœ‰å‚ä¸æ´»åŠ¨ï¼Œä¸»è¦æ˜¯è…˜ç»³è‚Œï¼Œè‡³å°‘åœ¨è½»è´Ÿé‡çš„æ—¶å€™æ˜¯è¿™æ ·ã€‚è¿™ä¸æ˜¯ä¸€ä»¶å¥½äº‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£åœ¨é«‹å±ˆä¼¸è¿‡ç¨‹ä¸­å¦‚ä½•åˆ©ç”¨è‡€å¤§è‚Œã€‚ç¾å¼ç¡¬æ‹‰ä¸ç½—é©¬å°¼äºšç¡¬æ‹‰éå¸¸ç›¸ä¼¼ï¼Œç„¶è€Œå®ƒåŠ å…¥äº†ä¸€äº›éª¨ç›†è¿åŠ¨ã€‚åœ¨æ é“ƒä¸‹é™çš„è¿‡ç¨‹ä¸­ï¼Œä½ éœ€è¦ä¿æŒéª¨ç›†ç¨å‘å‰å€¾ã€‚åœ¨æ é“ƒä¸Šå‡çš„è¿‡ç¨‹ä¸­ï¼Œä½ éœ€è¦åˆ©ç”¨è‡€å¤§è‚Œçš„æ”¶ç¼©æ¥è®©éª¨ç›†ç¨å‘åå€¾ã€‚è¦æ³¨æ„çš„æ˜¯éª¨ç›†åå€¾æ˜¯ç”±è‡€éƒ¨çš„æ”¶ç¼©æŒ¤å‹è¾¾æˆçš„ï¼è€Œä¸æ˜¯è…°æ¤ç¿»è½¬ï¼å½“ç¡¬æ‹‰è‡³èº¯å¹²ç›´ç«‹æ—¶ï¼Œæ é“ƒå¯èƒ½ç”±äºä½ çš„è‡€éƒ¨æ”¶ç¼©ä»è€Œå‘å‰ç§»åŠ¨ã€‚ä½ å¯ä»¥æŠŠç¾å¼ç¡¬æ‹‰æƒ³è±¡æˆä¸€ç§ä»¥è‡€éƒ¨ä¸ºä¸­å¿ƒçš„ç½—é©¬å°¼äºšç¡¬æ‹‰ã€‚å†æ¬¡å¼ºè°ƒï¼Œä¾é è‡€å¤§è‚Œä½¿éª¨ç›†å‘åå€¾ï¼Œä¿æŒè…°æ¤ç¨³å®šã€‚</p>\n<p>ç¾å¼ç¡¬æ‹‰ï¼›æ é“ƒä½äºåº•éƒ¨æ—¶ï¼Œä¿æŒè„ŠæŸ±ä¸­ç«‹ï¼›æ é“ƒä½äºé¡¶éƒ¨æ—¶ï¼Œå¼¯æ›²èƒ¸æ¤ï¼ˆä¸ŠèƒŒéƒ¨ï¼‰ï¼ŒåŒæ—¶éª¨ç›†åå€¾</p>\n<p><img src=\"/img/160325_fixing_apt/usa_dead_lift_1.png\" alt=\"\"></p>\n<p>æ é“ƒè‡³é¡¶éƒ¨ï¼ŒæŒ¤å‹è‡€å¤§è‚Œä½†é¿å…è…°æ¤ç¿»è½¬</p>\n<p><img src=\"/img/160325_fixing_apt/usa_dead_lift_2.png\" alt=\"\"></p>\n<p>Dimelç¡¬æ‹‰æ˜¯å‡ å¹´å‰ç”±è·¯æ˜“Â·è¥¿è’™æ–¯å’Œç¾å›½è¥¿éƒ¨æ é“ƒä¿±ä¹éƒ¨æ¨å¹¿å¼€æ¥çš„ã€‚ä½ å¯ä»¥çœ‹æˆæ˜¯å¤šæ¬¡æ•°çš„ç¾å¼ç¡¬æ‹‰ã€‚ç”¨ä½ æœ€å¤§é‡é‡çš„30%-40%è´Ÿé‡ç»ƒä¹ 15-30æ¬¡ç¡¬æ‹‰ï¼Œä»¥æœ€å¤§åŒ–çš„åˆºæ¿€ä½ çš„è‡€å¤§è‚Œï¼Œå¢å¼ºæ³µæ„Ÿã€‚å¦‚æœä½ åŠ¨ä½œæ­£ç¡®ï¼Œè¿™å’Œè‡€æ¨ï¼ˆHip Thrustï¼‰æœ‰ç‚¹åƒçš„ã€‚</p>\n<p>ç¾å¼ç¡¬æ‹‰çš„è§†é¢‘æ¼”ç¤ºï¼š<a href=\"https://youtu.be/1aVjkPzKovc\" target=\"_blank\" rel=\"noopener\">https://youtu.be/1aVjkPzKovc</a></p>\n<iframe width=\"420\" height=\"315\" src=\"https://www.youtube.com/embed/1aVjkPzKovc\" frameborder=\"0\" allowfullscreen></iframe>\n\n<p>å¦å¤–ï¼Œå…³äºç½—é©¬å°¼äºšç¡¬æ‹‰ã€ç¾å¼ç¡¬æ‹‰ã€å±ˆè…¿ç¡¬æ‹‰ã€ç›´è…¿ç¡¬æ‹‰ï¼Œè¯·å‚è€ƒä¸‹é¢è¿™ç¯‡æ–‡ç« </p>\n<p><a href=\"http://www.actrainer.com/bbs/detail_962\" target=\"_blank\" rel=\"noopener\">http://www.actrainer.com/bbs/detail_962</a></p>\n<hr>\n<h4 id=\"è…˜ç»³è‚Œï¼ˆå¼ºåŒ–ï¼‰\"><a href=\"#è…˜ç»³è‚Œï¼ˆå¼ºåŒ–ï¼‰\" class=\"headerlink\" title=\"è…˜ç»³è‚Œï¼ˆå¼ºåŒ–ï¼‰\"></a>è…˜ç»³è‚Œï¼ˆå¼ºåŒ–ï¼‰</h4><p>ä¿¯å§è…¿å¼¯ä¸¾ï¼šå¤§éƒ¨åˆ†å¥èº«æˆ¿é‡Œéƒ½ä¼šæœ‰çš„å™¨æ¢°ï¼Œæ³¨æ„è®­ç»ƒæ—¶é›†ä¸­æ³¨æ„åŠ›åˆ°è…˜ç»³è‚Œä¸Šï¼Œæ„Ÿå—è‚Œè‚‰æ”¶ç¼©ã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/hsj_strenthen.jpeg\" alt=\"\"></p>\n<p>åå‘è…¿å¼¯ä¸¾ï¼šéœ€è¦å€ŸåŠ©ç‰¹å®šå™¨æ¢°æˆ–è€…ä¼™ä¼´å¸®åŠ©æ‰èƒ½è¿›è¡Œï¼ŒæŒç»­å¯¹è…˜ç»³è‚Œã€è‡€å¤§è‚Œè¿›è¡Œç‹‚è½°æ»¥ç‚¸ã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/hsj_reverse_strenthen.jpg\" alt=\"\"></p>\n<hr>\n<h4 id=\"è…¹è‚Œï¼ˆå¼ºåŒ–ï¼‰\"><a href=\"#è…¹è‚Œï¼ˆå¼ºåŒ–ï¼‰\" class=\"headerlink\" title=\"è…¹è‚Œï¼ˆå¼ºåŒ–ï¼‰\"></a>è…¹è‚Œï¼ˆå¼ºåŒ–ï¼‰</h4><p>RKCå¹³æ¿æ”¯æ’‘ï¼šè¿™é¡¹å¹³æ¿æ”¯æ’‘å’Œä¸€èˆ¬çš„åˆå§‹åŠ¨ä½œæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯ä½ èº«ä½“è‚Œè‚‰çš„ç´§å¼ ç¨‹åº¦ä¼šç›¸å¯¹è¾ƒé«˜ï¼Œå¹³è¡¡æ„Ÿçš„è¦æ±‚ä¹Ÿä¼šæ›´é«˜ï¼Œç›¸å½“äºä¸€èˆ¬å¹³æ¿æ”¯æ’‘4å€çš„è¿åŠ¨é‡ï¼Œè€Œä¸”æ¯ç»„ä»…ä»…éœ€è¦ä½ 10ç§’çš„æ—¶é—´ï¼Œä½ å°±èƒ½å¤Ÿæ‹¥æœ‰åšå®çš„6å—è…¹è‚Œäº†ã€‚è®©æˆ‘ä»¬æ¥æ¥ä¸‹æ¥çœ‹ä¸€äº›RKCå¹³æ¿æ”¯æ’‘åº”è¯¥æ€ä¹ˆåšã€‚</p>\n<ol>\n<li>å…ˆä»¥ä¼ ç»Ÿçš„å¹³æ¿æ”¯æ’‘åšå¥½å‡†å¤‡å§¿åŠ¿ï¼Œå°è‡‚ç€åœ°ï¼Œä¸è‚©éƒ¨å¤„åœ¨ä¸€æ¡ç›´çº¿ä¸Šï¼ŒåŒè„šå¹¶æ‹¢ï¼Œé¢éƒ¨æœä¸‹ã€‚èº«ä½“ä»å¤´åˆ°è„šå‘ˆä¸€æ¡ç›´çº¿ã€‚</li>\n<li>åŒæ‰‹æ¡æ‹³ï¼Œä¸¤è‚©å¼ å¼€ï¼Œå°è‡‚å‘åœ°é¢ç”¨åŠ›ï¼Œå°±å¥½åƒä½ è¦æŠŠä½ çš„å°è‡‚å¾€ä½ çš„è„šæ‰€åœ¨çš„åœ°æ–¹æ‹–æ‹½ä¸€æ ·ã€‚</li>\n<li>è‡€éƒ¨ä»¥åŠè„šç­‹ç”¨åŠ›ï¼Œè®©ä½ çš„å°¾æ¤éª¨æŠ¬å‡è‡³å¾®å¾®å‘å¤´éƒ¨å€¾æ–œï¼Œä¿æŒåèƒŒä¸‹éƒ¨åˆ†æŒºç›´ï¼Œè¿™æ—¶ä½ å°±ä¼šæ„Ÿè§‰åˆ°ä½ çš„è‡€éƒ¨å’Œè…¿å¼€å§‹æœ‰ç›¸åº”çš„æ„Ÿè§‰äº†ã€‚ä¿æŒè†ç›–æ‰“ç›´ã€‚</li>\n<li>ä¿æŒå§¿åŠ¿ï¼Œæ³¨æ„ä¿æŒæ•´ä¸ªèº«ä½“è‚Œè‚‰çš„æœ€å¤§ç´§å¼ ç¨‹åº¦ã€‚</li>\n</ol>\n<p><img src=\"/img/160325_fixing_apt/rkcp.jpg\" alt=\"\"></p>\n<p>RKCPçš„è§†é¢‘è®²è§£ï¼š<a href=\"https://youtu.be/6TKktamzq4o\" target=\"_blank\" rel=\"noopener\">https://youtu.be/6TKktamzq4o</a></p>\n<iframe width=\"420\" height=\"315\" src=\"https://www.youtube.com/embed/6TKktamzq4o\" frameborder=\"0\" allowfullscreen></iframe>\n\n<p>åå‘å·è…¹ï¼š</p>\n<p><img src=\"/img/160325_fixing_apt/reverse_crunches.jpg\" alt=\"\"></p>\n<p><strong>åŠ¨ä½œæè¿°</strong></p>\n<ol>\n<li>ä»°å§å¼€å§‹ï¼Œå¯ä»¥ç›´è…¿ï¼Œä¹Ÿå¯ä»¥æ›²è…¿ã€‚åŒæ‰‹ä¹Ÿå¯ä»¥æŠ“ä½å¥èº«å‡³æˆ–åºŠæ²¿æ”¯æ’‘ã€‚</li>\n<li>ä½¿ç”¨è…¹è‚Œçš„åŠ›é‡å·æ›²èº«ä½“ã€‚æ…¢æ…¢å°†å¤§è…¿æ‹‰è¿‘èº«ä½“ã€‚ä¸‹è…°éƒ¨ç¦»å¼€åœ°é¢ã€‚</li>\n<li>æ…¢æ…¢æ”¾ä¸‹ï¼Œé‡å¤ã€‚</li>\n</ol>\n<p><strong>åŠ¨ä½œè¦ç‚¹</strong></p>\n<p>é‡ç‚¹ä¸æ˜¯å¤§è…¿çš„è¿åŠ¨ï¼Œè€Œæ˜¯è…¹è‚Œå¸¦åŠ¨èº¯å¹²çš„å·æ›²ï¼ä½ ç”šè‡³å¯ä»¥ä¸æ”¹å˜å¤§è…¿ä¸èº«ä½“çš„è§’åº¦ï¼ˆè…¿å’Œé«‚ç­‰è‚Œç¾¤å°±ä¸å‘åŠ›äº†ï¼‰ã€‚</p>\n<p>è¯•ç€æŠŠå¤§è…¿å’Œèº¯å¹²çš„è§’åº¦ç»´æŒå›ºå®šã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/incorrect_reverse_crunches.jpeg\" alt=\"\"></p>\n<p>Vå­—ä¸¾è…¿ï¼šã€Šå›šå¾’å¥èº«ã€‹é‡Œé¢ï¼Œâ€œå…­è‰ºâ€ä¸­çš„â€œä¸¾è…¿â€æœ€ç»ˆå¼ï¼Œæ³¨æ„åœ¨ä¸¾èµ·ï¼ä¸‹æ”¾çš„è¿‡ç¨‹ä¸­æœ‰æ„è¯†åœ°æ§åˆ¶è…¹éƒ¨è‚Œè‚‰â€”â€”å°¤å…¶æ˜¯ä¸‹è…¹éƒ¨ï¼Œä¸è¦å€ŸåŠ©æƒ¯æ€§ç”©ä¸Šå»ã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/v.jpg\" alt=\"\"></p>\n<p>è§†é¢‘è®²è§£ï¼š<a href=\"https://youtu.be/rI1xHnMVcfk\" target=\"_blank\" rel=\"noopener\">https://youtu.be/rI1xHnMVcfk</a></p>\n<iframe width=\"420\" height=\"315\" src=\"https://www.youtube.com/embed/rI1xHnMVcfk\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<h4 id=\"ç«–è„Šè‚Œï¼ˆæ‹‰ä¼¸ï¼‰\"><a href=\"#ç«–è„Šè‚Œï¼ˆæ‹‰ä¼¸ï¼‰\" class=\"headerlink\" title=\"ç«–è„Šè‚Œï¼ˆæ‹‰ä¼¸ï¼‰\"></a>ç«–è„Šè‚Œï¼ˆæ‹‰ä¼¸ï¼‰</h4><p>æ³¡æ²«è½´æ”¾æ¾</p>\n<p><img src=\"/img/160325_fixing_apt/foam_roller.jpeg\" alt=\"\"></p>\n<p>æ³¡æ²«è½´è®²è§£è§†é¢‘ï¼ˆåŒæ ·æ¥è‡ªYouTubeï¼‰</p>\n<p><a href=\"https://youtu.be/QJLxruO3su0\" target=\"_blank\" rel=\"noopener\">https://youtu.be/QJLxruO3su0</a></p>\n<iframe width=\"420\" height=\"315\" src=\"https://www.youtube.com/embed/QJLxruO3su0\" frameborder=\"0\" allowfullscreen></iframe>\n\n<p>åå§¿æ‹‰ä¼¸ï¼šååœ¨æ¤…å­ä¸Šï¼ŒåŒè„šæ‰“å¼€ï¼Œè‡€éƒ¨ååœ¨æ¤…é¢çš„å‰é¢ï¼Œä¸Šèº«ç›´ç«‹åŒæ‰‹äº¤å‰ä»åé¢æŠ±ä½é¢ˆéƒ¨çš„ä¸‹ç«¯ï¼ˆé¢ˆæ¤ä¸èƒ¸æ¤äº¤ç•Œçš„è‚©éƒ¨ä½ç½®ï¼‰ã€‚æ…¢æ…¢åœ°åŒæ‰‹ç”¨åŠ›ï¼Œèº«ä½“é€æ­¥å¾€ä¸‹å‹ï¼Œç›´åˆ°å¤´éƒ¨ä½äºæ¤…é¢åè¿›ä¸€æ­¥å¼¯å‘æ¤…å­çš„åé¢ï¼Œè¿™æ—¶æ„Ÿè§‰åˆ°è…°èƒŒéƒ¨çš„è‚Œè‚‰å……åˆ†è¢«æ‹‰é•¿æ‹‰ç´§ï¼Œå°¤å…¶æ˜¯ä¸‹è…°éƒ¨å¯èƒ½è¿˜æœ‰é…¸ç—›çš„æ„Ÿè§‰ï¼Œä¿æŒè¿™æ ·çš„å§¿åŠ¿10~20ç§’ï¼ˆå¿ƒé‡Œè¯»æ•°20~40ä¸‹ï¼‰åï¼Œç¼“æ…¢è¿”å›èµ·å§‹ä½ç½®ã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/sjj_sit_stretch.jpg\" alt=\"\"></p>\n<hr>\n<h4 id=\"é«‚è…°è‚Œï¼ˆæ‹‰ä¼¸ï¼‰\"><a href=\"#é«‚è…°è‚Œï¼ˆæ‹‰ä¼¸ï¼‰\" class=\"headerlink\" title=\"é«‚è…°è‚Œï¼ˆæ‹‰ä¼¸ï¼‰\"></a>é«‚è…°è‚Œï¼ˆæ‹‰ä¼¸ï¼‰</h4><p>å¼“æ­¥æ‹‰ä¼¸ï¼šé‡‡ç”¨å•è·ªå¼çš„ä½“ä½ï¼Œä¿æŒä¸Šèº«ç›´ç«‹ï¼ˆè…¹éƒ¨ä¸èƒ½å¾€å‰æŒºï¼‰ï¼Œå‰é¢çš„è…¿ä¿æŒå¤§è…¿ä¸å°è…¿æˆ90Â°ã€‚<br>èº«ä½“é€æ­¥å¾€ä¸‹åå¼€å§‹æ‹‰ä¼¸ï¼Œåé¢çš„è…¿å°½é‡å¾€åä¼¸å’Œä¸‹å‹ï¼Œæ„Ÿè§‰åˆ°è…°æ¤ä»¥åŠé«‹å…³èŠ‚è¢«æ‹‰ç´§ï¼Œç»´æŒ10~20ç§’ï¼ˆå¿ƒé‡Œè¯»æ•°20~40ä¸‹ï¼‰åæ…¢æ…¢æŠ¬èµ·èº«ä½“å›åˆ°èµ·å§‹ä½ç½®å®Œæˆä¸€ä¾§çš„æ‹‰ä¼¸ã€‚æ›´æ¢å§¿åŠ¿é‡å¤åŠ¨ä½œæ‹‰ä¼¸å¦ä¸€ä¾§çš„é«‚è…°è‚Œåå®Œæˆä¸¤ä¾§çš„æ‹‰ä¼¸ã€‚æ³¨æ„åœ¨åŠ¨ä½œçš„è¿‡ç¨‹ä¸­ï¼Œè…¹éƒ¨ä¸èƒ½å¾€å‰æŒºã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/qyj_stretch.jpg\" alt=\"\"></p>\n<hr>\n<h4 id=\"è‚¡ç›´è‚Œï¼ˆæ‹‰ä¼¸ï¼‰\"><a href=\"#è‚¡ç›´è‚Œï¼ˆæ‹‰ä¼¸ï¼‰\" class=\"headerlink\" title=\"è‚¡ç›´è‚Œï¼ˆæ‹‰ä¼¸ï¼‰\"></a>è‚¡ç›´è‚Œï¼ˆæ‹‰ä¼¸ï¼‰</h4><p>ç¾å¥³æ¼”ç¤ºçš„å§å§¿æ‹‰ä¼¸</p>\n<p><a href=\"https://youtu.be/cWuVcqvoEFo\" target=\"_blank\" rel=\"noopener\">https://youtu.be/cWuVcqvoEFo</a></p>\n<iframe width=\"420\" height=\"315\" src=\"https://www.youtube.com/embed/cWuVcqvoEFo\" frameborder=\"0\" allowfullscreen></iframe>\n\n<p>ä¾§å§æ‹‰è…¿ï¼šé€‰æ‹©é‡‡ç”¨æ¯”è¾ƒèˆ’é€‚çš„å§ä½è¿›è¡Œè‡ªæˆ‘æ‹‰ä¼¸ã€‚ä¾§èº«å¹³èººåœ¨å«å­ä¸Šï¼Œè¿œç¦»åœ°é¢çš„æ‰‹æŠ“ä½åŒä¾§çš„è„šèƒŒï¼Œä¿æŒèº«ä½“æŒºç›´ã€‚<br>æŠ“ä½è„šèƒŒçš„æ‰‹æ…¢æ…¢ç”¨åŠ›ï¼Œå°†è…¿å¾€è‡ªå·±èº«ä½“çš„åä¸Šæ–¹æ‹‰å’Œå¾€è‡€éƒ¨é ï¼Œåˆ°è¾¾å¤§è…¿å’Œéª¨ç›†éƒ½å¤„äºåä¼¸çš„ä½ç½®ï¼Œæ˜æ˜¾æ„Ÿè§‰è‚¡ç›´è‚Œè¢«æ‹‰ç´§å¹¶æœ‰éšéšçš„ç—›æ„Ÿæ—¶å¾€å›æ”¾æ¾ä¸€ä¸ç‚¹å„¿ä¾¿ä¿æŒåœ¨è¿™æ ·çš„ä½ç½®10~20ç§’ï¼ˆå¿ƒé‡Œè¯»æ•°è¾¾åˆ°20æˆ–40ä¸‹ï¼‰ï¼Œç¼“æ…¢æ”¾æ¾å›åˆ°èµ·å§‹ä½ç½®ï¼Œå®Œæˆå•ä¾§è‚¡ç›´è‚Œçš„ä¸€æ¬¡æ‹‰ä¼¸åï¼Œè¿›è¡Œå¦ä¸€ä¾§çš„æ‹‰ä¼¸ã€‚</p>\n<p><img src=\"/img/160325_fixing_apt/gzj_stretch.jpg\" alt=\"\"></p>\n<hr>\n<h4 id=\"å‚è€ƒèµ„æ–™-amp-æ‰©å±•é˜…è¯»\"><a href=\"#å‚è€ƒèµ„æ–™-amp-æ‰©å±•é˜…è¯»\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™&amp;æ‰©å±•é˜…è¯»\"></a>å‚è€ƒèµ„æ–™&amp;æ‰©å±•é˜…è¯»</h4><p><a href=\"https://www.t-nation.com/training/dont-be-like-donald-duck\" target=\"_blank\" rel=\"noopener\">https://www.t-nation.com/training/dont-be-like-donald-duck</a></p>\n<p><a href=\"http://www.styleforum.net/t/380309/oksus-guide-to-anterior-pelvic-tilt-apt\" target=\"_blank\" rel=\"noopener\">http://www.styleforum.net/t/380309/oksus-guide-to-anterior-pelvic-tilt-apt</a></p>\n<p><a href=\"http://zhuanlan.zhihu.com/oh-hard/19986866\" target=\"_blank\" rel=\"noopener\">http://zhuanlan.zhihu.com/oh-hard/19986866</a></p>\n<p><a href=\"http://tieba.baidu.com/p/2492811917\" target=\"_blank\" rel=\"noopener\">http://tieba.baidu.com/p/2492811917</a></p>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h4><hr>\n","categories":[],"tags":["å¤§ä¿å¥"]},{"title":"novaè‡ªåŠ¨åŒ–æµ‹è¯•åç»­å†…å®¹å®‰æ’","url":"https://lilei.pro/2016/03/24/Nova-Automation-Develop-Plan/","content":"<p><a href=\"../2016/01/28/Nova-Automation-Practice\">ä¸Šç¯‡é“¾æ¥</a></p>\n<a id=\"more\"></a>\n<hr>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>milestone 1</th>\n<th>milestone 2</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>appium</td>\n<td>1. é…ç½®åœ¨ç‹¬ç«‹æœºå™¨<br>2. ä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨</td>\n<td>n/a</td>\n</tr>\n<tr>\n<td>mock server</td>\n<td>1. é…ç½®åœ¨ç‹¬ç«‹æœºå™¨<br> 2. å¤šç»ˆç«¯æ³¨å†Œ<br>3. å¤šç»ˆç«¯é…ç½®åŠ è½½<br>4. ä½¿ç”¨sqlæ•°æ®åº“å­˜å‚¨é…ç½®æ–‡ä»¶<br>5. ç²¾ç®€ä»£ç ï¼Œåˆ é™¤æ— ç”¨åŠŸèƒ½</td>\n<td>1. æ¢³ç†æ—¥å¿—</td>\n</tr>\n<tr>\n<td>test case</td>\n<td>1. æ’é˜Ÿå…¨å¥—ç”¨ä¾‹<br>2. ç”¨ä¾‹æ¨¡æ¿ä¼˜åŒ–<br>3. ç”¨ä¾‹æ‰§è¡Œè¿‡ç¨‹å¯ä»¥æˆªå±</td>\n<td>1. ç”¨ä¾‹æ‰§è¡ŒæŠ¥å‘Šï¼ˆemailï¼‰<br>2. æ¯æ—¥æ„å»ºï¼Œè‡ªåŠ¨æ‰§è¡Œ<br>3. å…¶å®ƒä¸šåŠ¡çº¿ä¸»æµç¨‹case</td>\n</tr>\n<tr>\n<td>å®ŒæˆèŠ‚ç‚¹</td>\n<td>æ’é˜Ÿä¸šåŠ¡ä¸»æµç¨‹å›å½’è¿ç§»åˆ°è‡ªåŠ¨åŒ–æµ‹è¯•</td>\n<td>n/a</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>with iOS</p>\n<p>å‰æ</p>\n<ol>\n<li>iOSæœ¬èº«æœ‰æ¸…æ™°åŒ–çš„MVCç»“æ„ï¼Œå¯¹Viewåšæµ‹è¯•</li>\n</ol>\n<p>ä¼˜ç‚¹</p>\n<ol>\n<li>ç»„ä»¶è¾“å…¥çš„ç»„åˆ</li>\n<li>åŒ…å«æˆªå›¾çš„æŠ¥è¡¨</li>\n</ol>\n<p>ä¸å¤Ÿå®Œå–„</p>\n<ol>\n<li>äººè‚‰éªŒè¯</li>\n</ol>\n<p>æ”¹è¿›</p>\n<ol>\n<li>mock server å¹³å°åŒ–ï¼Œå¯ä¾› iOS ä½¿ç”¨</li>\n</ol>\n<hr>\n<p>appium æ–‡æ¡£é˜…è¯»</p>\n<p><a href=\"http://appium.io/slate/en/master/?java#introduction-to-appium\" target=\"_blank\" rel=\"noopener\">http://appium.io/slate/en/master/?java#introduction-to-appium</a></p>\n<p>appiumçš„è®¾è®¡æ€æƒ³</p>\n<ol>\n<li>You shouldnâ€™t have to recompile your app or modify it in any way in order to automate it.</li>\n<li>You shouldnâ€™t be locked into a specific language or framework to write and run your tests.</li>\n<li>A mobile automation framework shouldnâ€™t reinvent the wheel when it comes to automation APIs.</li>\n<li>A mobile automation framework should be open source, in spirit and practice as well as in name!</li>\n</ol>\n<hr>\n<p>Parallel Android Tests</p>\n<p>-p the main Appium port<br>-U the device id<br>-bp the Appium bootstrap port<br>â€“chromedriver-port the chromedriver port (if using webviews or chrome)<br>â€“selendroid-port the selendroid port (if using selendroid)</p>\n<p>If we had two devices with the IDâ€™s 43364 and 32456, we would start two different Appium servers with the following commands:</p>\n<p>node . -p 4492 -bp 2251 -U 32456</p>\n<p>node . -p 4491 -bp 2252 -U 43364</p>\n<hr>\n<p>ignoreUnimportantViews</p>\n<h2 id=\"Another-example-of-a-use-case-for-settings-would-be-telling-appium-to-ignore-elements-which-are-not-visible-s\"><a href=\"#Another-example-of-a-use-case-for-settings-would-be-telling-appium-to-ignore-elements-which-are-not-visible-s\" class=\"headerlink\" title=\"Another example of a use-case for settings would be telling appium to ignore elements which are not visible.s\"></a>Another example of a use-case for settings would be telling appium to ignore elements which are not visible.s</h2><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","è‡ªåŠ¨åŒ–æµ‹è¯•"]},{"title":"Android Performance Patterns - s4ep6 Service Performance Patterns","url":"https://lilei.pro/2016/03/20/Android-Performance-Patterns-s4ep6-Service-Performance-Patterns/","content":"<blockquote>\n<p>Services are an integral component of almost every android application. But the functionality they provide comes with a drain on battery and system resources. And if youâ€™re not paying attention, services can easily stick around longer than they should which wastes system resources, and can often cause performance problems for your rendering thread. But Colt McAnlis has the answer : using services in the most efficient way possible means killing them off the right way, and sometimes, not even using them.<br><a href=\"https://www.youtube.com/watch?v=NJsq0TU0qeg&amp;index=16&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/NJsq0TU0qeg?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"On-System-Level-Services-Ainâ€™t-Free\"><a href=\"#On-System-Level-Services-Ainâ€™t-Free\" class=\"headerlink\" title=\"On System Level, Services Ainâ€™t Free\"></a>On System Level, Services Ainâ€™t Free</h4><p>åˆ›å»ºã€é”€æ¯ Service éœ€è¦æ—¶é—´ä¸å†…å­˜</p>\n<p><img src=\"/img/160320_app_s4ep6/cost.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Service-May-Cost-Frame-Lost\"><a href=\"#Service-May-Cost-Frame-Lost\" class=\"headerlink\" title=\"Service May Cost Frame Lost\"></a>Service May Cost Frame Lost</h4><ol>\n<li>ä½œä¸º Local Service å¯åŠ¨ï¼Œå¯¹åº”çš„ Service è¿è¡Œåœ¨ä¸»è¿›ç¨‹çš„ä¸»çº¿ç¨‹ä¸Š</li>\n<li>ä½œä¸º Remote Service å¯åŠ¨ï¼Œå¯¹åº”çš„ Service åˆ™æ˜¯è¿è¡Œåœ¨ç‹¬ç«‹è¿›ç¨‹çš„ä¸»çº¿ç¨‹ä¸Š</li>\n</ol>\n<p>å¯¹äº<code>1</code>ä¸­çš„æƒ…å†µï¼Œå¦‚æœ Service ä¸­è¿›è¡Œäº†è€—æ—¶æ“ä½œï¼ˆè¶…è¿‡äº†16msï¼‰ï¼Œåˆ™åœ¨å±å¹•ç»˜åˆ¶æ—¶å¯èƒ½å¼•èµ·ä¸¢å¸§ã€‚</p>\n<hr>\n<h4 id=\"Donâ€™t-Use-Services\"><a href=\"#Donâ€™t-Use-Services\" class=\"headerlink\" title=\"Donâ€™t Use Services\"></a>Donâ€™t Use Services</h4><p>if you donâ€™t have toâ€¦</p>\n<p>å‚è§ä¸‹ä¸€èŠ‚ç½—åˆ—çš„ Solutions</p>\n<hr>\n<h4 id=\"Async-Event-Functions\"><a href=\"#Async-Event-Functions\" class=\"headerlink\" title=\"Async Event Functions\"></a>Async Event Functions</h4><ul>\n<li>GCM</li>\n<li>BroadcastReceiver</li>\n<li>LocalBroadcastReceiver</li>\n<li>HandlerThreads</li>\n<li>AsyncTaskLoaders</li>\n<li>IntentService</li>\n</ul>\n<hr>\n<h4 id=\"Do-not-Let-Services-Live-Longer-Than-They-Needed\"><a href=\"#Do-not-Let-Services-Live-Longer-Than-They-Needed\" class=\"headerlink\" title=\"Do not Let Services Live Longer Than They Needed\"></a>Do not Let Services Live Longer Than They Needed</h4><p>Service æœ‰ä¸¤ç§ä¸åŒçš„å¯åŠ¨æ–¹æ³•ï¼Œå¯¹åº”çš„ç§æ¤æ–¹æ³•ä¹Ÿä¸ºä¸¤ç§</p>\n<ul>\n<li>Started Servicesï¼šåœ¨ Service ä¸­è°ƒç”¨<code>stopSelf()</code>ï¼Œæˆ–è€…åœ¨å¤–é¢è°ƒç”¨<code>stopService()</code>æ¥ç»ˆæ­¢</li>\n</ul>\n<p><img src=\"/img/160320_app_s4ep6/started_services.png\" alt=\"\"></p>\n<ul>\n<li>Bound Servicesï¼šé€šè¿‡<code>unBindService()</code>æ¥ç»ˆæ­¢</li>\n</ul>\n<p><img src=\"/img/160320_app_s4ep6/bound_services.png\" alt=\"\"></p>\n<ul>\n<li>Mixedï¼šå¦‚æœæ˜¯å…ˆé€šè¿‡<code>startService()</code>å¯åŠ¨ï¼Œå†ç”¨<code>bindService()</code>ç»‘å®šçš„ Serviceï¼Œé‚£ä¹ˆåœ¨<code>unBind()</code>åï¼Œè¿˜è¦æ˜¾ç¤ºé€šè¿‡<code>stopService()</code>æ¥ç»ˆæ­¢</li>\n</ul>\n<p><img src=\"/img/160320_app_s4ep6/mixed_services.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Tools\"><a href=\"#Tools\" class=\"headerlink\" title=\"Tools\"></a>Tools</h4><ul>\n<li>å…‰å¤´å“¥åˆåœ¨æ¨é”€ <a href=\"http://developer.android.com/tools/help/systrace.html\" target=\"_blank\" rel=\"noopener\">Systrace</a> äº†</li>\n</ul>\n<hr>\n<h4 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h4><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s4ep5 Minimizing Asset Payload","url":"https://lilei.pro/2016/03/08/Android-Performance-Patterns-s4ep5-Minimizing-Asset-Payload/","content":"<blockquote>\n<p>No matter how aggressively youâ€™ve optimized your networking code for performance, thereâ€™s still a huge problematic performance issue that you havenâ€™t seen: Bloated asset files. If youâ€™re not aggressively attacking the size of the assets youâ€™re transferring to your users, youâ€™re basically stealing time (and money) from them.<br><a href=\"https://www.youtube.com/watch?v=ts5o6t7enOk&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=15\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/ts5o6t7enOk?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Smaller-Is-Better\"><a href=\"#Smaller-Is-Better\" class=\"headerlink\" title=\"Smaller Is Better\"></a>Smaller Is Better</h4><p><img src=\"/img/160308_app_s4ep5/network_speed.png\" alt=\"\"></p>\n<ol>\n<li>é€Ÿåº¦ç¼“æ…¢å¹¶ä¸æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å¤„äºé«˜é€Ÿçš„4Gï¼wifiç¯å¢ƒä¸‹</li>\n<li>å¤§æ•°æ®é‡å¯¼è‡´çš„å¤§ç”µé‡æ¶ˆè€—</li>\n<li>æµé‡ï¼é‡‘é’±</li>\n</ol>\n<p>å¼•èµ·æ•°æ®æµé‡è¿‡å¤§çš„ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå› ç´ ï¼šå›¾ç‰‡ã€åºåˆ—åŒ–æ•°æ®ã€‚</p>\n<hr>\n<h4 id=\"Images\"><a href=\"#Images\" class=\"headerlink\" title=\"Images\"></a>Images</h4><p><img src=\"/img/160308_app_s4ep5/imagefiles.png\" alt=\"\"></p>\n<p>å¦‚æœä¸éœ€è¦å›¾ç‰‡é€æ˜åº¦è®¾å®šï¼Œé‚£å°±å°½é‡ä¸è¦ä½¿ç”¨PNGæ ¼å¼çš„å›¾ç‰‡æ–‡ä»¶ï¼Œè¿™ä¼šäº§ç”Ÿéš¾ä»¥ç½®ä¿¡çš„å›¾ç‰‡ä½“ç§¯ã€‚</p>\n<p>JPGå’ŒWEBPæ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œåœ¨ä½¿ç”¨è¿™ä¸¤ç§å›¾ç‰‡æ ¼å¼æ—¶ï¼Œè®°ä½å›¾ç‰‡è´¨é‡çš„æå°é™ä½ï¼Œå¯ä»¥å¤§å¤§ç¼©å°å›¾ç‰‡ä½“ç§¯ã€‚</p>\n<p><img src=\"/img/160308_app_s4ep5/control_quality.png\" alt=\"\"></p>\n<p>å›¾ç‰‡çš„åˆ†è¾¨ç‡å¹¶ä¸æ˜¯è¶Šå¤§è¶Šå¥½ï¼Œæ ¹æ®å…·ä½“çš„ä½¿ç”¨åœºæ™¯ï¼Œè¿”å›ä¸åŒåƒç´ çš„å›¾ç‰‡ã€‚å¦‚æœåªæ˜¯éœ€è¦ç¼©ç•¥å›¾ï¼Œé‚£å°±ä¸è¦è¿”å›é«˜æ¸…çš„æ— ç å¤§å›¾ã€‚</p>\n<p><img src=\"/img/160308_app_s4ep5/judge_conditions.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Serialized-Data\"><a href=\"#Serialized-Data\" class=\"headerlink\" title=\"Serialized Data\"></a>Serialized Data</h4><p>JSON /dÊ’eÉªâ€™sÊŒn/ æ˜¯ä¸€ä¸ª<strong>horrible</strong>çš„æ•°æ®æ ¼å¼ï¼ï¼ï¼</p>\n<p>çœ‹çœ‹ä¸‹é¢çš„ä»£ç ï¼ŒåŒ…å«äº†å¤§é‡çš„<strong>ç©ºæ ¼ã€å¼•å·ã€keyå€¼</strong>ç­‰å†—ä½™ä¿¡æ¯ï¼Œè¿™äº›å­—æ®µå­˜åœ¨çš„æ„ä¹‰åªæ˜¯ä¸ºäº†æ–¹ä¾¿äººå·¥é˜…è¯»ï¼Œå¹¶éæ•°æ®ä¼ è¾“ã€‚</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"__name\"</span>: <span class=\"string\">\"MOPayOrderDo\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"RefundDetails\"</span>: [<span class=\"string\">\"10.1å…ƒ   2016-02-12 20:00 é€€æ¬¾\"</span>, <span class=\"string\">\"10.02å…ƒ   2016-02-17 19:00 é€€æ¬¾\"</span>, <span class=\"string\">\"10.003å…ƒ   2016-02-18 17:00 é€€æ¬¾\"</span>, <span class=\"string\">\"10.0004å…ƒ   2016-02-18 18:00 é€€æ¬¾\"</span>],</span><br><span class=\"line\">  <span class=\"attr\">\"BaseOrderId\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"OriAmount#D\"</span>: <span class=\"number\">2.123456</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"RemainAmount#D\"</span>: <span class=\"number\">100.123456</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"SerializedId\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"RepayUrl\"</span>: <span class=\"string\">\"dianping://shopinfo?id=2062015\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"CurrentAmount#D\"</span>: <span class=\"number\">0.01</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"SaveAmount#D\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"OrderRemarks\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"ErrorMsg\"</span>: <span class=\"string\">\"æ”¯ä»˜æˆåŠŸ|æ­¤ä¸ºä»˜æ¬¾å‡­è¯ï¼Œè¯·å‘å•†æˆ·å±•ç¤º\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"SerialNumber\"</span>: <span class=\"string\">\"80033630111\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"RightDos\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"MerchantAmountString\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"Discounts\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"HuiTicketShareDo\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"__name\"</span>: <span class=\"string\">\"HuiTicketShareDo\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketValidPeriod\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketDesc\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketValue\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketShareStatus#I\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketButtonClickable\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"PayTicketDesc\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketPicUrl\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketTitle\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"TicketButtonText\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"ShareDo\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"ExtraTickets\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"ShopID#I\"</span>: <span class=\"number\">2062015</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"PointMallDo\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"RefundAmount#D\"</span>: <span class=\"number\">40.1234</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"BuffetDescs\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"PayFailDescription\"</span>: <span class=\"string\">\"æ‚¨çš„ä»˜æ¬¾å°†äº1-5ä¸ªå·¥ä½œæ—¥åŸè·¯é€€è¿˜\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"Time#U\"</span>: <span class=\"number\">1442469357</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"HuiReviewInfo\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"Banner\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"OrderID#I\"</span>: <span class=\"number\">43956789</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"VoucherSerials\"</span>: [],</span><br><span class=\"line\">  <span class=\"attr\">\"Status#I\"</span>: <span class=\"number\">3</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"OperationBanners\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"AlertLoginTips\"</span>: <span class=\"string\">\"ç»‘å®šæ‰‹æœºåè®¢å•ä¸ä¼šä¸¢å“¦\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"AlertLoginLink\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"__name\"</span>: <span class=\"string\">\"Link\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"Name\"</span>: <span class=\"string\">\"ç°åœ¨å»ç»‘å®š\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"Url\"</span>: <span class=\"string\">\"\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"MerchantAmount#D\"</span>: <span class=\"number\">0.01</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"ServiceUrl\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"StatusMsg\"</span>: <span class=\"string\">\"å·²é€€æ¬¾\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"ContactMerchantTip\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"OrderDetailTipsDo\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"ShopPhones\"</span>: [</span><br><span class=\"line\">      <span class=\"string\">\"4008205527\"</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">\"ShopName\"</span>: <span class=\"string\">\"å¤§ä¼—ç‚¹è¯„ç½‘\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"IsHobbit#I\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"NoDiscountAmount#D\"</span>: <span class=\"number\">0</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"SuccessMsg\"</span>: <span class=\"string\">\"è¯·å‘æœåŠ¡å‘˜å‡ºç¤ºéªŒè¯ç \"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"HasVoiceReport\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"MobileNo\"</span>: <span class=\"string\">\"13774283697\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"VerifyStatus#I\"</span>: <span class=\"number\">2</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"MOPayShare\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"attr\">\"__name\"</span>: <span class=\"string\">\"Share\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"IconUrl\"</span>: <span class=\"string\">\"http://qcloud.dpfile.com/pc/9vKBXqRXPl6vyOVFe4zlXMLys21f38u--LZmWbufGI2pRKzSBzQnLPwzWURFZUAvtOnd3gXQdDYlAqlaVaAFeZ0rYYyiRo_EhzufqWWjTjs.jpg\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"Title\"</span>: <span class=\"string\">\"åœ¨ã€å¤§ä¼—ç‚¹è¯„ç½‘ã€‘ä¸ç”¨ç°é‡‘ï¼Œæ‰‹æœºä¹°å•æœ‰ä¼˜æƒ !\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"Desc\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"BtnText\"</span>: <span class=\"literal\">null</span>,</span><br><span class=\"line\">      <span class=\"attr\">\"Url\"</span>: <span class=\"string\">\"http://m.dianping.com/hui/share/weixin?shopId=2062015\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"UserAmountString\"</span>: <span class=\"string\">\"&#123;\\\"userAmount\\\":\\\"1.123456å…ƒ\\\",\\\"boughtVoucher\\\":\\\"\\\",\\\"usedVoucher\\\":\\\"\\\"&#125;\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"BizType#I\"</span>: <span class=\"number\">10</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å…‰å¤´å“¥åœ¨videoä¸­ç»™å‡ºäº†å‡ ç§é«˜æ•ˆçš„åºåˆ—åŒ–æ›¿ä»£æ–¹å¼ï¼Œè®²è§£å‚è§<a href=\"https://www.youtube.com/watch?v=IwxIIUypnTE\" target=\"_blank\" rel=\"noopener\">Serialization performance (Android Performance Patterns Season 4 ep14)</a></p>\n<ul>\n<li>Protocol Buffers</li>\n<li>Nano-Proto-Buffers</li>\n<li>FlatBuffers</li>\n</ul>\n<p>åŒæ ·ï¼Œåœ¨httpå‹ç¼©è¿‡ç¨‹é‡Œï¼Œä¹Ÿæœ‰è¿›ä¸€æ­¥ä¼˜åŒ–çš„ç©ºé—´ï¼Œå‚è§<a href=\"https://www.youtube.com/watch?v=qBxeHkvJoOQ\" target=\"_blank\" rel=\"noopener\">Smaller Serialized Data (Android Performance Patterns Season 4 ep15)</a></p>\n<p><img src=\"/img/160308_app_s4ep5/http_stack.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s4ep4 Adapting to Latency","url":"https://lilei.pro/2016/03/08/Android-Performance-Patterns-s4ep4-Adapting-to-Latency/","content":"<blockquote>\n<p>One of the most frequent performance problems your users will notice is how your app reacts when moving from a great network connection to a bad one. If things slow down, get sluggish, or start showing too many spinners, they can show your app the â€œuninstallâ€œ button.<br><a href=\"https://www.youtube.com/watch?v=uzboHWX3Kvc&amp;index=14&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/uzboHWX3Kvc?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Bottlenecks-Happen-Anywhere\"><a href=\"#Bottlenecks-Happen-Anywhere\" class=\"headerlink\" title=\"Bottlenecks Happen Anywhere\"></a>Bottlenecks Happen Anywhere</h4><p>åœ¨ä¸€æ¬¡ç”±appå‘èµ·çš„ç½‘ç»œè¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œä¼šå»ºç«‹â€œæ‰‹æœºï¼åŸºç«™ï¼è´Ÿè½½å‡è¡¡æœåŠ¡å™¨ï¼åç«¯serverâ€çš„ä¸€ä¸ªå¾€å¤é“¾è·¯ï¼Œåœ¨è¿™ä¸ªé“¾è·¯çš„ä»»ä½•ä¸€ä¸ªç¯èŠ‚ï¼Œéƒ½å¯èƒ½é€ æˆç½‘ç»œè¯·æ±‚çš„å»¶è¿Ÿã€‚</p>\n<p><img src=\"/img/160308_app_s4ep4/bottlenecks.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Adapting-To-Lagency\"><a href=\"#Adapting-To-Lagency\" class=\"headerlink\" title=\"Adapting To Lagency\"></a>Adapting To Lagency</h4><p>ä¸ºäº†é€‚åº”å¤æ‚å¤šå˜çš„ç½‘ç»œç¯å¢ƒï¼Œå¿…é¡»åšä¸‹é¢ä¸¤ä»¶äº‹ï¼š</p>\n<ol>\n<li>Gather information.</li>\n<li>Make adjustments.</li>\n</ol>\n<p>SDKä¸­ä¸ºæˆ‘ä»¬æä¾›äº†åˆ¤æ–­å½“å‰ç½‘ç»œç¯å¢ƒçš„Api</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);</span><br><span class=\"line\">NetworkInfo activeNetwork = cm.getActiveNetworkInfo();</span><br><span class=\"line\"><span class=\"keyword\">if</span> (activeNetwork.getType() != ConnectivityManager.TYPE_WIFI) &#123;</span><br><span class=\"line\">\tString typeName = activeNetwork.getSubtypeName();</span><br><span class=\"line\">\t<span class=\"keyword\">int</span> type = activeNetwork.getSubtype();</span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (type) &#123;</span><br><span class=\"line\">\t\t<span class=\"comment\">// do the cases</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¸åŒç½‘ç»œç¯å¢ƒçš„åŸºæœ¬ä¼ è¾“é€Ÿåº¦å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"/img/160308_app_s4ep4/speed.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Do-It-Yourself\"><a href=\"#Do-It-Yourself\" class=\"headerlink\" title=\"Do It Yourself\"></a>Do It Yourself</h4><p>ç„¶è€Œï¼Œå³ä½¿åˆ¤æ–­å‡ºå½“å‰å¤„äºè¯¸å¦‚LTEçš„ç½‘ç»œç¯å¢ƒï¼Œä¾ç„¶ä¸èƒ½å®Œå…¨ä¿è¯è¾ƒé«˜çš„ä¼ è¾“é€Ÿåº¦ï¼Œæ¯”å¦‚ï¼Œç“¶é¢ˆå¯èƒ½å‘ç”Ÿåœ¨æœåŠ¡ç«¯ã€‚</p>\n<p><img src=\"/img/160308_app_s4ep4/slow_server.png\" alt=\"\"></p>\n<p>è¿™æ—¶å°±éœ€è¦ä¸»åŠ¨å»æµ‹ç®—å½“å‰ç½‘ç»œå»¶è¿Ÿäº†ï¼Œå¤šæ¬¡æµ‹ç®—åï¼Œæ±‚å¹³å‡å€¼ã€‚</p>\n<p><img src=\"/img/160308_app_s4ep4/evaluate_average.png\" alt=\"\"></p>\n<p>æ¥ç€ï¼Œä½ å¯ä»¥å®šä¹‰å‡ºä¸‰ä¸ªç½‘ç»œçŠ¶å†µåŒºé—´ï¼Œä»¥60msã€220msä¸ºç•Œ</p>\n<p><img src=\"/img/160308_app_s4ep4/levels.png\" alt=\"\"></p>\n<table>\n<thead>\n<tr>\n<th>GOOD</th>\n<th>OK</th>\n<th>BAD</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>&lt; 60ms</td>\n<td>60ms ~ 220ms</td>\n<td>&gt; 220ms</td>\n</tr>\n<tr>\n<td>æ›´å¤šçš„é¢„åŠ è½½ï¼Œå‡ ä¹ä¸éœ€è¦ç¼“å­˜</td>\n<td>ä¾èµ–ç¼“å­˜ï¼Œæ‹’ç»éƒ¨åˆ†ç½‘ç»œè¯·æ±‚</td>\n<td>æ‹’ç»å¤§éƒ¨åˆ†ç½‘ç»œè¯·æ±‚ï¼ŒåªåŠ è½½é‡è¦ä¿¡æ¯</td>\n</tr>\n</tbody>\n</table>\n<p>å½“ç„¶ï¼Œé˜ˆå€¼ï¼ˆ60msã€220msï¼‰ä¸æ˜¯å›ºå®šçš„ã€‚</p>\n<hr>\n<h4 id=\"Tools\"><a href=\"#Tools\" class=\"headerlink\" title=\"Tools\"></a>Tools</h4><p>åœ¨æµ‹è¯•æ—¶ï¼Œé’ˆå¯¹éš¾æµ‹çš„ç½‘ç»œç¯å¢ƒæ¡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å·¥å…·è¿›è¡Œå»¶æ—¶æ¨¡æ‹Ÿã€‚</p>\n<ul>\n<li>Emulator Throttling: <a href=\"http://developer.android.com/tools/devices/emulator.html\" target=\"_blank\" rel=\"noopener\">http://developer.android.com/tools/devices/emulator.html</a></li>\n<li>Network Attenuator: <a href=\"http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=14500040\" target=\"_blank\" rel=\"noopener\">http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=14500040</a></li>\n</ul>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s4ep3 Effective Prefetching","url":"https://lilei.pro/2016/03/08/Android-Performance-Patterns-s4ep3-Effective-Prefetching/","content":"<blockquote>\n<p>If youâ€™re looking for the optimal way to batch requests to reduce overall network traffic, then prefetching is for you.<br><a href=\"https://www.youtube.com/watch?v=GajI0uKyAGE&amp;index=13&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/GajI0uKyAGE?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Why-Prefetching\"><a href=\"#Why-Prefetching\" class=\"headerlink\" title=\"Why Prefetching?\"></a>Why Prefetching?</h4><p>å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œappå‘å‡ºçš„ç½‘ç»œè¯·æ±‚æ˜¯è¿ç»­çš„ï¼Œè­¬å¦‚ï¼Œä¸€ä¸ªæ­£åœ¨ä¸‹æ‹‰ä¸­çš„æ¯ä¸€é¡¹éƒ½åŒ…å«ä¸€å¼ ç¼©ç•¥å›¾çš„åˆ—è¡¨ã€‚</p>\n<p>å¦‚æœå¯ä»¥é¢„è§çš„è¯ï¼Œå°†æœªæ¥å³å°†å‘ç”Ÿçš„ç½‘ç»œè¯·æ±‚åˆå¹¶åˆ°ä¸€èµ·è¿›è¡Œå‘é€ï¼Œæ¯”èµ·å•ç‹¬æ¥å‘é€å„è‡ªè¯·æ±‚ï¼Œä¸€æ–¹é¢å‡å°‘äº†ç½‘ç»œè¯·æ±‚å¯¹äºèµ„æºçš„æ¶ˆè€—ï¼ˆå¦‚ï¼šèŠ‚çº¦ç”µé‡ä¸å¸¦å®½ï¼‰ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿä½¿å¾—appç•Œé¢è¿è¡Œæ›´åŠ æµç•…ã€‚</p>\n<p><img src=\"/img/160308_app_s4ep3/prefetching.png\" alt=\"\"></p>\n<p>ä½†æ˜¯ï¼Œå¦‚ä½•ç¡®å®šé¢„åŠ è½½çš„åº¦ï¼Œæ˜¯ä¸€ä¸ªå€¼å¾—æ€è€ƒçš„é—®é¢˜ã€‚åŠ è½½çš„å¤ªå°‘äº†ï¼Œèµ·ä¸åˆ°æœŸæœ›çš„æ•ˆæœï¼›åŠ è½½å¤ªå¤šäº†ï¼Œåè€Œæ‹–æ…¢appã€‚</p>\n<p><img src=\"/img/160308_app_s4ep3/little_or_much.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"How-much-do-we-prefetch\"><a href=\"#How-much-do-we-prefetch\" class=\"headerlink\" title=\"How much do we prefetch?\"></a>How much do we prefetch?</h4><p>æœ‰2ä¸ªå¯ä»¥å‚è€ƒçš„æŒ‡æ ‡</p>\n<ol>\n<li>ç©ºé—´ï¼šé¢„åŠ è½½1~5mbçš„æ•°æ®</li>\n<li>æ—¶é—´ï¼šé¢„åŠ è½½æœªæ¥1~2minå†…ä¼šç”¨åˆ°çš„æ•°æ®</li>\n</ol>\n<p>æ­¤å¤–ï¼Œé¢„åŠ è½½å¿…é¡»è¦è€ƒè™‘ç”¨æˆ·æ‰€å¤„çš„ç½‘ç»œç¯å¢ƒ</p>\n<ul>\n<li>4Gï¼š12å¼ å›¾ç‰‡</li>\n<li>2Gï¼š3å¼ å›¾ç‰‡</li>\n</ul>\n<p>ä¸€ä¸ªå¾ˆå¥½çš„è¡¡é‡ç”¨æˆ·ç½‘ç»œç¯å¢ƒçš„æ–¹æ³•æ˜¯ï¼Œè®¡ç®—æŸä¸€ä¸ªç‰¹å®šå¤§å°æ–‡ä»¶çš„ä¼ è¾“æ—¶é—´ã€‚</p>\n<p>åœ¨ä¸€ä¸ªç½‘ç»œè¿æ¥çš„çª—å£æœŸï¼Œå¯ä»¥æŠŠä¹‹å‰holdä½çš„ç½‘ç»œè¯·æ±‚ï¼Œè¿åŒåé¢å³å°†åŠ è½½çš„ç½‘ç»œè¯·æ±‚ä¸€åŒæ‰“åŒ…å‘é€ã€‚</p>\n<p><img src=\"/img/160308_app_s4ep3/put_them_all.png\" alt=\"\"></p>\n<p><a href=\"https://developers.google.com/android/reference/com/google/android/gms/gcm/GcmNetworkManager\" target=\"_blank\" rel=\"noopener\">GcmNetworkManager</a>ä¸ºä½ æä¾›äº†å¼ºåŠ›çš„å·¥å…·ç”¨ä»¥å®Œæˆä¸Šé¢çš„éœ€æ±‚ã€‚</p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n<hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s4ep2 Optimizing Network Request Frequencies","url":"https://lilei.pro/2016/03/07/Android-Performance-Patterns-s4ep2-Optimizing-Network-Request-Frequencies/","content":"<blockquote>\n<p>Syncing too often, can be the worst idea for the performance of your application.<br><a href=\"https://www.youtube.com/watch?v=nDHeuEM30ks&amp;index=12&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/nDHeuEM30ks?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Do-not-Over-Sync\"><a href=\"#Do-not-Over-Sync\" class=\"headerlink\" title=\"Do not Over Sync\"></a>Do not Over Sync</h4><p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæœ‰äº›ä¿¡æ¯æ˜¯è¦ä¿æŒæœ€æ–°çš„ï¼ˆå¤©æ°”ã€è´¦æˆ·ä½™é¢ç­‰ç­‰ï¼‰ï¼Œæœ‰äº›ä¿¡æ¯å´ä¸å¿…æ—¶åˆ»æ›´æ–°ï¼Œå¤ªé¢‘ç¹çš„åŒæ­¥æ“ä½œåè€Œè¿‡çŠ¹ä¸åŠï¼š</p>\n<ol>\n<li>è€—ç”µé‡ï¼šæ¯”èµ·å¾…æœºï¼Œç½‘ç»œè¯·æ±‚ä¼šæ¶ˆè€—æ›´å¤šçš„ç”µé‡</li>\n<li>ç½‘ç»œæµé‡ï¼šåŒæ ·ï¼Œä¼šå ç”¨å¸¦å®½ï¼Œå°å¿ƒç”¨æˆ·åœ¨æ”¶åˆ°æµé‡è´¦å•å˜å¾—æŠ“ç‹‚</li>\n</ol>\n<hr>\n<h4 id=\"Sync-Less-Win-More\"><a href=\"#Sync-Less-Win-More\" class=\"headerlink\" title=\"Sync Less, Win More\"></a>Sync Less, Win More</h4><p>ä¼˜åŒ–ç¼“å­˜çš„å…³é”®åœ¨äºåŒºåˆ†æ•°æ®æ˜¯å½“ä¸‹ç«‹å³éœ€è¦çš„è¿˜æ˜¯ç¨åè¯·æ±‚ä¹Ÿæ— ä¼¤å¤§é›…çš„ï¼Œæ¯”å¦‚ï¼Œç”¨æˆ·è¿›è¡Œä¸‹æ‹‰åˆ·æ–°ï¼Œæ˜¾ç„¶éœ€è¦é©¬ä¸Šå‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚è€Œåå°è¿›è¡Œçš„æ•°æ®ä¸‹è½½ä¸ä¸Šä¼ ï¼Œç›¸æ¯”ä¹‹ä¸‹å°±ä¸é‚£ä¹ˆé‡è¦ã€‚</p>\n<p><img src=\"/img/160307_app_s4ep2/now_or_later.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Donâ€™t-Always-Poll-Just-Listen\"><a href=\"#Donâ€™t-Always-Poll-Just-Listen\" class=\"headerlink\" title=\"Donâ€™t Always Poll, Just Listen\"></a>Donâ€™t Always Poll, Just Listen</h4><p>ä¸è¦è¯•å›¾ç»å¸¸è½®è¯¢Serverè¯·æ±‚æ–°æ•°æ®ï¼Œè¿™å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œè¦çŸ¥é“å¾ˆå¤šæƒ…å†µä¸‹æ•°æ®åœ¨æœåŠ¡ç«¯æ ¹æœ¬å°±æ²¡æœ‰æ›´æ–°ã€‚</p>\n<p><img src=\"/img/160307_app_s4ep2/do_not_poll.png\" alt=\"\"></p>\n<p>ä½¿ç”¨è¯¸å¦‚<a href=\"https://developers.google.com/cloud-messaging/\" target=\"_blank\" rel=\"noopener\">Google Cloud Messaging</a>çš„æœåŠ¡è¿›è¡Œä»Serverå‘èµ·çš„push â€”â€” What the hell is this?</p>\n<p>ç”±äºå¤©æœçš„ç‰¹æ®Šæ€§ï¼ŒGCMæ— æ³•ä½¿ç”¨ï¼Œå› æ­¤è¯ç”Ÿäº†è¯¸å¦‚æå…‰æ¨é€ç­‰ä¸€ç³»åˆ—æ›¿ä»£å“ï¼Œä¸€äº›æœ‰èƒ½åŠ›çš„å¤§å‚å¹²è„†è‡ªå·±å®ç°æ¶ˆæ¯æ¨é€ç³»ç»Ÿï¼Œå¯ä»¥å‚è€ƒå¾®ä¿¡è¿™ç¯‡æ–‡ç« ï¼š<a href=\"http://mp.weixin.qq.com/s?__biz=MzAwNDY1ODY2OQ==&amp;mid=207243549&amp;idx=1&amp;sn=4ebe4beb8123f1b5ab58810ac8bc5994&amp;scene=0#rd\" target=\"_blank\" rel=\"noopener\">Androidå¾®ä¿¡æ™ºèƒ½å¿ƒè·³æ–¹æ¡ˆ</a></p>\n<p><img src=\"/img/160307_app_s4ep2/listen.png\" alt=\"\"></p>\n<p>å¦‚æœä¸å¾—ä¸é‡‡ç”¨å®¢æˆ·ç«¯è½®è¯¢æ¥åšï¼Œè€ƒè™‘äºŒè¿›åˆ¶é€€è®©ç®—æ³•</p>\n<p><img src=\"/img/160307_app_s4ep2/binary.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"å› åœ°åˆ¶å®œ\"><a href=\"#å› åœ°åˆ¶å®œ\" class=\"headerlink\" title=\"å› åœ°åˆ¶å®œ\"></a>å› åœ°åˆ¶å®œ</h4><p>ä¸‹é¢è¿™ä¸ªå¬èµ·æ¥å°±æœ‰ä¸€äº›ç‚«é…·äº†ï¼šæ ¹æ®ç”¨æˆ·å½“å‰ä¸åŒçš„è¡Œä¸ºæ¨¡å¼é‡‡å–ä¸åŒçš„åŒæ­¥ç­–ç•¥ï¼Œæ¯”å¦‚ç”¨æˆ·åœ¨é©¾é©¶æ—¶ã€è·‘æ­¥æ—¶ã€ç¡è§‰æ—¶â€¦â€¦</p>\n<p><img src=\"/img/160307_app_s4ep2/scenery.png\" alt=\"\"></p>\n<p>æ¯”å¦‚ï¼Œå½“ä½ ç›‘æµ‹åˆ°ç”¨æˆ·åˆšåˆšä»8å°æ—¶çš„ç¡çœ ä¸­é†’æ¥å¹¶å¼€å¯æ‰‹æœºæ—¶ï¼Œä¸å¦¨é©¬ä¸Šè¿›è¡Œä¸€æ¬¡åŒæ­¥ã€‚</p>\n<p>æ ¹æ®æ˜¯å¦æ­£åœ¨å……ç”µã€æ˜¯å¦è¿æ¥wifiç­‰é…ç½®ä¿¡æ¯ï¼Œè°ƒèŠ‚åŒæ­¥æ—¶é—´ï¼š</p>\n<p><img src=\"/img/160307_app_s4ep2/situations.png\" alt=\"\"></p>\n<p>ç„¶è€Œï¼Œåœºæ™¯é‚£ä¹ˆå¤šï¼Œä½ è¦æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>\n<p>å¹¸è¿çš„æ˜¯ï¼Œä½ å¹¶ä¸éœ€è¦ä¸ºæ­¤å®ç°å¤ªå¤šå¤æ‚çš„é€»è¾‘ï¼Œå‚è€ƒ<a href=\"https://developers.google.com/android/reference/com/google/android/gms/gcm/GcmNetworkManager\" target=\"_blank\" rel=\"noopener\">GCM Network Manager</a></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s4ep1 Cachematters for networking","url":"https://lilei.pro/2016/03/07/Android-Performance-Patterns-s4ep1-Cachematters-for-networking/","content":"<blockquote>\n<p>You know what the fastest, most efficient piece of content for networking performance is? The one you never have to download.<br><a href=\"https://www.youtube.com/watch?v=7lxVqqWwTb0&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=11\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<hr>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/7lxVqqWwTb0?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Reading-data-from-local-memory-v-s-Reading-data-from-network\"><a href=\"#Reading-data-from-local-memory-v-s-Reading-data-from-network\" class=\"headerlink\" title=\"Reading data from local memory v.s. Reading data from network\"></a>Reading data from local memory v.s. Reading data from network</h4><p><img src=\"/img/160307_app_s4ep1/local_vs_network.png\" alt=\"\"></p>\n<p>è®¿é—®æœ¬åœ°æ•°æ®çš„é€Ÿåº¦è¦è¿œè¿œå¿«äºè®¿é—®ç½‘ç»œæ•°æ®ï¼ˆåºŸè¯ï¼ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œæ–‡ç« ä¸­ä¼šä»‹ç»ä¸€äº›æœ¬åœ°ç¼“å­˜çš„ç­–ç•¥ä¸å®ç°ã€‚</p>\n<h4 id=\"Enable-Http-Caching\"><a href=\"#Enable-Http-Caching\" class=\"headerlink\" title=\"Enable Http Caching\"></a>Enable Http Caching</h4><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHttp Cacheåœ¨Androidç³»ç»Ÿä¸­æ˜¯å…³é—­çš„ï¼Œéœ€è¦ä½¿ç”¨<a href=\"http://developer.android.com/reference/android/net/http/HttpResponseCache.html\" target=\"_blank\" rel=\"noopener\">HttpResponseCache</a>æ‰‹åŠ¨å¼€å¯ï¼Œå¦‚ä¸‹ä»£ç ï¼š</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">\t\tFile httpCacheDir = <span class=\"keyword\">new</span> File(context.getCacheDir(), <span class=\"string\">\"http\"</span>);</span><br><span class=\"line\">\t\t<span class=\"keyword\">long</span> httpCacheSize = <span class=\"number\">10</span> * <span class=\"number\">1024</span> * <span class=\"number\">1024</span>; <span class=\"comment\">// 10 MB</span></span><br><span class=\"line\">\t\tHttpResponseCache.install(httpCacheDir, httpCacheSize);</span><br><span class=\"line\">\t&#125; <span class=\"keyword\">catch</span> (Exception e) &#123;</span><br><span class=\"line\">\t\tLot.i(TAG, <span class=\"string\">\"Http response cache installation failed\"</span> + e);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onStop</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">\tHttpResponseCache cache = HttpResponseCache.installed();</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (cache != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">\t\tcache.flush();</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>è¿™æ ·åšä¼šä¸ºæ‰€æœ‰çš„Httpè¯·æ±‚æä¾›ç¼“å­˜ï¼Œä¸ä»…æ˜¯è‡ªå·±ä»£ç ä¸­å‘å‡ºçš„ï¼Œä¹ŸåŒ…æ‹¬æ‰€ä¾èµ–å¤–éƒ¨jaråŒ…å‘å‡ºçš„è¯·æ±‚ã€‚</p>\n<hr>\n<h4 id=\"Invalidation\"><a href=\"#Invalidation\" class=\"headerlink\" title=\"Invalidation\"></a>Invalidation</h4><p>Cacheæœ‰ä¸¤ç§æœ€åŸºæœ¬çš„è¿‡æœŸçš„ç­–ç•¥ï¼šç©ºé—´ï¼ˆCacheç©ºé—´ä¸è¶³æ—¶è§¦å‘ï¼‰å’Œæ—¶é—´ï¼ˆCacheè¶…è¿‡è¿‡æœŸæ—¶é—´åè§¦å‘ï¼‰ã€‚</p>\n<p><img src=\"/img/160307_app_s4ep1/invalidation.png\" alt=\"\"></p>\n<p>åœ¨ Http 1.x çš„headerä¸­ï¼Œç”¨<code>Cache-Control</code>æ¥æ ‡ç¤ºç¼“å­˜ç­–ç•¥ã€‚</p>\n<p><img src=\"/img/160307_app_s4ep1/cache_control_header.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"HttpResponseCacheçš„é™åˆ¶\"><a href=\"#HttpResponseCacheçš„é™åˆ¶\" class=\"headerlink\" title=\"HttpResponseCacheçš„é™åˆ¶\"></a>HttpResponseCacheçš„é™åˆ¶</h4><p>HttpResponseCacheé€šè¿‡Serveræ¥æ§åˆ¶æ‰€æœ‰Cacheç­–ç•¥ï¼Œè¿™åœ¨å¤§éƒ¨åˆ†åœºæ™¯æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œæ¯•ç«ŸServerçŸ¥é“å®ƒè¿”å›ç»™Clientçš„å…·ä½“å†…å®¹æ˜¯ä»€ä¹ˆï¼ˆæ–‡å­—ã€å›¾ç‰‡ã€æ–‡ä»¶ç­‰ç­‰ï¼‰ï¼Œç„¶è€Œï¼Œç§»åŠ¨åº”ç”¨çš„ç‰¹æ®Šæ€§ä½¿å¾—å®ƒè¿˜éœ€è¦æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</p>\n<ul>\n<li>Serverå¯èƒ½åœ¨Headerä¸­å‹æ ¹å°±æ²¡æœ‰ä¸º<code>Cache-Control</code>èµ‹å€¼</li>\n<li>ç§»åŠ¨è®¾å¤‡çš„å­˜å‚¨ç©ºé—´æœ‰é™ä»¥è‡³äºæ— æ³•ä¿å­˜Cacheæ•°æ®</li>\n<li>ç½‘ç»œç¯å¢ƒé«˜å»¶è¿Ÿ</li>\n</ul>\n<p><img src=\"/img/160307_app_s4ep1/constraint.png\" alt=\"\"></p>\n<p>å› æ­¤ï¼Œä½ éœ€è¦è‡ªå·±å®šåˆ¶ä¸€ä¸ªCacheæ¡†æ¶å¹¶å¼•å…¥CacheåŠŸèƒ½ï¼Œè¿™ä¸¤ä»¶äº‹ä¸å¾—ä¸åšï¼š</p>\n<ol>\n<li>Write your own Disk Cache manager</li>\n<li>Use custom Caching Logic</li>\n</ol>\n<p>å¯ä»¥å‚ç…§å·²æœ‰çš„<a href=\"https://developer.android.com/samples/DisplayingBitmaps/src/com.example.android.displayingbitmaps/util/DiskLruCache.html\" target=\"_blank\" rel=\"noopener\">DiskLruCache</a></p>\n<p>ä¸åŒæ•°æ®çš„å„è‡ªå±æ€§é€šå¸¸è¦æ±‚å„å¼‚çš„Cacheç­–ç•¥ï¼Œæ¯”å¦‚ï¼Œæ–‡å­—æç¤ºè¯­çš„è¿‡æœŸæ—¶é—´ä¸å¤´åƒçš„è¿‡æœŸæ—¶é—´æ˜¯ä¸åŒçš„ã€‚</p>\n<p><img src=\"/img/160307_app_s4ep1/different_cache_time.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Codes-amp-Tools\"><a href=\"#Codes-amp-Tools\" class=\"headerlink\" title=\"Codes &amp; Tools\"></a>Codes &amp; Tools</h4><p>ä¸€äº›ä¼˜ç§€çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶</p>\n<ul>\n<li>Volly: <a href=\"https://developer.android.com/training/volley/index.html\" target=\"_blank\" rel=\"noopener\">https://developer.android.com/training/volley/index.html</a></li>\n<li>OkHttp: <a href=\"http://square.github.io/okhttp\" target=\"_blank\" rel=\"noopener\">http://square.github.io/okhttp</a></li>\n<li>Picasso: <a href=\"http://square.github.io/picasso\" target=\"_blank\" rel=\"noopener\">http://square.github.io/picasso</a></li>\n</ul>\n<p>AndroidStudioæä¾›äº†æŸ¥çœ‹ç½‘ç»œæ•°æ®æµé‡çš„<a href=\"http://developer.android.com/tools/debugging/ddms.html#network\" target=\"_blank\" rel=\"noopener\">Network Traffic Tool</a></p>\n<p><img src=\"/img/160307_app_s4ep1/network_traffic_tool.png\" alt=\"\"></p>\n<p>æ›´ä¸“ä¸šçš„å·¥å…·æ˜¯AT&amp;Tæä¾›çš„<a href=\"https://developer.att.com/application-resource-optimizer\" target=\"_blank\" rel=\"noopener\">ARO tool</a></p>\n<p><img src=\"/img/160307_app_s4ep1/aro_tool.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"é•¿å®å›½é™…ä½“æ“ä¸­å¿ƒæ¸¸æ³³é¦†å¼€æ”¾æ—¶é—´","url":"https://lilei.pro/2016/03/04/Changning-Swimming-Pool-Opening-Hours/","content":"<p>ğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠğŸŠ</p>\n<hr>\n<blockquote>\n<p>æ€§ä»·æ¯”æœ€é«˜æ—¶æ®µä¾æ—§ä¸ºå·¥ä½œæ—¥6:30~8:30ï¼Œæ°´è´¨å¥½ï¼Œäººå°‘ï¼Œä»·æ ¼ä½<br>æ¸¸æ³³é¦†ç½‘å€ï¼š<a href=\"http://www.swim.sh.cn\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<p><img src=\"/img/160304_changning_swimming_pool/photo.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["å¤§ä¿å¥"]},{"title":"Android Performance Patterns - s5ep10 Profile GPU Rendering, M Update","url":"https://lilei.pro/2016/02/25/Android-Performance-Patterns-s5ep10-Profile-GPU-Rendering/","content":"<blockquote>\n<p>Season 5 çš„æœ€åä¸€æœŸï¼ŒAndroid M ä¸­æ–°å¢äº†GPUæ¸²æŸ“åˆ†æå·¥å…·<br>å…‰å¤´å“¥ï¼Œæˆ‘ä»¬ä¸‹ä¸€å­£å†è§ï¼<br>PS. å…‰å¤´å“¥çš„å¤§åæ˜¯ Colt McAnlis<br><a href=\"https://www.youtube.com/watch?v=erGJw8WDV74&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=10\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/erGJw8WDV74?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Why-GPU-Profile-Tool\"><a href=\"#Why-GPU-Profile-Tool\" class=\"headerlink\" title=\"Why GPU Profile Tool\"></a>Why GPU Profile Tool</h4><p>ç”¨æˆ·åœ¨ä½¿ç”¨appæ—¶ï¼Œå¹¶ä¸å…³å¿ƒä½ çš„ä»£ç å†…éƒ¨ä½¿ç”¨äº†å¤šä¹ˆNBçš„ç®—æ³•ã€å¤šä¹ˆç¢‰å ¡çš„æ¡†æ¶ï¼Œç”¨æˆ·æœ€ç›´è§‚çš„ä½“éªŒæ˜¯â€”â€”ä½ çš„appæœ‰æ²¡æœ‰å¡é¡¿ã€ä¼šä¸ä¼šä¸¢å¸§ã€‚åŒç½‘ç«™ä¸€æ ·ï¼ŒappåŠ è½½çš„æ—¶é—´è¶Šé•¿ï¼Œç”¨æˆ·æµå¤±ä¹Ÿå°±è¶Šä¸¥é‡ã€‚å› æ­¤ï¼Œæ‰¾åˆ°ç”»é¢å¡é¡¿çš„åŸå› ä¾¿æ ¼å¤–é‡è¦ã€‚</p>\n<hr>\n<h4 id=\"GPU-Profiling-Tool-Before-M\"><a href=\"#GPU-Profiling-Tool-Before-M\" class=\"headerlink\" title=\"GPU Profiling Tool Before M\"></a>GPU Profiling Tool Before M</h4><p>åœ¨ç¬”è€…çš„Meizuæ‰‹æœºä¸Šï¼ˆAndroid 5.0ï¼‰ï¼Œå¯ä»¥åœ¨å¼€å‘è€…é€‰é¡¹ä¸­å¼€å¯â€œGPUå‘ˆç°æ¨¡å¼åˆ†æâ€æ¥æŸ¥çœ‹CPUç»˜åˆ¶æƒ…å†µã€‚ç°åœ¨ç¬”è€…æ‰“å¼€å¾®ä¿¡æœ‹å‹åœˆçš„ä¸€ä¸ªé“¾æ¥ï¼ˆhtml5é¡µé¢ï¼‰</p>\n<p><img src=\"/img/160225_app_s5ep10/click_link.jpg\" alt=\"\"></p>\n<p>ç»“åˆè¯´æ˜ï¼Œå¯ä»¥åˆæ­¥åˆ¤æ–­é‚£ä¸€æ¡æš´å¢çš„æ›²çº¿æ˜¯ç”±äºProcessè¿‡ç¨‹æ‰€è‡´ã€‚</p>\n<p><img src=\"/img/160225_app_s5ep10/gpu_profiling.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Strongerrrrrrr\"><a href=\"#Strongerrrrrrr\" class=\"headerlink\" title=\"Strongerrrrrrr!\"></a>Strongerrrrrrr!</h4><p>Android M ä¸ºæˆ‘ä»¬æä¾›äº†æ›´ä¸ºå¼ºå¤§çš„GPUæ¸²æŸ“åˆ†æå·¥å…·ï¼Œå¯ä»¥ç»†åŒ–åˆ°ä»¥ä¸‹8ä¸ªç»´åº¦ï¼Œæ³¨æ„åˆ°1ã€2ã€4ä¹Ÿå°±æ˜¯ä¸Šä¸€èŠ‚å›¾ä¸­çš„ä¸‰ä¸ªç»´åº¦ï¼ˆProcessã€Executeã€Updateï¼‰ï¼Œå®ƒä»¬ä¿æŒäº†ä¸å†å²ç›¸åŒçš„é¢œè‰²ï¼</p>\n<p><img src=\"/img/160225_app_s5ep10/eight_phases.png\" alt=\"\"></p>\n<p>ä¸‹é¢æˆ‘ä»¬ç€é‡åˆ†æä¸€ä¸‹å¦å¤–çš„äº”é¡¹æŒ‡æ ‡ã€‚</p>\n<hr>\n<h4 id=\"Sync-amp-Upload\"><a href=\"#Sync-amp-Upload\" class=\"headerlink\" title=\"Sync &amp; Upload\"></a>Sync &amp; Upload</h4><p><img src=\"/img/160225_app_s5ep10/sync_and_upload.png\" alt=\"\"></p>\n<ul>\n<li>è¿™é¡¹æŒ‡æ•°è¡¡é‡äº†bitmapè¢«åŒæ­¥åˆ°GPUçš„è€—æ—¶ï¼Œè¶Šå¤§çš„å›¾åƒï¼Œæ•°å€¼è¶Šé«˜ï¼Œé€šå¸¸å¤„ç†é«˜åƒç´ çš„å›¾ç‰‡æ—¶ä¼šå¯¼è‡´é£™å‡ã€‚</li>\n<li>å‡å°‘åŒæ—¶å±•ç¤ºçš„å›¾ç‰‡æ•°é‡ï¼Œæˆ–è€…å¯¹å›¾ç‰‡è¿›è¡Œé¢„å¤„ç†ï¼Œé™ä½å›¾ç‰‡å°ºå¯¸å¯ä»¥æœ‰æ•ˆé™ä½æ•°å€¼ã€‚</li>\n</ul>\n<hr>\n<h4 id=\"Measure-Layout\"><a href=\"#Measure-Layout\" class=\"headerlink\" title=\"Measure / Layout\"></a>Measure / Layout</h4><p><img src=\"/img/160225_app_s5ep10/measure_layout.png\" alt=\"\"></p>\n<ul>\n<li>è¿‡é«˜çš„æŒ‡æ•°ï¼Œè¡¨æ˜é¡µé¢å¸ƒå±€è¿‡äºå¤æ‚ï¼ˆsuper complex view hierarchyï¼‰</li>\n<li>ä¹Ÿå¯èƒ½æ˜¯ç”±äºdouble taxationæ‰€è‡´ï¼ˆå…³äºdouble layout taxationè¯·å‚é˜…<a href=\"https://www.youtube.com/watch?v=dB3_vgS-Uqo\" target=\"_blank\" rel=\"noopener\">Season 3 ep 8</a>ï¼‰</li>\n<li>è¯•ç€ç®€åŒ–å¸ƒå±€</li>\n</ul>\n<hr>\n<h4 id=\"Animation\"><a href=\"#Animation\" class=\"headerlink\" title=\"Animation\"></a>Animation</h4><p><img src=\"/img/160225_app_s5ep10/animation.png\" alt=\"\"></p>\n<ul>\n<li>è‹¥GPUåœ¨åŠ¨ç”»ä¸Šçš„è´Ÿè½½è¿‡é«˜ï¼Œå»æ£€æŸ¥ä½ æ‰€ä½¿ç”¨åˆ°çš„è‡ªå®šä¹‰åŠ¨ç”»</li>\n<li>è°¨æ…ä½¿ç”¨ <a href=\"http://developer.android.com/guide/topics/graphics/prop-animation.html\" target=\"_blank\" rel=\"noopener\"><strong>PropertyAnimation</strong></a></li>\n</ul>\n<hr>\n<h4 id=\"Input-Handling\"><a href=\"#Input-Handling\" class=\"headerlink\" title=\"Input Handling\"></a>Input Handling</h4><p><img src=\"/img/160225_app_s5ep10/input_handling.png\" alt=\"\"></p>\n<ul>\n<li>GPUæ¶ˆè€—äº†å¤šå°‘æ—¶é—´ç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥</li>\n<li>æˆ–è€…è¯´ï¼Œåœ¨ç›¸åº”ç”¨æˆ·è¾“å…¥çš„callbackä¸­ï¼ŒGPUçš„æ¶ˆè€—</li>\n<li>å¦‚æœå¤„ç†è¾“å…¥çš„é€»è¾‘è¿‡äºå¤æ‚ï¼Œä½¿ç”¨<code>Worker Thread</code></li>\n</ul>\n<hr>\n<h4 id=\"Misc-Vsync-Delay\"><a href=\"#Misc-Vsync-Delay\" class=\"headerlink\" title=\"Misc / Vsync Delay\"></a>Misc / Vsync Delay</h4><p><img src=\"/img/160225_app_s5ep10/misc_vsync_delay.png\" alt=\"\"></p>\n<ul>\n<li>å¦‚æœä½ ä»æ—¥å¿—ä¸­çœ‹åˆ°è¯¸å¦‚â€œmisc vsync â€¦ skipping â€¦ framesâ€çš„ä¿¡æ¯ï¼ŒThatâ€™s this thing!</li>\n<li>å‘ç”Ÿåœ¨ç›¸é‚»ä¸¤å¸§ä¹‹é—´çš„äº‹æƒ…ï¼Œéƒ½å¯ä»¥å½’ç±»äºæ­¤</li>\n<li>ä½¿ç”¨<code>Worker Thread</code>æ¥å¤„ç†è€—æ—¶æ“ä½œï¼Œé¿å…ä¸¢å¸§</li>\n</ul>\n<hr>\n<h4 id=\"A-Bigger-Bar\"><a href=\"#A-Bigger-Bar\" class=\"headerlink\" title=\"A Bigger Bar\"></a>A Bigger Bar</h4><p>ä¸Šé¢æåˆ°äº†5ä¸ªç»´åº¦ï¼ŒåŠ ä¸Šä¹‹å‰çš„3ä¸ªï¼Œä¸€å…±æ˜¯8ä¸ªç»´åº¦ã€‚è¦æŠŠè¿™8ä¸ªç»´åº¦åŒæ—¶ç”¨æŸ±çŠ¶å›¾å±•ç¤ºå‡ºæ¥å¯ä¸æ˜¯ä»¶å®¹æ˜“çš„äº‹ï¼Œè¿™å¯¹ä½ çš„è§†åŠ›æœ‰ç€ç›¸å½“çš„è¦æ±‚ã€‚</p>\n<p>æ–¹ä¾¿çš„æ˜¯ï¼ŒGPUå·¥å…·é‡Œè´´å¿ƒåœ°é€‚å½“æ‰©å®½åŠ é‡äº†é‚£äº›å¯èƒ½æœ‰é—®é¢˜çš„æ ‡ç¤ºï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªæ›´é†’ç›®çš„æŸ±çŠ¶å›¾å±•ç¤ºã€‚</p>\n<p><img src=\"/img/160225_app_s5ep10/bigger_bar.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Bye-Bye-Colt-McAlnis\"><a href=\"#Bye-Bye-Colt-McAlnis\" class=\"headerlink\" title=\"Bye Bye! Colt McAlnis\"></a>Bye Bye! Colt McAlnis</h4><p>See you in Season 6!</p>\n<p><img src=\"/img/160225_app_s5ep10/thank_you.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep9 The Importance Of Thread Priority","url":"https://lilei.pro/2016/02/25/Android-Performance-Patterns-s5ep9-The-Importance-Of-Thread-Priority/","content":"<blockquote>\n<p>CPUåŒä¸€æ—¶é—´åªèƒ½å¤„ç†æœ‰é™æ•°ç›®çš„çº¿ç¨‹ï¼Œèµ‹äºˆçº¿ç¨‹æ€æ ·çš„ä¼˜å…ˆçº§ï¼Œå°†å†³å®šå…¶æœ€ç»ˆåœ¨CPUä¸Šå¾—ä»¥æ‰§è¡Œçš„é¡ºåº<br>å…‰å¤´å“¥å›å½’å•¦ï¼è¯»ä¿¡çš„æ ·å­ç®€ç›´ä¸è¦å¤ªèŒï¼<br><a href=\"https://www.youtube.com/watch?v=NwFXVsM15Co&amp;index=9&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/NwFXVsM15Co?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Thread-Scheduling\"><a href=\"#Thread-Scheduling\" class=\"headerlink\" title=\"Thread Scheduling\"></a>Thread Scheduling</h4><p>çº¿ç¨‹è°ƒåº¦æ˜¯ç°ä»£è®¡ç®—æœºç³»ç»Ÿå¿…ä¸å¯å°‘çš„åŠŸèƒ½ï¼ŒAndroidåšä¸ºç‹¬ç‰¹çš„ç§»åŠ¨ç³»ç»Ÿï¼Œåœ¨çº¿ç¨‹è°ƒåº¦ä¸Šï¼Œè¿˜æœ‰ä¸€äº›å®ƒä¸ä¼—ä¸åŒçš„ç‰¹æ€§ã€‚</p>\n<p>Androidç³»ç»Ÿä¸­å¯¹äºçº¿ç¨‹ä¼˜å…ˆçº§çš„è€ƒè™‘ï¼Œè¿˜ä¼šåŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼š</p>\n<ul>\n<li>Activityç”Ÿå‘½å‘¨æœŸ</li>\n<li>æ˜¯å¦å¯è§</li>\n<li>Activityåœ¨å‰å°è¿˜æ˜¯è¿è¡Œ</li>\n</ul>\n<hr>\n<h4 id=\"Visible-vs-Invisible\"><a href=\"#Visible-vs-Invisible\" class=\"headerlink\" title=\"Visible vs Invisible\"></a>Visible vs Invisible</h4><p>CPUæ—¶é—´çš„90%å·¦å³ï¼Œéƒ½æ˜¯ç”¨ä»¥å¤„ç†ç•Œé¢å±•ç¤ºä¸­çš„çº¿ç¨‹ï¼Œåªæœ‰çº¦10%ç•™ç»™äº†åå°çº¿ç¨‹</p>\n<p><img src=\"/img/160225_app_s5ep9/foreground_vs_background.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"æ‹¼çˆ¹çš„çº¿ç¨‹\"><a href=\"#æ‹¼çˆ¹çš„çº¿ç¨‹\" class=\"headerlink\" title=\"æ‹¼çˆ¹çš„çº¿ç¨‹\"></a>æ‹¼çˆ¹çš„çº¿ç¨‹</h4><p>åœ¨çº¿ç¨‹çš„ä¸–ç•Œé‡Œï¼Œä¸€æ ·è¦æ‹¼çˆ¹â€”â€”æ–°åˆ›å»ºçš„çº¿ç¨‹ï¼Œå…¶ä¼˜å…ˆçº§ä¸åˆ›å»ºå®ƒçš„çº¿ç¨‹ç›¸åŒã€‚</p>\n<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ<code>UI Thread</code>åˆ›å»ºäº†20ä¸ª<code>Worker Thread</code>ï¼Œé‚£ä¹ˆè¿™20ä¸ª<code>Worker Thread</code>éƒ½å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œå®ƒä»¬ä¼šå¹³ç­‰ç«äº‰CPUæ—¶é—´ã€‚</p>\n<p><img src=\"/img/160225_app_s5ep9/same_priority.png\" alt=\"\"></p>\n<p>è¿™å…¶å®æ˜¯å¾ˆä¸å¥½çš„ï¼Œæˆ‘ä»¬çŸ¥é“å“ªäº›å·¥ä½œæ›´é‡è¦ï¼Œå“ªäº›å·¥ä½œç›¸æ¯”äºå…¶å®ƒä¸é‚£ä¹ˆé‡è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦ä¸»åŠ¨è®¾ç½®çº¿ç¨‹ä¼˜å…ˆçº§ï¼Œè®©é‚£äº›å…·æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¼˜å…ˆå¾—åˆ°æ‰§è¡Œã€‚</p>\n<hr>\n<h4 id=\"Priority\"><a href=\"#Priority\" class=\"headerlink\" title=\"Priority\"></a>Priority</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">android.os.Process.setThreadPriority(<span class=\"keyword\">int</span>);</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢çš„æ–¹æ³•æ¥å—<code>-20~24</code>é—­åŒºé—´å†…æ‰€æœ‰çš„æ•´æ•°ä½œä¸ºå‚æ•°ï¼Œæ•°å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ä¸ºç”šä¹ˆé‡‡ç”¨è´Ÿæ•°å‘¢ï¼Ÿæ•°å€¼è¶Šä½ï¼Œè¡¨ç¤ºè¿™ä¸ªçº¿ç¨‹è¶Šæ²¡æœ‰è€å¿ƒï¼Œæƒ…ç»ªè¶Šæš´èºï¼Œè¶Šæ€¥åˆ‡å¸Œæœ›å¾—åˆ°æ‰§è¡Œã€‚</p>\n<p><code>android.os.Process</code>ä¸­ä¸ºæˆ‘ä»¬å®šä¹‰äº†ä¸€äº›è¡¨ç¤ºçº¿ç¨‹ä¼˜å…ˆçº§çš„å¸¸é‡ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Standard priority of application threads.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_DEFAULT = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">     * ***************************************</span></span><br><span class=\"line\"><span class=\"comment\">     * ** Keep in sync with utils/threads.h **</span></span><br><span class=\"line\"><span class=\"comment\">     * ***************************************</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Lowest available thread priority.  Only for those who really, really</span></span><br><span class=\"line\"><span class=\"comment\">     * don't want to run if anything else is happening.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_LOWEST = <span class=\"number\">19</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Standard priority background threads.  This gives your thread a slightly</span></span><br><span class=\"line\"><span class=\"comment\">     * lower than normal priority, so that it will have less chance of impacting</span></span><br><span class=\"line\"><span class=\"comment\">     * the responsiveness of the user interface.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_BACKGROUND = <span class=\"number\">10</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Standard priority of threads that are currently running a user interface</span></span><br><span class=\"line\"><span class=\"comment\">     * that the user is interacting with.  Applications can not normally</span></span><br><span class=\"line\"><span class=\"comment\">     * change to this priority; the system will automatically adjust your</span></span><br><span class=\"line\"><span class=\"comment\">     * application threads as the user moves through the UI.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_FOREGROUND = -<span class=\"number\">2</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Standard priority of system display threads, involved in updating</span></span><br><span class=\"line\"><span class=\"comment\">     * the user interface.  Applications can not</span></span><br><span class=\"line\"><span class=\"comment\">     * normally change to this priority.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_DISPLAY = -<span class=\"number\">4</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Standard priority of the most important display threads, for compositing</span></span><br><span class=\"line\"><span class=\"comment\">     * the screen and retrieving input events.  Applications can not normally</span></span><br><span class=\"line\"><span class=\"comment\">     * change to this priority.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_URGENT_DISPLAY = -<span class=\"number\">8</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Standard priority of audio threads.  Applications can not normally</span></span><br><span class=\"line\"><span class=\"comment\">     * change to this priority.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_AUDIO = -<span class=\"number\">16</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * Standard priority of the most important audio threads.</span></span><br><span class=\"line\"><span class=\"comment\">     * Applications can not normally change to this priority.</span></span><br><span class=\"line\"><span class=\"comment\">     * Use with &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int)&#125; and</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> #setThreadPriority(int, int)&#125;, &lt;b&gt;not&lt;/b&gt; with the normal</span></span><br><span class=\"line\"><span class=\"comment\">     * &#123;<span class=\"doctag\">@link</span> java.lang.Thread&#125; class.</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_URGENT_AUDIO = -<span class=\"number\">19</span>;</span><br></pre></td></tr></table></figure>\n<p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªå¸¸é‡ç”¨äºæé«˜ï¼é™ä½ä¼˜å…ˆçº§ï¼Œè®°ä½ï¼Œè´Ÿæ•°è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼ˆmore favorableï¼‰ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Minimum increment to make a priority more favorable.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_MORE_FAVORABLE = -<span class=\"number\">1</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Minimum increment to make a priority less favorable.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"keyword\">int</span> THREAD_PRIORITY_LESS_FAVORABLE = +<span class=\"number\">1</span>;</span><br></pre></td></tr></table></figure>\n<p>æœ‰äº†ä¸Šé¢çš„çŸ¥è¯†ï¼Œä½ å°±å¯ä»¥åœ¨<code>UI Thread</code>å¯åŠ¨<code>Worker Thread</code>æ—¶ï¼Œé€šè¿‡<code>setPriority(THREAD_PRIORITY_DEFAULT + THREAD_PRIORITY_LESS_FAVORABLE * n)</code>çš„æ–¹å¼ï¼Œé…Œæƒ…é™ä½<code>Worker Thread</code>çš„ä¼˜å…ˆçº§äº†ã€‚</p>\n<hr>\n<h4 id=\"Thatâ€™s-How-We-Did-It\"><a href=\"#Thatâ€™s-How-We-Did-It\" class=\"headerlink\" title=\"Thatâ€™s How We Did It!\"></a>Thatâ€™s How We Did It!</h4><p>è¿˜è®°å¾—ä¹‹å‰æˆ‘ä»¬æ€»æ˜¯æåˆ°çš„ <strong>AsyncTask/HandlerThread/ThreadPool/IntentService</strong> ä¹ˆï¼Ÿå…¶ä¸­AsyncTaskå’ŒIntentServiceå·²ç»ä¸ºè‡ªåŠ¨æˆ‘ä»¬å®ç°äº†â€œé™ä½<code>Worker Thread</code>ä¼˜å…ˆçº§â€çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬æ— éœ€é¢å¤–è®¾ç½®ã€‚è€Œå¦å¤–ä¸¤ç§åˆ™æ²¡æœ‰è¿™ä¹ˆå‘¨åˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸»åŠ¨è®¾ç½®å·¥ä½œçº¿ç¨‹ä¼˜å…ˆçº§ã€‚</p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep8 Threading And Loaders","url":"https://lilei.pro/2016/02/25/Android-Performance-Patterns-s5ep8-Threading-And-Loaders/","content":"<blockquote>\n<p>Letâ€™s say youâ€™ve got some 20 bitmaps being decoded on a worker thread. Well, what happens if your activity is destroyed before that work completes?<br>ç›¸æ¯”äºæœ¬æœŸçš„å¤§å”ï¼Œç¬”è€…æ›´å–œæ¬¢ä¹‹å‰çš„å…‰å¤´å“¥<br><a href=\"https://www.youtube.com/watch?v=s4eAtMHU5gI&amp;index=8&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/s4eAtMHU5gI?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"No-One-Writes-to-the-Colonel\"><a href=\"#No-One-Writes-to-the-Colonel\" class=\"headerlink\" title=\"No One Writes to the Colonel\"></a>No One Writes to the Colonel</h4><blockquote>\n<p>äº”åå…­å¹´äº†ï¼Œä¸Šæ ¡å”¯ä¸€åšè¿‡çš„äº‹æƒ…å°±æ˜¯ç­‰å¾…ã€‚</p>\n</blockquote>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>Worker Thread</code>æ˜¯åœ¨<code>UI Thread</code>ä¹‹å¤–ç”¨æ¥å¤„ç†è€—æ—¶ä»»åŠ¡çš„çº¿ç¨‹ï¼Œå­˜åœ¨è¿™æ ·ä¸€ç§æƒ…å†µï¼Œå½“ä»»åŠ¡ç”±<code>Worker Thread</code>æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå¼•å‘è¿™é¡¹ä»»åŠ¡çš„Activityå·²ç»èµ°å®Œäº†<code>onDestroy</code>ï¼Œè¿™ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„åæœå‘¢ï¼Ÿ</p>\n<p>ç¬¬ä¸€ï¼ŒActivityè™½ç„¶ç»“æŸäº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¯è¿™ä¸ªå®ä¾‹å¹¶æ²¡æœ‰ä»å†…å­˜ä¸­é‡Šæ”¾â€”â€”å› ä¸º<code>Worker Thread</code>è¿˜æ‹¥æœ‰ç€Activityçš„referenceï¼Œè¿™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ï¼Œå¦‚å›¾1ï¼›ç¬¬äºŒï¼Œå·²ç»<code>onDestroy</code>è¿‡çš„Activityæ—©å·²ä»å±å¹•ä¸Šæ¶ˆå¤±ï¼Œæ— æ³•å“åº”ä»»åŠ¡æ‰§è¡Œåçš„è¿”å›ï¼Œæˆ‘ä»¬å¿…é¡»é‡æ–°åˆ›å»ºActivity2æ¥å¤„ç†ä»»åŠ¡è¿”å›åç•Œé¢å˜åŒ–ï¼Œå¦‚å›¾2ã€‚</p>\n<p>å›¾1<br><img src=\"/img/160225_app_s5ep8/activity_destroy.png\" alt=\"\"></p>\n<p>å›¾2<br><img src=\"/img/160225_app_s5ep8/use_activity_2.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"You-Should-Use-Loaders\"><a href=\"#You-Should-Use-Loaders\" class=\"headerlink\" title=\"You Should Use Loaders\"></a>You Should Use Loaders</h4><p>é’ˆå¯¹ä¸Šé¢çš„åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨<code>Loader</code>ã€‚è®¾è®¡åˆç†çš„Loaderå¯ä»¥é¿å…å†…å­˜æ³„æ¼ã€æ­£ç¡®å¤„ç†UIäº‹ä»¶ã€å¹¶ä¸”ä¸éœ€è¦é‡å¤æ‰§è¡Œã€‚</p>\n<p><a href=\"http://developer.android.com/reference/android/content/AsyncTaskLoader.html?utm_campaign=app_series_asyncsamplecode_021816&amp;utm_source=gdev&amp;utm_medium=yt-annt\" target=\"_blank\" rel=\"noopener\"><strong>LoaderManager</strong></a>æ˜¯ç”¨æ¥ç®¡ç†Loaderçš„æ¥å£ï¼Œå€ŸåŠ©å‰é¢é“¾æ¥ä¸­ä¾‹å­ä¸éš¾ç†è§£Loaderè¿è¡Œçš„æœºåˆ¶ï¼šè·å–LoaderManagerå®ä¾‹ï¼åˆå§‹åŒ–Loaderï¼å®ç°LoaderCallbacksæ¥å£å¤„ç†å›è°ƒã€‚</p>\n<p>LoaderManagerå¯ä»¥ç¼“å­˜ä»»åŠ¡æ‰§è¡Œç»“æœï¼Œè¿™æ ·å½“Activityé”€æ¯å¹¶é‡å»ºæ—¶ï¼Œå°±ä¸éœ€è¦é‡å¤æ‰§è¡Œå‰é¢å·²ç»æ‰§è¡Œè¿‡çš„ä»»åŠ¡äº†ã€‚</p>\n<p><img src=\"/img/160225_app_s5ep8/cache_result.png\" alt=\"\"></p>\n<p>å¦‚æœä¸€ä¸ªActivityè¢«ç»ˆæ­¢åä¸ä¼šé‡å»ºï¼Œæˆ‘ä»¬å°±åº”è¯¥åœ¨LoaderManagerçš„<code>onLoaderReset</code>ä¸­å¤„ç†è¿™ç§æƒ…å½¢ï¼Œé‡Šæ”¾å¼•ç”¨ã€‚</p>\n<p><img src=\"/img/160225_app_s5ep8/report_stop.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"The-Downside-of-Loaders\"><a href=\"#The-Downside-of-Loaders\" class=\"headerlink\" title=\"The Downside of Loaders\"></a>The Downside of Loaders</h4><p>é›†æˆè¾ƒä¸ºå¤æ‚ï¼Œä»£ç é‡å¤§ã€‚</p>\n<p>å‚è€ƒä¸‹é¢<a href=\"http://developer.android.com/reference/android/content/AsyncTaskLoader.html?utm_campaign=app_series_asyncsamplecode_021816&amp;utm_source=gdev&amp;utm_medium=yt-annt\" target=\"_blank\" rel=\"noopener\">Reference</a>ç»™å‡ºçš„ä¾‹å­ï¼Œå®ç°äº†Fragmentçš„ListViewä»è”ç³»äººContentProviderä¸­é€šè¿‡CursorLoaderè·å–æ•°æ®çš„è¿‡ç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">CursorLoaderListFragment</span> <span class=\"keyword\">extends</span> <span class=\"title\">ListFragment</span></span></span><br><span class=\"line\"><span class=\"class\">        <span class=\"keyword\">implements</span> <span class=\"title\">OnQueryTextListener</span>, <span class=\"title\">OnCloseListener</span>,</span></span><br><span class=\"line\"><span class=\"class\">        <span class=\"title\">LoaderManager</span>.<span class=\"title\">LoaderCallbacks</span>&lt;<span class=\"title\">Cursor</span>&gt; </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// This is the Adapter being used to display the list's data.</span></span><br><span class=\"line\">    SimpleCursorAdapter mAdapter;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// The SearchView for doing filtering.</span></span><br><span class=\"line\">    SearchView mSearchView;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// If non-null, this is the current filter the user has provided.</span></span><br><span class=\"line\">    String mCurFilter;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActivityCreated</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onActivityCreated(savedInstanceState);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Give some text to display if there is no data.  In a real</span></span><br><span class=\"line\">        <span class=\"comment\">// application this would come from a resource.</span></span><br><span class=\"line\">        setEmptyText(<span class=\"string\">\"No phone numbers\"</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// We have a menu item to show in action bar.</span></span><br><span class=\"line\">        setHasOptionsMenu(<span class=\"keyword\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Create an empty adapter we will use to display the loaded data.</span></span><br><span class=\"line\">        mAdapter = <span class=\"keyword\">new</span> SimpleCursorAdapter(getActivity(),</span><br><span class=\"line\">                android.R.layout.simple_list_item_2, <span class=\"keyword\">null</span>,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> String[] &#123; Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS &#125;,</span><br><span class=\"line\">                <span class=\"keyword\">new</span> <span class=\"keyword\">int</span>[] &#123; android.R.id.text1, android.R.id.text2 &#125;, <span class=\"number\">0</span>);</span><br><span class=\"line\">        setListAdapter(mAdapter);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Start out with a progress indicator.</span></span><br><span class=\"line\">        setListShown(<span class=\"keyword\">false</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Prepare the loader.  Either re-connect with an existing one,</span></span><br><span class=\"line\">        <span class=\"comment\">// or start a new one.</span></span><br><span class=\"line\">        getLoaderManager().initLoader(<span class=\"number\">0</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MySearchView</span> <span class=\"keyword\">extends</span> <span class=\"title\">SearchView</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">MySearchView</span><span class=\"params\">(Context context)</span> </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">super</span>(context);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// The normal SearchView doesn't clear its search text when</span></span><br><span class=\"line\">        <span class=\"comment\">// collapsed, so we will do this for it.</span></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onActionViewCollapsed</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            setQuery(<span class=\"string\">\"\"</span>, <span class=\"keyword\">false</span>);</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onActionViewCollapsed();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreateOptionsMenu</span><span class=\"params\">(Menu menu, MenuInflater inflater)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Place an action bar item for searching.</span></span><br><span class=\"line\">        MenuItem item = menu.add(<span class=\"string\">\"Search\"</span>);</span><br><span class=\"line\">        item.setIcon(android.R.drawable.ic_menu_search);</span><br><span class=\"line\">        item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM</span><br><span class=\"line\">                | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);</span><br><span class=\"line\">        mSearchView = <span class=\"keyword\">new</span> MySearchView(getActivity());</span><br><span class=\"line\">        mSearchView.setOnQueryTextListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        mSearchView.setOnCloseListener(<span class=\"keyword\">this</span>);</span><br><span class=\"line\">        mSearchView.setIconifiedByDefault(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        item.setActionView(mSearchView);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onQueryTextChange</span><span class=\"params\">(String newText)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Called when the action bar search text has changed.  Update</span></span><br><span class=\"line\">        <span class=\"comment\">// the search filter, and restart the loader to do a new query</span></span><br><span class=\"line\">        <span class=\"comment\">// with this filter.</span></span><br><span class=\"line\">        String newFilter = !TextUtils.isEmpty(newText) ? newText : <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        <span class=\"comment\">// Don't do anything if the filter hasn't actually changed.</span></span><br><span class=\"line\">        <span class=\"comment\">// Prevents restarting the loader when restoring state.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mCurFilter == <span class=\"keyword\">null</span> &amp;&amp; newFilter == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mCurFilter != <span class=\"keyword\">null</span> &amp;&amp; mCurFilter.equals(newFilter)) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        mCurFilter = newFilter;</span><br><span class=\"line\">        getLoaderManager().restartLoader(<span class=\"number\">0</span>, <span class=\"keyword\">null</span>, <span class=\"keyword\">this</span>);</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onQueryTextSubmit</span><span class=\"params\">(String query)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Don't care about this.</span></span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">boolean</span> <span class=\"title\">onClose</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (!TextUtils.isEmpty(mSearchView.getQuery())) &#123;</span><br><span class=\"line\">            mSearchView.setQuery(<span class=\"keyword\">null</span>, <span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span> <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onListItemClick</span><span class=\"params\">(ListView l, View v, <span class=\"keyword\">int</span> position, <span class=\"keyword\">long</span> id)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Insert desired behavior here.</span></span><br><span class=\"line\">        Log.i(<span class=\"string\">\"FragmentComplexList\"</span>, <span class=\"string\">\"Item clicked: \"</span> + id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// These are the Contacts rows that we will retrieve.</span></span><br><span class=\"line\">    <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> String[] CONTACTS_SUMMARY_PROJECTION = <span class=\"keyword\">new</span> String[] &#123;</span><br><span class=\"line\">        Contacts._ID,</span><br><span class=\"line\">        Contacts.DISPLAY_NAME,</span><br><span class=\"line\">        Contacts.CONTACT_STATUS,</span><br><span class=\"line\">        Contacts.CONTACT_PRESENCE,</span><br><span class=\"line\">        Contacts.PHOTO_ID,</span><br><span class=\"line\">        Contacts.LOOKUP_KEY,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> Loader&lt;Cursor&gt; <span class=\"title\">onCreateLoader</span><span class=\"params\">(<span class=\"keyword\">int</span> id, Bundle args)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// This is called when a new Loader needs to be created.  This</span></span><br><span class=\"line\">        <span class=\"comment\">// sample only has one Loader, so we don't care about the ID.</span></span><br><span class=\"line\">        <span class=\"comment\">// First, pick the base URI to use depending on whether we are</span></span><br><span class=\"line\">        <span class=\"comment\">// currently filtering.</span></span><br><span class=\"line\">        Uri baseUri;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (mCurFilter != <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">            baseUri = Uri.withAppendedPath(Contacts.CONTENT_FILTER_URI,</span><br><span class=\"line\">                    Uri.encode(mCurFilter));</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            baseUri = Contacts.CONTENT_URI;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// Now create and return a CursorLoader that will take care of</span></span><br><span class=\"line\">        <span class=\"comment\">// creating a Cursor for the data being displayed.</span></span><br><span class=\"line\">        String select = <span class=\"string\">\"((\"</span> + Contacts.DISPLAY_NAME + <span class=\"string\">\" NOTNULL) AND (\"</span></span><br><span class=\"line\">                + Contacts.HAS_PHONE_NUMBER + <span class=\"string\">\"=1) AND (\"</span></span><br><span class=\"line\">                + Contacts.DISPLAY_NAME + <span class=\"string\">\" != '' ))\"</span>;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> CursorLoader(getActivity(), baseUri,</span><br><span class=\"line\">                CONTACTS_SUMMARY_PROJECTION, select, <span class=\"keyword\">null</span>,</span><br><span class=\"line\">                Contacts.DISPLAY_NAME + <span class=\"string\">\" COLLATE LOCALIZED ASC\"</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoadFinished</span><span class=\"params\">(Loader&lt;Cursor&gt; loader, Cursor data)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// Swap the new cursor in.  (The framework will take care of closing the</span></span><br><span class=\"line\">        <span class=\"comment\">// old cursor once we return.)</span></span><br><span class=\"line\">        mAdapter.swapCursor(data);</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"comment\">// The list should now be shown.</span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (isResumed()) &#123;</span><br><span class=\"line\">            setListShown(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            setListShownNoAnimation(<span class=\"keyword\">true</span>);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onLoaderReset</span><span class=\"params\">(Loader&lt;Cursor&gt; loader)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// This is called when the last Cursor provided to onLoadFinished()</span></span><br><span class=\"line\">        <span class=\"comment\">// above is about to be closed.  We need to make sure we are no</span></span><br><span class=\"line\">        <span class=\"comment\">// longer using it.</span></span><br><span class=\"line\">        mAdapter.swapCursor(<span class=\"keyword\">null</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep7 The Zen Of IntentService","url":"https://lilei.pro/2016/02/24/Android-Performance-Patterns-s5ep7-The-Zen-Of-IntentService/","content":"<blockquote>\n<p>Season 5 ep 7ï¼ŒIntentServiceä¹‹ç¦…ã€‚<br>è§å±±æ˜¯å±±ï¼Œè§æ°´æ˜¯æ°´ï¼›è§å±±ä¸æ˜¯å±±ï¼Œè§æ°´ä¸æ˜¯æ°´ï¼›è§å±±ä»æ˜¯å±±ï¼Œè§æ°´ä»æ˜¯æ°´ã€‚<br><a href=\"https://www.youtube.com/watch?v=9FweabuBi1U&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=7\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/9FweabuBi1U?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Work-With-An-Intent\"><a href=\"#Work-With-An-Intent\" class=\"headerlink\" title=\"Work With An Intent\"></a>Work With An Intent</h4><p>åœ¨Androidç³»ç»Ÿä¸­æˆ‘ä»¬ç»å¸¸ä¼šç”¨Intentæ¥ä¼ é€’æ¶ˆæ¯ï¼Œå¦‚æœä¸€ä¸ªIntentéœ€è¦èŠ±å¾ˆé•¿æ—¶é—´æ¥å¤„ç†ï¼Œåœ¨ä¸Šè¿‡äº†å‰é¢å‡ èŠ‚è¯¾ä¹‹åï¼Œä½ ä¸€å®šå·²ç»æŒæ¡äº†å¦‚ä½•åº”å¯¹è¿™ç§taskçš„åŠæ³•â€”â€”åœ¨æ–°çš„<code>Worker Thread</code>ä¸­è§£å†³è¿™ä¸ªä»»åŠ¡ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep7/large_intent_work.png\" alt=\"\"></p>\n<p>åŸºäºSeason 5å‰é¢å‡ èŠ‚æ‰€è®²çš„çŸ¥è¯†ï¼Œä½ å¯èƒ½ä¼šé€‰ç”¨<strong>AsyncTask</strong>æˆ–è€…<strong>HandlerThread</strong>æ¥å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œç„¶è€Œï¼Œè¿™ä¸¤ä¸ªå¹¶éæœ€å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºï¼š</p>\n<ul>\n<li>AsyncTaské€šå¸¸å¤„ç†UIäº¤äº’æ–¹é¢çš„äº‹æƒ…ï¼Œå½“ä½ çš„Activityæ­£å¤„äºåå°ï¼ˆæ²¡æœ‰ä»»ä½•UIå…ƒç´ åœ¨æ¸²æŸ“ä¸­ï¼‰æ—¶ï¼ŒAsyncTaskå¹¶ä¸èƒ½å®Œæˆå®ƒçš„ä»»åŠ¡</li>\n<li>HandlerThreadå€’æ˜¯å¯ä»¥è„±ç¦»UIè¿è¡Œï¼Œä¸è¿‡å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„Threadï¼Œå½“æ²¡æœ‰Intentè¿‡æ¥æ—¶ï¼Œè¿™ä¸ªThreadä»ç„¶ä¼šç»´æŒå®ƒçš„ç”Ÿå‘½æ´»åŠ¨ï¼Œæ„å‘³ç€ï¼Œç©ºé—²æ—¶å ç”¨èµ„æºã€‚ï¼ˆä¸€æ¡Threadä¼šå ç”¨65k+çš„å†…å­˜ï¼‰</li>\n</ul>\n<hr>\n<h4 id=\"IntentService\"><a href=\"#IntentService\" class=\"headerlink\" title=\"IntentService\"></a>IntentService</h4><p>è¿™æ˜¯å°±è¦éš†é‡æ¨å‡º<a href=\"http://developer.android.com/reference/android/app/IntentService.html\" target=\"_blank\" rel=\"noopener\"><strong>IntentService</strong></a>äº†ã€‚IntentServiceæ›´åƒæ˜¯Serviceä¸HandlerThreadçš„åˆä½“ï¼ˆa hybrid between Service class and HandlerThreadï¼‰ï¼Œå®ƒç»§æ‰¿è‡ªServiceï¼Œåœ¨è¿è¡Œæ—¶ä¼šåˆ›å»ºHandlerThreadï¼Œæ¥å¤„ç†æ¥æ”¶åˆ°çš„Intentè¯·æ±‚ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep7/intent_service.png\" alt=\"\"></p>\n<p>å› ä¸ºIntentServiceæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªServiceï¼Œä½ å¯ä»¥é€šè¿‡å®ƒè¿›è¡Œä¸€äº›Serviceæ—¢æœ‰çš„åŠŸèƒ½ï¼Œå¦‚ä½¿ç”¨alarmåšå®šæ—¶ï¼å¾ªç¯æ“ä½œã€‚</p>\n<hr>\n<h4 id=\"Be-Careful-With-IntentService\"><a href=\"#Be-Careful-With-IntentService\" class=\"headerlink\" title=\"Be Careful With IntentService\"></a>Be Careful With IntentService</h4><p>åœ¨äº«å—IntentServiceæ‰€å¸¦æ¥ä¾¿åˆ©çš„æ—¶å€™ï¼Œä¹Ÿæœ‰ä¸€äº›æ³¨æ„äº‹é¡¹ã€‚</p>\n<p>é¦–å…ˆï¼ŒIntentServiceæ‰€æœ‰ä»»åŠ¡æ˜¯åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­æŒ‰é¡ºåºå¤„ç†çš„ï¼ŒåŒAsyncTaskä¸€æ ·ï¼Œå¦‚æœæ’åœ¨å‰é¢çš„ä¸€ä¸ªä»»åŠ¡æå…¶è€—æ—¶ï¼Œä¼šä½¿å¾—åé¢ä»»åŠ¡è¿Ÿè¿Ÿå¾—ä¸åˆ°æ‰§è¡Œï¼Œè¿™æ˜¯å°±è¦è€ƒè™‘HandlerThreadç­‰å…¶ä»–è§£å†³æ–¹æ¡ˆäº†ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep7/one_work_queue.png\" alt=\"\"></p>\n<p>å…¶æ¬¡ï¼ŒIntentServiceä½¿ç”¨ç±»ä¼¼Broadcast Receiverçš„æœºåˆ¶å°†ä»»åŠ¡æ‰§è¡Œç»“æœè¿”å›ç»™Activityï¼Œè¿™åœ¨è¿è¡Œç»“æœçš„æ­£ç¡®æ€§ä¸Šå¹¶æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ç„¶è€Œå¯¹äºç®€å•çš„ç»“æœè¿”å›æ“ä½œï¼Œæ˜¯ä¸éœ€è¦ä½¿ç”¨å¦‚æ­¤é‡é‡çº§çš„Broadcast Receiveræ¥è¿›è¡Œçš„ã€‚ä½ å¯ä»¥æ”¹ç”¨<code>runOnUIThread</code>æ¥é™ä½èµ„æºæ¶ˆè€—ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep7/broadcast_receiver.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Other-Benifits-of-IntentService\"><a href=\"#Other-Benifits-of-IntentService\" class=\"headerlink\" title=\"Other Benifits of IntentService\"></a>Other Benifits of IntentService</h4><p>ä½¿ç”¨IntentServiceè¿˜æœ‰ä¸€ä¸ªé™„åŠ çš„å¥½å¤„â€”â€”å®ƒä¼šä½¿ä½ çš„appåœ¨è¢«åˆ‡æ¢åˆ°åå°æ—¶ï¼Œä¸é‚£ä¹ˆå®¹æ˜“è¢«æ€æ­»ã€‚ï¼ˆç›¸æ¯”äºé‚£äº›åœ¨åå°è¿è¡Œä¸”æ²¡æœ‰Serviceçš„appè€Œè¨€ï¼‰</p>\n<p><img src=\"/img/160224_app_s5ep7/not_killed.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep6 Swimming in ThreadPools","url":"https://lilei.pro/2016/02/24/Android-Performance-Patterns-s5ep6-Swimming-In-ThreadPools/","content":"<blockquote>\n<p>Season 5 ep 6ï¼Œå…³äºçº¿ç¨‹æ± ä½ åº”è¯¥çŸ¥é“çš„äº‹<br><a href=\"https://www.youtube.com/watch?v=uCmHoEY1iTM&amp;index=6&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">Video Link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/uCmHoEY1iTM?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"One-Thread-One-Thing\"><a href=\"#One-Thread-One-Thing\" class=\"headerlink\" title=\"One Thread, One Thing\"></a>One Thread, One Thing</h4><blockquote>\n<p>ä¸”è¯´å­”æ˜è‡ªå¼•ä¸€å†›å±¯äºäº”ä¸ˆåŸï¼Œç´¯ä»¤äººæ¦æˆ˜ï¼Œé­å…µåªä¸å‡ºã€‚å­”æ˜ä¹ƒå–å·¾å¸¼å¹¶å¦‡äººç¼Ÿç´ ä¹‹æœï¼Œç››äºå¤§ç›’ä¹‹å†…ï¼Œä¿®ä¹¦ä¸€å°ï¼Œé£äººé€è‡³é­å¯¨ã€‚è¯¸å°†ä¸æ•¢éšè”½ï¼Œå¼•æ¥ä½¿å…¥è§å¸é©¬æ‡¿ã€‚æ‡¿å¯¹ä¼—å¯ç›’è§†ä¹‹ï¼Œå†…æœ‰å·¾å¸¼å¦‡äººä¹‹è¡£ï¼Œå¹¶ä¹¦ä¸€å°ã€‚æ‡¿æ‹†è§†å…¶ä¹¦ï¼Œç•¥æ›°ï¼šâ€œä»²è¾¾æ—¢ä¸ºå¤§å°†ï¼Œç»Ÿé¢†ä¸­åŸä¹‹ä¼—ï¼Œä¸æ€æŠ«åšæ‰§é”ï¼Œä»¥å†³é›Œé›„ï¼Œä¹ƒç”˜çªŸå®ˆåœŸå·¢ï¼Œè°¨é¿åˆ€ç®­ï¼Œä¸å¦‡äººåˆä½•å¼‚å“‰ï¼ä»Šé£äººé€å·¾å¸¼ç´ è¡£è‡³ï¼Œå¦‚ä¸å‡ºæˆ˜ï¼Œå¯å†æ‹œè€Œå—ä¹‹ã€‚å€˜è€»å¿ƒæœªæ³¯ï¼ŒçŠ¹æœ‰ç”·å­èƒ¸è¥Ÿï¼Œæ—©ä¸æ‰¹å›ï¼Œä¾æœŸèµ´æ•Œã€‚â€å¸é©¬æ‡¿çœ‹æ¯•ï¼Œå¿ƒä¸­å¤§æ€’ï¼Œä¹ƒä½¯ç¬‘æ›°ï¼šâ€œå­”æ˜è§†æˆ‘ä¸ºå¦‡äººè€¶ï¼â€å³å—ä¹‹ï¼Œä»¤é‡å¾…æ¥ä½¿ã€‚æ‡¿é—®æ›°ï¼šâ€œå­”æ˜å¯é£ŸåŠäº‹ä¹‹çƒ¦ç®€è‹¥ä½•ï¼Ÿâ€ä½¿è€…æ›°ï¼šâ€œä¸ç›¸<strong>å¤™å…´å¤œå¯ï¼Œç½šäºŒåä»¥ä¸Šçš†äº²è§ˆç„‰ã€‚</strong>æ‰€å•–ä¹‹é£Ÿï¼Œæ—¥ä¸è¿‡æ•°å‡ã€‚â€æ‡¿é¡¾è°“è¯¸å°†æ›°ï¼šâ€œ<strong>å­”æ˜é£Ÿå°‘äº‹çƒ¦ï¼Œå…¶èƒ½ä¹…ä¹ï¼Ÿ</strong>â€ â€”â€”ã€Šä¸‰å›½æ¼”ä¹‰ã€‹ç¬¬ä¸€ç™¾åä¸‰å›  ä¸Šæ–¹è°·å¸é©¬å—å›° äº”ä¸ˆåŸè¯¸è‘›ç¦³æ˜Ÿ</p>\n</blockquote>\n<p>è®ºæ™ºè®¡è°‹ç•¥ï¼Œè¯¸è‘›äº®è¦èƒœè¿‡å¸é©¬æ‡¿ï¼Œç„¶è€Œï¼Œç”±äºä¸ç›¸ä¸è®ºå·¨ç»†äº‹å¿…èº¬äº²ï¼Œåªè½å¾—æ˜Ÿè½äº”ä¸ˆåŸçš„æ‚²æƒ¨ç»“å±€ã€‚å¯è§ï¼Œäººçš„ç²¾åŠ›æ˜¯æœ‰é™çš„ï¼Œä¸åº”å½“æŠŠæ‰€æœ‰çš„ä»»åŠ¡éƒ½å‹åœ¨åŒä¸€ä¸ªäººå¤´ä¸Šã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œè¿™ä¸€ç†è®ºåŒæ ·é€‚ç”¨ã€‚</p>\n<p>å¯¹äºçº¿ç¨‹ï¼Œæœ‰ä¸“é—¨å¤„ç†éŸ³é¢‘çš„Audio Threadï¼Œæœ‰å“åº”IOçš„IO Threadï¼Œè¿˜æœ‰è´Ÿè´£ç½‘ç»œäº‹åŠ¡çš„Networking Threadï¼Œè¿™äº›éƒ½æ˜¯è‰¯å¥½çš„ç¼–ç¨‹å…¸èŒƒã€‚</p>\n<p>ç„¶è€Œï¼Œå­˜åœ¨è¿™æ ·çš„æƒ…å†µï¼šå½“æŸä¸€ç³»åˆ—çš„ä»»åŠ¡æ•°é‡å®åœ¨å¤ªå¤šï¼Œå·²ç»è¶…è¿‡äº†å•ä¸ªçº¿ç¨‹æ‰€èƒ½æ‰¿å—çš„æé™ã€‚è¿™æ—¶æˆ‘ä»¬åº”å½“æ€ä¹ˆåšï¼Ÿå¦‚æœå·¥ä½œçº¿ç¨‹æœ‰ä¸”åªèƒ½ç”±ä¸€ä¸ªï¼Œå°±åƒè¯¸è‘›ä¸ç›¸ä¸€æ ·ä¸å¾—ä¸äº²åŠ›äº²ä¸ºï¼Œé‚£å¯å°±GGäº†ã€‚ä¸å¿…æ‹…å¿ƒï¼Œæ–°æ—¶ä»£çš„è®¡ç®—æœºç§‘å­¦å·²ç»è®©æˆ‘ä»¬ä¹ å¾—äº†ç§˜-å½±åˆ†èº«ä¹‹æœ¯ã€‚</p>\n<p>çœ‹ä¸€çœ‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼Œé¡µé¢é‡Œéœ€è¦å±•ç¤º40å¼ å›¾ç‰‡ï¼Œæ¯å¼ å›¾ç‰‡çš„è§£ç æ¶ˆè€—4msæ—¶é—´ï¼Œå¦‚æœåªæœ‰å•ä¸€çº¿ç¨‹è¿›è¡Œæ“ä½œï¼Œæ€»å…±éœ€è¦ç”¨æ‰160msã€‚è¿™æ˜¾ç„¶æ˜¯éš¾ä»¥æ¥å—çš„ã€‚</p>\n<p>å¦‚æœæˆ‘ä»¬ç”¨10æ¡çº¿ç¨‹å¹¶è¡Œè®¡ç®—ï¼Œå¯ä»¥æŠŠæ—¶é—´å‹ç¼©åˆ°16msã€‚</p>\n<p><img src=\"/img/160224_app_s5ep6/parallel.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Thread-Pool-Executor\"><a href=\"#Thread-Pool-Executor\" class=\"headerlink\" title=\"Thread Pool Executor\"></a>Thread Pool Executor</h4><p>æœ‰äº†å¹¶å‘å¤„ç†è¿™ä¸€ä¸ªæ€è·¯ï¼Œä¾¿å¯ä»¥å€ŸåŠ©äºJAVAæä¾›çš„å¼ºåŠ›å·¥å…·<a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" target=\"_blank\" rel=\"noopener\"><strong>ThreadPoolExecutor</strong></a>æ¥æ‰§è¡Œä»»åŠ¡äº†ã€‚ä½ åªéœ€è¦å£°æ˜éœ€è¦çš„çº¿ç¨‹æ•°ï¼Œå¹¶ä¸”æŠŠæ‹†åˆ†å¥½çš„Taskä¼ é€’ç»™ThreadPoolExecutorï¼ŒThreadPoolExecutorè‡ªèº«ä¼šå¤„ç†ä»»åŠ¡åˆ†é…ã€çº¿ç¨‹è°ƒåº¦ã€çº¿ç¨‹å›æ”¶ç­‰æ“ä½œã€‚</p>\n<p><img src=\"/img/160224_app_s5ep6/thread_pool_executor.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"The-More-The-Better\"><a href=\"#The-More-The-Better\" class=\"headerlink\" title=\"The More, The Better?\"></a>The More, The Better?</h4><blockquote>\n<p>Thread is evil</p>\n</blockquote>\n<p>å¹¶å‘çš„çº¿ç¨‹æ•°å¹¶éè¶Šå¤šè¶Šå¥½ï¼Œé¦–å…ˆï¼Œä¸€å°ä¸»æœºèƒ½å¤Ÿå¼€å¯çš„çº¿ç¨‹æ•°æ˜¯æœ‰ä¸Šé™çš„ï¼›å…¶æ¬¡ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢æœ¬èº«æœ‰ä»£ä»·ï¼ˆçº¿ç¨‹åŒæ­¥ã€é”ä¸äº’æ–¥ã€ç¯å¢ƒå‡†å¤‡ç­‰ç­‰ï¼‰ï¼›å†æ¬¡ï¼Œè·ŸCPUæ•°æœ‰å…³ï¼ŒCPUè¶Šå¤šï¼Œæœ€å¤§æ€§èƒ½ä¸‹å¯å¹¶å‘çº¿ç¨‹æ•°è¶Šå¤šã€‚</p>\n<p>æœ€ä½³çº¿ç¨‹æ•°è¦åœ¨å®è·µä¸­é€šè¿‡å‹æµ‹ç­‰æ‰‹æ®µè·çŸ¥ã€‚é€šå¸¸æˆ‘ä»¬å¼€å‘ä¸­æ§åˆ¶å¹¶è¡Œçº¿ç¨‹æ•°=CPUæ•°å³å¯ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep6/thread_is_evil.png\" alt=\"\"></p>\n<p>æ¯æ¡çº¿ç¨‹è‡³å°‘å ç”¨<code>64k</code>çš„å†…å­˜</p>\n<p><img src=\"/img/160224_app_s5ep6/64k.png\" alt=\"\"></p>\n<p><code>ThreadPoolExecutor</code>çš„æ„é€ è¿‡ç¨‹ä¸­ï¼Œå…è®¸æˆ‘ä»¬æ§åˆ¶åˆå§‹çº¿ç¨‹æ•°ã€æœ€å¤§çº¿ç¨‹æ•°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡<code>Runtime.getRuntime().availableProcessors()</code>è·å–åˆ°çš„å†…æ ¸æ•°ä¹Ÿè®¸ä¼šå°äºçœŸå®CPUæ•°â€”â€”å‡ºäºèŠ‚çº¦ç”µé‡ç­‰è€ƒè™‘ï¼ŒAndroidç³»ç»Ÿä¼šè®©æŸäº›CPUåœ¨ç©ºé—²æ—¶å¤„äºä¼‘çœ çŠ¶æ€ï¼Œè¿™äº›CPUä¸ä¼šè¢«è®¡æ•°ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> NUM_OF_CORES = Runtime.getRuntime().availableProcessors();</span><br><span class=\"line\">mDecodeThreadPool = <span class=\"keyword\">new</span> ThreadPoolExecutor(</span><br><span class=\"line\">\t\t\t\tNUM_OF_CORES &gt;&gt; <span class=\"number\">1</span>, <span class=\"comment\">// initial pool size</span></span><br><span class=\"line\">\t\t\t\tNUM_OF_CORES, <span class=\"comment\">// max pool size</span></span><br><span class=\"line\">\t\t\t\tKEEP_ALIVE_TIME, <span class=\"comment\">// keep alive time</span></span><br><span class=\"line\">\t\t\t\tKEEP_ALIVE_TIME_UNIT, <span class=\"comment\">// keep alive units (seconds etc)</span></span><br><span class=\"line\">\t\t\t\tmDecodeTaskQueue);</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"For-Power-Users-Like-U\"><a href=\"#For-Power-Users-Like-U\" class=\"headerlink\" title=\"For Power Users Like U\"></a>For Power Users Like U</h4><p><a href=\"http://developer.android.com/guide/topics/renderscript/compute.html\" target=\"_blank\" rel=\"noopener\"><strong>RenderScript</strong></a>æ˜¯ä¸“é—¨ç”¨æ¥è¿›è¡Œå¤§é‡å¹¶è¡Œè®¡ç®—çš„å·¥å…·ï¼Œå½“ä½ æœ‰è¿™æ–¹é¢çš„éœ€æ±‚æ—¶ï¼Œä¸å¦¨å°è¯•ä¸€ä¸‹ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep6/renderscript.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Use-Systrace-to-Analyze\"><a href=\"#Use-Systrace-to-Analyze\" class=\"headerlink\" title=\"Use Systrace to Analyze\"></a>Use Systrace to Analyze</h4><p>ç”¨ä»¥åˆ†æçº¿ç¨‹ã€å†…å­˜çš„Systraceå·¥å…·åœ¨å‰æ–‡å·²ç»ä»‹ç»è¿‡ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep5 Getting A HandlerThread","url":"https://lilei.pro/2016/02/24/Android-Performance-Patterns-s5ep5-Getting-A-HandlerThread/","content":"<blockquote>\n<p>Season5 ep5çš„ä¸»é¢˜æ˜¯HandlerThread<br><a href=\"https://www.youtube.com/watch?v=adPLIAnx9og&amp;index=5&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/adPLIAnx9og?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"A-Case-â€“-Camera-Preview\"><a href=\"#A-Case-â€“-Camera-Preview\" class=\"headerlink\" title=\"A Case â€“ Camera Preview\"></a>A Case â€“ Camera Preview</h4><p>åœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹ï¼ŒAsyncTaskå·²ç»å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„åŠŸèƒ½éœ€æ±‚ã€‚ä¸è¿‡ï¼ŒAsyncTaskå¹¶ä¸æ˜¯å¯¹äºå„ç§åœºæ™¯å…¨éƒ½é€‚ç”¨çš„ã€‚å¯¹äºç‰¹åˆ«è€—æ—¶çš„æ“ä½œï¼Œå¦‚ç…§ç›¸æœºçš„é¢„è§ˆå›¾ç»˜åˆ¶ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">abstract</span> <span class=\"keyword\">void</span> <span class=\"title\">onPreviewFrame</span> <span class=\"params\">(<span class=\"keyword\">byte</span>[] data, Camera camera)</span></span>;</span><br></pre></td></tr></table></figure>\n<p><img src=\"/img/160224_app_s5ep5/camera_preview.png\" alt=\"\"></p>\n<p><code>onPreviewFrame</code>æ”¾åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œçš„è¯ï¼Œä¼šå› ä¸ºå¤§é‡æ—¶é—´ç”¨äºè®¡ç®—è€Œäº§ç”Ÿä¸¢å¸§ï¼Œæ–¹æ¡ˆä¸€passï¼</p>\n<p><img src=\"/img/160224_app_s5ep5/no_in_main_thread.png\" alt=\"\"></p>\n<p>æ”¾åœ¨AsyncTaskä¸­æ‰§è¡Œçš„è¯ï¼Œå› ä¸ºè‡ªèº«çš„è€—æ—¶ç‰¹åˆ«é•¿ï¼Œå¯¼è‡´åç»­ä»»åŠ¡å§‹ç»ˆå¾—ä¸åˆ°æ‰§è¡Œï¼Œæ–¹æ¡ˆäºŒpassï¼</p>\n<p><img src=\"/img/160224_app_s5ep5/no_in_asynctask.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"How\"><a href=\"#How\" class=\"headerlink\" title=\"How?\"></a>How?</h4><p>åŸºäºä¸Šé¢çš„è€ƒè™‘ï¼Œæˆ‘ä»¬éœ€è¦æœ‰è¿™æ ·ä¸€ä¸ªç‹¬ç«‹äºä¸»çº¿ç¨‹ã€å¯ä»¥æ‰§è¡Œå†—é•¿ä»»åŠ¡çš„æœºåˆ¶ï¼Œæ¥å®Œæˆç…§ç›¸æœºé¢„è§ˆå›¾çš„è·å–ã€‚</p>\n<p>è®©æˆ‘ä»¬æ¥è®¤è¯†ä¸€ä¸‹<a href=\"http://developer.android.com/reference/android/os/HandlerThread.html\" target=\"_blank\" rel=\"noopener\"><strong>HandlerThread</strong></a>ã€‚<code>HandlerThread</code>ç»§æ‰¿è‡ª<code>java.lang.Thread</code>ï¼Œå¯ä»¥é€šè¿‡<code>getLooper()</code>çš„æ–¹æ³•æ¥è·å–æŸä¸ª<code>HandlerThread</code>çš„Looperï¼Œæ‹¿åˆ°Looperä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡å®ƒåˆ›å»ºä¸€ä¸ªHandlerï¼Œè¿›è€Œç”¨è¿™ä¸ªHandlerå¤„ç†é¢„è§ˆå›¾ç»˜åˆ¶è¿™æ ·çš„å·¥ä½œäº†ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep5/handler_thread.png\" alt=\"\"></p>\n<p>demoè§ä¸‹é¢çš„ä»£ç ç‰‡æ®µ</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">HandlerThread handlerThread = <span class=\"keyword\">new</span> HandlerThread(<span class=\"string\">\"photo preview\"</span>);</span><br><span class=\"line\">handlerThread.start();</span><br><span class=\"line\">Handler handler = <span class=\"keyword\">new</span> Handler(handlerThread.getLooper());</span><br><span class=\"line\">handler.sendMessage(Handler.obtainMessage(<span class=\"number\">0</span>)); <span class=\"comment\">// åœ¨handleMessageæ–¹æ³•ä¸­ç»˜åˆ¶é¢„è§ˆå›¾</span></span><br></pre></td></tr></table></figure>\n<p>å½“è®¡ç®—å®Œæˆåï¼Œå°±å¯ä»¥é€šè¿‡<code>Activity.runOnUIThread(Runnable r)</code>æ¥æ›´æ–°é¢„è§ˆå›¾äº†ã€‚</p>\n<p><img src=\"/img/160224_app_s5ep5/run_on_ui_thread.png\" alt=\"\"></p>\n<p><code>HandlerThread</code>ä¸ä»…å¯ä»¥å¤„ç†å†—é•¿çš„è§¦å‘UIäº‹ä»¶ï¼Œä¹Ÿå¯ä»¥ç”¨å®ƒæ¥åšUIæ— å…³çš„äº‹æƒ…ã€‚</p>\n<h4 id=\"Priority\"><a href=\"#Priority\" class=\"headerlink\" title=\"Priority\"></a>Priority</h4><p>åˆ›å»º<code>HandlerThread</code>æ—¶ï¼Œè®°å¾—æ ¹æ®å®é™…éœ€æ±‚èµ‹äºˆå®ƒé€‚å½“çš„ä¼˜å…ˆçº§ï¼Œè¿™ä¼šä½¿cpuä¸ºå®ƒåˆ†é…åˆé€‚çš„æ‰§è¡Œé¡ºåºã€‚</p>\n<p><img src=\"/img/160224_app_s5ep5/priority.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"ä½ å¥½å“‡ï¼Œæ±¤åœ†å„¿ï¼","url":"https://lilei.pro/2016/02/23/Hello-TangYuan/","content":"<hr>\n<p><img src=\"/img/160223_hello_tangyuan/cup.jpg\" alt=\"\"></p>\n<hr>\n<a id=\"more\"></a>\n<p><img src=\"/img/160223_hello_tangyuan/plate.jpg\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æ§‘"]},{"title":"Android Performance Patterns - s5ep4 Good AsyncTask Hunting","url":"https://lilei.pro/2016/02/23/Android-Performance-Patterns-s5ep4-Good-AsyncTask-Hunting/","content":"<blockquote>\n<p>æœ¬èŠ‚ä»‹ç»<a href=\"http://developer.android.com/reference/android/os/AsyncTask.html\" target=\"_blank\" rel=\"noopener\">AsyncTask</a>çš„ä½¿ç”¨æ–¹æ³•ä¸é£é™©<br><a href=\"https://www.youtube.com/watch?v=jtlRNNhane0&amp;index=67&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/jtlRNNhane0?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"AsyncTask-Basics\"><a href=\"#AsyncTask-Basics\" class=\"headerlink\" title=\"AsyncTask Basics\"></a>AsyncTask Basics</h4><p><a href=\"http://developer.android.com/reference/android/os/AsyncTask.html\" target=\"_blank\" rel=\"noopener\">AsyncTask</a>æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œç”¨çš„å¥½äº†æ— å¾€ä¸åˆ©ï¼Œç”¨å¾—ä¸å¥½åˆ™ä¼¤äººä¼¤å·±ã€‚</p>\n<p>è€ƒè™‘ä¸‹é¢è¿™ç§åœºæ™¯ï¼Œæœ‰ä¸€ä¸ªéå¸¸è€—æ—¶çš„æ“ä½œéœ€è¦è¿›è¡Œï¼Œæˆ‘ä»¬åœ¨<code>UI Thread</code>ä¹‹å¤–å¯åŠ¨äº†ä¸€ä¸ª<code>Worker Thread</code>ï¼Œå½“<code>Worker Thread</code>å®Œæˆå®ƒçš„å·¥ä½œæ—¶ï¼Œä¼šæŠŠè®¡ç®—ç»“æœè¿”å›ç»™<code>UI Thread</code>ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep4/worker_thread.png\" alt=\"\"></p>\n<p>ç”±äºè¿™ç§åº”ç”¨åœºæ™¯å¤ªå¸¸è§äº†ï¼ŒAndroidä¸ºæˆ‘ä»¬æä¾›äº†<code>AsyncTask</code>è¿™ä¸€æœºåˆ¶ã€‚<code>AsyncTask</code>æœ‰ä¸‰ä¸ªé‡è¦çš„å‡½æ•°ã€‚</p>\n<ul>\n<li>onPreExecute()ï¼Œåœ¨<code>UI Thread</code>ä¸­æ‰§è¡Œï¼Œå‡†å¤‡Task</li>\n<li>doInBackground()ï¼Œåœ¨<code>Worker Thread</code>ä¸­æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡</li>\n<li>onPostExecute()ï¼Œåœ¨<code>UI Thread</code>ä¸­æ‰§è¡Œï¼Œå¤„ç†ä»»åŠ¡æ‰§è¡Œç»“æœ</li>\n</ul>\n<p><img src=\"/img/160223_app_s5ep4/async_task_func.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"ç‰¹åˆ«è¯´æ˜ï¼onPreExecuteå¹¶ä¸ä¿è¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œï¼\"><a href=\"#ç‰¹åˆ«è¯´æ˜ï¼onPreExecuteå¹¶ä¸ä¿è¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œï¼\" class=\"headerlink\" title=\"ç‰¹åˆ«è¯´æ˜ï¼onPreExecuteå¹¶ä¸ä¿è¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œï¼\"></a>ç‰¹åˆ«è¯´æ˜ï¼<code>onPreExecute</code>å¹¶ä¸ä¿è¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œï¼</h4><p>è™½ç„¶<a href=\"http://developer.android.com/reference/android/os/AsyncTask.html\" target=\"_blank\" rel=\"noopener\">å®˜æ–¹APIæ–‡æ¡£</a>ä¸­çš„è¯´æ˜å†™åˆ°<code>AsyncTask</code>â€œå¿…é¡»åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œâ€ï¼Œä½†Frameworkåº•å±‚å®ç°ä¸­å¹¶æ²¡æœ‰ä¿è¯è¿™ä¸€æœºåˆ¶</p>\n<blockquote>\n<p>The AsyncTask class must be loaded on the UI thread. This is done automatically as of JELLY_BEAN.</p>\n</blockquote>\n<p>æ¢å¥è¯è¯´ï¼Œâ€œä¿è¯<code>onPreExecute()</code>åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œâ€æ˜¯ä¸€ä¸ªç¼–ç¨‹è§„èŒƒï¼Œè€Œå¹¶éå¼ºåˆ¶è¦æ±‚ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ<code>onPostExecue()</code>ä¸€å®šæ˜¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œå› ä¸ºå®ƒæ˜¯ç”¨çš„æ˜¯mainLooperã€‚</p>\n<p>AsyncTask.java</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">   <span class=\"function\"><span class=\"keyword\">private</span> Result <span class=\"title\">postResult</span><span class=\"params\">(Result result)</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"meta\">@SuppressWarnings</span>(<span class=\"string\">\"unchecked\"</span>)</span><br><span class=\"line\">       Message message = getHandler().obtainMessage(MESSAGE_POST_RESULT,</span><br><span class=\"line\">               <span class=\"keyword\">new</span> AsyncTaskResult&lt;Result&gt;(<span class=\"keyword\">this</span>, result));</span><br><span class=\"line\">       message.sendToTarget();</span><br><span class=\"line\">       <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> Handler <span class=\"title\">getHandler</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">synchronized</span> (AsyncTask.class) &#123;</span><br><span class=\"line\">           <span class=\"keyword\">if</span> (sHandler == <span class=\"keyword\">null</span>) &#123;</span><br><span class=\"line\">               sHandler = <span class=\"keyword\">new</span> InternalHandler();</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">           <span class=\"keyword\">return</span> sHandler;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">InternalHandler</span> <span class=\"keyword\">extends</span> <span class=\"title\">Handler</span> </span>&#123;</span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">InternalHandler</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">           <span class=\"keyword\">super</span>(Looper.getMainLooper());</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"meta\">@SuppressWarnings</span>(&#123;<span class=\"string\">\"unchecked\"</span>, <span class=\"string\">\"RawUseOfParameterizedType\"</span>&#125;)</span><br><span class=\"line\">       <span class=\"meta\">@Override</span></span><br><span class=\"line\">       <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">handleMessage</span><span class=\"params\">(Message msg)</span> </span>&#123;</span><br><span class=\"line\">           AsyncTaskResult&lt;?&gt; result = (AsyncTaskResult&lt;?&gt;) msg.obj;</span><br><span class=\"line\">           <span class=\"keyword\">switch</span> (msg.what) &#123;</span><br><span class=\"line\">               <span class=\"keyword\">case</span> MESSAGE_POST_RESULT:</span><br><span class=\"line\">                   <span class=\"comment\">// There is only one result</span></span><br><span class=\"line\">                   result.mTask.finish(result.mData[<span class=\"number\">0</span>]);</span><br><span class=\"line\">                   <span class=\"keyword\">break</span>;</span><br><span class=\"line\">               <span class=\"keyword\">case</span> MESSAGE_POST_PROGRESS:</span><br><span class=\"line\">                   result.mTask.onProgressUpdate(result.mData);</span><br><span class=\"line\">                   <span class=\"keyword\">break</span>;</span><br><span class=\"line\">           &#125;</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">   &#125;</span><br></pre></td></tr></table></figure>\n<p>å…³äºä¸Šé¢è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªä¾‹å­ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">AppCompatActivity</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">static</span> String TAG = <span class=\"string\">\"mainactivity\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    View titleView;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.activity_main);</span><br><span class=\"line\">        initViews();</span><br><span class=\"line\">        <span class=\"keyword\">new</span> Thread(<span class=\"keyword\">new</span> Runnable() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">run</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">                MyAsyncTask task = <span class=\"keyword\">new</span> MyAsyncTask();</span><br><span class=\"line\">                task.execute();</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;).start();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">initViews</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        titleView = findViewById(R.id.title);</span><br><span class=\"line\">        titleView.setOnClickListener(<span class=\"keyword\">new</span> View.OnClickListener() &#123;</span><br><span class=\"line\">            <span class=\"meta\">@Override</span></span><br><span class=\"line\">            <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">onClick</span><span class=\"params\">(View v)</span> </span>&#123;</span><br><span class=\"line\">                toast(<span class=\"string\">\"Hello World!\"</span>);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">toast</span><span class=\"params\">(String s)</span> </span>&#123;</span><br><span class=\"line\">        Toast.makeText(<span class=\"keyword\">this</span>, s, Toast.LENGTH_SHORT).show();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MyAsyncTask</span> <span class=\"keyword\">extends</span> <span class=\"title\">AsyncTask</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onPreExecute</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">            checkRunningInMainThread(<span class=\"string\">\"onPreExecute\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onPreExecute();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onProgressUpdate</span><span class=\"params\">(Object[] values)</span> </span>&#123;</span><br><span class=\"line\">            checkRunningInMainThread(<span class=\"string\">\"onProgressUpdate\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onProgressUpdate(values);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onPostExecute</span><span class=\"params\">(Object o)</span> </span>&#123;</span><br><span class=\"line\">            checkRunningInMainThread(<span class=\"string\">\"onPostExecute\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">super</span>.onPostExecute(o);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"meta\">@Override</span></span><br><span class=\"line\">        <span class=\"function\"><span class=\"keyword\">protected</span> Object <span class=\"title\">doInBackground</span><span class=\"params\">(Object[] params)</span> </span>&#123;</span><br><span class=\"line\">            checkRunningInMainThread(<span class=\"string\">\"doInBackGround\"</span>);</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">null</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">static</span> <span class=\"keyword\">void</span> <span class=\"title\">checkRunningInMainThread</span><span class=\"params\">(String methodName)</span> </span>&#123;</span><br><span class=\"line\">        Log.d(TAG, methodName + <span class=\"string\">\" is running in UI Thread? \"</span> + (Looper.myLooper() != <span class=\"keyword\">null</span> &amp;&amp; Looper.getMainLooper() == Looper.myLooper()));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>ä¾‹å­ä¸­æœ‰ä¸€äº›æ— å…³ä»£ç ï¼ˆtitleViewï¼‰ï¼Œä¸è¿‡ä¸å½±å“é˜…è¯»ã€‚</p>\n<p>æ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">02-29 20:29:06.440 13212-13239/com.leili.geeker D/mainactivity: onPreExecute is running in UI Thread? false</span><br><span class=\"line\">02-29 20:29:06.443 13212-13241/com.leili.geeker D/mainactivity: doInBackGround is running in UI Thread? false</span><br><span class=\"line\">02-29 20:29:06.850 13212-13212/com.leili.geeker D/mainactivity: onPostExecute is running in UI Thread? true</span><br></pre></td></tr></table></figure>\n<p>å°è¯äº†<code>onPreExecute()</code>å¹¶ä¸ä¿è¯åœ¨UIçº¿ç¨‹ä¸­æ‰§è¡Œã€‚</p>\n<hr>\n<h4 id=\"AsyncTask-May-Get-You-Into-A-Trouble\"><a href=\"#AsyncTask-May-Get-You-Into-A-Trouble\" class=\"headerlink\" title=\"AsyncTask May Get You Into A Trouble\"></a>AsyncTask May Get You Into A Trouble</h4><p>æœ‰äº†ä¸Šé¢ä¸‰ä¸ªå‡½æ•°ï¼Œä¼¼ä¹AsyncTaskç”¨èµ·æ¥å¹¶æ²¡æœ‰ä»€ä¹ˆå›°éš¾ã€‚ç„¶è€Œï¼Œå¦‚æœä½¿ç”¨ä¸å½“ï¼ŒAsyncTaskä¼šäº§ç”Ÿå¾ˆå¤šåŒªå¤·æ‰€æ€çš„é—®é¢˜ã€‚</p>\n<p>é¦–å…ˆï¼ŒAsyncTaskå¤„ç†çš„æ‰€æœ‰Taskï¼Œéƒ½æ˜¯æ”¾åœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­ä¾æ¬¡è¿›è¡Œçš„ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå‰é¢çš„Taskç›¸å½“è€—æ—¶ï¼Œä¼šä½¿å¾—å®ƒåé¢çš„Taskåœ¨å¾ˆä¹…ä¹‹åæ‰å¾—ä»¥æ‰§è¡Œã€‚åœ¨ä½ å¤„ç†long running taskæ—¶åº”ç»™äºˆé«˜åº¦å…³æ³¨ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep4/serial.png\" alt=\"\"></p>\n<p>å®é™…ä¸Šï¼ŒAsyncTaskæä¾›äº†ä¸€ä¸ªç”¨æ¥å¹¶è¡Œæ‰§è¡ŒTaskçš„æ–¹æ³•<code>executeOnExecutor</code>ï¼Œç„¶è€Œå…‰å¤´å“¥å»ºè®®ï¼Œå½“ä½ è¶³å¤Ÿç†è§£è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œä½ å°±ä¼šè§‰å¾—è¿˜æ˜¯ä¸ç”¨ä¸ºå¥½ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep4/execute_on_executor.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"AsyncTask-Canceling\"><a href=\"#AsyncTask-Canceling\" class=\"headerlink\" title=\"AsyncTask Canceling\"></a>AsyncTask Canceling</h4><p>AsyncTaskåœ¨æ‰§è¡Œä¹‹å‰ï¼æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ˜¯å¯ä»¥è¢«Cancelæ‰çš„ã€‚å‚æ•°<code>mayInterruptIfRunning</code>å†³å®šäº†æ˜¯å¦å…è®¸åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«ä¸­æ–­ã€‚å¦‚æœä¸€é¡¹ä»»åŠ¡æ‰§è¡Œäº†<code>cacel</code>æ–¹æ³•ï¼Œé‚£ä¹ˆåœ¨<code>doInBackground</code>åè¢«è°ƒèµ·çš„å°†ä¸å†æ˜¯<code>onPostExecute</code>ï¼Œè€Œæ˜¯<code>onCancel</code>ï¼ŒåŒæ ·æ˜¯åœ¨<code>UI Thread</code>ä¸­è¿›è¡Œã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\"> * Attempts to cancel execution of this task. This attempt will fail if the task has already completed, already been cancelled, or could not be cancelled for some other reason. If successful, and this task has not started when cancel is called, this task should never run. If the task has already started, then the mayInterruptIfRunning parameter determines whether the thread executing this task should be interrupted in an attempt to stop the task.</span></span><br><span class=\"line\"><span class=\"comment\"> * Calling this method will result in onCancelled(Object) being invoked on the UI thread after doInBackground(Object[]) returns. Calling this method guarantees that onPostExecute(Object) is never invoked. After invoking this method, you should check the value returned by isCancelled() periodically from doInBackground(Object[]) to finish the task as early as possible.</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"keyword\">boolean</span> <span class=\"title\">cancel</span> <span class=\"params\">(<span class=\"keyword\">boolean</span> mayInterruptIfRunning)</span></span>;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ çš„Taskåœ¨è®¾è®¡æ—¶ï¼Œè€ƒè™‘äº†cancelçš„æƒ…å†µï¼Œé‚£ä¹ˆä½ è¿˜éœ€è¦é¢å¤–åšä¸¤ä»¶äº‹ã€‚</p>\n<ol>\n<li>Check a â€œcanceledâ€ flag regularly</li>\n<li>Report work results invalid</li>\n</ol>\n<p>å¯¹äº<code>1</code>ï¼Œå¦‚ä¸‹</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">doInBackground(..) &#123;</span><br><span class=\"line\">\t<span class=\"comment\">// Doing some stuff</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (isCanceled()) &#123;..&#125; <span class=\"comment\">// Oh noez, we done, clean up</span></span><br><span class=\"line\">\t<span class=\"keyword\">for</span> (i &lt; obj.length)</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (isCanceled()) &#123;..&#125; <span class=\"comment\">// Oh noez, we done, clean up</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¯¹äº<code>2</code>ï¼Œå½“æˆ‘ä»¬çŸ¥é“è¢«cancelçš„taskä¼šè°ƒç”¨<code>onCancel</code>æ–¹æ³•æ—¶ï¼Œå¯ä»¥åœ¨<code>onCancel</code>ä¸­åšä¸€äº›è¯¸å¦‚æ›´æ–°UIã€æ¸…ç†å†…å­˜çš„äº‹æƒ…ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep4/on_cancel.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep3 Memory & Threading","url":"https://lilei.pro/2016/02/23/Android-Performance-Patterns-s5ep3-Memory-And-Threading/","content":"<blockquote>\n<p>Season5 ep3 ä¸»è¦ä»‹ç»äº†Androidä¸­ä½¿ç”¨å¤šçº¿ç¨‹å¯èƒ½å¯¼è‡´çš„é£é™©â€”â€”å†…å­˜æ³„æ¼<br><a href=\"https://www.youtube.com/watch?v=tBHPmQQNiS8&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE&amp;index=66\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/tBHPmQQNiS8?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Memory-Contention-Problems\"><a href=\"#Memory-Contention-Problems\" class=\"headerlink\" title=\"Memory Contention Problems\"></a>Memory Contention Problems</h4><p>å†…å­˜é—®é¢˜çš„äº§ç”Ÿï¼Œæ˜¯ç”±äºä¸¤ä¸ªçº¿ç¨‹æ“ä½œäº†åŒä¸€å—å†…å­˜ï¼Œç”±äºä¸¤è€…æ‰§è¡Œçš„å…ˆåé¡ºåºæœªçŸ¥ï¼Œå¯¼è‡´è¿è¡Œç»“æœä¸å¯é¢„æµ‹ã€‚</p>\n<p>ç”¨å…‰å¤´å“¥çš„è¯è¯´ï¼ˆç»™å…‰å¤´å“¥çš„å¹½é»˜æ„Ÿç‚¹èµï¼‰</p>\n<blockquote>\n<p>Memory contention problems with read-write access order, ABA problems, rips in the fabric of space-timeâ€¦</p>\n</blockquote>\n<p><img src=\"/img/160223_app_s5ep3/memory_problem.png\" alt=\"\"></p>\n<p>æ€æ ·è§£å†³ä¸Šè¿°é—®é¢˜å‘¢ï¼Ÿ<strong>åŠ é”</strong>æ˜¯ä¸€ä¸ªé€šç”¨çš„æ–¹æ³•â€”â€”ä¸è¿‡è¿™ä¸€ç‚¹è¦æ˜¯æ‰©å±•èµ·æ¥è®²ï¼Œå¯è¯´æ¥è¯é•¿äº†ã€‚</p>\n<hr>\n<h4 id=\"Memory-Problems-in-Android\"><a href=\"#Memory-Problems-in-Android\" class=\"headerlink\" title=\"Memory Problems in Android\"></a>Memory Problems in Android</h4><p>è®°ä½ä¸€ç‚¹ï¼šAndroidä¸­çš„UIå¯¹è±¡ä¸ï¼æ˜¯ï¼çº¿ï¼ç¨‹ï¼å®‰ï¼å…¨ï¼çš„ï¼ï¼ˆnot thread-safeï¼‰ï¼æ‰€æœ‰UIå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸéƒ½åœ¨UIçº¿ç¨‹é‡Œè¿›è¡Œï¼Œåœ¨å…¶å®ƒçº¿ç¨‹ä¸­ç»´æŠ¤çš„UIå¯¹è±¡å¼•ç”¨ï¼Œå¾ˆå¯èƒ½æ­£å¤„äºä¸€ä¸ªinvalidçš„çŠ¶æ€ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep3/invalid_button.png\" alt=\"\"></p>\n<p>è­¬å¦‚ï¼Œåœ¨<code>Worker Thread</code>ä¸­æŒæœ‰ä¸€ä¸ªViewçš„å¼•ç”¨ï¼Œè€Œè¿™ä¸ªå¼•ç”¨å®é™…ä¸Šå·²ç»åœ¨<code>UI Thread</code>ä¸­ç»“æŸäº†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œä»<code>view hierarchy</code>é‡Œé¢è¢«ç§»é™¤æ‰äº†ã€‚ç„¶è€Œï¼Œ<code>Worker Thread</code>å´å‚»å‚»åœ°å¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œæ¥ä¸‹æ¥å¯¹è¿™ä¸ªViewçš„ä¸€åˆ‡æ“ä½œéƒ½å°†æ˜¯å¾’åŠ³ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep3/removed_view.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Donâ€™t-Keep-Activity-References\"><a href=\"#Donâ€™t-Keep-Activity-References\" class=\"headerlink\" title=\"Donâ€™t Keep Activity References\"></a>Donâ€™t Keep Activity References</h4><p><code>Worker Thread</code>ä¸­æ˜¯ä¸åº”è¯¥æŒæœ‰Activityå¼•ç”¨çš„ï¼Œè¿™ä¼šå¯¼è‡´Activityæ— æ³•æ­£å¸¸å›æ”¶ï¼Œè¿›è€Œäº§ç”Ÿå†…å­˜æ³„æ¼ã€‚åœ¨Androidä¸­ï¼Œå½“æˆ‘ä»¬ä¸å¯é¿å…åœ°ç”¨åˆ°å¤šçº¿ç¨‹æ—¶ï¼Œè¿™ä¸ªé—®é¢˜çš„é£é™©è¢«æ”¾å¤§äº†ã€‚å½“åœ¨<code>Worker Thread</code>ä¸­æŒæœ‰Activityå¼•ç”¨æ—¶ï¼Œé™¤é<code>Worker Thread</code>å®Œæˆè¿ç®—ï¼ˆé€šå¸¸è¿™æ˜¯ä¸€é¡¹éå¸¸è€—æ—¶çš„æ“ä½œï¼‰ï¼Œå¦åˆ™Activityçš„å®ä¾‹ä¸ä¼šçœŸæ­£è¢«é‡Šæ”¾ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep3/activity_still_alive.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Implicit-Reference-of-Activity\"><a href=\"#Implicit-Reference-of-Activity\" class=\"headerlink\" title=\"Implicit Reference of Activity\"></a>Implicit Reference of Activity</h4><p>é™¤äº†ä¸Šæ–‡æåˆ°çš„æ˜¾å¼å¼•ç”¨ï¼ˆexplicit referenceï¼‰ï¼Œè¿˜åº”è¯¥å½“å¿ƒå†…éƒ¨ç±»å¯¼è‡´çš„éšå¼å¼•ç”¨ï¼ˆimplicit referenceï¼‰ã€‚Androidä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³æ–¹æ¡ˆâ€”â€”WeakReference &amp; static å…³é”®å­—ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep3/implicit_reference.png\" alt=\"\"></p>\n<p>ä¸Šè¿°åœºæ™¯æ˜¯å¯èƒ½å¯¼è‡´åº”ç”¨ç¨‹åºcrashçš„ä¸€ä¸ªåŸå› â€”â€”AsyncTaskæŒæœ‰ä¸€ä¸ªActivityçš„å¼•ç”¨ï¼Œè€Œè¿™ä¸ªActivityå®é™…ä¸Šå·²ç»å¤„äºinvalidçŠ¶æ€æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ‰§è¡Œè¿‡onDestroy()ï¼‰ï¼ŒAsyncTaskå´å¯¹æ­¤ä¸€æ— æ‰€çŸ¥ï¼Œå½“AsyncTaskæ‰§è¡Œå®Œå®ƒæ‰€è¿è¡Œçš„ä»»åŠ¡ï¼Œè¯•å›¾æ“ä½œActivityçš„ç•Œé¢æ—¶ï¼Œè¿™ä¸ªActivityå®é™…ä¸Šå¹¶ä¸å¯ç”¨ã€‚è¿™å°±å¯¼è‡´äº†ä¸‹é¢çš„ç³Ÿç³•åœºæ™¯â€”â€”</p>\n<p><img src=\"/img/160223_app_s5ep3/application_stop.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Donâ€™t-Hold-References\"><a href=\"#Donâ€™t-Hold-References\" class=\"headerlink\" title=\"Donâ€™t Hold References\"></a>Donâ€™t Hold References</h4><p>ä¸è¦è¯•å›¾åœ¨UIçº¿ç¨‹å¤–ä¿å­˜ä»»ä½•UIå…ƒç´ çš„å¼•ç”¨ï¼ï¼ï¼</p>\n<p><img src=\"/img/160223_app_s5ep3/dont_hold_references.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"How-We-Do\"><a href=\"#How-We-Do\" class=\"headerlink\" title=\"How We Do?\"></a>How We Do?</h4><p>æˆ‘ä»¬è¦éµå®ˆçš„å”¯ä¸€å‡†åˆ™æ˜¯ï¼š<strong>æ‰€æœ‰UIæ“ä½œï¼Œéƒ½åœ¨UIçº¿ç¨‹é‡Œè¿›è¡Œã€‚</strong></p>\n<p><code>Worker Thread</code>å¯ä»¥é€šè¿‡callbackã€intentç­‰ä»»æ„è¿›ç¨‹é—´é€šä¿¡æ–¹æ³•æ¥å‘Šè¯‰UIçº¿ç¨‹â€”â€”æˆ‘éœ€è¦ä½ å¸®æˆ‘å˜æ›´ä¸€ä¸‹ç•Œé¢ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep3/work_thread_work.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Tool-in-Android-Studio-2-0\"><a href=\"#Tool-in-Android-Studio-2-0\" class=\"headerlink\" title=\"Tool in Android Studio 2.0\"></a>Tool in Android Studio 2.0</h4><p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°äº†è§£è¿è¡Œæ—¶Thread&amp;Memoryçš„æƒ…å†µï¼Œè¯·ä½¿ç”¨Android Studio 2.0ä¸­æä¾›çš„æœ‰åŠ›å·¥å…·ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep3/tool.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep2 Understanding Android Threading","url":"https://lilei.pro/2016/02/23/Android-Performance-Patterns-s5ep2-Understanding-Android-Threading/","content":"<blockquote>\n<p>ep2è®²è§£äº†å°†ThreadåŸå‹æ‰©å±•ä¸ºHandlerThreadçš„åŸç†ä¸å®è·µã€‚<br><a href=\"https://www.youtube.com/watch?v=0Z5MZ0jL2BM&amp;index=65&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/0Z5MZ0jL2BM?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"å¤§å”çš„å¸½è¡«é€ å‹å¾ˆæœ‰èŒƒå„¿å•Šï¼ï¼ï¼\"><a href=\"#å¤§å”çš„å¸½è¡«é€ å‹å¾ˆæœ‰èŒƒå„¿å•Šï¼ï¼ï¼\" class=\"headerlink\" title=\"å¤§å”çš„å¸½è¡«é€ å‹å¾ˆæœ‰èŒƒå„¿å•Šï¼ï¼ï¼\"></a>å¤§å”çš„å¸½è¡«é€ å‹å¾ˆæœ‰èŒƒå„¿å•Šï¼ï¼ï¼</h4><p><img src=\"/img/160223_app_s5ep2/uncle.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Build-Worker-Thread\"><a href=\"#Build-Worker-Thread\" class=\"headerlink\" title=\"Build Worker Thread\"></a>Build Worker Thread</h4><p>ä¸€ä¸ªThreadï¼Œä»æœ¬è´¨ä¸Šè®²ï¼Œå°±æ˜¯å®Œæˆäº†ä¸€ä¸ªâ€œæ¥å—ä»»åŠ¡ï¼æ‰§è¡Œä»»åŠ¡ï¼å®Œæˆä»»åŠ¡â€çš„è¿‡ç¨‹</p>\n<p><img src=\"/img/160223_app_s5ep2/thread_basic_work.png\" alt=\"\"></p>\n<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›è¿™ä¸ªThreadå¯ä»¥åœ¨å®ƒçš„ç”Ÿå‘½å‘¨æœŸå†…å¤šåšä¸€äº›äº‹ï¼Œæ˜¯çš„ï¼Œå°½å¯èƒ½å‹æ¦¨è¿™ä¸ªThreadï¼Œæ¯•ç«Ÿæˆ‘ä»¬åœ¨å‰é¢è¦åˆ›å»ºå®ƒï¼Œåœ¨åé¢è¦æ‘§æ¯å®ƒï¼Œåœ¨è¿™ä¸­é—´è¦è®©å®ƒç‰©å°½å…¶ç”¨ã€‚</p>\n<p>Do Work â€¦ Do Work â€¦ Do Work â€¦</p>\n<p><img src=\"/img/160223_app_s5ep2/do_work.png\" alt=\"\"></p>\n<p>ç°åœ¨è¿™ä¸ªThreadå·²ç»è¢«æˆåŠŸæ´—è„‘ï¼Œè¿›å…¥äº†æ— é™Do Workçš„å¾ªç¯ä¸­ï¼Œå°±åƒä¸€å¤´æ‹‰ç£¨çš„æ¯›é©´ï¼Œæ˜¯æ—¶å€™å‘ç£¨ç›˜é‡ŒåŠ ä¸Šä¸€äº›è°·å­äº†ã€‚æˆ‘ä»¬å°†å¾…å¤„ç†çš„å·¥ä½œç§°ä¸ºTaskï¼Œè¿™äº›Taskè¢«ç»„ç»‡åœ¨ä¸€ä¸ªå«åšWorkQueueçš„é˜Ÿåˆ—ä¸­ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep2/work_queue.png\" alt=\"\"></p>\n<p>åŠ è°·å­çš„å·¥ä½œï¼Œäº¤ç”±å¦ä¸€ä¸ªThreadè¿›è¡Œâ€”â€”æŠŠä¸“ä¸šçš„äº‹æƒ…äº¤ç»™ä¸“ä¸šçš„è§’è‰²å»åšã€‚</p>\n<p><img src=\"/img/160223_app_s5ep2/other_thread_produces_work.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Android-Implementations\"><a href=\"#Android-Implementations\" class=\"headerlink\" title=\"Android Implementations\"></a>Android Implementations</h4><p>äº†è§£è¿‡ä¸Šé¢çš„åŸºæœ¬åŸç†ï¼Œæˆ‘ä»¬çœ‹çœ‹Androidä¸­æ˜¯å¦‚ä½•å®ç°è¿™ä¸€æœºåˆ¶çš„ã€‚</p>\n<p>é¦–å…ˆæ˜¯<code>Looper</code>ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡ä¸­çš„<code>Worker Thread</code>ï¼Œå¹²æ´»å„¿çš„çº¿ç¨‹ã€‚</p>\n<p>ç„¶åæ˜¯<code>MessageQueue</code>ï¼Œ<code>Looper</code>åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šä¸æ–­ä»<code>MessageQueue</code>é‡Œæ‹‰å–ä»»åŠ¡æ‰§è¡Œã€‚</p>\n<p><img src=\"/img/160223_app_s5ep2/looper.png\" alt=\"\"></p>\n<p><code>Handler</code>è¢«ç”¨æ¥å‘å·¥ä½œé˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡</p>\n<p><img src=\"/img/160223_app_s5ep2/handler.png\" alt=\"\"></p>\n<p>æ¯ä¸€ä¸ªè¢«æ·»åŠ çš„å•å…ƒä»»åŠ¡ï¼ˆ<code>Unit of Work</code>ï¼‰ï¼Œå¯ä»¥æ˜¯Intent/runnable/message</p>\n<p><img src=\"/img/160223_app_s5ep2/unit_of_work.png\" alt=\"\"></p>\n<p>è¿™æ ·ä¸€æ•´å¥—ç³»ç»Ÿï¼Œå°±æ„æˆäº†Androidä¸­å¾ˆé‡è¦çš„Handleræœºåˆ¶ã€‚æ³¨æ„åˆ°ï¼Œåœ¨<code>Handler</code>ä¹‹å¤–è¿˜æœ‰ä¸€ä¸ª<code>Handler Thread</code>ï¼Œå®ƒç”¨æ¥å¤„ç†Taskæ‰§è¡Œç»“æœã€‚</p>\n<p><img src=\"/img/160223_app_s5ep2/handler_thread.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"When-An-App-Starts\"><a href=\"#When-An-App-Starts\" class=\"headerlink\" title=\"When An App Starts\"></a>When An App Starts</h4><p>å½“æˆ‘ä»¬çš„Appå¯åŠ¨æ—¶ï¼Œç³»ç»Ÿä¸ºå®ƒåˆ†é…äº†ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹ï¼Œå¹¶ä¸”å¯åŠ¨äº†<code>MainThread</code>ï¼Œ<code>MainThread</code>æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<code>HandlerThread</code>ï¼Œå®ƒæœ‰ä¸”åªæœ‰ä¸€ä¸ª<code>MainLooper</code>ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep2/main_thread.png\" alt=\"\"></p>\n<p><code>MainThread</code>ä¹Ÿæ˜¯<code>UI Thread</code>ï¼Œåœ¨å®ƒè¿è¡Œè¿‡ç¨‹ä¸­å‡ ä¹ä¼šå¤„ç†ä¸€åˆ‡æ“ä½œï¼ˆåœ¨ep1ä¸­å·²ç»æåˆ°è¿‡ï¼‰</p>\n<ul>\n<li>ç³»ç»Ÿæ¶ˆæ¯ï¼ˆç¿»è½¬æ‰‹æœºï¼Œç•Œé¢é‡æ–°ç»˜åˆ¶ï¼‰</li>\n<li>ç”¨æˆ·è¾“å…¥ï¼ˆä¸‹æ»‘åˆ—è¡¨ï¼‰</li>\n<li>å…¶å®ƒåº”ç”¨ä¼ è¿‡æ¥çš„ä¿¡æ¯</li>\n</ul>\n<p><img src=\"/img/160223_app_s5ep2/main_thread_does.png\" alt=\"\"></p>\n<p>è¦çŸ¥é“ï¼Œ<code>MainThread</code>ä¸€ä¸ªå¾ˆé‡è¦çš„ä»»åŠ¡æ˜¯è´Ÿè´£UIç»˜åˆ¶ï¼Œå¦‚æœäº¤ç»™MainThreadå¤ªå¤šçš„ä»»åŠ¡ï¼Œä¼šå½±å“æ¯16msä¸€æ¬¡çš„UIæ¸²æŸ“ï¼Œé€ æˆANRã€‚</p>\n<p><img src=\"/img/160223_app_s5ep2/main_thread_does_all.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Choose-Your-Tool-â€“-No-Silver-Bullet\"><a href=\"#Choose-Your-Tool-â€“-No-Silver-Bullet\" class=\"headerlink\" title=\"Choose Your Tool â€“ No Silver Bullet\"></a>Choose Your Tool â€“ No Silver Bullet</h4><ul>\n<li>AsyncTaskï¼šå°†ä»»åŠ¡åˆ‡æ¢åˆ°UIçº¿ç¨‹ï¼éUIçº¿ç¨‹</li>\n<li>HandlerThreadï¼šå½“éœ€è¦Callbackæ—¶ä½¿ç”¨</li>\n<li>ThreadPoolï¼šæ‰§è¡Œæ›´ç»†åŒ–çš„å•å…ƒä»»åŠ¡</li>\n<li>IntentServiceï¼šç”¨ä»¥æ‰§è¡Œåå°ä»»åŠ¡ï¼Œæˆ–å°†Intentä»»åŠ¡ä»UIçº¿ç¨‹ä¸­æå–å‡ºæ¥æ‰§è¡Œ</li>\n</ul>\n<p><img src=\"/img/160223_app_s5ep2/sdk_tools.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Systrace\"><a href=\"#Systrace\" class=\"headerlink\" title=\"Systrace\"></a>Systrace</h4><p><a href=\"http://developer.android.com/tools/debugging/systrace.html\" target=\"_blank\" rel=\"noopener\">Systrace</a> æ˜¯SDKæä¾›ã€ç”¨äºæŸ¥çœ‹CPUæ“ä½œè€—æ—¶çš„å·¥å…·ï¼Œå½“ä½ åœ¨æµ‹è¯•åº”ç”¨æ—¶å‘ç°äº†ä¸¢å¸§ç°è±¡ï¼Œéœ€è¦æ·±ç©¶åŸå› çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡Systraceè·å¾—ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep2/systrace.png\" alt=\"\"></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"Android Performance Patterns - s5ep1 Threading Performance 101","url":"https://lilei.pro/2016/02/23/Android-Performance-Patterns-s5ep1-Threading-Performance-101/","content":"<blockquote>\n<p>Season 5 ep 1 ä»‹ç»äº†Androidç³»ç»Ÿä¸­çº¿ç¨‹ä¸UIæ¸²æŸ“ä¸€äº›æœ€åŸºç¡€çš„çŸ¥è¯†ã€‚<br><a href=\"https://www.youtube.com/watch?v=qk5F6Bxqhr4&amp;index=64&amp;list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a></p>\n</blockquote>\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/qk5F6Bxqhr4?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" frameborder=\"0\" allowfullscreen></iframe>\n\n<hr>\n<a id=\"more\"></a>\n<h4 id=\"Main-Thread\"><a href=\"#Main-Thread\" class=\"headerlink\" title=\"Main Thread\"></a>Main Thread</h4><p>ä¸»çº¿ç¨‹æ˜¯Androidä¸­æœ€é‡è¦çš„çº¿ç¨‹ï¼Œæ‰¿æ‹…äº†å“åº”ç³»ç»Ÿæ—¶é—´ã€å¤„ç†è¾“å…¥ã€ç»˜åˆ¶UIç­‰é‡è¦ä»»åŠ¡ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep1/main_thread_work.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"UI-drawing-and-frame-dropping\"><a href=\"#UI-drawing-and-frame-dropping\" class=\"headerlink\" title=\"UI drawing and frame dropping\"></a>UI drawing and frame dropping</h4><p>å‡ºäºç®€åŒ–çš„è€ƒè™‘ï¼Œandroidç³»ç»Ÿå°†å¤§éƒ¨åˆ†ä»»åŠ¡éƒ½æ”¾åœ¨äº†ä¸»çº¿ç¨‹ä¸­è¿›è¡Œã€‚ç„¶è€Œå…¶ä¸­ä¸€ä¸ªä»»åŠ¡æ˜¯ä¸å…¶å®ƒæœ‰æ‰€ä¸åŒçš„ â€”â€” UI æ¸²æŸ“ã€‚å› ä¸ºUIæ¸²æŸ“ä¸€æ—¦å‡ºç°å¡é¡¿ï¼Œç”¨æˆ·ä¼šç«‹åˆ»æ„ŸçŸ¥åˆ°ANRï¼Œæä¸å‹å¥½ã€‚ä¸‹é¢æˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªè¾“å…¥å¹¶å¤„ç†çš„è¿‡ç¨‹ï¼Œçœ‹ä¸€ä¸‹å†—é•¿çš„æ“ä½œæ˜¯å¦‚ä½•é˜»å¡UIç»˜åˆ¶çš„ã€‚</p>\n<p>My Awesome Code!!!</p>\n<p><img src=\"/img/160223_app_s5ep1/input_event.png\" alt=\"\"></p>\n<p>äººçœ¼èƒ½æ„ŸçŸ¥çš„æµç•…UIç•Œé¢å¿…é¡»ä¿æŒåœ¨60fpsï¼Œæ„å‘³ç€æ¯16mså°±è¦æœ‰ä¸€æ¬¡ç»˜åˆ¶å®Œæˆã€‚</p>\n<p><img src=\"/img/160223_app_s5ep1/60_frames.png\" alt=\"\"></p>\n<p>ä¸€æ—¦ä¸»çº¿ç¨‹è¢«æŸä¸ªæ“ä½œé˜»å¡è¶…è¿‡äº†16msï¼ŒåŠ¿å¿…ä¼šä¸¢æ‰ï¼ˆè‡³å°‘ï¼‰ä¸€æ¬¡ç»˜åˆ¶ï¼Œè¿™å°±æ˜¯ dropping frameã€‚</p>\n<p><img src=\"/img/160223_app_s5ep1/dropping_frame.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Solve-frame-dropping\"><a href=\"#Solve-frame-dropping\" class=\"headerlink\" title=\"Solve frame dropping\"></a>Solve frame dropping</h4><p>è§£å†³ä¸Šè¿°é—®é¢˜çš„æ€è·¯å¾ˆç®€å•ï¼šæ—¢ç„¶ä¸»çº¿ç¨‹å¿…é¡»ä¿è¯æµç•…è¿è¡Œï¼Œé‚£æˆ‘ä»¬å°±åœ¨è‡ªå·±çš„<code>worker thread</code>é‡Œå¤„ç†è¿™äº›æ¼äººçš„<code>Lame Work</code>ï¼ˆç˜¸è…¿å·¥ä½œï¼‰å¥½äº†ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep1/worker_thread.png\" alt=\"\"></p>\n<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§ç”±ç³»ç»Ÿæä¾›çš„è§£å†³æ–¹æ¡ˆï¼Œæ³¨æ„å®ƒä»¬ä¸åŒçš„åº”ç”¨åœºæ™¯ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep1/sdk_tools.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Be-Careful\"><a href=\"#Be-Careful\" class=\"headerlink\" title=\"Be Careful!\"></a>Be Careful!</h4><p>å½“ä½ å†³å®šä½¿ç”¨å†…éƒ¨ç±»æ¥å®Œæˆä¸Šè¿°æ“ä½œæ—¶ï¼Œä¸€å®šè¦æ³¨æ„è¿™å¯èƒ½å¼•èµ·å†…å­˜æ³„æ¼ï¼å› ä¸ºéé™æ€å†…éƒ¨ç±»å®ä¾‹ä¼šä¿å­˜å¤–éƒ¨ç±»çš„å¼•ç”¨ï¼Œè€Œåœ¨ç§»åŠ¨ç³»ç»Ÿè¿™ç§å†…å­˜æœ‰é™çš„è®¾å¤‡ä¸Šï¼Œå†…å­˜æ³„æ¼æ˜¯éå¸¸å¯æ€•çš„ã€‚</p>\n<p><img src=\"/img/160223_app_s5ep1/inner_class.png\" alt=\"\"></p>\n<p>ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯ç”¨é™æ€å†…éƒ¨ç±»æ›¿ä»£ï¼Œå¹¶ä¸”å†…éƒ¨ä»¥WeakReferenceä¿å­˜Activityçš„å¼•ç”¨ã€‚</p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"ä¹”-éŸ¦å¾·å¥ç¾è®­ç»ƒæ³•åˆ™","url":"https://lilei.pro/2016/02/19/ä¹”-éŸ¦å¾·å¥ç¾è®­ç»ƒæ³•åˆ™/","content":"<blockquote>\n<p>ä¹”Â·éŸ¦å¾·ï¼Œç”·ï¼Œ1922å¹´å‡ºç”Ÿï¼ŒåŠ æ‹¿å¤§è£”å¥ç¾å† å†›ï¼Œè¢«ç§°ä¸ºâ€œå¥ç¾å† å†›ä¹‹çˆ¶â€ã€â€œç°ä»£å¥ç¾ä¹‹çˆ¶â€ï¼Œä»–æ›¾åˆ›åŠäº†éŸ¦å¾·è¿åŠ¨å™¨æå…¬å¸ï¼Œæ˜¯ã€Šè‚Œè‚‰ä¸å¥ç¾ã€‹ã€ã€Šå½¢ä½“ç¾ã€‹å’Œã€Šç”·å­å¥åº·ã€‹ç­‰å¥ç¾æ‚å¿—ä¸»ç¼–ï¼Œå¼€åˆ›äº†å½“ä»Šæœ€å…·å½±å“åŠ›å’Œæœ€é«˜æ°´å‡†çš„èŒä¸šå¥ç¾æ¯”èµ›â€”â€”â€œå¥¥æ—åŒ¹äºšå…ˆç”Ÿâ€å¤§èµ›ï¼Œå¹¶è®¾ç«‹äº†é«˜é¢å¥–é‡‘ã€‚ä»–æ˜¯é˜¿è¯ºå¾·Â·æ–½ç“¦è¾›æ ¼çš„æ©å¸ˆï¼Œå¼€åˆ›äº†ä¹”Â·éŸ¦å¾·è®­ç»ƒæ³•åˆ™ï¼Œæ¨åŠ¨äº†ä¸–ç•Œå¥ç¾è¿åŠ¨çš„å‘å±•ã€‚</p>\n</blockquote>\n<p><img src=\"/img/160219_joe_weider/joe-weider.jpg\" alt=\"\"></p>\n<a id=\"more\"></a>\n<p>åœ¨ç¬”è€…çœ‹æ¥ï¼ŒéŸ¦å¾·çš„æˆåŠŸä¹‹å¤„ï¼Œä¸ä»…ä»…åœ¨äºä»–æ˜¯ä¸€ä¸ªä¼˜ç§€çš„bodybuilderï¼Œæ›´æ˜¯å› ä¸ºä»–æ¨å¹¿äº†å¥èº«å¥ç¾çš„è®­ç»ƒæ³•åˆ™ã€åˆ›åŠäº†ä¸¾ä¸–é—»åçš„å¥¥èµ›ã€å¹¶ä¸”åŸ¹è‚²äº†æ–½ç“¦è¾›æ ¼è¿™æ ·ä¼Ÿå¤§çš„å¥ç¾è€…ï¼Œä¸å¾—ä¸æçš„æ˜¯ï¼ŒéŸ¦å¾·æ˜¯ä¸€ä½æˆåŠŸçš„å•†äººã€‚</p>\n<p>éŸ¦å¾·å¥ç¾è®­ç»ƒæ³•åˆ™å…±32æ¡ï¼Œåˆ†ä¸ºåˆã€ä¸­ã€é«˜çº§ä¸‰ä¸ªé˜¶æ®µï¼Œä»”ç»†é˜…è¯»ï¼Œç§‘å­¦è®­ç»ƒï¼Œå®šä¼šå—ç›Šæ— ç©·ã€‚</p>\n<hr>\n<h2 id=\"å…¥é—¨é¡»çŸ¥\"><a href=\"#å…¥é—¨é¡»çŸ¥\" class=\"headerlink\" title=\"å…¥é—¨é¡»çŸ¥\"></a>å…¥é—¨é¡»çŸ¥</h2><h4 id=\"å™¨æ¢°é¡»çŸ¥\"><a href=\"#å™¨æ¢°é¡»çŸ¥\" class=\"headerlink\" title=\"å™¨æ¢°é¡»çŸ¥\"></a>å™¨æ¢°é¡»çŸ¥</h4><ol>\n<li>å…¨å¥—å®¶åº­å¥èº«å™¨æ¢°åŒ…æ‹¬ï¼šå§æ¨å‡³ã€è…¹è‚Œæ¿ã€æ é“ƒå’Œå“‘é“ƒå„ä¸€å‰¯ã€‚å¯ä»¥æŒ‰ä¸ªäººæ¡ä»¶é…ç½®å…¶å®ƒå™¨æ¢°ã€‚</li>\n</ol>\n<h4 id=\"æœè£…é¡»çŸ¥\"><a href=\"#æœè£…é¡»çŸ¥\" class=\"headerlink\" title=\"æœè£…é¡»çŸ¥\"></a>æœè£…é¡»çŸ¥</h4><ol>\n<li>å®½æ¾èˆ’é€‚ï¼Œä¸ä¼šå¦¨ç¢åŠ¨ä½œï¼ˆåŠ¡å¿…è¦ç©¿æ¯”è¾ƒèˆ’é€‚çš„å†…è£¤ï¼‰ï¼›</li>\n<li>ä¿è¯é€‚å®œçš„ä½“æ¸©ï¼›</li>\n<li>æœ€å¥½ç©¿é‹ï¼Œä¿æŠ¤è¸å…³èŠ‚ï¼›</li>\n<li>è¿›è¡Œè´Ÿé‡è®­ç»ƒæ—¶ï¼Œä¸ºäº†ä¿æŠ¤è…°èƒŒéƒ¨ä½ï¼Œè…°é—´æœ€å¥½æ‰ä¸Šä¸¾é‡çš®å¸¦ï¼›</li>\n</ol>\n<h4 id=\"é”»ç‚¼é¡»çŸ¥\"><a href=\"#é”»ç‚¼é¡»çŸ¥\" class=\"headerlink\" title=\"é”»ç‚¼é¡»çŸ¥\"></a>é”»ç‚¼é¡»çŸ¥</h4><ol>\n<li>æ¸è¿›å¢é‡ã€‚åˆç»ƒè€…å¯ä»25ï¼…-30ï¼…æœ€å¤§é‡é‡å¼€å§‹è¿›è¡Œè®­ç»ƒã€‚</li>\n<li>æ³¨æ„åŠ¨ä½œçš„è§„èŒƒæ€§å’ŒèŠ‚å¥æ„Ÿã€‚æ¯ä¸ªåŠ¨ä½œè¦ä½¿è‚Œè‚‰å……åˆ†ä¼¸å±•å’Œå½»åº•æ”¶ç¼©ï¼Œä¸èƒ½ç”¨å€ŸåŠ›çš„æ–¹æ³•è¿›è¡Œç»ƒä¹ ã€‚åœ¨æœ‰ä¸€å®šç»éªŒåï¼Œåˆç»ƒè€…å¯å¼€å§‹åœ¨æœ€åä¸€ç»„æˆ–æœ€åå‡ æ¬¡ç»ƒä¹ ä¸­ï¼Œå¯¹è¯¥è‚Œè‚‰é‡‡ç”¨åŠ©åŠ›çš„æ–¹æ³•ã€‚åœ¨æ¯ä¸ªåŠ¨ä½œä¸­éƒ½è¦é›†ä¸­ç²¾ç¥ï¼Œæœ‰åŠ©äºè°ƒåŠ¨æ›´å¤šçš„è‚Œçº¤ç»´å‚åŠ ç”¨åŠ›ã€‚</li>\n<li>æ³¨æ„å§¿åŠ¿ã€‚åœ¨è´Ÿé‡ç»ƒä¹ ä¸­ï¼Œè¦ä¿æŒä¸¤è¾¹é‡é‡çš„å¹³è¡¡ï¼Œä¸¤çœ¼å¹³è§†ï¼Œä¸¤è„šè‡ªç„¶å¼€ç«‹ï¼Œèº«ä½“ä¸Šä¸‹ç§»åŠ¨è¿‡ç¨‹ä¸­å§‹ç»ˆä¿æŒå¤´éƒ¨æ­£ç›´ã€‚</li>\n<li>æ§åˆ¶åŠ¨ä½œé€Ÿç‡ã€‚åœ¨è®­ç»ƒä¸­ï¼Œæ¯ç»„é—´é—´æ­‡æ—¶é—´æ˜¯60-90ç§’ï¼Œå¯ä»¥ä¿æŒä½“æ¸©ï¼Œé¿å…è‚Œè‚‰ä¼¤å®³ï¼Œè¿˜èƒ½ä½¿å¤§é‡è¡€æ¶²é›†ä¸­åˆ°è‚Œè‚‰ä¸­å»ã€‚åšåŠ¨ä½œæ—¶ï¼Œä¸Šä¸¾å’Œæ”¾ä¸‹çš„é€Ÿåº¦å¿…é¡»ç¼“æ…¢ï¼Œä¸”æœ‰èŠ‚å¥ã€‚è‹¥ä¸¾èµ·æ—¶é—´ä¸º2-3ç§’ï¼Œåˆ™æ”¾ä¸‹æ—¶é—´ä¸º4ç§’ã€‚æŒæ¡äº†æ­£ç¡®çš„æŠ€æœ¯åŠ¨ä½œåï¼Œå¯é€‚å½“åŠ å¿«åŠ¨ä½œã€‚</li>\n<li>ä¸ºäº†å‡è½»è‚Œè‚‰é…¸ç—›ï¼Œåœ¨è®­ç»ƒä¸­è¦ç©¿è¶³å¤Ÿçš„è¡£æœä»¥ä½¿èº«ä½“ä¿æŒé€‚å®œçš„ä½“æ¸©ï¼Œå¹¶åœ¨è®­ç»ƒåæ´—æ¸©æ°´æµ´ï¼Œç”¨æ©¡èƒ¶çš®è‚¤åˆ·æŒ‰æ‘©å…¨èº«ã€‚</li>\n<li>å‘¼å¸ç‰¹åˆ«é‡è¦ã€‚é€šå¸¸å½“ç”¨åŠ›æ—¶å‘¼æ°”ï¼Œåœ¨æ”¾æ¾è¿˜åŸæ—¶å¸æ°”ï¼›èƒ¸è…”è¢«æ‰©å¤§æ—¶å¸æ°”ï¼Œèƒ¸è…”å—å‹æ—¶å‘¼æ°”ã€‚</li>\n<li>è¡¥å……é«˜è´¨é‡çš„è›‹ç™½è´¨ã€ç»´ç”Ÿç´ ã€çŸ¿ç‰©è´¨å’Œä¸ç»è¿‡ç²¾ç‚¼çš„ç¢³æ°´åŒ–åˆç‰©ï¼ˆç²—ç²®ï¼‰ï¼›</li>\n<li>é¥®å¤§é‡çš„çº¯å¼€æ°´ï¼ˆæ¯å¤©è‡³å°‘12-16æ¯å®¹é‡ä¸º30æ¯«å‡çš„æ°´ï¼‰ï¼›</li>\n<li>æŒä¹‹ä»¥æ’ï¼›</li>\n</ol>\n<h4 id=\"è®¡åˆ’é¡»çŸ¥\"><a href=\"#è®¡åˆ’é¡»çŸ¥\" class=\"headerlink\" title=\"è®¡åˆ’é¡»çŸ¥\"></a>è®¡åˆ’é¡»çŸ¥</h4><ol>\n<li>ä¿è¯è¶³å¤Ÿçš„ç¡çœ å’Œä¼‘æ¯ï¼Œæ™šä¸Šç¡çœ æ—¶é—´çº¦ä¸º6-10å°æ—¶ï¼Œæœ‰æ¡ä»¶æœ€å¥½ç™½å¤©å°ç¡ä¸€ä¼šå„¿ï¼›</li>\n<li>æœ€åˆé˜¶æ®µæ¯å‘¨ç»ƒä¸‰å¤©ï¼Œæ¯éš”ä¸€å¤©é”»ç‚¼ä¸€æ¬¡ï¼›</li>\n<li>æœ€å¥½çš„è®­ç»ƒæ—¶é—´æ˜¯æ—¥å¸¸å­¦ä¹ å’Œå·¥ä½œä¹‹ä½™ï¼Œä¸”ç²¾åŠ›æœ€ä½³æ—¶ï¼Œå°½é‡å®‰æ’åœ¨æ¯å¤©åŒä¸€æ—¶é—´é”»ç‚¼ï¼›</li>\n<li>åˆ¶è®¢è¯¾ç¨‹è®¡åˆ’æ—¶å¿…é¡»è€ƒè™‘å¯¹æœ‰ç¼ºé™·éƒ¨ä½çš„çªå‡ºè®­ç»ƒï¼Œä½†ä¸æå€¡åç»ƒæœ‰ç¼ºé™·éƒ¨ä½ã€‚åˆç»ƒè€…åº”æŒ‰è¯¾ç¨‹å†…å®¹è®­ç»ƒè‡³å°‘å…­ä¸ªæœˆï¼Œç»ä¸èƒ½åœ¨åˆç»ƒçš„å…­ä¸ªæœˆå†…å®‰æ’é‡ç‚¹éƒ¨ä½çš„çªå‡ºè®­ç»ƒã€‚</li>\n</ol>\n<h4 id=\"ç»ƒä¹ æ¬¡æ•°\"><a href=\"#ç»ƒä¹ æ¬¡æ•°\" class=\"headerlink\" title=\"ç»ƒä¹ æ¬¡æ•°\"></a>ç»ƒä¹ æ¬¡æ•°</h4><ol>\n<li>ä½æ¬¡æ•°ï¼ˆ1-5æ¬¡ï¼‰ï¼šä¸»è¦å¢é•¿ä½“åŠ›å’ŒåŠ›é‡ï¼›</li>\n<li>ä¸­æ¬¡æ•°ï¼ˆ8-12æ¬¡ï¼‰ï¼šä¸»è¦å¢é•¿è‚Œè‚‰å—ã€çº¿æ¡å’Œè€åŠ›ï¼›</li>\n<li>é«˜æ¬¡æ•°ï¼ˆ15æ¬¡ä»¥ä¸Šï¼‰ï¼šä¸»è¦å¢å¼ºè‚Œè‚‰è€åŠ›ã€çº¿æ¡å’Œå‡ç¼©è‚Œè‚‰å—ï¼›</li>\n<li>å¦‚æœåšè¾ƒé«˜æ¬¡æ•°ï¼ˆ20æ¬¡ä»¥ä¸Šï¼‰å¹¶é‡‡ç”¨ä¸€ç§è¿ç»­çš„å¾ªç¯è®­ç»ƒï¼Œç»„ä¸ç»„ç»‡é—´æ²¡æœ‰ä¼‘æ¯ï¼Œè¿˜å¯ä»¥å¢å¼ºå¿ƒè„å’Œå‘¼å¸ç³»ç»Ÿçš„åŠŸèƒ½ã€‚</li>\n</ol>\n<h4 id=\"ç²¾ç¥å› ç´ \"><a href=\"#ç²¾ç¥å› ç´ \" class=\"headerlink\" title=\"ç²¾ç¥å› ç´ \"></a>ç²¾ç¥å› ç´ </h4><ol>\n<li>è®­ç»ƒæ—¶é›†ä¸­ç²¾åŠ›ï¼Œæ’é™¤æ‚å¿µã€‚å¹³æ—¶åœ¨è„‘æµ·é‡Œå¡‘é€ ä½“å‹ï¼Œå¹¶ä¸ºä¹‹åŠªåŠ›ï¼Œä¿æŒæ„‰å¿«çš„å¿ƒæƒ…ã€‚</li>\n</ol>\n<h4 id=\"è®­ç»ƒä¼´ä¾£\"><a href=\"#è®­ç»ƒä¼´ä¾£\" class=\"headerlink\" title=\"è®­ç»ƒä¼´ä¾£\"></a>è®­ç»ƒä¼´ä¾£</h4><ol>\n<li>ä¾ä¸ªäººçˆ±å¥½ï¼Œé€‰æ‹©æ˜¯å¦è¦ä¼´ä¾£æˆ–è°åšä¼´ä¾£ã€‚</li>\n</ol>\n<h4 id=\"æœ¬èƒ½è®­ç»ƒï¼è·Ÿç€æ„Ÿè§‰èµ°\"><a href=\"#æœ¬èƒ½è®­ç»ƒï¼è·Ÿç€æ„Ÿè§‰èµ°\" class=\"headerlink\" title=\"æœ¬èƒ½è®­ç»ƒï¼è·Ÿç€æ„Ÿè§‰èµ°\"></a>æœ¬èƒ½è®­ç»ƒï¼è·Ÿç€æ„Ÿè§‰èµ°</h4><ol>\n<li>é‡è§†è‡ªèº«çš„èº«ä½“æ„Ÿè§‰ï¼Œåœ¨ä½“èƒ½å…è®¸çš„æƒ…å†µä¸‹ï¼Œå……åˆ†æ»¡è¶³è‡ªèº«çš„æ„¿æœ›ï¼Œä½†ä¸è¦æœ‰æ‡’æƒ°å’Œè®­ç»ƒè¿‡åº¦ã€‚è¿™æ ·æœ‰åˆ©äºä¿æŒè‡ªå·±è¾ƒé«˜çš„æƒ…ç»ªæ°´å¹³ã€‚</li>\n</ol>\n<hr>\n<h2 id=\"åˆçº§ç¯‡\"><a href=\"#åˆçº§ç¯‡\" class=\"headerlink\" title=\"åˆçº§ç¯‡\"></a>åˆçº§ç¯‡</h2><ol>\n<li><p><strong>æ¸å¢è¶…è´Ÿè·è®­ç»ƒåŸåˆ™ ï¼ˆProgressive Overload Training Principleï¼‰</strong></p>\n<ul>\n<li>ä½¿è‚Œè‚‰é€æ¸å¢åŠ è´Ÿè·ï¼Œå¹¶è®©è‚Œè‚‰å—åˆ°æ›´å¼ºçƒˆçš„è®­ç»ƒæ˜¯å¢å¼ºä»»ä½•èº«ä½“ç´ è´¨ï¼ˆåŠ›é‡ã€è‚Œè‚‰å›´åº¦ã€è€ä¹…åŠ›ç­‰ï¼‰çš„åŸºç¡€ã€‚å¦‚ï¼šè¦å¢é•¿åŠ›é‡ï¼Œå°±å¿…é¡»ä½¿ç”¨è¾ƒå¤§çš„é‡é‡ï¼›è‹¥å¢åŠ è‚Œè‚‰å›´åº¦ï¼Œä¸ä»…è¦é‡‡ç”¨è¶Šæ¥è¶Šé‡çš„è´Ÿè·ï¼Œè¿˜è¦å¢åŠ è®­ç»ƒç»„æ•°å’Œæ¯å‘¨çš„è®­ç»ƒæ¬¡æ•°ï¼›å¦‚è¦å¢åŠ å±€éƒ¨è‚Œè‚‰çš„è€ä¹…åŠ›ï¼Œå°±è¦é€æ¸å‡å°‘ç»„ä¸ç»„ä¹‹é—´çš„é—´æ­‡æ—¶é—´æˆ–å¢åŠ è®­ç»ƒç»„æ•°å’Œè®­ç»ƒæ¬¡æ•°ã€‚ä¸€åˆ‡éƒ½è¦é€æ¸å¢é•¿ã€‚è¶…è´Ÿè·è®­ç»ƒæ˜¯æ‰€æœ‰ä½“å‹è®­ç»ƒæ³•çš„åŸºç¡€ã€‚</li>\n<li>æ³¨ï¼šé€šå¸¸åœ¨è¶…åŠ›é‡æˆ–å¤§å¼ºåº¦è®­ç»ƒä¸­ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å¤šç»„æ•°è®­ç»ƒåŸåˆ™ ï¼ˆSet System Training Principleï¼‰</strong></p>\n<ul>\n<li>å¤šç»„æ•°è®­ç»ƒåŸåˆ™ï¼ˆæœ‰æ—¶æ¯ä¸ªåŠ¨ä½œæœ€å¤š3-4ç»„ï¼‰ï¼Œä»¥ä¾¿ä½¿æ¯ä¸ªè‚Œè‚‰ç¾¤éƒ½èƒ½å®Œå…¨å½»åº•åœ°å¾—åˆ°é”»ç‚¼ï¼Œå¹¶è¾¾åˆ°æœ€å¤§é™åº¦çš„è‚Œè‚‰è†¨èƒ€ã€‚</li>\n<li>æ³¨ï¼šä¸åŒçš„è®­ç»ƒè¯¾ç¨‹ä¸­ï¼Œè¦æ›´å…·è‡ªå·±çš„ä½“åŠ›æƒ…å†µå’Œæ‰€é”»ç‚¼çš„éƒ¨ä½çš„å¼ºå¼±æƒ…å†µå®‰æ’åˆé€‚çš„è®­ç»ƒç»„æ•°ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å­¤ç«‹è®­ç»ƒåŸåˆ™ï¼ˆIsolation Training Principleï¼‰</strong></p>\n<ul>\n<li>ä¸åŒçš„è‚Œè‚‰ç¾¤å¯ä»¥ä¸€èµ·ç»ƒæˆ–ç›¸å¯¹åœ°å„è‡ªå•ç‹¬åˆ†å¼€è®­ç»ƒã€‚åœ¨å®ŒæˆåŠ¨ä½œè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€å—è‚Œè‚‰éƒ½æœ‰å®ƒä»¬å„è‡ªçš„ç”¨åŠ›ç‰¹ç‚¹ï¼Œä½†æ€»æœ‰æŸè‚Œè‚‰ç¾¤æ˜¯ä¸»è¦ç”¨åŠ›çš„ï¼Œå…¶å®ƒè‚Œè‚‰èµ·ç€ååŒä½œç”¨æˆ–ç›¸å¯¹å…³èŠ‚çš„å›ºå®šä½œç”¨ï¼Œæˆ–å¯¹æŠ—ä½œç”¨ã€‚å¦‚æœæ‚¨è¦æœ€å¤§é™åº¦åœ°å•ç‹¬å‘å±•æŸä¸€éƒ¨ä½çš„è‚Œè‚‰ï¼Œå°±è¦å°½å¯èƒ½ä½¿ä¸»è¦ç”¨åŠ›çš„è‚Œè‚‰ä¸å…¶å®ƒè‚Œè‚‰çš„æ´»åŠ¨åˆ†å¼€ã€‚å¯æŒ‰è§£å‰–ä½ç½®è¿›è¡Œå˜æ¢ï¼Œå¦‚æ–¯é«˜ç‰¹ï¼ˆæ–œæ‰˜ï¼‰å¼¯ä¸¾å¯¹è‡‚éƒ¨çš„å±ˆè‚Œé”»ç‚¼å°±æ¯”ç”¨çª„æ¡é‡é”¤ä¸‹æ‹‰çš„æ•ˆæœè¦å¥½ã€‚</li>\n<li>æ³¨ï¼šé€‚åˆäºåœ¨éœ€è¦é‡ç‚¹å‘å±•çš„è‚Œè‚‰è®­ç»ƒä¸­ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>è‚Œè‚‰å…¨é¢è®­ç»ƒåŸåˆ™ï¼ˆMuscle Priority Training Principleï¼‰</strong></p>\n<ul>\n<li>è¦ä½¿è‚Œè‚‰ä¸æ–­åœ°å¢é•¿ï¼Œå°±ä¸èƒ½é‡‡ç”¨æŸä¸ªå›ºå®šä¸å˜çš„é”»ç‚¼è¯¾ç¨‹ã€‚å¦‚æœå›ºå®šé‡‡ç”¨ç›¸åŒçš„åŠ¨ä½œã€ç»„æ•°ã€æ¬¡æ•°å’Œè§’åº¦ï¼Œå°±ä¸èƒ½ä½¿è‚Œè‚‰è·å¾—å…¨é¢çš„å¼ºåº¦åˆºæ¿€ä»¥ä½¿è‚Œè‚‰å¢é•¿ã€‚</li>\n<li>æ³¨ï¼šé€‚åˆåœ¨å¹³æ—¶çš„è®­ç»ƒè¯¾ç¨‹ä¸­ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2 id=\"ä¸­çº§ç¯‡\"><a href=\"#ä¸­çº§ç¯‡\" class=\"headerlink\" title=\"ä¸­çº§ç¯‡\"></a>ä¸­çº§ç¯‡</h2><ol start=\"5\">\n<li><p><strong>é‡ç‚¹è‚Œè‚‰ä¼˜å…ˆè®­ç»ƒåŸåˆ™ï¼ˆMuscle Priority Training Principleï¼‰</strong></p>\n<ul>\n<li>è–„å¼±éƒ¨ä½çš„é”»ç‚¼åº”åœ¨è®­ç»ƒè¯¾åˆšå¼€å§‹ä½“åŠ›æœ€æ—ºç››ã€ç²¾åŠ›æœ€å……æ²›çš„æ—¶å€™è¿›è¡Œï¼Œä»¥æ‰¿å—æœ€å¤§çš„åˆºæ¿€å¼ºåº¦å’Œè¿åŠ¨é‡ã€‚</li>\n<li>æ³¨ï¼šé€‚åˆåœ¨æ¯æ¬¡è®­ç»ƒè¯¾æ‰€éœ€é‡ç‚¹è®­ç»ƒçš„è‚Œè‚‰ã€‚</li>\n</ul>\n</li>\n<li><p><strong>é‡‘å­—å¡”è®­ç»ƒåŸåˆ™(Pyramiding Training Principle)</strong></p>\n<ul>\n<li>è‚Œè‚‰çº¤ç»´çš„å¢é•¿ä¸åŠ›é‡çš„å¢é•¿æ˜¯é˜»åŠ›è®­ç»ƒçš„ç»“æœã€‚ç†è®ºä¸Šæ¥è®²ï¼Œå¦‚æœåœ¨ä¸€ä¸ªåŠ¨ä½œä¸­èƒ½ç”¨æœ€å¤§çš„é‡é‡åš8æ¬¡ï¼Œå¹¶èƒ½åšå‡ ç»„ï¼Œé‚£ä¹ˆå¯¹å¢é•¿ä½“å›´å’ŒåŠ›é‡æœ‰å¾ˆå¤§æ•ˆæœã€‚ä½†æ²¡åšçƒ­èº«æ´»åŠ¨å°±ç”¨å¤§é‡é‡æ¥ç»ƒï¼Œä¼šæœ‰æ½œåœ¨çš„å±é™©ã€‚å› æ­¤åº”ä»æå°é‡é‡å¼€å§‹é€æ¸åœ°å¢å¤§è´Ÿè·é‡é‡ã€‚é‡‘å­—å¡”è®­ç»ƒæ³•å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚ï¼šå¼€å§‹ç”¨60ï¼…æœ€å¤§é‡é‡åš15æ¬¡ï¼Œç„¶åå†å¢åŠ é‡é‡ï¼Œè¯•åš10-12æ¬¡ï¼Œæœ€ååŠ é‡åˆ°80ï¼…ï¼Œæœ€å¤šåš5-6æ¬¡ï¼Œä¼šè·å¾—å¾ˆå¥½çš„æ•ˆæœï¼Œé¿å…å—ä¼¤ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶çš„è®­ç»ƒè¯¾ç¨‹ï¼Œæˆ–è¶…é‡è®­ç»ƒè¯¾ç¨‹ã€‚</li>\n</ul>\n</li>\n<li><p><strong>åˆ†åŒ–è®­ç»ƒåŸåˆ™ï¼ˆSplit System Training Principleï¼‰</strong></p>\n<ul>\n<li>å½“è¿ç»­ä¸‰ä¸ªæœˆçš„æ¯æ˜ŸæœŸä¸‰æ¬¡è®­ç»ƒä»¥åï¼Œå°±å¯ä»¥è¿›è¡Œè¶…å¼ºåº¦è®­ç»ƒã€‚å¯ä»¥æŠŠå…¨èº«åˆ†æˆä¸Šèº«å’Œä¸‹èº«ä¸¤éƒ¨åˆ†æ¥è®­ç»ƒï¼Œæ¯ä¸ªéƒ¨åˆ†å¯ä»¥å¢åŠ åŠ¨ä½œå’Œè®­ç»ƒç»„æ•°ï¼Œè¿™æ ·æ¯ä¸ªéƒ¨åˆ†è‚Œè‚‰å°±å¯ä»¥å¾—åˆ°æ›´å¤šçš„é”»ç‚¼ã€‚åˆ†åŒ–è®­ç»ƒæ–¹æ³•æ˜¯ï¼šæŠŠä¸€ä¸ªæ˜ŸæœŸçš„ç¬¬ä¸€æ¬¡è®­ç»ƒè¯¾å…ˆå®‰æ’é”»ç‚¼ä¸Šèº«çš„8ä¸ªåŠ¨ä½œï¼Œé‡‡ç”¨è¶…å¼ºåº¦çš„è®­ç»ƒï¼›åœ¨å½“å¤©çš„ç¬¬äºŒæ¬¡è®­ç»ƒè¯¾ä¸­åªåšä¸‹èº«çš„6-8ä¸ªåŠ¨ä½œï¼Œé‡‡å–åŒæ ·çš„è¶…å¼ºåº¦è®­ç»ƒã€‚å¦‚æœé‡‡ç”¨æ¯å‘¨ç»ƒä¸‰å¤©çš„æ–¹æ³•ï¼ŒåŒä¸€æ¬¡è®­ç»ƒè¯¾ä¸­åŒæ—¶ç»ƒä¸Šèº«å’Œä¸‹èº«ï¼Œè‚Œè‚‰çš„åˆºæ¿€å¼ºåº¦å°±å¾ˆéš¾ä¸Šå»ã€‚åˆ†åŒ–è®­ç»ƒå¯¹æ¯ä¸ªéƒ¨ä½è‚Œè‚‰çš„é”»ç‚¼å¼ºåº¦ä¼šæ›´å¤§ï¼Œæ—¶é—´ä¼šæ›´é•¿ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒé˜¶æ®µï¼Œæˆ–å¢é•¿è‚Œè‚‰å—çš„è®­ç»ƒè¯¾ä¸­ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å±€éƒ¨é›†ä¸­è®­ç»ƒåŸåˆ™ï¼ˆFlushing Training Principleï¼‰</strong></p>\n<ul>\n<li>è®­ç»ƒä¸­å¿…é¡»ä½¿å¤§é‡è¡€æ¶²é›†ä¸­åˆ°è¢«é”»ç‚¼çš„è‚Œè‚‰ä¸­å»ï¼Œæ‰èƒ½ä½¿è‚Œè‚‰æ›´å¥½åœ°å¢é•¿ã€‚å¦‚ï¼šåœ¨é”»ç‚¼èƒ¸éƒ¨æ—¶ï¼Œè¯¾ç¨‹ä¸­å®‰æ’çš„3-4ä¸ªåŠ¨ä½œè¦è¿ç»­è¿›è¡Œï¼Œä¸­é—´ä¸æ’å…¥é”»ç‚¼å…¶å®ƒéƒ¨ä½è‚Œè‚‰çš„åŠ¨ä½œï¼Œä¸æ–­åœ°ä½¿è¡€æ¶²é›†ä¸­åˆ°è¿™ä¸ªéƒ¨ä½ï¼Œä»è€Œè¾¾åˆ°å±€éƒ¨è‚Œè‚‰å……åˆ†è†¨èƒ€çš„çŠ¶æ€ã€‚</li>\n<li>æ³¨ï¼šé€‚åˆäºé‡ç‚¹å‘å±•æˆ–å¼ºåŒ–æŸå—è‚Œè‚‰æ—¶ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>åŒç»„åˆè®­ç»ƒåŸåˆ™ï¼ˆSupersets Training Principleï¼‰</strong></p>\n<ul>\n<li>è¿™æ˜¯éŸ¦å¾·æœ€è‘—åçš„è®­ç»ƒåŸåˆ™ä¹‹ä¸€ã€‚å‡ æŠŠä¸¤ä¸ªåŠŸèƒ½ç›¸å¯¹åº”çš„è‚Œè‚‰ç¾¤ç»“åˆåœ¨ä¸€èµ·é”»ç‚¼ã€‚å¦‚ï¼ŒæŠŠé”»ç‚¼è‚±äºŒå¤´è‚Œçš„å¼¯ä¸¾å’Œé”»ç‚¼è‚±ä¸‰å¤´è‚Œçš„è‡‚å±ˆä¼¸ç»“åˆèµ·æ¥å°±æ˜¯ä¸€ä¸ªåŒç»„åˆè®­ç»ƒã€‚åŒç»„åˆæ˜¯æŠŠä¸¤ä¸ªåŠŸèƒ½ç›¸å¯¹åº”çš„å•å—è‚Œè‚‰çš„åŠ¨ä½œè½®æµåœ°ç»ƒï¼Œä¸€ä¸ªåŠ¨ä½œç»ƒä¸€ç»„ï¼Œç»„ä¸ç»„ä¹‹é—´åªå…è®¸æœ‰æå°‘çš„é—´æ­‡æ—¶é—´æˆ–ä¸ä¼‘æ¯ï¼Œæ˜¯ç¥ç»ç³»ç»Ÿå¤„äºé›†ä¸­åˆºæ¿€çŠ¶æ€ã€‚</li>\n<li>æ³¨ï¼šé€‚åˆäºé›†ä¸­é”»ç‚¼æŸéƒ¨ä½è‚Œè‚‰æˆ–å‡è„‚æ—¶ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å¤åˆç»„æ•°è®­ç»ƒåŸåˆ™ï¼ˆCompound Sets Training Principleï¼‰</strong></p>\n<ul>\n<li>åŒä¸€éƒ¨ä½çš„è‚Œè‚‰ç¾¤çš„åŒç»„åˆè®­ç»ƒï¼ˆå¦‚è¿ç»­ä¸¤ä¸ªç»ƒè‚±äºŒå¤´è‚Œçš„åŠ¨ä½œæˆä¸ºä¸€ä¸ªå¤åˆç»„æ•°è®­ç»ƒï¼‰ï¼Œå³åœ¨å±€éƒ¨è‚Œè‚‰è¿˜æ²¡æ¢å¤æ—¶ï¼Œä½¿å…¶è¿ç»­è¿›è¡Œè¶…å¼ºåº¦åˆºæ¿€ã€‚</li>\n<li>æ³¨ï¼šå¯¹èµ›å‰å‡è„‚æˆ–åŠ å¤§æŸé”»ç‚¼éƒ¨ä½çš„è‚Œè‚‰å¼ºåº¦æ•ˆæœè¾ƒå¥½ã€‚</li>\n</ul>\n</li>\n<li><p><strong>ç»¼åˆè®­ç»ƒåŸåˆ™ï¼ˆHolistic Training Principleï¼‰</strong></p>\n<ul>\n<li>ç»ä¸åŒæ–¹å¼ä½¿ä¸åŒéƒ¨ä½è‚Œè‚‰ç»†èƒçš„è›‹ç™½è´¨å’Œçƒ­èƒ½äº§ç”Ÿä¸åŒååº”ã€‚å½“è‚Œè‚‰çº¤ç»´é‡åˆ°è¾ƒå¤§é˜»åŠ›è´Ÿè·æ—¶ï¼Œè‚Œè‚‰çº¤ç»´å°±ä¼šå¢å¤§ï¼Œå³ç»è¿‡ä¸åŒè§’åº¦çš„é˜»åŠ›è´Ÿè·èƒ½ä¿ƒä½¿æ•´å—è‚Œè‚‰çš„ç»†èƒå¢å¤§ã€‚å› æ­¤ï¼Œå¿…é¡»é‡‡ç”¨å„ç§ä¸åŒçš„åŠ¨ä½œå’Œè®­ç»ƒæ¬¡æ•°ã€‚</li>\n<li>æ³¨ï¼šæ›´é€‚åˆäºé›†ä¸­å¯¹æŸå—é‡ç‚¹è‚Œè‚‰çš„çªå‡»è®­ç»ƒï¼Œä½†ä¸å®œé•¿æœŸä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å¾ªç¯è®­ç»ƒåŸåˆ™(Cycle Training Principle)</strong></p>\n<ul>\n<li>åœ¨å…¨å¹´è®­ç»ƒä¸­çš„æŸä¸€æ—¶æœŸï¼Œè®­ç»ƒè¯¾ç¨‹å¯é›†ä¸­å®‰æ’å¢é•¿è‚Œè‚‰å—å’ŒåŠ›é‡ï¼Œè€Œå¦ä¸€æ—¶æœŸå®‰æ’ä»¥å‡è½»è´Ÿè·ã€å¢åŠ è¯•ä¸¾æ¬¡æ•°ã€ç¼©çŸ­é—´æ­‡æ—¶é—´ï¼ˆä¼˜è´¨è®­ç»ƒï¼‰ä¸ºä¸»ã€‚å¯é¿å…æœºèƒ½å—ä¼¤å¹¶ä¿æŒè®­ç»ƒæ•ˆæœçš„ç¨³æ­¥æé«˜ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå‡è„‚æˆ–æé«˜å¿ƒè¡€ç®¡ç³»ç»Ÿçš„åŠŸèƒ½æ°´å¹³ã€‚</li>\n</ul>\n</li>\n<li><p><strong>é™åŠ›ç´§å¼ è®­ç»ƒåŸåˆ™(ISO-Tension Training Principle)</strong></p>\n<ul>\n<li>é™åŠ›ç´§å¼ æ˜¯éŸ¦å¾·æœ€è¢«å…¬è®¤çš„è®­ç»ƒåŸåˆ™ä¹‹ä¸€ã€‚é™åŠ›ç´§å¼ ç”¨äºè‚Œè‚‰æ§åˆ¶ï¼Œå³æŠŠè‚Œè‚‰æ”¶ç¼©åˆ°æç‚¹ï¼Œä¿æŒé™æ­¢æ§åˆ¶3-6ç§’ï¼Œé‡å¤åš3æ¬¡ã€‚è¿™ç§è®­ç»ƒèƒ½æé«˜ç¥ç»ç³»ç»Ÿå¯¹è‚Œè‚‰çš„æ§åˆ¶èƒ½åŠ›ï¼Œå¯ä½¿åœ¨æ¯”èµ›ä¸­è¡¨ç°å„ç§é€ å‹å§¿åŠ¿æ—¶ï¼Œåˆ†åˆ«æ§åˆ¶å„éƒ¨ä½è‚Œè‚‰ï¼Œä»¥ä½¿è‚Œè‚‰çº¿æ¡æ›´åŠ æ¸…æ™°å’Œçªå‡ºã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºåŠ¨ä½œé€ å‹çš„è®­ç»ƒã€‚</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h2 id=\"é«˜çº§ç¯‡\"><a href=\"#é«˜çº§ç¯‡\" class=\"headerlink\" title=\"é«˜çº§ç¯‡\"></a>é«˜çº§ç¯‡</h2><ol start=\"14\">\n<li><p><strong>åŠ©åŠ›è®­ç»ƒåŸåˆ™(Cheating Training Principle)</strong></p>\n<ul>\n<li>å€ŸåŠ©å…¶å®ƒè‚Œè‚‰çš„åŠ›é‡å®ŒæˆåŠ¨ä½œç»ƒä¹ çš„æœ€å1-2æ¬¡ï¼Œæˆ–åˆ©ç”¨èº«ä½“å…¶å®ƒéƒ¨ä½æ¥ååŠ©åœ¨è¿åŠ¨ä¸­çš„è‚Œè‚‰å®Œæˆæœ€åè¯•ä¸¾ã€‚å¦‚ï¼šä¿¯ç«‹å¼¯ä¸¾åšåˆ°æœ€åå‡ æ¬¡è¯•ä¸¾æ„Ÿåˆ°å¾ˆéš¾å®Œæˆæ—¶ç”¨å¦ä¸€åªæ‰‹è½»å¾®æ‰˜ä½æ‰‹èƒŒåœ¨å®Œæˆå‡ æ¬¡ã€‚ä½†å¦‚åœ¨åšä»°å§æ¨ä¸¾æ—¶ï¼Œé‡‡ç”¨èƒŒå’Œè‡€éƒ¨ç¦»å¼€å‡³é¢çš„åŠ›é‡æ¥å¤šå®Œæˆå‡ æ¬¡ï¼Œå°±ä¸æ˜¯éŸ¦å¾·åŠ©åŠ›è®­ç»ƒåŸåˆ™äº†ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¯¹æŸå—é‡ç‚¹è‚Œè‚‰çš„è¶…å¼ºåº¦è®­ç»ƒã€‚</li>\n</ul>\n</li>\n<li><p><strong>ä¸‰ç»„åˆè®­ç»ƒåŸåˆ™(Tri-Sets Training Principle)</strong></p>\n<ul>\n<li>åŒä¸€å—è‚Œè‚‰é‡‡ç”¨ä¸‰ä¸ªä¸åŒçš„åŠ¨ä½œé”»ç‚¼ï¼Œä¸”åŠ¨ä½œä¹‹é—´æ²¡æœ‰ä¼‘æ¯ã€‚è¯¥æ–¹æ³•å¯¹å¢åŠ è¡€ç®¡ä¸­è¡€æµé‡å¾ˆæœ‰æ•ˆã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¯¹æŸå—é‡ç‚¹è‚Œè‚‰çš„è¶…å¼ºåº¦å’Œå‡è„‚è®­ç»ƒã€‚</li>\n</ul>\n</li>\n<li><p><strong>è¶…ç»„åˆè®­ç»ƒåŸåˆ™(Giant Sets Training Principle)</strong></p>\n<ul>\n<li>åŒä¸€è‚Œè‚‰ç¾¤é‡‡ç”¨4-6ç§åŠ¨ä½œé”»ç‚¼ï¼ŒåŠ¨ä½œé—´æ­‡å¾ˆçŸ­æˆ–æ²¡æœ‰ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå‡è„‚è®­ç»ƒå’Œæé«˜è‚Œè‚‰è€åŠ›è®­ç»ƒã€‚</li>\n</ul>\n</li>\n<li><p><strong>é¢„çƒ­è®­ç»ƒåŸåˆ™(Pre-Exhaustion Training Principle)</strong></p>\n<ul>\n<li>åœ¨é”»ç‚¼æŸå—è‚Œè‚‰æ—¶ï¼Œå¼€å§‹å…ˆé‡‡ç”¨å­¤ç«‹åŠ¨ä½œç»ƒä¹ ï¼Œç„¶åç«‹åˆ»ç”¨åŒç»„åˆè®­ç»ƒè¿›è¡Œæ­£å¸¸è®­ç»ƒã€‚</li>\n<li>æ³¨ï¼šé€šå¸¸ç”¨äºè®­ç»ƒè¯¾ç¨‹çš„å¼€å§‹é˜¶æ®µæˆ–æŸå—è‚Œè‚‰çš„å¼€å§‹è®­ç»ƒä¹‹å‰ã€‚</li>\n</ul>\n</li>\n<li><p><strong>åœæ¯è®­ç»ƒåŸåˆ™(Rest-Pause Training Principle)</strong></p>\n<ul>\n<li>ç”¨æœ€å¤§é‡é‡è¯•ä¸¾æ—¶ï¼Œæ¯æ¬¡éƒ½è¯•ä¸¾åˆ°æé™æ¬¡æ•°ï¼Œç„¶ååœæ¯ä¸€ä¼šå„¿ï¼Œå†æ¥ç€è¯•ä¸¾ã€‚ç¬¬ä¸€æ¬¡åœæ¯å¯ä¸º30-45ç§’ï¼Œä»¥åæ¯æ¬¡å¢åŠ 30ç§’ã€‚è¿™æ˜¯å¢é•¿åŠ›é‡å’Œè‚Œè‚‰å›´åº¦çš„å¥½æ–¹æ³•ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¢é•¿åŠ›é‡çš„ç»ƒä¹ ã€‚</li>\n</ul>\n</li>\n<li><p><strong>é¡¶å³°æ”¶ç¼©è®­ç»ƒåŸåˆ™(Peak Contraction Training Principle)</strong></p>\n<ul>\n<li>é¡¶å³°æ”¶ç¼©æ˜¯æŒ‡è‚Œè‚‰è¾¾åˆ°å®Œå…¨æ”¶ç¼©æ—¶ä½¿æ´»åŠ¨çš„è‚Œè‚‰å¤„äºæœ€ç´§å¼ çš„æ”¶ç¼©çŠ¶æ€ã€‚è‚Œè‚‰å®Œå…¨æ”¶ç¼©æ—¶è‹¥æ²¡æœ‰é”å®šè¿™ä¸ªé‡é‡ï¼Œè‚Œè‚‰ä¼šå‡ºç°æ¾å¼›ç°è±¡ã€‚ä¸ºäº†é¿å…è¿™ä¸€ç°è±¡ï¼Œåœ¨è‚Œè‚‰æ”¶ç¼©åˆ°æœ€ç´§å¼ çš„ä½ç½®æ—¶ï¼Œåº”ç»™äºˆä¸€å®šçš„å‡é˜»åŠ›ã€‚å¦‚ï¼Œåšå“‘é“ƒå¼¯ä¸¾åˆ°æœ€é«˜ç‚¹æ—¶ï¼ŒæŠŠèº¯å¹²ç¨å‘å‰å€¾ï¼Œè®©ä¸Šè‡‚å¤„äºé‡åŠ›çš„å‚çº¿ä¹‹å¤–ï¼Œå°±ä¼šé”å®šé‡é‡ï¼Œä½¿è‚Œè‚‰å¤„äºå½»åº•æ”¶ç´§çŠ¶æ€ã€‚è¿™ç§è®­ç»ƒè¯¾ä½¿è‚Œè‚‰å¢å¤§ä¸”è‚Œçº¹åˆ†å‰²çº¿æ¸…æ™°ã€‚</li>\n<li>æ³¨ï¼šé€‚åˆäºæ‰€æœ‰åŠ¨ä½œç»ƒä¹ ä¸­è‚Œè‚‰æ”¶ç¼©è‡³æé™æ—¶é‡‡ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>æŒç»­ç´§å¼ è®­ç»ƒåŸåˆ™(Continuous Tension Training Principle)</strong></p>\n<ul>\n<li>åœ¨æ•´ä¸ªåŠ¨ä½œè¿‡ç¨‹ä¸­ï¼ŒåŠ¨ä½œè¦åšå¾—æ…¢äº›ï¼Œä½¿è‚Œè‚‰èƒ½é€æ¸æ”¶ç¼©ï¼Œå§‹ç»ˆä¿æŒç´§å¼ çš„æ”¶ç¼©çŠ¶æ€ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒä¸­å¢é•¿è‚Œè‚‰çš„æœ€åå‡ ç»„è®­ç»ƒï¼Œæˆ–æé«˜è‚Œè‚‰è€åŠ›è®­ç»ƒã€‚</li>\n</ul>\n</li>\n<li><p><strong>æŠ—é‡åŠ›è®­ç»ƒåŸåˆ™(Reverse-Gravity Training Principle)</strong></p>\n<ul>\n<li>ä¸¾èµ·é‡ç‰©åæ”¾ä¸‹æ—¶ï¼Œç”¨åŠ›æŠµæŠ—ä¸‹é™é‡ç‰©ï¼Œè¿›è¡Œé€€è®©æ€§ç»ƒä¹ ï¼Œæ˜¯è®©å·²æ”¶ç¼©çš„è‚Œè‚‰è¢«åŠ¨æ‹‰é•¿çš„åŠ¨ä½œï¼Œå¯¹è‚Œè‚‰åˆºæ¿€æ›´å¼ºçƒˆï¼Œæœ‰åˆ©äºå¢å¤§è‚Œè‚‰ï¼Œå¢åŠ åŠ›é‡ã€‚å› ä¸ºè¿™ç§æ–¹æ³•å¼ºåº¦å¾ˆå¤§ï¼Œåœ¨è®­ç»ƒä¸­ä¸å®œç»å¸¸ä½¿ç”¨ã€‚è¿åŠ¨è´Ÿè·å®‰æ’è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</li>\n<li>å¼ºåº¦ï¼šé‡‡ç”¨90ï¼…-120ï¼…æœ€å¤§é‡é‡ã€‚</li>\n<li>ç»„æ•°ï¼šè¾ƒå°‘ï¼Œé€šå¸¸ä¸º4Â±2ç»„ã€‚</li>\n<li>æ¬¡æ•°ï¼šè¾ƒå°‘ï¼Œé€šå¸¸åš2-3æ¬¡ã€‚</li>\n<li>æ—¶é—´ï¼š6-8ç§’ã€‚</li>\n<li>é€Ÿåº¦ï¼šæ…¢ã€‚</li>\n<li>è¿™ç§è®­ç»ƒæ–¹æ³•ä¹Ÿå¯ç”¨äºå‘å±•è–„å¼±ç¯èŠ‚ï¼Œå¼ºè¿«ä¿ƒä½¿å…¶å¹³è¡¡å‘å±•ã€‚</li>\n<li>æ³¨ï¼šé€šå¸¸åœ¨å¹³æ—¶çš„è®­ç»ƒå‘¨æœŸä¸­å‘å±•åŠ›é‡æˆ–è¶…å¼ºåº¦åˆºæ¿€è¢«é”»ç‚¼çš„è‚Œè‚‰</li>\n</ul>\n</li>\n<li><p><strong>å¼ºè¿«æ¬¡æ•°è®­ç»ƒåŸåˆ™(Forced Reps Training Principle)</strong></p>\n<ul>\n<li>å½“ä¸¾è‡³åŠ›ç«­æ—¶ï¼Œç”±åŒä¼´ç¨åŠ åŠ©åŠ›å†åš2-3æ¬¡çš„å¼ºè¿«æ¬¡æ•°ï¼Œä½†åŠ©åŠ›åªåœ¨ä¸¾èµ·çš„å¼€å§‹é˜¶æ®µï¼Œæ¥ä¸‹æ¥æŠŠæ é“ƒä¸¾è‡³ä¸¤è‡‚ä¼¸ç›´å°±åº”è¯¥ä¾é è‡ªå·±çš„åŠ›é‡ã€‚</li>\n<li>æ³¨ï¼šé€šå¸¸åœ¨å¹³æ—¶è®­ç»ƒå‘¨æœŸå¯¹æ‰€é‡ç‚¹å‘å±•è‚Œè‚‰çš„æœ€å1-2ç»„çš„æœ€åå‡ æ¬¡æ¨ä¸¾ä¸­ä½¿ç”¨ï¼Œä¸å®œæ•´ä¸ªè®­ç»ƒè¯¾ç¨‹çš„æ¯ç»„æ¨ä¸¾éƒ½é‡‡ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>åŒåˆ†åŒ–è®­ç»ƒåŸåˆ™(Double-Split Training Principle)</strong></p>\n<ul>\n<li>é«˜çº§å¥ç¾è¿åŠ¨å‘˜ä¸ºæé«˜æ€»è´Ÿè·ï¼Œåˆä¸è‡³äºè¿‡åº¦è®­ç»ƒï¼Œå°†æ€»è´Ÿè·é‡ä¸€åˆ†ä¸ºäºŒï¼Œä¸Šåˆç»ƒ1-2ä¸ªéƒ¨ä½ï¼Œä¸‹åˆç»ƒå¦å¤–1-2ä¸ªéƒ¨ä½ã€‚æœ‰åˆ©äºç²¾åŠ›æ›´é›†ä¸­ï¼Œé‡‡ç”¨æ›´å¤§çš„é‡é‡å’Œç»„æ•°ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºæ—¶é—´ä¸èƒ½ä¿è¯çš„é”»ç‚¼è€…ï¼Œæˆ–èµ›å‰å‡è„‚ã€‚</li>\n</ul>\n</li>\n<li><p><strong>ä¸‰åˆ†åŒ–è®­ç»ƒåŸåˆ™(Triple-Split Training Principle)</strong></p>\n<ul>\n<li>å°‘æ•°å¥ç¾è¿åŠ¨å‘˜æœ‰æƒŠäººçš„æ¢å¤èƒ½åŠ›ï¼Œæ ¹æ®åŒåˆ†åŒ–åŸç†ï¼Œä¸€å¤©ç»ƒä¸‰æ¬¡ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå…·æœ‰å¾ˆå¥½ä½“åŠ›çš„é«˜çº§å¥ç¾è¿åŠ¨å‘˜çš„èµ›å‰å‡è„‚ã€‚</li>\n</ul>\n</li>\n<li><p><strong>è†¨èƒ€è®­ç»ƒåŸåˆ™(Burns Training Principle)</strong></p>\n<ul>\n<li>åœ¨æ­£å¸¸è®­ç»ƒçš„æœ€åä¸€æ¬¡è¯•ä¸¾æ—¶å†åš2-3æ¬¡åŠç¨‹çš„ç»ƒä¹ ï¼Œæ˜¯æ­£åœ¨æ´»åŠ¨ çš„è‚Œè‚‰è¿›å…¥æ›´å¤šçš„è¡€æ¶²å¹¶äº§ç”Ÿè¶…é‡çš„ä¹³é…¸ï¼Œå¼•èµ·è‚Œè‚‰å‘èƒ€æ„Ÿè§‰ã€‚è¿™ç§æ„Ÿè§‰æ˜¯ç”±äºå±€éƒ¨åŠ¨ä½œæ—¶æ›´å¤šçš„è¡€æ¶²è¿›å…¥è‚Œè‚‰ä¸­å¼•èµ·çš„æ¯›ç»†è¡€ç®¡è†¨èƒ€ï¼Œæœ‰åŠ©äºå¢åŠ è‚Œè‚‰å›´åº¦å’Œè‚Œè‚‰ä¸­æ¯›ç»†è¡€ç®¡çš„å¢ç²—ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºè®­ç»ƒè¯¾ç¨‹ä¸­çš„é‡ç‚¹è‚Œè‚‰è®­ç»ƒï¼Œä¸å®œç»å¸¸ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>ä¼˜åŒ–è®­ç»ƒåŸåˆ™(Quality Training Principle)</strong></p>\n<ul>\n<li>æŒ‰è§„å®šçš„ç»„æ•°å’Œæ¬¡æ•°è¿›è¡Œé”»ç‚¼æ—¶ï¼Œé€æ¸å‡å°‘ç»„é—´é—´æ­‡æ—¶é—´ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºèµ›å‰æé«˜è‚Œè‚‰è´¨é‡æˆ–å‡è„‚è®­ç»ƒã€‚</li>\n</ul>\n</li>\n<li><p><strong>é€’å‡è®­ç»ƒåŸåˆ™(Descending Sets Training Principle)</strong></p>\n<ul>\n<li>é‡‡ç”¨ç”±é‡åˆ°è½»çš„é€é™é‡é‡çš„æ–¹æ³•ï¼Œéœ€è¦æœ‰ä¸¤ä¸ªè®­ç»ƒä¼™ä¼´å¸®åŠ©ï¼Œå½“é‡‡ç”¨ä¸€å®šé‡é‡å®Œæˆè§„å®šçš„æ¬¡æ•°æ—¶ï¼Œæœ‰ä¸¤æ—çš„ä¼™ä¼´ç«‹å³ä»ä¸¤ç«¯å„å–ä¸‹ä¸€ç‰‡æ é“ƒï¼›ç»§ç»­ä¸¾åˆ°åŠ›ç«­æ—¶ï¼Œåœ¨å„å–ä¸‹ä¸€ç‰‡ï¼Œå†ä¸¾å‡ æ¬¡ï¼Œç›´è‡³æ²¡æœ‰æ é“ƒç‰‡ä¸ºæ­¢ã€‚æ­¤æ³•çš„è®­ç»ƒå¼ºåº¦å¾ˆå¤§ï¼Œæ¯æ¬¡è®­ç»ƒè¯¾ä¸è¶…è¿‡1-2<br>ä¸ªåŠ¨ä½œã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºåœ¨å¹³æ—¶è®­ç»ƒå‘¨æœŸçš„è®­ç»ƒè¯¾ä¸­éœ€è¦é‡ç‚¹å‘å±•çš„å¤§è‚Œè‚‰ã€‚</li>\n</ul>\n</li>\n<li><p><strong>æœ¬èƒ½è®­ç»ƒåŸåˆ™(Instinctive Training Principle)</strong></p>\n<ul>\n<li>æ ¹æ®è‡ªå·±çš„æ„Ÿè§‰å®‰æ’åŠ¨ä½œã€ç»„æ•°å’Œæ¬¡æ•°ã€é¥®é£Ÿè¥å…»åŠè®­ç»ƒè®¡åˆ’ã€‚æœ‰åˆ©äºå……åˆ†å‘æŒ¥è‡ªå·±çš„æ½œèƒ½ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºä¸åŒè®­ç»ƒå‘¨æœŸçš„ä¸åŒè®­ç»ƒè¯¾ç¨‹ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å…¼é¡¾è®­ç»ƒåŸåˆ™(Eclectic Training Principle)</strong></p>\n<ul>\n<li>æŠŠå¤§è‚Œè‚‰ç¾¤çš„å‘å±•å’Œè‚Œè‚‰å­¤ç«‹è®­ç»ƒç»“åˆèµ·æ¥ï¼Œå³ä¸ºå‘å±•æŸä¸»è¦è‚Œè‚‰å—ï¼ŒæŠŠç›¸åº”çš„å¤§è‚Œè‚‰ç¾¤è®­ç»ƒåŠ¨ä½œå’Œå±€éƒ¨è‚Œè‚‰è®­ç»ƒåŠ¨ä½œæ”¾åˆ°åŒä¸€è¯¾ç¨‹ä¸­ï¼Œå¹¶äºæœ¬èƒ½è®­ç»ƒåŸåˆ™ç»“åˆèµ·æ¥ï¼Œæ˜¯åŠ›é‡ã€å½¢ä½“ã€è‚Œè‚‰å—å¢å¼ºåˆ°æœ€å¤§é™åº¦ã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒå‘¨æœŸçš„è°ƒæ•´è®­ç»ƒã€‚</li>\n</ul>\n</li>\n<li><p><strong>ç²˜ç‚¹è®­ç»ƒåŸåˆ™(Partial Reps Training Principle)</strong></p>\n<ul>\n<li>ç²˜ç‚¹æŒ‡åœ¨åšæŸç»„åŠ¨ä½œåˆ°åŠ›ç«­æ—¶ï¼Œè‚Œè‚‰ä¸èƒ½å†æ”¶ç¼©å‡ºç°çš„ç²˜æ»çŠ¶æ€ã€‚ä¸åŒè‚Œè‚‰åšä¸åŒåŠ¨ä½œå‡ºç°ç²˜ç‚¹çš„æ—¶é—´å’Œä½ç½®ä¸ä¸€æ ·ã€‚ä¸€èˆ¬åšå¾’æ‰‹åŠ¨ä½œå¾ˆéš¾å‡ºç°ç²˜ç‚¹ï¼Œå¯¹è‚Œè‚‰åŠ›é‡çš„å¢é•¿æ•ˆæœä¸å¤§ï¼Œæ•…ç»™å¾’æ‰‹åŠ¨ä½œå¢åŠ è´Ÿé‡èƒ½å–å¾—å¾ˆå¥½çš„æ•ˆæœã€‚å¯¹äºé«˜çº§å¥ç¾è¿åŠ¨å‘˜æ¥è¯´ï¼Œé‡‡ç”¨ç²˜ç‚¹è®­ç»ƒæ–¹æ³•å…‹æœè–„å¼±ç¯èŠ‚èƒ½å–å¾—æœ€å¤§æ•ˆæœã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå¹³æ—¶è®­ç»ƒå‘¨æœŸçš„å‘å±•åŠ›é‡è®­ç»ƒè¯¾ç¨‹ã€‚</li>\n</ul>\n</li>\n<li><p><strong>å¿«é€ŸåŸåˆ™(Speed Principle)</strong></p>\n<ul>\n<li>ä¸€èˆ¬å¥ç¾è®­ç»ƒä¸­çš„ç»„æ•°å’Œæ¬¡æ•°ä½¿ç”¨è¦ä¸¥æ ¼æŒæ¡è¦ç‚¹ï¼Œä½¿å±€éƒ¨è‚Œè‚‰æ„Ÿåˆ°å®Œå…¨æ”¶ç¼©æ‰èƒ½è¾¾åˆ°æœ€å¥½çš„è®­ç»ƒæ•ˆæœã€‚è€Œé‡‡ç”¨å¤§é‡é‡è®­ç»ƒæ˜¯å¢é•¿å›´åº¦çš„å¥½æ–¹æ³•ï¼Œå¿«é€ŸåŸåˆ™èƒ½ä½¿è®­ç»ƒæ›´åŠ å®Œç¾ã€‚å¿«é€ŸåŸåˆ™å¿…é¡»æœ‰é«˜çº§è®­ç»ƒé˜¶æ®µçš„æŠ€æœ¯åŸºç¡€ï¼Œç»“åˆå¤§é‡é‡è®­ç»ƒåŒæ—¶è¿›è¡Œï¼ˆè¶…è¿‡75ï¼…~80ï¼…é‡é‡ï¼‰ï¼Œä¸”åŠ¨ä½œå†³ä¸èƒ½å˜å½¢ï¼Œæˆ–åŠ©åŠ›ã€‚å¿«é€ŸåŸåˆ™æœ€å¥½æ˜¯åœ¨å¹³æ—¶è®­ç»ƒå‘¨æœŸé›†ä¸­å¢é•¿åŠ›é‡å’Œè‚Œè‚‰å›´åº¦çš„æ—©æœŸä½¿ç”¨ã€‚</li>\n<li>æ³¨ï¼šé€šå¸¸åœ¨å‘å±•åŠ›é‡è®­ç»ƒè¯¾ç¨‹æˆ–å‡è„‚è®­ç»ƒè¯¾ç¨‹ä¸­ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n<li><p><strong>äº¤å‰è®­ç»ƒåŸåˆ™(Staggered Sets principle)</strong></p>\n<ul>\n<li>æ˜¯ä¼˜å…ˆè®­ç»ƒåŸåˆ™çš„ä¸€ç§é«˜çº§å½¢å¼ã€‚æŠŠè¾ƒå°ä¸”å‘å±•è¾ƒæ…¢éƒ¨ä½çš„è‚Œè‚‰ç©¿æ’åœ¨é‡ç‚¹è¦ç»ƒçš„å¤§è‚Œè‚‰ç¾¤ä¸­ç»ƒä¹ ï¼Œæˆ–è´¯ç©¿åœ¨ä¸»è¦å¤§è‚Œè‚‰ç¾¤ä¼—é”»ç‚¼ã€‚é€šå¸¸äº¤å‰è®­ç»ƒçš„éƒ¨ä½è¦æ±‚ç›¸éš”è¾ƒè¿œï¼Œä»¥å…ç›¸äº’å½±å“ï¼Œå‰è‡‚ã€é¢ˆéƒ¨ã€å°è…¿ã€æ–œæ–¹è‚Œç­‰éƒ½æ˜¯é‡‡ç”¨äº¤å‰è®­ç»ƒè¾ƒå¥½çš„å€™è¡¥éƒ¨ä½ã€‚æŠŠäº¤å‰è®­ç»ƒæ”¾åœ¨æœ€å‰é¢è¿å¯ä»¥ä½¿ç²¾åŠ›æ›´å¥½åœ°é›†ä¸­åœ¨æœ€é‡è¦éƒ¨ä½çš„è‚Œè‚‰ç¾¤ä¸Šã€‚</li>\n<li>æ³¨ï¼šé€‚ç”¨äºå…·æœ‰è¾ƒé«˜è®­ç»ƒæ°´å¹³ä¸”æ—¶é—´ä¸è¶³è€…ï¼Œæˆ–èµ›å‰å‡è„‚è€…ä½¿ç”¨ï¼Œä½†ä¸å®œç»å¸¸ä½¿ç”¨ã€‚</li>\n</ul>\n</li>\n</ol>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":["å¥èº«"],"tags":["å¤§ä¿å¥"]},{"title":"Android Performance Patterns - åºè¨€","url":"https://lilei.pro/2016/02/18/Android-Performance-Patterns-åºè¨€/","content":"<hr>\n<p><strong>Android Performance Patterns</strong> æ˜¯ <strong>Android Developers</strong> åœ¨youtubeä¸Šå‘å¸ƒçš„ä¸€ç³»åˆ—Androidæ€§èƒ½ä¼˜åŒ–å°è§†é¢‘ï¼Œæ¯ä¸€éƒ¨éƒ½ä¸è¶…è¿‡5åˆ†é’Ÿï¼Œç›®å‰ä¸ºæ­¢å‘å¸ƒåˆ°äº†Season 5ï¼Œå…±73éƒ¨ã€‚</p>\n<p><img src=\"../img/160218_app_preface/logo.png\" alt=\"\"></p>\n<h4 id=\"æ’­æ”¾åˆ—è¡¨åœ°å€ï¼šlinkï¼ˆè§†é¢‘ä¸‹æ–¹æœ‰å­—å¹•å¼€å…³ï¼Œä½ ä¹Ÿå¯ä»¥ç‚¹å‡»é”®ç›˜ä¸Šçš„Cé”®æ¥æ“ä½œå­—å¹•ï¼‰\"><a href=\"#æ’­æ”¾åˆ—è¡¨åœ°å€ï¼šlinkï¼ˆè§†é¢‘ä¸‹æ–¹æœ‰å­—å¹•å¼€å…³ï¼Œä½ ä¹Ÿå¯ä»¥ç‚¹å‡»é”®ç›˜ä¸Šçš„Cé”®æ¥æ“ä½œå­—å¹•ï¼‰\" class=\"headerlink\" title=\"æ’­æ”¾åˆ—è¡¨åœ°å€ï¼šlinkï¼ˆè§†é¢‘ä¸‹æ–¹æœ‰å­—å¹•å¼€å…³ï¼Œä½ ä¹Ÿå¯ä»¥ç‚¹å‡»é”®ç›˜ä¸Šçš„Cé”®æ¥æ“ä½œå­—å¹•ï¼‰\"></a>æ’­æ”¾åˆ—è¡¨åœ°å€ï¼š<a href=\"https://www.youtube.com/playlist?list=PLWz5rJ2EKKc9CBxr3BVjPTPoDPLdPIFCE\" target=\"_blank\" rel=\"noopener\">link</a>ï¼ˆè§†é¢‘ä¸‹æ–¹æœ‰å­—å¹•å¼€å…³ï¼Œä½ ä¹Ÿå¯ä»¥ç‚¹å‡»é”®ç›˜ä¸Šçš„<code>C</code>é”®æ¥æ“ä½œå­—å¹•ï¼‰</h4><hr>\n<a id=\"more\"></a>\n<h2 id=\"ç›®å½•\"><a href=\"#ç›®å½•\" class=\"headerlink\" title=\"ç›®å½•\"></a>ç›®å½•</h2><h3 id=\"Season-5\"><a href=\"#Season-5\" class=\"headerlink\" title=\"Season 5\"></a>Season 5</h3><blockquote>\n<table>\n<thead>\n<tr>\n<th>é“¾æ¥</th>\n<th>æ ‡é¢˜</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"../../../../2016/02/23/Android-Performance-Patterns-s5ep1-Threading-Performance-101\">s5ep1</a></td>\n<td>Threading Performance 101</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/23/Android-Performance-Patterns-s5ep2-Understanding-Android-Threading\">s5ep2</a></td>\n<td>Understand Android Threading</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/23/Android-Performance-Patterns-s5ep3-Memory-And-Threading\">s5ep3</a></td>\n<td>Memory &amp; Threading</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/23/Android-Performance-Patterns-s5ep4-Good-AsyncTask-Hunting\">s5ep4</a></td>\n<td>Good AsyncTask Hunting</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/24/Android-Performance-Patterns-s5ep5-Getting-A-HandlerThread\">s5ep5</a></td>\n<td>Getting a HandlerThread</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/24/Android-Performance-Patterns-s5ep6-Swimming-In-ThreadPools\">s5ep6</a></td>\n<td>Swimming in Threadpools</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/24/Android-Performance-Patterns-s5ep7-The-Zen-Of-IntentService\">s5ep7</a></td>\n<td>The Zen of IntentService</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/25/Android-Performance-Patterns-s5ep8-Threading-And-Loaders\">s5ep8</a></td>\n<td>Threading and Loaders</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/25/Android-Performance-Patterns-s5ep9-The-Importance-Of-Thread-Priority\">s5ep9</a></td>\n<td>The Importance of Thread Priority</td>\n</tr>\n<tr>\n<td><a href=\"../../../../2016/02/25/Android-Performance-Patterns-s5ep10-Profile-GPU-Rendering\">s5ep10</a></td>\n<td>Profile GPU Rendering : M Update</td>\n</tr>\n</tbody>\n</table>\n</blockquote>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","Android Performance Patterns"]},{"title":"ProGitè¯»ä¹¦ç¬”è®°ï¼ˆChapter3ï¼‰","url":"https://lilei.pro/2016/02/17/ProGitè¯»ä¹¦ç¬”è®°Chapter3/","content":"<hr>\n<h3 id=\"Chapter-3-Git-Branching\"><a href=\"#Chapter-3-Git-Branching\" class=\"headerlink\" title=\"Chapter 3. Git Branching\"></a>Chapter 3. Git Branching</h3><p>æœ¬ç« è®²è§£Gitåˆ†æ”¯åŠŸèƒ½å®ç°çš„åŸºæœ¬åŸç†ã€mergeæ“ä½œã€rebaseæ“ä½œç­‰ç­‰</p>\n<a id=\"more\"></a>\n<h4 id=\"åŸºæœ¬æ€æƒ³ï¼šsnapshot\"><a href=\"#åŸºæœ¬æ€æƒ³ï¼šsnapshot\" class=\"headerlink\" title=\"åŸºæœ¬æ€æƒ³ï¼šsnapshot\"></a>åŸºæœ¬æ€æƒ³ï¼šsnapshot</h4><p>é¦–å…ˆè¦ç†è§£ï¼Œä¸åŒäºå…¶å®ƒVCSï¼Œå¯¹äºç‰ˆæœ¬ä¹‹é—´çš„æäº¤ï¼ŒGitå­˜å‚¨çš„ä¸æ˜¯diffï¼Œè€Œæ˜¯snapshotã€‚å¯¹äºä¸‹é¢è¿™æ ·ä¸€æ¬¡commitï¼ŒGitä¼šç”Ÿæˆ5ä¸ªæ–‡ä»¶</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git add README test.rb LICENSE</span><br><span class=\"line\">$ git commit -m <span class=\"string\">'The initial commit of my project'</span></span><br></pre></td></tr></table></figure>\n<p>ç”Ÿæˆä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼š<code>98ca9</code>è®°å½•äº†æœ¬æ¬¡commitçš„ä¿¡æ¯ï¼ˆcommitterã€dateã€messageç­‰ï¼‰ï¼Œå¹¶æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘treeï¼Œtreeä¸­åŒ…å«æœ¬æ¬¡commitä¸­æ”¹åŠ¨çš„å…¨éƒ¨æ–‡ä»¶snapshot</p>\n<p><img src=\"/img/160218_pro_git_c3/commit-and-tree.png\" alt=\"\"></p>\n<blockquote>\n<p>A branch in Git is simply a lightweight movable pointer to one of these commits.</p>\n</blockquote>\n<p>è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨Gitä¸­ï¼Œåˆ›å»ºã€åˆ é™¤ã€åˆ‡æ¢åˆ†æ”¯çš„æ“ä½œéƒ½å¾ˆå¿«é€Ÿã€‚</p>\n<h4 id=\"åˆ›å»ºåˆ†æ”¯\"><a href=\"#åˆ›å»ºåˆ†æ”¯\" class=\"headerlink\" title=\"åˆ›å»ºåˆ†æ”¯\"></a>åˆ›å»ºåˆ†æ”¯</h4><p>Gitä½¿ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºåˆ†æ”¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch testing</span><br></pre></td></tr></table></figure>\n<p>åˆ›å»ºåçš„<code>testing</code>åˆ†æ”¯ï¼Œè·Ÿ<code>master</code>éƒ½æŒ‡å‘åŒä¸€ä¸ªSnapshot</p>\n<p><img src=\"/img/160218_pro_git_c3/two-branches.png\" alt=\"\"></p>\n<p>é‚£ä¹ˆGitå¦‚ä½•çŸ¥é“å½“å‰ä½ åœ¨ç¼–è¾‘çš„æ˜¯å“ªä¸€ä¸ªåˆ†æ”¯å‘¢ï¼Ÿç”¨<code>HEAD</code>ï¼ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„å‘½ä»¤åï¼Œå†…éƒ¨çš„åˆ†æ”¯æ˜¯è¿™æ ·çš„</p>\n<p><img src=\"/img/160218_pro_git_c3/head-to-master.png\" alt=\"\"></p>\n<p>å¯ä»¥åœ¨<code>git log</code>ä¸­ä½¿ç”¨<code>--decorate</code>å‚æ•°æ¥è§‚å¯Ÿå½“å‰<code>HEAD</code>åˆ†æ”¯ã€‚ï¼ˆè¿™é‡Œæ¨èä¸€ä¸‹zshï¼Œè‡ªåŠ¨æ ‡ç¤ºå½“å‰<code>HEAD</code>ï¼Œéå¸¸æ–¹ä¾¿ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --oneline --decorate</span><br><span class=\"line\">f30ab (HEAD -&gt; master, testing) add feature <span class=\"comment\">#32 - ability to add new formats to the central interface</span></span><br><span class=\"line\">34ac2 Fixed bug <span class=\"comment\">#1328 - stack overflow under certain conditions</span></span><br><span class=\"line\">98ca9 The initial commit of my project</span><br></pre></td></tr></table></figure>\n<h4 id=\"åˆ‡æ¢åˆ†æ”¯\"><a href=\"#åˆ‡æ¢åˆ†æ”¯\" class=\"headerlink\" title=\"åˆ‡æ¢åˆ†æ”¯\"></a>åˆ‡æ¢åˆ†æ”¯</h4><p>ä½¿ç”¨<code>git checkout [branch_name]</code>æ¥åˆ‡æ¢åˆ†æ”¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout master</span><br></pre></td></tr></table></figure>\n<p><img src=\"/img/160218_pro_git_c3/checkout-master.png\" alt=\"\"></p>\n<p>åˆ›å»º&amp;åˆ‡æ¢åˆ†æ”¯å¯ä»¥æ”¾åœ¨ä¸€ä¸ªå‘½ä»¤é‡Œå®Œæˆï¼š<code>git checkout -b [branch_name]</code>ï¼Œä½œç”¨æ˜¯åŸºäºå½“å‰<code>HEAD</code>åˆ‡å‡ºä¸€ä¸ªåä¸º<code>branch_name</code>çš„æ–°åˆ†æ”¯ï¼Œå¹¶ä¸”å°†<code>HEAD</code>åˆ‡æ¢åˆ°è¯¥æ–°åˆ†æ”¯ä¸Šã€‚</p>\n<h4 id=\"Basic-Branching-and-Merging\"><a href=\"#Basic-Branching-and-Merging\" class=\"headerlink\" title=\"Basic Branching and Merging\"></a>Basic Branching and Merging</h4><p>æƒ³è±¡ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„åˆ†æ”¯æ¨¡å‹ï¼šå½“ä½ å¼€å‘æŸä¸ªåŠŸèƒ½æ—¶ï¼ˆiss53ï¼‰ï¼Œçªç„¶çº¿ä¸ŠåŸºäºmasteråˆ†æ”¯çš„ä»£ç çˆ†å‡ºä¸€ä¸ªbugï¼Œæ­¤æ—¶å¿…é¡»è¦è¿›è¡Œhotfixï¼Œå¹¶ä¸”åœ¨å®Œæˆhotfixåï¼Œå°†hotfixçš„å†…å®¹åˆå¹¶å›masterï¼Œæœ€åå†åˆ‡æ¢å›iss53åˆ†ä¹‹ç»§ç»­è¿›è¡ŒåŠŸèƒ½å¼€å‘ã€‚</p>\n<p><img src=\"/img/160218_pro_git_c3/basic-branching-4.png\" alt=\"\"></p>\n<p>æ€æ ·è®©masteråˆå¹¶hotfixå‘¢ï¼Ÿåˆ‡æ¢å›masteråˆ†æ”¯ï¼Œä½¿ç”¨<code>git merge hotfix</code>æ¥å®Œæˆ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout master</span><br><span class=\"line\">$ git merge hotfix</span><br><span class=\"line\">Updating f42c576..3a0874c</span><br><span class=\"line\">Fast-forward</span><br><span class=\"line\"> index.html | 2 ++</span><br><span class=\"line\"> 1 file changed, 2 insertions(+)</span><br></pre></td></tr></table></figure>\n<p>çœ‹åˆ°<code>Fast-forward</code>çš„æç¤ºæ²¡æœ‰ï¼Ÿè¿™æ˜¯è¯´ï¼Œmasterçš„æŒ‡é’ˆå·²ç»â€œå‘å‰ç§»åŠ¨åˆ°äº†hotfixæŒ‡é’ˆæ‰€åœ¨ä½ç½®â€ï¼Œå¦‚ä¸‹å›¾ï¼š</p>\n<p> <img src=\"/img/160218_pro_git_c3/basic-branching-5.png\" alt=\"\"></p>\n<p>è¿™ä¸ªæ—¶å€™hotfixå·²ç»å®Œæˆäº†å®ƒçš„ä»»åŠ¡ï¼Œç»§ç»­ç•™ç€å®ƒåªä¼šè®©æˆ‘ä»¬çš„åˆ†æ”¯æ›´åŠ æ··ä¹±ã€‚æœ¬ç€å…”æ­»ç‹—çƒ¹é¸Ÿå°½å¼“è—çš„åŸåˆ™ï¼Œæ¯é…’é‡Šå…µæƒï½æœ€ååˆ‡æ¢å›iss53åˆ†æ”¯ç»§ç»­coding</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch -d hotfix</span><br><span class=\"line\">Deleted branch hotfix (3a0874c).</span><br><span class=\"line\">$ git checkout iss53</span><br><span class=\"line\">Switched to branch <span class=\"string\">\"iss53\"</span></span><br><span class=\"line\">$ vim index.html</span><br><span class=\"line\">$ git commit -a -m <span class=\"string\">'finished the new footer [issue 53]'</span></span><br><span class=\"line\">[iss53 ad82d7a] finished the new footer [issue 53]</span><br><span class=\"line\">1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>\n<p><img src=\"/img/160218_pro_git_c3/basic-branching-6.png\" alt=\"\"></p>\n<h4 id=\"Basic-Merging\"><a href=\"#Basic-Merging\" class=\"headerlink\" title=\"Basic Merging\"></a>Basic Merging</h4><p>ç°åœ¨æˆ‘ä»¬å®Œæˆäº†iss53çš„åŠŸèƒ½å¼€å‘ä¸æµ‹è¯•ï¼Œéœ€è¦å°†ä»£ç åˆå¹¶å›masterï¼Œä»¥å¤‡åç»­ä¸Šçº¿ã€‚å½“ç„¶ï¼Œéœ€è¦å…ˆåˆ‡å›masterï¼Œç„¶åä½¿ç”¨<code>git merge</code>æ¥åˆå¹¶<code>iss53</code>åˆ†æ”¯ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout master</span><br><span class=\"line\">Switched to branch <span class=\"string\">'master'</span></span><br><span class=\"line\">$ git merge iss53</span><br><span class=\"line\">Merge made by the <span class=\"string\">'recursive'</span> strategy.</span><br><span class=\"line\">index.html |    1 +</span><br><span class=\"line\">1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure>\n<p>åˆå¹¶å‰</p>\n<p><img src=\"/img/160218_pro_git_c3/basic-merging-1.png\" alt=\"\"></p>\n<p>åˆå¹¶å</p>\n<p><img src=\"/img/160218_pro_git_c3/basic-merging-2.png\" alt=\"\"></p>\n<p>ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºæ¥ï¼ŒGitåŸºäºmasterä¸iss53çš„æäº¤å†å²ï¼Œæ–°åˆ›å»ºäº†ä¸€ä¸ªcommitï¼C6ï¼Œå›¾ä¸­æ­¤å¤„æœ‰è¯¯ï¼Œæœ€å³è¾¹masteræŒ‡å‘çš„åº”è¯¥ä¸ºC6ã€‚æƒ¯ä¾‹ï¼Œå¸ç£¨æ€é©´ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$git</span> branch -d iss53</span><br></pre></td></tr></table></figure>\n<h4 id=\"Basic-Merge-Conflicts\"><a href=\"#Basic-Merge-Conflicts\" class=\"headerlink\" title=\"Basic Merge Conflicts\"></a>Basic Merge Conflicts</h4><p>åœ¨å¹¶è¡Œå¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸¤ä¸ªå¼€å‘è€…åŒæ—¶ä¿®æ”¹äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œåœ¨åˆå¹¶æ—¶å‘ç”Ÿå†²çªçš„åœºæ™¯ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ ·</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git merge iss53</span><br><span class=\"line\">Auto-merging index.html</span><br><span class=\"line\">CONFLICT (content): Merge conflict <span class=\"keyword\">in</span> index.html</span><br><span class=\"line\">Automatic merge failed; fix conflicts and <span class=\"keyword\">then</span> commit the result.</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨<code>git status</code>æŸ¥çœ‹å½“å‰åˆå¹¶è¿›ç¨‹ä¸çŠ¶æ€</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git status</span><br><span class=\"line\">On branch master</span><br><span class=\"line\">You have unmerged paths.</span><br><span class=\"line\">  (fix conflicts and run <span class=\"string\">\"git commit\"</span>)</span><br><span class=\"line\"></span><br><span class=\"line\">Unmerged paths:</span><br><span class=\"line\">  (use <span class=\"string\">\"git add &lt;file&gt;...\"</span> to mark resolution)</span><br><span class=\"line\"></span><br><span class=\"line\">    both modified:      index.html</span><br><span class=\"line\"></span><br><span class=\"line\">no changes added to commit (use <span class=\"string\">\"git add\"</span> and/or <span class=\"string\">\"git commit -a\"</span>)</span><br></pre></td></tr></table></figure>\n<p>åŸæ¥æ˜¯<code>index.html</code>è¢«åˆ†åˆ«ä¿®æ”¹äº†2æ¬¡ï¼Œå¯¼è‡´gitæ— æ³•è‡ªåŠ¨åˆå¹¶ã€‚ä½¿ç”¨ç¼–è¾‘å™¨æˆ–è€…IDEæ‰“å¼€è¿™ä¸ªæ–‡ä»¶åï¼Œèƒ½çœ‹åˆ°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:index.html</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"footer\"</span>&gt;contact : email.support@github.com&lt;/div&gt;</span><br><span class=\"line\">=======</span><br><span class=\"line\">&lt;div id=<span class=\"string\">\"footer\"</span>&gt;</span><br><span class=\"line\"> please contact us at support@github.com</span><br><span class=\"line\">&lt;/div&gt;</span><br><span class=\"line\">&gt;&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html</span><br></pre></td></tr></table></figure>\n<p>Gitç”¨éå¸¸å®¹æ˜“è¯†åˆ«çš„æ–¹å¼æ ‡ç¤ºæœ‰å†²çªçš„ä»£ç ï¼š<code>&lt;&lt;&lt;&lt;</code>å’Œ<code>====</code>ä¹‹é—´çš„æ˜¯HEADçš„æ”¹åŠ¨ï¼ˆä¹Ÿå°±æ˜¯masterï¼‰ï¼Œ<code>====</code>å’Œ<code>&gt;&gt;&gt;&gt;</code>ä¹‹é—´çš„æ˜¯å¦ä¸€ä¸ªåˆ†æ”¯ï¼ˆiss53ï¼‰çš„æ”¹åŠ¨ï¼Œä¿ç•™æƒ³ä¿ç•™çš„å³å¯ã€‚</p>\n<p>å¦‚æœå–œæ¬¢å›¾å½¢åŒ–çš„ç•Œé¢ï¼Œä½¿ç”¨<code>git mergetool</code>æ¥æ‰“å¼€ï¼ŒGité»˜è®¤çš„æ˜¯<code>opendiff</code>ã€‚<br>ä¿®æ”¹å®Œæˆåï¼Œæ–‡ä»¶å¤„äº<code>modified</code>çŠ¶æ€ï¼Œéœ€è¦å…ˆç”¨<code>add</code>å°†å…¶å˜ä¸º<code>staged</code>ï¼Œç„¶ååœ¨commitä¸­æ³¨æ˜è¿™æ¬¡mergeã€‚</p>\n<h4 id=\"Branch-Management\"><a href=\"#Branch-Management\" class=\"headerlink\" title=\"Branch Management\"></a>Branch Management</h4><p>æŸ¥çœ‹æœ¬åœ°branchï¼Œä½¿ç”¨<code>git branch</code>ï¼Œå¢åŠ <code>-r</code>å‚æ•°ä»¥æŸ¥çœ‹è¿œç«¯ä»“åº“branchï¼Œå¢åŠ <code>-v</code>å‚æ•°æŸ¥çœ‹æœ€æ–°ä¸€æ¬¡çš„commit</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch</span><br><span class=\"line\">  iss53</span><br><span class=\"line\">* master</span><br><span class=\"line\">  testing</span><br><span class=\"line\">$ git branch -v</span><br><span class=\"line\">  iss53   93b412c fix javascript issue</span><br><span class=\"line\">* master  7a98805 Merge branch <span class=\"string\">'iss53'</span></span><br><span class=\"line\">  testing 782fd34 add scott to the author list <span class=\"keyword\">in</span> the readmes</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æƒ³çœ‹å“ªäº›åˆ†æ”¯å·²ç»è¢«mergeè¿›äº†HEADä¸­ï¼Œç”¨<code>--merged</code>ï¼Œå‰é¢æ²¡æœ‰æ˜Ÿå·<code>*</code>çš„åˆ†æ”¯æ˜¯å¯ä»¥ç”¨<code>git branch -d</code>åˆ é™¤çš„ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch --merged</span><br><span class=\"line\">  iss53</span><br><span class=\"line\">* master</span><br></pre></td></tr></table></figure>\n<p>æŸ¥çœ‹æ²¡æœ‰mergeçš„åˆ†æ”¯ï¼Œç”¨<code>--no-merged</code>å‚æ•°ã€‚å¯¹äºè¿™æ ·çš„åˆ†æ”¯ï¼Œå½“ä½ è¯•å›¾ä½¿ç”¨<code>git branch -d</code>è¿›è¡Œåˆ é™¤æ—¶ï¼ŒGitä¼šç»™å‡ºæç¤ºï¼Œå‘Šè¯‰ä½ è¿™æ ·çš„æ“ä½œä¸è¢«å…è®¸ã€‚ï¼ˆä½ å¯ä»¥ä½¿ç”¨<code>git branch -D</code>æ¥å¼ºåˆ¶åˆ é™¤ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch --no-merged</span><br><span class=\"line\">  testing</span><br><span class=\"line\">$ git branch -d testing</span><br><span class=\"line\">error: The branch <span class=\"string\">'testing'</span> is not fully merged.</span><br><span class=\"line\">If you are sure you want to delete it, run <span class=\"string\">'git branch -D testing'</span>.</span><br></pre></td></tr></table></figure>\n<h4 id=\"Remote-Branches\"><a href=\"#Remote-Branches\" class=\"headerlink\" title=\"Remote Branches\"></a>Remote Branches</h4><p>å¯¹äºè¿œç«¯ä»“åº“çš„æ¯ä¸€ä¸ªåˆ†æ”¯ï¼Œæœ¬åœ°éƒ½æœ‰ä¸€ä¸ªä¸å…¶å¯¹åº”çš„åˆ†æ”¯ï¼Œç”¨<code>(remote)/(branch)</code>æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚<code>origin/master</code>ã€‚é€šå¸¸æˆ‘ä»¬çœ‹åˆ°remoteçš„åå­—æ˜¯originï¼Œä½†è¿™ä¸æ˜¯å›ºå®šçš„ï¼Œä½ å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ›´æ”¹è¿™ä¸ªåå­—<code>git clone -o booyah</code>ï¼Œè¿™æ ·ä½ åˆ›å»ºçš„å°±æ˜¯<code>booyah/master</code>ã€‚<br>æœ€å¼€å§‹cloneå¹¶checkoutæ—¶ï¼Œ<code>origin/master</code>ä¸<code>master</code>æŒ‡å‘åŒä¸€ä¸ªsnapshot</p>\n<p><img src=\"/img/160218_pro_git_c3/remote-branches-1.png\" alt=\"\"></p>\n<p>åªè¦ä¸fetchï¼Œ<code>origin/master</code>æŒ‡å‘çš„ä½ç½®å°±ä¸ä¼šå˜æ›´ï¼Œ<code>master</code>åˆ†æ”¯ä¼šéšç€commitä¸€ç›´å‘å‰ã€‚</p>\n<p><img src=\"/img/160218_pro_git_c3/remote-branches-2.png\" alt=\"\"></p>\n<p>ä¹Ÿå¯ä»¥æŠŠä¸¤ä¸ªremoteçš„å†å²éƒ½æ‹‰ä¸‹æ¥ï¼Œé…Œæƒ…ä½¿ç”¨</p>\n<p><img src=\"/img/160218_pro_git_c3/remote-branches-5.png\" alt=\"\"></p>\n<h4 id=\"Pushing\"><a href=\"#Pushing\" class=\"headerlink\" title=\"Pushing\"></a>Pushing</h4><p>ä½¿ç”¨<code>git push &lt;remote&gt; &lt;branch&gt;</code>æ¥pushåˆ°è¿œç«¯ä»“åº“ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push origin serverfix</span><br><span class=\"line\">Counting objects: 24, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Delta compression using up to 8 threads.</span><br><span class=\"line\">Compressing objects: 100% (15/15), <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Writing objects: 100% (24/24), 1.91 KiB | 0 bytes/s, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Total 24 (delta 2), reused 0 (delta 0)</span><br><span class=\"line\">To https://github.com/schacon/simplegit</span><br><span class=\"line\"> * [new branch]      serverfix &gt; serverfix</span><br></pre></td></tr></table></figure>\n<p>è¿™å…¶å®æ˜¯ä¸€ä¸ªç¼©å†™ï¼ŒèƒŒåå®Œæ•´çš„å‘½ä»¤æ˜¯<code>git push origin refs/heads/serverfix:refs/heads/serverfix</code>ï¼Œç›´æ¥å¼•ç”¨åŸæ–‡</p>\n<blockquote>\n<p>which means, â€œTake my serverfix local branch and push it to update the remoteâ€™s serverfix branch.â€</p>\n</blockquote>\n<p>åˆ†æ”¯åå‰é¢çš„<code>refs/heads</code>æ˜¯Gitå†…éƒ¨æœºåˆ¶ï¼Œä½ ä¹Ÿå¯ä»¥çœç•¥è¿™ä¸ªè·¯å¾„ï¼Œå†™ä½œ<code>serverfix:serverfix</code>ï¼Œæˆ–è€…ä½ è§‰å¾—åœ¨remoteç«¯ä¸å¸Œæœ›å«serverfixçš„åå­—ï¼Œé‚£å°±æ”¹ä¸€ä¸ªä½ å–œæ¬¢çš„ï¼<code>git push origin serverfix:awesomebranch</code></p>\n<p>ä½¿ç”¨<code>git checkout -b &lt;branch_name&gt; &lt;remote&gt;/&lt;branch_name&gt;</code>æ¥åˆ›å»ºä¸€ä¸ªåŸºäºè¿œç«¯çš„æœ¬åœ°åˆ†æ”¯ï¼Œè¿™ç§åˆ†æ”¯è¢«å«åš<code>tracking branch</code>ï¼Œè¢«è·Ÿè¸ªçš„é‚£ä¸ªè¿œç«¯branchå«åš<code>upstream branch</code>ã€‚æœ‰äº†è¿™å±‚å…³ç³»åœ¨é‡Œé¢ï¼Œå½“ä½ è¿›è¡Œ<code>pull/push</code>æ—¶ï¼ŒGitå°±è‡ªç„¶çŸ¥é“è¦æ“ä½œå“ªä¸€ä¸ªåˆ†æ”¯äº†ã€‚</p>\n<p>ç”±äº<code>git checkout -b &lt;branch_name&gt; &lt;remote&gt;/&lt;branch_name&gt;</code>å®åœ¨æ˜¯å¤ªå¸¸ç”¨äº†ï¼ŒGitä¸ºå®ƒæä¾›äº†ä¸€ä¸ªç¼©å†™<code>git checkout --track &lt;remote&gt;/&lt;branch&gt;</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout --track origin/serverfix</span><br><span class=\"line\">Branch serverfix <span class=\"built_in\">set</span> up to track remote branch serverfix from origin.</span><br><span class=\"line\">Switched to a new branch <span class=\"string\">'serverfix'</span></span><br></pre></td></tr></table></figure>\n<p>ç”šè‡³ï¼ŒGitæä¾›äº†ä¸€ä¸ªç¼©å†™çš„ç¼©å†™ï¼š<code>git checkout &lt;branch&gt;</code>ï¼Œè¿™ä¸ªå‘½ä»¤è¦æ±‚æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ä¿æŒåå­—ä¸€è‡´ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout serverfix</span><br><span class=\"line\">Branch serverfix <span class=\"built_in\">set</span> up to track remote branch serverfix from origin.</span><br><span class=\"line\">Switched to a new branch <span class=\"string\">'serverfix'</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœå°šæœªç»™æœ¬åœ°çš„ä¸€ä¸ªåˆ†æ”¯æŒ‡å®šè¿œç«¯åˆ†æ”¯ï¼Œä½¿ç”¨<code>-u</code>å‚æ•°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch -u origin/serverfix</span><br><span class=\"line\">Branch serverfix <span class=\"built_in\">set</span> up to track remote branch serverfix from origin.</span><br></pre></td></tr></table></figure>\n<p>å°æŠ€å·§ï¼šå¯ä»¥ç”¨<code>{@u}</code>æˆ–è€…<code>@{upstream}</code>æ¥ä»£æ›¿upstreamï¼Œæ¯”å¦‚å½“ä½ å¤„åœ¨masteråˆ†æ”¯æ—¶ï¼Œå¯ä»¥ç”¨<code>git merge @{u}</code>æ¥ä»£æ›¿<code>git merge origin/master</code></p>\n<p>å¦‚æœä½ æƒ³äº†è§£æœ¬åœ°åˆ†æ”¯çš„trackæƒ…å†µï¼ˆåˆ†æ”¯ã€aheadã€behindï¼‰ï¼Œä½¿ç”¨<code>git branch -vv</code>ï¼Œè®°å¾—å…ˆ<code>git fetch --all</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git branch -vv</span><br><span class=\"line\">  iss53     7e424c3 [origin/iss53: ahead 2] forgot the brackets</span><br><span class=\"line\">  master    1ae2a45 [origin/master] deploying index fix</span><br><span class=\"line\">* serverfix f8674d9 [teamone/server-fix-good: ahead 3, behind 1] this should <span class=\"keyword\">do</span> it</span><br><span class=\"line\">  testing   5ea463a trying something new</span><br></pre></td></tr></table></figure>\n<h4 id=\"Pulling\"><a href=\"#Pulling\" class=\"headerlink\" title=\"Pulling\"></a>Pulling</h4><p>ç›¸æ¯”äº<code>fetch</code>æŠŠè¿œç«¯åˆ†æ”¯æ›´æ–°åˆ°æœ¬åœ°ï¼Œ<code>pull</code>å‘½ä»¤æ›´è¿›äº†ä¸€æ­¥ï¼Œå®Œæˆäº†<code>merge</code>çš„åŠŸèƒ½ã€‚<br>pull = fetch + mergeã€‚ç¬”è€…èµåŒä¹¦ä¸­çš„è§‚ç‚¹ï¼Œè¿˜æ˜¯å•ç‹¬ä½¿ç”¨fetch&amp;mergeçš„å¥½ã€‚</p>\n<blockquote>\n<p>Generally itâ€™s better to simply use the <code>fetch</code> and <code>merge</code> commands explicitly as the magic of <code>git pull</code> can often be confusing.</p>\n</blockquote>\n<h4 id=\"Deleting-Remote-Branches\"><a href=\"#Deleting-Remote-Branches\" class=\"headerlink\" title=\"Deleting Remote Branches\"></a>Deleting Remote Branches</h4><p>ä½¿ç”¨<code>git push origin --delete &lt;branch_name&gt;</code>æ¥åˆ é™¤æœåŠ¡å™¨ä¸Šçš„æŸä¸ªåˆ†æ”¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push origin --delete serverfix</span><br><span class=\"line\">To https://github.com/schacon/simplegit</span><br><span class=\"line\"> - [deleted]         serverfix</span><br></pre></td></tr></table></figure>\n<p> è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œ<code>git push origin :&lt;branch_name&gt;</code>ï¼Œèƒ½èµ·åˆ°åŒæ ·çš„ä½œç”¨</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push origin :feature/8.0.0_bugfix_leili</span><br><span class=\"line\">To git@code.dianpingoa.com:mobile/android-nova-booking.git</span><br><span class=\"line\"> - [deleted]         feature/8.0.0_bugfix_leili</span><br></pre></td></tr></table></figure>\n<p>è®°ä½ï¼Œæ‰€åˆ é™¤çš„â€œåˆ†æ”¯â€æœ¬è´¨ä¸Šåªæ˜¯â€œæŒ‡é’ˆâ€ï¼Œæ‰€æœ‰çš„ä»£ç snapshotä¾æ—§ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥éšæ—¶checkå‡ºæ¥</p>\n<h4 id=\"Rebasing\"><a href=\"#Rebasing\" class=\"headerlink\" title=\"Rebasing\"></a>Rebasing</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å­¦ä¹ ä¸Mergeåˆ†åº­æŠ—ç¤¼çš„å¦ä¸€ä¸ªå¼ºæœ‰åŠ›çš„åŠŸèƒ½â€”â€”Rebaseã€‚ä¸¤è€…åŒæ˜¯å°†ä¸åŒåˆ†æ”¯ä¸Šçš„æäº¤åˆå¹¶åˆ°ä¸€èµ·çš„åŠŸèƒ½ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿå®¹ç¬”è€…ç»†ç»†é“æ¥ã€‚<br>é¦–å…ˆæ¥çœ‹ä¸€ä¸ªç†Ÿæ‚‰çš„åœºæ™¯ï¼Œæœ‰<code>master</code>å’Œ<code>experiment</code>ä¸¤ä¸ªåˆ†æ”¯ï¼Œå¯¹mergeè€Œè¨€ï¼Œå¦‚æœåœ¨<code>master</code>åˆ†æ”¯çš„åŸºç¡€ä¸Šï¼Œå¯¹<code>experiment</code>è¿›è¡Œmergeï¼ŒGitä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„commitï¼ˆC5ï¼‰ï¼ŒåŒ…å«äº†ä¸¤ä¸ªåˆ†æ”¯æœ€è¿‘çš„å…±åŒç¥–å…ˆï¼ˆC2ï¼‰ä»¥æ¥å‘ç”Ÿçš„æ‰€æœ‰å˜æ›´ï¼ˆC4å’ŒC3ï¼‰ï¼Œæœ€åæŠŠ<code>master</code>çš„æŒ‡é’ˆæŒ‡å‘C5</p>\n<p><img src=\"/img/160218_pro_git_c3/basic-rebase-1.png\" alt=\"\"><br><img src=\"/img/160218_pro_git_c3/basic-rebase-2.png\" alt=\"\"></p>\n<p>è€Œå¯¹äºrebaseï¼Œæˆ‘ä»¬è¿™ä¹ˆæ“ä½œã€‚æ³¨æ„<code>HEAD</code>æŒ‡å‘çš„æ˜¯<code>experiment</code>åˆ†æ”¯ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout experiment</span><br><span class=\"line\">$ git rebase master</span><br><span class=\"line\">First, rewinding head to replay your work on top of it...</span><br><span class=\"line\">Applying: added staged <span class=\"built_in\">command</span></span><br></pre></td></tr></table></figure>\n<p>éå¸¸ç¥å¥‡åœ°ï¼ŒC4è¿™ä¸ªcommitæ¶ˆå¤±äº†ï¼ï¼ï¼ï¼Œå–è€Œä»£ä¹‹ï¼ŒGitåœ¨C3åé¢åˆ›å»ºäº†C4â€™ï¼ŒåŒæ—¶å°†<code>experiment</code>çš„æŒ‡é’ˆè½¬ç§»åˆ°äº†è¿™é‡Œã€‚æ•´ä¸ªæäº¤å†å²å˜æˆäº†ä¸€æ ¹ç›´çº¿ï¼Œæ¸…çˆ½äº†è®¸å¤šã€‚</p>\n<p><img src=\"/img/160218_pro_git_c3/basic-rebase-3.png\" alt=\"\"></p>\n<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®©<code>master</code>    move forwardï¼Œä»¥åˆå¹¶<code>experiment</code>å¸¦æ¥çš„æ”¹åŠ¨ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout master</span><br><span class=\"line\">$ git merge experiment</span><br></pre></td></tr></table></figure>\n<p><img src=\"/img/160218_pro_git_c3/basic-rebase-4.png\" alt=\"\"></p>\n<p>æ³¨æ„ï¼è™½ç„¶<code>merge</code>ä¸<code>rebase</code>çœ‹èµ·æ¥éƒ½æ˜¯æŠŠä¸¤ä¸ªåˆ†æ”¯ä¸Šçš„æ”¹åŠ¨åˆå¹¶åˆ°ä¸€èµ·ï¼Œä½†ä¸€ä¸ªæ˜¯â€œåŒæ—¶åˆå¹¶Aå’ŒBâ€ï¼Œä¸€ä¸ªæ˜¯â€œå°†Aåˆå¹¶åˆ°Bâ€ï¼Œä»”ç»†ä½“ä¼šå…¶ä¸­çš„ä¸åŒã€‚</p>\n<blockquote>\n<p>Rebasing replays changes from one line of work onto another in the order they were introduced, whereas merging takes the endpoints and merges them together.</p>\n</blockquote>\n<h4 id=\"æœ‰è¶£çš„Rebasing\"><a href=\"#æœ‰è¶£çš„Rebasing\" class=\"headerlink\" title=\"æœ‰è¶£çš„Rebasing\"></a>æœ‰è¶£çš„Rebasing</h4><p><img src=\"/img/160218_pro_git_c3/interesting-rebase-1.png\" alt=\"\"></p>\n<p>æƒ³è±¡ä¸Šé¢ä¸€ä¸ªåœºæ™¯ï¼Œå¯¹äº<code>master</code> <code>server</code> <code>client</code>ä¸‰ä¸ªåˆ†æ”¯ï¼Œå¦‚æœæˆ‘æƒ³è¦å°†<code>client</code>ä¸Šçš„æ”¹åŠ¨æäº¤åˆ°<code>master</code>ï¼ˆC8å’ŒC9ï¼‰ï¼Œè€Œæš‚æ—¶ä¸æƒ³åˆå¹¶<code>server</code>ä¸Šçš„ä»£ç ï¼Œåº”è¯¥æ€ä¹ˆåšï¼Ÿ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout cient</span><br><span class=\"line\">$ git rebase master</span><br></pre></td></tr></table></figure>\n<p>ä¸Šè¿°è¿™æ ·è‚¯å®šä¸è¡Œï¼Œå› ä¸ºä¼šæŠŠC3å¸¦è¿‡å»ã€‚<br>é’ˆå¯¹è¿™ç§åœºæ™¯ï¼ŒGitä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†è¿™ä¸ªåŠŸèƒ½</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git rebase --onto master server client</span><br></pre></td></tr></table></figure>\n<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹ä¸€å¤´é›¾æ°´ï¼Ÿè¿™éƒ½ä»€ä¹ˆé¬¼å•Šï¼åˆ«æ€¥ï¼Œæˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹è¿™æ®µæŒ‡ä»¤ã€‚</p>\n<blockquote>\n<p>This basically says, â€œCheck out the client branch, figure out the patches from the common ancestor of the <code>client</code> and <code>server</code> branches, and then replay them onto <code>master</code>.â€ </p>\n</blockquote>\n<p>æ˜ç™½äº†å§ï¼ä¸è¿‡ï¼Œè™½ç„¶è¿™çœ‹ä¸Šå»å¾ˆç¥å¥‡ï¼Œç¬”è€…å¯ä¸å¸Œæœ›åœ¨å®é™…çš„å·¥ä½œä¸­ç¢°åˆ°è¿™ç§å¤æ‚çš„åœºæ™¯ã€‚<br>Rebaseåçš„æäº¤å†å²å¦‚å›¾ï¼š</p>\n<p><img src=\"/img/160218_pro_git_c3/interesting-rebase-1.png\" alt=\"\"></p>\n<p>æ¥ä¸‹æ¥è¯¥æ€ä¹ˆåšï¼Œç›¸ä¿¡ä¸ç”¨æˆ‘è¯´ï¼Œä½ ä¹ŸçŸ¥é“äº†â€”â€”æŠŠ<code>master</code> fast forwardè¿‡å»ï½</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout master</span><br><span class=\"line\">$ git merge client</span><br></pre></td></tr></table></figure>\n<p>å½“ä½ å®Œæˆäº†<code>server</code>åˆ†æ”¯çš„å¼€å‘ï¼Œç‹ ç‹ åœ°ç”¨rebaseæŠŠå®ƒç”©åœ¨<code>master</code>è„¸ä¸Šå§ï¼Œ<code>git rebase [basebranch] [topicbranch]</code>â€”â€”å°†<code>topicbranchä¸Š</code>çš„æ”¹åŠ¨åœ¨<code>basebranch</code>ä¸Šé‡æ”¾ï¼ˆchecks out the topic branch (in this case, <code>server</code>) for you and replays it onto the base branch (<code>master</code>)ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git rebase master server</span><br></pre></td></tr></table></figure>\n<p>åˆ é™¤æ— ç”¨åˆ†æ”¯åï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªæ— æ¯”æ¸…çˆ½çš„æäº¤è®°å½•</p>\n<p><img src=\"/img/160218_pro_git_c3/interesting-rebase-5.png\" alt=\"\"></p>\n<h4 id=\"Rebaseçš„é£é™©\"><a href=\"#Rebaseçš„é£é™©\" class=\"headerlink\" title=\"Rebaseçš„é£é™©\"></a>Rebaseçš„é£é™©</h4><p>Rebaseæ˜¯ä¸€ä¸ªæ— æ¯”å¼ºå¤§çš„å·¥å…·ï¼Œå€ŸåŠ©å®ƒï¼Œæˆ‘ä»¬å¯ä»¥å°†é¡¹ç›®æäº¤å†å²æ¢³ç†æˆä¸€æ¡ç›´çº¿ï¼Œç„¶è€Œï¼Œå¦‚æœåº”ç”¨ä¸å½“ï¼Œå®ƒäº§ç”Ÿçš„éº»çƒ¦è¦è¿œè¿œå¤§äºå¸¦æ¥çš„å¥½å¤„ã€‚</p>\n<blockquote>\n<p><strong>Do not rebase commits that exist outside your repository.</strong></p>\n</blockquote>\n<p>ç®€å•çš„è¯´ï¼Œå¦‚æœä¸€ä¸ªcommitå·²ç»è¢«å…¬å¸ƒç»™å…¶ä»–äººä½¿ç”¨ï¼Œé‚£å°±ä¸è¦è¯•å›¾å†rebaseå®ƒã€‚å¦‚æœä½ éµå®ˆäº†è¿™æ¡å‡†åˆ™ï¼Œä¸€åˆ‡å®‰å¥½ï¼›å¯ä¸€æ—¦ä½ è¿åäº†ä»–ï¼Œä½ çš„åŒäº‹å°†ä¼šæ¨ä½ å…¥éª¨â€¦â€¦ä¸‹é¢ç”¨å‡ å¼ å›¾æ¥è¯´æ˜è¿™ç§æ·±åˆ»ä»‡æ¨çš„æ¥æº</p>\n<p>é¦–å…ˆæ˜¯ä¸€ä¸ªç®€å•çš„åˆ†æ”¯æ¨¡å‹ï¼Œteamoneå’Œä½ æ­£åœ¨åˆä½œä¸­ï¼Œæ˜¾ç„¶ä½ çš„å·¥ä½œæ•ˆç‡æ›´é«˜äº›ï¼Œå·²ç»æäº¤äº†C2ã€C3ä¸¤æ¬¡</p>\n<p><img src=\"/img/160218_pro_git_c3/perils-of-rebasing-1.png\" alt=\"\"></p>\n<p>è¿œç«¯ä»“åº“ä¹Ÿæœ‰ä¸€äº›æ›´æ–°ï¼Œè€Œä¸”ä»–ä»¬ç”¨åˆ°äº†mergeï¼ŒçœŸæ˜¯å‰å®³å•Šï¼ä½ å½“ç„¶ä¸ç”˜ç¤ºå¼±ï¼Œç«‹å³æŠŠä»–ä»¬çš„æäº¤mergeäº†è¿‡æ¥ã€‚</p>\n<p><img src=\"/img/160218_pro_git_c3/perils-of-rebasing-2.png\" alt=\"\"></p>\n<p>è¿™æ—¶ï¼Œè¿œç«¯teamå‘ç°mergeä¸å¦‚rebaseå¥½ç”¨ï¼Œä»–ä»¬ä½¿ç”¨éå¸¸é‚ªæ¶çš„<code>git push --force</code>å‘½ä»¤ï¼Œè¦†ç›–æ‰äº†ä»£ç ä»“åº“ä¸­çš„å†å²ï¼Œæ„å›¾æŠ¹æ€æ‰mergeçš„å‡ºç°ã€‚</p>\n<p><img src=\"/img/160218_pro_git_c3/perils-of-rebasing-3.png\" alt=\"\"></p>\n<p>å¤©çœŸçš„ä½ å¹¶æ²¡æœ‰å‘ç°ä»–ä»¬çš„é‚ªæ¶ä¼å›¾ï¼Œå½“ä½ fetchæ—¶å€™ï¼Œå‘ç°è¿œç«¯ä»“åº“æœ‰äº†æ›´æ–°ï¼Œä½ è‡ªç„¶æƒ³å†mergeä¸€æŠŠï¼Œä»¥ä¿æŒæœ€æ–°ä»£ç </p>\n<p><img src=\"/img/160218_pro_git_c3/perils-of-rebasing-4.png\" alt=\"\"></p>\n<p>Boomï¼ç¾éš¾å‘ç”Ÿäº†ï¼Œç”±äºC4å’ŒC4â€™å®é™…ä¸Šæ˜¯ä¸€æ¨¡ä¸€æ ·çš„æ”¹åŠ¨ï¼ˆå®é™…ä¸Šï¼Œå¦‚æœä½ ç”¨<code>git log</code>æ¥æŸ¥çœ‹ï¼Œä½ ä¼šå‘ç°è¿™ä¸¤ä¸ªæäº¤ç”šè‡³æœ‰å®Œå…¨ç›¸åŒçš„authorã€dateã€messageï¼Œå½“ç„¶ä»–ä»¬çš„SHA1æ˜¯ä¸åŒçš„ï¼‰ã€‚è€Œä¸”ï¼Œå°±ç®—ä½ è§£å†³äº†å†²çªï¼ŒæŠŠä½ çš„ä»£ç æ¨é€å›è¿œç«¯æ—¶ï¼Œé‚ªæ¶çš„ä»–ä»¬å‘ç°ï¼ŒåŸæ¥è®©ä»–ä»¬é¿ä¹‹ä¸åŠçš„C4å’ŒC6è¿™ä¸¤ä¸ªæäº¤â€”â€”They are backï¼</p>\n<h4 id=\"Rebase-When-You-Rebase\"><a href=\"#Rebase-When-You-Rebase\" class=\"headerlink\" title=\"Rebase When You Rebase\"></a>Rebase When You Rebase</h4><p>ä¸€æ—¦å‡ºç°äº†ä¸Šé¢çš„æƒ…å†µï¼Œä¸è¦æ…Œï¼ŒGitä¸ºæˆ‘ä»¬æä¾›äº†è§£å†³è¿™ç§é—®é¢˜çš„é€”å¾„ï¼Œé‚£å°±æ˜¯â€”â€”Rebaseï¼è¿™æ—¶ä½ checkoutåˆ°è‡ªå·±çš„<code>master</code>åˆ†æ”¯ä¸Šï¼Œæ‰§è¡Œ<code>git rebase teamone/master</code>ï¼ŒGitä¼šä¸ºä½ åšä»¥ä¸‹äº‹æƒ…ï¼ˆå®åœ¨æ˜¯æ‡’å¾—ç¿»è¯‘äº†ï¼‰</p>\n<ul>\n<li>Determine what work is unique to our branch (C2, C3, C4, C6, C7)</li>\n<li>Determine which are not merge commits (C2, C3, C4)</li>\n<li>Determine which have not been rewritten into the target branch (just C2 and C3, since C4 is the same patch as C4â€™)</li>\n<li>Apply those commits to the top of <code>teamone/master</code></li>\n</ul>\n<p>æœ€åå¾—åˆ°å¦‚å›¾çš„æäº¤å†å²ã€‚éœ€è¦æ³¨æ„ï¼Œåªæœ‰å½“C4å’ŒC4â€™å‡ ä¹å®Œå…¨ä¸€è‡´æ—¶ï¼ŒGitæ‰ä¼šé‡‡å–ä»¥ä¸Šç­–ç•¥ã€‚ä¸ç„¶ï¼Œå³ä½¿å¦‚ä¸Šæ“ä½œï¼Œä¾ç„¶ä¼šäº§ç”Ÿå†²çªã€‚</p>\n<p><img src=\"/img/160218_pro_git_c3/perils-of-rebasing-5.png\" alt=\"\"></p>\n<h4 id=\"Rebase-vs-Merge\"><a href=\"#Rebase-vs-Merge\" class=\"headerlink\" title=\"Rebase vs. Merge\"></a>Rebase vs. Merge</h4><p>å…³äºRebaseå’ŒMergeè¯¥ç”¨å“ªä¸ªçš„é—®é¢˜ï¼Œè¦å› åœ°åˆ¶å®œâ€”â€”Rebaseå¯ä»¥æå¤§ç®€åŒ–æäº¤å†å²ï¼Œä½†å®ƒä¼šç¯¡æ”¹æäº¤è®°å½•ï¼Œè€ŒMergeå¯ä»¥åŸæ±åŸå‘³åœ°ä¿å­˜æ¯ä¸ªäººçš„æäº¤æ—¶é—´ä¸å†…å®¹ã€‚åº”å½“è®°ä½ï¼Œä¸è®ºä½¿ç”¨å“ªä¸€ä¸ªï¼Œéƒ½è¦æŒ‰ç…§åŸºæœ¬æ³•ã€‚</p>\n<blockquote>\n<p>In general the way to get the best of both worlds is to rebase local changes youâ€™ve made but havenâ€™t shared yet before you push them in order to clean up your story, but never rebase anything youâ€™ve pushed somewhere.</p>\n</blockquote>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"ProGitè¯»ä¹¦ç¬”è®°ï¼ˆChapter2ï¼‰","url":"https://lilei.pro/2016/02/14/ProGitè¯»ä¹¦ç¬”è®°Chapter2/","content":"<hr>\n<p>2016å¹´æ˜¥èŠ‚å‰å¤§æ¦‚ä¸€å‘¨æ—¶é—´ï¼Œå¿˜äº†ä»€ä¹ˆå¥‘æœºï¼Œå¿½ç„¶è§‰å¾—è‡ªå·±ç”¨äº†Gitè¿™ä¹ˆä¹…ï¼Œä¸€ç›´å¤„äºä¸€çŸ¥åŠè§£çš„çŠ¶æ€ï¼Œè€ŒGitä½œä¸ºä¸€ä¸ªå‡ºè‰²çš„VCSï¼Œè‡ªé—®ä¸–ä»¥æ¥é•¿ç››ä¸è¡°ï¼Œä¸€å®šæœ‰å…¶é“ç†ã€‚æœ¬ç€â€œä¸ä½†è¦çŸ¥å…¶ç„¶ï¼Œè¿˜è¦çŸ¥å…¶æ‰€ä»¥ç„¶â€çš„æ€åº¦ï¼Œå†³å®šè®¤çœŸè¯»ä¸€è¯»ã€ŠPro Gitã€‹ã€‚<br>è¯´æ¥æƒ­æ„§ï¼Œç»„å†…æœ€å¼€å§‹ä»Subversionè¿ç§»åˆ°Gitæ—¶ï¼Œä¸€æ–°å°±å‘å¤§å®¶æ¨èè¿‡è¿™æœ¬ä¹¦ï¼Œå½“æ—¶è‡ªå·±ç®€å•ç¿»äº†ç¿»ï¼Œç”±äºæœ‰å…¶ä»–äº‹æƒ…å°±è€½æä¸‹ï¼Œä¸€ç›´æ²¡æœ‰å†æ‰“å¼€è¿‡ã€‚</p>\n<hr>\n<a id=\"more\"></a>\n<h3 id=\"Chapter-2-Git-Basics\"><a href=\"#Chapter-2-Git-Basics\" class=\"headerlink\" title=\"Chapter 2. Git Basics\"></a>Chapter 2. Git Basics</h3><p>ç¬¬äºŒç« ä¸»è¦è®²äº†å¦‚ä½•å°†ä¸€ä¸ªæ–‡ä»¶æ·»åŠ è¿›VCSã€æäº¤æ”¹åŠ¨ã€å†å²æŸ¥çœ‹ã€æ’¤é”€æ“ä½œã€Tagã€‚</p>\n<h4 id=\"æ–‡ä»¶çŠ¶æ€\"><a href=\"#æ–‡ä»¶çŠ¶æ€\" class=\"headerlink\" title=\"æ–‡ä»¶çŠ¶æ€\"></a>æ–‡ä»¶çŠ¶æ€</h4><p>Gitä¸­æœ‰å››ç§æ–‡ä»¶çŠ¶æ€ï¼Œç›¸äº’é—´è½¬æ¢å…³ç³»è§ä¸‹å›¾</p>\n<p><img src=\"/img/160217_pro_git_c2/lifecycle.png\" alt=\"\"></p>\n<ul>\n<li>ä½¿ç”¨Gitæ—¶ï¼Œè¦å¤šå¤šç”¨<code>git status</code>æ¥æŸ¥çœ‹å½“å‰æ–‡ä»¶çŠ¶æ€</li>\n<li>åŒä¸€ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥åŒæ—¶å¤„äº<code>modified</code>å’Œ<code>staged</code>ä¸¤ç§çŠ¶æ€çš„ï¼Œè¯•ç€edit-add-editï¼Œä½ å°±ä¼šå‘ç°</li>\n<li><code>git status --short</code>å¯ä»¥ç”¨æ¥æŸ¥çœ‹æ›´ç®€çŸ­çš„æ–‡ä»¶çŠ¶æ€æè¿°ï¼Œç”¨å¤„ä¸å¤§</li>\n</ul>\n<h4 id=\"gitignore\"><a href=\"#gitignore\" class=\"headerlink\" title=\".gitignore\"></a>.gitignore</h4><p>å¯¹äºä¸æƒ³åŠ å…¥åˆ°ç‰ˆæœ¬æ§åˆ¶ä¸­çš„æ–‡ä»¶ï¼ˆIDEç”Ÿæˆæ–‡ä»¶ã€ç¼–è¯‘ä¸­é—´æ–‡ä»¶ç­‰ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<code>.gitignore</code>æ¥å‘Šè¯‰Gitç³»ç»Ÿï¼Œä¸éœ€è¦å…³æ³¨è¿™äº›æ–‡ä»¶ã€‚<br>gitignoreçš„ä¾‹å­å¦‚ä¸‹ï¼Œä»¥<code>#</code>å¼€å¤´çš„è¡Œæ˜¯æ³¨é‡Šï¼Œä¼šè¢«Gitå¿½ç•¥æ‰ã€‚<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># no .a files</span><br><span class=\"line\">*.a</span><br><span class=\"line\"></span><br><span class=\"line\"># but do track lib.a, even though you&apos;re ignoring .a files above</span><br><span class=\"line\">!lib.a</span><br><span class=\"line\"></span><br><span class=\"line\"># only ignore the TODO file in the current directory, not subdir/TODO</span><br><span class=\"line\">/TODO</span><br><span class=\"line\"></span><br><span class=\"line\"># ignore all files in the build/ directory</span><br><span class=\"line\">build/</span><br><span class=\"line\"></span><br><span class=\"line\"># ignore doc/notes.txt, but not doc/server/arch.txt</span><br><span class=\"line\">doc/*.txt</span><br><span class=\"line\"></span><br><span class=\"line\"># ignore all .pdf files in the doc/ directory</span><br><span class=\"line\">doc/**/*.pdf</span><br></pre></td></tr></table></figure></p>\n<h4 id=\"git-diff\"><a href=\"#git-diff\" class=\"headerlink\" title=\"git diff\"></a>git diff</h4><p><code>git diff</code>ç”¨æ¥æŸ¥çœ‹è¿›è¡Œçš„æ”¹åŠ¨ï¼Œæ§åˆ¶å°çš„è¾“å‡ºä¸å¤Ÿç›´è§‚ï¼Œå°¤å…¶æ˜¯æ”¹åŠ¨å¾ˆå¤šçš„æ—¶å€™ã€‚æ¨èä½¿ç”¨GUIè¿›è¡ŒæŸ¥çœ‹ï¼ˆéœ€è¦åœ¨.gitconfigä¸­è¿›è¡Œé…ç½®ï¼Œä½ç½®æ˜¯<code>~/.gitconfig</code>ï¼‰ï¼Œç›®å‰ç¬”è€…åœ¨ç”¨çš„æ˜¯DiffMergeï¼ŒåŸºæœ¬æ»¡è¶³æ—¥å¸¸ä½¿ç”¨éœ€æ±‚ã€‚</p>\n<ul>\n<li><code>git diff</code>ç”¨æ¥æŸ¥çœ‹<code>modified</code>çš„å˜æ›´ã€‚</li>\n<li><code>git diff --cached</code>åŒ<code>git diff --staged</code>ä½œç”¨ä¸€æ ·ï¼Œç”¨æ¥æŸ¥çœ‹<code>staged</code>çš„å˜æ›´</li>\n</ul>\n<h4 id=\"git-commit\"><a href=\"#git-commit\" class=\"headerlink\" title=\"git commit\"></a>git commit</h4><p>ä½¿ç”¨<code>git commit</code>å°†æ”¹åŠ¨æäº¤åˆ°ä»“åº“ï¼Œä»¥åˆ›å»ºä¸€ä¸ª<strong>Snapshot</strong>ã€‚<strong>Snapshot</strong>æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œæ˜¯Gitå†…éƒ¨å®ç°çš„æœ€å…³é”®æœºåˆ¶ï¼Œä¹Ÿæ˜¯Gitèƒ½å¤Ÿè¶…è¶ŠSubversionç­‰å…¶ä»–VCSçš„æ€æ‰‹çº§ç‰¹æ€§ï¼Œè¿™ä¸€ç‚¹å°†åœ¨Chapter3ä¸­è¿›è¡Œè¯´æ˜ã€‚</p>\n<p>ç›´æ¥è¾“å…¥<code>git commit</code>åï¼Œå°†ä¼šæ‰“å¼€ä¸€ä¸ªç¼–è¾‘å™¨é¡µé¢ï¼ˆç¬”è€…ç”¨çš„æ˜¯Vimï¼Œå¯ä»¥åœ¨gitconfigä¸­é…ç½®ï¼‰ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># Please enter the commit message for your changes. Lines starting</span><br><span class=\"line\"># with &apos;#&apos; will be ignored, and an empty message aborts the commit.</span><br><span class=\"line\"># On branch master</span><br><span class=\"line\"># Changes to be committed:</span><br><span class=\"line\">#\tnew file:   README</span><br><span class=\"line\">#\tmodified:   CONTRIBUTING.md</span><br><span class=\"line\">#</span><br><span class=\"line\">~</span><br><span class=\"line\">~</span><br><span class=\"line\">~</span><br><span class=\"line\">&quot;.git/COMMIT_EDITMSG&quot; 9L, 283C</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥åœ¨å…¶ä¸­ç¼–è¾‘æœ¬æ¬¡æäº¤ä¿¡æ¯ï¼Œå¦‚æœä¸å†™ä»»ä½•ä¸œè¥¿çš„è¯ï¼ŒGitæ˜¯ä¸ä¼šæ‰¿è®¤æœ¬æ¬¡commitçš„ã€‚</p>\n<p>å¦‚æœä¸æƒ³æ‰“å¼€ç¼–è¾‘å™¨ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>commit</code>æ—¶åŠ ä¸Š<code>-m</code>å‚æ•°ï¼Œå¦‚ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git commit -m &quot;Story 182: Fix benchmarks for speed&quot;</span><br></pre></td></tr></table></figure>\n<p>å¯ä»¥ç”¨<code>-a -m</code>æˆ–è€…<code>-am</code>æŠŠstageã€commitä¸¤ä¸ªæ“ä½œä¸€èµ·å®Œæˆ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git status</span><br><span class=\"line\">On branch master</span><br><span class=\"line\">Changes not staged <span class=\"keyword\">for</span> commit:</span><br><span class=\"line\">  (use <span class=\"string\">\"git add &amp;lt;file&amp;gt;...\"</span> to update what will be committed)</span><br><span class=\"line\">  (use <span class=\"string\">\"git checkout -- &amp;lt;file&amp;gt;...\"</span> to discard changes <span class=\"keyword\">in</span> working directory)</span><br><span class=\"line\"></span><br><span class=\"line\">    modified:   CONTRIBUTING.md</span><br><span class=\"line\"></span><br><span class=\"line\">no changes added to commit (use <span class=\"string\">\"git add\"</span> and/or <span class=\"string\">\"git commit -a\"</span>)</span><br><span class=\"line\">$ git commit -a -m <span class=\"string\">'added new benchmarks'</span></span><br><span class=\"line\">[master 83e38c7] added new benchmarks</span><br><span class=\"line\"> 1 file changed, 5 insertions(+), 0 deletions(-)</span><br></pre></td></tr></table></figure>\n<h4 id=\"Removing-Files\"><a href=\"#Removing-Files\" class=\"headerlink\" title=\"Removing Files\"></a>Removing Files</h4><p>ç›´æ¥<code>rm</code>æ–‡ä»¶çš„è¯ï¼Œæ–‡ä»¶æ˜¯å¤„äº<code>unstaged</code>çŠ¶æ€çš„ï¼Œæ­¤æ—¶éœ€è¦å…ˆ<code>add</code>ï¼Œå†<code>commit</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ rm PROJECTS.md</span><br><span class=\"line\">$ git status</span><br><span class=\"line\">On branch master</span><br><span class=\"line\">Your branch is up-to-date with <span class=\"string\">'origin/master'</span>.</span><br><span class=\"line\">Changes not staged <span class=\"keyword\">for</span> commit:</span><br><span class=\"line\">  (use <span class=\"string\">\"git add/rm &amp;lt;file&amp;gt;...\"</span> to update what will be committed)</span><br><span class=\"line\">  (use <span class=\"string\">\"git checkout -- &amp;lt;file&amp;gt;...\"</span> to discard changes <span class=\"keyword\">in</span> working directory)</span><br><span class=\"line\"></span><br><span class=\"line\">        deleted:    PROJECTS.md</span><br><span class=\"line\"></span><br><span class=\"line\">no changes added to commit (use <span class=\"string\">\"git add\"</span> and/or <span class=\"string\">\"git commit -a\"</span>)</span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…ç›´æ¥ç”¨<code>git rm</code>ï¼Œå°†æ–‡ä»¶ç›´æ¥ç½®äº<code>staged</code>çŠ¶æ€</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git rm PROJECTS.md</span><br><span class=\"line\">rm <span class=\"string\">'PROJECTS.md'</span></span><br><span class=\"line\">$ git status</span><br><span class=\"line\">On branch master</span><br><span class=\"line\">Changes to be committed:</span><br><span class=\"line\">  (use <span class=\"string\">\"git reset HEAD &amp;lt;file&amp;gt;...\"</span> to unstage)</span><br><span class=\"line\"></span><br><span class=\"line\">    deleted:    PROJECTS.md</span><br></pre></td></tr></table></figure>\n<p>å¦å¤–ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„å‚æ•°æ˜¯<code>--cached</code>ï¼Œç”¨æ¥å°†æ–‡ä»¶ä»<code>staged</code>çŠ¶æ€è½¬ç§»åˆ°<code>untracked</code>ã€‚å¦‚æœåœ¨æœ€åˆç¼–è¾‘<code>.gitignore</code>æ—¶æ¼å†™äº†æŸä¸ªæ–‡ä»¶ï¼Œåé¢å‘ç°Gitå·²ç»è®°å½•äº†è¿™ä¸ªæ–‡ä»¶çš„å˜æ›´ï¼Œå¯ä»¥å…ˆç”¨<code>--cached</code>å‚æ•°åœæ­¢trackè¯¥æ–‡ä»¶ï¼Œç„¶åç¼–è¾‘<code>.gitignore</code>ï¼Œå°†æ–‡ä»¶æ·»åŠ è¿›å»ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git rm --cached README</span><br></pre></td></tr></table></figure>\n<h4 id=\"Moving-Files\"><a href=\"#Moving-Files\" class=\"headerlink\" title=\"Moving Files\"></a>Moving Files</h4><p>åŒæ ·ï¼Œå¯ä»¥ç”¨<code>git mv</code>æ¥å®Œæˆæ–‡ä»¶é‡å‘½å</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git mv README.md README</span><br><span class=\"line\">$ git status</span><br><span class=\"line\">On branch master</span><br><span class=\"line\">Changes to be committed:</span><br><span class=\"line\">  (use &quot;git reset HEAD &amp;lt;file&amp;gt;...&quot; to unstage)</span><br><span class=\"line\"></span><br><span class=\"line\">    renamed:    README.md -&amp;gt; README</span><br></pre></td></tr></table></figure>\n<h4 id=\"æ— æ¯”é‡è¦çš„-git-log\"><a href=\"#æ— æ¯”é‡è¦çš„-git-log\" class=\"headerlink\" title=\"æ— æ¯”é‡è¦çš„ git log\"></a>æ— æ¯”é‡è¦çš„ git log</h4><p><code>git log</code>ç”¨æ¥æŸ¥çœ‹å½“å‰åˆ†æ”¯çš„æŸ¥çœ‹å†å²ï¼Œå¦‚æœä¸åŠ ä»»ä½•å‚æ•°ï¼Œé»˜è®¤è¾“å‡ºæ¯æ¬¡æäº¤çš„SHA1å€¼ã€æäº¤è€…ã€æäº¤æ—¶é—´ã€æäº¤ä¿¡æ¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span></span><br><span class=\"line\">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class=\"line\">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class=\"line\">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    changed the version number</span><br><span class=\"line\"></span><br><span class=\"line\">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</span><br><span class=\"line\">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class=\"line\">Date:   Sat Mar 15 16:40:33 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    removed unnecessary <span class=\"built_in\">test</span></span><br><span class=\"line\"></span><br><span class=\"line\">commit a11bef06a3f659402fe7563abf99ad00de2209e6</span><br><span class=\"line\">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class=\"line\">Date:   Sat Mar 15 10:31:28 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    first commit</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨<code>-p</code>å‚æ•°å¯ä»¥å±•ç¤ºæ¯æ¬¡æäº¤çš„æ–‡ä»¶å…·ä½“æ”¹åŠ¨ï¼Œä½¿ç”¨<code>-[num]</code>ï¼ˆå¦‚<code>-2</code>ï¼‰æ¥æ§åˆ¶æ˜¾ç¤ºçš„commitæ•°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> -p -2</span><br><span class=\"line\">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class=\"line\">Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    changed the version number</span><br><span class=\"line\"></span><br><span class=\"line\">diff --git a/Rakefile b/Rakefile</span><br><span class=\"line\">index a874b73..8f94139 100644</span><br><span class=\"line\">--- a/Rakefile</span><br><span class=\"line\">+++ b/Rakefile</span><br><span class=\"line\">@@ -5,7 +5,7 @@ require <span class=\"string\">'rake/gempackagetask'</span></span><br><span class=\"line\"> spec = Gem::Specification.new <span class=\"keyword\">do</span> |s|</span><br><span class=\"line\">     s.platform  =   Gem::Platform::RUBY</span><br><span class=\"line\">     s.name      =   <span class=\"string\">\"simplegit\"</span></span><br><span class=\"line\">-    s.version   =   <span class=\"string\">\"0.1.0\"</span></span><br><span class=\"line\">+    s.version   =   <span class=\"string\">\"0.1.1\"</span></span><br><span class=\"line\">     s.author    =   <span class=\"string\">\"Scott Chacon\"</span></span><br><span class=\"line\">     s.email     =   <span class=\"string\">\"schacon@gee-mail.com\"</span></span><br><span class=\"line\">     s.summary   =   <span class=\"string\">\"A simple gem for using Git in Ruby code.\"</span></span><br><span class=\"line\"></span><br><span class=\"line\">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</span><br><span class=\"line\">Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Sat Mar 15 16:40:33 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    removed unnecessary <span class=\"built_in\">test</span></span><br><span class=\"line\"></span><br><span class=\"line\">diff --git a/lib/simplegit.rb b/lib/simplegit.rb</span><br><span class=\"line\">index a0a60ae..47c6340 100644</span><br><span class=\"line\">--- a/lib/simplegit.rb</span><br><span class=\"line\">+++ b/lib/simplegit.rb</span><br><span class=\"line\">@@ -18,8 +18,3 @@ class SimpleGit</span><br><span class=\"line\">     end</span><br><span class=\"line\"></span><br><span class=\"line\"> end</span><br><span class=\"line\">-</span><br><span class=\"line\">-<span class=\"keyword\">if</span> <span class=\"variable\">$0</span> == __FILE__</span><br><span class=\"line\">-  git = SimpleGit.new</span><br><span class=\"line\">-  puts git.show</span><br><span class=\"line\">-end</span><br><span class=\"line\">\\ No newline at end of file</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœè§‰å¾—<code>-p</code>å‚æ•°å±•ç¤ºçš„å¤ªå¤šäº†ï¼Œå°±ç”¨<code>--stat</code>æ¥çœ‹æ”¹åŠ¨æ–‡ä»¶ä¸è¡Œæ•°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --<span class=\"built_in\">stat</span></span><br><span class=\"line\">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class=\"line\">Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    changed the version number</span><br><span class=\"line\"></span><br><span class=\"line\"> Rakefile | 2 +-</span><br><span class=\"line\"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class=\"line\"></span><br><span class=\"line\">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</span><br><span class=\"line\">Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Sat Mar 15 16:40:33 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    removed unnecessary <span class=\"built_in\">test</span></span><br><span class=\"line\"></span><br><span class=\"line\"> lib/simplegit.rb | 5 -----</span><br><span class=\"line\"> 1 file changed, 5 deletions(-)</span><br><span class=\"line\"></span><br><span class=\"line\">commit a11bef06a3f659402fe7563abf99ad00de2209e6</span><br><span class=\"line\">Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Sat Mar 15 10:31:28 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    first commit</span><br><span class=\"line\"></span><br><span class=\"line\"> README           |  6 ++++++</span><br><span class=\"line\"> Rakefile         | 23 +++++++++++++++++++++++</span><br><span class=\"line\"> lib/simplegit.rb | 25 +++++++++++++++++++++++++</span><br><span class=\"line\"> 3 files changed, 54 insertions(+)</span><br></pre></td></tr></table></figure>\n<p><code>--pretty</code>å‚æ•°å¯ä»¥ç¾åŒ–ä¿¡æ¯å±•ç¤ºï¼Œè¿™æ˜¯ä¸€ä¸ªå¤åˆå‚æ•°ï¼Œæœ‰<code>oneline</code>ã€<code>short</code>ã€<code>full</code>ã€<code>fuller</code>ç­‰é€‰æ‹©</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --pretty=oneline</span><br><span class=\"line\">ca82a6dff817ec66f44342007202690a93763949 changed the version number</span><br><span class=\"line\">085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7 removed unnecessary <span class=\"built_in\">test</span></span><br><span class=\"line\">a11bef06a3f659402fe7563abf99ad00de2209e6 first commit</span><br></pre></td></tr></table></figure>\n<p>æˆ–è€…è‡ªå·±å®šåˆ¶è¾“å‡ºæ¨¡ç‰ˆ</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --pretty=format:<span class=\"string\">\"%h - %an, %ar : %s\"</span></span><br><span class=\"line\">ca82a6d - Scott Chacon, 6 years ago : changed the version number</span><br><span class=\"line\">085bb3b - Scott Chacon, 6 years ago : removed unnecessary <span class=\"built_in\">test</span></span><br><span class=\"line\">a11bef0 - Scott Chacon, 6 years ago : first commit</span><br></pre></td></tr></table></figure>\n<p>æ¨¡ç‰ˆå‚æ•°å®šä¹‰å¦‚ä¸‹</p>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Description of Output</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>%H</td>\n<td>Commit hash</td>\n</tr>\n<tr>\n<td>%h</td>\n<td>Abbreviated commit hash</td>\n</tr>\n<tr>\n<td>%T</td>\n<td>Tree hash</td>\n</tr>\n<tr>\n<td>%t</td>\n<td>Abbreviated tree hash</td>\n</tr>\n<tr>\n<td>%P</td>\n<td>Parent hashes</td>\n</tr>\n<tr>\n<td>%p</td>\n<td>Abbreviated parent hashes</td>\n</tr>\n<tr>\n<td>%an</td>\n<td>Author name</td>\n</tr>\n<tr>\n<td>%ae</td>\n<td>Author email</td>\n</tr>\n<tr>\n<td>%ad</td>\n<td>Author date (format respects the â€“date=option)</td>\n</tr>\n<tr>\n<td>%ar</td>\n<td>Author date, relative</td>\n</tr>\n<tr>\n<td>%cn</td>\n<td>Committer name</td>\n</tr>\n<tr>\n<td>%ce</td>\n<td>Committer email</td>\n</tr>\n<tr>\n<td>%cd</td>\n<td>Committer date</td>\n</tr>\n<tr>\n<td>%cr</td>\n<td>Committer date, relative</td>\n</tr>\n<tr>\n<td>%s</td>\n<td>Subject</td>\n</tr>\n</tbody>\n</table>\n<p>åœ¨logä¸­ä½¿ç”¨<code>--graph</code>æ¥å±•ç¤ºASCIIæ ¼å¼çš„å›¾å½¢åŒ–æäº¤å†å²ï¼Œå»ºè®®ä½¿ç”¨æ›´å‚»ç“œçš„GUIå·¥å…·æ¥æŸ¥çœ‹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --pretty=format:<span class=\"string\">\"%h %s\"</span> --graph</span><br><span class=\"line\">* 2d3acf9 ignore errors from SIGCHLD on <span class=\"built_in\">trap</span></span><br><span class=\"line\">*  5e3ee11 Merge branch <span class=\"string\">'master'</span> of git://github.com/dustin/grit</span><br><span class=\"line\">|\\</span><br><span class=\"line\">| * 420eac9 Added a method <span class=\"keyword\">for</span> getting the current branch.</span><br><span class=\"line\">* | 30e367c timeout code and tests</span><br><span class=\"line\">* | 5a09431 add timeout protection to grit</span><br><span class=\"line\">* | e1193f8 support <span class=\"keyword\">for</span> heads with slashes <span class=\"keyword\">in</span> them</span><br><span class=\"line\">|/</span><br><span class=\"line\">* d6016bc require time <span class=\"keyword\">for</span> xmlschema</span><br><span class=\"line\">*  11d191e Merge branch <span class=\"string\">'defunkt'</span> into <span class=\"built_in\">local</span></span><br></pre></td></tr></table></figure>\n<p>å¦‚æœæƒ³æŸ¥çœ‹ä¸¤å‘¨ä»¥æ¥çš„æäº¤ï¼Œç”¨<code>--since</code>å‚æ•°ï¼ŒåŒç†ï¼Œä¹Ÿæœ‰<code>--until</code>å¯ä¾›ä½¿ç”¨ï¼Œåé¢å¯ä»¥æ¥<code>2016-01-01</code>è¿™æ ·çš„æ—¶é—´æ ¼å¼</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --since=2.weeks</span><br></pre></td></tr></table></figure>\n<p><code>-S</code>å‚æ•°æŸ¥çœ‹æäº¤ä¸­åŒ…å«æŸä¸ªç‰¹å®šå­—æ®µå˜æ›´çš„logï¼Œæ¯”å¦‚ä½ æƒ³çœ‹å“ªäº›æäº¤æ”¹åˆ°äº†<code>onCreate</code>å‡½æ•°ï¼Œå°±è¿™ä¹ˆå†™</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --SonCreate</span><br></pre></td></tr></table></figure>\n<p>è¿˜æœ‰å…¶å®ƒé€‰æ‹©åŠŸèƒ½ï¼Œå¦‚æŸ¥çœ‹æŸäººçš„æäº¤<code>--committer</code>ï¼ŒæŸ¥çœ‹åŒ…å«æŸäº›æ•æ„Ÿè¯çš„æäº¤<code>--grep</code>ç­‰ç­‰ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º</p>\n<table>\n<thead>\n<tr>\n<th>Option</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-(n)</td>\n<td>Show only the last n commits</td>\n</tr>\n<tr>\n<td>â€“since, â€“after</td>\n<td>Limit the commits to those made after the specified date.</td>\n</tr>\n<tr>\n<td>â€“until, â€“before</td>\n<td>Limit the commits to those made before the specified date.</td>\n</tr>\n<tr>\n<td>â€“author</td>\n<td>Only show commits in which the author entry matches the specified string.</td>\n</tr>\n<tr>\n<td>â€“committer</td>\n<td>Only show commits in which the committer entry matches the specified string.</td>\n</tr>\n<tr>\n<td>â€“grep</td>\n<td>Only show commits with a commit message containing the string</td>\n</tr>\n<tr>\n<td>-S</td>\n<td>Only show commits adding or removing code matching the string</td>\n</tr>\n</tbody>\n</table>\n<p>ä¸¾ä¸ªğŸŒ°ï¼Œç›´æ¥ç…§æ¬ä¹¦ä¸­çš„å¥½äº†ï¼š</p>\n<blockquote>\n<p>For example, if you want to see which commits modifying test files in the Git source code history are merged and were committed by Junio Hamano in the month of October 2008, you can run something like this:</p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">log</span> --pretty=<span class=\"string\">\"%h - %s\"</span> --author=gitster --since=<span class=\"string\">\"2008-10-01\"</span> \\</span><br><span class=\"line\">   --before=<span class=\"string\">\"2008-11-01\"</span> --no-merges -- t/</span><br><span class=\"line\">5610e3b - Fix testcase failure when extended attributes are <span class=\"keyword\">in</span> use</span><br><span class=\"line\">acd3b9e - Enhance hold_lock_file_for_&#123;update,append&#125;() API</span><br><span class=\"line\">f563754 - demonstrate breakage of detached checkout with symbolic link HEAD</span><br><span class=\"line\">d1a43f2 - reset --hard/<span class=\"built_in\">read</span>-tree --reset -u: remove unmerged new paths</span><br><span class=\"line\">51a94af - Fix <span class=\"string\">\"checkout --track -b newbranch\"</span> on detached HEAD</span><br><span class=\"line\">b0ad11e - pull: allow <span class=\"string\">\"git pull origin <span class=\"variable\">$something</span>:<span class=\"variable\">$current_branch</span>\"</span> into an unborn branch</span><br></pre></td></tr></table></figure>\n<h4 id=\"Undoing-Things\"><a href=\"#Undoing-Things\" class=\"headerlink\" title=\"Undoing Things\"></a>Undoing Things</h4><p>å¦‚æœåœ¨ä¸€æ¬¡commitåï¼Œå‘ç°å¿˜äº†ä¿®æ”¹æŸä¸ªæ–‡ä»¶fooï¼Œé‚£è¦æ€ä¹ˆåŠï¼Ÿ<br>å½“ç„¶å¯ä»¥ä¿®æ”¹äº†fooåï¼Œç”¨<code>git commit -am</code>æ¥å¢åŠ ä¸€æ¬¡commitã€‚<br>å¯å¦‚æœæƒ³ä¸ä¹‹å‰çš„commitå¹¶æˆä¸€ä¸ªå‘¢ï¼Ÿgitä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·çš„å·¥å…·<code>--amend</code>(amend: vt&amp;vi æ”¹è‰¯ï¼Œä¿®æ”¹ï¼Œä¿®è®¢)ã€‚Gitä¼šæ£€æŸ¥<code>staged</code>åŒºåŸŸï¼Œå°†å…¶ä¸­çš„å˜æ›´ä¸ä¸Šä¸€ä¸ªcommitåˆå¹¶ï¼Œä½ è¿˜å¯ä»¥ä¿®æ”¹åˆå¹¶åçš„commitä¿¡æ¯ã€‚<br>é’ˆå¯¹ä¸Šé¢çš„åœºæ™¯</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git commit -m <span class=\"string\">'initial commit'</span></span><br><span class=\"line\">$ git add forgotten_file</span><br><span class=\"line\">$ git commit --amend</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœ<code>staged</code>åŒºåŸŸå¹¶æ²¡æœ‰ä»»ä½•æ”¹åŠ¨ï¼Œ<code>--amend</code>å¯ä»¥ç”¨æ¥å•çº¯çš„ä¿®æ”¹commit messageï¼ŒåŒæ ·ååˆ†æœ‰ç”¨ã€‚</p>\n<p>ä¸‹é¢è®²è®²ï¼Œè¦æ˜¯åœ¨<code>stage</code>æ–‡ä»¶åï¼Œåæ‚”äº†ï¼Œæƒ³è¦æŠŠæ–‡ä»¶å›æ»šï¼Œæ€ä¹ˆåŠï¼Ÿå…¶å®<code>git status</code>å·²ç»ç»™äº†æˆ‘ä»¬æç¤ºï¼Œé‚£å°±æ˜¯<code>git reset</code>ï¼Œè¦ç»“åˆ<code>HEAD</code>ä½¿ç”¨</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git add *</span><br><span class=\"line\">$ git status</span><br><span class=\"line\">On branch master</span><br><span class=\"line\">Changes to be committed:</span><br><span class=\"line\">  (use <span class=\"string\">\"git reset HEAD &amp;lt;file&amp;gt;...\"</span> to unstage)</span><br><span class=\"line\"></span><br><span class=\"line\">    renamed:    README.md -&amp;gt; README</span><br><span class=\"line\">    modified:   CONTRIBUTING.md</span><br><span class=\"line\">$ git reset HEAD CONTRIBUTING.md</span><br><span class=\"line\">Unstaged changes after reset:</span><br><span class=\"line\">M CONTRIBUTING.md</span><br><span class=\"line\">$ git status</span><br><span class=\"line\">On branch master</span><br><span class=\"line\">Changes to be committed:</span><br><span class=\"line\">  (use <span class=\"string\">\"git reset HEAD &amp;lt;file&amp;gt;...\"</span> to unstage)</span><br><span class=\"line\"></span><br><span class=\"line\">    renamed:    README.md -&amp;gt; README</span><br><span class=\"line\"></span><br><span class=\"line\">Changes not staged <span class=\"keyword\">for</span> commit:</span><br><span class=\"line\">  (use <span class=\"string\">\"git add &amp;lt;file&amp;gt;...\"</span> to update what will be committed)</span><br><span class=\"line\">  (use <span class=\"string\">\"git checkout -- &amp;lt;file&amp;gt;...\"</span> to discard changes <span class=\"keyword\">in</span> working directory)</span><br><span class=\"line\"></span><br><span class=\"line\">    modified:   CONTRIBUTING.md</span><br></pre></td></tr></table></figure>\n<p>ä¸Šé¢è¿™ç§ç”¨æ³•åªæ˜¯å›æ»šäº†<code>staged</code>ä¸­çš„æ–‡ä»¶ï¼Œå¦‚æœåŠ ä¸Š<code>--hard</code>å‚æ•°ï¼Œå¯å°±è¦æ…é‡äº†â€”â€”è¿™ä¼šæŠŠcommitå›æ»šæ‰ï¼Œè€Œä¸”ï¼Œä¸ç•™ç—•è¿¹ï¼</p>\n<p>å¦‚æœæ–‡ä»¶è¿˜æ²¡æœ‰è¿›è¡Œ<code>stage</code>ï¼Œæ­£å¤„äº<code>modified</code>ï¼Œä½ æƒ³è¦å°†å®ƒå˜å›åˆ°<code>unmodified</code>ï¼Œå°±ç”¨<code>checkout --</code>ã€‚åŒæ ·ï¼Œè¿™ä¸ªæ“ä½œä¸ä¼šä¿ç•™ä¹‹å‰çš„ä»»ä½•ä¿®æ”¹ï¼Œä¸å¸¦èµ°ä¸€ä¸äº‘å½©ã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout -- README.md</span><br></pre></td></tr></table></figure>\n<p>Gitè¿˜æä¾›äº†å¦å¤–ä¸€ä¸ªå¾ˆæœ‰åŠ›çš„å·¥å…·<code>stash</code>ï¼Œç”¨æ¥æš‚å­˜ä¿®æ”¹ï¼Œé™äºç¯‡å¹…ï¼Œæš‚ä¸å±•å¼€ã€‚</p>\n<h4 id=\"Working-With-Remotes\"><a href=\"#Working-With-Remotes\" class=\"headerlink\" title=\"Working With Remotes\"></a>Working With Remotes</h4><p>Gitæ˜¯ä¸€ä¸ªå¼ºæœ‰åŠ›çš„åä½œå·¥å…·ï¼Œå¿…ä¸å¯å°‘åœ°ï¼Œä½ ä¼šå°†è‡ªå·±çš„ä»£ç æ¨é€åˆ°ä»“åº“ä¾›ä»–äººä½¿ç”¨ï¼Œä½ ä¹Ÿä¼šå°†ä»–äººå®Œæˆçš„ä»£ç ä»è¿œç«¯æ‹‰ä¸‹æ¥è¿›è¡Œè¿½è¸ªã€‚</p>\n<p><code>git remote -v</code>ç”¨æ¥æŸ¥çœ‹æœ¬åœ°çš„åˆ†æ”¯ï¼ˆfetch &amp; pushï¼‰ï¼Œå¯¹äºå¤æ‚çš„é¡¹ç›®ï¼Œä¼šæœ‰å¤šä¸ªè¿œç«¯remoteï¼ˆå®åœ¨æ‰¾ä¸å‡ºè¿™ä¸ªè¯­å¢ƒä¸‹åˆé€‚çš„ç¿»è¯‘ï¼Œæ€»ä¸èƒ½è¯´â€œåˆ†æ”¯â€å§ï¼Œä¼šä¸branché‡å¤ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git remote -v</span><br><span class=\"line\">bakkdoor  https://github.com/bakkdoor/grit (fetch)</span><br><span class=\"line\">bakkdoor  https://github.com/bakkdoor/grit (push)</span><br><span class=\"line\">cho45     https://github.com/cho45/grit (fetch)</span><br><span class=\"line\">cho45     https://github.com/cho45/grit (push)</span><br><span class=\"line\">defunkt   https://github.com/defunkt/grit (fetch)</span><br><span class=\"line\">defunkt   https://github.com/defunkt/grit (push)</span><br><span class=\"line\">koke      git://github.com/koke/grit.git (fetch)</span><br><span class=\"line\">koke      git://github.com/koke/grit.git (push)</span><br><span class=\"line\">origin    git@github.com:mojombo/grit.git (fetch)</span><br><span class=\"line\">origin    git@github.com:mojombo/grit.git (push)</span><br></pre></td></tr></table></figure>\n<p>ä¸€èˆ¬æˆ‘ä»¬åªä¼šçœ‹åˆ°originä¸€ä¸ªremoteï¼Œä½¿ç”¨<code>git remote add</code>æ¥æ·»åŠ remote</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git remote</span><br><span class=\"line\">origin</span><br><span class=\"line\">$ git remote add pb https://github.com/paulboone/ticgit</span><br><span class=\"line\">$ git remote -v</span><br><span class=\"line\">origin  https://github.com/schacon/ticgit (fetch)</span><br><span class=\"line\">origin  https://github.com/schacon/ticgit (push)</span><br><span class=\"line\">pb  https://github.com/paulboone/ticgit (fetch)</span><br><span class=\"line\">pb  https://github.com/paulboone/ticgit (push)</span><br></pre></td></tr></table></figure>\n<p><code>pb</code>æ˜¯æˆ‘ä»¬èµ·çš„åˆ«åï¼Œç„¶åä½¿ç”¨<code>fetch</code>æ¥æ›´æ–°è¿™ä¸ªremote</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git fetch pb</span><br><span class=\"line\">remote: Counting objects: 43, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">remote: Compressing objects: 100% (36/36), <span class=\"keyword\">done</span>.</span><br><span class=\"line\">remote: Total 43 (delta 10), reused 31 (delta 5)</span><br><span class=\"line\">Unpacking objects: 100% (43/43), <span class=\"keyword\">done</span>.</span><br><span class=\"line\">From https://github.com/paulboone/ticgit</span><br><span class=\"line\"> * [new branch]      master     &gt; pb/master</span><br><span class=\"line\"> * [new branch]      ticgit     &gt; pb/ticgit</span><br></pre></td></tr></table></figure>\n<p> ä¹Ÿå¯ä»¥ä¸æŒ‡å®šremoteåç§°ï¼Œç›´æ¥fetchæ‰€æœ‰remote</p>\n<p> è®²å®Œäº†ä¸‹è½½ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä¸Šä¼ ã€‚<code>git push [remote-name] [branch-name]</code>ï¼Œç°å¸¸ç®€å•</p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push origin master</span><br></pre></td></tr></table></figure>\n<p> <code>git remote show [remote-name]</code>å‘½ä»¤å¯ä»¥ç”¨æ¥è§‚å¯ŸæŸä¸ªremoteçš„çŠ¶æ€ï¼Œæ³¨æ„ï¼è¿™é‡Œè§‚å¯Ÿçš„å¹¶ä¸æ˜¯è¿œç«¯å®æ—¶çŠ¶æ€ï¼Œè€Œæ˜¯æœ¬åœ°ä¸Šä¸€æ¬¡ä¸‹è½½ä¸‹æ¥çš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ æƒ³è§‚å¯Ÿæœ€æ–°çŠ¶æ€ï¼Œéœ€è¦å…ˆ<code>fetch</code></p>\n <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git remote show origin</span><br><span class=\"line\">* remote origin</span><br><span class=\"line\">  URL: https://github.com/my-org/complex-project</span><br><span class=\"line\">  Fetch URL: https://github.com/my-org/complex-project</span><br><span class=\"line\">  Push  URL: https://github.com/my-org/complex-project</span><br><span class=\"line\">  HEAD branch: master</span><br><span class=\"line\">  Remote branches:</span><br><span class=\"line\">    master                           tracked</span><br><span class=\"line\">    dev-branch                       tracked</span><br><span class=\"line\">    markdown-strip                   tracked</span><br><span class=\"line\">    issue-43                         new (next fetch will store <span class=\"keyword\">in</span> remotes/origin)</span><br><span class=\"line\">    issue-45                         new (next fetch will store <span class=\"keyword\">in</span> remotes/origin)</span><br><span class=\"line\">    refs/remotes/origin/issue-11     stale (use <span class=\"string\">'git remote prune'</span> to remove)</span><br><span class=\"line\">  Local branches configured <span class=\"keyword\">for</span> <span class=\"string\">'git pull'</span>:</span><br><span class=\"line\">    dev-branch merges with remote dev-branch</span><br><span class=\"line\">    master     merges with remote master</span><br><span class=\"line\">  Local refs configured <span class=\"keyword\">for</span> <span class=\"string\">'git push'</span>:</span><br><span class=\"line\">    dev-branch                     pushes to dev-branch                     (up to date)</span><br><span class=\"line\">    markdown-strip                 pushes to markdown-strip                 (up to date)</span><br><span class=\"line\">    master                         pushes to master                         (up to date)</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ è§‰å¾—æŸä¸ªremoteçš„åå­—èµ·çš„å¤ªåœŸæ°”äº†ï¼Œä½¿ç”¨<code>git remote rename [old_name] [new_name]</code>æ¥ä¿®æ”¹</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git remote rename pb paul</span><br><span class=\"line\">$ git remote</span><br><span class=\"line\">origin</span><br><span class=\"line\">paul</span><br></pre></td></tr></table></figure>\n<p>åŒæ ·ï¼Œä½¿ç”¨<code>git remote rm [remote_name]</code>æ¥åˆ é™¤ï¼ˆå¯æ€œçš„paulï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git remote rm paul</span><br><span class=\"line\">$ git remote</span><br><span class=\"line\">origin</span><br></pre></td></tr></table></figure>\n<h4 id=\"Tagging\"><a href=\"#Tagging\" class=\"headerlink\" title=\"Tagging\"></a>Tagging</h4><p>ä½ å®Œæˆäº†ä¸€ä¸ªç‰ˆæœ¬çš„å…¨éƒ¨éœ€æ±‚ï¼Œå·²ç»ä¿¡å¿ƒæ»¡æ»¡åœ°è¿›è¡Œäº†ä¸Šçº¿ï¼Œå¹¶ä¸”çº¿ä¸Šå…¨é¢å›å½’è¿‡ï¼Œä¸€åˆ‡æ­£å¸¸â€”â€”ä½ ä»¥ä¸ºå…¨éƒ¨çš„å·¥ä½œéƒ½å®Œæˆäº†å—ï¼Ÿå¹¶æ²¡æœ‰ï¼ä½ éœ€è¦è®°å½•ä¸‹æœ¬æ¬¡æäº¤ä½œä¸ºä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼ŒGitæä¾›äº†Tagè¿™ä¸ªå¼ºå¤§çš„å·¥å…·ã€‚</p>\n<p>æŸ¥çœ‹ç›®å‰çš„tagï¼Œæ³¨æ„æ˜¯ä»¥alphabeticalé¡ºåºæ’åˆ—çš„ï¼Œå¹¶éæ—¶é—´</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag</span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.3</span><br></pre></td></tr></table></figure>\n<p>ä½¿ç”¨<code>-l</code>å‚æ•°æŸ¥çœ‹åŒ…å«æŸä¸ªæ•æ„Ÿè¯çš„tag</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag -l <span class=\"string\">\"v1.8.5*\"</span></span><br><span class=\"line\">v1.8.5</span><br><span class=\"line\">v1.8.5-rc0</span><br><span class=\"line\">v1.8.5-rc1</span><br><span class=\"line\">v1.8.5-rc2</span><br><span class=\"line\">v1.8.5-rc3</span><br><span class=\"line\">v1.8.5.1</span><br><span class=\"line\">v1.8.5.2</span><br><span class=\"line\">v1.8.5.3</span><br></pre></td></tr></table></figure>\n<p>æœ‰ä¸¤ç§Tagï¼šlightweightedå’Œannotatedã€‚å‰è€…éå¸¸ç®€å•ï¼Œåªæ˜¯ä¸€ä¸ªtag nameï¼Œä¸åŒ…å«ä»»ä½•å…¶ä»–ä¿¡æ¯ã€‚åè€…åˆ™è®°å½•äº†tagger nameã€emailã€dateã€messageç­‰ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥ç”¨GNU Privacy Guard (GPG)è¿›è¡Œç­¾åå’Œæ ¡éªŒã€‚ç¬”è€…å¼ºçƒˆå»ºè®®ä½¿ç”¨annotatedè¿›è¡Œæ‰“Tagã€‚</p>\n<p>annotated tag</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag -a v1.4 -m <span class=\"string\">\"my version 1.4\"</span></span><br><span class=\"line\">$ git tag</span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.3</span><br><span class=\"line\">v1.4</span><br></pre></td></tr></table></figure>\n<p>ç”¨<code>git show [tag_name]</code>æŸ¥çœ‹ä¸€ä¸‹</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git show v1.4</span><br><span class=\"line\">tag v1.4</span><br><span class=\"line\">Tagger: Ben Straub &amp;lt;ben@straub.cc&amp;gt;</span><br><span class=\"line\">Date:   Sat May 3 20:19:12 2014 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">my version 1.4</span><br><span class=\"line\"></span><br><span class=\"line\">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class=\"line\">Author: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    changed the version number</span><br></pre></td></tr></table></figure>\n<p>lightweighted tag</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag v1.4-lw</span><br><span class=\"line\">$ git tag</span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.3</span><br><span class=\"line\">v1.4</span><br><span class=\"line\">v1.4-lw</span><br><span class=\"line\">v1.5</span><br><span class=\"line\">$ git show v1.4-lw</span><br><span class=\"line\">commit ca82a6dff817ec66f44342007202690a93763949</span><br><span class=\"line\">Author: Scott Chacon &lt;schacon@gee-mail.com&gt;</span><br><span class=\"line\">Date:   Mon Mar 17 21:52:11 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    changed the version number</span><br></pre></td></tr></table></figure>\n<p>çœ‹åˆ°äº†æ²¡ï¼Œå¯¹äºè¿™ç§tagï¼Œå¹¶æ²¡æœ‰æä¾›commitä¹‹å¤–çš„ä»»ä½•ä¿¡æ¯ã€‚</p>\n<p>å¦‚æœä½ æƒ³è¦å¯¹å‡ å¤©ä¹‹å‰çš„æŸä¸€ä¸ªcommitæ‰“tagï¼Œæ€ä¹ˆåŠï¼Ÿéš¾é“gitåªèƒ½åœ¨æœ€æ–°æäº¤ä¸Šæ‰“Tagå—ï¼Ÿå›¾æ ·å›¾æ£®ç ´ï¼</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git tag -a v1.2 9fceb02</span><br><span class=\"line\">$ git tag</span><br><span class=\"line\">v0.1</span><br><span class=\"line\">v1.2</span><br><span class=\"line\">v1.3</span><br><span class=\"line\">v1.4</span><br><span class=\"line\">v1.4-lw</span><br><span class=\"line\">v1.5</span><br><span class=\"line\"></span><br><span class=\"line\">$ git show v1.2</span><br><span class=\"line\">tag v1.2</span><br><span class=\"line\">Tagger: Scott Chacon &amp;lt;schacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Mon Feb 9 15:32:16 2009 -0800</span><br><span class=\"line\"></span><br><span class=\"line\">version 1.2</span><br><span class=\"line\">commit 9fceb02d0ae598e95dc970b74767f19372d61af8</span><br><span class=\"line\">Author: Magnus Chacon &amp;lt;mchacon@gee-mail.com&amp;gt;</span><br><span class=\"line\">Date:   Sun Apr 27 20:43:35 2008 -0700</span><br><span class=\"line\"></span><br><span class=\"line\">    updated rakefile</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<p>çœ‹åˆ°æ²¡ï¼Œåªéœ€è¦åœ¨åé¢æ‹¼ä¸Šchecksumï¼ˆå¯ä»¥åªæ˜¯ä¸€éƒ¨åˆ†ï¼‰ï¼Œå°±å¯ä»¥äº†</p>\n<p>æŒ‰ç…§ä¸Šé¢çš„æŒ‡ç¤ºï¼Œä½ åœ¨æœ¬åœ°æ‰“å¥½äº†Tagï¼Œè®©æˆ‘ä»¬æŠŠå®ƒæ¨é€åˆ°ä»“åº“</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push origin v1.5</span><br><span class=\"line\">Counting objects: 14, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Delta compression using up to 8 threads.</span><br><span class=\"line\">Compressing objects: 100% (12/12), <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Writing objects: 100% (14/14), 2.05 KiB | 0 bytes/s, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Total 14 (delta 3), reused 0 (delta 0)</span><br><span class=\"line\">To git@github.com:schacon/simplegit.git</span><br><span class=\"line\"> * [new tag]         v1.5 &gt; v1.5</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœtagå¾ˆå¤šï¼Œç”¨å¤æ•°ï¼</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git push origin --tags</span><br><span class=\"line\">Counting objects: 1, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Writing objects: 100% (1/1), 160 bytes | 0 bytes/s, <span class=\"keyword\">done</span>.</span><br><span class=\"line\">Total 1 (delta 0), reused 0 (delta 0)</span><br><span class=\"line\">To git@github.com:schacon/simplegit.git</span><br><span class=\"line\"> * [new tag]         v1.4 &gt; v1.4</span><br><span class=\"line\"> * [new tag]         v1.4-lw &gt; v1.4-lw</span><br></pre></td></tr></table></figure>\n<p>tagæœ¬èº«æ˜¯æ— æ³•è¿›è¡Œä¿®æ”¹çš„ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿è¯äº†ä»£ç çš„å®‰å…¨ï¼Œå½“ç„¶ï¼Œå¦‚æœtagå¯ä»¥éšä¾¿ä¿®æ”¹ï¼Œé‚£å®ƒè·Ÿæ™®é€šçš„branchæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘ä»¬å¯ä»¥å°†tagæ‹‰æˆæœ¬åœ°ä¸€ä¸ªbranchï¼Œç”¨<code>git checkout -b [branchname] [tagname]</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git checkout -b version2 v2.0.0</span><br><span class=\"line\">Switched to a new branch <span class=\"string\">'version2'</span></span><br></pre></td></tr></table></figure>\n<h4 id=\"Git-Aliaesï¼ˆåˆ«åï¼‰\"><a href=\"#Git-Aliaesï¼ˆåˆ«åï¼‰\" class=\"headerlink\" title=\"Git Aliaesï¼ˆåˆ«åï¼‰\"></a>Git Aliaesï¼ˆåˆ«åï¼‰</h4><p>ï¼ˆä¹Ÿè®¸æ˜¯ä½¿ç”¨Gitä¸å¤Ÿé‡åº¦çš„åŸå› ï¼Œç¬”è€…è®¤ä¸ºè¿™éƒ¨åˆ†å†…å®¹å¹¶ä¸ååˆ†é‡è¦ï¼Œå‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤éƒ½å¾ˆå®¹æ˜“è®°ï¼Œä¸å¸¸ç”¨çš„èµ·äº†åˆ«åä¹Ÿè®°ä¸ä½â€¦ï¼‰</p>\n<p>ç”¨<code>git config --global alias.[alias_name] [original_command]</code>æ¥åˆ›å»ºaliasï¼Œåœ¨<code>~/.gitconfig</code>ä¸­æŸ¥çœ‹è¿™äº›aliasã€‚</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global alias.co checkout</span><br><span class=\"line\">$ git config --global alias.br branch</span><br><span class=\"line\">$ git config --global alias.ci commit</span><br><span class=\"line\">$ git config --global alias.st status</span><br></pre></td></tr></table></figure>\n<p>æ¯”å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºè¿™æ ·çš„aliasï¼Œæ¥å›æ»šä¸€ä¸ªstage</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global alias.unstage <span class=\"string\">'reset HEAD --'</span></span><br></pre></td></tr></table></figure>\n<p>è¿™æ ·ï¼Œä½ å°±å¯ä»¥ç”¨</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git unstage fileA</span><br></pre></td></tr></table></figure>\n<p>æ¥ä»£æ›¿</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git reset HEAD -- fileA</span><br></pre></td></tr></table></figure>\n<p>å¦‚æœä½ æƒ³è¦è¿è¡ŒGitå¤–éƒ¨å‘½ä»¤ï¼ˆrather than a Git subcommandï¼‰ï¼Œåœ¨å‘½ä»¤å‰åŠ ä¸Š<code>!</code>ï¼ˆåŸæ–‡ç»™çš„è§£é‡Šæ˜¯<code>This is useful if you write your own tools that work with a Git repository.</code>ç¬”è€…ç»å°½è„‘æ±ä¹Ÿæ²¡æœ‰æƒ³åˆ°è¿™ä¸ªåŠŸèƒ½ç”¨å¤„åœ¨å“ªé‡Œâ€¦ï¼‰</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git config --global alias.visual <span class=\"string\">'!gitk'</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"novaè‡ªåŠ¨åŒ–æµ‹è¯•æ¢ç´¢ä¸å®è·µ","url":"https://lilei.pro/2016/01/28/Nova-Automation-Practice/","content":"<hr>\n<h4 id=\"è‡ªåŠ¨åŒ–æµ‹è¯•å¯è¡Œæ€§åˆ†æ\"><a href=\"#è‡ªåŠ¨åŒ–æµ‹è¯•å¯è¡Œæ€§åˆ†æ\" class=\"headerlink\" title=\"è‡ªåŠ¨åŒ–æµ‹è¯•å¯è¡Œæ€§åˆ†æ\"></a>è‡ªåŠ¨åŒ–æµ‹è¯•å¯è¡Œæ€§åˆ†æ</h4><p>é’ˆå¯¹<code>android-nova</code>é¡¹ç›®ï¼Œæ¯ä¸ªæ–°ç‰ˆæœ¬å‘å¸ƒä¹‹å‰ï¼ŒRD éƒ½éœ€è¦è¿›è¡Œä¸»æµç¨‹å›å½’ï¼Œè¿™æ˜¯ä¸€é¡¹é‡å¤ä¸”è€—æ—¶çš„å·¥ä½œï¼Œâ€œé‡å¤â€æ˜¯æŒ‡æ¯2ï½3å‘¨å‘ç‰ˆæ—¶å°±è¦è¿›è¡Œä¸€æ¬¡ï¼Œâ€œè€—æ—¶â€åˆ™å› ä¸ºå¹³å‡ä¸€æ¡ä¸šåŠ¡çº¿è¦ç”¨ä¸€ä¸ªå°æ—¶æ—¶é—´â€”â€”è¿™è¿˜åªæ˜¯å•androidå¹³å°ã€‚<br>å®ç°è‡ªåŠ¨åŒ–åï¼Œå¯ä»¥å¤§å¤§å‡è½» RD è´Ÿæ‹…ï¼Œå¹¶ä¸”å¯åœ¨è¿­ä»£è¿‡ç¨‹ä¸­å»ºç«‹ daily build æœºåˆ¶ï¼ŒåŠæ—©å‘ç°é—®é¢˜ï¼Œæé«˜ææµ‹è´¨é‡ã€‚</p>\n<a id=\"more\"></a>\n<hr>\n<h4 id=\"å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç†è§£\"><a href=\"#å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç†è§£\" class=\"headerlink\" title=\"å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç†è§£\"></a>å¯¹è‡ªåŠ¨åŒ–æµ‹è¯•çš„ç†è§£</h4><p>è¿™é‡Œåªé’ˆå¯¹ UI æ–¹é¢çš„ç™½ç›’æµ‹è¯•</p>\n<ol>\n<li>è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¾“å…¥æ˜¯ç”¨æˆ·æ“ä½œï¼ˆè¾“å…¥ã€ç‚¹å‡»ã€æ»‘åŠ¨ï¼‰ã€ç½‘ç»œè¯·æ±‚è¿”å›</li>\n<li>è‡ªåŠ¨åŒ–æµ‹è¯•çš„è¾“å‡ºæ˜¯ UI æ§ä»¶æ˜¾ç¤º</li>\n</ol>\n<p>è¿™ä¸¤æ­¥éƒ½å¯ä»¥é€šè¿‡ç°æœ‰çš„è‡ªåŠ¨åŒ–å·¥å…·å®Œæˆ</p>\n<hr>\n<h4 id=\"è‡ªåŠ¨åŒ–å·¥å…·é€‰å–\"><a href=\"#è‡ªåŠ¨åŒ–å·¥å…·é€‰å–\" class=\"headerlink\" title=\"è‡ªåŠ¨åŒ–å·¥å…·é€‰å–\"></a>è‡ªåŠ¨åŒ–å·¥å…·é€‰å–</h4><p>ä¹‹å‰ç»„å†…åˆ†äº«äº†2ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼ŒRobutium å’Œ Appiumã€‚æŸ¥é˜…ç›¸å…³èµ„æ–™åï¼Œå‘ç°ç½‘ç»œä¸Šæ¯”è¾ƒæµè¡Œçš„ä¸å¤–ä¹ä¹Ÿå°±æ˜¯è¿™ä¸¤ä¸ªã€‚ç®€å•ç½—åˆ—å‡ºå„è‡ªçš„ç‰¹ç‚¹ï¼š</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Robotium</th>\n<th>Appium</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>æ˜¯å¦å¼€æº</td>\n<td>æ˜¯</td>\n<td>æ˜¯</td>\n</tr>\n<tr>\n<td>æµ‹è¯•ç±»å‹</td>\n<td>é»‘ç›’</td>\n<td>é»‘ç›’</td>\n</tr>\n<tr>\n<td>æ”¯æŒå¹³å°</td>\n<td>Android</td>\n<td>Android, iOS, FirefoxOS</td>\n</tr>\n<tr>\n<td>apkæ˜¯å¦éœ€è¦å†ç¼–è¯‘</td>\n<td>éœ€è¦ï¼Œæµ‹è¯•ä»£ç å¿…é¡»æ‰“å…¥apkåŒ…</td>\n<td>æ— éœ€ï¼Œæµ‹è¯•ä»£ç å•ç‹¬å­˜æ”¾</td>\n</tr>\n<tr>\n<td>å¯æµ‹Appç±»å‹</td>\n<td>åŸç”Ÿï¼Œhybrid</td>\n<td>åŸç”Ÿï¼Œhybridï¼Œç”šè‡³å¯ä»¥é€šè¿‡Safariï¼Chromeæ¥æµ‹è¯•webé¡µé¢</td>\n</tr>\n<tr>\n<td>å®‰å…¨æ€§</td>\n<td>â€œThe most notable limitationâ€, æ“ä½œä»…é™æœ¬ app</td>\n<td>æœªçŸ¥</td>\n</tr>\n<tr>\n<td>ç”¨ä¾‹è¯­è¨€</td>\n<td>Java</td>\n<td>Any WebDriver-compatible language: Java, Python, PHP, C#, OCâ€¦</td>\n</tr>\n<tr>\n<td>å‚è€ƒèµ„æ–™</td>\n<td><a href=\"https://github.com/Androooid/treasure/blob/master/source/lockerlou/posts/android_robotium.md\" target=\"_blank\" rel=\"noopener\">Android Robotiumè‡ªåŠ¨åŒ–æµ‹è¯•ä½¿ç”¨æ‰‹å†Œ by æ¥¼èµŸç¨‹</a></td>\n<td><a href=\"https://github.com/Androooid/treasure/blob/master/source/qsqqinsao/posts/android_appium.md\" target=\"_blank\" rel=\"noopener\">Android Appiumè‡ªåŠ¨åŒ–æµ‹è¯•æŒ‡å¯¼æ‰‹å†Œ by è¦ƒå°‘å¼º</a></td>\n</tr>\n</tbody>\n</table>\n<p>æ¯”è¾ƒä¹‹åï¼Œé€‰ç”¨Appiumä½œä¸ºå®è·µæ‰‹æ®µ</p>\n<hr>\n<h4 id=\"éš¾ç‚¹\"><a href=\"#éš¾ç‚¹\" class=\"headerlink\" title=\"éš¾ç‚¹\"></a>éš¾ç‚¹</h4><p>å¦‚æœè¦å®ç°è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œæ€»ç»“ä¸‹æ¥ï¼Œä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ˜¯éš¾ç‚¹ï¼Œä¹Ÿæ˜¯å¿…é¡»è§£å†³çš„é—®é¢˜</p>\n<ol>\n<li>é¢„è®¾æ•°æ®ä¿å­˜ã€è¯»å–</li>\n<li>é¢„è®¾æ•°æ®å¡«å…¥ç»„ä»¶</li>\n<li>æ¨¡æ‹Ÿè¯·æ±‚å‘é€æ¥æ”¶</li>\n<li>æ£€éªŒæ¥æ”¶åçš„ç•Œé¢å±•ç¤º</li>\n</ol>\n<p>å…¶ä¸­<code>2</code>&amp;<code>4</code>å¯ä»¥ç”±æµ‹è¯•æ¡†æ¶å¸®åŠ©å®Œæˆï¼Œ<code>1</code>&amp;<code>3</code>æ¯”è¾ƒæ£˜æ‰‹ï¼Œè¯¦è§æœ¬æ–‡è®²è¿°ã€‚</p>\n<hr>\n<h4 id=\"Appiumé…ç½®ä¸è¿è¡Œ\"><a href=\"#Appiumé…ç½®ä¸è¿è¡Œ\" class=\"headerlink\" title=\"Appiumé…ç½®ä¸è¿è¡Œ\"></a>Appiumé…ç½®ä¸è¿è¡Œ</h4><p>å†æ—¶ä¸€å¤©æ‰è·‘é€šäº†Appiumçš„demoï¼Œä¸å¾—ä¸å†æ¬¡æ„Ÿæ…¨ï¼Œä¸­æ–‡åšå®¢çš„å¸®åŠ©çš„ç¡®æ˜¯å¤ªå¤ªå¤ªå¤ªå°‘äº†ã€‚é¦–å…ˆè¦ç¡®è®¤å¹³å°æ˜¯OS Xï¼Œå…¶æ¬¡è¿˜è¦æ˜¯ä¸ºandroidè¿›è¡Œæµ‹è¯•ï¼Œå¥½ä¸å®¹æ˜“æ‰¾åˆ°äº†ä¸€äº›ï¼Œå‘ç°å¤§å®¶éƒ½æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä¸çŸ¥é“æ˜¯è°æŠ„è°ã€‚å…³é”®æ˜¯ä½ æŠ„æ¥æŠ„å»ï¼ŒæŠ„çš„å‡€æ˜¯äº›é”™è¯¯å†…å®¹â€¦â€¦</p>\n<p>è‡ªå·±é€”ä¸­é‡åˆ°ä¸€äº›æ›²æŠ˜ï¼Œè®°å½•å¦‚ä¸‹</p>\n<ol>\n<li>ç†è§£Appiumæ‰€ä½¿ç”¨çš„<code>client-server-app</code>çš„ç»“æ„ï¼Œ<code>client</code>çš„ä»£ç ä¸åº”è¯¥å†™åœ¨<code>app</code>é‡Œ<br>æˆ‘æ˜¯è¿™ä¹ˆå¤„ç†çš„ï¼š<ul>\n<li>clientï¼šmavené¡¹ç›®ï¼Œç”¨IntelliJç¼–å†™ï¼Œæµ‹è¯•ä»£ç ä½äº<code>test/java/com.leili.demo.Demo</code>ï¼Œæ³¨æ„mavené¡¹ç›®è¦åœ¨pomé‡Œå¤„ç†å¥½ä¾èµ–ï¼ˆè§ä»£ç ï¼‰</li>\n<li>serverï¼šAppiumçš„GUIç•Œé¢ï¼Œå®Œæˆé…ç½®å³å¯ä½¿ç”¨ï¼Œä¸éœ€äºŒæ¬¡å¼€å‘</li>\n<li>appï¼šgradleé¡¹ç›®ï¼Œç”¨AndroidStudioç¼–å†™ï¼Œä¸å«æµ‹è¯•ä»£ç </li>\n</ul>\n</li>\n<li>é…ç½®<code>ANDROID_HOME</code>æ—¶ï¼Œè®°å¾—é…è‡³åˆ°ç³»ç»Ÿé»˜è®¤çš„bashé…ç½®æ–‡ä»¶ä¸­ã€‚åˆšå¼€å§‹æ—¶è‡ªå·±åªå†™åˆ°äº†<code>~/.zshrc</code>é‡Œï¼ˆå› ä¸ºå¹³æ—¶ç”¨çš„æ˜¯zshï¼‰ï¼Œç»“æœè¿è¡Œæµ‹è¯•ç”¨ä¾‹æ—¶æŠ¥é”™æ‰¾ä¸åˆ°<code>ANDROID_HOME</code>ï¼Œä¸Šç½‘æŸ¥æ‰¾åä¹Ÿæ²¡æœ‰ç»“æœï¼ˆbaiduæ£€ç´¢å‡ºçš„ä¸­æ–‡åšå®¢å¤§å¤šæ˜¯è®²è·¯å¾„ä¸­ä¸è¦æœ‰ç©ºæ ¼â€¦ï¼‰ï¼Œæœ€åé†é†çŒé¡¶æç„¶å¤§æ‚Ÿï¼Œæ”¹äº†<code>~/.bash_profile</code>ï¼Œæ‰ç”Ÿæ•ˆ</li>\n<li>åœ¨å†™Appiumæµ‹è¯•ç”¨ä¾‹ï¼ˆJavaï¼‰æ—¶ï¼Œåœ¨EditTextè¿›è¡Œè¾“å…¥ï¼Œç›´æ¥<code>element.sendKeys(&quot;foooooo&quot;)</code>å³å¯ï¼Œä¸è¦æƒ³å½“ç„¶åœ¨å‰é¢åŠ ä¸Š<code>element.click()</code>ï¼Œå¦åˆ™ä¼šæœ‰å¥‡æ€ªçš„äº‹æƒ…å‘ç”Ÿ</li>\n</ol>\n<p><strong>mavenä¾èµ–</strong></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.seleniumhq.selenium<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>selenium-java<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.48.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>junit<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.11<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.apache.httpcomponents<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>httpclient<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>4.5.1<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>io.appium<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>java-client<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>3.3.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>commons-logging<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">       <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">           <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>1.2.14<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\">       <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"å¯åŠ¨-Activity\"><a href=\"#å¯åŠ¨-Activity\" class=\"headerlink\" title=\"å¯åŠ¨ Activity\"></a>å¯åŠ¨ Activity</h4><p>ç”±äºAppiumç›®å‰åªèƒ½ç”¨<code>åŒ…åï¼‹ç±»å</code>çš„æ–¹å¼å¯åŠ¨ï¼Œä¸æ”¯æŒé€šè¿‡intentå¯åŠ¨Activityã€‚å¦‚æœéœ€è¦åœ¨å¯åŠ¨ä¸­æºå¸¦å‚æ•°ï¼Œè¿™é‡Œæä¾›ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼šåœ¨debugé¢æ¿ä¸­é€šè¿‡schemeç›´æ¥è¿›å…¥ç›®æ ‡Activityã€‚è¿™ç§åšæ³•è¿‡äºä¾èµ–Debugé¢æ¿ï¼Œå…¶å®å¹¶ä¸æ˜¯ä¸€ç§å¥½çš„å®ç°æ–¹å¼ã€‚</p>\n<p>å¸Œæœ›Appiumå›¢é˜Ÿèƒ½å¤Ÿåœ¨åç»­æ›´æ–°ä¸­æä¾›æ›´å¤šçš„å¯åŠ¨Activityé€”å¾„ã€‚</p>\n<p><strong>Appiumä¸­å¯åŠ¨Activityçš„æ–¹æ³•ï¼Œä»£ç ä½äº<code>AndroidDriver.java</code></strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> appPackage</span></span><br><span class=\"line\"><span class=\"comment\"> *            The package containing the activity. [Required]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> appActivity</span></span><br><span class=\"line\"><span class=\"comment\"> *            The activity to start. [Required]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> appWaitPackage</span></span><br><span class=\"line\"><span class=\"comment\"> *            Automation will begin after this package starts. [Optional]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> appWaitActivity</span></span><br><span class=\"line\"><span class=\"comment\"> *            Automation will begin after this activity starts. [Optional]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param</span> stopApp</span></span><br><span class=\"line\"><span class=\"comment\"> *            If true, target app will be stopped. [Optional]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@example</span> driver.startActivity(\"com.foo.bar\", \".MyActivity\", null, null, true);</span></span><br><span class=\"line\"><span class=\"comment\"> *</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@see</span> StartsActivity#startActivity(String, String, String, String)</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">startActivity</span><span class=\"params\">(String appPackage, String appActivity,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">        String appWaitPackage, String appWaitActivity, <span class=\"keyword\">boolean</span> stopApp)</span></span></span><br><span class=\"line\"><span class=\"function\">        <span class=\"keyword\">throws</span> IllegalArgumentException</span>;</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"æµ‹è¯•æ•°æ®å­˜å–\"><a href=\"#æµ‹è¯•æ•°æ®å­˜å–\" class=\"headerlink\" title=\"æµ‹è¯•æ•°æ®å­˜å–\"></a>æµ‹è¯•æ•°æ®å­˜å–</h4><p>å¯¹äºå¦‚ä½•è¯»å–mockæ•°æ®ï¼Œæœ‰ä¸¤ç§æ€è·¯</p>\n<ol>\n<li><p>æ‰‹æœº/æ¨¡æ‹Ÿå™¨è¿æ¥mockæœåŠ¡å™¨åï¼Œåœ¨mockæœåŠ¡å™¨ä¸Šé…ç½®ï¼Œå®¢æˆ·ç«¯æ¯æ¬¡è¯·æ±‚ä¼šå‘é€å‡ºå»ï¼Œä½†ä¸æ˜¯å‘é€åˆ°çœŸå®çš„apiåç«¯ï¼Œè€Œæ˜¯å‘é€åˆ°mockæœåŠ¡å™¨</p>\n<ul>\n<li>appä»£ç æ— éœ€å˜åŠ¨</li>\n<li>å®ç°ç®€å•</li>\n<li>android/iOSä¸¤ä¸ªå¹³å°å¯ä»¥å…±ç”¨åŒä¸€å¥—æ•°æ®ã€åŒä¸€ä¸ªmockæœåŠ¡å™¨</li>\n<li>ä¾èµ–mockæœåŠ¡å™¨ï¼Œç”šè‡³å¯èƒ½éœ€è¦è‡ªå·±æ­å»ºmockæœåŠ¡å™¨</li>\n<li>è¦è€ƒè™‘å¦‚ä½•ä½¿æ¨¡æ‹Ÿå™¨åœ¨mockæœåŠ¡å™¨ä¸Šè¿›è¡Œæ³¨å†Œã€‚å·²æœ‰çš„æ‰«äºŒç»´ç æ–¹å¼æ˜¾ç„¶ä¸ç°å®</li>\n</ul>\n</li>\n<li><p>å°†mockæ•°æ®å­˜å…¥æ‰‹æœº/æ¨¡æ‹Ÿå™¨ï¼Œæœ¬åœ°è¯»å–</p>\n<ul>\n<li>ä¸ä¾èµ–mockæœåŠ¡å™¨</li>\n<li>éœ€è¦appå†…éƒ¨æ”¯æŒï¼Œå®ç°DBã€Serviceç­‰åŠŸèƒ½ï¼Œè¾ƒå¤æ‚</li>\n<li>android/iOSå„è‡ªéƒ½éœ€è¦æ”¹åŠ¨åº•å±‚ä»£ç ä»¥è¿›è¡Œæ”¯æŒ</li>\n<li>ä»ç„¶éœ€è¦è€ƒè™‘æ­£å¸¸å¼€å¯çš„appå¦‚ä½•è‡ªåŠ¨åˆ‡æ¢åˆ°æµ‹è¯•æ¨¡å¼</li>\n</ul>\n</li>\n</ol>\n<p>æ¯”è¾ƒåï¼Œé€‰ç”¨<code>1</code>ä½œä¸ºæœ€åçš„å®ç°æ–¹å¼ï¼ŒåŒæ—¶åŸºäº<code>mobile-httpwatch</code>æ­å»ºäº†è‡ªå·±çš„mockæœåŠ¡å™¨ï¼Œæä¾›é¢„åŠ è½½é…ç½®çš„æ¥å£ã€‚</p>\n<hr>\n<h4 id=\"Show-Time\"><a href=\"#Show-Time\" class=\"headerlink\" title=\"Show Time\"></a>Show Time</h4><p>ä¸»æµç¨‹æµ‹è¯•ç”¨ä¾‹ï¼ˆé¢„è®¢ï¼‰ï¼š<a href=\"https://www.tapd.cn/20007421/sparrow/tcase/view/1120007421001016788?url_cache_key=53da847c3c5c703bb01d1f98ee33bb8f\" target=\"_blank\" rel=\"noopener\"><strong>test case</strong></a></p>\n<p><img src=\"/img/160128_nova_auto_test/test_case_pic.png\" alt=\"\"></p>\n<p>è¿™æ¡ç”¨ä¾‹çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæ¶‰åŠåˆ°è°ƒç”¨ä»¥ä¸‹3ä¸ªæ¥å£:</p>\n<ol>\n<li><code>getbookingcontext.yy</code>ï¼Œè·å–å•†æˆ·é¢„è®¢é…ç½®</li>\n<li><code>getbookingholidays.yy</code>ï¼Œè·å–èŠ‚å‡æ—¥ä¿¡æ¯ï¼ˆå•†æˆ·æ— å…³ï¼‰</li>\n<li><code>book.yy</code>ï¼Œä¸‹è®¢å•</li>\n</ol>\n<p>å‡ºäºç®€åŒ–çš„è€ƒè™‘ï¼Œæˆ‘ä»¬æœ¬æ¬¡åªå¯¹æ¥å£<code>3</code>è¿›è¡Œmockã€‚</p>\n<p>æˆªå›¾åº”å¦‚ä¸‹æ‰€ç¤ºï¼š</p>\n<p>è¾“å…¥</p>\n<p><img src=\"/img/160128_nova_auto_test/input.png\" alt=\"\"></p>\n<p>è¾“å‡º</p>\n<p><img src=\"/img/160128_nova_auto_test/output.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"Q-é¢„è®¾çš„mockæ•°æ®è¦ä¿å­˜åœ¨TestCaseä¸­è¿˜æ˜¯ä¿å­˜åœ¨Serveré‡Œï¼Ÿ\"><a href=\"#Q-é¢„è®¾çš„mockæ•°æ®è¦ä¿å­˜åœ¨TestCaseä¸­è¿˜æ˜¯ä¿å­˜åœ¨Serveré‡Œï¼Ÿ\" class=\"headerlink\" title=\"Q: é¢„è®¾çš„mockæ•°æ®è¦ä¿å­˜åœ¨TestCaseä¸­è¿˜æ˜¯ä¿å­˜åœ¨Serveré‡Œï¼Ÿ\"></a>Q: é¢„è®¾çš„mockæ•°æ®è¦ä¿å­˜åœ¨TestCaseä¸­è¿˜æ˜¯ä¿å­˜åœ¨Serveré‡Œï¼Ÿ</h4><p>æœ‰ä¸¤ç§æ–¹æ¡ˆ</p>\n<ol>\n<li>mock data ä¿å­˜åœ¨ TestCase ä¾§ï¼Œæ¯æ¬¡ç”¨ä¾‹æ‰§è¡Œå‰ï¼ŒTestCase æŠŠæ•°æ®ä¼ ç»™ Serverï¼ˆè¿™ç§æ–¹æ¡ˆæ¯æ¬¡ä¼ é€’æ•°æ®é‡è¿‡å¤§ï¼‰</li>\n<li>mock data ä¿å­˜åœ¨ Server ä¾§ï¼Œæ¯æ¬¡ç”¨ä¾‹æ‰§è¡Œå‰ï¼ŒTestCase æŠŠ mock data id ä¼ ç»™ Server</li>\n</ol>\n<p>æ¯ä¸ª case å¯¹åº”ä¸€å¥— mock data ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ¥å£æˆ–è€…å¤šä¸ªæ¥å£çš„æ•°æ®ã€‚</p>\n<hr>\n<h4 id=\"åŠŸèƒ½ç‚¹å¼€å‘è¿›åº¦è¡¨\"><a href=\"#åŠŸèƒ½ç‚¹å¼€å‘è¿›åº¦è¡¨\" class=\"headerlink\" title=\"åŠŸèƒ½ç‚¹å¼€å‘è¿›åº¦è¡¨\"></a>åŠŸèƒ½ç‚¹å¼€å‘è¿›åº¦è¡¨</h4><p>||çŠ¶æ€|åŠŸèƒ½ç‚¹|å¤‡æ³¨|<br>|1|done|test engine å‘é€ pre-req ï¼Œå‘ŠçŸ¥ server caseid||<br>|2|done|server æ”¶åˆ°è¯·æ±‚||<br>|3|done|server è§£æè¯·æ±‚ä¸­çš„ caseid||<br>|4|done|server æ ¹æ® caseid ï¼ŒåŠ è½½æœ¬åœ°å¯¹åº” mock data ï¼ŒåŠ è½½å®Œæˆåå‘ŠçŸ¥ test engine||<br>|5|done|test engine é©±åŠ¨ client è¿›è¡Œæ³¨å†Œ||<br>|6|done|test engine é©±åŠ¨ client å‘é€çœŸå®è¯·æ±‚||<br>|7|done|server æ ¹æ®çœŸå®è¯·æ±‚ï¼Œè¿”å›å·²ç»å‡†å¤‡å¥½çš„ mock data||<br>|8|done|client è·å¾— mock data||<br>|9|done|test engine è¿›è¡Œè‡ªåŠ¨åŒ– UI æ£€éªŒ||<br>|10||test engine UI æ ¡éªŒå®Œæˆåï¼Œå‘é€ post-reqï¼Œå‘ŠçŸ¥ server æ¸…é™¤ mock data|å¯é€‰|<br>|11||server æ¥æ”¶åˆ° post-req åï¼Œæ¸…é™¤ mock data|å¯é€‰|</p>\n<hr>\n<h4 id=\"ä¸€äº›nodejså‡½æ•°æ–¹æ³•\"><a href=\"#ä¸€äº›nodejså‡½æ•°æ–¹æ³•\" class=\"headerlink\" title=\"ä¸€äº›nodejså‡½æ•°æ–¹æ³•\"></a>ä¸€äº›<code>nodejs</code>å‡½æ•°æ–¹æ³•</h4><p>å¤„ç†<code>get</code>è¯·æ±‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- http:<span class=\"comment\">//appmock.dp/mockconfig.do?caseid=1024 --&gt;</span></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(url.parse(request.url, <span class=\"literal\">true</span>).query.caseid); <span class=\"comment\">// log '1024' here</span></span><br><span class=\"line\">response.writeHead(<span class=\"number\">200</span>, &#123;</span><br><span class=\"line\">    <span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain;charset=utf-8\"</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">response.end();</span><br></pre></td></tr></table></figure>\n<p>å¤„ç†<code>post</code>è¯·æ±‚</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> postData = <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">request.addListener(<span class=\"string\">\"data\"</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">postDataChunk</span>) </span>&#123;</span><br><span class=\"line\">    postData += postDataChunk;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">request.addListener(<span class=\"string\">\"end\"</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'æ•°æ®æ¥æ”¶å®Œæ¯•'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">var</span> params = querystring.parse(postData);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(params);</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(params[<span class=\"string\">\"num\"</span>]); <span class=\"comment\">/// &#123;num=1024, name=lilei&#125;, log '1024' here</span></span><br><span class=\"line\">    response.writeHead(<span class=\"number\">500</span>, &#123;</span><br><span class=\"line\">        <span class=\"string\">\"Content-Type\"</span>: <span class=\"string\">\"text/plain;charset=utf-8\"</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    response.end(<span class=\"string\">\"æ•°æ®æäº¤å®Œæ¯•\"</span>);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<p>è¯»å–æ–‡ä»¶ï¼ˆåŒæ­¥ï¼‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> content = fs.readFileSync(<span class=\"string\">'/Users/leili/Downloads/7'</span>);</span><br><span class=\"line\">config = parseJson(content);</span><br><span class=\"line\">user.setMockConfig(config);</span><br></pre></td></tr></table></figure>\n<p>è¯»å–æ–‡ä»¶ï¼ˆå¼‚æ­¥ï¼‰</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">fs = <span class=\"built_in\">require</span>(<span class=\"string\">\"fs\"</span>);</span><br><span class=\"line\">fs.readFile(<span class=\"string\">'/Users/leili/Downloads/2'</span>, <span class=\"string\">'utf8'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, data</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(data);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure>\n<hr>\n<h4 id=\"é‡åˆ°çš„é—®é¢˜\"><a href=\"#é‡åˆ°çš„é—®é¢˜\" class=\"headerlink\" title=\"é‡åˆ°çš„é—®é¢˜\"></a>é‡åˆ°çš„é—®é¢˜</h4><ul>\n<li>é¢„è®¢å¯èƒ½å¯¹å·²è¿‡æ—¶é—´æœ‰ä¸€äº›åˆ¤æ–­ï¼Œå¯¼è‡´åœ¨çº¿é¢„è®¢é¡µæ— æ³•ä½¿ç”¨mockæ•°æ®ï¼ŒåŸå› æœªæ˜</li>\n</ul>\n<hr>\n<h4 id=\"åè¿‡æ¥ï¼Œä¸€äº›æ€è€ƒ\"><a href=\"#åè¿‡æ¥ï¼Œä¸€äº›æ€è€ƒ\" class=\"headerlink\" title=\"åè¿‡æ¥ï¼Œä¸€äº›æ€è€ƒ\"></a>åè¿‡æ¥ï¼Œä¸€äº›æ€è€ƒ</h4><blockquote>\n<p>çœŸçš„éœ€è¦è‡ªåŠ¨åŒ–å—ï¼ŸUI æœ¬èº«åšçš„é€»è¾‘å°±å¾ˆå°‘ï¼Œå¦‚æœè¿”å›æ•°æ®æ˜¯æ­£ç¡®çš„ï¼ŒUI æ˜¾ç¤ºä¹Ÿå‡ ä¹ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä¸ºä½•è¦å¦‚æ­¤å¤šç²¾åŠ›æ¥å†™è‡ªåŠ¨åŒ– case</p>\n</blockquote>\n<ul>\n<li>å‡†ç¡®åº¦ï¼šæ¯ä¸€ä¸ªæ§ä»¶ï¼Œå±•ç¤ºä»€ä¹ˆå†…å®¹ï¼Ÿ</li>\n<li>æ•°é‡ï¼šcase æ•°é‡å¤§ï¼Œè®°ä¸ä½</li>\n</ul>\n<hr>\n<h4 id=\"æŠ•å…¥åˆ°ç”Ÿäº§ä¸­ï¼Œä¼šé‡åˆ°çš„é—®é¢˜\"><a href=\"#æŠ•å…¥åˆ°ç”Ÿäº§ä¸­ï¼Œä¼šé‡åˆ°çš„é—®é¢˜\" class=\"headerlink\" title=\"æŠ•å…¥åˆ°ç”Ÿäº§ä¸­ï¼Œä¼šé‡åˆ°çš„é—®é¢˜\"></a>æŠ•å…¥åˆ°ç”Ÿäº§ä¸­ï¼Œä¼šé‡åˆ°çš„é—®é¢˜</h4><ul>\n<li>å‰æœŸå‡†å¤‡é‡å¤§ï¼šæ‰’æµ‹è¯•æ•°æ®ï¼Œé€ å„ç§caseï¼ˆå®šé‡‘ã€é¢„è®¢æˆåŠŸã€å¤±è´¥ï¼Œå•†å®¶è¥ä¸šä¸­ã€æš‚æœªè¥ä¸šç­‰å„ç§çŠ¶æ€ï¼‰</li>\n<li>éš¾ä»¥å¯¹å¸ƒå±€ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ã€ç¼©è¿›ç­‰è¿›è¡Œæµ‹è¯•</li>\n<li>å³ä½¿æ˜¯ä½¿ç”¨Appiumè¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¹Ÿæ˜¯éœ€è¦rdåšæ”¯æŒçš„ï¼Œqaå¿…é¡»ä»rdå¤„äº†è§£åˆ°è¯¸å¦‚æ§ä»¶idç­‰å±æ€§ï¼Œæ–¹å¯ä»¥å®šä½åˆ°ç›®æ ‡æ§ä»¶è¿›è¡Œæ“ä½œã€‚</li>\n<li>è§†è§‰ä¸Šçœ‹æ˜¯ä¸€ä¸ªTextViewï¼Œè€Œå®é™…ä¸Šæ˜¯ä¸¤ä¸ªTextViewï¼Œä½œä¸ºQAéš¾ä»¥åˆ¤æ–­ï¼ˆå¯èƒ½è¦æ±‚ç†è§£åŠŸèƒ½å…·ä½“å®ç°ï¼‰</li>\n</ul>\n<hr>\n<h4 id=\"mobile-httpwatch-é¡¹ç›®é˜…è¯»ç¬”è®°\"><a href=\"#mobile-httpwatch-é¡¹ç›®é˜…è¯»ç¬”è®°\" class=\"headerlink\" title=\"mobile-httpwatch é¡¹ç›®é˜…è¯»ç¬”è®°\"></a>mobile-httpwatch é¡¹ç›®é˜…è¯»ç¬”è®°</h4><p>è®°å½•çš„å†…å®¹æ¯”è¾ƒçç¢</p>\n<p>web.js  æ³¨å†Œï¼Œè®¾ç½®mockæ•°æ®<br>mockconfig.js   mockè®¾ç½®ç•Œé¢<br>User.js ç”¨æˆ·æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªç”¨æˆ·æœ‰ä¸€ä¸ªMockConfig<br>mock_config.js  é»˜è®¤çš„mockæ•°å€¼<br>html5 çš„ localStorage<br>ProxyFactory.js mock ruleï¼Œé‡ç‚¹çœ‹handleProxyRequestå’ŒmockResponseä¸¤ä¸ªæ–¹æ³•<br>mockConfig = user.getMockRuleForUrl(req.url)<br>Utils.js</p>\n<hr>\n<h4 id=\"å‚è€ƒèµ„æ–™\"><a href=\"#å‚è€ƒèµ„æ–™\" class=\"headerlink\" title=\"å‚è€ƒèµ„æ–™\"></a>å‚è€ƒèµ„æ–™</h4><p><a href=\"http://www.cnblogs.com/lori/p/3437562.html\" target=\"_blank\" rel=\"noopener\">http://www.cnblogs.com/lori/p/3437562.html</a><br><a href=\"http://www.mkyong.com/java/how-to-send-http-request-getpost-in-java\" target=\"_blank\" rel=\"noopener\">http://www.mkyong.com/java/how-to-send-http-request-getpost-in-java</a></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ","è‡ªåŠ¨åŒ–æµ‹è¯•"]},{"title":"æºç¨‹åŠ¨æ€åŠ è½½å®è·µDynamicAPKé¡¹ç›®å­¦ä¹ ","url":"https://lilei.pro/2016/01/18/æºç¨‹åŠ¨æ€åŠ è½½å®è·µDynamicAPKé¡¹ç›®å­¦ä¹ /","content":"<hr>\n<h2 id=\"æœ¯è¯­\"><a href=\"#æœ¯è¯­\" class=\"headerlink\" title=\"æœ¯è¯­\"></a>æœ¯è¯­</h2><p><strong>å®¿ä¸»</strong>ï¼šHost Apkï¼Œæ‰“åŒ…è¿è¡Œçš„æ€»é¡¹ç›®ï¼Œç”¨äºé›†æˆå„ä¸ªå­å·¥ç¨‹ï¼Œç›¸å½“äº<code>android-novaå£³</code>ï¼Œåªæœ‰ä¸€ä¸ª</p>\n<p><strong>æ’ä»¶</strong>ï¼šPluginï¼Œå­å·¥ç¨‹ï¼Œç”±å„ä¸ªä¸šåŠ¡çº¿ç‹¬ç«‹å¼€å‘ï¼Œå¯ä»¥ä¾èµ–<strong>å®¿ä¸»</strong>æä¾›çš„èµ„æºï¼Œä¸€ä¸ªå®¿ä¸»èƒ½å¤Ÿæ‹¥æœ‰å¤šä¸ªæ’ä»¶</p>\n<hr>\n<a id=\"more\"></a>\n<h2 id=\"Andoroid-Build-æµç¨‹\"><a href=\"#Andoroid-Build-æµç¨‹\" class=\"headerlink\" title=\"Andoroid Build æµç¨‹\"></a>Andoroid Build æµç¨‹</h2><p><img src=\"/img/160118_dynamic_apk/android-build-2.png\" alt=\"\"></p>\n<ul>\n<li>Resource Filesï¼šé¡¹ç›®<code>res</code>è·¯å¾„ä¸‹çš„æ–‡ä»¶ï¼ŒåŒ…å«<code>anim</code>ã€<code>drawable</code>ã€<code>layout</code>ã€<code>raw</code>ç­‰</li>\n<li>Source Filesï¼šé¡¹ç›®<code>src</code>è·¯å¾„ä¸‹(å¯¹äº<code>android-nova</code>æ˜¯<code>src/main/java</code>)çš„æ–‡ä»¶</li>\n<li>aapt: å°†<code>.xml</code>æ–‡ä»¶è½¬æ¢ä¸ºjavaç±»å‹</li>\n<li>Generated Source Filesï¼šç”±<code>aapt</code>å·¥å…·ç”Ÿæˆï¼Œå­˜å‚¨åœ¨<code>/gen</code>ç›®å½•</li>\n<li>javacï¼šjavaç¼–è¯‘å™¨ï¼Œç”Ÿæˆ<code>.class</code>æ–‡ä»¶</li>\n<li>dxï¼šå°†<code>.class</code>æ–‡ä»¶è½¬æ¢ä¸ºDVMå¯è¯†åˆ«çš„<code>dex</code>æ–‡ä»¶</li>\n<li>apkbuilderï¼šå°†æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…è¿›<code>apk</code>ä¸­</li>\n<li>zipalignï¼šå°†<code>apk</code>ä¸­æœªç»å‹ç¼©è¿‡çš„æ–‡ä»¶è¿›è¡Œ4å­—èŠ‚å¯¹é½ï¼Œä»¥å‡å°‘è¿è¡Œæ—¶<code>RAM</code>æ¶ˆè€—</li>\n</ul>\n<hr>\n<h2 id=\"ååŒå¼€å‘\"><a href=\"#ååŒå¼€å‘\" class=\"headerlink\" title=\"ååŒå¼€å‘\"></a>ååŒå¼€å‘</h2><h4 id=\"ä¸å¼•ç”¨aaræä¾›çš„å…¬ç”¨UIç»„ä»¶ä¹‹é—´çš„è”ç³»ä¸åŒºåˆ«\"><a href=\"#ä¸å¼•ç”¨aaræä¾›çš„å…¬ç”¨UIç»„ä»¶ä¹‹é—´çš„è”ç³»ä¸åŒºåˆ«\" class=\"headerlink\" title=\"ä¸å¼•ç”¨aaræä¾›çš„å…¬ç”¨UIç»„ä»¶ä¹‹é—´çš„è”ç³»ä¸åŒºåˆ«\"></a>ä¸<code>å¼•ç”¨aaræä¾›çš„å…¬ç”¨UIç»„ä»¶</code>ä¹‹é—´çš„è”ç³»ä¸åŒºåˆ«</h4><ul>\n<li>æœ¬è´¨ä¸Šéƒ½æ˜¯<code>classes.dex</code>ä¸<code>res/</code>ç­‰æ–‡ä»¶çš„é›†åˆ</li>\n<li>ä¾èµ–å…³ç³»ä¸åŒ</li>\n<li>æ˜¯å¦åŒ…å«ä¸šåŠ¡é€»è¾‘</li>\n<li>æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œ<code>Activity</code>æ³¨å†Œ</li>\n</ul>\n<h4 id=\"æ’ä»¶å¼•ç”¨å®¿ä¸»èµ„æº\"><a href=\"#æ’ä»¶å¼•ç”¨å®¿ä¸»èµ„æº\" class=\"headerlink\" title=\"æ’ä»¶å¼•ç”¨å®¿ä¸»èµ„æº\"></a>æ’ä»¶å¼•ç”¨å®¿ä¸»èµ„æº</h4><ul>\n<li>åœ¨<code>java</code>ä»£ç ä¸­ç›´æ¥ç”¨</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123; <span class=\"comment\">// demo2</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.demo2_activity_main);</span><br><span class=\"line\">        TextView textView=(TextView)findViewById(R.id.demo2_textView3);</span><br><span class=\"line\">        textView.setText(R.string.sample_text); <span class=\"comment\">// å®¿ä¸»èµ„æº</span></span><br><span class=\"line\">        ImageView imageView=(ImageView)findViewById(R.id.demo2_imageView2);</span><br><span class=\"line\">        imageView.setImageResource(R.drawable.sample); <span class=\"comment\">// å®¿ä¸»èµ„æº</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<ul>\n<li>åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å¼•ç”¨å®¿ä¸»èµ„æºï¼Œç¼–è¯‘æ—¶ä¼šæŠ¥é”™</li>\n</ul>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/Users/leili/Documents/idea_workspace/BeQuietLee/DynamicAPK/demo2/res/layout/demo2_activity_main.xml:40: error: </span><br><span class=\"line\">Error: No resource found that matches the given name (at <span class=\"string\">'src'</span> with value <span class=\"string\">'@drawable/sample'</span>).</span><br></pre></td></tr></table></figure>\n<h4 id=\"å®¿ä¸»è°ƒèµ·æ’ä»¶\"><a href=\"#å®¿ä¸»è°ƒèµ·æ’ä»¶\" class=\"headerlink\" title=\"å®¿ä¸»è°ƒèµ·æ’ä»¶\"></a>å®¿ä¸»è°ƒèµ·æ’ä»¶</h4><ul>\n<li>å®¿ä¸»<code>AndroidMainifest.xml</code>éœ€è¦å¯¹æ‰€æœ‰æ’ä»¶<code>Activity</code>è¿›è¡Œæ³¨å†Œ</li>\n</ul>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">manifest</span> <span class=\"attr\">xmlns:android</span>=<span class=\"string\">\"http://schemas.android.com/apk/res/android\"</span></span></span><br><span class=\"line\"><span class=\"tag\">    <span class=\"attr\">package</span>=<span class=\"string\">\"ctrip.android.sample\"</span> &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">application</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:name</span>=<span class=\"string\">\"ctrip.android.sample.BundleBaseApplication\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:allowBackup</span>=<span class=\"string\">\"true\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:icon</span>=<span class=\"string\">\"@mipmap/ic_launcher\"</span></span></span><br><span class=\"line\"><span class=\"tag\">        <span class=\"attr\">android:label</span>=<span class=\"string\">\"@string/app_name\"</span></span></span><br><span class=\"line\"><span class=\"tag\">         &gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">activity</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:name</span>=<span class=\"string\">\".MainActivity\"</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:label</span>=<span class=\"string\">\"@string/app_name\"</span> &gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">intent-filter</span>&gt;</span></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">action</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.intent.action.MAIN\"</span> /&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">                <span class=\"tag\">&lt;<span class=\"name\">category</span> <span class=\"attr\">android:name</span>=<span class=\"string\">\"android.intent.category.LAUNCHER\"</span> /&gt;</span></span><br><span class=\"line\">            <span class=\"tag\">&lt;/<span class=\"name\">intent-filter</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">activity</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">activity</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:name</span>=<span class=\"string\">\"ctrip.android.demo1.MainActivity\"</span></span></span><br><span class=\"line\"><span class=\"tag\">             &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">activity</span>&gt;</span></span><br><span class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">activity</span></span></span><br><span class=\"line\"><span class=\"tag\">            <span class=\"attr\">android:name</span>=<span class=\"string\">\"ctrip.android.demo2.MainActivity\"</span></span></span><br><span class=\"line\"><span class=\"tag\">             &gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">activity</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">application</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">manifest</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>startActivityæ—¶éœ€è¦å†™æ˜ç±»çš„å®Œæ•´è·¯å¾„</li>\n</ul>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">startActivity(<span class=\"keyword\">new</span> Intent(getApplicationContext(), Class.forName(<span class=\"string\">\"ctrip.android.demo1.MainActivity\"</span>)));</span><br></pre></td></tr></table></figure>\n<h4 id=\"å¯¹aaptå·¥å…·çš„æ”¹é€ \"><a href=\"#å¯¹aaptå·¥å…·çš„æ”¹é€ \" class=\"headerlink\" title=\"å¯¹aaptå·¥å…·çš„æ”¹é€ \"></a>å¯¹<code>aapt</code>å·¥å…·çš„æ”¹é€ </h4><p>ä¸º<code>aapt</code>å¢åŠ <code>--apk-module</code>å‚æ•°</p>\n<blockquote>\n<p>å¦‚å‰æ‰€è¿°ï¼Œèµ„æºIDå…¶å®æœ‰ä¸€ä¸ªPackageIDçš„å†…éƒ¨å­—æ®µã€‚æˆ‘ä»¬ä¸ºæ¯ä¸ªæ’ä»¶å·¥ç¨‹æŒ‡å®šç‹¬ç‰¹çš„PackageIDå­—æ®µï¼Œè¿™æ ·æ ¹æ®èµ„æºIDå°±å¾ˆå®¹æ˜“åˆ¤æ˜ï¼Œæ­¤èµ„æºéœ€è¦ä»å“ªä¸ªæ’ä»¶apkä¸­å»æŸ¥æ‰¾å¹¶åŠ è½½äº†ã€‚åœ¨åæ–‡çš„èµ„æºåŠ è½½éƒ¨åˆ†ä¼šæœ‰è¿›ä¸€æ­¥é˜è¿°ã€‚</p>\n</blockquote>\n<p>é€šå¸¸é¡¹ç›®ä¸­ç”Ÿæˆçš„<code>R.java</code>ï¼Œä¼šåŒ…å«ç”±<code>aapt</code>ç”Ÿæˆçš„æ‰€æœ‰èµ„æºçš„<code>id</code>ï¼Œä»¥<code>0x7f</code>å¼€å¤´</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">package</span> com.dianping.hui;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">R</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">anim</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> activity_exit=<span class=\"number\">0x7f040000</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> back_enter=<span class=\"number\">0x7f040001</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> back_exit=<span class=\"number\">0x7f040002</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> booking_push_up_out=<span class=\"number\">0x7f040003</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> fade_light_out=<span class=\"number\">0x7f040004</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> gradient_enter=<span class=\"number\">0x7f040005</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> grow_from_bottom=<span class=\"number\">0x7f040006</span>;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">color</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> actionbar_title_color=<span class=\"number\">0x7f0b0000</span>;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">final</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">dimen</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> action_button_height=<span class=\"number\">0x7f0700a6</span>;</span><br><span class=\"line\">        <span class=\"keyword\">public</span> <span class=\"keyword\">static</span> <span class=\"keyword\">int</span> action_button_margin_between=<span class=\"number\">0x7f0700a7</span>;</span><br><span class=\"line\">        <span class=\"comment\">// ...</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// ...</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>0x7f</code>æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Œçœ‹ä¸€ä¸‹åŸæ±åŸå‘³çš„<code>aapt</code>ä¸­çš„é€»è¾‘</p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ResourceTable::ResourceTable(Bundle* bundle, <span class=\"keyword\">const</span> String16&amp; assetsPackage, ResourceTable::PackageType type)</span><br><span class=\"line\"><span class=\"keyword\">ssize_t</span> packageId = <span class=\"number\">-1</span>;</span><br><span class=\"line\"><span class=\"keyword\">switch</span> (mPackageType) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> App:</span><br><span class=\"line\">    <span class=\"keyword\">case</span> AppFeature:</span><br><span class=\"line\">        packageId = <span class=\"number\">0x7f</span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">case</span> System:</span><br><span class=\"line\">        packageId = <span class=\"number\">0x01</span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">case</span> SharedLibrary:</span><br><span class=\"line\">        packageId = <span class=\"number\">0x00</span>;</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">        assert(<span class=\"number\">0</span>);</span><br><span class=\"line\">        <span class=\"keyword\">break</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>DynamicAPKä¸­æ”¹åŠ¨åçš„ç”Ÿæˆ<code>packageId</code>çš„é€»è¾‘ï¼Œä½äº<code>ResourceTable.cpp</code></p>\n<figure class=\"highlight cpp\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ResourceTable::ResourceTable(Bundle* bundle, <span class=\"keyword\">const</span> String16&amp; assetsPackage, ResourceTable::PackageType type)</span><br><span class=\"line\">    : mAssetsPackage(assetsPackage)</span><br><span class=\"line\">    , mPackageType(type)</span><br><span class=\"line\">    , mTypeIdOffset(<span class=\"number\">0</span>)</span><br><span class=\"line\">    , mNumLocal(<span class=\"number\">0</span>)</span><br><span class=\"line\">    , mBundle(bundle)</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">   </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">ssize_t</span> packageId = <span class=\"number\">-1</span>;</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">switch</span> (mPackageType) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> App:</span><br><span class=\"line\">        <span class=\"keyword\">case</span> AppFeature:</span><br><span class=\"line\">            packageId = <span class=\"number\">0x7f</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> System:</span><br><span class=\"line\">            packageId = <span class=\"number\">0x01</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">        <span class=\"keyword\">case</span> SharedLibrary:</span><br><span class=\"line\">            packageId = <span class=\"number\">0x00</span>;</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">            </span><br><span class=\"line\"><span class=\"comment\">//        case Voice:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x34;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Call:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x35;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Search:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x36;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Schedule:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x37;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Train:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x38;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Destination:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x44;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Chat:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x46;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Flight:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x52;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case MyCtrip:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x54;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Pay:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x55;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Foundation:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x56;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Hotel:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x58;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Container:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x61;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case CustomerService:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x62;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case ThirdParty:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x63;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Extend1:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x64;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Extend2:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x65;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Extend3:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x66;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Extend4:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x67;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Extend5:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x68;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\"><span class=\"comment\">//        case Extend6:</span></span><br><span class=\"line\"><span class=\"comment\">//            packageId = 0x69;</span></span><br><span class=\"line\"><span class=\"comment\">//            break;</span></span><br><span class=\"line\">        <span class=\"keyword\">default</span>:</span><br><span class=\"line\">            assert(<span class=\"number\">0</span>);</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(!bundle-&gt;getApkModule().isEmpty())&#123;</span><br><span class=\"line\">        android::String8 apkmoduleVal=bundle-&gt;getApkModule();</span><br><span class=\"line\">        packageId=apkStringToInt(apkmoduleVal);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    </span><br><span class=\"line\">    sp&lt;Package&gt; package = <span class=\"keyword\">new</span> Package(mAssetsPackage, packageId);</span><br><span class=\"line\">    mPackages.add(assetsPackage, package);</span><br><span class=\"line\">    mOrderedPackages.add(package);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// Every resource table always has one first entry, the bag attributes.</span></span><br><span class=\"line\">    const SourcePos unknown(String8(\"????\"), 0);</span><br><span class=\"line\">    getType(mAssetsPackage, String16(<span class=\"string\">\"attr\"</span>), unknown);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>å¦‚æ­¤ä¸€æ¥ï¼Œä¸åŒä¸šåŠ¡çš„èµ„æºè¢«èµ‹äºˆäº†ä¸åŒçš„idï¼Œåœ¨åŠ è½½æ—¶ï¼Œä¾¿è¿›å…¥åˆ°å„ä¸ªä¸šåŠ¡æ‰“å‡ºçš„æ’ä»¶åŒ…é‡Œå¯»æ‰¾èµ„æº.</p>\n<p>åœ¨<code>sub-project-build.gradle</code>ä¸­ï¼Œç»„è£…<code>--apk-module</code>å‚æ•°</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">argv &lt;&lt; <span class=\"string\">'--apk-module'</span></span><br><span class=\"line\">argv &lt;&lt; <span class=\"string\">\"<span class=\"variable\">$resourceId</span>\"</span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n<h2 id=\"åŠ¨æ€åŠ è½½\"><a href=\"#åŠ¨æ€åŠ è½½\" class=\"headerlink\" title=\"åŠ¨æ€åŠ è½½\"></a>åŠ¨æ€åŠ è½½</h2><p>è¿è¡Œæ—¶åŠ è½½èµ„æºï¼Œéœ€è¦çŸ¥é“èµ„æºä»å“ªä¸ªæ’ä»¶ä¸­è·å–ã€‚æ‰€æœ‰æ’ä»¶ä½äºå‹ç¼©åŒ…çš„<code>assets/baseres/</code>è·¯å¾„ä¸‹ã€‚åœ¨è¿è¡Œæ—¶ä¼šåœ¨<code>/data/data/ctrip.android.sample/files/storage/{num}</code>ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶å¤¹ã€‚</p>\n<p><img src=\"/img/160118_dynamic_apk/ctrip_folders.png\" alt=\"\"></p>\n<ul>\n<li><code>1</code>ã€<code>2</code>åˆ†åˆ«å¯¹åº”äº†<code>demo1</code>ã€<code>demo2</code></li>\n<li><code>meta</code>è®°å½•äº†ä¸‹ä¸€ä¸ªå¯ç”¨idï¼Œå³<code>3</code></li>\n<li><code>1/meta</code>ä¸­ä¿å­˜åŒ…å<code>ctrip.android.demo1</code></li>\n<li><code>1/version_1/bundle.zip</code>å°±æ˜¯<code>assets/baseres/ctrip_android_demo1.so</code>ï¼Œå¯ä»¥è§£å‹ç¼©è§‚å¯Ÿ</li>\n<li><code>1/version_1/bundle.dex</code>å…¶å®ä¸<code>bundle.zip</code>è§£å‹ç¼©æ‹¿åˆ°çš„<code>dex</code>æ˜¯ä¸€æ ·çš„</li>\n<li><code>1/version_1/meta</code>æ— ç”¨ï¼ˆå†…å®¹ä¸º<code>file:</code>ï¼‰</li>\n</ul>\n<p>è¿™éƒ¨åˆ†ç›®å½•ä¸æ–‡ä»¶çš„ç®¡ç†ï¼Œæ˜¯é€šè¿‡<code>Bundle</code>ã€<code>Archive</code>æ¥å£å®Œæˆçš„ï¼Œ<code>version_1</code>ã€<code>version_2</code>â€¦<code>version_n</code>åˆ†åˆ«å¯¹åº”ä¸€ä¸ª<code>BundleArchiveRevision</code>ï¼Œå®ƒä»¬ç»Ÿä¸€ç”±<code>BundleAchive</code>ç®¡ç†ã€‚<code>BundleArchive</code>ç”±<code>BundleImpl</code>ç®¡ç†ã€‚å›¾ä¸­æœ‰<code>demo1</code>ã€<code>demo2</code>ï¼Œå¯¹åº”ç€å°±æœ‰2ä¸ª<code>BundleImpl</code>ã€‚å„ä¸ª<code>Bundle</code>çš„å¯åŠ¨ï¼Œæ›´æ–°ï¼Œå¸è½½ï¼Œç”±<code>Framework.java</code>ç®¡ç†ã€‚</p>\n<p>å¯¹åº”å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>\n<p><img src=\"/img/160118_dynamic_apk/ctrip_bundle.jpg\" alt=\"\"></p>\n<h2 id=\"çƒ­ä¿®å¤\"><a href=\"#çƒ­ä¿®å¤\" class=\"headerlink\" title=\"çƒ­ä¿®å¤\"></a>çƒ­ä¿®å¤</h2><p><code>DynamicAPK</code>ä¸­ï¼Œä»…ä»…æä¾›äº†åˆ†åŒ…ã€èµ„æºåŠ è½½çš„demoï¼ŒæœªåŒ…å«hotfixåŠŸèƒ½ã€‚è™½ç„¶å¯ä»¥çœ‹åˆ°<code>HotPatchManager.java</code>ï¼Œä½†å¹¶æ²¡æœ‰çœŸæ­£è¿è¡Œã€‚è¿™é‡Œæˆ‘ä»¬è‡ªå·±æ¥å±±å¯¨ä¸€æ¬¡hotfixçš„è¿‡ç¨‹ã€‚</p>\n<p>é¦–å…ˆäº†è§£ä¸€ä¸‹apkå®‰è£…ä»¥åŠè¿è¡Œæ—¶ä¼šæ“ä½œçš„å‡ ä¸ªç›®å½•ã€‚ä¸‹è½½å¥½çš„<code>apk</code>åœ¨è¿›è¡Œå®‰è£…æ—¶ï¼Œä¼šå¯¹ç³»ç»Ÿä¸­ä»¥ä¸‹å‡ ä¸ªç›®å½•è¿›è¡Œæ“ä½œ</p>\n<ul>\n<li><code>/data/app</code>ï¼šapkå®‰è£…æ—¶ä¼šè¢«å¤åˆ¶åˆ°è¯¥ç›®å½•</li>\n<li><code>/data/dalvik-cache</code>ï¼šå®‰è£…dexæ–‡ä»¶çš„çœŸæ­£ä½ç½®ï¼Œåç»­appå¯åŠ¨å‡ä»æ­¤å¤„è¿›è¡Œload</li>\n<li><code>/data/data</code>ï¼šæ–°å»ºä»¥<code>packageName</code>å‘½åçš„æ–‡ä»¶å¤¹ï¼Œåªæœ‰appè‡ªå·±èƒ½è®¿é—®ï¼Œç”¨äºç®¡ç†æ•°æ®</li>\n</ul>\n<p>åœ¨æ²¡æœ‰rootè¿‡çš„è®¾å¤‡ä¸Šï¼Œåº”ç”¨ç¨‹åºæœ‰æƒé™æ“ä½œçš„ç›®å½•ä»…ä»…æ˜¯<code>/data/data/com.foo.foo</code>ï¼Œæƒ³æ›´æ”¹<code>/data/dalvik-cache</code>ä¸­çš„<code>dex</code>æ–‡ä»¶æ˜¯ä¸å¯èƒ½çš„ã€‚ä½†æ˜¯ï¼Œç»“åˆä¸Šé¢å®Œæˆçš„åŠ¨æ€åŠ è½½å·¥ä½œï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ–°<code>demo1</code>ã€<code>demo2</code>çš„dexæ–‡ä»¶ï¼Œä»è€Œè¾¾åˆ°çƒ­ä¿®å¤çš„ç›®çš„ã€‚</p>\n<p>è¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºä¸€ä¸ªæ›´æ¢æ–‡æ¡ˆçš„demoï¼Œå°†<code>demo2</code>é‡Œé¢<code>textView</code>é¢„è®¾çš„æ–‡æ¡ˆç”±<code>This is sample  resource:</code>æ¢æˆ<code>ä¸‹å›¾æ¥è‡ªäºå®¿ä¸»èµ„æº</code>ã€‚é¦–å…ˆéœ€è¦æŠŠæ”¹å¥½çš„é¡¹ç›®è¿›è¡Œç¼–è¯‘ï¼Œå–å‡º<code>bundle.dex</code>ä¸<code>bundle.zip</code>ï¼ˆè¿™ä¸¤ä¸ªæ–‡ä»¶çš„æ¥æºï¼Œå‰æ–‡å·²ç»æè¿‡ï¼‰ã€‚ç„¶åæŠŠå®ƒä»¬ä¸Šä¼ åˆ°<code>/data/data/com.ctrip.sample/files/storage/2/version_2</code>ã€‚ä¸Šä¼ å®Œæˆåï¼Œä¸‹æ¬¡å¯åŠ¨å°±ä¼šåŠ è½½æˆ‘ä»¬ä¿®æ”¹åçš„dexæ–‡ä»¶ï¼Œå±•ç¤ºæ–°çš„å†…å®¹ã€‚</p>\n<p>è¿™é‡Œç›´æ¥ç”¨<strong>monitor</strong>æ¥æ¨¡æ‹Ÿhotfixæ–‡ä»¶ä¸‹è½½è¿‡ç¨‹ã€‚</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">MainActivity</span> <span class=\"keyword\">extends</span> <span class=\"title\">Activity</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Override</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">protected</span> <span class=\"keyword\">void</span> <span class=\"title\">onCreate</span><span class=\"params\">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">super</span>.onCreate(savedInstanceState);</span><br><span class=\"line\">        setContentView(R.layout.demo2_activity_main);</span><br><span class=\"line\">        TextView textView=(TextView)findViewById(R.id.demo2_textView3);</span><br><span class=\"line\"><span class=\"comment\">//       textView.setText(R.string.sample_text); // å®¿ä¸»èµ„æº</span></span><br><span class=\"line\">        textView.setText(<span class=\"string\">\"ä¸‹å›¾æ¥è‡ªäºå®¿ä¸»èµ„æº\"</span>);</span><br><span class=\"line\">        ImageView imageView=(ImageView)findViewById(R.id.demo2_imageView2);</span><br><span class=\"line\">        imageView.setImageResource(R.drawable.sample); <span class=\"comment\">// å®¿ä¸»èµ„æº</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>hotfixä¹‹å‰</p>\n<p><img src=\"/img/160118_dynamic_apk/hotfix_before.png\" alt=\"\"></p>\n<p>hotfixä¹‹å</p>\n<p><img src=\"/img/160118_dynamic_apk/hotfix_after.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"é™„ä¸€ï¼šæ›´å®Œæ•´çš„ç¼–è¯‘æµç¨‹å›¾\"><a href=\"#é™„ä¸€ï¼šæ›´å®Œæ•´çš„ç¼–è¯‘æµç¨‹å›¾\" class=\"headerlink\" title=\"é™„ä¸€ï¼šæ›´å®Œæ•´çš„ç¼–è¯‘æµç¨‹å›¾\"></a>é™„ä¸€ï¼šæ›´å®Œæ•´çš„ç¼–è¯‘æµç¨‹å›¾</h4><p><img src=\"/img/160118_dynamic_apk/android_build_process.png\" alt=\"\"></p>\n<hr>\n<h4 id=\"é™„äºŒï¼šæ¨èé˜…è¯»\"><a href=\"#é™„äºŒï¼šæ¨èé˜…è¯»\" class=\"headerlink\" title=\"é™„äºŒï¼šæ¨èé˜…è¯»\"></a>é™„äºŒï¼šæ¨èé˜…è¯»</h4><ul>\n<li><a href=\"http://segmentfault.com/a/1190000004086213\" target=\"_blank\" rel=\"noopener\">AndroidåŠ¨æ€åŠ è½½æŠ€æœ¯ ç³»åˆ—ç´¢å¼•</a></li>\n</ul>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"é¡¹ç›®äº¤æ¥é‚£ç‚¹äº‹å„¿","url":"https://lilei.pro/2016/01/15/é¡¹ç›®äº¤æ¥é‚£ç‚¹äº‹å„¿/","content":"<hr>\n<p><a href=\"http://wiki.sankuai.com/pages/viewpage.action?pageId=399281275\" target=\"_blank\" rel=\"noopener\">æºæ–‡æ¡£é“¾æ¥ by æå…¨æ°‘(BigFootprint)</a></p>\n<blockquote>\n<p>2015å¹´æœ«ï¼Œæˆ‘å»åŒ—äº¬ç¾å›¢æ€»éƒ¨è¿›è¡ŒBç«¯Androidæ’å·APPäº¤æ¥ï¼Œå†æ—¶2ä¸ªç¤¼æ‹œã€‚è¿™æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å•ç‹¬æ‰¿æ¥ä¸€æ•´ä¸ªå®¢æˆ·ç«¯é¡¹ç›®çš„äº¤æ¥ï¼ŒåŠ ä¸Šè¿™è¿˜æ˜¯æ¯•ä¸š3å¹´ä»¥æ¥é¦–æ¬¡å‡ºå·®ï¼Œè¿‡ç¨‹ä¸­çŠ¯äº†ä¸€äº›é”™è¯¯ï¼Œä¹Ÿèµ°äº†å¾ˆå¤šå¼¯è·¯ã€‚åŒæ—¶ï¼Œä¸Šæµ·çš„å°ä¼™ä¼´ä»¬åœ¨ä¸ç¾å›¢åŒäº‹è¿›è¡Œç¾å›¢appçš„äº¤æ¥ã€‚äº¤æ¥ç»“æŸåï¼Œå¤§å®¶æ€»ç»“äº†æœ¬æ¬¡é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼ŒåŒæ—¶è¯¦ç»†åˆ—å‡ºäº†ä¸€æ¬¡æˆåŠŸçš„äº¤æ¥åº”è¯¥å®Œæˆå“ªäº›ä»»åŠ¡ã€‚</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<p>ä»¥ä¸‹è¡¨æ ¼æ˜¯ç»¼åˆTeamæ‰€å¯¹æ¥çš„æ‰€æœ‰é¡¹ç›®åˆ—å‡ºçš„å¯¹æ¥é¡¹ï¼Œå®é™…å¯¹æ¥é¡¹ç›®çš„æ—¶å€™å¯èƒ½ä¸ä¼šæ¶‰åŠåˆ°æ‰€æœ‰çš„å†…å®¹ï¼Œå¡«å†™çš„æ—¶å€™è¯·æ³¨æ„ï¼š</p>\n<ol>\n<li>ä¸è¦ç©ºå•å…ƒï¼Œå¦‚æœæ²¡æœ‰ç›¸åº”çš„å¯¹æ¥é¡¹æˆ–è€…ä¸èƒ½ç¡®å®šçš„å†…å®¹ï¼Œè¯·æ³¨æ˜ï¼Œæ¯”å¦‚â€œæ— â€ã€â€œå¾…ç¡®å®šâ€ï¼Œä»¥ä¾¿äºCheckæ•´ä½“æƒ…å†µï¼›</li>\n<li>æ‰€æœ‰çš„Itemï¼Œå¦‚æœéœ€è¦å®è·µçš„ï¼Œè¯·å¯¹æ¥äººå®è·µåˆ°ä½ï¼Œå¹¶å°†æƒé™ç”³è¯·ã€è”ç³»è´£ä»»äººç­‰è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼›</li>\n<li>è¡¨æ ¼æœ¬èº«å†…å®¹æœ‰é™ï¼Œä¸»è¦æ‰®æ¼”æ±‡æ€»è§’è‰²ï¼Œç®€çŸ­çš„å†…å®¹å¯ç›´æ¥å†™åœ¨è¡¨æ ¼ä¸­ï¼Œè¾ƒé•¿çš„å†…å®¹å»ºè®®æ•´ç†æˆæ–‡æ¡£ï¼Œä»¥é“¾æ¥çš„å½¢å¼è®°å½•åœ¨è¡¨æ ¼å†…ï¼›</li>\n<li>äº¤æ¥è¿‡ç¨‹ä¸­è¯·éšæ—¶æ³¨æ„è¡¨æ ¼ä¸­çš„ä¸è¶³ä¹‹å¤„å¹¶åŠæ—¶è¡¥è¶³ï¼›</li>\n<li>äº¤æ¥ä¸€å¼€å§‹å°±å¤åˆ¶è¯¥è¡¨æ ¼ï¼Œæ–°å»ºæ–‡æ¡£è¿›è¡Œå¡«å†™ï¼›</li>\n</ol>\n<hr>\n<h3 id=\"å‡†å¤‡\"><a href=\"#å‡†å¤‡\" class=\"headerlink\" title=\"å‡†å¤‡\"></a>å‡†å¤‡</h3><ul>\n<li>å¯¹æ¥äºº</li>\n<li>äº¤æ¥å†…å®¹</li>\n<li>äº¤æ¥å®Œæˆæ ‡å‡†</li>\n<li>äº¤æ¥å®Œæˆæ—¶é—´ç‚¹</li>\n<li>è¿›åº¦ï¼ˆæ³¨æ„å®šæœŸåé¦ˆï¼‰</li>\n</ul>\n<h3 id=\"é¡¹ç›®\"><a href=\"#é¡¹ç›®\" class=\"headerlink\" title=\"é¡¹ç›®\"></a>é¡¹ç›®</h3><ul>\n<li>é¡¹ç›®æ¼”ç¤º<ul>\n<li>é¡¹ç›®å…¥å£</li>\n<li>é¡¹ç›®ä½¿ç”¨ä¸»æµç¨‹</li>\n</ul>\n</li>\n<li>é¡¹ç›®è¿è¡Œéœ€è¦çš„é…ç½®</li>\n<li>é¡¹ç›®æ‰¿è½½çš„ä¸šåŠ¡ï¼ˆè¯¦ç»†ï¼‰</li>\n<li>é¡¹ç›®ç»“æ„</li>\n<li>ä½¿ç”¨çš„æŠ€æœ¯<ul>\n<li>å¼€æºæ¡†æ¶</li>\n<li>Hybridæ¡†æ¶</li>\n<li>JNIï¼ˆæ³¨æ˜æ”¯æŒæ¶æ„ï¼‰</li>\n<li>æŠ€æœ¯é€‰å‹åŸå› </li>\n</ul>\n</li>\n<li>æ¨¡å—åˆ’åˆ†<ul>\n<li>åˆ’åˆ†æ ‡å‡†</li>\n<li>æ¨¡å—åŠŸèƒ½</li>\n<li>æ¨¡å—è´Ÿè´£äºº</li>\n</ul>\n</li>\n<li>ä»£ç <ul>\n<li>å‘ï¼ˆå¸¦æœ‰Bugçš„åœ°æ–¹ï¼Œæè¿°è¯·å§”å©‰ä¸€ç‚¹ï¼‰</li>\n<li>é€»è¾‘å¤æ‚ | å®ç°å¤æ‚çš„åœ°æ–¹</li>\n<li>å»ºè®®é‡æ„çš„åœ°æ–¹</li>\n<li>æäº¤<ul>\n<li>åˆ†æ”¯ç®¡ç†</li>\n<li>åˆ†æ”¯å‘½å</li>\n<li>commitæäº¤è§„èŒƒ</li>\n<li>åˆ†æ”¯åˆå¹¶æ–¹å¼</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>æ–‡æ¡£<ul>\n<li>ç›¸å…³æ–‡æ¡£</li>\n<li>æ›´æ–°é¢‘ç‡ï¼ˆè§„èŒƒï¼‰</li>\n</ul>\n</li>\n<li>ç¡¬ä»¶èµ„æº<ul>\n<li>è§„æ ¼</li>\n<li>å¦‚ä½•ä½¿ç”¨</li>\n<li>ç”³è¯·æµç¨‹</li>\n<li>è®¾å¤‡ä½¿ç”¨æƒ…å†µï¼ˆå¤šå°‘å°åœ¨ä½¿ç”¨ä¸­ï¼‰</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"å¼€å‘æµç¨‹\"><a href=\"#å¼€å‘æµç¨‹\" class=\"headerlink\" title=\"å¼€å‘æµç¨‹\"></a>å¼€å‘æµç¨‹</h3><ul>\n<li>è¿­ä»£çš„é‡è¦æ—¶é—´èŠ‚ç‚¹ä»¥åŠèŠ‚ç‚¹ä»»åŠ¡</li>\n<li>è¶…å‡ºèŠ‚ç‚¹æœªå®Œæˆä»»åŠ¡è¡¥æ•‘æªæ–½</li>\n<li>å‡ºäº†ç´§æ€¥é—®é¢˜å¦‚ä½•å¤„ç†ï¼ˆä¸»è¦æ˜¯çº¿ä¸ŠCrashï¼‰</li>\n<li>Storyä»æå‡ºåˆ°ä¸Šçº¿çš„è¿‡ç¨‹<ul>\n<li>POå¦‚ä½•æå‡ºStory</li>\n<li>æ¥å£å¦‚ä½•å®šä¹‰</li>\n<li>è”è°ƒæ–¹å¼</li>\n<li>å¦‚ä½•ææµ‹</li>\n<li>Bugç®¡ç†</li>\n</ul>\n</li>\n<li>ç‹¬ç«‹APP<ul>\n<li>ç­¾å</li>\n<li>å‘å¸ƒæµç¨‹</li>\n</ul>\n</li>\n<li>ç‰ˆæœ¬å‡çº§æ–¹å¼å’Œè§„èŒƒ</li>\n</ul>\n<h3 id=\"å·¥å…·\"><a href=\"#å·¥å…·\" class=\"headerlink\" title=\"å·¥å…·\"></a>å·¥å…·</h3><ul>\n<li>Appæœ¬èº«çš„Debugå·¥å…·</li>\n<li>æ‰“åŒ…å¹³å°çš„é…ç½®ä½¿ç”¨</li>\n<li>åŒ…ç®¡ç†å¹³å°ï¼ˆMVNä»“åº“åœ°å€ï¼‰</li>\n<li>æµ‹è¯•å·¥å…·ã€è´¦å·</li>\n</ul>\n<h3 id=\"é¡¹ç›®ç›‘æµ‹\"><a href=\"#é¡¹ç›®ç›‘æµ‹\" class=\"headerlink\" title=\"é¡¹ç›®ç›‘æµ‹\"></a>é¡¹ç›®ç›‘æµ‹</h3><ul>\n<li>CrashLog<ul>\n<li>å¦‚ä½•æŸ¥è¯¢</li>\n</ul>\n</li>\n<li>æ‰“ç‚¹<ul>\n<li>æ”¶é›†ä¸Šä¼ è§„åˆ™</li>\n<li>åˆ’åˆ†ç»´åº¦ï¼ˆè¯¸å¦‚ï¼šæ˜¯å¦åŒºåˆ†çº¿ä¸Šå’Œbetaç¯å¢ƒï¼‰</li>\n<li>å­—æ®µå«ä¹‰</li>\n<li>æŸ¥è¯¢æ–¹å¼</li>\n</ul>\n</li>\n<li>ç›‘æµ‹æ•°æ®æœ‰æ— æŠ¥è¡¨ï¼Œå¦‚ä½•æ·»åŠ </li>\n<li>é¡¹ç›®å½“å‰é‡è¦æ•°æ®ï¼ˆè¯·ä»”ç»†æ•´ç†ï¼Œä½œä¸ºé¡¹ç›®å½“å‰çŠ¶æ€çš„å¿«ç…§ï¼Œä»¥ä¾›æ—¥åè¿›è¡Œå¯¹æ¯”ï¼‰</li>\n</ul>\n<h3 id=\"åˆä½œèµ„æº\"><a href=\"#åˆä½œèµ„æº\" class=\"headerlink\" title=\"åˆä½œèµ„æº\"></a>åˆä½œèµ„æº</h3><ul>\n<li>QA</li>\n<li>åç«¯</li>\n<li>UED</li>\n<li>PO</li>\n<li>ç›¸å…³é¡¹ç›®è´Ÿè´£äººï¼ˆæ¯”å¦‚å¹³å°ï¼‰</li>\n</ul>\n<h3 id=\"å…¶ä½™\"><a href=\"#å…¶ä½™\" class=\"headerlink\" title=\"å…¶ä½™\"></a>å…¶ä½™</h3><ul>\n<li>æœ‰æ²¡æœ‰åˆ«çš„éœ€è¦æ³¨æ„çš„ç‚¹</li>\n</ul>\n<h3 id=\"è§„åˆ’\"><a href=\"#è§„åˆ’\" class=\"headerlink\" title=\"è§„åˆ’\"></a>è§„åˆ’</h3><ul>\n<li>æ‰¾POäº†è§£åæœŸè§„åˆ’</li>\n<li>ç¬¬ä¸€æœŸStoryçš„å¼€å‘æ—¶é—´</li>\n<li>ä¸€æ®µæ—¶é—´å†…éœ€è¦çš„äººåŠ›</li>\n<li>é¡¹ç›®åæœŸè§„åˆ’</li>\n</ul>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["æŠ€æœ¯æµ"]},{"title":"åšå®¢å·¥å…·","url":"https://lilei.pro/2016/01/14/åšå®¢å·¥å…·/","content":"<blockquote>\n<p>ä¸€äº›æé«˜ç½‘ç«™ä¸åšå®¢ç¼–è¾‘ã€æµè§ˆæ•ˆç‡çš„å·¥å…·</p>\n</blockquote>\n<hr>\n<a id=\"more\"></a>\n<h2 id=\"Markdownç¼–è¾‘å·¥å…·\"><a href=\"#Markdownç¼–è¾‘å·¥å…·\" class=\"headerlink\" title=\"Markdownç¼–è¾‘å·¥å…·\"></a>Markdownç¼–è¾‘å·¥å…·</h2><p><a href=\"http://http://www.dillinger.io/\" target=\"_blank\" rel=\"noopener\">dillinger.io</a> åœ¨çº¿mdç¼–è¾‘å™¨ï¼Œæ‰€è§å³æ‰€å¾—</p>\n<hr>\n<h2 id=\"hexoçš„å‘\"><a href=\"#hexoçš„å‘\" class=\"headerlink\" title=\"hexoçš„å‘\"></a>hexoçš„å‘</h2><p>titleä¸­ä¸å¯ä»¥åŒ…å«è‹±æ–‡çš„<code>[</code> <code>]</code> <code>*</code>å­—ç¬¦ï¼Œå…¶ä½™ç¦å¿Œå­—ç¬¦ç›®å‰å°šæœªé‡åˆ°</p>\n<hr>\n<h2 id=\"é¦–é¡µæ–‡ç« â€œå±•å¼€æ›´å¤šâ€\"><a href=\"#é¦–é¡µæ–‡ç« â€œå±•å¼€æ›´å¤šâ€\" class=\"headerlink\" title=\"é¦–é¡µæ–‡ç« â€œå±•å¼€æ›´å¤šâ€\"></a>é¦–é¡µæ–‡ç« â€œå±•å¼€æ›´å¤šâ€</h2><p>é»˜è®¤æƒ…å†µä¸‹é¦–é¡µæ–‡ç« æ˜¯å…¨æ–‡å±•ç¤ºçš„ï¼Œå¾ˆä¸å‹å¥½ã€‚</p>\n<p>åœ¨æ–‡ä»¶ä¸­å¢åŠ <code>&lt;!--more--&gt;</code>æ ‡ç­¾ï¼Œå³å¯å®ç°â€œå±•å¼€æ›´å¤šâ€åŠŸèƒ½ã€‚</p>\n<hr>\n<h2 id=\"å˜æ›´å†å²\"><a href=\"#å˜æ›´å†å²\" class=\"headerlink\" title=\"å˜æ›´å†å²\"></a>å˜æ›´å†å²</h2><ul>\n<li><strong>2016.02.26</strong> ä¿®æ”¹<code>themes/landscape/source/css/_partial/article.styl</code>ä¸­çš„<code>.article-entry</code>ä¸‹é¢<code>img, video</code>çš„<code>max-width</code>ï¼Œä»<code>100%</code>æ”¹ä¸º<code>70%</code></li>\n</ul>\n<hr>\n<h3 id=\"Never-Ending\"><a href=\"#Never-Ending\" class=\"headerlink\" title=\"===Never Ending===\"></a><em>===Never Ending===</em></h3><hr>\n","categories":[],"tags":["å·¥ä½œæ•ˆç‡"]},{"title":"åŠå¹´æ¥æˆ‘åƒè¿‡çš„é‚£äº›è›‹ç™½ç²‰","url":"https://lilei.pro/2016/01/14/åŠå¹´æ¥æˆ‘åƒè¿‡çš„é‚£äº›è›‹ç™½ç²‰/","content":"<p>ç»ƒèº«ä½“çš„äººå¤§å¤šä¼šç»å†ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>\n<ol>\n<li>åˆæ¬¡åŠå¡ï¼Œæ²¡è¯·è¿‡æ•™ç»ƒï¼Œè‡ªå·±åœ¨å¥èº«æˆ¿é‡Œæ¼«æ— ç›®çš„åœ°ä¹±ç©</li>\n<li>æœ‰ç›®çš„æœ‰è®¡åˆ’åœ°è¿›è¡Œç‹¬ç«‹è®­ç»ƒ</li>\n<li>æ³¨é‡æ—¥å¸¸é¥®é£Ÿä¸­è›‹ç™½è´¨çš„è¡¥å……ï¼Œä¸€èˆ¬ä¼šä»æ°´ç…®è›‹å¼€å§‹ï¼Œè¿›é˜¶çš„ä¼šé€‰æ‹©é¸¡èƒ¸è‚‰</li>\n<li>æ¥è§¦å¹¶ä½¿ç”¨è›‹ç™½ç²‰</li>\n<li>è¿›ä¸€æ­¥æ¥è§¦è‚Œé…¸ã€æ°®æ³µã€BCAAsï¼ˆæ”¯é“¾æ°¨é…¸ï¼‰ã€è°·æ°¨é…°èƒºä¹ƒè‡³ä¿ƒç¾ç­‰</li>\n<li>å·²ç»è¶…å‡ºäº†ç¬”è€…ç›®å‰è®¤çŸ¥é˜¶æ®µ</li>\n</ol>\n<p>ç”±äºè‡ªå·±ä»ä½¿ç”¨è¡¥å‰‚ä»¥æ¥ï¼Œé™†ç»­å°è¯•è¿‡äº†å¸‚é¢ä¸Šå‡ ç§å¸¸è§çš„å“ç‰Œå’Œå£å‘³ï¼Œè¿™é‡Œæ•´ç†å‡ºæ¥ï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åå¯¹æ¯”é€‰æ‹©ï¼Œä¹Ÿå¸Œæœ›ä¸ºå°šæœªæ¥è§¦è¡¥å‰‚çš„æœ‹å‹æä¾›ä¸€äº›åˆçº§çš„çŸ¥è¯†ã€‚</p>\n<hr>\n<a id=\"more\"></a>\n<p>ä¸‹é¢ä¸€ä¸€ç»†æ•°ï¼Œå°±<strong>ä»·æ ¼ã€å£å‘³ã€è›‹ç™½è´¨å«é‡ã€æ€§ä»·æ¯”</strong>ç­‰å‡ ä¸ªæ–¹é¢ï¼Œå¯¹æ¯”ä¸€ä¸‹è¿™å‡ ç§ç²‰ã€‚</p>\n<ul>\n<li>è¡¨æ ¼ä¸­åˆ—å‡ºçš„æ¯ä¸€ç§ç²‰ï¼Œå‡ä¸ºç¬”è€…äº²èº«ä½¿ç”¨è¿‡ã€‚</li>\n<li>å›¾ç‰‡ã€ä»·æ ¼å‡æ¥è‡ªäº<a href=\"http://www.iherb.com?rcode=LSH141\" target=\"_blank\" rel=\"noopener\">www.iherb.com</a>ï¼Œæˆªå–æ—¶é—´ä¸º2016.1.17ã€‚è®¡ä»·æœªåŠ å…¥æ–°äººä¼˜æƒ ã€èŠ‚å‡æ—¥ä¿ƒé”€ç­‰å› ç´ ã€‚</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>åç§°</th>\n<th>ä»·æ ¼</th>\n<th>é‡é‡</th>\n<th>æ¯æ¡¶ä»½æ•°</th>\n<th>æ¯ä»½è›‹ç™½è´¨å«é‡/g</th>\n<th>æ¯ä»½æ”¯é“¾æ°¨é…¸å«é‡/g</th>\n<th>æ¯ä»½è°·æ°¨é…°èƒºå«é‡/g</th>\n<th>å£å‘³</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Optimum/æ¬§æ™®ç‰¹è’™</td>\n<td>$65</td>\n<td>5ç£…</td>\n<td>74</td>\n<td>24</td>\n<td>5.5</td>\n<td>4</td>\n<td>Double Rich Chocolate</td>\n</tr>\n<tr>\n<td>Bio-X</td>\n<td>$65</td>\n<td>5ç£…</td>\n<td>65</td>\n<td>27</td>\n<td>æœªçŸ¥</td>\n<td>æœªçŸ¥</td>\n<td>Chocolate</td>\n</tr>\n<tr>\n<td>Dymatize/è¿ªé©¬æ³°å…¹</td>\n<td>$58</td>\n<td>5ç£…</td>\n<td>62</td>\n<td>25</td>\n<td>5.6</td>\n<td>4.4</td>\n<td>Chocolate Fudge</td>\n</tr>\n<tr>\n<td>MRM</td>\n<td>$59</td>\n<td>5ç£…</td>\n<td>73</td>\n<td>22</td>\n<td>4.6</td>\n<td>4.88</td>\n<td>Strawberry</td>\n</tr>\n<tr>\n<td>BSN Syntha-6/å…­é‡çŸ©é˜µ</td>\n<td>$60</td>\n<td>5ç£…</td>\n<td>48</td>\n<td>22</td>\n<td>æœªçŸ¥</td>\n<td>æœªçŸ¥</td>\n<td>Vanilla Ice Cream</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"Optimum-æ¬§æ™®ç‰¹è’™-é‡‘ç‰Œä¹³æ¸…è›‹ç™½\"><a href=\"#Optimum-æ¬§æ™®ç‰¹è’™-é‡‘ç‰Œä¹³æ¸…è›‹ç™½\" class=\"headerlink\" title=\"Optimum/æ¬§æ™®ç‰¹è’™ é‡‘ç‰Œä¹³æ¸…è›‹ç™½\"></a>Optimum/æ¬§æ™®ç‰¹è’™ é‡‘ç‰Œä¹³æ¸…è›‹ç™½</h4><p><img src=\"/img/160114_my_whey_history_last_6_months/optimum.jpg\" alt=\"\"></p>\n<ul>\n<li>bodybuilding.comä¸Šæ’åç¬¬ä¸€çš„ä¹³æ¸…è›‹ç™½</li>\n<li>è›‹ç™½è´¨çº¯åº¦é«˜ï¼Œæ„å‘³ç€åŒæ ·æ˜¯5ç£…ï¼Œå¯ä»¥æä¾›æ›´å¤šçš„ä»½æ•°</li>\n<li>å£å‘³æ¸…æ·¡ï¼Œå®¹æ˜“æ‘‡åŒ€</li>\n<li><a href=\"http://www.iherb.com/Optimum-Nutrition-100-Whey-Gold-Standard-Double-Rich-Chocolate-5-lbs-2-27-kg/27509?rcode=LSH141\" target=\"_blank\" rel=\"noopener\">iherbè´­ä¹°é“¾æ¥</a></li>\n</ul>\n<hr>\n<h4 id=\"Bio-X-Power-Whey-Complex-å¤åˆä¹³æ¸…è›‹ç™½\"><a href=\"#Bio-X-Power-Whey-Complex-å¤åˆä¹³æ¸…è›‹ç™½\" class=\"headerlink\" title=\"Bio-X Power Whey Complex å¤åˆä¹³æ¸…è›‹ç™½\"></a>Bio-X Power Whey Complex å¤åˆä¹³æ¸…è›‹ç™½</h4><p><img src=\"/img/160114_my_whey_history_last_6_months/biox.jpg\" alt=\"\"></p>\n<ul>\n<li>ç¬”è€…å°è¯•çš„ç¬¬ä¸€æ¡¶è›‹ç™½ç²‰ï¼Œ<strong>@é¡¾è€å¸ˆ</strong>æ¨è</li>\n<li>æ·˜å®è´­ä¹°ï¼Œæ®å–å®¶è¡¨ç¤ºæ˜¯æ¥è‡ªé¦™æ¸¯bcshopä»£è´­</li>\n<li>iherbä¸å”®å–</li>\n<li>å› è´­ä¹°é€”å¾„å•ä¸€ï¼Œä¸”ä½¿ç”¨è€…å°‘ï¼Œä¸æ¨è</li>\n</ul>\n<hr>\n<h4 id=\"Dymatizeï¼è¿ªé©¬æ³°å…¹-Eliteç²¾è‹±ä¹³æ¸…è›‹ç™½\"><a href=\"#Dymatizeï¼è¿ªé©¬æ³°å…¹-Eliteç²¾è‹±ä¹³æ¸…è›‹ç™½\" class=\"headerlink\" title=\"Dymatizeï¼è¿ªé©¬æ³°å…¹ Eliteç²¾è‹±ä¹³æ¸…è›‹ç™½\"></a>Dymatizeï¼è¿ªé©¬æ³°å…¹ Eliteç²¾è‹±ä¹³æ¸…è›‹ç™½</h4><p><img src=\"/img/160114_my_whey_history_last_6_months/dymatize.jpg\" alt=\"\"></p>\n<ul>\n<li>æ€§ä»·æ¯”é«˜</li>\n<li>å£å‘³æ¸…æ·¡ï¼Œå®¹æ˜“æ‘‡åŒ€</li>\n<li>ç›¸è¾ƒäºå…¶å®ƒè›‹ç™½ç²‰ï¼ŒDymatizeçš„ç²‰åƒäº†ä¹‹åä¼šæœ‰å¼ºçƒˆçš„å±æ„â€¦</li>\n<li><a href=\"http://www.iherb.com/Dymatize-Nutrition-Elite-100-Whey-Protein-Chocolate-Fudge-5-lbs-2-270-g/51086?rcode=LSH141\" target=\"_blank\" rel=\"noopener\">iherbè´­ä¹°é“¾æ¥</a></li>\n</ul>\n<hr>\n<h4 id=\"MRM\"><a href=\"#MRM\" class=\"headerlink\" title=\"MRM\"></a>MRM</h4><p><img src=\"/img/160114_my_whey_history_last_6_months/mrm.jpg\" alt=\"\"></p>\n<ul>\n<li>æ€§ä»·æ¯”é«˜</li>\n<li>è‰è“å£å‘³ï¼Œ<strong>é‡Œé¢å±…ç„¶æœ‰è‰è“ç²’ï¼ï¼ï¼</strong>å£æ„Ÿå¾®ç”œï¼Œæœ‰ç‚¹è‰è“å¥¶æ˜”çš„æ„Ÿè§‰ï¼ˆï¼‹è„±è„‚ç‰›å¥¶ï¼‰ã€‚</li>\n<li>ç”¨æ‘‡æ¯æ‘‡åŒ€æ—¶ï¼Œæ³¡æ²«éå¸¸å¤šï¼Œå°¤å…¶æ˜¯æ­é…è„±è„‚ç‰›å¥¶è€Œéçº¯å‡€æ°´ã€‚å¯¼è‡´æ¸…æ´—æ¯å­å¾ˆéº»çƒ¦</li>\n<li><a href=\"http://www.iherb.com/MRM-Metabolic-Whey-100-Premium-Whey-Protein-Strawberry-5-lbs-2270-g/7029?rcode=LSH141\" target=\"_blank\" rel=\"noopener\">iherbè´­ä¹°é“¾æ¥</a></li>\n</ul>\n<hr>\n<h3 id=\"BSN-Syntha-6-å…­é‡çŸ©é˜µ\"><a href=\"#BSN-Syntha-6-å…­é‡çŸ©é˜µ\" class=\"headerlink\" title=\"BSN Syntha-6 å…­é‡çŸ©é˜µ\"></a>BSN Syntha-6 å…­é‡çŸ©é˜µ</h3><p><img src=\"/img/160114_my_whey_history_last_6_months/bsn.jpg\" alt=\"\"></p>\n<ul>\n<li>ä¸¥æ ¼åœ°è¯´è¿™æ˜¯å¤§ä¼—æ‰€è°“çš„â€œå¢è‚Œç²‰â€ï¼Œå¹¶éä¹³æ¸…è›‹ç™½ç²‰</li>\n<li>ç¢³æ°´åŒ–åˆç‰©å«é‡é«˜ï¼Œçƒ­é‡é«˜</li>\n<li>æ—¥å¸¸ç”¨é‡å¤§ï¼Œæ¯æ¡¶åªèƒ½åƒ25å¤©å·¦å³</li>\n<li>é¦™è‰å£å‘³å¾ˆç”œï¼Œå£æ„Ÿæœ€æ£’</li>\n<li><a href=\"http://www.iherb.com/BSN-Finish-First-Syntha-6-Protein-Powder-Drink-Mix-Vanilla-Ice-Cream-5-0-lbs-2-27-kg/24884?rcode=LSH141\" target=\"_blank\" rel=\"noopener\">iherbè´­ä¹°é“¾æ¥</a></li>\n</ul>\n<hr>\n<p>ä»¥ä¸Šå°±æ˜¯ç¬”è€…ç›®å‰ä¸ºæ­¢ä½¿ç”¨è¿‡çš„ä¹³æ¸…è›‹ç™½äº†ï¼Œé™¤äº†Optimumçš„åƒäº†ä¸¤æ¡¶ï¼ˆä¸€æ¡¶æ¥è‡ªäº¬ä¸œï¼Œä¸€æ¡¶æ¥è‡ªiherbï¼‰ï¼Œå…¶å®ƒå“ç‰Œéƒ½æ˜¯ä¸€æ¡¶ã€‚åœ¨è¿™é‡Œå†ä¸€æ¬¡æ¨èè¡¥å‰‚æµ·æ·˜ç½‘ç«™<a href=\"www.iherb.com?rcode=LSH141\">iherb</a>ï¼Œç»å¸¸ä¸å®šæœŸæ¨å‡ºæŠ˜æ‰£æ´»åŠ¨ï¼Œæ¯”å¦‚æ–°äººå‡$10ä¼˜æƒ ã€é»‘äº”æŠ˜ä¸Š8æŠ˜ä¼˜æƒ ï¼Œè€Œä¸”é¡ºä¸°å¿«é€’æ»¡Â¥40æ˜¯å…å›½é™…ä¸å›½å†…é‚®è´¹çš„ï¼Œå³ä½¿ä¸å…é‚®ï¼Œé¡ºä¸°çš„é‚®è´¹ä¹Ÿåªæœ‰$2ã€‚ä¸å…¶åœ¨æ·˜å®ã€äº¬ä¸œä¸Šæå¿ƒåŠèƒ†åœ°ä¹°ä»£è´­ï¼Œè¿˜ä¸å¦‚è‡ªå·±æµ·æ·˜æ¥çš„åˆ’ç®—ã€‚</p>\n<p>è¿™é‡Œæä¾›ä¸€ä¸‹æˆ‘çš„<strong>iherb</strong>ä¼˜æƒ ç ï¼š<strong>LSH141</strong>ï¼Œåœ¨æ”¶é“¶å°ç»“è´¦æ—¶å¡«å†™è¿›å»ï¼Œä¼šæœ‰-$5~$10ä¸ç­‰çš„ä¼˜æƒ ï¼Œæˆ‘å½“æ—¶é¦–å•å‡äº†$10ï¼Œç°åœ¨è²Œä¼¼ä¼˜æƒ åŠ›åº¦é™ä½äº†ã€‚è€Œä¸”ä¸€æ—¦ä½ ä½¿ç”¨è¿™ä¸ªä¼˜æƒ ç è´­ä¹°æˆåŠŸï¼Œæˆ‘ä¹Ÿå°†è·å¾—ä¸€å®šè¡¥è´´é‡‘é¢è¿›å…¥è´¦æˆ·ï¼Œä¸¤å…¨å…¶ç¾ã€‚</p>\n<hr>\n<p>æœ€åè®²è®²è‚Œè‚‰ç§‘æŠ€ï¼ˆMuscleTechï¼‰è¿™ä¸ªç‰Œå­ã€‚é¦–å…ˆä»çŸ¥ååº¦ä¸Šæ¥è¯´ï¼Œè‚Œè‚‰ç§‘æŠ€åœ¨å›½å†…å¤§æ¦‚å¤„äºæ•°ä¸€æ•°äºŒçš„åœ°ä½ã€‚è€Œä¸”é‚€è¯·åˆ°äº†è²å°”è¥¿æ–¯ä»£è¨€ï¼ŒçœŸæ˜¯æ•¢ç ¸é’±å•Šã€‚ç¬”è€…æ²¡æœ‰å°è¯•è¿‡è‚Œè‚‰ç§‘æŠ€çš„è›‹ç™½ç²‰ï¼Œä½†ä»ç¬”è€…è´­ä¹°è¿‡å®ƒçš„å¤åˆè‚Œé…¸ä¸Šæ¥çœ‹ï¼ŒåŒ…è£…æ¯”èµ·å…¶å®ƒå‡ ä¸ªå“ç‰Œç•¥æ˜¾ç®€é™‹ã€‚æ€»çš„çœ‹æ¥ä¸Dymatizeã€MRMè¿™äº›ä½ä»·äº§å“æ¯”èµ·æ¥ï¼Œæ€§ä»·æ¯”ä¸é«˜ï¼›è›‹ç™½è´¨å«é‡åˆæ¯”ä¸è¿‡Optimumã€‚è‡³äºè´­ä¸è´­ä¹°ï¼Œå°±çœ‹ä½ å¯¹è¿™ä¸ªå“ç‰Œçš„ä¿¡ä»°ç¨‹åº¦äº†ã€‚</p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["å¤§ä¿å¥"]},{"title":"Hello World","url":"https://lilei.pro/2016/01/10/hello-world/","content":"<p>Welcome to <a href=\"http://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"http://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"http://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<hr>\n<a id=\"more\"></a>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"http://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n<hr>\n<h3 id=\"Ending\"><a href=\"#Ending\" class=\"headerlink\" title=\"===Ending===\"></a><em>===Ending===</em></h3><hr>\n","categories":[],"tags":["å·¥ä½œæ•ˆç‡"]},{"title":"about","url":"https://lilei.pro/about/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"https://lilei.pro/tags/index.html","content":"","categories":[],"tags":[]},{"title":"link","url":"https://lilei.pro/link/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"https://lilei.pro/search/index.html","content":"","categories":[],"tags":[]}]